<h1 class="title">dfa</h1>  
<p>Data flow analysis for Nim. We transform the AST into a linear list of instructions first to make this easier to handle: There are only 2 different branching instructions: 'goto X' is an unconditional goto, 'fork X' is a conditional goto (either the next instruction or 'X' can be taken). Exhaustive case statements are translated so that the last branch is transformed into an 'else' branch. <code>return</code> and <code>break</code> are all covered by 'goto'.</p> <p>Control flow through exception handling: Contrary to popular belief, exception handling doesn't cause many problems for this DFA representation, <code>raise</code> is a statement that <code>goes to</code> the outer <code>finally</code> or <code>except</code> if there is one, otherwise it is the same as <code>return</code>. Every call is treated as a call that can potentially <code>raise</code>. However, without a surrounding <code>try</code> we don't emit these <code>fork ReturnLabel</code> instructions in order to speed up the dataflow analysis passes.</p> <p>The data structures and algorithms used here are inspired by "A Graph–Free Approach to Data–Flow Analysis" by Markus Mohnen. <a href="https://link.springer.com/content/pdf/10.1007/3-540-45937-5_6.pdf">https://link.springer.com/content/pdf/10.1007/3-540-45937-5_6.pdf</a></p>  <h2 id="6">Imports</h2> <dl> <a href="ast.html">ast</a>, <a href="types.html">types</a>, <a href="lineinfos.html">lineinfos</a>, <a href="renderer.html">renderer</a>, <a href="asciitables.html">asciitables</a>, <a href="patterns.html">patterns</a> </dl>  <h2 id="7">Types</h2> <dl>  <dt><pre id="InstrKind" data-language="nim">InstrKind = enum
  goto, fork, def, use</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/compiler/dfa.nim#L37" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/compiler/dfa.nim#L37" target="_blank">Edit</a> </dd>  <dt><pre id="Instr" data-language="nim">Instr = object
  n*: PNode
  case kind*: InstrKind
  of goto, fork:
    dest*: int
  else:
    nil</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/compiler/dfa.nim#L39" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/compiler/dfa.nim#L39" target="_blank">Edit</a> </dd>  <dt><pre id="ControlFlowGraph" data-language="nim">ControlFlowGraph = seq[Instr]</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/compiler/dfa.nim#L45" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/compiler/dfa.nim#L45" target="_blank">Edit</a> </dd>  <dt><pre id="InstrTargetKind" data-language="nim">InstrTargetKind = enum
  None, Full, Partial</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/compiler/dfa.nim#L595" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/compiler/dfa.nim#L595" target="_blank">Edit</a> </dd> </dl>  <h2 id="12">Procs</h2> <dl>  <dt><pre id="echoCfg%2CControlFlowGraph%2Cint" data-language="nim">proc echoCfg(c: ControlFlowGraph; start = 0; last = -1) {...}{.deprecated,
    raises: [Exception], tags: [RootEffect].}</pre></dt> <dd> <div class="deprecation-message"> <b>Deprecated</b> </div> echos the ControlFlowGraph for debugging purposes. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/compiler/dfa.nim#L90" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/compiler/dfa.nim#L90" target="_blank">Edit</a> </dd>  <dt><pre id="skipConvDfa%2CPNode" data-language="nim">proc skipConvDfa(n: PNode): PNode {...}{.raises: [], tags: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/compiler/dfa.nim#L566" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/compiler/dfa.nim#L566" target="_blank">Edit</a> </dd>  <dt><pre id="aliases%2CPNode%2CPNode" data-language="nim">proc aliases(obj, field: PNode): bool {...}{.raises: [Exception], tags: [RootEffect].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/compiler/dfa.nim#L576" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/compiler/dfa.nim#L576" target="_blank">Edit</a> </dd>  <dt><pre id="instrTargets%2CPNode%2CPNode" data-language="nim">proc instrTargets(insloc, loc: PNode): InstrTargetKind {...}{.raises: [Exception],
    tags: [RootEffect].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/compiler/dfa.nim#L598" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/compiler/dfa.nim#L598" target="_blank">Edit</a> </dd>  <dt><pre id="isAnalysableFieldAccess%2CPNode%2CPSym" data-language="nim">proc isAnalysableFieldAccess(orig: PNode; owner: PSym): bool {...}{.raises: [],
    tags: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/compiler/dfa.nim#L605" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/compiler/dfa.nim#L605" target="_blank">Edit</a> </dd>  <dt><pre id="constructCfg%2CPSym%2CPNode" data-language="nim">proc constructCfg(s: PSym; body: PNode): ControlFlowGraph {...}{.raises: [Exception],
    tags: [RootEffect].}</pre></dt> <dd> constructs a control flow graph for <code>body</code>. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/compiler/dfa.nim#L761" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/compiler/dfa.nim#L761" target="_blank">Edit</a> </dd> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2021 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/compiler/dfa.html" class="_attribution-link">https://nim-lang.org/docs/compiler/dfa.html</a>
  </p>
</div>
