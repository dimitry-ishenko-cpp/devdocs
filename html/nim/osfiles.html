<h1 class="title">std/private/osfiles</h1> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/std/private/osfiles.nim#L1" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/osfiles.nim#L1" target="_blank">Edit</a>    <h2 id="6">Imports</h2> <dl> <a href="since.html">since</a>, <a href="oserrors.html">oserrors</a>, <a href="oscommon.html">oscommon</a>, <a href="ospaths2.html">ospaths2</a>, <a href="ossymlinks.html">ossymlinks</a>, <a href="winlean.html">winlean</a> </dl>   <h2 id="7">Types</h2> <dl> <div id="CopyFlag"> <dt><pre data-language="nim">CopyFlag = enum
  cfSymlinkAsIs,            ## Copy symlinks as symlinks
  cfSymlinkFollow,          ## Copy the files symlinks point to
  cfSymlinkIgnore            ## Ignore symlinks</pre></dt> <dd> Copy options. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/std/private/osfiles.nim#L169" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/osfiles.nim#L169" target="_blank">Edit</a> </dd> </div> <div id="FilePermission"> <dt><pre data-language="nim">FilePermission = enum
  fpUserExec,               ## execute access for the file owner
  fpUserWrite,              ## write access for the file owner
  fpUserRead,               ## read access for the file owner
  fpGroupExec,              ## execute access for the group
  fpGroupWrite,             ## write access for the group
  fpGroupRead,              ## read access for the group
  fpOthersExec,             ## execute access for others
  fpOthersWrite,            ## write access for others
  fpOthersRead               ## read access for others</pre></dt> <dd> <p>File access permission, modelled after UNIX.</p> <p>See also:</p> <ul class="simple">
<li><a title="proc getFilePermissions(filename: string): set[FilePermission]" href="#getFilePermissions,string">getFilePermissions</a></li> <li><a title="proc setFilePermissions(filename: string; permissions: set[FilePermission];
                   followSymlinks = true)" href="#setFilePermissions,string,set[FilePermission]">setFilePermissions</a></li> <li><a href="os.html#FileInfo">os: FileInfo object</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/std/private/osfiles.nim#L44" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/osfiles.nim#L44" target="_blank">Edit</a> </dd> </div> </dl>   <h2 id="12">Procs</h2> <dl> <div id="copyFile-procs-all"> <div id="copyFile,string,string"> <dt><pre data-language="nim">proc copyFile(source, dest: string; options = {cfSymlinkFollow}) {....gcsafe,
    extern: "nos$1", tags: [ReadDirEffect, ReadIOEffect, WriteIOEffect],
    raises: [OSError], forbids: [].}</pre></dt> <dd> <p>Copies a file from <code><span class="Identifier">source</span></code> to <code><span class="Identifier">dest</span></code>, where <code><span class="Identifier">dest</span><span class="Operator">.</span><span class="Identifier">parentDir</span></code> must exist.</p> <p>On non-Windows OSes, <code><span class="Identifier">options</span></code> specify the way file is copied; by default, if <code><span class="Identifier">source</span></code> is a symlink, copies the file symlink points to. <code><span class="Identifier">options</span></code> is ignored on Windows: symlinks are skipped.</p> <p>If this fails, <code><span class="Identifier">OSError</span></code> is raised.</p> <p>On the Windows platform this proc will copy the source file's attributes into dest.</p> <p>On other platforms you need to use <a title="proc getFilePermissions(filename: string): set[FilePermission]" href="#getFilePermissions,string">getFilePermissions</a> and <a title="proc setFilePermissions(filename: string; permissions: set[FilePermission];
                   followSymlinks = true)" href="#setFilePermissions,string,set[FilePermission]">setFilePermissions</a> procs to copy them by hand (or use the convenience <a title="proc copyFileWithPermissions(source, dest: string; ignorePermissionErrors = true;
                        options = {cfSymlinkFollow})" href="#copyFileWithPermissions,string,string">copyFileWithPermissions proc</a>), otherwise <code><span class="Identifier">dest</span></code> will inherit the default permissions of a newly created file for the user.</p> <p>If <code><span class="Identifier">dest</span></code> already exists, the file attributes will be preserved and the content overwritten.</p> <p>On OSX, <code><span class="Identifier">copyfile</span></code> C api will be used (available since OSX 10.5) unless <code><span class="Operator">-</span><span class="Identifier">d</span><span class="Punctuation">:</span><span class="Identifier">nimLegacyCopyFile</span></code> is used.</p> <p>See also:</p> <ul class="simple">
<li><a title="enum CopyFlag" href="#CopyFlag">CopyFlag enum</a></li> <li><a href="osdirs.html#copyDir,string,string">osdirs: copyDir proc</a></li> <li><a title="proc copyFileWithPermissions(source, dest: string; ignorePermissionErrors = true;
                        options = {cfSymlinkFollow})" href="#copyFileWithPermissions,string,string">copyFileWithPermissions proc</a></li> <li><a title="proc tryRemoveFile(file: string): bool" href="#tryRemoveFile,string">tryRemoveFile proc</a></li> <li><a title="proc removeFile(file: string)" href="#removeFile,string">removeFile proc</a></li> <li><a title="proc moveFile(source, dest: string)" href="#moveFile,string,string">moveFile proc</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/std/private/osfiles.nim#L176" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/osfiles.nim#L176" target="_blank">Edit</a> </dd> </div> </div> <div id="copyFileToDir-procs-all"> <div id="copyFileToDir,string,string"> <dt><pre data-language="nim">proc copyFileToDir(source, dir: string; options = {cfSymlinkFollow}) {.
    ...raises: [ValueError, OSError],
    tags: [ReadDirEffect, ReadIOEffect, WriteIOEffect], forbids: [].}</pre></dt> <dd> <p>Copies a file <code><span class="Identifier">source</span></code> into directory <code><span class="Identifier">dir</span></code>, which must exist.</p> <p>On non-Windows OSes, <code><span class="Identifier">options</span></code> specify the way file is copied; by default, if <code><span class="Identifier">source</span></code> is a symlink, copies the file symlink points to. <code><span class="Identifier">options</span></code> is ignored on Windows: symlinks are skipped.</p> <p>See also:</p> <ul class="simple">
<li><a title="enum CopyFlag" href="#CopyFlag">CopyFlag enum</a></li> <li><a title="proc copyFile(source, dest: string; options = {cfSymlinkFollow})" href="#copyFile,string,string">copyFile proc</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/std/private/osfiles.nim#L263" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/osfiles.nim#L263" target="_blank">Edit</a> </dd> </div> </div> <div id="copyFileWithPermissions-procs-all"> <div id="copyFileWithPermissions,string,string"> <dt><pre data-language="nim">proc copyFileWithPermissions(source, dest: string;
                             ignorePermissionErrors = true;
                             options = {cfSymlinkFollow}) {....raises: [OSError],
    tags: [ReadDirEffect, ReadIOEffect, WriteIOEffect], forbids: [].}</pre></dt> <dd> <p>Copies a file from <code><span class="Identifier">source</span></code> to <code><span class="Identifier">dest</span></code> preserving file permissions.</p> <p>On non-Windows OSes, <code><span class="Identifier">options</span></code> specify the way file is copied; by default, if <code><span class="Identifier">source</span></code> is a symlink, copies the file symlink points to. <code><span class="Identifier">options</span></code> is ignored on Windows: symlinks are skipped.</p> <p>This is a wrapper proc around <a title="proc copyFile(source, dest: string; options = {cfSymlinkFollow})" href="#copyFile,string,string">copyFile</a>, <a title="proc getFilePermissions(filename: string): set[FilePermission]" href="#getFilePermissions,string">getFilePermissions</a> and <a title="proc setFilePermissions(filename: string; permissions: set[FilePermission];
                   followSymlinks = true)" href="#setFilePermissions,string,set[FilePermission]">setFilePermissions</a> procs on non-Windows platforms.</p> <p>On Windows this proc is just a wrapper for <a title="proc copyFile(source, dest: string; options = {cfSymlinkFollow})" href="#copyFile,string,string">copyFile proc</a> since that proc already copies attributes.</p> <p>On non-Windows systems permissions are copied after the file itself has been copied, which won't happen atomically and could lead to a race condition. If <code><span class="Identifier">ignorePermissionErrors</span></code> is true (default), errors while reading/setting file attributes will be ignored, otherwise will raise <code><span class="Identifier">OSError</span></code>.</p> <p>See also:</p> <ul class="simple">
<li><a title="enum CopyFlag" href="#CopyFlag">CopyFlag enum</a></li> <li><a title="proc copyFile(source, dest: string; options = {cfSymlinkFollow})" href="#copyFile,string,string">copyFile proc</a></li> <li><a href="osdirs.html#copyDir,string,string">osdirs: copyDir proc</a></li> <li><a title="proc tryRemoveFile(file: string): bool" href="#tryRemoveFile,string">tryRemoveFile proc</a></li> <li><a title="proc removeFile(file: string)" href="#removeFile,string">removeFile proc</a></li> <li><a title="proc moveFile(source, dest: string)" href="#moveFile,string,string">moveFile proc</a></li> <li><a href="osdirs.html#copyDirWithPermissions,string,string">osdirs: copyDirWithPermissions proc</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/std/private/osfiles.nim#L279" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/osfiles.nim#L279" target="_blank">Edit</a> </dd> </div> </div> <div id="getFilePermissions-procs-all"> <div id="getFilePermissions,string"> <dt><pre data-language="nim">proc getFilePermissions(filename: string): set[FilePermission] {....gcsafe,
    extern: "nos$1", tags: [ReadDirEffect], raises: [OSError], forbids: [].}</pre></dt> <dd> <p>Retrieves file permissions for <code><span class="Identifier">filename</span></code>.</p> <p><code><span class="Identifier">OSError</span></code> is raised in case of an error. On Windows, only the <code>readonly</code> flag is checked, every other permission is available in any case.</p> <p>See also:</p> <ul class="simple">
<li><a title="proc setFilePermissions(filename: string; permissions: set[FilePermission];
                   followSymlinks = true)" href="#setFilePermissions,string,set[FilePermission]">setFilePermissions proc</a></li> <li><a title="enum FilePermission" href="#FilePermission">FilePermission enum</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/std/private/osfiles.nim#L60" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/osfiles.nim#L60" target="_blank">Edit</a> </dd> </div> </div> <div id="moveFile-procs-all"> <div id="moveFile,string,string"> <dt><pre data-language="nim">proc moveFile(source, dest: string) {....gcsafe, extern: "nos$1", tags: [
    ReadDirEffect, ReadIOEffect, WriteIOEffect], raises: [OSError], forbids: [].}</pre></dt> <dd> <p>Moves a file from <code><span class="Identifier">source</span></code> to <code><span class="Identifier">dest</span></code>.</p> <p>Symlinks are not followed: if <code><span class="Identifier">source</span></code> is a symlink, it is itself moved, not its target.</p> <p>If this fails, <code><span class="Identifier">OSError</span></code> is raised. If <code><span class="Identifier">dest</span></code> already exists, it will be overwritten.</p> <p>Can be used to <span id="rename-files_1">rename files</span>.</p> <p>See also:</p> <ul class="simple">
<li><a href="osdirs.html#moveDir,string,string">osdirs: moveDir proc</a></li> <li><a title="proc copyFile(source, dest: string; options = {cfSymlinkFollow})" href="#copyFile,string,string">copyFile proc</a></li> <li><a title="proc copyFileWithPermissions(source, dest: string; ignorePermissionErrors = true;
                        options = {cfSymlinkFollow})" href="#copyFileWithPermissions,string,string">copyFileWithPermissions proc</a></li> <li><a title="proc removeFile(file: string)" href="#removeFile,string">removeFile proc</a></li> <li><a title="proc tryRemoveFile(file: string): bool" href="#tryRemoveFile,string">tryRemoveFile proc</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/std/private/osfiles.nim#L378" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/osfiles.nim#L378" target="_blank">Edit</a> </dd> </div> </div> <div id="removeFile-procs-all"> <div id="removeFile,string"> <dt><pre data-language="nim">proc removeFile(file: string) {....gcsafe, extern: "nos$1", tags: [WriteDirEffect],
                                raises: [OSError], forbids: [].}</pre></dt> <dd> <p>Removes the <code><span class="Identifier">file</span></code>.</p> <p>If this fails, <code><span class="Identifier">OSError</span></code> is raised. This does not fail if the file never existed in the first place.</p> <p>On Windows, ignores the read-only attribute.</p> <p>See also:</p> <ul class="simple">
<li><a href="osdirs.html#removeDir,string">osdirs: removeDir proc</a></li> <li><a title="proc copyFile(source, dest: string; options = {cfSymlinkFollow})" href="#copyFile,string,string">copyFile proc</a></li> <li><a title="proc copyFileWithPermissions(source, dest: string; ignorePermissionErrors = true;
                        options = {cfSymlinkFollow})" href="#copyFileWithPermissions,string,string">copyFileWithPermissions proc</a></li> <li><a title="proc tryRemoveFile(file: string): bool" href="#tryRemoveFile,string">tryRemoveFile proc</a></li> <li><a title="proc moveFile(source, dest: string)" href="#moveFile,string,string">moveFile proc</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/std/private/osfiles.nim#L361" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/osfiles.nim#L361" target="_blank">Edit</a> </dd> </div> </div> <div id="setFilePermissions-procs-all"> <div id="setFilePermissions,string,set[FilePermission]"> <dt><pre data-language="nim">proc setFilePermissions(filename: string; permissions: set[FilePermission];
                        followSymlinks = true) {....gcsafe, extern: "nos$1",
    tags: [ReadDirEffect, WriteDirEffect], raises: [OSError], forbids: [].}</pre></dt> <dd> <p>Sets the file permissions for <code><span class="Identifier">filename</span></code>.</p> <p>If <code><span class="Identifier">followSymlinks</span></code> set to true (default) and <code>filename</code> points to a symlink, permissions are set to the file symlink points to. <code><span class="Identifier">followSymlinks</span></code> set to false is a noop on Windows and some POSIX systems (including Linux) on which <code><span class="Identifier">lchmod</span></code> is either unavailable or always fails, given that symlinks permissions there are not observed.</p> <p><code><span class="Identifier">OSError</span></code> is raised in case of an error. On Windows, only the <code>readonly</code> flag is changed, depending on <code>fpUserWrite</code> permission.</p> <p>See also:</p> <ul class="simple">
<li><a title="proc getFilePermissions(filename: string): set[FilePermission]" href="#getFilePermissions,string">getFilePermissions proc</a></li> <li><a title="enum FilePermission" href="#FilePermission">FilePermission enum</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/std/private/osfiles.nim#L95" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/osfiles.nim#L95" target="_blank">Edit</a> </dd> </div> </div> <div id="tryRemoveFile-procs-all"> <div id="tryRemoveFile,string"> <dt><pre data-language="nim">proc tryRemoveFile(file: string): bool {....gcsafe, extern: "nos$1",
    tags: [WriteDirEffect], raises: [], forbids: [].}</pre></dt> <dd> <p>Removes the <code><span class="Identifier">file</span></code>.</p> <p>If this fails, returns <code><span class="Identifier">false</span></code>. This does not fail if the file never existed in the first place.</p> <p>On Windows, ignores the read-only attribute.</p> <p>See also:</p> <ul class="simple">
<li><a title="proc copyFile(source, dest: string; options = {cfSymlinkFollow})" href="#copyFile,string,string">copyFile proc</a></li> <li><a title="proc copyFileWithPermissions(source, dest: string; ignorePermissionErrors = true;
                        options = {cfSymlinkFollow})" href="#copyFileWithPermissions,string,string">copyFileWithPermissions proc</a></li> <li><a title="proc removeFile(file: string)" href="#removeFile,string">removeFile proc</a></li> <li><a title="proc moveFile(source, dest: string)" href="#moveFile,string,string">moveFile proc</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/std/private/osfiles.nim#L332" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/osfiles.nim#L332" target="_blank">Edit</a> </dd> </div> </div> </dl>   <h2 id="19">Exports</h2> <dl> <a href="oscommon.html#fileExists,string"><span class="Identifier">fileExists</span></a> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2024 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/osfiles.html" class="_attribution-link">https://nim-lang.org/docs/osfiles.html</a>
  </p>
</div>
