<h1 class="title">net</h1>  
<p>This module implements a high-level cross-platform sockets interface. The procedures implemented in this module are primarily for blocking sockets. For asynchronous non-blocking sockets use the <code>asyncnet</code> module together with the <code>asyncdispatch</code> module.</p> <p>The first thing you will always need to do in order to start using sockets, is to create a new instance of the <code>Socket</code> type using the <code>newSocket</code> procedure.</p> <h2 id="ssl">SSL</h2>
<p>In order to use the SSL procedures defined in this module, you will need to compile your application with the <code>-d:ssl</code> flag. See the <a href="net.html#newContext%2Cstring%2Cstring%2Cstring%2Cstring%2Cstring">newContext</a> procedure for additional details.</p> <h2 id="ssl-on-windows">SSL on Windows</h2>
<p>On Windows the SSL library checks for valid certificates. It uses the <code>cacert.pem</code> file for this purpose which was extracted from <code>https://curl.se/ca/cacert.pem</code>. Besides the OpenSSL DLLs (e.g. libssl-1_1-x64.dll, libcrypto-1_1-x64.dll) you also need to ship <code>cacert.pem</code> with your <code>.exe</code> file.</p> <h2 id="examples">Examples</h2> <h3 id="examples-connecting-to-a-server">Connecting to a server</h3>
<p>After you create a socket with the <code>newSocket</code> procedure, you can easily connect it to a server running at a known hostname (or IP address) and port. To do so over TCP, use the example below.</p> <pre class="listing" data-language="nim">var socket = newSocket()
socket.connect("google.com", Port(80))</pre>
<p>For SSL, use the following example (and make sure to compile with <code>-d:ssl</code>):</p> <pre class="listing" data-language="nim">var socket = newSocket()
var ctx = newContext()
wrapSocket(ctx, socket)
socket.connect("google.com", Port(443))</pre>
<p>UDP is a connectionless protocol, so UDP sockets don't have to explicitly call the <a href="net.html#connect%2CSocket%2Cstring">connect</a> procedure. They can simply start sending data immediately.</p> <pre class="listing" data-language="nim">var socket = newSocket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)
socket.sendTo("192.168.0.1", Port(27960), "status\n")</pre> <h3 id="examples-creating-a-server">Creating a server</h3>
<p>After you create a socket with the <code>newSocket</code> procedure, you can create a TCP server by calling the <code>bindAddr</code> and <code>listen</code> procedures.</p> <pre class="listing" data-language="nim">var socket = newSocket()
socket.bindAddr(Port(1234))
socket.listen()</pre>
<p>You can then begin accepting connections using the <code>accept</code> procedure.</p> <pre class="listing" data-language="nim">var client: Socket
var address = ""
while true:
  socket.acceptAddr(client, address)
  echo("Client connected from: ", address)</pre>  <h2 id="6">Imports</h2> <dl> <a href="since.html">since</a>, <a href="nativesockets.html">nativesockets</a>, <a href="os.html">os</a>, <a href="strutils.html">strutils</a>, <a href="times.html">times</a>, <a href="sets.html">sets</a>, <a href="options.html">options</a>, <a href="monotimes.html">monotimes</a>, <a href="ssl_certs.html">ssl_certs</a>, <a href="ssl_config.html">ssl_config</a>, <a href="winlean.html">winlean</a>, <a href="openssl.html">openssl</a>, <a href="posix.html">posix</a>, <a href="posix.html">posix</a> </dl>  <h2 id="7">Types</h2> <dl>  <dt><pre id="Certificate">Certificate = string</pre></dt> <dd> DER encoded certificate <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L109" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L109" target="_blank">Edit</a> </dd>  <dt><pre id="SslError">SslError = object of CatchableError</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L111" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L111" target="_blank">Edit</a> </dd>  <dt><pre id="SslCVerifyMode" data-language="nim">SslCVerifyMode = enum
  CVerifyNone, CVerifyPeer, CVerifyPeerUseEnvVars</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L113" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L113" target="_blank">Edit</a> </dd>  <dt><pre id="SslProtVersion" data-language="nim">SslProtVersion = enum
  protSSLv2, protSSLv3, protTLSv1, protSSLv23</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L116" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L116" target="_blank">Edit</a> </dd>  <dt><pre id="SslContext" data-language="nim">SslContext = ref object
  context*: SslCtx
  referencedData: HashSet[int]
  extraInternal: SslContextExtraInternal</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L119" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L119" target="_blank">Edit</a> </dd>  <dt><pre id="SslAcceptResult" data-language="nim">SslAcceptResult = enum
  AcceptNoClient = 0, AcceptNoHandshake, AcceptSuccess</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L124" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L124" target="_blank">Edit</a> </dd>  <dt><pre id="SslHandshakeType" data-language="nim">SslHandshakeType = enum
  handshakeAsClient, handshakeAsServer</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L127" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L127" target="_blank">Edit</a> </dd>  <dt><pre id="SslClientGetPskFunc" data-language="nim">SslClientGetPskFunc = proc (hint: string): tuple[identity: string, psk: string]</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L130" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L130" target="_blank">Edit</a> </dd>  <dt><pre id="SslServerGetPskFunc" data-language="nim">SslServerGetPskFunc = proc (identity: string): string</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L132" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L132" target="_blank">Edit</a> </dd>  <dt><pre id="SocketImpl" data-language="nim">SocketImpl = object
  fd: SocketHandle
  isBuffered: bool
  buffer: array[0 .. BufferSize, char]
  currPos: int
  bufLen: int
  when defineSsl:
      isSsl: bool
      sslHandle: SslPtr
      sslContext: SslContext
      sslNoHandshake: bool
      sslHasPeekChar: bool
      sslPeekChar: char
      sslNoShutdown: bool

  lastError: OSErrorCode     ## stores the last error on this socket
  domain: Domain
  sockType: SockType
  protocol: Protocol</pre></dt> <dd> socket type <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L147" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L147" target="_blank">Edit</a> </dd>  <dt><pre id="Socket">Socket = ref SocketImpl</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L166" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L166" target="_blank">Edit</a> </dd>  <dt><pre id="SOBool" data-language="nim">SOBool = enum
  OptAcceptConn, OptBroadcast, OptDebug, OptDontRoute, OptKeepAlive,
  OptOOBInline, OptReuseAddr, OptReusePort, OptNoDelay</pre></dt> <dd> Boolean socket options. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L168" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L168" target="_blank">Edit</a> </dd>  <dt><pre id="ReadLineResult" data-language="nim">ReadLineResult = enum
  ReadFullLine, ReadPartialLine, ReadDisconnected, ReadNone</pre></dt> <dd> result for readLineAsync <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L172" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L172" target="_blank">Edit</a> </dd>  <dt><pre id="TimeoutError">TimeoutError = object of CatchableError</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L175" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L175" target="_blank">Edit</a> </dd>  <dt><pre id="SocketFlag" data-language="nim">SocketFlag {...}{.pure.} = enum
  Peek, SafeDisconn          ## Ensures disconnection exceptions (ECONNRESET, EPIPE etc) are not thrown.</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L177" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L177" target="_blank">Edit</a> </dd>  <dt><pre id="IpAddressFamily" data-language="nim">IpAddressFamily {...}{.pure.} = enum
  IPv6,                     ## IPv6 address
  IPv4                       ## IPv4 address</pre></dt> <dd> Describes the type of an IP address <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L185" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L185" target="_blank">Edit</a> </dd>  <dt><pre id="IpAddress" data-language="nim">IpAddress = object
  case family*: IpAddressFamily ## the type of the IP address (IPv4 or IPv6)
  of IpAddressFamily.IPv6:
      address_v6*: array[0 .. 15, uint8] ## Contains the IP address in bytes in
                                         ## case of IPv6
    
  of IpAddressFamily.IPv4:
      address_v4*: array[0 .. 3, uint8] ## Contains the IP address in bytes in
                                        ## case of IPv4</pre></dt> <dd> stores an arbitrary IP address <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L189" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L189" target="_blank">Edit</a> </dd> </dl>  <h2 id="10">Consts</h2> <dl>  <dt><pre id="BufferSize">BufferSize: int = 4000</pre></dt> <dd> size of a buffered socket's buffer <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L143" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L143" target="_blank">Edit</a> </dd>  <dt><pre id="MaxLineLength">MaxLineLength = 1000000</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L144" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L144" target="_blank">Edit</a> </dd> </dl>  <h2 id="12">Procs</h2> <dl>  <dt><pre id="isDisconnectionError%2Cset%5BSocketFlag%5D%2COSErrorCode" data-language="nim">proc isDisconnectionError(flags: set[SocketFlag]; lastError: OSErrorCode): bool {...}{.
    raises: [], tags: [].}</pre></dt> <dd> Determines whether <code>lastError</code> is a disconnection error. Only does this if flags contains <code>SafeDisconn</code>. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L204" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L204" target="_blank">Edit</a> </dd>  <dt><pre id="toOSFlags%2Cset%5BSocketFlag%5D" data-language="nim">proc toOSFlags(socketFlags: set[SocketFlag]): cint {...}{.raises: [], tags: [].}</pre></dt> <dd> Converts the flags into the underlying OS representation. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L222" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L222" target="_blank">Edit</a> </dd>  <dt><pre id="newSocket%2CSocketHandle%2CDomain%2CSockType%2CProtocol" data-language="nim">proc newSocket(fd: SocketHandle; domain: Domain = AF_INET;
               sockType: SockType = SOCK_STREAM;
               protocol: Protocol = IPPROTO_TCP; buffered = true): owned(Socket) {...}{.
    raises: [], tags: [].}</pre></dt> <dd> Creates a new socket as specified by the params. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L230" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L230" target="_blank">Edit</a> </dd>  <dt><pre id="newSocket%2Ccint%2Ccint%2Ccint" data-language="nim">proc newSocket(domain, sockType, protocol: cint; buffered = true;
               inheritable = defined(nimInheritHandles)): owned(Socket) {...}{.
    raises: [OSError], tags: [].}</pre></dt> <dd> <p>Creates a new socket.</p> <p>The SocketHandle associated with the resulting Socket will not be inheritable by child processes by default. This can be changed via the <code>inheritable</code> parameter.</p> <p>If an error occurs OSError will be raised.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L248" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L248" target="_blank">Edit</a> </dd>  <dt><pre id="newSocket%2CDomain%2CSockType%2CProtocol" data-language="nim">proc newSocket(domain: Domain = AF_INET; sockType: SockType = SOCK_STREAM;
               protocol: Protocol = IPPROTO_TCP; buffered = true;
               inheritable = defined(nimInheritHandles)): owned(Socket) {...}{.
    raises: [OSError], tags: [].}</pre></dt> <dd> <p>Creates a new socket.</p> <p>The SocketHandle associated with the resulting Socket will not be inheritable by child processes by default. This can be changed via the <code>inheritable</code> parameter.</p> <p>If an error occurs OSError will be raised.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L263" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L263" target="_blank">Edit</a> </dd>  <dt><pre id="parseIpAddress%2Cstring" data-language="nim">proc parseIpAddress(addressStr: string): IpAddress {...}{.raises: [ValueError],
    tags: [].}</pre></dt> <dd> Parses an IP address Raises ValueError on error <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L433" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L433" target="_blank">Edit</a> </dd>  <dt><pre id="isIpAddress%2Cstring" data-language="nim">proc isIpAddress(addressStr: string): bool {...}{.tags: [], raises: [].}</pre></dt> <dd> Checks if a string is an IP address Returns true if it is, false otherwise <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L443" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L443" target="_blank">Edit</a> </dd>  <dt><pre id="toSockAddr%2CIpAddress%2CPort%2CSockaddr_storage%2CSockLen" data-language="nim">proc toSockAddr(address: IpAddress; port: Port; sa: var Sockaddr_storage;
                sl: var SockLen) {...}{.raises: [], tags: [].}</pre></dt> <dd> Converts <code>IpAddress</code> and <code>Port</code> to <code>SockAddr</code> and <code>SockLen</code> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L452" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L452" target="_blank">Edit</a> </dd>  <dt><pre id="fromSockAddr%2C%2CSockLen%2CIpAddress%2CPort" data-language="nim">proc fromSockAddr(sa: Sockaddr_storage | SockAddr | Sockaddr_in | Sockaddr_in6;
                  sl: SockLen; address: var IpAddress; port: var Port) {...}{.inline.}</pre></dt> <dd> Converts <code>SockAddr</code> and <code>SockLen</code> to <code>IpAddress</code> and <code>Port</code>. Raises <code>ObjectConversionDefect</code> in case of invalid <code>sa</code> and <code>sl</code> arguments. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L490" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L490" target="_blank">Edit</a> </dd>  <dt><pre id="raiseSSLError%2Cstring" data-language="nim">proc raiseSSLError(s = "") {...}{.raises: [SslError], tags: [].}</pre></dt> <dd> Raises a new SSL error. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L503" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L503" target="_blank">Edit</a> </dd>  <dt><pre id="getExtraData%2CSslContext%2Cint" data-language="nim">proc getExtraData(ctx: SslContext; index: int): RootRef {...}{.raises: [SslError],
    tags: [].}</pre></dt> <dd> Retrieves arbitrary data stored inside SslContext. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L519" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L519" target="_blank">Edit</a> </dd>  <dt><pre id="setExtraData%2CSslContext%2Cint%2CRootRef" data-language="nim">proc setExtraData(ctx: SslContext; index: int; data: RootRef) {...}{.
    raises: [SslError], tags: [].}</pre></dt> <dd> Stores arbitrary data inside SslContext. The unique <code>index</code> should be retrieved using getSslContextExtraDataIndex. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L528" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L528" target="_blank">Edit</a> </dd>  <dt><pre id="newContext%2Cstring%2Cstring%2Cstring%2Cstring" data-language="nim">proc newContext(protVersion = protSSLv23; verifyMode = CVerifyPeer;
                certFile = ""; keyFile = ""; cipherList = CiphersIntermediate;
                caDir = ""; caFile = ""): SslContext {...}{.
    raises: [Exception, LibraryError, SslError, IOError],
    tags: [RootEffect, ReadDirEffect, ReadEnvEffect].}</pre></dt> <dd> <p>Creates an SSL context.</p> <p>Protocol version specifies the protocol to use. SSLv2, SSLv3, TLSv1 are available with the addition of <code>protSSLv23</code> which allows for compatibility with all of them.</p> <p>There are three options for verify mode: <code>CVerifyNone</code>: certificates are not verified; <code>CVerifyPeer</code>: certificates are verified; <code>CVerifyPeerUseEnvVars</code>: certificates are verified and the optional environment variables SSL_CERT_FILE and SSL_CERT_DIR are also used to locate certificates</p> <p>The <code>nimDisableCertificateValidation</code> define overrides verifyMode and disables certificate verification globally!</p> <p>CA certificates will be loaded, in the following order, from:</p> <blockquote>
<ul class="simple">
<li>caFile, caDir, parameters, if set</li> <li>if <code>verifyMode</code> is set to <code>CVerifyPeerUseEnvVars</code>, the SSL_CERT_FILE and SSL_CERT_DIR environment variables are used</li> <li>a set of files and directories from the <a href="ssl_certs.html">ssl_certs</a> file.</li> </ul> </blockquote> <p>The last two parameters specify the certificate file path and the key file path, a server socket will most likely not work without these.</p> <p>Certificates can be generated using the following command:</p> <ul class="simple">
<li><code>openssl req -x509 -nodes -days 365 -newkey rsa:4096 -keyout mykey.pem -out mycert.pem</code></li> </ul> <p>or using ECDSA:</p> <ul class="simple">
<li><code>openssl ecparam -out mykey.pem -name secp256k1 -genkey</code></li> <li><code>openssl req -new -key mykey.pem -x509 -nodes -days 365 -out mycert.pem</code></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L563" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L563" target="_blank">Edit</a> </dd>  <dt><pre id="destroyContext%2CSslContext" data-language="nim">proc destroyContext(ctx: SslContext) {...}{.raises: [SslError], tags: [].}</pre></dt> <dd> Free memory referenced by SslContext. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L666" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L666" target="_blank">Edit</a> </dd>  <dt><pre id="pskIdentityHint%3D%2CSslContext%2Cstring" data-language="nim">proc pskIdentityHint=(ctx: SslContext; hint: string) {...}{.raises: [SslError],
    tags: [].}</pre></dt> <dd> <p>Sets the identity hint passed to server.</p> <p>Only used in PSK ciphersuites.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L676" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L676" target="_blank">Edit</a> </dd>  <dt><pre id="clientGetPskFunc%2CSslContext" data-language="nim">proc clientGetPskFunc(ctx: SslContext): SslClientGetPskFunc {...}{.raises: [],
    tags: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L683" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L683" target="_blank">Edit</a> </dd>  <dt><pre id="clientGetPskFunc%3D%2CSslContext%2CSslClientGetPskFunc" data-language="nim">proc clientGetPskFunc=(ctx: SslContext; fun: SslClientGetPskFunc) {...}{.
    raises: [Exception], tags: [RootEffect].}</pre></dt> <dd> <p>Sets function that returns the client identity and the PSK based on identity hint from the server.</p> <p>Only used in PSK ciphersuites.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L701" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L701" target="_blank">Edit</a> </dd>  <dt><pre id="serverGetPskFunc%2CSslContext" data-language="nim">proc serverGetPskFunc(ctx: SslContext): SslServerGetPskFunc {...}{.raises: [],
    tags: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L710" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L710" target="_blank">Edit</a> </dd>  <dt><pre id="serverGetPskFunc%3D%2CSslContext%2CSslServerGetPskFunc" data-language="nim">proc serverGetPskFunc=(ctx: SslContext; fun: SslServerGetPskFunc) {...}{.
    raises: [Exception], tags: [RootEffect].}</pre></dt> <dd> <p>Sets function that returns PSK based on the client identity.</p> <p>Only used in PSK ciphersuites.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L723" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L723" target="_blank">Edit</a> </dd>  <dt><pre id="getPskIdentity%2CSocket" data-language="nim">proc getPskIdentity(socket: Socket): string {...}{.raises: [], tags: [].}</pre></dt> <dd> Gets the PSK identity provided by the client. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L731" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L731" target="_blank">Edit</a> </dd>  <dt><pre id="wrapSocket%2CSslContext%2CSocket" data-language="nim">proc wrapSocket(ctx: SslContext; socket: Socket) {...}{.raises: [SslError], tags: [].}</pre></dt> <dd> <p>Wraps a socket in an SSL context. This function effectively turns <code>socket</code> into an SSL socket.</p> <p>This must be called on an unconnected socket; an SSL session will be started when the socket is connected.</p> <p>FIXME: <strong>Disclaimer</strong>: This code is not well tested, may be very unsafe and prone to security vulnerabilities.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L736" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L736" target="_blank">Edit</a> </dd>  <dt><pre id="wrapConnectedSocket%2CSslContext%2CSocket%2CSslHandshakeType%2Cstring" data-language="nim">proc wrapConnectedSocket(ctx: SslContext; socket: Socket;
                         handshake: SslHandshakeType; hostname: string = "") {...}{.
    raises: [SslError, Exception], tags: [RootEffect].}</pre></dt> <dd> <p>Wraps a connected socket in an SSL context. This function effectively turns <code>socket</code> into an SSL socket. <code>hostname</code> should be specified so that the client knows which hostname the server certificate should be validated against.</p> <p>This should be called on a connected socket, and will perform an SSL handshake immediately.</p> <p>FIXME: <strong>Disclaimer</strong>: This code is not well tested, may be very unsafe and prone to security vulnerabilities.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L779" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L779" target="_blank">Edit</a> </dd>  <dt><pre id="getPeerCertificates%2CSslPtr" data-language="nim">proc getPeerCertificates(sslHandle: SslPtr): seq[Certificate] {...}{.
    raises: [Exception], tags: [].}</pre></dt> <dd> Returns the certificate chain received by the peer we are connected to through the OpenSSL connection represented by <code>sslHandle</code>. The handshake must have been completed and the certificate chain must have been verified successfully or else an empty sequence is returned. The chain is ordered from leaf certificate to root certificate. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L811" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L811" target="_blank">Edit</a> </dd>  <dt><pre id="getPeerCertificates%2CSocket" data-language="nim">proc getPeerCertificates(socket: Socket): seq[Certificate] {...}{.
    raises: [Exception], tags: [].}</pre></dt> <dd> Returns the certificate chain received by the peer we are connected to through the given socket. The handshake must have been completed and the certificate chain must have been verified successfully or else an empty sequence is returned. The chain is ordered from leaf certificate to root certificate. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L830" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L830" target="_blank">Edit</a> </dd>  <dt><pre id="sessionIdContext%3D%2CSslContext%2Cstring" data-language="nim">proc sessionIdContext=(ctx: SslContext; sidCtx: string) {...}{.raises: [SslError],
    tags: [].}</pre></dt> <dd> <p>Sets the session id context in which a session can be reused. Used for permitting clients to reuse a session id instead of doing a new handshake.</p> <p>TLS clients might attempt to resume a session using the session id context, thus it must be set if verifyMode is set to CVerifyPeer or CVerifyPeerUseEnvVars, otherwise the connection will fail and SslError will be raised if resumption occurs.</p> <ul class="simple">
<li>Only useful if set server-side.</li> <li>Should be unique per-application to prevent clients from malfunctioning.</li> <li>sidCtx must be at most 32 characters in length.</li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L841" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L841" target="_blank">Edit</a> </dd>  <dt><pre id="getSocketError%2CSocket" data-language="nim">proc getSocketError(socket: Socket): OSErrorCode {...}{.raises: [OSError], tags: [].}</pre></dt> <dd> Checks <code>osLastError</code> for a valid error. If it has been reset it uses the last error stored in the socket object. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L857" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L857" target="_blank">Edit</a> </dd>  <dt><pre id="socketError%2CSocket%2Cint%2Cset%5BSocketFlag%5D" data-language="nim">proc socketError(socket: Socket; err: int = -1; async = false;
                 lastError = -1.OSErrorCode; flags: set[SocketFlag] = {}): void {...}{.
    gcsafe, raises: [SslError, OSError], tags: [].}</pre></dt> <dd> <p>Raises an OSError based on the error code returned by <code>SSL_get_error</code> (for SSL sockets) and <code>osLastError</code> otherwise.</p> <p>If <code>async</code> is <code>true</code> no error will be thrown in the case when the error was caused by no data being available to be read.</p> <p>If <code>err</code> is not lower than 0 no exception will be raised.</p> <p>If <code>flags</code> contains <code>SafeDisconn</code>, no exception will be raised when the error was caused by a peer disconnection.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L866" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L866" target="_blank">Edit</a> </dd>  <dt><pre id="listen%2CSocket" data-language="nim">proc listen(socket: Socket; backlog = SOMAXCONN) {...}{.tags: [ReadIOEffect],
    raises: [OSError].}</pre></dt> <dd> <p>Marks <code>socket</code> as accepting connections. <code>Backlog</code> specifies the maximum length of the queue of pending connections.</p> <p>Raises an OSError error upon failure.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L931" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L931" target="_blank">Edit</a> </dd>  <dt><pre id="bindAddr%2CSocket%2Cstring" data-language="nim">proc bindAddr(socket: Socket; port = Port(0); address = "") {...}{.
    tags: [ReadIOEffect], raises: [ValueError, OSError].}</pre></dt> <dd> <p>Binds <code>address</code>:<code>port</code> to the socket.</p> <p>If <code>address</code> is "" then ADDR_ANY will be bound.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L940" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L940" target="_blank">Edit</a> </dd>  <dt><pre id="acceptAddr%2CSocket%2C%2Cstring" data-language="nim">proc acceptAddr(server: Socket; client: var owned(Socket); address: var string;
                flags = {SafeDisconn}; inheritable = defined(nimInheritHandles)) {...}{.
    tags: [ReadIOEffect], gcsafe, locks: 0, raises: [OSError, IOError, SslError].}</pre></dt> <dd> <p>Blocks until a connection is being made from a client. When a connection is made sets <code>client</code> to the client socket and <code>address</code> to the address of the connecting client. This function will raise OSError if an error occurs.</p> <p>The resulting client will inherit any properties of the server socket. For example: whether the socket is buffered or not.</p> <p>The SocketHandle associated with the resulting client will not be inheritable by child processes by default. This can be changed via the <code>inheritable</code> parameter.</p> <p>The <code>accept</code> call may result in an error if the connecting socket disconnects during the duration of the <code>accept</code>. If the <code>SafeDisconn</code> flag is specified then this error will not be raised and instead accept will be called again.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L960" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L960" target="_blank">Edit</a> </dd>  <dt><pre id="accept%2CSocket%2C" data-language="nim">proc accept(server: Socket; client: var owned(Socket); flags = {SafeDisconn};
            inheritable = defined(nimInheritHandles)) {...}{.tags: [ReadIOEffect],
    raises: [OSError, IOError, SslError].}</pre></dt> <dd> <p>Equivalent to <code>acceptAddr</code> but doesn't return the address, only the socket.</p> <p>The SocketHandle associated with the resulting client will not be inheritable by child processes by default. This can be changed via the <code>inheritable</code> parameter.</p> <p>The <code>accept</code> call may result in an error if the connecting socket disconnects during the duration of the <code>accept</code>. If the <code>SafeDisconn</code> flag is specified then this error will not be raised and instead accept will be called again.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1059" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1059" target="_blank">Edit</a> </dd>  <dt><pre id="close%2CSocket" data-language="nim">proc close(socket: Socket; flags = {SafeDisconn}) {...}{.
    raises: [Exception, LibraryError, OSError, SslError, OSError],
    tags: [RootEffect].}</pre></dt> <dd> <p>Closes a socket.</p> <p>If <code>socket</code> is an SSL/TLS socket, this proc will also send a closure notification to the peer. If <code>SafeDisconn</code> is in <code>flags</code>, failure to do so due to disconnections will be ignored. This is generally safe in practice. See <a href="https://security.stackexchange.com/a/82044">here</a> for more details.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1135" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1135" target="_blank">Edit</a> </dd>  <dt><pre id="toCInt%2CSOBool" data-language="nim">proc toCInt(opt: SOBool): cint {...}{.raises: [], tags: [].}</pre></dt> <dd> Converts a <code>SOBool</code> into its Socket Option cint representation. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1196" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1196" target="_blank">Edit</a> </dd>  <dt><pre id="getSockOpt%2CSocket%2CSOBool" data-language="nim">proc getSockOpt(socket: Socket; opt: SOBool; level = SOL_SOCKET): bool {...}{.
    tags: [ReadIOEffect], raises: [OSError].}</pre></dt> <dd> Retrieves option <code>opt</code> as a boolean value. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1209" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1209" target="_blank">Edit</a> </dd>  <dt><pre id="getLocalAddr%2CSocket" data-language="nim">proc getLocalAddr(socket: Socket): (string, Port) {...}{.
    raises: [OSError, Exception], tags: [].}</pre></dt> <dd> <p>Get the socket's local address and port number.</p> <p>This is high-level interface for <span id="getsockname_1">getsockname</span>.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1215" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1215" target="_blank">Edit</a> </dd>  <dt><pre id="getPeerAddr%2CSocket" data-language="nim">proc getPeerAddr(socket: Socket): (string, Port) {...}{.raises: [OSError, Exception],
    tags: [].}</pre></dt> <dd> <p>Get the socket's peer address and port number.</p> <p>This is high-level interface for <span id="getpeername_1">getpeername</span>.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1221" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1221" target="_blank">Edit</a> </dd>  <dt><pre id="setSockOpt%2CSocket%2CSOBool%2Cbool" data-language="nim">proc setSockOpt(socket: Socket; opt: SOBool; value: bool; level = SOL_SOCKET) {...}{.
    tags: [WriteIOEffect], raises: [OSError].}</pre></dt> <dd> Sets option <code>opt</code> to a boolean value specified by <code>value</code>.<pre class="listing" data-language="nim">var socket = newSocket()
socket.setSockOpt(OptReusePort, true)
socket.setSockOpt(OptNoDelay, true, level=IPPROTO_TCP.toInt)</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1227" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1227" target="_blank">Edit</a> </dd>  <dt><pre id="connectUnix%2CSocket%2Cstring" data-language="nim">proc connectUnix(socket: Socket; path: string) {...}{.raises: [], tags: [].}</pre></dt> <dd> Connects to Unix socket on <code>path</code>. This only works on Unix-style systems: Mac OS X, BSD and Linux <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1240" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1240" target="_blank">Edit</a> </dd>  <dt><pre id="bindUnix%2CSocket%2Cstring" data-language="nim">proc bindUnix(socket: Socket; path: string) {...}{.raises: [], tags: [].}</pre></dt> <dd> Binds Unix socket to <code>path</code>. This only works on Unix-style systems: Mac OS X, BSD and Linux <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1249" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1249" target="_blank">Edit</a> </dd>  <dt><pre id="hasDataBuffered%2CSocket" data-language="nim">proc hasDataBuffered(s: Socket): bool {...}{.raises: [], tags: [].}</pre></dt> <dd> Determines whether a socket has data buffered. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1269" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1269" target="_blank">Edit</a> </dd>  <dt><pre id="recv%2CSocket%2Cpointer%2Cint" data-language="nim">proc recv(socket: Socket; data: pointer; size: int): int {...}{.tags: [ReadIOEffect],
    raises: [].}</pre></dt> <dd> <p>Receives data from a socket.</p> <p><strong>Note</strong>: This is a low-level function, you may be interested in the higher level versions of this function which are also named <code>recv</code>.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1326" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1326" target="_blank">Edit</a> </dd>  <dt><pre id="recv%2CSocket%2Cpointer%2Cint%2Cint" data-language="nim">proc recv(socket: Socket; data: pointer; size: int; timeout: int): int {...}{.
    tags: [ReadIOEffect, TimeEffect], raises: [TimeoutError, OSError].}</pre></dt> <dd> overload with a <code>timeout</code> parameter in milliseconds. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1406" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1406" target="_blank">Edit</a> </dd>  <dt><pre id="recv%2CSocket%2Cstring%2Cint" data-language="nim">proc recv(socket: Socket; data: var string; size: int; timeout = -1;
          flags = {SafeDisconn}): int {...}{.raises: [TimeoutError, OSError, SslError],
                                        tags: [ReadIOEffect, TimeEffect].}</pre></dt> <dd> <p>Higher-level version of <code>recv</code>.</p> <p>Reads <strong>up to</strong> <code>size</code> bytes from <code>socket</code> into <code>buf</code>.</p> <p>For buffered sockets this function will attempt to read all the requested data. It will read this data in <code>BufferSize</code> chunks.</p> <p>For unbuffered sockets this function makes no effort to read all the data requested. It will return as much data as the operating system gives it.</p> <p>When 0 is returned the socket's connection has been closed.</p> <p>This function will throw an OSError exception when an error occurs. A value lower than 0 is never returned.</p> <p>A timeout may be specified in milliseconds, if enough data is not received within the time specified a TimeoutError exception will be raised.</p> <p><strong>Note</strong>: <code>data</code> must be initialised.</p> <p><strong>Warning</strong>: Only the <code>SafeDisconn</code> flag is currently supported.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1424" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1424" target="_blank">Edit</a> </dd>  <dt><pre id="recv%2CSocket%2Cint" data-language="nim">proc recv(socket: Socket; size: int; timeout = -1; flags = {SafeDisconn}): string {...}{.
    inline, raises: [TimeoutError, OSError, SslError],
    tags: [ReadIOEffect, TimeEffect].}</pre></dt> <dd> <p>Higher-level version of <code>recv</code> which returns a string.</p> <p>Reads <strong>up to</strong> <code>size</code> bytes from <code>socket</code> into <code>buf</code>.</p> <p>For buffered sockets this function will attempt to read all the requested data. It will read this data in <code>BufferSize</code> chunks.</p> <p>For unbuffered sockets this function makes no effort to read all the data requested. It will return as much data as the operating system gives it.</p> <p>When <code>""</code> is returned the socket's connection has been closed.</p> <p>This function will throw an OSError exception when an error occurs.</p> <p>A timeout may be specified in milliseconds, if enough data is not received within the time specified a TimeoutError exception will be raised.</p> <p><strong>Warning</strong>: Only the <code>SafeDisconn</code> flag is currently supported.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1461" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1461" target="_blank">Edit</a> </dd>  <dt><pre id="readLine%2CSocket%2CTaintedString" data-language="nim">proc readLine(socket: Socket; line: var TaintedString; timeout = -1;
              flags = {SafeDisconn}; maxLength = MaxLineLength) {...}{.
    tags: [ReadIOEffect, TimeEffect], raises: [TimeoutError, OSError, SslError].}</pre></dt> <dd> <p>Reads a line of data from <code>socket</code>.</p> <p>If a full line is read <code>\r\L</code> is not added to <code>line</code>, however if solely <code>\r\L</code> is read then <code>line</code> will be set to it.</p> <p>If the socket is disconnected, <code>line</code> will be set to <code>""</code>.</p> <p>An OSError exception will be raised in the case of a socket error.</p> <p>A timeout can be specified in milliseconds, if data is not received within the specified time a TimeoutError exception will be raised.</p> <p>The <code>maxLength</code> parameter determines the maximum amount of characters that can be read. The result is truncated after that.</p> <p><strong>Warning</strong>: Only the <code>SafeDisconn</code> flag is currently supported.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1506" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1506" target="_blank">Edit</a> </dd>  <dt><pre id="recvLine%2CSocket" data-language="nim">proc recvLine(socket: Socket; timeout = -1; flags = {SafeDisconn};
              maxLength = MaxLineLength): TaintedString {...}{.
    raises: [TimeoutError, OSError, SslError], tags: [ReadIOEffect, TimeEffect].}</pre></dt> <dd> <p>Reads a line of data from <code>socket</code>.</p> <p>If a full line is read <code>\r\L</code> is not added to the result, however if solely <code>\r\L</code> is read then the result will be set to it.</p> <p>If the socket is disconnected, the result will be set to <code>""</code>.</p> <p>An OSError exception will be raised in the case of a socket error.</p> <p>A timeout can be specified in milliseconds, if data is not received within the specified time a TimeoutError exception will be raised.</p> <p>The <code>maxLength</code> parameter determines the maximum amount of characters that can be read. The result is truncated after that.</p> <p><strong>Warning</strong>: Only the <code>SafeDisconn</code> flag is currently supported.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1562" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1562" target="_blank">Edit</a> </dd>  <dt><pre id="recvFrom%2CSocket%2Cstring%2Cint%2Cstring%2CPort%2Cint32" data-language="nim">proc recvFrom(socket: Socket; data: var string; length: int;
              address: var string; port: var Port; flags = 0'i32): int {...}{.
    tags: [ReadIOEffect], raises: [Exception, OSError, IOError, ValueError].}</pre></dt> <dd> <p>Receives data from <code>socket</code>. This function should normally be used with connection-less sockets (UDP sockets).</p> <p>If an error occurs an OSError exception will be raised. Otherwise the return value will be the length of data received.</p> <p><strong>Warning:</strong> This function does not yet have a buffered implementation, so when <code>socket</code> is buffered the non-buffered implementation will be used. Therefore if <code>socket</code> contains something in its buffer this function will make no effort to return it.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1585" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1585" target="_blank">Edit</a> </dd>  <dt><pre id="skip%2CSocket%2Cint" data-language="nim">proc skip(socket: Socket; size: int; timeout = -1) {...}{.
    raises: [TimeoutError, OSError], tags: [TimeEffect, ReadIOEffect].}</pre></dt> <dd> <p>Skips <code>size</code> amount of bytes.</p> <p>An optional timeout can be specified in milliseconds, if skipping the bytes takes longer than specified a TimeoutError exception will be raised.</p> <p>Returns the number of skipped bytes.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1626" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1626" target="_blank">Edit</a> </dd>  <dt><pre id="send%2CSocket%2Cpointer%2Cint" data-language="nim">proc send(socket: Socket; data: pointer; size: int): int {...}{.
    tags: [WriteIOEffect], raises: [].}</pre></dt> <dd> <p>Sends data to a socket.</p> <p><strong>Note</strong>: This is a low-level version of <code>send</code>. You likely should use the version below.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1641" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1641" target="_blank">Edit</a> </dd>  <dt><pre id="send%2CSocket%2Cstring" data-language="nim">proc send(socket: Socket; data: string; flags = {SafeDisconn}) {...}{.
    tags: [WriteIOEffect], raises: [SslError, OSError].}</pre></dt> <dd> sends data to a socket. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1660" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1660" target="_blank">Edit</a> </dd>  <dt><pre id="trySend%2CSocket%2Cstring" data-language="nim">proc trySend(socket: Socket; data: string): bool {...}{.tags: [WriteIOEffect],
    raises: [].}</pre></dt> <dd> Safe alternative to <code>send</code>. Does not raise an OSError when an error occurs, and instead returns <code>false</code> on failure. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1675" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1675" target="_blank">Edit</a> </dd>  <dt><pre id="sendTo%2CSocket%2Cstring%2CPort%2Cpointer%2Cint%2CDomain%2Cint32" data-language="nim">proc sendTo(socket: Socket; address: string; port: Port; data: pointer;
            size: int; af: Domain = AF_INET; flags = 0'i32) {...}{.
    tags: [WriteIOEffect], raises: [OSError].}</pre></dt> <dd> <p>This proc sends <code>data</code> to the specified <code>address</code>, which may be an IP address or a hostname, if a hostname is specified this function will try each IP of that hostname.</p> <p>If an error occurs an OSError exception will be raised.</p> <p><strong>Note:</strong> You may wish to use the high-level version of this function which is defined below.</p> <p><strong>Note:</strong> This proc is not available for SSL sockets.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1680" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1680" target="_blank">Edit</a> </dd>  <dt><pre id="sendTo%2CSocket%2Cstring%2CPort%2Cstring" data-language="nim">proc sendTo(socket: Socket; address: string; port: Port; data: string) {...}{.
    tags: [WriteIOEffect], raises: [OSError].}</pre></dt> <dd> <p>This proc sends <code>data</code> to the specified <code>address</code>, which may be an IP address or a hostname, if a hostname is specified this function will try each IP of that hostname.</p> <p>If an error occurs an OSError exception will be raised.</p> <p>This is the high-level version of the above <code>sendTo</code> function.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1714" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1714" target="_blank">Edit</a> </dd>  <dt><pre id="isSsl%2CSocket" data-language="nim">proc isSsl(socket: Socket): bool {...}{.raises: [], tags: [].}</pre></dt> <dd> Determines whether <code>socket</code> is a SSL socket. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1726" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1726" target="_blank">Edit</a> </dd>  <dt><pre id="getFd%2CSocket" data-language="nim">proc getFd(socket: Socket): SocketHandle {...}{.raises: [], tags: [].}</pre></dt> <dd> Returns the socket's file descriptor <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1733" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1733" target="_blank">Edit</a> </dd>  <dt><pre id="IPv4_any" data-language="nim">proc IPv4_any(): IpAddress {...}{.raises: [], tags: [].}</pre></dt> <dd> Returns the IPv4 any address, which can be used to listen on all available network adapters <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1739" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1739" target="_blank">Edit</a> </dd>  <dt><pre id="IPv4_loopback" data-language="nim">proc IPv4_loopback(): IpAddress {...}{.raises: [], tags: [].}</pre></dt> <dd> Returns the IPv4 loopback address (127.0.0.1) <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1746" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1746" target="_blank">Edit</a> </dd>  <dt><pre id="IPv4_broadcast" data-language="nim">proc IPv4_broadcast(): IpAddress {...}{.raises: [], tags: [].}</pre></dt> <dd> Returns the IPv4 broadcast address (255.255.255.255) <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1752" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1752" target="_blank">Edit</a> </dd>  <dt><pre id="IPv6_any" data-language="nim">proc IPv6_any(): IpAddress {...}{.raises: [], tags: [].}</pre></dt> <dd> Returns the IPv6 any address (::0), which can be used to listen on all available network adapters <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1758" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1758" target="_blank">Edit</a> </dd>  <dt><pre id="IPv6_loopback" data-language="nim">proc IPv6_loopback(): IpAddress {...}{.raises: [], tags: [].}</pre></dt> <dd> Returns the IPv6 loopback address (::1) <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1765" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1765" target="_blank">Edit</a> </dd>  <dt><pre id="%3D%3D%2CIpAddress%2CIpAddress" data-language="nim">proc `==`(lhs, rhs: IpAddress): bool {...}{.raises: [], tags: [].}</pre></dt> <dd> Compares two IpAddresses for Equality. Returns true if the addresses are equal <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1774" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1774" target="_blank">Edit</a> </dd>  <dt><pre id="%24%2CIpAddress" data-language="nim">proc `$`(address: IpAddress): string {...}{.raises: [], tags: [].}</pre></dt> <dd> Converts an IpAddress into the textual representation <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1785" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1785" target="_blank">Edit</a> </dd>  <dt><pre id="dial%2Cstring%2CPort" data-language="nim">proc dial(address: string; port: Port; protocol = IPPROTO_TCP; buffered = true): owned(
    Socket) {...}{.tags: [ReadIOEffect, WriteIOEffect], raises: [OSError, IOError].}</pre></dt> <dd> Establishes connection to the specified <code>address</code>:<code>port</code> pair via the specified protocol. The procedure iterates through possible resolutions of the <code>address</code> until it succeeds, meaning that it seamlessly works with both IPv4 and IPv6. Returns Socket ready to send or receive data. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1849" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1849" target="_blank">Edit</a> </dd>  <dt><pre id="connect%2CSocket%2Cstring" data-language="nim">proc connect(socket: Socket; address: string; port = Port(0)) {...}{.
    tags: [ReadIOEffect], raises: [OSError, SslError].}</pre></dt> <dd> <p>Connects socket to <code>address</code>:<code>port</code>. <code>Address</code> can be an IP address or a host name. If <code>address</code> is a host name, this function will try each IP of that host name. <code>htons</code> is already performed on <code>port</code> so you must not do it.</p> <p>If <code>socket</code> is an SSL socket a handshake will be automatically performed.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1907" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1907" target="_blank">Edit</a> </dd>  <dt><pre id="connect%2CSocket%2Cstring%2Cint" data-language="nim">proc connect(socket: Socket; address: string; port = Port(0); timeout: int) {...}{.
    tags: [ReadIOEffect, WriteIOEffect], raises: [OSError, TimeoutError].}</pre></dt> <dd> <p>Connects to server as specified by <code>address</code> on port specified by <code>port</code>.</p> <p>The <code>timeout</code> parameter specifies the time in milliseconds to allow for the connection to the server to be made.</p> <p><strong>Warning:</strong> This procedure appears to be broken for SSL connections as of Nim v1.0.2. Consider using the other <code>connect</code> procedure. See <a href="https://github.com/nim-lang/Nim/issues/15215">https://github.com/nim-lang/Nim/issues/15215</a> for more info.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1982" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1982" target="_blank">Edit</a> </dd>  <dt><pre id="getPrimaryIPAddr" data-language="nim">proc getPrimaryIPAddr(dest = parseIpAddress("8.8.8.8")): IpAddress {...}{.
    raises: [OSError, OSError, SslError, ValueError, Exception, LibraryError],
    tags: [ReadIOEffect, RootEffect].}</pre></dt> <dd> <p>Finds the local IP address, usually assigned to eth0 on LAN or wlan0 on WiFi, used to reach an external address. Useful to run local services.</p> <p>No traffic is sent.</p> <p>Supports IPv4 and v6. Raises OSError if external networking is not set up.</p> <pre class="listing" data-language="nim">echo $getPrimaryIPAddr()  # "192.168.1.2"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L2008" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L2008" target="_blank">Edit</a> </dd> </dl>  <h2 id="18">Templates</h2> <dl>  <dt><pre id="%26%3D.t%2CSocket%2Ctyped" data-language="nim">template `&amp;=`(socket: Socket; data: typed)</pre></dt> <dd> an alias for 'send'. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/net.nim#L1671" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/net.nim#L1671" target="_blank">Edit</a> </dd> </dl>  <h2 id="19">Exports</h2> <dl> <a href="nativesockets.html#Port"><span class="Identifier">Port</span></a>, <a href="nativesockets.html#%24,Port"><span class="Identifier">$</span></a>, <a href="system.html#==,int8,int8"><span class="Identifier">==</span></a>, <a href="system.html#==,float,float"><span class="Identifier">==</span></a>, <a href="winlean.html#==,SocketHandle,SocketHandle"><span class="Identifier">==</span></a>, <a href="system.html#==,T,T"><span class="Identifier">==</span></a>, <a href="system.html#==,seq%5BT%5D,seq%5BT%5D"><span class="Identifier">==</span></a>, <a href="system.html#==,array%5BI,T%5D,array%5BI,T%5D"><span class="Identifier">==</span></a>, <a href="options.html#==,Option,Option"><span class="Identifier">==</span></a>, <a href="system.html#==,pointer,pointer"><span class="Identifier">==</span></a>, <a href="os.html#==,OSErrorCode,OSErrorCode"><span class="Identifier">==</span></a>, <a href="system.html#==,ref.T,ref.T"><span class="Identifier">==</span></a>, <a href="system.html#==,string,string"><span class="Identifier">==</span></a>, <a href="system.html#==,openArray%5BT%5D,openArray%5BT%5D"><span class="Identifier">==</span></a>, <a href="system.html#==,Enum,Enum"><span class="Identifier">==</span></a>, <a href="system.html#==,uint8,uint8"><span class="Identifier">==</span></a>, <a href="system.html#==,int,int"><span class="Identifier">==</span></a>, <a href="system.html#==,float32,float32"><span class="Identifier">==</span></a>, <a href="system.html#==,int16,int16"><span class="Identifier">==</span></a>, <a href="system.html#==,set%5BT%5D,set%5BT%5D"><span class="Identifier">==</span></a>, <a href="system.html#==,int32,int32"><span class="Identifier">==</span></a>, <a href="system.html#==,uint16,uint16"><span class="Identifier">==</span></a>, <a href="system.html#==,uint32,uint32"><span class="Identifier">==</span></a>, <a href="system.html#==,int64,int64"><span class="Identifier">==</span></a>, <a href="system.html#==,cstring,cstring"><span class="Identifier">==</span></a>, <a href="system.html#==,uint,uint"><span class="Identifier">==</span></a>, <a href="system.html#==,uint64,uint64"><span class="Identifier">==</span></a>, <a href="system.html#==,T,T_2"><span class="Identifier">==</span></a>, <a href="system.html#==,char,char"><span class="Identifier">==</span></a>, <a href="system.html#==,ptr.T,ptr.T"><span class="Identifier">==</span></a>, <a href="system.html#==,bool,bool"><span class="Identifier">==</span></a>, <a href="nativesockets.html#==,Port,Port"><span class="Identifier">==</span></a>, <a href="nativesockets.html#Domain"><span class="Identifier">Domain</span></a>, <a href="nativesockets.html#SockType"><span class="Identifier">SockType</span></a>, <a href="nativesockets.html#Protocol"><span class="Identifier">Protocol</span></a> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2021 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/net.html" class="_attribution-link">https://nim-lang.org/docs/net.html</a>
  </p>
</div>
