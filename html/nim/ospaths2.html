<h1 class="title">std/private/ospaths2</h1> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L1" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L1" target="_blank">Edit</a>    <h2 id="6">Imports</h2> <dl> <a href="since.html">since</a>, <a href="strutils.html">strutils</a>, <a href="pathnorm.html">pathnorm</a>, <a href="oserrors.html">oserrors</a>, <a href="oscommon.html">oscommon</a>, <a href="winlean.html">winlean</a>, <a href="osseps.html">osseps</a>, <a href="ntpath.html">ntpath</a> </dl>   <h2 id="12">Procs</h2> <dl> <div id="/-procs-all"> <div id="/,string,string"> <dt><pre data-language="nim">proc `/`(head, tail: string): string {.noSideEffect, inline, ...raises: [],
                                       tags: [], forbids: [].}</pre></dt> <dd> <p>The same as <a title="proc joinPath(head, tail: string): string" href="#joinPath,string,string">joinPath(head, tail) proc</a>.</p> <p>See also:</p> <ul class="simple">
<li><a title="proc `/../`(head, tail: string): string" href="#/../,string,string">/../ proc</a></li> <li><a title="proc joinPath(head, tail: string): string" href="#joinPath,string,string">joinPath(head, tail) proc</a></li> <li><a title="proc joinPath(parts: varargs[string]): string" href="#joinPath,varargs[string]">joinPath(parts: varargs[string]) proc</a></li> <li><a title="proc splitPath(path: string): tuple[head, tail: string]" href="#splitPath,string">splitPath proc</a></li> <li><a href="uri.html#combine,Uri,Uri">uri.combine proc</a></li> <li><a href="uri.html#/,Uri,string">uri./ proc</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">when defined(posix):
  assert "usr" / "" == "usr"
  assert "" / "lib" == "lib"
  assert "" / "/lib" == "/lib"
  assert "usr/" / "/lib/" == "usr/lib/"
  assert "usr" / "lib" / "../bin" == "usr/bin"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L162" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L162" target="_blank">Edit</a> </dd> </div> </div> <div id="/../-procs-all"> <div id="/../,string,string"> <dt><pre data-language="nim">proc `/../`(head, tail: string): string {.noSideEffect, ...raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> <p>The same as <code>parentDir(head) / tail</code>, unless there is no parent directory. Then <code>head / tail</code> is performed instead.</p> <p>See also:</p> <ul class="simple">
<li><a title="proc `/`(head, tail: string): string" href="#/,string,string">/ proc</a></li> <li><a title="proc parentDir(path: string): string" href="#parentDir,string">parentDir proc</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">when defined(posix):
  assert "a/b/c" /../ "d/e" == "a/b/d/e"
  assert "a" /../ "d/e" == "a/d/e"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L546" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L546" target="_blank">Edit</a> </dd> </div> </div> <div id="absolutePath-procs-all"> <div id="absolutePath,string"> <dt><pre data-language="nim">proc absolutePath(path: string; root = getCurrentDir()): string {.
    ...raises: [ValueError], tags: [], forbids: [].}</pre></dt> <dd> <p>Returns the absolute path of <code><span class="Identifier">path</span></code>, rooted at <code><span class="Identifier">root</span></code> (which must be absolute; default: current directory). If <code><span class="Identifier">path</span></code> is absolute, return it, ignoring <code><span class="Identifier">root</span></code>.</p> <p>See also:</p> <ul class="simple">
<li><a title="proc normalizedPath(path: string): string" href="#normalizedPath,string">normalizedPath proc</a></li> <li><a title="proc normalizePath(path: var string)" href="#normalizePath,string">normalizePath proc</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">assert absolutePath("a") == getCurrentDir() / "a"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L892" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L892" target="_blank">Edit</a> </dd> </div> </div> <div id="addFileExt-procs-all"> <div id="addFileExt,string,string"> <dt><pre data-language="nim">proc addFileExt(filename, ext: string): string {.noSideEffect, ...gcsafe,
    extern: "nos$1", raises: [], tags: [], forbids: [].}</pre></dt> <dd> <p>Adds the file extension <code><span class="Identifier">ext</span></code> to <code><span class="Identifier">filename</span></code>, unless <code><span class="Identifier">filename</span></code> already has an extension.</p> <p><code><span class="Identifier">Ext</span></code> should be given without the leading <code><span class="CharLit">'.'</span></code>, because some filesystems may use a different character. (Although I know of none such beast.)</p> <p>See also:</p> <ul class="simple">
<li><a title="proc searchExtPos(path: string): int" href="#searchExtPos,string">searchExtPos proc</a></li> <li><a title="proc splitFile(path: string): tuple[dir, name, ext: string]" href="#splitFile,string">splitFile proc</a></li> <li><a title="proc extractFilename(path: string): string" href="#extractFilename,string">extractFilename proc</a></li> <li><a title="proc lastPathPart(path: string): string" href="#lastPathPart,string">lastPathPart proc</a></li> <li><a title="proc changeFileExt(filename, ext: string): string" href="#changeFileExt,string,string">changeFileExt proc</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">assert addFileExt("foo.bar", "baz") == "foo.bar"
assert addFileExt("foo.bar", "") == "foo.bar"
assert addFileExt("foo", "baz") == "foo.baz"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L735" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L735" target="_blank">Edit</a> </dd> </div> </div> <div id="changeFileExt-procs-all"> <div id="changeFileExt,string,string"> <dt><pre data-language="nim">proc changeFileExt(filename, ext: string): string {.noSideEffect, ...gcsafe,
    extern: "nos$1", raises: [], tags: [], forbids: [].}</pre></dt> <dd> <p>Changes the file extension to <code><span class="Identifier">ext</span></code>.</p> <p>If the <code><span class="Identifier">filename</span></code> has no extension, <code><span class="Identifier">ext</span></code> will be added. If <code><span class="Identifier">ext</span></code> == "" then any extension is removed.</p> <p><code><span class="Identifier">Ext</span></code> should be given without the leading <code><span class="CharLit">'.'</span></code>, because some filesystems may use a different character. (Although I know of none such beast.)</p> <p>See also:</p> <ul class="simple">
<li><a title="proc searchExtPos(path: string): int" href="#searchExtPos,string">searchExtPos proc</a></li> <li><a title="proc splitFile(path: string): tuple[dir, name, ext: string]" href="#splitFile,string">splitFile proc</a></li> <li><a title="proc extractFilename(path: string): string" href="#extractFilename,string">extractFilename proc</a></li> <li><a title="proc lastPathPart(path: string): string" href="#lastPathPart,string">lastPathPart proc</a></li> <li><a title="proc addFileExt(filename, ext: string): string" href="#addFileExt,string,string">addFileExt proc</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">assert changeFileExt("foo.bar", "baz") == "foo.baz"
assert changeFileExt("foo.bar", "") == "foo"
assert changeFileExt("foo", "baz") == "foo.baz"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L709" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L709" target="_blank">Edit</a> </dd> </div> </div> <div id="cmpPaths-procs-all"> <div id="cmpPaths,string,string"> <dt><pre data-language="nim">proc cmpPaths(pathA, pathB: string): int {.noSideEffect, ...gcsafe,
    extern: "nos$1", raises: [], tags: [], forbids: [].}</pre></dt> <dd> <p>Compares two paths.</p> <p>On a case-sensitive filesystem this is done case-sensitively otherwise case-insensitively. Returns:</p> <p><code><span class="DecNumber">0</span></code> if pathA == pathB<br><code><span class="Operator">&lt;</span> <span class="DecNumber">0</span></code> if pathA &lt; pathB<br><code><span class="Operator">&gt;</span> <span class="DecNumber">0</span></code> if pathA &gt; pathB<br></p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">when defined(macosx):
  assert cmpPaths("foo", "Foo") == 0
elif defined(posix):
  assert cmpPaths("foo", "Foo") &gt; 0</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L759" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L759" target="_blank">Edit</a> </dd> </div> </div> <div id="extractFilename-procs-all"> <div id="extractFilename,string"> <dt><pre data-language="nim">proc extractFilename(path: string): string {.noSideEffect, ...gcsafe,
    extern: "nos$1", raises: [], tags: [], forbids: [].}</pre></dt> <dd> <p>Extracts the filename of a given <code><span class="Identifier">path</span></code>.</p> <p>This is the same as <code>name &amp; ext</code> from <a title="proc splitFile(path: string): tuple[dir, name, ext: string]" href="#splitFile,string">splitFile(path) proc</a>.</p> <p>See also:</p> <ul class="simple">
<li><a title="proc searchExtPos(path: string): int" href="#searchExtPos,string">searchExtPos proc</a></li> <li><a title="proc splitFile(path: string): tuple[dir, name, ext: string]" href="#splitFile,string">splitFile proc</a></li> <li><a title="proc lastPathPart(path: string): string" href="#lastPathPart,string">lastPathPart proc</a></li> <li><a title="proc changeFileExt(filename, ext: string): string" href="#changeFileExt,string,string">changeFileExt proc</a></li> <li><a title="proc addFileExt(filename, ext: string): string" href="#addFileExt,string,string">addFileExt proc</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">assert extractFilename("foo/bar/") == ""
assert extractFilename("foo/bar") == "bar"
assert extractFilename("foo/bar.baz") == "bar.baz"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L669" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L669" target="_blank">Edit</a> </dd> </div> </div> <div id="getCurrentDir-procs-all"> <div id="getCurrentDir"> <dt><pre data-language="nim">proc getCurrentDir(): string {....gcsafe, extern: "nos$1", tags: [],
                               raises: [OSError], forbids: [].}</pre></dt> <dd> <p>Returns the <span id="current-working-directory_1">current working directory</span> i.e. where the built binary is run.</p> <p>So the path returned by this proc is determined at run time.</p> <p>See also:</p> <ul class="simple">
<li><a href="osappdirs.html#getHomeDir">osappdirs: getHomeDir proc</a></li> <li><a href="osappdirs.html#getConfigDir">osappdirs: getConfigDir proc</a></li> <li><a href="osappdirs.html#getTempDir">osappdirs: getTempDir proc</a></li> <li><a href="osdirs.html#setCurrentDir,string">osdirs: setCurrentDir proc</a></li> <li><a href="system.html#currentSourcePath.t">currentSourcePath template</a></li> <li><a href="macros.html#getProjectPath">getProjectPath proc</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L844" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L844" target="_blank">Edit</a> </dd> </div> </div> <div id="isAbsolute-procs-all"> <div id="isAbsolute,string"> <dt><pre data-language="nim">proc isAbsolute(path: string): bool {....gcsafe, noSideEffect, ...extern: "nos$1",
                                      raises: [], tags: [], forbids: [].}</pre></dt> <dd> <p>Checks whether a given <code><span class="Identifier">path</span></code> is absolute.</p> <p>On Windows, network paths are considered absolute too.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">assert not "".isAbsolute
assert not ".".isAbsolute
when defined(posix):
  assert "/".isAbsolute
  assert not "a/".isAbsolute
  assert "/a/".isAbsolute</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L234" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L234" target="_blank">Edit</a> </dd> </div> </div> <div id="isRelativeTo-procs-all"> <div id="isRelativeTo,string,string"> <dt><pre data-language="nim">proc isRelativeTo(path: string; base: string): bool {....raises: [Exception],
    tags: [RootEffect], forbids: [].}</pre></dt> <dd> Returns true if <code><span class="Identifier">path</span></code> is relative to <code><span class="Identifier">base</span></code>. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">doAssert isRelativeTo("./foo//bar", "foo")
doAssert isRelativeTo("foo/bar", ".")
doAssert isRelativeTo("/foo/bar.nim", "/foo/bar.nim")
doAssert not isRelativeTo("foo/bar.nims", "foo/bar.nim")</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L383" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L383" target="_blank">Edit</a> </dd> </div> </div> <div id="isRootDir-procs-all"> <div id="isRootDir,string"> <dt><pre data-language="nim">proc isRootDir(path: string): bool {.noSideEffect, ...gcsafe, extern: "nos$1",
                                     raises: [], tags: [], forbids: [].}</pre></dt> <dd> Checks whether a given <code><span class="Identifier">path</span></code> is a root directory. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">assert isRootDir("")
assert isRootDir(".")
assert isRootDir("/")
assert isRootDir("a")
assert not isRootDir("/a")
assert not isRootDir("a/b/c")</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L476" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L476" target="_blank">Edit</a> </dd> </div> </div> <div id="joinPath-procs-all"> <div id="joinPath,string,string"> <dt><pre data-language="nim">proc joinPath(head, tail: string): string {.noSideEffect, ...gcsafe,
    extern: "nos$1", raises: [], tags: [], forbids: [].}</pre></dt> <dd> <p>Joins two directory names to one.</p> <p>returns normalized path concatenation of <code><span class="Identifier">head</span></code> and <code><span class="Identifier">tail</span></code>, preserving whether or not <code><span class="Identifier">tail</span></code> has a trailing slash (or, if tail if empty, whether head has one).</p> <p>See also:</p> <ul class="simple">
<li><a title="proc joinPath(parts: varargs[string]): string" href="#joinPath,varargs[string]">joinPath(parts: varargs[string]) proc</a></li> <li><a title="proc `/`(head, tail: string): string" href="#/,string,string">/ proc</a></li> <li><a title="proc splitPath(path: string): tuple[head, tail: string]" href="#splitPath,string">splitPath proc</a></li> <li><a href="uri.html#combine,Uri,Uri">uri.combine proc</a></li> <li><a href="uri.html#/,Uri,string">uri./ proc</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">when defined(posix):
  assert joinPath("usr", "lib") == "usr/lib"
  assert joinPath("usr", "lib/") == "usr/lib/"
  assert joinPath("usr", "") == "usr"
  assert joinPath("usr/", "") == "usr/"
  assert joinPath("", "") == ""
  assert joinPath("", "lib") == "lib"
  assert joinPath("", "/lib") == "/lib"
  assert joinPath("usr/", "/lib") == "usr/lib"
  assert joinPath("usr/lib", "../bin") == "usr/bin"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L92" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L92" target="_blank">Edit</a> </dd> </div> <div id="joinPath,varargs[string]"> <dt><pre data-language="nim">proc joinPath(parts: varargs[string]): string {.noSideEffect, ...gcsafe,
    extern: "nos$1OpenArray", raises: [], tags: [], forbids: [].}</pre></dt> <dd> <p>The same as <a title="proc joinPath(head, tail: string): string" href="#joinPath,string,string">joinPath(head, tail) proc</a>, but works with any number of directory parts.</p> <p>You need to pass at least one element or the proc will assert in debug builds and crash on release builds.</p> <p>See also:</p> <ul class="simple">
<li><a title="proc joinPath(head, tail: string): string" href="#joinPath,string,string">joinPath(head, tail) proc</a></li> <li><a title="proc `/`(head, tail: string): string" href="#/,string,string">/ proc</a></li> <li><a title="proc `/../`(head, tail: string): string" href="#/../,string,string">/../ proc</a></li> <li><a title="proc splitPath(path: string): tuple[head, tail: string]" href="#splitPath,string">splitPath proc</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">when defined(posix):
  assert joinPath("a") == "a"
  assert joinPath("a", "b", "c") == "a/b/c"
  assert joinPath("usr/lib", "../../var", "log") == "var/log"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L136" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L136" target="_blank">Edit</a> </dd> </div> </div> <div id="lastPathPart-procs-all"> <div id="lastPathPart,string"> <dt><pre data-language="nim">proc lastPathPart(path: string): string {.noSideEffect, ...gcsafe, extern: "nos$1",
    raises: [], tags: [], forbids: [].}</pre></dt> <dd> <p>Like <a title="proc extractFilename(path: string): string" href="#extractFilename,string">extractFilename proc</a>, but ignores trailing dir separator; aka: <span id="basename_1">baseName</span> in some other languages.</p> <p>See also:</p> <ul class="simple">
<li><a title="proc searchExtPos(path: string): int" href="#searchExtPos,string">searchExtPos proc</a></li> <li><a title="proc splitFile(path: string): tuple[dir, name, ext: string]" href="#splitFile,string">splitFile proc</a></li> <li><a title="proc extractFilename(path: string): string" href="#extractFilename,string">extractFilename proc</a></li> <li><a title="proc changeFileExt(filename, ext: string): string" href="#changeFileExt,string,string">changeFileExt proc</a></li> <li><a title="proc addFileExt(filename, ext: string): string" href="#addFileExt,string,string">addFileExt proc</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">assert lastPathPart("foo/bar/") == "bar"
assert lastPathPart("foo/bar") == "bar"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L691" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L691" target="_blank">Edit</a> </dd> </div> </div> <div id="normalizedPath-procs-all"> <div id="normalizedPath,string"> <dt><pre data-language="nim">proc normalizedPath(path: string): string {....gcsafe, extern: "nos$1", tags: [],
    raises: [], forbids: [].}</pre></dt> <dd> <p>Returns a normalized path for the current OS.</p> <p>See also:</p> <ul class="simple">
<li><a title="proc absolutePath(path: string; root = getCurrentDir()): string" href="#absolutePath,string">absolutePath proc</a></li> <li>
<a title="proc normalizePath(path: var string)" href="#normalizePath,string">normalizePath proc</a> for the in-place version</li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">when defined(posix):
  assert normalizedPath("a///b//..//c///d") == "a/c/d"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L964" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L964" target="_blank">Edit</a> </dd> </div> </div> <div id="normalizeExe-procs-all"> <div id="normalizeExe,string"> <dt><pre data-language="nim">proc normalizeExe(file: var string) {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> on posix, prepends <code><span class="Operator">./</span></code> if <code><span class="Identifier">file</span></code> doesn't contain <code><span class="Operator">/</span></code> and is not <code><span class="StringLit">""</span><span class="Punctuation">,</span> <span class="StringLit">"."</span><span class="Punctuation">,</span> <span class="StringLit">".."</span></code>. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">import std/sugar
when defined(posix):
  doAssert "foo".dup(normalizeExe) == "./foo"
  doAssert "foo/../bar".dup(normalizeExe) == "foo/../bar"
doAssert "".dup(normalizeExe) == ""</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L975" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L975" target="_blank">Edit</a> </dd> </div> </div> <div id="normalizePath-procs-all"> <div id="normalizePath,string"> <dt><pre data-language="nim">proc normalizePath(path: var string) {....gcsafe, extern: "nos$1", tags: [],
                                       raises: [], forbids: [].}</pre></dt> <dd> <p>Normalize a path.</p> <p>Consecutive directory separators are collapsed, including an initial double slash.</p> <p>On relative paths, double dot (<code><span class="Operator">..</span></code>) sequences are collapsed if possible. On absolute paths they are always collapsed.</p> <div class="admonition admonition-warning">
<span class="admonition-warning-text"><b>Warning:</b></span> URL-encoded and Unicode attempts at directory traversal are not detected. Triple dot is not handled.</div> <p>See also:</p> <ul class="simple">
<li><a title="proc absolutePath(path: string; root = getCurrentDir()): string" href="#absolutePath,string">absolutePath proc</a></li> <li>
<a title="proc normalizedPath(path: string): string" href="#normalizedPath,string">normalizedPath proc</a> for outplace version</li> <li><a title="proc normalizeExe(file: var string)" href="#normalizeExe,string">normalizeExe proc</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">when defined(posix):
  var a = "a///b//..//c///d"
  a.normalizePath()
  assert a == "a/c/d"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L913" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L913" target="_blank">Edit</a> </dd> </div> </div> <div id="normalizePathEnd-procs-all"> <div id="normalizePathEnd,string_2"> <dt><pre data-language="nim">proc normalizePathEnd(path: string; trailingSep = false): string {....raises: [],
    tags: [], forbids: [].}</pre></dt> <dd> outplace overload <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">when defined(posix):
  assert normalizePathEnd("/lib//.//", trailingSep = true) == "/lib/"
  assert normalizePathEnd("lib/./.", trailingSep = false) == "lib"
  assert normalizePathEnd(".//./.", trailingSep = false) == "."
  assert normalizePathEnd("", trailingSep = true) == "" # not / !
  assert normalizePathEnd("/", trailingSep = false) == "/" # not "" !</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L71" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L71" target="_blank">Edit</a> </dd> </div> <div id="normalizePathEnd,string"> <dt><pre data-language="nim">proc normalizePathEnd(path: var string; trailingSep = false) {....raises: [],
    tags: [], forbids: [].}</pre></dt> <dd> Ensures <code>path</code> has exactly 0 or 1 trailing <code><span class="Identifier">DirSep</span></code>, depending on <code>trailingSep</code>, and taking care of edge cases: it preservers whether a path is absolute or relative, and makes sure trailing sep is <code><span class="Identifier">DirSep</span></code>, not <code><span class="Identifier">AltSep</span></code>. Trailing <code><span class="Operator">/.</span></code> are compressed, see examples. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L48" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L48" target="_blank">Edit</a> </dd> </div> </div> <div id="parentDir-procs-all"> <div id="parentDir,string"> <dt><pre data-language="nim">proc parentDir(path: string): string {.noSideEffect, ...gcsafe, extern: "nos$1",
                                       raises: [], tags: [], forbids: [].}</pre></dt> <dd> <p>Returns the parent directory of <code><span class="Identifier">path</span></code>.</p> <p>This is similar to <code>splitPath(path).head</code> when <code>path</code> doesn't end in a dir separator, but also takes care of path normalizations. The remainder can be obtained with <a title="proc lastPathPart(path: string): string" href="#lastPathPart,string">lastPathPart(path) proc</a>.</p> <p>See also:</p> <ul class="simple">
<li><a title="proc relativePath(path, base: string; sep = DirSep): string" href="#relativePath,string,string">relativePath proc</a></li> <li><a title="proc splitPath(path: string): tuple[head, tail: string]" href="#splitPath,string">splitPath proc</a></li> <li><a title="proc tailDir(path: string): string" href="#tailDir,string">tailDir proc</a></li> <li><a title="iterator parentDirs(path: string; fromRoot = false; inclusive = true): string" href="#parentDirs.i,string">parentDirs iterator</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">assert parentDir("") == ""
when defined(posix):
  assert parentDir("/usr/local/bin") == "/usr/local"
  assert parentDir("foo/bar//") == "foo"
  assert parentDir("//foo//bar//.") == "/foo"
  assert parentDir("./foo") == "."
  assert parentDir("/./foo//./") == "/"
  assert parentDir("a//./") == "."
  assert parentDir("a/b/c/..") == "a"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L402" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L402" target="_blank">Edit</a> </dd> </div> </div> <div id="relativePath-procs-all"> <div id="relativePath,string,string"> <dt><pre data-language="nim">proc relativePath(path, base: string; sep = DirSep): string {....gcsafe,
    extern: "nos$1", raises: [Exception], tags: [RootEffect], forbids: [].}</pre></dt> <dd> <p>Converts <code><span class="Identifier">path</span></code> to a path relative to <code><span class="Identifier">base</span></code>.</p> <p>The <code><span class="Identifier">sep</span></code> (default: <a href="osseps.html#DirSep">osseps: DirSep</a>) is used for the path normalizations, this can be useful to ensure the relative path only contains <code><span class="CharLit">'/'</span></code> so that it can be used for URL constructions.</p> <p>On Windows, if a root of <code><span class="Identifier">path</span></code> and a root of <code><span class="Identifier">base</span></code> are different, returns <code><span class="Identifier">path</span></code> as is because it is impossible to make a relative path. That means an absolute path can be returned.</p> <p>See also:</p> <ul class="simple">
<li><a title="proc splitPath(path: string): tuple[head, tail: string]" href="#splitPath,string">splitPath proc</a></li> <li><a title="proc parentDir(path: string): string" href="#parentDir,string">parentDir proc</a></li> <li><a title="proc tailDir(path: string): string" href="#tailDir,string">tailDir proc</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">assert relativePath("/Users/me/bar/z.nim", "/Users/other/bad", '/') == "../../me/bar/z.nim"
assert relativePath("/Users/me/bar/z.nim", "/Users/other", '/') == "../me/bar/z.nim"
when not doslikeFileSystem: # On Windows, UNC-paths start with `//`
  assert relativePath("/Users///me/bar//z.nim", "//Users/", '/') == "me/bar/z.nim"
assert relativePath("/Users/me/bar/z.nim", "/Users/me", '/') == "bar/z.nim"
assert relativePath("", "/users/moo", '/') == ""
assert relativePath("foo", ".", '/') == "foo"
assert relativePath("foo", "foo", '/') == "."</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L293" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L293" target="_blank">Edit</a> </dd> </div> </div> <div id="sameFile-procs-all"> <div id="sameFile,string,string"> <dt><pre data-language="nim">proc sameFile(path1, path2: string): bool {....gcsafe, extern: "nos$1",
    tags: [ReadDirEffect], raises: [OSError], forbids: [].}</pre></dt> <dd> <p>Returns true if both pathname arguments refer to the same physical file or directory.</p> <p>Raises <code><span class="Identifier">OSError</span></code> if any of the files does not exist or information about it can not be obtained.</p> <p>This proc will return true if given two alternative hard-linked or sym-linked paths to the same file or directory.</p> <p>See also:</p> <ul class="simple">
<li><a href="os.html#sameFileContent,string,string">os: sameFileContent proc</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L987" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L987" target="_blank">Edit</a> </dd> </div> </div> <div id="searchExtPos-procs-all"> <div id="searchExtPos,string"> <dt><pre data-language="nim">proc searchExtPos(path: string): int {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> <p>Returns index of the <code><span class="CharLit">'.'</span></code> char in <code><span class="Identifier">path</span></code> if it signifies the beginning of the file extension. Returns -1 otherwise.</p> <p>See also:</p> <ul class="simple">
<li><a title="proc splitFile(path: string): tuple[dir, name, ext: string]" href="#splitFile,string">splitFile proc</a></li> <li><a title="proc extractFilename(path: string): string" href="#extractFilename,string">extractFilename proc</a></li> <li><a title="proc lastPathPart(path: string): string" href="#lastPathPart,string">lastPathPart proc</a></li> <li><a title="proc changeFileExt(filename, ext: string): string" href="#changeFileExt,string,string">changeFileExt proc</a></li> <li><a title="proc addFileExt(filename, ext: string): string" href="#addFileExt,string,string">addFileExt proc</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">assert searchExtPos("a/b/c") == -1
assert searchExtPos("c.nim") == 1
assert searchExtPos("a/b/c.nim") == 5
assert searchExtPos("a.b.c.nim") == 5
assert searchExtPos(".nim") == -1
assert searchExtPos("..nim") == -1
assert searchExtPos("a..nim") == 2</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L572" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L572" target="_blank">Edit</a> </dd> </div> </div> <div id="splitFile-procs-all"> <div id="splitFile,string"> <dt><pre data-language="nim">proc splitFile(path: string): tuple[dir, name, ext: string] {.noSideEffect,
    ...gcsafe, extern: "nos$1", raises: [], tags: [], forbids: [].}</pre></dt> <dd> <p>Splits a filename into <code><span class="Punctuation">(</span><span class="Identifier">dir</span><span class="Punctuation">,</span> <span class="Identifier">name</span><span class="Punctuation">,</span> <span class="Identifier">extension</span><span class="Punctuation">)</span></code> tuple.</p> <p><code><span class="Identifier">dir</span></code> does not end in <a href="osseps.html#DirSep">osseps: DirSep</a> unless it's <code><span class="Operator">/</span></code>. <code><span class="Identifier">extension</span></code> includes the leading dot.</p> <p>If <code><span class="Identifier">path</span></code> has no extension, <code><span class="Identifier">ext</span></code> is the empty string. If <code><span class="Identifier">path</span></code> has no directory component, <code><span class="Identifier">dir</span></code> is the empty string. If <code><span class="Identifier">path</span></code> has no filename component, <code><span class="Identifier">name</span></code> and <code><span class="Identifier">ext</span></code> are empty strings.</p> <p>See also:</p> <ul class="simple">
<li><a title="proc searchExtPos(path: string): int" href="#searchExtPos,string">searchExtPos proc</a></li> <li><a title="proc extractFilename(path: string): string" href="#extractFilename,string">extractFilename proc</a></li> <li><a title="proc lastPathPart(path: string): string" href="#lastPathPart,string">lastPathPart proc</a></li> <li><a title="proc changeFileExt(filename, ext: string): string" href="#changeFileExt,string,string">changeFileExt proc</a></li> <li><a title="proc addFileExt(filename, ext: string): string" href="#addFileExt,string,string">addFileExt proc</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var (dir, name, ext) = splitFile("usr/local/nimc.html")
assert dir == "usr/local"
assert name == "nimc"
assert ext == ".html"
(dir, name, ext) = splitFile("/usr/local/os")
assert dir == "/usr/local"
assert name == "os"
assert ext == ""
(dir, name, ext) = splitFile("/usr/local/")
assert dir == "/usr/local"
assert name == ""
assert ext == ""
(dir, name, ext) = splitFile("/tmp.txt")
assert dir == "/"
assert name == "tmp"
assert ext == ".txt"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L610" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L610" target="_blank">Edit</a> </dd> </div> </div> <div id="splitPath-procs-all"> <div id="splitPath,string"> <dt><pre data-language="nim">proc splitPath(path: string): tuple[head, tail: string] {.noSideEffect, ...gcsafe,
    extern: "nos$1", raises: [], tags: [], forbids: [].}</pre></dt> <dd> <p>Splits a directory into <code><span class="Punctuation">(</span><span class="Identifier">head</span><span class="Punctuation">,</span> <span class="Identifier">tail</span><span class="Punctuation">)</span></code> tuple, so that <code>head / tail == path</code> (except for edge cases like "/usr").</p> <p>See also:</p> <ul class="simple">
<li><a title="proc joinPath(head, tail: string): string" href="#joinPath,string,string">joinPath(head, tail) proc</a></li> <li><a title="proc joinPath(parts: varargs[string]): string" href="#joinPath,varargs[string]">joinPath(parts: varargs[string]) proc</a></li> <li><a title="proc `/`(head, tail: string): string" href="#/,string,string">/ proc</a></li> <li><a title="proc `/../`(head, tail: string): string" href="#/../,string,string">/../ proc</a></li> <li><a title="proc relativePath(path, base: string; sep = DirSep): string" href="#relativePath,string,string">relativePath proc</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">assert splitPath("usr/local/bin") == ("usr/local", "bin")
assert splitPath("usr/local/bin/") == ("usr/local/bin", "")
assert splitPath("/bin/") == ("/bin", "")
when (NimMajor, NimMinor) &lt;= (1, 0):
  assert splitPath("/bin") == ("", "bin")
else:
  assert splitPath("/bin") == ("/", "bin")
assert splitPath("bin") == ("", "bin")
assert splitPath("") == ("", "")</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L185" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L185" target="_blank">Edit</a> </dd> </div> </div> <div id="tailDir-procs-all"> <div id="tailDir,string"> <dt><pre data-language="nim">proc tailDir(path: string): string {.noSideEffect, ...gcsafe, extern: "nos$1",
                                     raises: [], tags: [], forbids: [].}</pre></dt> <dd> <p>Returns the tail part of <code><span class="Identifier">path</span></code>.</p> <p>See also:</p> <ul class="simple">
<li><a title="proc relativePath(path, base: string; sep = DirSep): string" href="#relativePath,string,string">relativePath proc</a></li> <li><a title="proc splitPath(path: string): tuple[head, tail: string]" href="#splitPath,string">splitPath proc</a></li> <li><a title="proc parentDir(path: string): string" href="#parentDir,string">parentDir proc</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">assert tailDir("/bin") == "bin"
assert tailDir("bin") == ""
assert tailDir("bin/") == ""
assert tailDir("/usr/local/bin") == "usr/local/bin"
assert tailDir("//usr//local//bin//") == "usr//local//bin//"
assert tailDir("./usr/local/bin") == "usr/local/bin"
assert tailDir("usr/local/bin") == "local/bin"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L447" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L447" target="_blank">Edit</a> </dd> </div> </div> <div id="unixToNativePath-procs-all"> <div id="unixToNativePath,string,string"> <dt><pre data-language="nim">proc unixToNativePath(path: string; drive = ""): string {.noSideEffect, ...gcsafe,
    extern: "nos$1", raises: [], tags: [], forbids: [].}</pre></dt> <dd> <p>Converts an UNIX-like path to a native one.</p> <p>On an UNIX system this does nothing. Else it converts <code><span class="CharLit">'/'</span></code>, <code><span class="CharLit">'.'</span></code>, <code><span class="CharLit">'..'</span></code> to the appropriate things.</p> <p>On systems with a concept of "drives", <code><span class="Identifier">drive</span></code> is used to determine which drive label to use during absolute path conversion. <code><span class="Identifier">drive</span></code> defaults to the drive of the current working directory, and is ignored on systems that do not have a concept of "drives".</p> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L786" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L786" target="_blank">Edit</a> </dd> </div> </div> </dl>   <h2 id="15">Iterators</h2> <dl> <div id="parentDirs-iterators-all"> <div id="parentDirs.i,string"> <dt><pre data-language="nim">iterator parentDirs(path: string; fromRoot = false; inclusive = true): string {.
    ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> <p>Walks over all parent directories of a given <code><span class="Identifier">path</span></code>.</p> <p>If <code><span class="Identifier">fromRoot</span></code> is true (default: false), the traversal will start from the file system root directory. If <code><span class="Identifier">inclusive</span></code> is true (default), the original argument will be included in the traversal.</p> <p>Relative paths won't be expanded by this iterator. Instead, it will traverse only the directories appearing in the relative path.</p> <p>See also:</p> <ul class="simple">
<li><a title="proc parentDir(path: string): string" href="#parentDir,string">parentDir proc</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let g = "a/b/c"

for p in g.parentDirs:
  echo p
  # a/b/c
  # a/b
  # a

for p in g.parentDirs(fromRoot=true):
  echo p
  # a/
  # a/b/
  # a/b/c

for p in g.parentDirs(inclusive=false):
  echo p
  # a/b
  # a</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/private/ospaths2.nim#L492" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/private/ospaths2.nim#L492" target="_blank">Edit</a> </dd> </div> </div> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2024 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/ospaths2.html" class="_attribution-link">https://nim-lang.org/docs/ospaths2.html</a>
  </p>
</div>
