<h1 class="title">std/logging</h1> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L1" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L1" target="_blank">Edit</a>  
<p>This module implements a simple logger.</p> <p>It has been designed to be as simple as possible to avoid bloat. If this library does not fulfill your needs, write your own.</p> <h2 id="basic-usage">Basic usage</h2>
<p>To get started, first create a logger:</p> <pre class="listing" data-language="nim">import std/logging

var logger = newConsoleLogger()</pre>
<p>The logger that was created above logs to the console, but this module also provides loggers that log to files, such as the <a href="#FileLogger">FileLogger</a>. Creating custom loggers is also possible by inheriting from the <a href="#Logger">Logger</a> type.</p> <p>Once a logger has been created, call its <a href="#log.e,ConsoleLogger,Level,varargs[string,]">log proc</a> to log a message:</p> <pre class="listing" data-language="nim">logger.log(lvlInfo, "a log message")
# Output: INFO a log message</pre>
<p>The <code>INFO</code> within the output is the result of a format string being prepended to the message, and it will differ depending on the message's level. Format strings are <a href="#basic-usage-format-strings">explained in more detail here</a>.</p> <p>There are six logging levels: debug, info, notice, warn, error, and fatal. They are described in more detail within the <a href="#Level">Level enum's documentation</a>. A message is logged if its level is at or above both the logger's <code>levelThreshold</code> field and the global log filter. The latter can be changed with the <a href="#setLogFilter,Level">setLogFilter proc</a>.</p> <div class="admonition admonition-warning">
<span class="admonition-warning-text"><b>Warning:</b></span> For loggers that log to a console or to files, only error and fatal messages will cause their output buffers to be flushed immediately by default. set <code>flushThreshold</code> when creating the logger to change this.</div> <h3 id="basic-usage-handlers">Handlers</h3>
<p>When using multiple loggers, calling the log proc for each logger can become repetitive. Instead of doing that, register each logger that will be used with the <a href="#addHandler,Logger">addHandler proc</a>, which is demonstrated in the following example:</p> <pre class="listing" data-language="nim">import std/logging

var consoleLog = newConsoleLogger()
var fileLog = newFileLogger("errors.log", levelThreshold=lvlError)
var rollingLog = newRollingFileLogger("rolling.log")

addHandler(consoleLog)
addHandler(fileLog)
addHandler(rollingLog)</pre>
<p>After doing this, use either the <a href="#log.t,Level,varargs[string,]">log template</a> or one of the level-specific templates, such as the <a href="#error.t,varargs[string,]">error template</a>, to log messages to all registered handlers at once.</p> <pre class="listing" data-language="nim"># This example uses the loggers created above
log(lvlError, "an error occurred")
error("an error occurred")  # Equivalent to the above line
info("something normal happened")  # Will not be written to errors.log</pre>
<p>Note that a message's level is still checked against each handler's <code>levelThreshold</code> and the global log filter.</p> <h3 id="basic-usage-format-strings">Format strings</h3>
<p>Log messages are prefixed with format strings. These strings contain placeholders for variables, such as <code>$time</code>, that are replaced with their corresponding values, such as the current time, before they are prepended to a log message. Characters that are not part of variables are unaffected.</p> <p>The format string used by a logger can be specified by providing the <code><span class="Identifier">fmtStr</span></code> argument when creating the logger or by setting its <code><span class="Identifier">fmtStr</span></code> field afterward. If not specified, the <a href="#defaultFmtStr">default format string</a> is used.</p> <p>The following variables, which must be prefixed with a dollar sign (<code>$</code>), are available:</p> <table>
<tr>
<th>Variable</th>
<th>Output</th>
</tr> <tr>
<td>$date</td>
<td>Current date</td>
</tr> <tr>
<td>$time</td>
<td>Current time</td>
</tr> <tr>
<td>$datetime</td>
<td>$dateT$time</td>
</tr> <tr>
<td>$app</td>
<td><a href="os.html#getAppFilename">os.getAppFilename()</a></td>
</tr> <tr>
<td>$appname</td>
<td>Base name of <code>$app</code>
</td>
</tr> <tr>
<td>$appdir</td>
<td>Directory name of <code>$app</code>
</td>
</tr> <tr>
<td>$levelid</td>
<td>First letter of log level</td>
</tr> <tr>
<td>$levelname</td>
<td>Log level name</td>
</tr> </table>
<p>Note that <code>$app</code>, <code>$appname</code>, and <code>$appdir</code> are not supported when using the JavaScript backend.</p> <p>The following example illustrates how to use format strings:</p> <pre class="listing" data-language="nim">import std/logging

var logger = newConsoleLogger(fmtStr="[$time] - $levelname: ")
logger.log(lvlInfo, "this is a message")
# Output: [19:50:13] - INFO: this is a message</pre> <h3 id="basic-usage-notes-when-using-multiple-threads">Notes when using multiple threads</h3>
<p>There are a few details to keep in mind when using this module within multiple threads:</p> <ul class="simple">
<li>The global log filter is actually a thread-local variable, so it needs to be set in each thread that uses this module.</li> <li>The list of registered handlers is also a thread-local variable. If a handler will be used in multiple threads, it needs to be registered in each of those threads.</li> </ul> <h2 id="see-also">See also</h2>
<ul class="simple">
<li>
<a href="strutils.html">strutils module</a> for common string functions</li> <li>
<a href="strformat.html">strformat module</a> for string interpolation and formatting</li> <li>
<a href="strscans.html">strscans module</a> for <code>scanf</code> and <code>scanp</code> macros, which offer easier substring extraction than regular expressions</li> </ul>  <h2 id="6">Imports</h2> <dl> <a href="strutils.html">strutils</a>, <a href="times.html">times</a>, <a href="os.html">os</a> </dl>   <h2 id="7">Types</h2> <dl> <div id="ConsoleLogger"> <dt><pre data-language="nim">ConsoleLogger = ref object of Logger
  useStderr*: bool           ## If true, writes to stderr; otherwise, writes to stdout
  flushThreshold*: Level     ## Only messages that are at or above this
                             ## threshold will be flushed immediately</pre></dt> <dd> <p>A logger that writes log messages to the console.</p> <p>Create a new <code>ConsoleLogger</code> with the <a href="#newConsoleLogger">newConsoleLogger proc</a>.</p> <p>See also:</p> <ul class="simple">
<li><a href="#FileLogger">FileLogger</a></li> <li><a href="#RollingFileLogger">RollingFileLogger</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L229" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L229" target="_blank">Edit</a> </dd> </div> <div id="FileLogger"> <dt><pre data-language="nim">FileLogger = ref object of Logger
  file*: File                ## The wrapped file
  flushThreshold*: Level     ## Only messages that are at or above this
                             ## threshold will be flushed immediately</pre></dt> <dd> <p>A logger that writes log messages to a file.</p> <p>Create a new <code>FileLogger</code> with the <a href="#newFileLogger,File">newFileLogger proc</a>.</p> <p><strong>Note:</strong> This logger is not available for the JavaScript backend.</p> <p>See also:</p> <ul class="simple">
<li><a href="#ConsoleLogger">ConsoleLogger</a></li> <li><a href="#RollingFileLogger">RollingFileLogger</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L244" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L244" target="_blank">Edit</a> </dd> </div> <div id="Level"> <dt><pre data-language="nim">Level = enum
  lvlAll,                   ## All levels active
  lvlDebug,                 ## Debug level and above are active
  lvlInfo,                  ## Info level and above are active
  lvlNotice,                ## Notice level and above are active
  lvlWarn,                  ## Warn level and above are active
  lvlError,                 ## Error level and above are active
  lvlFatal,                 ## Fatal level and above are active
  lvlNone                    ## No levels active; nothing is logged</pre></dt> <dd> <p> Enumeration of logging levels.</p> <p>Debug messages represent the lowest logging level, and fatal error messages represent the highest logging level. <code>lvlAll</code> can be used to enable all messages, while <code>lvlNone</code> can be used to disable all messages.</p> <p>Typical usage for each logging level, from lowest to highest, is described below:</p> <ul class="simple">
<li>
<strong>Debug</strong> - debugging information helpful only to developers</li> <li>
<strong>Info</strong> - anything associated with normal operation and without any particular importance</li> <li>
<strong>Notice</strong> - more important information that users should be notified about</li> <li>
<strong>Warn</strong> - impending problems that require some attention</li> <li>
<strong>Error</strong> - error conditions that the application can recover from</li> <li>
<strong>Fatal</strong> - fatal errors that prevent the application from continuing</li> </ul> <p>It is completely up to the application how to utilize each level.</p> <p>Individual loggers have a <code>levelThreshold</code> field that filters out any messages with a level lower than the threshold. There is also a global filter that applies to all log messages, and it can be changed using the <a href="#setLogFilter,Level">setLogFilter proc</a>.</p> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L152" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L152" target="_blank">Edit</a> </dd> </div> <div id="Logger"> <dt><pre data-language="nim">Logger = ref object of RootObj
  levelThreshold*: Level     ## Only messages that are at or above this
                             ## threshold will be logged
  fmtStr*: string            ## Format string to prepend to each log message;
                             ## defaultFmtStr is the default</pre></dt> <dd> <p>The abstract base type of all loggers.</p> <p>Custom loggers should inherit from this type. They should also provide their own implementation of the <a href="#log.e,Logger,Level,varargs[string,]">log method</a>.</p> <p>See also:</p> <ul class="simple">
<li><a href="#ConsoleLogger">ConsoleLogger</a></li> <li><a href="#FileLogger">FileLogger</a></li> <li><a href="#RollingFileLogger">RollingFileLogger</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L213" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L213" target="_blank">Edit</a> </dd> </div> <div id="RollingFileLogger"> <dt><pre>RollingFileLogger = ref object of FileLogger</pre></dt> <dd> <p>A logger that writes log messages to a file while performing log rotation.</p> <p>Create a new <code>RollingFileLogger</code> with the <a href="#newRollingFileLogger,FileMode,Positive,int">newRollingFileLogger proc</a>.</p> <p><strong>Note:</strong> This logger is not available for the JavaScript backend.</p> <p>See also:</p> <ul class="simple">
<li><a href="#ConsoleLogger">ConsoleLogger</a></li> <li><a href="#FileLogger">FileLogger</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L259" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L259" target="_blank">Edit</a> </dd> </div> </dl>   <h2 id="10">Consts</h2> <dl> <div id="defaultFmtStr"> <dt><pre data-language="nim">defaultFmtStr = "$levelname "</pre></dt> <dd> The default format string. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L192" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L192" target="_blank">Edit</a> </dd> </div> <div id="LevelNames"> <dt><pre data-language="nim">LevelNames: array[Level, string] = ["DEBUG", "DEBUG", "INFO", "NOTICE", "WARN",
                                    "ERROR", "FATAL", "NONE"]</pre></dt> <dd> Array of strings representing each logging level. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L188" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L188" target="_blank">Edit</a> </dd> </div> <div id="verboseFmtStr"> <dt><pre data-language="nim">verboseFmtStr = "$levelid, [$datetime] -- $appname: "</pre></dt> <dd> <p> A more verbose format string.</p> <p>This string can be passed as the <code>frmStr</code> argument to procs that create new loggers, such as the <a href="#newConsoleLogger">newConsoleLogger proc</a>.</p> <p>If a different format string is preferred, refer to the <a href="#basic-usage-format-strings">documentation about format strings</a> for more information, including a list of available variables.</p> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L193" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L193" target="_blank">Edit</a> </dd> </div> </dl>   <h2 id="12">Procs</h2> <dl> <div id="addHandler-procs-all"> <div id="addHandler,Logger"> <dt><pre data-language="nim">proc addHandler(handler: Logger) {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Adds a logger to the list of registered handlers.<div class="admonition admonition-warning">
<span class="admonition-warning-text"><b>Warning:</b></span> The list of handlers is a thread-local variable. If the given handler will be used in multiple threads, this proc should be called in each of those threads.</div> <p>See also:</p> <ul class="simple">
<li><a href="#getHandlers">getHandlers proc</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var logger = newConsoleLogger()
addHandler(logger)
doAssert logger in getHandlers()</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L815" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L815" target="_blank">Edit</a> </dd> </div> </div> <div id="defaultFilename-procs-all"> <div id="defaultFilename"> <dt><pre data-language="nim">proc defaultFilename(): string {....raises: [], tags: [ReadIOEffect], forbids: [].}</pre></dt> <dd> <p>Returns the filename that is used by default when naming log files.</p> <p><strong>Note:</strong> This proc is not available for the JavaScript backend.</p> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L461" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L461" target="_blank">Edit</a> </dd> </div> </div> <div id="getHandlers-procs-all"> <div id="getHandlers"> <dt><pre data-language="nim">proc getHandlers(): seq[Logger] {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> <p>Returns a list of all the registered handlers.</p> <p>See also:</p> <ul class="simple">
<li><a href="#addHandler,Logger">addHandler proc</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L830" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L830" target="_blank">Edit</a> </dd> </div> </div> <div id="getLogFilter-procs-all"> <div id="getLogFilter"> <dt><pre data-language="nim">proc getLogFilter(): Level {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> <p>Gets the global log filter.</p> <p>See also:</p> <ul class="simple">
<li><a href="#setLogFilter,Level">setLogFilter proc</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L856" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L856" target="_blank">Edit</a> </dd> </div> </div> <div id="newConsoleLogger-procs-all"> <div id="newConsoleLogger"> <dt><pre data-language="nim">proc newConsoleLogger(levelThreshold = lvlAll; fmtStr = defaultFmtStr;
                      useStderr = false; flushThreshold = defaultFlushThreshold): ConsoleLogger {.
    ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> <p>Creates a new <a href="#ConsoleLogger">ConsoleLogger</a>.</p> <p>By default, log messages are written to <code>stdout</code>. If <code>useStderr</code> is true, they are written to <code>stderr</code> instead.</p> <p>For the JavaScript backend, log messages are written to the console, and <code>useStderr</code> is ignored.</p> <p>See also:</p> <ul class="simple">
<li>
<a href="#newFileLogger,File">newFileLogger proc</a> that uses a file handle</li> <li>
<a href="#newFileLogger,FileMode,int">newFileLogger proc</a> that accepts a filename</li> <li><a href="#newRollingFileLogger,FileMode,Positive,int">newRollingFileLogger proc</a></li> </ul> <p><strong>Examples:</strong></p> <pre class="listing" data-language="nim">var normalLog = newConsoleLogger()
var formatLog = newConsoleLogger(fmtStr=verboseFmtStr)
var errorLog = newConsoleLogger(levelThreshold=lvlError, useStderr=true)</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L399" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L399" target="_blank">Edit</a> </dd> </div> </div> <div id="newFileLogger-procs-all"> <div id="newFileLogger,File"> <dt><pre data-language="nim">proc newFileLogger(file: File; levelThreshold = lvlAll; fmtStr = defaultFmtStr;
                   flushThreshold = defaultFlushThreshold): FileLogger {.
    ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> <p>Creates a new <a href="#FileLogger">FileLogger</a> that uses the given file handle.</p> <p><strong>Note:</strong> This proc is not available for the JavaScript backend.</p> <p>See also:</p> <ul class="simple">
<li><a href="#newConsoleLogger">newConsoleLogger proc</a></li> <li>
<a href="#newFileLogger,FileMode,int">newFileLogger proc</a> that accepts a filename</li> <li><a href="#newRollingFileLogger,FileMode,Positive,int">newRollingFileLogger proc</a></li> </ul> <p><strong>Examples:</strong></p> <pre class="listing" data-language="nim">var messages = open("messages.log", fmWrite)
var formatted = open("formatted.log", fmWrite)
var errors = open("errors.log", fmWrite)

var normalLog = newFileLogger(messages)
var formatLog = newFileLogger(formatted, fmtStr=verboseFmtStr)
var errorLog = newFileLogger(errors, levelThreshold=lvlError)</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L468" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L468" target="_blank">Edit</a> </dd> </div> <div id="newFileLogger,FileMode,int"> <dt><pre data-language="nim">proc newFileLogger(filename = defaultFilename(); mode: FileMode = fmAppend;
                   levelThreshold = lvlAll; fmtStr = defaultFmtStr;
                   bufSize: int = -1; flushThreshold = defaultFlushThreshold): FileLogger {.
    ...raises: [IOError], tags: [], forbids: [].}</pre></dt> <dd> <p>Creates a new <a href="#FileLogger">FileLogger</a> that logs to a file with the given filename.</p> <p><code>bufSize</code> controls the size of the output buffer that is used when writing to the log file. The following values can be provided:</p> <ul class="simple">
<li>
<code>-1</code> - use system defaults</li> <li>
<code>0</code> - unbuffered</li> <li>
<code>&gt; 0</code> - fixed buffer size</li> </ul> <p><strong>Note:</strong> This proc is not available for the JavaScript backend.</p> <p>See also:</p> <ul class="simple">
<li><a href="#newConsoleLogger">newConsoleLogger proc</a></li> <li>
<a href="#newFileLogger,File">newFileLogger proc</a> that uses a file handle</li> <li><a href="#newRollingFileLogger,FileMode,Positive,int">newRollingFileLogger proc</a></li> </ul> <p><strong>Examples:</strong></p> <pre class="listing" data-language="nim">var normalLog = newFileLogger("messages.log")
var formatLog = newFileLogger("formatted.log", fmtStr=verboseFmtStr)
var errorLog = newFileLogger("errors.log", levelThreshold=lvlError)</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L498" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L498" target="_blank">Edit</a> </dd> </div> </div> <div id="newRollingFileLogger-procs-all"> <div id="newRollingFileLogger,FileMode,Positive,int"> <dt><pre data-language="nim">proc newRollingFileLogger(filename = defaultFilename();
                          mode: FileMode = fmReadWrite; levelThreshold = lvlAll;
                          fmtStr = defaultFmtStr; maxLines: Positive = 1000;
                          bufSize: int = -1;
                          flushThreshold = defaultFlushThreshold): RollingFileLogger {.
    ...raises: [IOError, OSError], tags: [ReadDirEffect, ReadIOEffect], forbids: [].}</pre></dt> <dd> <p>Creates a new <a href="#RollingFileLogger">RollingFileLogger</a>.</p> <p>Once the current log file being written to contains <code>maxLines</code> lines, a new log file will be created, and the old log file will be renamed.</p> <p><code>bufSize</code> controls the size of the output buffer that is used when writing to the log file. The following values can be provided:</p> <ul class="simple">
<li>
<code>-1</code> - use system defaults</li> <li>
<code>0</code> - unbuffered</li> <li>
<code>&gt; 0</code> - fixed buffer size</li> </ul> <p><strong>Note:</strong> This proc is not available in the JavaScript backend.</p> <p>See also:</p> <ul class="simple">
<li><a href="#newConsoleLogger">newConsoleLogger proc</a></li> <li>
<a href="#newFileLogger,File">newFileLogger proc</a> that uses a file handle</li> <li>
<a href="#newFileLogger,FileMode,int">newFileLogger proc</a> that accepts a filename</li> </ul> <p><strong>Examples:</strong></p> <pre class="listing" data-language="nim">var normalLog = newRollingFileLogger("messages.log")
var formatLog = newRollingFileLogger("formatted.log", fmtStr=verboseFmtStr)
var shortLog = newRollingFileLogger("short.log", maxLines=200)
var errorLog = newRollingFileLogger("errors.log", levelThreshold=lvlError)</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L554" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L554" target="_blank">Edit</a> </dd> </div> </div> <div id="setLogFilter-procs-all"> <div id="setLogFilter,Level"> <dt><pre data-language="nim">proc setLogFilter(lvl: Level) {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> <p>Sets the global log filter.</p> <p>Messages below the provided level will not be logged regardless of an individual logger's <code>levelThreshold</code>. By default, all messages are logged.</p> <div class="admonition admonition-warning">
<span class="admonition-warning-text"><b>Warning:</b></span> The global log filter is a thread-local variable. If logging is being performed in multiple threads, this proc should be called in each thread unless it is intended that different threads should log at different logging levels.</div> <p>See also:</p> <ul class="simple">
<li><a href="#getLogFilter">getLogFilter proc</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">setLogFilter(lvlError)
doAssert getLogFilter() == lvlError</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L837" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L837" target="_blank">Edit</a> </dd> </div> </div> <div id="substituteLog-procs-all"> <div id="substituteLog,string,Level,varargs[string,]"> <dt><pre data-language="nim">proc substituteLog(frmt: string; level: Level; args: varargs[string, `$`]): string {.
    ...raises: [], tags: [ReadIOEffect, TimeEffect], forbids: [].}</pre></dt> <dd> <p>Formats a log message at the specified level with the given format string.</p> <p>The <a href="#basic-usage-format-strings">format variables</a> present within <code>frmt</code> will be replaced with the corresponding values before being prepended to <code>args</code> and returned.</p> <p>Unless you are implementing a custom logger, there is little need to call this directly. Use either a logger's log method or one of the logging templates.</p> <p>See also:</p> <ul class="simple">
<li>
<a href="#log.e,ConsoleLogger,Level,varargs[string,]">log method</a> for the ConsoleLogger</li> <li>
<a href="#log.e,FileLogger,Level,varargs[string,]">log method</a> for the FileLogger</li> <li>
<a href="#log.e,RollingFileLogger,Level,varargs[string,]">log method</a> for the RollingFileLogger</li> <li><a href="#log.t,Level,varargs[string,]">log template</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">doAssert substituteLog(defaultFmtStr, lvlInfo, "a message") == "INFO a message"
doAssert substituteLog("$levelid - ", lvlError, "an error") == "E - an error"
doAssert substituteLog("$levelid", lvlDebug, "error") == "Derror"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L282" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L282" target="_blank">Edit</a> </dd> </div> </div> </dl>   <h2 id="14">Methods</h2> <dl> <div id="log-methods-all"> <div id="log.e,ConsoleLogger,Level,varargs[string,]"> <dt><pre data-language="nim">method log(logger: ConsoleLogger; level: Level; args: varargs[string, `$`]) {.
    ...raises: [], tags: [ReadIOEffect, TimeEffect, WriteIOEffect], forbids: [].}</pre></dt> <dd> <p>Logs to the console with the given <a href="#ConsoleLogger">ConsoleLogger</a> only.</p> <p>This method ignores the list of registered handlers.</p> <p>Whether the message is logged depends on both the ConsoleLogger's <code>levelThreshold</code> field and the global log filter set using the <a href="#setLogFilter,Level">setLogFilter proc</a>.</p> <p><strong>Note:</strong> Only error and fatal messages will cause the output buffer to be flushed immediately by default. Set <code>flushThreshold</code> when creating the logger to change this.</p> <p>See also:</p> <ul class="simple">
<li>
<a href="#log.e,FileLogger,Level,varargs[string,]">log method</a> for the FileLogger</li> <li>
<a href="#log.e,RollingFileLogger,Level,varargs[string,]">log method</a> for the RollingFileLogger</li> <li><a href="#log.t,Level,varargs[string,]">log template</a></li> </ul> <p><strong>Examples:</strong></p> <pre class="listing" data-language="nim">var consoleLog = newConsoleLogger()
consoleLog.log(lvlInfo, "this is a message")
consoleLog.log(lvlError, "error code is: ", 404)</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L353" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L353" target="_blank">Edit</a> </dd> </div> <div id="log.e,FileLogger,Level,varargs[string,]"> <dt><pre data-language="nim">method log(logger: FileLogger; level: Level; args: varargs[string, `$`]) {.
    ...raises: [IOError], tags: [WriteIOEffect, ReadIOEffect, TimeEffect],
    forbids: [].}</pre></dt> <dd> <p>Logs a message at the specified level using the given <a href="#FileLogger">FileLogger</a> only.</p> <p>This method ignores the list of registered handlers.</p> <p>Whether the message is logged depends on both the FileLogger's <code>levelThreshold</code> field and the global log filter set using the <a href="#setLogFilter,Level">setLogFilter proc</a>.</p> <p><strong>Notes:</strong></p> <ul class="simple">
<li>Only error and fatal messages will cause the output buffer to be flushed immediately by default. Set <code>flushThreshold</code> when creating the logger to change this.</li> <li>This method is not available for the JavaScript backend.</li> </ul> <p>See also:</p> <ul class="simple">
<li>
<a href="#log.e,ConsoleLogger,Level,varargs[string,]">log method</a> for the ConsoleLogger</li> <li>
<a href="#log.e,RollingFileLogger,Level,varargs[string,]">log method</a> for the RollingFileLogger</li> <li><a href="#log.t,Level,varargs[string,]">log template</a></li> </ul> <p><strong>Examples:</strong></p> <pre class="listing" data-language="nim">var fileLog = newFileLogger("messages.log")
fileLog.log(lvlInfo, "this is a message")
fileLog.log(lvlError, "error code is: ", 404)</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L428" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L428" target="_blank">Edit</a> </dd> </div> <div id="log.e,Logger,Level,varargs[string,]"> <dt><pre data-language="nim">method log(logger: Logger; level: Level; args: varargs[string, `$`]) {.
    ...raises: [Exception], gcsafe, tags: [RootEffect], base, ...forbids: [].}</pre></dt> <dd> <p>Override this method in custom loggers. The default implementation does nothing.</p> <p>See also:</p> <ul class="simple">
<li>
<a href="#log.e,ConsoleLogger,Level,varargs[string,]">log method</a> for the ConsoleLogger</li> <li>
<a href="#log.e,FileLogger,Level,varargs[string,]">log method</a> for the FileLogger</li> <li>
<a href="#log.e,RollingFileLogger,Level,varargs[string,]">log method</a> for the RollingFileLogger</li> <li><a href="#log.t,Level,varargs[string,]">log template</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L337" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L337" target="_blank">Edit</a> </dd> </div> <div id="log.e,RollingFileLogger,Level,varargs[string,]"> <dt><pre data-language="nim">method log(logger: RollingFileLogger; level: Level; args: varargs[string, `$`]) {.
    ...raises: [OSError, IOError],
    tags: [ReadDirEffect, ReadIOEffect, WriteIOEffect, TimeEffect], forbids: [].}</pre></dt> <dd> <p>Logs a message at the specified level using the given <a href="#RollingFileLogger">RollingFileLogger</a> only.</p> <p>This method ignores the list of registered handlers.</p> <p>Whether the message is logged depends on both the RollingFileLogger's <code>levelThreshold</code> field and the global log filter set using the <a href="#setLogFilter,Level">setLogFilter proc</a>.</p> <p><strong>Notes:</strong></p> <ul class="simple">
<li>Only error and fatal messages will cause the output buffer to be flushed immediately by default. Set <code>flushThreshold</code> when creating the logger to change this.</li> <li>This method is not available for the JavaScript backend.</li> </ul> <p>See also:</p> <ul class="simple">
<li>
<a href="#log.e,ConsoleLogger,Level,varargs[string,]">log method</a> for the ConsoleLogger</li> <li>
<a href="#log.e,FileLogger,Level,varargs[string,]">log method</a> for the FileLogger</li> <li><a href="#log.t,Level,varargs[string,]">log template</a></li> </ul> <p><strong>Examples:</strong></p> <pre class="listing" data-language="nim">var rollingLog = newRollingFileLogger("messages.log")
rollingLog.log(lvlInfo, "this is a message")
rollingLog.log(lvlError, "error code is: ", 404)</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L611" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L611" target="_blank">Edit</a> </dd> </div> </div> </dl>   <h2 id="18">Templates</h2> <dl> <div id="debug-templates-all"> <div id="debug.t,varargs[string,]"> <dt><pre data-language="nim">template debug(args: varargs[string, `$`])</pre></dt> <dd> <p>Logs a debug message to all registered handlers.</p> <p>Debug messages are typically useful to the application developer only, and they are usually disabled in release builds, although this template does not make that distinction.</p> <p><strong>Examples:</strong></p> <pre class="listing" data-language="nim">var logger = newConsoleLogger()
addHandler(logger)

debug("myProc called with arguments: foo, 5")</pre>
<p>See also:</p> <ul class="simple">
<li><a href="#log.t,Level,varargs[string,]">log template</a></li> <li><a href="#info.t,varargs[string,]">info template</a></li> <li><a href="#notice.t,varargs[string,]">notice template</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L689" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L689" target="_blank">Edit</a> </dd> </div> </div> <div id="error-templates-all"> <div id="error.t,varargs[string,]"> <dt><pre data-language="nim">template error(args: varargs[string, `$`])</pre></dt> <dd> <p>Logs an error message to all registered handlers.</p> <p>Error messages are for application-level error conditions, such as when some user input generated an exception. Typically, the application will continue to run, but with degraded functionality or loss of data, and these effects might be visible to users.</p> <p><strong>Examples:</strong></p> <pre class="listing" data-language="nim">var logger = newConsoleLogger()
addHandler(logger)

error("An exception occurred while processing the form.")</pre>
<p>See also:</p> <ul class="simple">
<li><a href="#log.t,Level,varargs[string,]">log template</a></li> <li><a href="#warn.t,varargs[string,]">warn template</a></li> <li><a href="#fatal.t,varargs[string,]">fatal template</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L772" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L772" target="_blank">Edit</a> </dd> </div> </div> <div id="fatal-templates-all"> <div id="fatal.t,varargs[string,]"> <dt><pre data-language="nim">template fatal(args: varargs[string, `$`])</pre></dt> <dd> <p>Logs a fatal error message to all registered handlers.</p> <p>Fatal error messages usually indicate that the application cannot continue to run and will exit due to a fatal condition. This template only logs the message, and it is the application's responsibility to exit properly.</p> <p><strong>Examples:</strong></p> <pre class="listing" data-language="nim">var logger = newConsoleLogger()
addHandler(logger)

fatal("Can't open database -- exiting.")</pre>
<p>See also:</p> <ul class="simple">
<li><a href="#log.t,Level,varargs[string,]">log template</a></li> <li><a href="#warn.t,varargs[string,]">warn template</a></li> <li><a href="#error.t,varargs[string,]">error template</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L794" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L794" target="_blank">Edit</a> </dd> </div> </div> <div id="info-templates-all"> <div id="info.t,varargs[string,]"> <dt><pre data-language="nim">template info(args: varargs[string, `$`])</pre></dt> <dd> <p>Logs an info message to all registered handlers.</p> <p>Info messages are typically generated during the normal operation of an application and are of no particular importance. It can be useful to aggregate these messages for later analysis.</p> <p><strong>Examples:</strong></p> <pre class="listing" data-language="nim">var logger = newConsoleLogger()
addHandler(logger)

info("Application started successfully.")</pre>
<p>See also:</p> <ul class="simple">
<li><a href="#log.t,Level,varargs[string,]">log template</a></li> <li><a href="#debug.t,varargs[string,]">debug template</a></li> <li><a href="#notice.t,varargs[string,]">notice template</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L710" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L710" target="_blank">Edit</a> </dd> </div> </div> <div id="log-templates-all"> <div id="log.t,Level,varargs[string,]"> <dt><pre data-language="nim">template log(level: Level; args: varargs[string, `$`])</pre></dt> <dd> <p>Logs a message at the specified level to all registered handlers.</p> <p>Whether the message is logged depends on both the FileLogger's <code><span class="Identifier">levelThreshold</span></code> field and the global log filter set using the <a href="#setLogFilter,Level">setLogFilter proc</a>.</p> <p><strong>Examples:</strong></p> <pre class="listing" data-language="nim">var logger = newConsoleLogger()
addHandler(logger)

log(lvlInfo, "This is an example.")</pre>
<p>See also:</p> <ul class="simple">
<li><a href="#debug.t,varargs[string,]">debug template</a></li> <li><a href="#info.t,varargs[string,]">info template</a></li> <li><a href="#notice.t,varargs[string,]">notice template</a></li> <li><a href="#warn.t,varargs[string,]">warn template</a></li> <li><a href="#error.t,varargs[string,]">error template</a></li> <li><a href="#fatal.t,varargs[string,]">fatal template</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L660" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L660" target="_blank">Edit</a> </dd> </div> </div> <div id="notice-templates-all"> <div id="notice.t,varargs[string,]"> <dt><pre data-language="nim">template notice(args: varargs[string, `$`])</pre></dt> <dd> <p>Logs an notice to all registered handlers.</p> <p>Notices are semantically very similar to info messages, but they are meant to be messages that the user should be actively notified about, depending on the application.</p> <p><strong>Examples:</strong></p> <pre class="listing" data-language="nim">var logger = newConsoleLogger()
addHandler(logger)

notice("An important operation has completed.")</pre>
<p>See also:</p> <ul class="simple">
<li><a href="#log.t,Level,varargs[string,]">log template</a></li> <li><a href="#debug.t,varargs[string,]">debug template</a></li> <li><a href="#info.t,varargs[string,]">info template</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L731" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L731" target="_blank">Edit</a> </dd> </div> </div> <div id="warn-templates-all"> <div id="warn.t,varargs[string,]"> <dt><pre data-language="nim">template warn(args: varargs[string, `$`])</pre></dt> <dd> <p>Logs a warning message to all registered handlers.</p> <p>A warning is a non-error message that may indicate impending problems or degraded performance.</p> <p><strong>Examples:</strong></p> <pre class="listing" data-language="nim">var logger = newConsoleLogger()
addHandler(logger)

warn("The previous operation took too long to process.")</pre>
<p>See also:</p> <ul class="simple">
<li><a href="#log.t,Level,varargs[string,]">log template</a></li> <li><a href="#error.t,varargs[string,]">error template</a></li> <li><a href="#fatal.t,varargs[string,]">fatal template</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/logging.nim#L752" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/logging.nim#L752" target="_blank">Edit</a> </dd> </div> </div> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2024 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/logging.html" class="_attribution-link">https://nim-lang.org/docs/logging.html</a>
  </p>
</div>
