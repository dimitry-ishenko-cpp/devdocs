<h1 class="title">std/jsffi</h1> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L1" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L1" target="_blank">Edit</a>  <p class="module-desc">This Module implements types and macros to facilitate the wrapping of, and interaction with JavaScript libraries. Using the provided types <code><span class="Identifier">JsObject</span></code> and <code><span class="Identifier">JsAssoc</span></code> together with the provided macros allows for smoother interfacing with JavaScript, allowing for example quick and easy imports of JavaScript variables: </p>
<p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">import std/jsffi
# Here, we are using jQuery for just a few calls and do not want to wrap the
# whole library:

# import the document object and the console
var document {.importc, nodecl.}: JsObject
var console {.importc, nodecl.}: JsObject
# import the "$" function
proc jq(selector: JsObject): JsObject {.importjs: "$$(#)".}

# Use jQuery to make the following code run, after the document is ready.
# This uses an experimental `.()` operator for `JsObject`, to emit
# JavaScript calls, when no corresponding proc exists for `JsObject`.
proc main =
  jq(document).ready(proc() =
    console.log("Hello JavaScript!")
  )</pre>  <h2 id="6">Imports</h2> <dl> <a href="macros.html">macros</a>, <a href="tables.html">tables</a> </dl>   <h2 id="7">Types</h2> <dl> <div id="js"> <dt><pre>js = JsObject</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L92" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L92" target="_blank">Edit</a> </dd> </div> <div id="JsAssoc"> <dt><pre data-language="nim">JsAssoc[K; V] = ref object of JsRoot</pre></dt> <dd> Statically typed wrapper around a JavaScript object. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L89" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L89" target="_blank">Edit</a> </dd> </div> <div id="JsError"> <dt><pre data-language="nim">JsError {.importc: "Error".} = object of JsRoot
  message*: cstring</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L114" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L114" target="_blank">Edit</a> </dd> </div> <div id="JsEvalError"> <dt><pre data-language="nim">JsEvalError {.importc: "EvalError".} = object of JsError</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L116" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L116" target="_blank">Edit</a> </dd> </div> <div id="JsKey"> <dt><pre data-language="nim">JsKey = concept atypeof(T)
    cstring.toJsKey(T) is T</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L84" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L84" target="_blank">Edit</a> </dd> </div> <div id="JsObject"> <dt><pre>JsObject = ref object of JsRoot</pre></dt> <dd> Dynamically typed wrapper around a JavaScript object. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L87" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L87" target="_blank">Edit</a> </dd> </div> <div id="JsRangeError"> <dt><pre data-language="nim">JsRangeError {.importc: "RangeError".} = object of JsError</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L117" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L117" target="_blank">Edit</a> </dd> </div> <div id="JsReferenceError"> <dt><pre data-language="nim">JsReferenceError {.importc: "ReferenceError".} = object of JsError</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L118" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L118" target="_blank">Edit</a> </dd> </div> <div id="JsSyntaxError"> <dt><pre data-language="nim">JsSyntaxError {.importc: "SyntaxError".} = object of JsError</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L119" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L119" target="_blank">Edit</a> </dd> </div> <div id="JsTypeError"> <dt><pre data-language="nim">JsTypeError {.importc: "TypeError".} = object of JsError</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L120" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L120" target="_blank">Edit</a> </dd> </div> <div id="JsURIError"> <dt><pre data-language="nim">JsURIError {.importc: "URIError".} = object of JsError</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L121" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L121" target="_blank">Edit</a> </dd> </div> </dl>   <h2 id="8">Vars</h2> <dl> <div id="jsArguments"> <dt><pre data-language="nim">jsArguments {.importc: "arguments", nodecl.}: JsObject</pre></dt> <dd> JavaScript's arguments pseudo-variable. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L95" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L95" target="_blank">Edit</a> </dd> </div> <div id="jsDirname"> <dt><pre data-language="nim">jsDirname {.importc: "__dirname", nodecl.}: cstring</pre></dt> <dd> JavaScript's __dirname pseudo-variable. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L101" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L101" target="_blank">Edit</a> </dd> </div> <div id="jsFilename"> <dt><pre data-language="nim">jsFilename {.importc: "__filename", nodecl.}: cstring</pre></dt> <dd> JavaScript's __filename pseudo-variable. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L103" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L103" target="_blank">Edit</a> </dd> </div> <div id="jsNull"> <dt><pre data-language="nim">jsNull {.importc: "null", nodecl.}: JsObject</pre></dt> <dd> JavaScript's null literal. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L97" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L97" target="_blank">Edit</a> </dd> </div> <div id="jsUndefined"> <dt><pre data-language="nim">jsUndefined {.importc: "undefined", nodecl.}: JsObject</pre></dt> <dd> JavaScript's undefined literal. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L99" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L99" target="_blank">Edit</a> </dd> </div> </dl>   <h2 id="12">Procs</h2> <dl> <div id="%-procs-all"> <div id="%,JsObject,JsObject"> <dt><pre data-language="nim">proc `%`(x, y: JsObject): JsObject {.importjs: "(# % #)", ...raises: [], tags: [],
                                     forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L170" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L170" target="_blank">Edit</a> </dd> </div> </div> <div id="%=-procs-all"> <div id="%=,JsObject,JsObject"> <dt><pre data-language="nim">proc `%=`(x, y: JsObject): JsObject {.importjs: "(# %= #)", discardable,
                                      ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L175" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L175" target="_blank">Edit</a> </dd> </div> </div> <div id="&amp;-procs-all"> <div id="&amp;,cstring,cstring"> <dt><pre data-language="nim">proc `&amp;`(a, b: cstring): cstring {.importjs: "(# + #)", ...raises: [], tags: [],
                                   forbids: [].}</pre></dt> <dd> Concatenation operator for JavaScript strings. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L163" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L163" target="_blank">Edit</a> </dd> </div> </div> <div id="*-procs-all"> <div id="*,JsObject,JsObject"> <dt><pre data-language="nim">proc `*`(x, y: JsObject): JsObject {.importjs: "(# * #)", ...raises: [], tags: [],
                                     forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L168" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L168" target="_blank">Edit</a> </dd> </div> </div> <div id="**-procs-all"> <div id="**,JsObject,JsObject"> <dt><pre data-language="nim">proc `**`(x, y: JsObject): JsObject {.importjs: "((#) ** #)", ...raises: [],
                                      tags: [], forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L182" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L182" target="_blank">Edit</a> </dd> </div> </div> <div id="*=-procs-all"> <div id="*=,JsObject,JsObject"> <dt><pre data-language="nim">proc `*=`(x, y: JsObject): JsObject {.importjs: "(# *= #)", discardable,
                                      ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L173" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L173" target="_blank">Edit</a> </dd> </div> </div> <div id="+-procs-all"> <div id="+,JsObject,JsObject"> <dt><pre data-language="nim">proc `+`(x, y: JsObject): JsObject {.importjs: "(# + #)", ...raises: [], tags: [],
                                     forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L166" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L166" target="_blank">Edit</a> </dd> </div> </div> <div id="++-procs-all"> <div id="++,JsObject"> <dt><pre data-language="nim">proc `++`(x: JsObject): JsObject {.importjs: "(++#)", ...raises: [], tags: [],
                                   forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L176" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L176" target="_blank">Edit</a> </dd> </div> </div> <div id="+=-procs-all"> <div id="+=,JsObject,JsObject"> <dt><pre data-language="nim">proc `+=`(x, y: JsObject): JsObject {.importjs: "(# += #)", discardable,
                                      ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L171" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L171" target="_blank">Edit</a> </dd> </div> </div> <div id="--procs-all"> <div id="-,JsObject,JsObject"> <dt><pre data-language="nim">proc `-`(x, y: JsObject): JsObject {.importjs: "(# - #)", ...raises: [], tags: [],
                                     forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L167" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L167" target="_blank">Edit</a> </dd> </div> </div> <div id="---procs-all"> <div id="--,JsObject"> <dt><pre data-language="nim">proc `--`(x: JsObject): JsObject {.importjs: "(--#)", ...raises: [], tags: [],
                                   forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L177" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L177" target="_blank">Edit</a> </dd> </div> </div> <div id="-=-procs-all"> <div id="-=,JsObject,JsObject"> <dt><pre data-language="nim">proc `-=`(x, y: JsObject): JsObject {.importjs: "(# -= #)", discardable,
                                      ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L172" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L172" target="_blank">Edit</a> </dd> </div> </div> <div id="/-procs-all"> <div id="/,JsObject,JsObject"> <dt><pre data-language="nim">proc `/`(x, y: JsObject): JsObject {.importjs: "(# / #)", ...raises: [], tags: [],
                                     forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L169" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L169" target="_blank">Edit</a> </dd> </div> </div> <div id="/=-procs-all"> <div id="/=,JsObject,JsObject"> <dt><pre data-language="nim">proc `/=`(x, y: JsObject): JsObject {.importjs: "(# /= #)", discardable,
                                      ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L174" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L174" target="_blank">Edit</a> </dd> </div> </div> <div id="&lt;-procs-all"> <div id="&lt;,JsObject,JsObject"> <dt><pre data-language="nim">proc `&lt;`(x, y: JsObject): JsObject {.importjs: "(# &lt; #)", ...raises: [], tags: [],
                                     forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L179" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L179" target="_blank">Edit</a> </dd> </div> </div> <div id="&lt;=-procs-all"> <div id="&lt;=,JsObject,JsObject"> <dt><pre data-language="nim">proc `&lt;=`(x, y: JsObject): JsObject {.importjs: "(# &lt;= #)", ...raises: [],
                                      tags: [], forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L181" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L181" target="_blank">Edit</a> </dd> </div> </div> <div id="==-procs-all"> <div id="==,JsRoot,JsRoot"> <dt><pre data-language="nim">proc `==`(x, y: JsRoot): bool {.importjs: "(# === #)", ...raises: [], tags: [],
                                forbids: [].}</pre></dt> <dd> Compares two JsObjects or JsAssocs. Be careful though, as this is comparison like in JavaScript, so if your JsObjects are in fact JavaScript Objects, and not strings or numbers, this is a <em>comparison of references</em>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L215" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L215" target="_blank">Edit</a> </dd> </div> </div> <div id="&gt;-procs-all"> <div id="&gt;,JsObject,JsObject"> <dt><pre data-language="nim">proc `&gt;`(x, y: JsObject): JsObject {.importjs: "(# &gt; #)", ...raises: [], tags: [],
                                     forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L178" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L178" target="_blank">Edit</a> </dd> </div> </div> <div id="&gt;=-procs-all"> <div id="&gt;=,JsObject,JsObject"> <dt><pre data-language="nim">proc `&gt;=`(x, y: JsObject): JsObject {.importjs: "(# &gt;= #)", ...raises: [],
                                      tags: [], forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L180" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L180" target="_blank">Edit</a> </dd> </div> </div> <div id="[]-procs-all"> <div id="[],JsObject,cstring"> <dt><pre data-language="nim">proc `[]`(obj: JsObject; field: cstring): JsObject {.importjs: "#[#]",
    ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> Returns the value of a property of name <code><span class="Identifier">field</span></code> from a JsObject <code><span class="Identifier">obj</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L189" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L189" target="_blank">Edit</a> </dd> </div> <div id="[],JsObject,int"> <dt><pre data-language="nim">proc `[]`(obj: JsObject; field: int): JsObject {.importjs: "#[#]", ...raises: [],
    tags: [], forbids: [].}</pre></dt> <dd> Returns the value of a property of name <code><span class="Identifier">field</span></code> from a JsObject <code><span class="Identifier">obj</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L192" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L192" target="_blank">Edit</a> </dd> </div> <div id="[],JsAssoc[K: JsKey,V],K"> <dt><pre data-language="nim">proc `[]`[K: JsKey; V](obj: JsAssoc[K, V]; field: K): V {.importjs: "#[#]",
    ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> Returns the value of a property of name <code><span class="Identifier">field</span></code> from a JsAssoc <code><span class="Identifier">obj</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L201" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L201" target="_blank">Edit</a> </dd> </div> <div id="[],JsAssoc[cstring,V],string"> <dt><pre data-language="nim">proc `[]`[V](obj: JsAssoc[cstring, V]; field: string): V</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L209" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L209" target="_blank">Edit</a> </dd> </div> </div> <div id="[]=-procs-all"> <div id="[]=,JsAssoc[K: JsKey,V],K,V"> <dt><pre data-language="nim">proc `[]=`[K: JsKey; V](obj: JsAssoc[K, V]; field: K; val: V) {.
    importjs: "#[#] = #", ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> Sets the value of a property of name <code><span class="Identifier">field</span></code> in a JsAssoc <code><span class="Identifier">obj</span></code> to <code><span class="Identifier">v</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L205" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L205" target="_blank">Edit</a> </dd> </div> <div id="[]=,JsObject,cstring,T"> <dt><pre data-language="nim">proc `[]=`[T](obj: JsObject; field: cstring; val: T) {.importjs: "#[#] = #",
    ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> Sets the value of a property of name <code><span class="Identifier">field</span></code> in a JsObject <code><span class="Identifier">obj</span></code> to <code><span class="Identifier">v</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L195" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L195" target="_blank">Edit</a> </dd> </div> <div id="[]=,JsObject,int,T"> <dt><pre data-language="nim">proc `[]=`[T](obj: JsObject; field: int; val: T) {.importjs: "#[#] = #",
    ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> Sets the value of a property of name <code><span class="Identifier">field</span></code> in a JsObject <code><span class="Identifier">obj</span></code> to <code><span class="Identifier">v</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L198" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L198" target="_blank">Edit</a> </dd> </div> <div id="[]=,JsAssoc[cstring,V],string,V"> <dt><pre data-language="nim">proc `[]=`[V](obj: JsAssoc[cstring, V]; field: string; val: V)</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L212" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L212" target="_blank">Edit</a> </dd> </div> </div> <div id="and-procs-all"> <div id="and,JsObject,JsObject"> <dt><pre data-language="nim">proc `and`(x, y: JsObject): JsObject {.importjs: "(# &amp;&amp; #)", ...raises: [],
                                       tags: [], forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L184" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L184" target="_blank">Edit</a> </dd> </div> </div> <div id="hasOwnProperty-procs-all"> <div id="hasOwnProperty,JsObject,cstring"> <dt><pre data-language="nim">proc hasOwnProperty(x: JsObject; prop: cstring): bool {.
    importjs: "#.hasOwnProperty(#)", ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> Checks, whether <code><span class="Identifier">x</span></code> has a property of name <code><span class="Identifier">prop</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L131" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L131" target="_blank">Edit</a> </dd> </div> </div> <div id="in-procs-all"> <div id="in,JsObject,JsObject"> <dt><pre data-language="nim">proc `in`(x, y: JsObject): JsObject {.importjs: "(# in #)", ...raises: [],
                                      tags: [], forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L187" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L187" target="_blank">Edit</a> </dd> </div> </div> <div id="isNull-procs-all"> <div id="isNull,T"> <dt><pre data-language="nim">proc isNull[T](x: T): bool {.noSideEffect, importjs: "(# === null)", ...raises: [],
                             tags: [], forbids: [].}</pre></dt> <dd> Checks if a value is exactly null. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L106" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L106" target="_blank">Edit</a> </dd> </div> </div> <div id="isUndefined-procs-all"> <div id="isUndefined,T"> <dt><pre data-language="nim">proc isUndefined[T](x: T): bool {.noSideEffect, importjs: "(# === undefined)",
                                  ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> Checks if a value is exactly undefined. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L109" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L109" target="_blank">Edit</a> </dd> </div> </div> <div id="jsDelete-procs-all"> <div id="jsDelete,auto"> <dt><pre data-language="nim">proc jsDelete(x: auto): JsObject {.importjs: "(delete #)", ...raises: [], tags: [],
                                   forbids: [].}</pre></dt> <dd> JavaScript's <code><span class="Identifier">delete</span></code> operator. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L142" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L142" target="_blank">Edit</a> </dd> </div> </div> <div id="jsNew-procs-all"> <div id="jsNew,auto"> <dt><pre data-language="nim">proc jsNew(x: auto): JsObject {.importjs: "(new #)", ...raises: [], tags: [],
                                forbids: [].}</pre></dt> <dd> Turns a regular function call into an invocation of the JavaScript's <code><span class="Identifier">new</span></code> operator. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L138" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L138" target="_blank">Edit</a> </dd> </div> </div> <div id="jsTypeOf-procs-all"> <div id="jsTypeOf,JsObject"> <dt><pre data-language="nim">proc jsTypeOf(x: JsObject): cstring {.importjs: "typeof(#)", ...raises: [],
                                      tags: [], forbids: [].}</pre></dt> <dd> Returns the name of the JsObject's JavaScript type as a cstring. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L135" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L135" target="_blank">Edit</a> </dd> </div> </div> <div id="newJsAssoc-procs-all"> <div id="newJsAssoc"> <dt><pre data-language="nim">proc newJsAssoc[K: JsKey; V](): JsAssoc[K, V] {.importjs: "{@}", ...raises: [],
    tags: [], forbids: [].}</pre></dt> <dd> Creates a new empty JsAssoc with key type <code><span class="Identifier">K</span></code> and value type <code><span class="Identifier">V</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L127" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L127" target="_blank">Edit</a> </dd> </div> </div> <div id="newJsObject-procs-all"> <div id="newJsObject"> <dt><pre data-language="nim">proc newJsObject(): JsObject {.importjs: "{@}", ...raises: [], tags: [],
                               forbids: [].}</pre></dt> <dd> Creates a new empty JsObject. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L124" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L124" target="_blank">Edit</a> </dd> </div> </div> <div id="not-procs-all"> <div id="not,JsObject"> <dt><pre data-language="nim">proc `not`(x: JsObject): JsObject {.importjs: "(!#)", ...raises: [], tags: [],
                                    forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L186" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L186" target="_blank">Edit</a> </dd> </div> </div> <div id="or-procs-all"> <div id="or,JsObject,JsObject"> <dt><pre data-language="nim">proc `or`(x, y: JsObject): JsObject {.importjs: "(# || #)", ...raises: [],
                                      tags: [], forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L185" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L185" target="_blank">Edit</a> </dd> </div> </div> <div id="require-procs-all"> <div id="require,cstring"> <dt><pre data-language="nim">proc require(module: cstring): JsObject {.importc, ...raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> JavaScript's <code><span class="Identifier">require</span></code> function. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L145" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L145" target="_blank">Edit</a> </dd> </div> </div> <div id="to-procs-all"> <div id="to,JsObject,typedesc"> <dt><pre data-language="nim">proc to(x: JsObject; T: typedesc): T:type {.importjs: "(#)", ...raises: [],
    tags: [], forbids: [].}</pre></dt> <dd> Converts a JsObject <code><span class="Identifier">x</span></code> to type <code><span class="Identifier">T</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L149" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L149" target="_blank">Edit</a> </dd> </div> </div> <div id="toJs-procs-all"> <div id="toJs,T"> <dt><pre data-language="nim">proc toJs[T](val: T): JsObject {.importjs: "(#)", ...raises: [], tags: [],
                                 forbids: [].}</pre></dt> <dd> Converts a value of any type to type JsObject. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L152" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L152" target="_blank">Edit</a> </dd> </div> </div> <div id="toJsKey-procs-all"> <div id="toJsKey,cstring,typecstring"> <dt><pre data-language="nim">proc toJsKey(text: cstring; t: type cstring): cstring</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L78" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L78" target="_blank">Edit</a> </dd> </div> <div id="toJsKey,cstring,typeT_2"> <dt><pre data-language="nim">proc toJsKey[T: enum](text: cstring; t: type T): T</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L75" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L75" target="_blank">Edit</a> </dd> </div> <div id="toJsKey,cstring,typeT_3"> <dt><pre data-language="nim">proc toJsKey[T: SomeFloat](text: cstring; t: type T): T {.
    importjs: "parseFloat(#)", ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L81" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L81" target="_blank">Edit</a> </dd> </div> <div id="toJsKey,cstring,typeT"> <dt><pre data-language="nim">proc toJsKey[T: SomeInteger](text: cstring; t: type T): T {.
    importjs: "parseInt(#)", ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L73" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L73" target="_blank">Edit</a> </dd> </div> </div> </dl>   <h2 id="15">Iterators</h2> <dl> <div id="items-iterators-all"> <div id="items.i,JsObject"> <dt><pre data-language="nim">iterator items(obj: JsObject): JsObject {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Yields the <code><span class="Identifier">values</span></code> of each field in a JsObject, wrapped into a JsObject. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L362" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L362" target="_blank">Edit</a> </dd> </div> <div id="items.i,JsAssoc[K,V]"> <dt><pre data-language="nim">iterator items[K, V](assoc: JsAssoc[K, V]): V</pre></dt> <dd> Yields the <code><span class="Identifier">values</span></code> in a JsAssoc. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L390" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L390" target="_blank">Edit</a> </dd> </div> </div> <div id="keys-iterators-all"> <div id="keys.i,JsObject"> <dt><pre data-language="nim">iterator keys(obj: JsObject): cstring {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Yields the <code><span class="Identifier">names</span></code> of each field in a JsObject. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L371" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L371" target="_blank">Edit</a> </dd> </div> <div id="keys.i,JsAssoc[K: JsKey,V]"> <dt><pre data-language="nim">iterator keys[K: JsKey; V](assoc: JsAssoc[K, V]): K</pre></dt> <dd> Yields the <code><span class="Identifier">keys</span></code> in a JsAssoc. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L399" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L399" target="_blank">Edit</a> </dd> </div> </div> <div id="pairs-iterators-all"> <div id="pairs.i,JsObject"> <dt><pre data-language="nim">iterator pairs(obj: JsObject): (cstring, JsObject) {....raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> Yields tuples of type <code><span class="Punctuation">(</span><span class="Identifier">cstring</span><span class="Punctuation">,</span> <span class="Identifier">JsObject</span><span class="Punctuation">)</span></code>, with the first entry being the <code><span class="Identifier">name</span></code> of a fields in the JsObject and the second being its value wrapped into a JsObject. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L350" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L350" target="_blank">Edit</a> </dd> </div> <div id="pairs.i,JsAssoc[K: JsKey,V]"> <dt><pre data-language="nim">iterator pairs[K: JsKey; V](assoc: JsAssoc[K, V]): (K, V)</pre></dt> <dd> Yields tuples of type <code><span class="Punctuation">(</span><span class="Identifier">K</span><span class="Punctuation">,</span> <span class="Identifier">V</span><span class="Punctuation">)</span></code>, with the first entry being a <code><span class="Identifier">key</span></code> in the JsAssoc and the second being its corresponding value. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L379" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L379" target="_blank">Edit</a> </dd> </div> </div> </dl>   <h2 id="17">Macros</h2> <dl> <div id=".-macros-all"> <div id="..m,JsObject,untyped"> <dt><pre data-language="nim">macro `.`(obj: JsObject; field: untyped): JsObject</pre></dt> <dd> Experimental dot accessor (get) for type JsObject. Returns the value of a property of name <code><span class="Identifier">field</span></code> from a JsObject <code><span class="Identifier">x</span></code>. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let obj = newJsObject()
obj.a = 20
assert obj.a.to(int) == 20</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L221" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L221" target="_blank">Edit</a> </dd> </div> <div id="..m,JsAssoc[K: cstring,V],untyped"> <dt><pre data-language="nim">macro `.`[K: cstring; V](obj: JsAssoc[K, V]; field: untyped): V</pre></dt> <dd> Experimental dot accessor (get) for type JsAssoc. Returns the value of a property of name <code><span class="Identifier">field</span></code> from a JsObject <code><span class="Identifier">x</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L300" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L300" target="_blank">Edit</a> </dd> </div> </div> <div id=".()-macros-all"> <div id=".().m,JsObject,untyped,varargs[JsObject,jsFromAst]"> <dt><pre data-language="nim">macro `.()`(obj: JsObject; field: untyped; args: varargs[JsObject, jsFromAst]): JsObject</pre></dt> <dd> <p>Experimental "method call" operator for type JsObject. Takes the name of a method of the JavaScript object (<code><span class="Identifier">field</span></code>) and calls it with <code><span class="Identifier">args</span></code> as arguments, returning a JsObject (which may be discarded, and may be <code><span class="Identifier">undefined</span></code>, if the method does not return anything, so be careful when using this.)</p> <p>Example:</p> 
<pre class="listing" data-language="nim"># Let's get back to the console example:
var console {.importc, nodecl.}: JsObject
let res = console.log("I return undefined!")
console.log(res) # This prints undefined, as console.log always returns
                 # undefined. Thus one has to be careful, when using
                 # JsObject calls.</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L265" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L265" target="_blank">Edit</a> </dd> </div> <div id=".().m,JsAssoc[K: cstring,V: proc],untyped,varargs[untyped]"> <dt><pre data-language="nim">macro `.()`[K: cstring; V: proc](obj: JsAssoc[K, V]; field: untyped;
                                 args: varargs[untyped]): auto</pre></dt> <dd> Experimental "method call" operator for type JsAssoc. Takes the name of a method of the JavaScript object (<code><span class="Identifier">field</span></code>) and calls it with <code><span class="Identifier">args</span></code> as arguments. Here, everything is typechecked, so you do not have to worry about <code><span class="Identifier">undefined</span></code> return values. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L335" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L335" target="_blank">Edit</a> </dd> </div> </div> <div id=".=-macros-all"> <div id=".=.m,JsObject,untyped,untyped"> <dt><pre data-language="nim">macro `.=`(obj: JsObject; field, value: untyped): untyped</pre></dt> <dd> Experimental dot accessor (set) for type JsObject. Sets the value of a property of name <code><span class="Identifier">field</span></code> in a JsObject <code><span class="Identifier">x</span></code> to <code><span class="Identifier">value</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L245" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L245" target="_blank">Edit</a> </dd> </div> <div id=".=.m,JsAssoc[K: cstring,V],untyped,V"> <dt><pre data-language="nim">macro `.=`[K: cstring; V](obj: JsAssoc[K, V]; field: untyped; value: V): untyped</pre></dt> <dd> Experimental dot accessor (set) for type JsAssoc. Sets the value of a property of name <code><span class="Identifier">field</span></code> in a JsObject <code><span class="Identifier">x</span></code> to <code><span class="Identifier">value</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L317" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L317" target="_blank">Edit</a> </dd> </div> </div> <div id="bindMethod-macros-all"> <div id="bindMethod.m,typed"> <dt><pre data-language="nim">macro bindMethod(procedure: typed): auto {.
    ...deprecated: "Don\'t use it with closures".}</pre></dt> <dd> <div class="deprecation-message"> <b>Deprecated:</b> Don't use it with closures </div> <p>Takes the name of a procedure and wraps it into a lambda missing the first argument, which passes the JavaScript builtin <code><span class="Identifier">this</span></code> as the first argument to the procedure. Returns the resulting lambda.</p> <p>Example:</p> <p>We want to generate roughly this JavaScript:</p> 
<pre class="listing" data-language="nim">var obj = {a: 10};
obj.someMethod = function() {
  return this.a + 42;
};</pre> <p>We can achieve this using the <code><span class="Identifier">bindMethod</span></code> macro:</p> 
<pre class="listing" data-language="nim">let obj = JsObject{ a: 10 }
proc someMethodImpl(that: JsObject): int =
  that.a.to(int) + 42
obj.someMethod = bindMethod someMethodImpl

# Alternatively:
obj.someMethod = bindMethod
  proc(that: JsObject): int = that.a.to(int) + 42</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L471" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L471" target="_blank">Edit</a> </dd> </div> </div> <div id="jsFromAst-macros-all"> <div id="jsFromAst.m,untyped"> <dt><pre data-language="nim">macro jsFromAst(n: untyped): untyped</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L157" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L157" target="_blank">Edit</a> </dd> </div> </div> <div id="{}-macros-all"> <div id="{}.m,typedesc,varargs[untyped]"> <dt><pre data-language="nim">macro `{}`(typ: typedesc; xs: varargs[untyped]): auto</pre></dt> <dd> <p>Takes a <code><span class="Identifier">typedesc</span></code> as its first argument, and a series of expressions of type <code><span class="Identifier">key</span><span class="Punctuation">:</span> <span class="Identifier">value</span></code>, and returns a value of the specified type with each field <code><span class="Identifier">key</span></code> set to <code><span class="Identifier">value</span></code>, as specified in the arguments of <code><span class="Punctuation">{</span><span class="Punctuation">}</span></code>.</p> <p>Example:</p> 
<pre class="listing" data-language="nim"># Let's say we have a type with a ton of fields, where some fields do not
# need to be set, and we do not want those fields to be set to `nil`:
type
  ExtremelyHugeType = ref object
    a, b, c, d, e, f, g: int
    h, i, j, k, l: cstring
    # And even more fields ...

let obj = ExtremelyHugeType{ a: 1, k: "foo".cstring, d: 42 }

# This generates roughly the same JavaScript as:
{.emit: "var obj = {a: 1, k: "foo", d: 42};".}</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L409" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L409" target="_blank">Edit</a> </dd> </div> </div> </dl>   <h2 id="18">Templates</h2> <dl> <div id="toJs-templates-all"> <div id="toJs.t,string"> <dt><pre data-language="nim">template toJs(s: string): JsObject</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/js/jsffi.nim#L155" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/js/jsffi.nim#L155" target="_blank">Edit</a> </dd> </div> </div> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2024 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/jsffi.html" class="_attribution-link">https://nim-lang.org/docs/jsffi.html</a>
  </p>
</div>
