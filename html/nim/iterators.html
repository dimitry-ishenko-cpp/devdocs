<h1 class="title">system/iterators</h1> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L1" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L1" target="_blank">Edit</a>  <p class="module-desc">Default iterators for some Nim types.</p>  <h2 id="15">Iterators</h2> <dl> <div id="fieldPairs-iterators-all"> <div id="fieldPairs.i,S,T"> <dt><pre data-language="nim">iterator fieldPairs[S: tuple | object; T: tuple | object](x: S; y: T): tuple[
    key: string, a, b: RootObj] {.magic: "FieldPairs", noSideEffect, ...raises: [],
                                  tags: [], forbids: [].}</pre></dt> <dd> Iterates over every field of <code><span class="Identifier">x</span></code> and <code><span class="Identifier">y</span></code>.<div class="admonition admonition-warning">
<span class="admonition-warning-text"><b>Warning:</b></span> This really transforms the 'for' and unrolls the loop. The current implementation also has a bug that affects symbol binding in the loop body.</div> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">type Foo = object
  x1: int
  x2: string
var a1 = Foo(x1: 12, x2: "abc")
var a2: Foo
for name, v1, v2 in fieldPairs(a1, a2):
  when name == "x2": v2 = v1
doAssert a2 == Foo(x1: 0, x2: "abc")</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L337" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L337" target="_blank">Edit</a> </dd> </div> <div id="fieldPairs.i,T"> <dt><pre data-language="nim">iterator fieldPairs[T: tuple | object](x: T): tuple[key: string, val: RootObj] {.
    magic: "FieldPairs", noSideEffect, ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> <p>Iterates over every field of <code><span class="Identifier">x</span></code> returning their name and value.</p> <p>When you iterate over objects with different field types you have to use the compile time <code><span class="Keyword">when</span></code> instead of a runtime <code><span class="Keyword">if</span></code> to select the code you want to run for each type. To perform the comparison use the <a href="manual.html#generics-is-operator">is operator</a>. Another way to do the same without <code><span class="Keyword">when</span></code> is to leave the task of picking the appropriate code to a secondary proc which you overload for each field type and pass the <code><span class="Identifier">value</span></code> to.</p> <div class="admonition admonition-warning">
<span class="admonition-warning-text"><b>Warning:</b></span> This really transforms the 'for' and unrolls the loop. The current implementation also has a bug that affects symbol binding in the loop body.</div> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">type
  Custom = object
    foo: string
    bar: bool
proc `$`(x: Custom): string =
  result = "Custom:"
  for name, value in x.fieldPairs:
    when value is bool:
      result.add("\n\t" &amp; name &amp; " is " &amp; $value)
    else:
      result.add("\n\t" &amp; name &amp; " '" &amp; value &amp; "'")</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L309" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L309" target="_blank">Edit</a> </dd> </div> </div> <div id="fields-iterators-all"> <div id="fields.i,S,T"> <dt><pre data-language="nim">iterator fields[S: tuple | object; T: tuple | object](x: S; y: T): tuple[
    key: string, val: RootObj] {.magic: "Fields", noSideEffect, ...raises: [],
                                 tags: [], forbids: [].}</pre></dt> <dd> Iterates over every field of <code><span class="Identifier">x</span></code> and <code><span class="Identifier">y</span></code>.<div class="admonition admonition-warning">
<span class="admonition-warning-text"><b>Warning:</b></span> This really transforms the 'for' and unrolls the loop. The current implementation also has a bug that affects symbol binding in the loop body.</div> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var t1 = (1, "foo")
var t2 = default(typeof(t1))
for v1, v2 in fields(t1, t2): v2 = v1
doAssert t1 == t2</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L296" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L296" target="_blank">Edit</a> </dd> </div> <div id="fields.i,T"> <dt><pre data-language="nim">iterator fields[T: tuple | object](x: T): RootObj {.magic: "Fields",
    noSideEffect, ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> Iterates over every field of <code><span class="Identifier">x</span></code>.<div class="admonition admonition-warning">
<span class="admonition-warning-text"><b>Warning:</b></span> This really transforms the 'for' and unrolls the loop. The current implementation also has a bug that affects symbol binding in the loop body.</div> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var t = (1, "foo")
for v in fields(t): v = default(typeof(v))
doAssert t == (0, "")</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L284" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L284" target="_blank">Edit</a> </dd> </div> </div> <div id="items-iterators-all"> <div id="items.i,cstring"> <dt><pre data-language="nim">iterator items(a: cstring): char {.inline, ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> Iterates over each item of <code><span class="Identifier">a</span></code>. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">from std/sequtils import toSeq
assert toSeq("abc\0def".cstring) == @['a', 'b', 'c']
assert toSeq("abc".cstring) == @['a', 'b', 'c']</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L70" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L70" target="_blank">Edit</a> </dd> </div> <div id="items.i,string"> <dt><pre data-language="nim">iterator items(a: string): char {.inline, ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> Iterates over each item of <code><span class="Identifier">a</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L265" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L265" target="_blank">Edit</a> </dd> </div> <div id="items.i,array[IX,T]"> <dt><pre data-language="nim">iterator items[IX, T](a: array[IX, T]): T {.inline.}</pre></dt> <dd> Iterates over each item of <code><span class="Identifier">a</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L40" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L40" target="_blank">Edit</a> </dd> </div> <div id="items.i,openArray[T]_2"> <dt><pre data-language="nim">iterator items[T: char](a: openArray[T]): T {.inline.}</pre></dt> <dd> Iterates over each item of <code><span class="Identifier">a</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L23" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L23" target="_blank">Edit</a> </dd> </div> <div id="items.i,typedesc[T]"> <dt><pre data-language="nim">iterator items[T: enum and Ordinal](E: typedesc[T]): T</pre></dt> <dd> Iterates over the values of <code><span class="Identifier">E</span></code>. See also <code><span class="Identifier">enumutils</span><span class="Operator">.</span><span class="Identifier">items</span></code> for enums with holes. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">type Goo = enum g0 = 2, g1, g2
from std/sequtils import toSeq
assert Goo.toSeq == [g0, g1, g2]</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L130" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L130" target="_blank">Edit</a> </dd> </div> <div id="items.i,openArray[T]"> <dt><pre data-language="nim">iterator items[T: not char](a: openArray[T]): lent2 T {.inline.}</pre></dt> <dd> Iterates over each item of <code><span class="Identifier">a</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L16" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L16" target="_blank">Edit</a> </dd> </div> <div id="items.i,Slice[T: Ordinal]"> <dt><pre data-language="nim">iterator items[T: Ordinal](s: Slice[T]): T</pre></dt> <dd> Iterates over the slice <code><span class="Identifier">s</span></code>, yielding each value between <code><span class="Identifier">s</span><span class="Operator">.</span><span class="Identifier">a</span></code> and <code><span class="Identifier">s</span><span class="Operator">.</span><span class="Identifier">b</span></code> (inclusively). <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L140" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L140" target="_blank">Edit</a> </dd> </div> <div id="items.i,seq[T]"> <dt><pre data-language="nim">iterator items[T](a: seq[T]): lent2 T {.inline.}</pre></dt> <dd> Iterates over each item of <code><span class="Identifier">a</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L247" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L247" target="_blank">Edit</a> </dd> </div> <div id="items.i,set[T]"> <dt><pre data-language="nim">iterator items[T](a: set[T]): T {.inline.}</pre></dt> <dd> Iterates over each element of <code><span class="Identifier">a</span></code>. <code><span class="Identifier">items</span></code> iterates only over the elements that are really in the set (and not over the ones the set is able to hold). <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L58" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L58" target="_blank">Edit</a> </dd> </div> </div> <div id="mitems-iterators-all"> <div id="mitems.i,cstring"> <dt><pre data-language="nim">iterator mitems(a: var cstring): var char {.inline, ...raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> Iterates over each item of <code><span class="Identifier">a</span></code> so that you can modify the yielded value. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">from std/sugar import collect
var a = "abc\0def"
prepareMutation(a)
var b = a.cstring
let s = collect:
  for bi in mitems(b):
    if bi == 'b': bi = 'B'
    bi
assert s == @['a', 'B', 'c']
assert b == "aBc"
assert a == "aBc\0def"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L99" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L99" target="_blank">Edit</a> </dd> </div> <div id="mitems.i,string"> <dt><pre data-language="nim">iterator mitems(a: var string): var char {.inline, ...raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> Iterates over each item of <code><span class="Identifier">a</span></code> so that you can modify the yielded value. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L274" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L274" target="_blank">Edit</a> </dd> </div> <div id="mitems.i,array[IX,T]"> <dt><pre data-language="nim">iterator mitems[IX, T](a: var array[IX, T]): var T {.inline.}</pre></dt> <dd> Iterates over each item of <code><span class="Identifier">a</span></code> so that you can modify the yielded value. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L49" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L49" target="_blank">Edit</a> </dd> </div> <div id="mitems.i,openArray[T]"> <dt><pre data-language="nim">iterator mitems[T](a: var openArray[T]): var T {.inline.}</pre></dt> <dd> Iterates over each item of <code><span class="Identifier">a</span></code> so that you can modify the yielded value. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L33" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L33" target="_blank">Edit</a> </dd> </div> <div id="mitems.i,seq[T]"> <dt><pre data-language="nim">iterator mitems[T](a: var seq[T]): var T {.inline.}</pre></dt> <dd> Iterates over each item of <code><span class="Identifier">a</span></code> so that you can modify the yielded value. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L256" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L256" target="_blank">Edit</a> </dd> </div> </div> <div id="mpairs-iterators-all"> <div id="mpairs.i,cstring"> <dt><pre data-language="nim">iterator mpairs(a: var cstring): tuple[key: int, val: var char] {.inline,
    ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> Iterates over each item of <code><span class="Identifier">a</span></code>. Yields <code><span class="Punctuation">(</span><span class="Identifier">index</span><span class="Punctuation">,</span> <span class="Identifier">a</span><span class="Punctuation">[</span><span class="Identifier">index</span><span class="Punctuation">]</span><span class="Punctuation">)</span></code> pairs. <code><span class="Identifier">a</span><span class="Punctuation">[</span><span class="Identifier">index</span><span class="Punctuation">]</span></code> can be modified. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L232" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L232" target="_blank">Edit</a> </dd> </div> <div id="mpairs.i,string"> <dt><pre data-language="nim">iterator mpairs(a: var string): tuple[key: int, val: var char] {.inline,
    ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> Iterates over each item of <code><span class="Identifier">a</span></code>. Yields <code><span class="Punctuation">(</span><span class="Identifier">index</span><span class="Punctuation">,</span> <span class="Identifier">a</span><span class="Punctuation">[</span><span class="Identifier">index</span><span class="Punctuation">]</span><span class="Punctuation">)</span></code> pairs. <code><span class="Identifier">a</span><span class="Punctuation">[</span><span class="Identifier">index</span><span class="Punctuation">]</span></code> can be modified. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L208" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L208" target="_blank">Edit</a> </dd> </div> <div id="mpairs.i,array[IX,T]"> <dt><pre data-language="nim">iterator mpairs[IX, T](a: var array[IX, T]): tuple[key: IX, val: var T] {.inline.}</pre></dt> <dd> Iterates over each item of <code><span class="Identifier">a</span></code>. Yields <code><span class="Punctuation">(</span><span class="Identifier">index</span><span class="Punctuation">,</span> <span class="Identifier">a</span><span class="Punctuation">[</span><span class="Identifier">index</span><span class="Punctuation">]</span><span class="Punctuation">)</span></code> pairs. <code><span class="Identifier">a</span><span class="Punctuation">[</span><span class="Identifier">index</span><span class="Punctuation">]</span></code> can be modified. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L170" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L170" target="_blank">Edit</a> </dd> </div> <div id="mpairs.i,openArray[T]"> <dt><pre data-language="nim">iterator mpairs[T](a: var openArray[T]): tuple[key: int, val: var T] {.inline.}</pre></dt> <dd> Iterates over each item of <code><span class="Identifier">a</span></code>. Yields <code><span class="Punctuation">(</span><span class="Identifier">index</span><span class="Punctuation">,</span> <span class="Identifier">a</span><span class="Punctuation">[</span><span class="Identifier">index</span><span class="Punctuation">]</span><span class="Punctuation">)</span></code> pairs. <code><span class="Identifier">a</span><span class="Punctuation">[</span><span class="Identifier">index</span><span class="Punctuation">]</span></code> can be modified. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L153" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L153" target="_blank">Edit</a> </dd> </div> <div id="mpairs.i,seq[T]"> <dt><pre data-language="nim">iterator mpairs[T](a: var seq[T]): tuple[key: int, val: var T] {.inline.}</pre></dt> <dd> Iterates over each item of <code><span class="Identifier">a</span></code>. Yields <code><span class="Punctuation">(</span><span class="Identifier">index</span><span class="Punctuation">,</span> <span class="Identifier">a</span><span class="Punctuation">[</span><span class="Identifier">index</span><span class="Punctuation">]</span><span class="Punctuation">)</span></code> pairs. <code><span class="Identifier">a</span><span class="Punctuation">[</span><span class="Identifier">index</span><span class="Punctuation">]</span></code> can be modified. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L189" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L189" target="_blank">Edit</a> </dd> </div> </div> <div id="pairs-iterators-all"> <div id="pairs.i,cstring"> <dt><pre data-language="nim">iterator pairs(a: cstring): tuple[key: int, val: char] {.inline, ...raises: [],
    tags: [], forbids: [].}</pre></dt> <dd> Iterates over each item of <code><span class="Identifier">a</span></code>. Yields <code><span class="Punctuation">(</span><span class="Identifier">index</span><span class="Punctuation">,</span> <span class="Identifier">a</span><span class="Punctuation">[</span><span class="Identifier">index</span><span class="Punctuation">]</span><span class="Punctuation">)</span></code> pairs. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L218" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L218" target="_blank">Edit</a> </dd> </div> <div id="pairs.i,string"> <dt><pre data-language="nim">iterator pairs(a: string): tuple[key: int, val: char] {.inline, ...raises: [],
    tags: [], forbids: [].}</pre></dt> <dd> Iterates over each item of <code><span class="Identifier">a</span></code>. Yields <code><span class="Punctuation">(</span><span class="Identifier">index</span><span class="Punctuation">,</span> <span class="Identifier">a</span><span class="Punctuation">[</span><span class="Identifier">index</span><span class="Punctuation">]</span><span class="Punctuation">)</span></code> pairs. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L199" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L199" target="_blank">Edit</a> </dd> </div> <div id="pairs.i,array[IX,T]"> <dt><pre data-language="nim">iterator pairs[IX, T](a: array[IX, T]): tuple[key: IX, val: T] {.inline.}</pre></dt> <dd> Iterates over each item of <code><span class="Identifier">a</span></code>. Yields <code><span class="Punctuation">(</span><span class="Identifier">index</span><span class="Punctuation">,</span> <span class="Identifier">a</span><span class="Punctuation">[</span><span class="Identifier">index</span><span class="Punctuation">]</span><span class="Punctuation">)</span></code> pairs. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L161" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L161" target="_blank">Edit</a> </dd> </div> <div id="pairs.i,openArray[T]"> <dt><pre data-language="nim">iterator pairs[T](a: openArray[T]): tuple[key: int, val: T] {.inline.}</pre></dt> <dd> Iterates over each item of <code><span class="Identifier">a</span></code>. Yields <code><span class="Punctuation">(</span><span class="Identifier">index</span><span class="Punctuation">,</span> <span class="Identifier">a</span><span class="Punctuation">[</span><span class="Identifier">index</span><span class="Punctuation">]</span><span class="Punctuation">)</span></code> pairs. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L146" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L146" target="_blank">Edit</a> </dd> </div> <div id="pairs.i,seq[T]"> <dt><pre data-language="nim">iterator pairs[T](a: seq[T]): tuple[key: int, val: T] {.inline.}</pre></dt> <dd> Iterates over each item of <code><span class="Identifier">a</span></code>. Yields <code><span class="Punctuation">(</span><span class="Identifier">index</span><span class="Punctuation">,</span> <span class="Identifier">a</span><span class="Punctuation">[</span><span class="Identifier">index</span><span class="Punctuation">]</span><span class="Punctuation">)</span></code> pairs. <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/system/iterators.nim#L180" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/system/iterators.nim#L180" target="_blank">Edit</a> </dd> </div> </div> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2024 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/iterators.html" class="_attribution-link">https://nim-lang.org/docs/iterators.html</a>
  </p>
</div>
