<h1 class="title">asyncfutures</h1>    <h2 id="6">Imports</h2> <dl> <a href="os.html">os</a>, <a href="tables.html">tables</a>, <a href="strutils.html">strutils</a>, <a href="times.html">times</a>, <a href="heapqueue.html">heapqueue</a>, <a href="options.html">options</a>, <a href="deques.html">deques</a>, <a href="cstrutils.html">cstrutils</a>, <a href="stacktraces.html">stacktraces</a> </dl>  <h2 id="7">Types</h2> <dl>  <dt><pre id="FutureBase" data-language="nim">FutureBase = ref object of RootObj
  callbacks: CallbackList
  finished: bool
  error*: ref Exception      ## Stored exception
  errorStackTrace*: string
  when not false:
      stackTrace: seq[StackTraceEntry] ## For debugging purposes only.
      id: int
      fromProc: string</pre></dt> <dd> Untyped future. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L22" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L22" target="_blank">Edit</a> </dd>  <dt><pre id="Future" data-language="nim">Future[T] = ref object of FutureBase
  value: T                   ## Stored value</pre></dt> <dd> Typed future. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L33" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L33" target="_blank">Edit</a> </dd>  <dt><pre id="FutureVar" data-language="nim">FutureVar[T] = distinct Future[T]</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L36" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L36" target="_blank">Edit</a> </dd>  <dt><pre id="FutureError" data-language="nim">FutureError = object of Defect
  cause*: FutureBase</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L38" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L38" target="_blank">Edit</a> </dd> </dl>  <h2 id="10">Consts</h2> <dl>  <dt><pre id="isFutureLoggingEnabled">isFutureLoggingEnabled = false</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L44" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L44" target="_blank">Edit</a> </dd>  <dt><pre id="NimAsyncContinueSuffix" data-language="nim">NimAsyncContinueSuffix = "NimAsyncContinue"</pre></dt> <dd> For internal usage. Do not use. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L47" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L47" target="_blank">Edit</a> </dd> </dl>  <h2 id="12">Procs</h2> <dl>  <dt><pre id="getCallSoonProc" data-language="nim">proc getCallSoonProc(): (proc (cbproc: proc ()) {...}{.gcsafe.}) {...}{.raises: [],
    tags: [].}</pre></dt> <dd> Get current implementation of <code>callSoon</code>. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L88" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L88" target="_blank">Edit</a> </dd>  <dt><pre id="setCallSoonProc" data-language="nim">proc setCallSoonProc(p: (proc (cbproc: proc ()) {...}{.gcsafe.})) {...}{.raises: [],
    tags: [].}</pre></dt> <dd> Change current implementation of <code>callSoon</code>. This is normally called when dispatcher from <code>asyncdispatcher</code> is initialized. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L92" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L92" target="_blank">Edit</a> </dd>  <dt><pre id="callSoon%2Cproc%29" data-language="nim">proc callSoon(cbproc: proc ()) {...}{.raises: [Exception], tags: [RootEffect].}</pre></dt> <dd> <p>Call <code>cbproc</code> "soon".</p> <p>If async dispatcher is running, <code>cbproc</code> will be executed during next dispatcher tick.</p> <p>If async dispatcher is not running, <code>cbproc</code> will be executed immediately.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L96" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L96" target="_blank">Edit</a> </dd>  <dt><pre id="newFuture%2Cstring" data-language="nim">proc newFuture[T](fromProc: string = "unspecified"): owned(Future[T])</pre></dt> <dd> <p>Creates a new future.</p> <p>Specifying <code>fromProc</code>, which is a string specifying the name of the proc that this future belongs to, is a good habit as it helps with debugging.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L117" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L117" target="_blank">Edit</a> </dd>  <dt><pre id="newFutureVar%2Cstring" data-language="nim">proc newFutureVar[T](fromProc = "unspecified"): owned(FutureVar[T])</pre></dt> <dd> <p>Create a new <code>FutureVar</code>. This Future type is ideally suited for situations where you want to avoid unnecessary allocations of Futures.</p> <p>Specifying <code>fromProc</code>, which is a string specifying the name of the proc that this future belongs to, is a good habit as it helps with debugging.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L125" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L125" target="_blank">Edit</a> </dd>  <dt><pre id="clean%2CFutureVar%5BT%5D" data-language="nim">proc clean[T](future: FutureVar[T])</pre></dt> <dd> Resets the <code>finished</code> status of <code>future</code>. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L135" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L135" target="_blank">Edit</a> </dd>  <dt><pre id="complete%2CFuture%5BT%5D%2CT" data-language="nim">proc complete[T](future: Future[T]; val: T)</pre></dt> <dd> Completes <code>future</code> with value <code>val</code>. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L192" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L192" target="_blank">Edit</a> </dd>  <dt><pre id="complete%2CFuture%5Bvoid%5D" data-language="nim">proc complete(future: Future[void]) {...}{.raises: [Exception], tags: [RootEffect].}</pre></dt> <dd> Completes a void <code>future</code>. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L202" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L202" target="_blank">Edit</a> </dd>  <dt><pre id="complete%2CFutureVar%5BT%5D" data-language="nim">proc complete[T](future: FutureVar[T])</pre></dt> <dd> Completes a <code>FutureVar</code>. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L211" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L211" target="_blank">Edit</a> </dd>  <dt><pre id="complete%2CFutureVar%5BT%5D%2CT" data-language="nim">proc complete[T](future: FutureVar[T]; val: T)</pre></dt> <dd> <p>Completes a <code>FutureVar</code> with value <code>val</code>.</p> <p>Any previously stored value will be overwritten.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L220" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L220" target="_blank">Edit</a> </dd>  <dt><pre id="fail%2CFuture%5BT%5D%2Cref.Exception" data-language="nim">proc fail[T](future: Future[T]; error: ref Exception)</pre></dt> <dd> Completes <code>future</code> with <code>error</code>. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L232" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L232" target="_blank">Edit</a> </dd>  <dt><pre id="clearCallbacks%2CFutureBase" data-language="nim">proc clearCallbacks(future: FutureBase) {...}{.raises: [], tags: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L243" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L243" target="_blank">Edit</a> </dd>  <dt><pre id="addCallback%2CFutureBase%2Cproc%29" data-language="nim">proc addCallback(future: FutureBase; cb: proc () {...}{.closure, gcsafe.}) {...}{.
    raises: [Exception], tags: [RootEffect].}</pre></dt> <dd> <p>Adds the callbacks proc to be called when the future completes.</p> <p>If future has already completed then <code>cb</code> will be called immediately.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L247" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L247" target="_blank">Edit</a> </dd>  <dt><pre id="addCallback%2CFuture%5BT%5D%2Cproc%28Future%5BT%5D%29" data-language="nim">proc addCallback[T](future: Future[T];
                    cb: proc (future: Future[T]) {...}{.closure, gcsafe.})</pre></dt> <dd> <p>Adds the callbacks proc to be called when the future completes.</p> <p>If future has already completed then <code>cb</code> will be called immediately.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L257" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L257" target="_blank">Edit</a> </dd>  <dt><pre id="callback%3D%2CFutureBase%2Cproc%29" data-language="nim">proc callback=(future: FutureBase; cb: proc () {...}{.closure, gcsafe.}) {...}{.
    raises: [Exception], tags: [RootEffect].}</pre></dt> <dd> <p>Clears the list of callbacks and sets the callback proc to be called when the future completes.</p> <p>If future has already completed then <code>cb</code> will be called immediately.</p> <p>It's recommended to use <code>addCallback</code> or <code>then</code> instead.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L267" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L267" target="_blank">Edit</a> </dd>  <dt><pre id="callback%3D%2CFuture%5BT%5D%2Cproc%28Future%5BT%5D%29" data-language="nim">proc callback=[T](future: Future[T];
                  cb: proc (future: Future[T]) {...}{.closure, gcsafe.})</pre></dt> <dd> <p>Sets the callback proc to be called when the future completes.</p> <p>If future has already completed then <code>cb</code> will be called immediately.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L276" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L276" target="_blank">Edit</a> </dd>  <dt><pre id="%24%2Cseq%5BStackTraceEntry%5D" data-language="nim">proc `$`(stackTraceEntries: seq[StackTraceEntry]): string {...}{.
    raises: [ValueError], tags: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L312" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L312" target="_blank">Edit</a> </dd>  <dt><pre id="read" data-language="nim">proc read[T](future: Future[T] | FutureVar[T]): T</pre></dt> <dd> <p>Retrieves the value of <code>future</code>. Future must be finished otherwise this function will fail with a <code>ValueError</code> exception.</p> <p>If the result of the future is an error then that error will be raised.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L379" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L379" target="_blank">Edit</a> </dd>  <dt><pre id="readError%2CFuture%5BT%5D" data-language="nim">proc readError[T](future: Future[T]): ref Exception</pre></dt> <dd> <p>Retrieves the exception stored in <code>future</code>.</p> <p>An <code>ValueError</code> exception will be thrown if no exception exists in the specified Future.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L397" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L397" target="_blank">Edit</a> </dd>  <dt><pre id="mget%2CFutureVar%5BT%5D" data-language="nim">proc mget[T](future: FutureVar[T]): var T</pre></dt> <dd> <p>Returns a mutable value stored in <code>future</code>.</p> <p>Unlike <code>read</code>, this function will not raise an exception if the Future has not been finished.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L406" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L406" target="_blank">Edit</a> </dd>  <dt><pre id="finished" data-language="nim">proc finished(future: FutureBase | FutureVar): bool</pre></dt> <dd> <p>Determines whether <code>future</code> has completed.</p> <p><code>True</code> may indicate an error or a value. Use <code>failed</code> to distinguish.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L413" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L413" target="_blank">Edit</a> </dd>  <dt><pre id="failed%2CFutureBase" data-language="nim">proc failed(future: FutureBase): bool {...}{.raises: [], tags: [].}</pre></dt> <dd> Determines whether <code>future</code> completed with an error. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L422" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L422" target="_blank">Edit</a> </dd>  <dt><pre id="asyncCheck%2CFuture%5BT%5D" data-language="nim">proc asyncCheck[T](future: Future[T])</pre></dt> <dd> <p>Sets a callback on <code>future</code> which raises an exception if the future finished with an error.</p> <p>This should be used instead of <code>discard</code> to discard void futures, or use <code>waitFor</code> if you need to wait for the future's completion.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L426" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L426" target="_blank">Edit</a> </dd>  <dt><pre id="and%2CFuture%5BT%5D%2CFuture%5BY%5D" data-language="nim">proc `and`[T, Y](fut1: Future[T]; fut2: Future[Y]): Future[void]</pre></dt> <dd> Returns a future which will complete once both <code>fut1</code> and <code>fut2</code> complete. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L441" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L441" target="_blank">Edit</a> </dd>  <dt><pre id="or%2CFuture%5BT%5D%2CFuture%5BY%5D" data-language="nim">proc `or`[T, Y](fut1: Future[T]; fut2: Future[Y]): Future[void]</pre></dt> <dd> Returns a future which will complete once either <code>fut1</code> or <code>fut2</code> complete. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L457" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L457" target="_blank">Edit</a> </dd>  <dt><pre id="all%2Cvarargs%5BFuture%5BT%5D%5D" data-language="nim">proc all[T](futs: varargs[Future[T]]): auto</pre></dt> <dd> <p>Returns a future which will complete once all futures in <code>futs</code> complete. If the argument is empty, the returned future completes immediately.</p> <p>If the awaited futures are not <code>Future[void]</code>, the returned future will hold the values of all awaited futures in a sequence.</p> <p>If the awaited futures <em>are</em> <code>Future[void]</code>, this proc returns <code>Future[void]</code>.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/asyncfutures.nim#L469" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/asyncfutures.nim#L469" target="_blank">Edit</a> </dd> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2021 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/asyncfutures.html" class="_attribution-link">https://nim-lang.org/docs/asyncfutures.html</a>
  </p>
</div>
