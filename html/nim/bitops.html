<h1 class="title">std/bitops</h1> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L1" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L1" target="_blank">Edit</a>  
<p>This module implements a series of low level methods for bit manipulation.</p> <p>By default, compiler intrinsics are used where possible to improve performance on supported compilers: <code><span class="Identifier">GCC</span></code>, <code><span class="Identifier">LLVM_GCC</span></code>, <code><span class="Identifier">CLANG</span></code>, <code><span class="Identifier">VCC</span></code>, <code><span class="Identifier">ICC</span></code>.</p> <p>The module will fallback to pure nim procs in case the backend is not supported. You can also use the flag <code><span class="Identifier">noIntrinsicsBitOpts</span></code> to disable compiler intrinsics.</p> <p>This module is also compatible with other backends: <code><span class="Identifier">JavaScript</span></code>, <code><span class="Identifier">NimScript</span></code> as well as the <code><span class="Identifier">compiletime</span> <span class="Identifier">VM</span></code>.</p> <p>As a result of using optimized functions/intrinsics, some functions can return undefined results if the input is invalid. You can use the flag <code><span class="Identifier">noUndefinedBitOpts</span></code> to force predictable behaviour for all input, causing a small performance hit.</p> <p>At this time only <code><span class="Identifier">fastLog2</span></code>, <code><span class="Identifier">firstSetBit</span></code>, <code><span class="Identifier">countLeadingZeroBits</span></code> and <code><span class="Identifier">countTrailingZeroBits</span></code> may return undefined and/or platform dependent values if given invalid input.</p>  <h2 id="6">Imports</h2> <dl> <a href="macros.html">macros</a>, <a href="since.html">since</a>, <a href="bitops_utils.html">bitops_utils</a>, <a href="countbits_impl.html">countbits_impl</a> </dl>   <h2 id="7">Types</h2> <dl> <div id="BitsRange"> <dt><pre data-language="nim">BitsRange[T] = range[0 .. sizeof(T) * 8 - 1]</pre></dt> <dd> A range with all bit positions for type <code><span class="Identifier">T</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L63" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L63" target="_blank">Edit</a> </dd> </div> </dl>   <h2 id="12">Procs</h2> <dl> <div id="bitnot-procs-all"> <div id="bitnot,T"> <dt><pre data-language="nim">func bitnot[T: SomeInteger](x: T): T {.magic: "BitnotI", ...raises: [], tags: [],
                                       forbids: [].}</pre></dt> <dd> Computes the <code><span class="Identifier">bitwise</span> <span class="Identifier">complement</span></code> of the integer <code><span class="Identifier">x</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L32" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L32" target="_blank">Edit</a> </dd> </div> </div> <div id="bitslice-procs-all"> <div id="bitslice,T,Slice[int]"> <dt><pre data-language="nim">proc bitslice[T: SomeInteger](v: var T; slice: Slice[int]) {.inline.}</pre></dt> <dd> Mutates <code><span class="Identifier">v</span></code> into an extracted (and shifted) slice of bits from <code><span class="Identifier">v</span></code>. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var x = 0b101110
x.bitslice(2 .. 4)
doAssert x == 0b011</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L84" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L84" target="_blank">Edit</a> </dd> </div> </div> <div id="bitsliced-procs-all"> <div id="bitsliced,T,Slice[int]"> <dt><pre data-language="nim">func bitsliced[T: SomeInteger](v: T; slice: Slice[int]): T {.inline.}</pre></dt> <dd> Returns an extracted (and shifted) slice of bits from <code><span class="Identifier">v</span></code>. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">doAssert 0b10111.bitsliced(2 .. 4) == 0b101
doAssert 0b11100.bitsliced(0 .. 2) == 0b100
doAssert 0b11100.bitsliced(0 ..&lt; 3) == 0b100</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L72" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L72" target="_blank">Edit</a> </dd> </div> </div> <div id="clearBit-procs-all"> <div id="clearBit,T,BitsRange[T: SomeInteger]"> <dt><pre data-language="nim">proc clearBit[T: SomeInteger](v: var T; bit: BitsRange[T]) {.inline.}</pre></dt> <dd> Mutates <code><span class="Identifier">v</span></code>, with the bit at position <code><span class="Identifier">bit</span></code> set to 0. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var v = 0b0000_0011'u8
v.clearBit(1'u8)
doAssert v == 0b0000_0001'u8</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L292" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L292" target="_blank">Edit</a> </dd> </div> </div> <div id="clearMask-procs-all"> <div id="clearMask,T,T"> <dt><pre data-language="nim">proc clearMask[T: SomeInteger](v: var T; mask: T) {.inline.}</pre></dt> <dd> <p>Mutates <code><span class="Identifier">v</span></code>, with all the <code><span class="DecNumber">1</span></code> bits from <code><span class="Identifier">mask</span></code> set to 0.</p> <p>Effectively maps to a <a href="#bitand.m,T,T,varargs[T]">bitand</a> operation with an <em>inverted mask</em>.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var v = 0b0000_0011'u8
v.clearMask(0b0000_1010'u8)
doAssert v == 0b0000_0001'u8</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L217" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L217" target="_blank">Edit</a> </dd> </div> <div id="clearMask,T,Slice[int]"> <dt><pre data-language="nim">proc clearMask[T: SomeInteger](v: var T; slice: Slice[int]) {.inline.}</pre></dt> <dd> <p>Mutates <code><span class="Identifier">v</span></code>, with all the <code><span class="DecNumber">1</span></code> bits in the range of <code><span class="Identifier">slice</span></code> set to 0.</p> <p>Effectively maps to a <a href="#bitand.m,T,T,varargs[T]">bitand</a> operation with an <em>inverted mask</em>.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var v = 0b0000_0011'u8
v.clearMask(1 .. 3)
doAssert v == 0b0000_0001'u8</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L229" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L229" target="_blank">Edit</a> </dd> </div> </div> <div id="clearMasked-procs-all"> <div id="clearMasked,T,T"> <dt><pre data-language="nim">func clearMasked[T: SomeInteger](v, mask: T): T {.inline.}</pre></dt> <dd> <p>Returns <code><span class="Identifier">v</span></code>, with all the <code><span class="DecNumber">1</span></code> bits from <code><span class="Identifier">mask</span></code> set to 0.</p> <p>Effectively maps to a <a href="#bitand.m,T,T,varargs[T]">bitand</a> operation with an <em>inverted mask</em>.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let v = 0b0000_0011'u8
doAssert v.clearMasked(0b0000_1010'u8) == 0b0000_0001'u8</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L195" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L195" target="_blank">Edit</a> </dd> </div> <div id="clearMasked,T,Slice[int]"> <dt><pre data-language="nim">func clearMasked[T: SomeInteger](v: T; slice: Slice[int]): T {.inline.}</pre></dt> <dd> <p>Returns <code><span class="Identifier">v</span></code>, with all the <code><span class="DecNumber">1</span></code> bits in the range of <code><span class="Identifier">slice</span></code> set to 0.</p> <p>Effectively maps to a <a href="#bitand.m,T,T,varargs[T]">bitand</a> operation with an <em>inverted mask</em>.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let v = 0b0000_0011'u8
doAssert v.clearMasked(1 .. 3) == 0b0000_0001'u8</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L206" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L206" target="_blank">Edit</a> </dd> </div> </div> <div id="countLeadingZeroBits-procs-all"> <div id="countLeadingZeroBits,SomeInteger"> <dt><pre data-language="nim">func countLeadingZeroBits(x: SomeInteger): int {.inline.}</pre></dt> <dd> <p>Returns the number of leading zero bits in an integer. If <code><span class="Identifier">x</span></code> is zero, when <code><span class="Identifier">noUndefinedBitOpts</span></code> is set, the result is 0, otherwise the result is undefined.</p> <p><strong>See also:</strong></p> <ul class="simple">
<li><a href="#countTrailingZeroBits,SomeInteger">countTrailingZeroBits proc</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">doAssert countLeadingZeroBits(0b0000_0001'u8) == 7
doAssert countLeadingZeroBits(0b0000_0010'u8) == 6
doAssert countLeadingZeroBits(0b0000_0100'u8) == 5
doAssert countLeadingZeroBits(0b0000_1000'u8) == 4
doAssert countLeadingZeroBits(0b0000_1111'u8) == 4</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L604" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L604" target="_blank">Edit</a> </dd> </div> </div> <div id="countSetBits-procs-all"> <div id="countSetBits,SomeInteger"> <dt><pre data-language="nim">func countSetBits(x: SomeInteger): int {.inline.}</pre></dt> <dd> Counts the set bits in an integer (also called <span id="hamming-weight_1">Hamming weight</span>). <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">doAssert countSetBits(0b0000_0011'u8) == 2
doAssert countSetBits(0b1010_1010'u8) == 4</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L488" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L488" target="_blank">Edit</a> </dd> </div> </div> <div id="countTrailingZeroBits-procs-all"> <div id="countTrailingZeroBits,SomeInteger"> <dt><pre data-language="nim">func countTrailingZeroBits(x: SomeInteger): int {.inline.}</pre></dt> <dd> <p>Returns the number of trailing zeros in an integer. If <code><span class="Identifier">x</span></code> is zero, when <code><span class="Identifier">noUndefinedBitOpts</span></code> is set, the result is 0, otherwise the result is undefined.</p> <p><strong>See also:</strong></p> <ul class="simple">
<li><a href="#countLeadingZeroBits,SomeInteger">countLeadingZeroBits proc</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">doAssert countTrailingZeroBits(0b0000_0001'u8) == 0
doAssert countTrailingZeroBits(0b0000_0010'u8) == 1
doAssert countTrailingZeroBits(0b0000_0100'u8) == 2
doAssert countTrailingZeroBits(0b0000_1000'u8) == 3
doAssert countTrailingZeroBits(0b0000_1111'u8) == 0</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L632" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L632" target="_blank">Edit</a> </dd> </div> </div> <div id="fastLog2-procs-all"> <div id="fastLog2,SomeInteger"> <dt><pre data-language="nim">func fastLog2(x: SomeInteger): int {.inline.}</pre></dt> <dd> Quickly find the log base 2 of an integer. If <code><span class="Identifier">x</span></code> is zero, when <code><span class="Identifier">noUndefinedBitOpts</span></code> is set, the result is -1, otherwise the result is undefined. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">doAssert fastLog2(0b0000_0001'u8) == 0
doAssert fastLog2(0b0000_0010'u8) == 1
doAssert fastLog2(0b0000_0100'u8) == 2
doAssert fastLog2(0b0000_1000'u8) == 3
doAssert fastLog2(0b0000_1111'u8) == 3</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L565" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L565" target="_blank">Edit</a> </dd> </div> </div> <div id="firstSetBit-procs-all"> <div id="firstSetBit,SomeInteger"> <dt><pre data-language="nim">func firstSetBit(x: SomeInteger): int {.inline.}</pre></dt> <dd> Returns the 1-based index of the least significant set bit of <code><span class="Identifier">x</span></code>. If <code><span class="Identifier">x</span></code> is zero, when <code><span class="Identifier">noUndefinedBitOpts</span></code> is set, the result is 0, otherwise the result is undefined. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">doAssert firstSetBit(0b0000_0001'u8) == 1
doAssert firstSetBit(0b0000_0010'u8) == 2
doAssert firstSetBit(0b0000_0100'u8) == 3
doAssert firstSetBit(0b0000_1000'u8) == 4
doAssert firstSetBit(0b0000_1111'u8) == 1</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L522" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L522" target="_blank">Edit</a> </dd> </div> </div> <div id="flipBit-procs-all"> <div id="flipBit,T,BitsRange[T: SomeInteger]"> <dt><pre data-language="nim">proc flipBit[T: SomeInteger](v: var T; bit: BitsRange[T]) {.inline.}</pre></dt> <dd> Mutates <code><span class="Identifier">v</span></code>, with the bit at position <code><span class="Identifier">bit</span></code> flipped. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var v = 0b0000_0011'u8
v.flipBit(1'u8)
doAssert v == 0b0000_0001'u8

v = 0b0000_0011'u8
v.flipBit(2'u8)
doAssert v == 0b0000_0111'u8</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L301" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L301" target="_blank">Edit</a> </dd> </div> </div> <div id="flipMask-procs-all"> <div id="flipMask,T,T"> <dt><pre data-language="nim">proc flipMask[T: SomeInteger](v: var T; mask: T) {.inline.}</pre></dt> <dd> <p>Mutates <code><span class="Identifier">v</span></code>, with all the <code><span class="DecNumber">1</span></code> bits from <code><span class="Identifier">mask</span></code> flipped.</p> <p>Effectively maps to a <a href="#bitxor.m,T,T,varargs[T]">bitxor</a> operation.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var v = 0b0000_0011'u8
v.flipMask(0b0000_1010'u8)
doAssert v == 0b0000_1001'u8</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L261" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L261" target="_blank">Edit</a> </dd> </div> <div id="flipMask,T,Slice[int]"> <dt><pre data-language="nim">proc flipMask[T: SomeInteger](v: var T; slice: Slice[int]) {.inline.}</pre></dt> <dd> <p>Mutates <code><span class="Identifier">v</span></code>, with all the <code><span class="DecNumber">1</span></code> bits in the range of <code><span class="Identifier">slice</span></code> flipped.</p> <p>Effectively maps to a <a href="#bitxor.m,T,T,varargs[T]">bitxor</a> operation.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var v = 0b0000_0011'u8
v.flipMask(1 .. 3)
doAssert v == 0b0000_1101'u8</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L272" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L272" target="_blank">Edit</a> </dd> </div> </div> <div id="flipMasked-procs-all"> <div id="flipMasked,T,T"> <dt><pre data-language="nim">func flipMasked[T: SomeInteger](v, mask: T): T {.inline.}</pre></dt> <dd> <p>Returns <code><span class="Identifier">v</span></code>, with all the <code><span class="DecNumber">1</span></code> bits from <code><span class="Identifier">mask</span></code> flipped.</p> <p>Effectively maps to a <a href="#bitxor.m,T,T,varargs[T]">bitxor</a> operation.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let v = 0b0000_0011'u8
doAssert v.flipMasked(0b0000_1010'u8) == 0b0000_1001'u8</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L241" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L241" target="_blank">Edit</a> </dd> </div> <div id="flipMasked,T,Slice[int]"> <dt><pre data-language="nim">func flipMasked[T: SomeInteger](v: T; slice: Slice[int]): T {.inline.}</pre></dt> <dd> <p>Returns <code><span class="Identifier">v</span></code>, with all the <code><span class="DecNumber">1</span></code> bits in the range of <code><span class="Identifier">slice</span></code> flipped.</p> <p>Effectively maps to a <a href="#bitxor.m,T,T,varargs[T]">bitxor</a> operation.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let v = 0b0000_0011'u8
doAssert v.flipMasked(1 .. 3) == 0b0000_1101'u8</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L251" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L251" target="_blank">Edit</a> </dd> </div> </div> <div id="mask-procs-all"> <div id="mask,T,T"> <dt><pre data-language="nim">proc mask[T: SomeInteger](v: var T; mask: T) {.inline.}</pre></dt> <dd> <p>Mutates <code><span class="Identifier">v</span></code>, with only the <code><span class="DecNumber">1</span></code> bits from <code><span class="Identifier">mask</span></code> matching those of <code><span class="Identifier">v</span></code> set to 1.</p> <p>Effectively maps to a <a href="#bitand.m,T,T,varargs[T]">bitand</a> operation.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var v = 0b0000_0011'u8
v.mask(0b0000_1010'u8)
doAssert v == 0b0000_0010'u8</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L129" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L129" target="_blank">Edit</a> </dd> </div> <div id="mask,T,Slice[int]"> <dt><pre data-language="nim">proc mask[T: SomeInteger](v: var T; slice: Slice[int]) {.inline.}</pre></dt> <dd> <p>Mutates <code><span class="Identifier">v</span></code>, with only the <code><span class="DecNumber">1</span></code> bits in the range of <code><span class="Identifier">slice</span></code> matching those of <code><span class="Identifier">v</span></code> set to 1.</p> <p>Effectively maps to a <a href="#bitand.m,T,T,varargs[T]">bitand</a> operation.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var v = 0b0000_1011'u8
v.mask(1 .. 3)
doAssert v == 0b0000_1010'u8</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L141" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L141" target="_blank">Edit</a> </dd> </div> </div> <div id="masked-procs-all"> <div id="masked,T,T"> <dt><pre data-language="nim">proc masked[T: SomeInteger](v, mask: T): T {.inline.}</pre></dt> <dd> <p>Returns <code><span class="Identifier">v</span></code>, with only the <code><span class="DecNumber">1</span></code> bits from <code><span class="Identifier">mask</span></code> matching those of <code><span class="Identifier">v</span></code> set to 1.</p> <p>Effectively maps to a <a href="#bitand.m,T,T,varargs[T]">bitand</a> operation.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let v = 0b0000_0011'u8
doAssert v.masked(0b0000_1010'u8) == 0b0000_0010'u8</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L107" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L107" target="_blank">Edit</a> </dd> </div> <div id="masked,T,Slice[int]"> <dt><pre data-language="nim">func masked[T: SomeInteger](v: T; slice: Slice[int]): T {.inline.}</pre></dt> <dd> <p>Returns <code><span class="Identifier">v</span></code>, with only the <code><span class="DecNumber">1</span></code> bits in the range of <code><span class="Identifier">slice</span></code> matching those of <code><span class="Identifier">v</span></code> set to 1.</p> <p>Effectively maps to a <a href="#bitand.m,T,T,varargs[T]">bitand</a> operation.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let v = 0b0000_1011'u8
doAssert v.masked(1 .. 3) == 0b0000_1010'u8</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L118" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L118" target="_blank">Edit</a> </dd> </div> </div> <div id="parityBits-procs-all"> <div id="parityBits,SomeInteger"> <dt><pre data-language="nim">func parityBits(x: SomeInteger): int {.inline.}</pre></dt> <dd> Calculate the bit parity in an integer. If the number of 1-bits is odd, the parity is 1, otherwise 0. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">doAssert parityBits(0b0000_0000'u8) == 0
doAssert parityBits(0b0101_0001'u8) == 1
doAssert parityBits(0b0110_1001'u8) == 0
doAssert parityBits(0b0111_1111'u8) == 1</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L500" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L500" target="_blank">Edit</a> </dd> </div> </div> <div id="popcount-procs-all"> <div id="popcount,SomeInteger"> <dt><pre data-language="nim">func popcount(x: SomeInteger): int {.inline.}</pre></dt> <dd> Alias for <a href="#countSetBits,SomeInteger">countSetBits</a> (Hamming weight). <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L496" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L496" target="_blank">Edit</a> </dd> </div> </div> <div id="reverseBits-procs-all"> <div id="reverseBits,T"> <dt><pre data-language="nim">func reverseBits[T: SomeUnsignedInt](x: T): T</pre></dt> <dd> Return the bit reversal of x. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">doAssert reverseBits(0b10100100'u8) == 0b00100101'u8
doAssert reverseBits(0xdd'u8) == 0xbb'u8
doAssert reverseBits(0xddbb'u16) == 0xddbb'u16
doAssert reverseBits(0xdeadbeef'u32) == 0xf77db57b'u32</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L848" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L848" target="_blank">Edit</a> </dd> </div> </div> <div id="rotateLeftBits-procs-all"> <div id="rotateLeftBits,T,range[]"> <dt><pre data-language="nim">func rotateLeftBits[T: SomeUnsignedInt](value: T;
                                        shift: range[0 .. (sizeof(T) * 8)]): T {.
    inline.}</pre></dt> <dd> Left-rotate bits in a <code><span class="Identifier">value</span></code>. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">doAssert rotateLeftBits(0b0110_1001'u8, 4) == 0b1001_0110'u8
doAssert rotateLeftBits(0b00111100_11000011'u16, 8) ==
  0b11000011_00111100'u16
doAssert rotateLeftBits(0b0000111111110000_1111000000001111'u32, 16) ==
  0b1111000000001111_0000111111110000'u32
doAssert rotateLeftBits(0b00000000111111111111111100000000_11111111000000000000000011111111'u64, 32) ==
  0b11111111000000000000000011111111_00000000111111111111111100000000'u64</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L785" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L785" target="_blank">Edit</a> </dd> </div> </div> <div id="rotateRightBits-procs-all"> <div id="rotateRightBits,T,range[]"> <dt><pre data-language="nim">func rotateRightBits[T: SomeUnsignedInt](value: T;
    shift: range[0 .. (sizeof(T) * 8)]): T {.inline.}</pre></dt> <dd> Right-rotate bits in a <code><span class="Identifier">value</span></code>. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">doAssert rotateRightBits(0b0110_1001'u8, 4) == 0b1001_0110'u8
doAssert rotateRightBits(0b00111100_11000011'u16, 8) ==
  0b11000011_00111100'u16
doAssert rotateRightBits(0b0000111111110000_1111000000001111'u32, 16) ==
  0b1111000000001111_0000111111110000'u32
doAssert rotateRightBits(0b00000000111111111111111100000000_11111111000000000000000011111111'u64, 32) ==
  0b11111111000000000000000011111111_00000000111111111111111100000000'u64</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L813" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L813" target="_blank">Edit</a> </dd> </div> </div> <div id="setBit-procs-all"> <div id="setBit,T,BitsRange[T: SomeInteger]"> <dt><pre data-language="nim">proc setBit[T: SomeInteger](v: var T; bit: BitsRange[T]) {.inline.}</pre></dt> <dd> Mutates <code><span class="Identifier">v</span></code>, with the bit at position <code><span class="Identifier">bit</span></code> set to 1. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var v = 0b0000_0011'u8
v.setBit(5'u8)
doAssert v == 0b0010_0011'u8</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L283" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L283" target="_blank">Edit</a> </dd> </div> </div> <div id="setMask-procs-all"> <div id="setMask,T,T"> <dt><pre data-language="nim">proc setMask[T: SomeInteger](v: var T; mask: T) {.inline.}</pre></dt> <dd> <p>Mutates <code><span class="Identifier">v</span></code>, with all the <code><span class="DecNumber">1</span></code> bits from <code><span class="Identifier">mask</span></code> set to 1.</p> <p>Effectively maps to a <a href="#bitor.m,T,T,varargs[T]">bitor</a> operation.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var v = 0b0000_0011'u8
v.setMask(0b0000_1010'u8)
doAssert v == 0b0000_1011'u8</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L173" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L173" target="_blank">Edit</a> </dd> </div> <div id="setMask,T,Slice[int]"> <dt><pre data-language="nim">proc setMask[T: SomeInteger](v: var T; slice: Slice[int]) {.inline.}</pre></dt> <dd> <p>Mutates <code><span class="Identifier">v</span></code>, with all the <code><span class="DecNumber">1</span></code> bits in the range of <code><span class="Identifier">slice</span></code> set to 1.</p> <p>Effectively maps to a <a href="#bitor.m,T,T,varargs[T]">bitor</a> operation.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var v = 0b0000_0011'u8
v.setMask(2 .. 3)
doAssert v == 0b0000_1111'u8</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L184" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L184" target="_blank">Edit</a> </dd> </div> </div> <div id="setMasked-procs-all"> <div id="setMasked,T,T"> <dt><pre data-language="nim">func setMasked[T: SomeInteger](v, mask: T): T {.inline.}</pre></dt> <dd> <p>Returns <code><span class="Identifier">v</span></code>, with all the <code><span class="DecNumber">1</span></code> bits from <code><span class="Identifier">mask</span></code> set to 1.</p> <p>Effectively maps to a <a href="#bitor.m,T,T,varargs[T]">bitor</a> operation.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let v = 0b0000_0011'u8
doAssert v.setMasked(0b0000_1010'u8) == 0b0000_1011'u8</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L153" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L153" target="_blank">Edit</a> </dd> </div> <div id="setMasked,T,Slice[int]"> <dt><pre data-language="nim">func setMasked[T: SomeInteger](v: T; slice: Slice[int]): T {.inline.}</pre></dt> <dd> <p>Returns <code><span class="Identifier">v</span></code>, with all the <code><span class="DecNumber">1</span></code> bits in the range of <code><span class="Identifier">slice</span></code> set to 1.</p> <p>Effectively maps to a <a href="#bitor.m,T,T,varargs[T]">bitor</a> operation.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let v = 0b0000_0011'u8
doAssert v.setMasked(2 .. 3) == 0b0000_1111'u8</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L163" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L163" target="_blank">Edit</a> </dd> </div> </div> <div id="testBit-procs-all"> <div id="testBit,T,BitsRange[T: SomeInteger]"> <dt><pre data-language="nim">proc testBit[T: SomeInteger](v: T; bit: BitsRange[T]): bool {.inline.}</pre></dt> <dd> Returns true if the bit in <code><span class="Identifier">v</span></code> at positions <code><span class="Identifier">bit</span></code> is set to 1. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let v = 0b0000_1111'u8
doAssert v.testBit(0)
doAssert not v.testBit(7)</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L351" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L351" target="_blank">Edit</a> </dd> </div> </div> <div id="toMask-procs-all"> <div id="toMask,Slice[int]"> <dt><pre data-language="nim">func toMask[T: SomeInteger](slice: Slice[int]): T {.inline.}</pre></dt> <dd> Creates a bitmask based on a slice of bits. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">doAssert toMask[int32](1 .. 3) == 0b1110'i32
doAssert toMask[int32](0 .. 3) == 0b1111'i32</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L96" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L96" target="_blank">Edit</a> </dd> </div> </div> </dl>   <h2 id="17">Macros</h2> <dl> <div id="bitand-macros-all"> <div id="bitand.m,T,T,varargs[T]"> <dt><pre data-language="nim">macro bitand[T: SomeInteger](x, y: T; z: varargs[T]): T</pre></dt> <dd> Computes the <code><span class="Identifier">bitwise</span> <span class="Keyword">and</span></code> of all arguments collectively. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L41" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L41" target="_blank">Edit</a> </dd> </div> </div> <div id="bitor-macros-all"> <div id="bitor.m,T,T,varargs[T]"> <dt><pre data-language="nim">macro bitor[T: SomeInteger](x, y: T; z: varargs[T]): T</pre></dt> <dd> Computes the <code><span class="Identifier">bitwise</span> <span class="Keyword">or</span></code> of all arguments collectively. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L48" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L48" target="_blank">Edit</a> </dd> </div> </div> <div id="bitxor-macros-all"> <div id="bitxor.m,T,T,varargs[T]"> <dt><pre data-language="nim">macro bitxor[T: SomeInteger](x, y: T; z: varargs[T]): T</pre></dt> <dd> Computes the <code><span class="Identifier">bitwise</span> <span class="Keyword">xor</span></code> of all arguments collectively. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L55" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L55" target="_blank">Edit</a> </dd> </div> </div> <div id="clearBits-macros-all"> <div id="clearBits.m,typed,varargs[typed]"> <dt><pre data-language="nim">macro clearBits(v: typed; bits: varargs[typed]): untyped</pre></dt> <dd> Mutates <code><span class="Identifier">v</span></code>, with the bits at positions <code><span class="Identifier">bits</span></code> set to 0. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var v = 0b1111_1111'u8
v.clearBits(1, 3, 5, 7)
doAssert v == 0b0101_0101'u8</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L326" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L326" target="_blank">Edit</a> </dd> </div> </div> <div id="flipBits-macros-all"> <div id="flipBits.m,typed,varargs[typed]"> <dt><pre data-language="nim">macro flipBits(v: typed; bits: varargs[typed]): untyped</pre></dt> <dd> Mutates <code><span class="Identifier">v</span></code>, with the bits at positions <code><span class="Identifier">bits</span></code> set to 0. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var v = 0b0000_1111'u8
v.flipBits(1, 3, 5, 7)
doAssert v == 0b1010_0101'u8</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L338" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L338" target="_blank">Edit</a> </dd> </div> </div> <div id="setBits-macros-all"> <div id="setBits.m,typed,varargs[typed]"> <dt><pre data-language="nim">macro setBits(v: typed; bits: varargs[typed]): untyped</pre></dt> <dd> Mutates <code><span class="Identifier">v</span></code>, with the bits at positions <code><span class="Identifier">bits</span></code> set to 1. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var v = 0b0000_0011'u8
v.setBits(3, 5, 7)
doAssert v == 0b1010_1011'u8</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/bitops.nim#L314" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/bitops.nim#L314" target="_blank">Edit</a> </dd> </div> </div> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2024 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/bitops.html" class="_attribution-link">https://nim-lang.org/docs/bitops.html</a>
  </p>
</div>
