<h1 class="title">unittest</h1>  
<p><strong>Note</strong>: Instead of <code>unittest.nim</code>, please consider to use the <code>testament</code> tool which offers process isolation for your tests. Also <code>when isMainModule: doAssert conditionHere</code> is usually a much simpler solution for testing purposes.</p> <p>This module implements boilerplate to make unit testing easy.</p> <p>The test status and name is printed after any output or traceback.</p> <p>Tests can be nested, however failure of a nested test will not mark the parent test as failed. Setup and teardown are inherited. Setup can be overridden locally.</p> <p>Compiled test files as well as <code>nim c -r &lt;testfile.nim&gt;</code> exit with 0 for success (no failed tests) or 1 for failure.</p> <h2 id="running-a-single-test">Running a single test</h2>
<p>Specify the test name as a command line argument.</p> <pre class="listing" data-language="nim">nim c -r test "my test name" "another test"</pre>
<p>Multiple arguments can be used.</p> <h2 id="running-a-single-test-suite">Running a single test suite</h2>
<p>Specify the suite name delimited by <code>"::"</code>.</p> <pre class="listing" data-language="nim">nim c -r test "my test name::"</pre> <h2 id="selecting-tests-by-pattern">Selecting tests by pattern</h2>
<p>A single <code>"*"</code> can be used for globbing.</p> <p>Delimit the end of a suite name with <code>"::"</code>.</p> <p>Tests matching <strong>any</strong> of the arguments are executed.</p> <pre class="listing" data-language="nim">nim c -r test fast_suite::mytest1 fast_suite::mytest2
nim c -r test "fast_suite::mytest*"
nim c -r test "auth*::" "crypto::hashing*"
# Run suites starting with 'bug #' and standalone tests starting with '#'
nim c -r test 'bug #*::' '::#*'</pre> <h2 id="examples">Examples</h2>
<pre class="listing" data-language="nim">suite "description for this stuff":
  echo "suite setup: run once before the tests"
  
  setup:
    echo "run before each test"
  
  teardown:
    echo "run after each test"
  
  test "essential truths":
    # give up and stop if this fails
    require(true)
  
  test "slightly less obvious stuff":
    # print a nasty message and move on, skipping
    # the remainder of this block
    check(1 != 1)
    check("asd"[2] == 'd')
  
  test "out of bounds error is thrown on bad access":
    let v = @[1, 2, 3]  # you can do initialization here
    expect(IndexDefect):
      discard v[4]
  
  echo "suite teardown: run once after the tests"</pre> <h2 id="limitationsslashbugs">Limitations/Bugs</h2>
<p>Since <code>check</code> will rewrite some expressions for supporting checkpoints (namely assigns expressions to variables), some type conversions are not supported. For example <code>check 4.0 == 2 + 2</code> won't work. But <code>doAssert 4.0 == 2 + 2</code> works. Make sure both sides of the operator (such as <code>==</code>, <code>&gt;=</code> and so on) have the same type. </p>  <h2 id="6">Imports</h2> <dl> <a href="since.html">since</a>, <a href="exitprocs.html">exitprocs</a>, <a href="macros.html">macros</a>, <a href="strutils.html">strutils</a>, <a href="streams.html">streams</a>, <a href="times.html">times</a>, <a href="sets.html">sets</a>, <a href="sequtils.html">sequtils</a>, <a href="os.html">os</a>, <a href="terminal.html">terminal</a> </dl>  <h2 id="7">Types</h2> <dl>  <dt><pre id="TestStatus" data-language="nim">TestStatus = enum
  OK, FAILED, SKIPPED</pre></dt> <dd> The status of a test when it is done. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L119" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L119" target="_blank">Edit</a> </dd>  <dt><pre id="OutputLevel" data-language="nim">OutputLevel = enum
  PRINT_ALL,                ## Print as much as possible.
  PRINT_FAILURES,           ## Print only the failed tests.
  PRINT_NONE                 ## Print nothing.</pre></dt> <dd> The output verbosity of the tests. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L124" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L124" target="_blank">Edit</a> </dd>  <dt><pre id="TestResult" data-language="nim">TestResult = object
  suiteName*: string ## Name of the test suite that contains this test case.
                     ## Can be ``nil`` if the test case is not in a suite.
  testName*: string          ## Name of the test case
  status*: TestStatus</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L129" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L129" target="_blank">Edit</a> </dd>  <dt><pre id="OutputFormatter">OutputFormatter = ref object of RootObj</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L137" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L137" target="_blank">Edit</a> </dd>  <dt><pre id="ConsoleOutputFormatter" data-language="nim">ConsoleOutputFormatter = ref object of OutputFormatter
  colorOutput: bool          ## Have test results printed in color.
                             ## Default is true for the non-js target,
                             ## for which ``stdout`` is a tty.
                             ## Setting the environment variable
                             ## ``NIMTEST_COLOR`` to ``always`` or
                             ## ``never`` changes the default for the
                             ## non-js target to true or false respectively.
                             ## The deprecated environment variable
                             ## ``NIMTEST_NO_COLOR``, when set,
                             ## changes the default to true, if
                             ## ``NIMTEST_COLOR`` is undefined.
  outputLevel: OutputLevel   ## Set the verbosity of test results.
                             ## Default is ``PRINT_ALL``, unless
                             ## the ``NIMTEST_OUTPUT_LVL`` environment
                             ## variable is set for the non-js target.
  isInSuite: bool
  isInTest: bool</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L139" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L139" target="_blank">Edit</a> </dd>  <dt><pre id="JUnitOutputFormatter" data-language="nim">JUnitOutputFormatter = ref object of OutputFormatter
  stream: Stream
  testErrors: seq[string]
  testStartTime: float
  testStackTrace: string</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L160" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L160" target="_blank">Edit</a> </dd> </dl>  <h2 id="8">Vars</h2> <dl>  <dt><pre id="abortOnError">abortOnError: bool</pre></dt> <dd> Set to true in order to quit immediately on fail. Default is false, unless the <code>NIMTEST_ABORT_ON_ERROR</code> environment variable is set for the non-js target. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L167" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L167" target="_blank">Edit</a> </dd> </dl>  <h2 id="12">Procs</h2> <dl>  <dt><pre id="addOutputFormatter%2COutputFormatter" data-language="nim">proc addOutputFormatter(formatter: OutputFormatter) {...}{.raises: [], tags: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L195" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L195" target="_blank">Edit</a> </dd>  <dt><pre id="delOutputFormatter%2COutputFormatter" data-language="nim">proc delOutputFormatter(formatter: OutputFormatter) {...}{.raises: [], tags: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L198" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L198" target="_blank">Edit</a> </dd>  <dt><pre id="resetOutputFormatters" data-language="nim">proc resetOutputFormatters() {...}{.raises: [], tags: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L202" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L202" target="_blank">Edit</a> </dd>  <dt><pre id="newConsoleOutputFormatter%2COutputLevel" data-language="nim">proc newConsoleOutputFormatter(outputLevel: OutputLevel = OutputLevel.PRINT_ALL;
                               colorOutput = true): ConsoleOutputFormatter {...}{.
    raises: [], tags: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L205" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L205" target="_blank">Edit</a> </dd>  <dt><pre id="defaultConsoleFormatter" data-language="nim">proc defaultConsoleFormatter(): ConsoleOutputFormatter {...}{.raises: [],
    tags: [ReadEnvEffect].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L212" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L212" target="_blank">Edit</a> </dd>  <dt><pre id="newJUnitOutputFormatter%2CStream" data-language="nim">proc newJUnitOutputFormatter(stream: Stream): JUnitOutputFormatter {...}{.
    raises: [IOError, OSError], tags: [WriteIOEffect].}</pre></dt> <dd> Creates a formatter that writes report to the specified stream in JUnit format. The <code>stream</code> is NOT closed automatically when the test are finished, because the formatter has no way to know when all tests are finished. You should invoke formatter.close() to finalize the report. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L295" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L295" target="_blank">Edit</a> </dd>  <dt><pre id="close%2CJUnitOutputFormatter" data-language="nim">proc close(formatter: JUnitOutputFormatter) {...}{.
    raises: [IOError, OSError, Exception], tags: [WriteIOEffect].}</pre></dt> <dd> Completes the report and closes the underlying stream. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L310" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L310" target="_blank">Edit</a> </dd>  <dt><pre id="checkpoint%2Cstring" data-language="nim">proc checkpoint(msg: string) {...}{.raises: [], tags: [].}</pre></dt> <dd> Set a checkpoint identified by <code>msg</code>. Upon test failure all checkpoints encountered so far are printed out. Example:<pre class="listing" data-language="nim">checkpoint("Checkpoint A")
check((42, "the Answer to life and everything") == (1, "a"))
checkpoint("Checkpoint B")</pre>
<p>outputs "Checkpoint A" once it fails.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L545" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L545" target="_blank">Edit</a> </dd>  <dt><pre id="disableParamFiltering" data-language="nim">proc disableParamFiltering() {...}{.raises: [], tags: [].}</pre></dt> <dd> disables filtering tests with the command line params <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L749" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L749" target="_blank">Edit</a> </dd> </dl>  <h2 id="14">Methods</h2> <dl>  <dt><pre id="suiteStarted.e%2COutputFormatter%2Cstring" data-language="nim">method suiteStarted(formatter: OutputFormatter; suiteName: string) {...}{.base,
    gcsafe, raises: [], tags: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L181" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L181" target="_blank">Edit</a> </dd>  <dt><pre id="testStarted.e%2COutputFormatter%2Cstring" data-language="nim">method testStarted(formatter: OutputFormatter; testName: string) {...}{.base, gcsafe,
    raises: [], tags: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L183" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L183" target="_blank">Edit</a> </dd>  <dt><pre id="failureOccurred.e%2COutputFormatter%2Cseq%5Bstring%5D%2Cstring" data-language="nim">method failureOccurred(formatter: OutputFormatter; checkpoints: seq[string];
                       stackTrace: string) {...}{.base, gcsafe, raises: [], tags: [].}</pre></dt> <dd> <code>stackTrace</code> is provided only if the failure occurred due to an exception. <code>checkpoints</code> is never <code>nil</code>. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L185" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L185" target="_blank">Edit</a> </dd>  <dt><pre id="testEnded.e%2COutputFormatter%2CTestResult" data-language="nim">method testEnded(formatter: OutputFormatter; testResult: TestResult) {...}{.base,
    gcsafe, raises: [], tags: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L190" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L190" target="_blank">Edit</a> </dd>  <dt><pre id="suiteEnded.e%2COutputFormatter" data-language="nim">method suiteEnded(formatter: OutputFormatter) {...}{.base, gcsafe, raises: [],
    tags: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L192" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L192" target="_blank">Edit</a> </dd>  <dt><pre id="suiteStarted.e%2CConsoleOutputFormatter%2Cstring" data-language="nim">method suiteStarted(formatter: ConsoleOutputFormatter; suiteName: string) {...}{.
    raises: [IOError, ValueError], tags: [WriteIOEffect].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L236" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L236" target="_blank">Edit</a> </dd>  <dt><pre id="testStarted.e%2CConsoleOutputFormatter%2Cstring" data-language="nim">method testStarted(formatter: ConsoleOutputFormatter; testName: string) {...}{.
    raises: [], tags: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L245" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L245" target="_blank">Edit</a> </dd>  <dt><pre id="failureOccurred.e%2CConsoleOutputFormatter%2Cseq%5Bstring%5D%2Cstring" data-language="nim">method failureOccurred(formatter: ConsoleOutputFormatter;
                       checkpoints: seq[string]; stackTrace: string) {...}{.
    raises: [], tags: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L248" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L248" target="_blank">Edit</a> </dd>  <dt><pre id="testEnded.e%2CConsoleOutputFormatter%2CTestResult" data-language="nim">method testEnded(formatter: ConsoleOutputFormatter; testResult: TestResult) {...}{.
    raises: [IOError, ValueError], tags: [WriteIOEffect].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L256" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L256" target="_blank">Edit</a> </dd>  <dt><pre id="suiteEnded.e%2CConsoleOutputFormatter" data-language="nim">method suiteEnded(formatter: ConsoleOutputFormatter) {...}{.raises: [], tags: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L277" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L277" target="_blank">Edit</a> </dd>  <dt><pre id="suiteStarted.e%2CJUnitOutputFormatter%2Cstring" data-language="nim">method suiteStarted(formatter: JUnitOutputFormatter; suiteName: string) {...}{.
    raises: [IOError, OSError, ValueError], tags: [WriteIOEffect].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L315" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L315" target="_blank">Edit</a> </dd>  <dt><pre id="testStarted.e%2CJUnitOutputFormatter%2Cstring" data-language="nim">method testStarted(formatter: JUnitOutputFormatter; testName: string) {...}{.
    raises: [], tags: [TimeEffect].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L318" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L318" target="_blank">Edit</a> </dd>  <dt><pre id="failureOccurred.e%2CJUnitOutputFormatter%2Cseq%5Bstring%5D%2Cstring" data-language="nim">method failureOccurred(formatter: JUnitOutputFormatter;
                       checkpoints: seq[string]; stackTrace: string) {...}{.
    raises: [], tags: [].}</pre></dt> <dd> <code>stackTrace</code> is provided only if the failure occurred due to an exception. <code>checkpoints</code> is never <code>nil</code>. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L323" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L323" target="_blank">Edit</a> </dd>  <dt><pre id="testEnded.e%2CJUnitOutputFormatter%2CTestResult" data-language="nim">method testEnded(formatter: JUnitOutputFormatter; testResult: TestResult) {...}{.
    raises: [IOError, OSError, ValueError], tags: [TimeEffect, WriteIOEffect].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L331" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L331" target="_blank">Edit</a> </dd>  <dt><pre id="suiteEnded.e%2CJUnitOutputFormatter" data-language="nim">method suiteEnded(formatter: JUnitOutputFormatter) {...}{.raises: [IOError, OSError],
    tags: [WriteIOEffect].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L372" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L372" target="_blank">Edit</a> </dd> </dl>  <h2 id="17">Macros</h2> <dl>  <dt><pre id="check.m%2Cuntyped" data-language="nim">macro check(conditions: untyped): untyped</pre></dt> <dd> Verify if a statement or a list of statements is true. A helpful error message and set checkpoints are printed out on failure (if <code>outputLevel</code> is not <code>PRINT_NONE</code>). Example:<pre class="listing" data-language="nim">import strutils

check("AKB48".toLowerAscii() == "akb48")

let teams = {'A', 'K', 'B', '4', '8'}

check:
  "AKB48".toLowerAscii() == "akb48"
  'C' in teams</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L607" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L607" target="_blank">Edit</a> </dd>  <dt><pre id="expect.m%2Cvarargs%5Btyped%5D%2Cuntyped" data-language="nim">macro expect(exceptions: varargs[typed]; body: untyped): untyped</pre></dt> <dd> Test if <code>body</code> raises an exception found in the passed <code>exceptions</code>. The test passes if the raised exception is part of the acceptable exceptions. Otherwise, it fails. Example:<pre class="listing" data-language="nim">import math, random
proc defectiveRobot() =
  randomize()
  case rand(1..4)
  of 1: raise newException(OSError, "CANNOT COMPUTE!")
  of 2: discard parseInt("Hello World!")
  of 3: raise newException(IOError, "I can't do that Dave.")
  else: assert 2 + 2 == 5

expect IOError, OSError, ValueError, AssertionDefect:
  defectiveRobot()</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L710" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L710" target="_blank">Edit</a> </dd> </dl>  <h2 id="18">Templates</h2> <dl>  <dt><pre id="suite.t%2C%2C" data-language="nim">template suite(name, body) {...}{.dirty.}</pre></dt> <dd> <p>Declare a test suite identified by <code>name</code> with optional <code>setup</code> and/or <code>teardown</code> section.</p> <p>A test suite is a series of one or more related tests sharing a common fixture (<code>setup</code>, <code>teardown</code>). The fixture is executed for EACH test.</p> <pre class="listing" data-language="nim">suite "test suite for addition":
  setup:
    let result = 4
  
  test "2 + 2 = 4":
    check(2+2 == result)
  
  test "(2 + -2) != 4":
    check(2 + -2 != result)
  
  # No teardown needed</pre>
<p>The suite will run the individual test cases in the order in which they were listed. With default global settings the above code prints:</p> <pre class="listing" data-language="nim">[Suite] test suite for addition
  [OK] 2 + 2 = 4
  [OK] (2 + -2) != 4</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L444" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L444" target="_blank">Edit</a> </dd>  <dt><pre id="test.t%2C%2C" data-language="nim">template test(name, body) {...}{.dirty.}</pre></dt> <dd> Define a single test case identified by <code>name</code>.<pre class="listing" data-language="nim">test "roses are red":
  let roses = "red"
  check(roses == "red")</pre>
<p>The above code outputs:</p> <pre class="listing" data-language="nim">[OK] roses are red</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L496" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L496" target="_blank">Edit</a> </dd>  <dt><pre id="fail.t" data-language="nim">template fail()</pre></dt> <dd> Print out the checkpoints encountered so far and quit if <code>abortOnError</code> is true. Otherwise, erase the checkpoints and indicate the test has failed (change exit code and test status). This template is useful for debugging, but is otherwise mostly used internally. Example:<pre class="listing" data-language="nim">checkpoint("Checkpoint A")
complicatedProcInThread()
fail()</pre>
<p>outputs "Checkpoint A" before quitting.</p> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L559" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L559" target="_blank">Edit</a> </dd>  <dt><pre id="skip.t" data-language="nim">template skip()</pre></dt> <dd> Mark the test as skipped. Should be used directly in case when it is not possible to perform test for reasons depending on outer environment, or certain application logic conditions or configurations. The test code is still executed.<pre class="listing" data-language="nim">if not isGLContextCreated():
  skip()</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L591" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L591" target="_blank">Edit</a> </dd>  <dt><pre id="require.t%2Cuntyped" data-language="nim">template require(conditions: untyped)</pre></dt> <dd> Same as <code>check</code> except any failed test causes the program to quit immediately. Any teardown statements are not executed and the failed test output is not generated. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/unittest.nim#L700" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/unittest.nim#L700" target="_blank">Edit</a> </dd> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2021 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/unittest.html" class="_attribution-link">https://nim-lang.org/docs/unittest.html</a>
  </p>
</div>
