<h1 class="title">std/encodings</h1> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/encodings.nim#L1" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/encodings.nim#L1" target="_blank">Edit</a>  
<p>Routines for converting between different character encodings. On UNIX, this uses the <span id="iconv_1">iconv</span> library, on Windows the Windows API.</p> <p>The following example shows how to change character encodings.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">import std/encodings
when defined(windows):
  let
    orig = "öäüß"
    # convert `orig` from "UTF-8" to "CP1252"
    cp1252 = convert(orig, "CP1252", "UTF-8")
    # convert `cp1252` from "CP1252" to "ibm850"
    ibm850 = convert(cp1252, "ibm850", "CP1252")
    current = getCurrentEncoding()
  assert orig == "\195\182\195\164\195\188\195\159"
  assert ibm850 == "\148\132\129\225"
  assert convert(ibm850, current, "ibm850") == orig</pre>The example below uses a reuseable <code><span class="Identifier">EncodingConverter</span></code> object which is created by <code><span class="Identifier">open</span></code> with <code><span class="Identifier">destEncoding</span></code> and <code><span class="Identifier">srcEncoding</span></code> specified. You can use <code><span class="Identifier">convert</span></code> on this object multiple times. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">import std/encodings
when defined(windows):
  var fromGB2312 = open("utf-8", "gb2312")
  let first = "\203\173\197\194\163\191\210\187" &amp;
      "\203\242\209\204\211\234\200\206\198\189\201\250"
  assert fromGB2312.convert(first) == "谁怕？一蓑烟雨任平生"

  let second = "\211\208\176\215\205\183\200\231" &amp;
      "\208\194\163\172\199\227\184\199\200\231\185\202"
  assert fromGB2312.convert(second) == "有白头如新，倾盖如故"</pre>  <h2 id="6">Imports</h2> <dl> <a href="os.html">os</a>, <a href="parseutils.html">parseutils</a>, <a href="strutils.html">strutils</a> </dl>   <h2 id="7">Types</h2> <dl> <div id="EncodingConverter"> <dt><pre>EncodingConverter = object</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/encodings.nim#L54" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/encodings.nim#L54" target="_blank">Edit</a> </dd> </div> <div id="EncodingError"> <dt><pre>EncodingError = object of ValueError</pre></dt> <dd> Exception that is raised for encoding errors. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/encodings.nim#L58" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/encodings.nim#L58" target="_blank">Edit</a> </dd> </div> </dl>   <h2 id="12">Procs</h2> <dl> <div id="close-procs-all"> <div id="close,EncodingConverter"> <dt><pre data-language="nim">proc close(c: EncodingConverter) {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> Frees the resources the converter <code><span class="Identifier">c</span></code> holds. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/encodings.nim#L359" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/encodings.nim#L359" target="_blank">Edit</a> </dd> </div> </div> <div id="codePageToName-procs-all"> <div id="codePageToName,CodePage"> <dt><pre data-language="nim">proc codePageToName(c: CodePage): string {....raises: [], tags: [], forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/encodings.nim#L262" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/encodings.nim#L262" target="_blank">Edit</a> </dd> </div> </div> <div id="convert-procs-all"> <div id="convert,EncodingConverter,string"> <dt><pre data-language="nim">proc convert(c: EncodingConverter; s: string): string {.
    ...raises: [EncodingError, OSError], tags: [], forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/encodings.nim#L454" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/encodings.nim#L454" target="_blank">Edit</a> </dd> </div> <div id="convert,string,string,string"> <dt><pre data-language="nim">proc convert(s: string; destEncoding = "UTF-8"; srcEncoding = "CP1252"): string {.
    ...raises: [ValueError, EncodingError, EncodingError, OSError], tags: [],
    forbids: [].}</pre></dt> <dd> Converts <code><span class="Identifier">s</span></code> to <code><span class="Identifier">destEncoding</span></code>. It assumed that <code><span class="Identifier">s</span></code> is in <code><span class="Identifier">srcEncoding</span></code>. This opens a converter, uses it and closes it again and is thus more convenient but also likely less efficient than re-using a converter.<div class="admonition admonition-warning">
<span class="admonition-warning-text"><b>Warning:</b></span> UTF-16BE and UTF-32 conversions are not supported on Windows.</div> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/encodings.nim#L500" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/encodings.nim#L500" target="_blank">Edit</a> </dd> </div> </div> <div id="getCurrentEncoding-procs-all"> <div id="getCurrentEncoding"> <dt><pre data-language="nim">proc getCurrentEncoding(uiApp = false): string {....raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> Retrieves the current encoding. On Unix, "UTF-8" is always returned. The <code><span class="Identifier">uiApp</span></code> parameter is Windows specific. If true, the UI's code-page is returned, if false, the Console's code-page is returned. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/encodings.nim#L331" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/encodings.nim#L331" target="_blank">Edit</a> </dd> </div> </div> <div id="nameToCodePage-procs-all"> <div id="nameToCodePage,string"> <dt><pre data-language="nim">proc nameToCodePage(name: string): CodePage {....raises: [ValueError], tags: [],
    forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/encodings.nim#L255" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/encodings.nim#L255" target="_blank">Edit</a> </dd> </div> </div> <div id="open-procs-all"> <div id="open,string,string"> <dt><pre data-language="nim">proc open(destEncoding = "UTF-8"; srcEncoding = "CP1252"): EncodingConverter {.
    ...raises: [ValueError, EncodingError], tags: [], forbids: [].}</pre></dt> <dd> Opens a converter that can convert from <code><span class="Identifier">srcEncoding</span></code> to <code><span class="Identifier">destEncoding</span></code>. Raises <code><span class="Identifier">EncodingError</span></code> if it cannot fulfill the request. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/encodings.nim#L340" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/encodings.nim#L340" target="_blank">Edit</a> </dd> </div> </div> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2024 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/encodings.html" class="_attribution-link">https://nim-lang.org/docs/encodings.html</a>
  </p>
</div>
