<h1 class="title">uri</h1>  
<p>This module implements URI parsing as specified by RFC 3986.</p> <p>A Uniform Resource Identifier (URI) provides a simple and extensible means for identifying a resource. A URI can be further classified as a locator, a name, or both. The term “Uniform Resource Locator” (URL) refers to the subset of URIs.</p> <h2 id="basic-usage">Basic usage</h2> <h3 id="basic-usage-combine-uris">Combine URIs</h3>
<pre class="listing" data-language="nim">import uri
let host = parseUri("https://nim-lang.org")
let blog = "/blog.html"
let bloguri = host / blog
assert $host == "https://nim-lang.org"
assert $bloguri == "https://nim-lang.org/blog.html"</pre> <h3 id="basic-usage-access-uri-item">Access URI item</h3>
<pre class="listing" data-language="nim">import uri
let res = parseUri("sftp://127.0.0.1:4343")
if isAbsolute(res):
  assert res.port == "4343"
else:
  echo "Wrong format"</pre> <h3 id="basic-usage-data-uri-base64">Data URI Base64</h3>
<pre class="listing" data-language="nim">doAssert getDataUri("Hello World", "text/plain") == "data:text/plain;charset=utf-8;base64,SGVsbG8gV29ybGQ="
doAssert getDataUri("Nim", "text/plain") == "data:text/plain;charset=utf-8;base64,Tmlt"</pre>  <h2 id="6">Imports</h2> <dl> <a href="since.html">since</a>, <a href="strutils.html">strutils</a>, <a href="parseutils.html">parseutils</a>, <a href="base64.html">base64</a> </dl>  <h2 id="7">Types</h2> <dl>  <dt><pre id="Url">Url = distinct string</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/uri.nim#L54" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/uri.nim#L54" target="_blank">Edit</a> </dd>  <dt><pre id="Uri" data-language="nim">Uri = object
  scheme*, username*, password*: string
  hostname*, port*, path*, query*, anchor*: string
  opaque*: bool
  isIpv6: bool</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/uri.nim#L56" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/uri.nim#L56" target="_blank">Edit</a> </dd> </dl>  <h2 id="12">Procs</h2> <dl>  <dt><pre id="getDataUri%2Cstring%2Cstring%2Cstring" data-language="nim">proc getDataUri(data, mime: string; encoding = "utf-8"): string {...}{.raises: [],
    tags: [].}</pre></dt> <dd> <p>Convenience proc for <code>base64.encode</code> returns a standard Base64 Data URI (RFC-2397)</p> <p><strong>See also:</strong></p> <ul class="simple">
<li>
<a href="mimetypes.html">mimetypes</a> for <code>mime</code> argument</li> <li><a href="https://tools.ietf.org/html/rfc2397">https://tools.ietf.org/html/rfc2397</a></li> <li><a href="https://en.wikipedia.org/wiki/Data_URI_scheme">https://en.wikipedia.org/wiki/Data_URI_scheme</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">static: doAssert getDataUri("Nim", "text/plain") == "data:text/plain;charset=utf-8;base64,Tmlt"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/uri.nim#L496" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/uri.nim#L496" target="_blank">Edit</a> </dd> </dl>  <h2 id="13">Funcs</h2> <dl>  <dt><pre id="encodeUrl%2Cstring" data-language="nim">func encodeUrl(s: string; usePlus = true): string {...}{.raises: [], tags: [].}</pre></dt> <dd> <p>Encodes a URL according to RFC3986.</p> <p>This means that characters in the set <code>{'a'..'z', 'A'..'Z', '0'..'9', '-', '.', '_', '~'}</code> are carried over to the result. All other characters are encoded as <code>%xx</code> where <code>xx</code> denotes its hexadecimal value.</p> <p>As a special rule, when the value of <code>usePlus</code> is true, spaces are encoded as <code>+</code> instead of <code>%20</code>.</p> <p><strong>See also:</strong></p> <ul class="simple">
<li><a href="#decodeUrl,string">decodeUrl func</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">assert encodeUrl("https://nim-lang.org") == "https%3A%2F%2Fnim-lang.org"
assert encodeUrl("https://nim-lang.org/this is a test") == "https%3A%2F%2Fnim-lang.org%2Fthis+is+a+test"
assert encodeUrl("https://nim-lang.org/this is a test", false) == "https%3A%2F%2Fnim-lang.org%2Fthis%20is%20a%20test"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/uri.nim#L62" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/uri.nim#L62" target="_blank">Edit</a> </dd>  <dt><pre id="decodeUrl%2Cstring" data-language="nim">func decodeUrl(s: string; decodePlus = true): string {...}{.raises: [], tags: [].}</pre></dt> <dd> <p>Decodes a URL according to RFC3986.</p> <p>This means that any <code>%xx</code> (where <code>xx</code> denotes a hexadecimal value) are converted to the character with ordinal number <code>xx</code>, and every other character is carried over. If <code>xx</code> is not a valid hexadecimal value, it is left intact.</p> <p>As a special rule, when the value of <code>decodePlus</code> is true, <code>+</code> characters are converted to a space.</p> <p><strong>See also:</strong></p> <ul class="simple">
<li><a href="#encodeUrl,string">encodeUrl func</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">assert decodeUrl("https%3A%2F%2Fnim-lang.org") == "https://nim-lang.org"
assert decodeUrl("https%3A%2F%2Fnim-lang.org%2Fthis+is+a+test") == "https://nim-lang.org/this is a test"
assert decodeUrl("https%3A%2F%2Fnim-lang.org%2Fthis%20is%20a%20test",
    false) == "https://nim-lang.org/this is a test"
assert decodeUrl("abc%xyz") == "abc%xyz"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/uri.nim#L91" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/uri.nim#L91" target="_blank">Edit</a> </dd>  <dt><pre id="encodeQuery%2CopenArray%5B%5D" data-language="nim">func encodeQuery(query: openArray[(string, string)]; usePlus = true;
                 omitEq = true): string {...}{.raises: [], tags: [].}</pre></dt> <dd> <p>Encodes a set of (key, value) parameters into a URL query string.</p> <p>Every (key, value) pair is URL-encoded and written as <code>key=value</code>. If the value is an empty string then the <code>=</code> is omitted, unless <code>omitEq</code> is false. The pairs are joined together by a <code>&amp;</code> character.</p> <p>The <code>usePlus</code> parameter is passed down to the <code>encodeUrl</code> function that is used for the URL encoding of the string values.</p> <p><strong>See also:</strong></p> <ul class="simple">
<li><a href="#encodeUrl,string">encodeUrl func</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">assert encodeQuery({: }) == ""
assert encodeQuery({"a": "1", "b": "2"}) == "a=1&amp;b=2"
assert encodeQuery({"a": "1", "b": ""}) == "a=1&amp;b"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/uri.nim#L128" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/uri.nim#L128" target="_blank">Edit</a> </dd>  <dt><pre id="initUri" data-language="nim">func initUri(): Uri {...}{.raises: [], tags: [].}</pre></dt> <dd> <p>Initializes a URI with <code>scheme</code>, <code>username</code>, <code>password</code>, <code>hostname</code>, <code>port</code>, <code>path</code>, <code>query</code> and <code>anchor</code>.</p> <p><strong>See also:</strong></p> <ul class="simple">
<li>
<a href="#Uri">Uri type</a> for available fields in the URI type</li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var uri2: Uri
assert initUri() == uri2</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/uri.nim#L202" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/uri.nim#L202" target="_blank">Edit</a> </dd>  <dt><pre id="initUri%2Cbool" data-language="nim">func initUri(isIpv6: bool): Uri {...}{.raises: [], tags: [].}</pre></dt> <dd> <p>Initializes a URI with <code>scheme</code>, <code>username</code>, <code>password</code>, <code>hostname</code>, <code>port</code>, <code>path</code>, <code>query</code>, <code>anchor</code> and <code>isIpv6</code>.</p> <p><strong>See also:</strong></p> <ul class="simple">
<li>
<a href="#Uri">Uri type</a> for available fields in the URI type</li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var uri2 = initUri(isIpv6 = true)
uri2.scheme = "tcp"
uri2.hostname = "2001:0db8:85a3:0000:0000:8a2e:0370:7334"
uri2.port = "8080"
assert $uri2 == "tcp://[2001:0db8:85a3:0000:0000:8a2e:0370:7334]:8080"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/uri.nim#L214" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/uri.nim#L214" target="_blank">Edit</a> </dd>  <dt><pre id="parseUri%2Cstring%2CUri" data-language="nim">func parseUri(uri: string; result: var Uri) {...}{.raises: [], tags: [].}</pre></dt> <dd> <p>Parses a URI. The <code>result</code> variable will be cleared before.</p> <p><strong>See also:</strong></p> <ul class="simple">
<li>
<a href="#Uri">Uri type</a> for available fields in the URI type</li> <li>
<a href="#initUri">initUri func</a> for initializing a URI</li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var res = initUri()
parseUri("https://nim-lang.org/docs/manual.html", res)
assert res.scheme == "https"
assert res.hostname == "nim-lang.org"
assert res.path == "/docs/manual.html"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/uri.nim#L236" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/uri.nim#L236" target="_blank">Edit</a> </dd>  <dt><pre id="parseUri%2Cstring" data-language="nim">func parseUri(uri: string): Uri {...}{.raises: [], tags: [].}</pre></dt> <dd> <p>Parses a URI and returns it.</p> <p><strong>See also:</strong></p> <ul class="simple">
<li>
<a href="#Uri">Uri type</a> for available fields in the URI type</li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let res = parseUri("ftp://Username:Password@Hostname")
assert res.username == "Username"
assert res.password == "Password"
assert res.scheme == "ftp"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/uri.nim#L284" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/uri.nim#L284" target="_blank">Edit</a> </dd>  <dt><pre id="combine%2CUri%2CUri" data-language="nim">func combine(base: Uri; reference: Uri): Uri {...}{.raises: [], tags: [].}</pre></dt> <dd> <p>Combines a base URI with a reference URI.</p> <p>This uses the algorithm specified in <a href="http://tools.ietf.org/html/rfc3986#section-5.2.2">section 5.2.2 of RFC 3986</a>.</p> <p>This means that the slashes inside the base URIs path as well as reference URIs path affect the resulting URI.</p> <p><strong>See also:</strong></p> <ul class="simple">
<li>
<a href="#/,Uri,string">/ func</a> for building URIs</li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let foo = combine(parseUri("https://nim-lang.org/foo/bar"), parseUri("/baz"))
assert foo.path == "/baz"
let bar = combine(parseUri("https://nim-lang.org/foo/bar"), parseUri("baz"))
assert bar.path == "/foo/baz"
let qux = combine(parseUri("https://nim-lang.org/foo/bar/"), parseUri("baz"))
assert qux.path == "/foo/bar/baz"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/uri.nim#L338" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/uri.nim#L338" target="_blank">Edit</a> </dd>  <dt><pre id="combine%2Cvarargs%5BUri%5D" data-language="nim">func combine(uris: varargs[Uri]): Uri {...}{.raises: [], tags: [].}</pre></dt> <dd> <p>Combines multiple URIs together.</p> <p><strong>See also:</strong></p> <ul class="simple">
<li>
<a href="#/,Uri,string">/ func</a> for building URIs</li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let foo = combine(parseUri("https://nim-lang.org/"), parseUri("docs/"),
    parseUri("manual.html"))
assert foo.hostname == "nim-lang.org"
assert foo.path == "/docs/manual.html"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/uri.nim#L389" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/uri.nim#L389" target="_blank">Edit</a> </dd>  <dt><pre id="isAbsolute%2CUri" data-language="nim">func isAbsolute(uri: Uri): bool {...}{.raises: [], tags: [].}</pre></dt> <dd> Returns true if URI is absolute, false otherwise. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let foo = parseUri("https://nim-lang.org")
assert isAbsolute(foo) == true
let bar = parseUri("nim-lang")
assert isAbsolute(bar) == false</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/uri.nim#L403" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/uri.nim#L403" target="_blank">Edit</a> </dd>  <dt><pre id="%2F%2CUri%2Cstring" data-language="nim">func `/`(x: Uri; path: string): Uri {...}{.raises: [], tags: [].}</pre></dt> <dd> <p>Concatenates the path specified to the specified URIs path.</p> <p>Contrary to the <a href="#combine,Uri,Uri">combine func</a> you do not have to worry about the slashes at the beginning and end of the path and URIs path respectively.</p> <p><strong>See also:</strong></p> <ul class="simple">
<li><a href="#combine,Uri,Uri">combine func</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let foo = parseUri("https://nim-lang.org/foo/bar") / "/baz"
assert foo.path == "/foo/bar/baz"
let bar = parseUri("https://nim-lang.org/foo/bar") / "baz"
assert bar.path == "/foo/bar/baz"
let qux = parseUri("https://nim-lang.org/foo/bar/") / "baz"
assert qux.path == "/foo/bar/baz"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/uri.nim#L412" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/uri.nim#L412" target="_blank">Edit</a> </dd>  <dt><pre id="%3F%2CUri%2CopenArray%5B%5D" data-language="nim">func `?`(u: Uri; query: openArray[(string, string)]): Uri {...}{.raises: [], tags: [].}</pre></dt> <dd> Concatenates the query parameters to the specified URI object. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let foo = parseUri("https://example.com") / "foo" ? {"bar": "qux"}
assert $foo == "https://example.com/foo?bar=qux"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/uri.nim#L446" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/uri.nim#L446" target="_blank">Edit</a> </dd>  <dt><pre id="%24%2CUri" data-language="nim">func `$`(u: Uri): string {...}{.raises: [], tags: [].}</pre></dt> <dd> Returns the string representation of the specified URI object. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let foo = parseUri("https://nim-lang.org")
assert $foo == "https://nim-lang.org"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/uri.nim#L454" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/uri.nim#L454" target="_blank">Edit</a> </dd> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2021 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/uri.html" class="_attribution-link">https://nim-lang.org/docs/uri.html</a>
  </p>
</div>
