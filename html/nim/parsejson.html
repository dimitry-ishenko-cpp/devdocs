<h1 class="title">parsejson</h1>  <p class="module-desc">This module implements a json parser. It is used and exported by the <code>json</code> standard library module, but can also be used in its own right.</p>  <h2 id="6">Imports</h2> <dl> <a href="strutils.html">strutils</a>, <a href="lexbase.html">lexbase</a>, <a href="streams.html">streams</a>, <a href="unicode.html">unicode</a> </dl>  <h2 id="7">Types</h2> <dl>  <dt><pre id="JsonEventKind" data-language="nim">JsonEventKind = enum
  jsonError,                ## an error occurred during parsing
  jsonEof,                  ## end of file reached
  jsonString,               ## a string literal
  jsonInt,                  ## an integer literal
  jsonFloat,                ## a float literal
  jsonTrue,                 ## the value ``true``
  jsonFalse,                ## the value ``false``
  jsonNull,                 ## the value ``null``
  jsonObjectStart,          ## start of an object: the ``{`` token
  jsonObjectEnd,            ## end of an object: the ``}`` token
  jsonArrayStart,           ## start of an array: the ``[`` token
  jsonArrayEnd               ## end of an array: the ``]`` token</pre></dt> <dd> enumeration of all events that may occur when parsing <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/parsejson.nim#L18" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L18" target="_blank">Edit</a> </dd>  <dt><pre id="TokKind" data-language="nim">TokKind = enum
  tkError, tkEof, tkString, tkInt, tkFloat, tkTrue, tkFalse, tkNull, tkCurlyLe,
  tkCurlyRi, tkBracketLe, tkBracketRi, tkColon, tkComma</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/parsejson.nim#L32" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L32" target="_blank">Edit</a> </dd>  <dt><pre id="JsonError" data-language="nim">JsonError = enum
  errNone,                  ## no error
  errInvalidToken,          ## invalid token
  errStringExpected,        ## string expected
  errColonExpected,         ## ``:`` expected
  errCommaExpected,         ## ``,`` expected
  errBracketRiExpected,     ## ``]`` expected
  errCurlyRiExpected,       ## ``}`` expected
  errQuoteExpected,         ## ``"`` or ``'`` expected
  errEOC_Expected,          ## ``*/`` expected
  errEofExpected,           ## EOF expected
  errExprExpected            ## expr expected</pre></dt> <dd> enumeration that lists all errors that can occur <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/parsejson.nim#L48" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L48" target="_blank">Edit</a> </dd>  <dt><pre id="JsonParser" data-language="nim">JsonParser = object of BaseLexer
  a*: string
  tok*: TokKind
  kind: JsonEventKind
  err: JsonError
  state: seq[ParserState]
  filename: string
  rawStringLiterals: bool</pre></dt> <dd> the parser object. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/parsejson.nim#L65" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L65" target="_blank">Edit</a> </dd>  <dt><pre id="JsonKindError">JsonKindError = object of ValueError</pre></dt> <dd> raised by the <code>to</code> macro if the JSON kind is incorrect. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/parsejson.nim#L74" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L74" target="_blank">Edit</a> </dd>  <dt><pre id="JsonParsingError">JsonParsingError = object of ValueError</pre></dt> <dd> is raised for a JSON error <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/parsejson.nim#L76" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L76" target="_blank">Edit</a> </dd> </dl>  <h2 id="10">Consts</h2> <dl>  <dt><pre id="errorMessages" data-language="nim">errorMessages: array[JsonError, string] = ["no error", "invalid token",
    "string expected", "\':\' expected", "\',\' expected", "\']\' expected",
    "\'}\' expected", "\'\"\' or \"\'\" expected", "\'*/\' expected",
    "EOF expected", "expression expected"]</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/parsejson.nim#L79" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L79" target="_blank">Edit</a> </dd> </dl>  <h2 id="12">Procs</h2> <dl>  <dt><pre id="open%2CJsonParser%2CStream%2Cstring" data-language="nim">proc open(my: var JsonParser; input: Stream; filename: string;
          rawStringLiterals = false) {...}{.raises: [IOError, OSError],
                                       tags: [ReadIOEffect].}</pre></dt> <dd> initializes the parser with an input stream. <code>Filename</code> is only used for nice error messages. If <code>rawStringLiterals</code> is true, string literals are kept with their surrounding quotes and escape sequences in them are left untouched too. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/parsejson.nim#L104" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L104" target="_blank">Edit</a> </dd>  <dt><pre id="close%2CJsonParser" data-language="nim">proc close(my: var JsonParser) {...}{.inline, raises: [Exception, IOError, OSError],
                                 tags: [WriteIOEffect].}</pre></dt> <dd> closes the parser <code>my</code> and its associated input stream. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/parsejson.nim#L117" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L117" target="_blank">Edit</a> </dd>  <dt><pre id="str%2CJsonParser" data-language="nim">proc str(my: JsonParser): string {...}{.inline, raises: [], tags: [].}</pre></dt> <dd> returns the character data for the events: <code>jsonInt</code>, <code>jsonFloat</code>, <code>jsonString</code> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/parsejson.nim#L121" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L121" target="_blank">Edit</a> </dd>  <dt><pre id="getInt%2CJsonParser" data-language="nim">proc getInt(my: JsonParser): BiggestInt {...}{.inline, raises: [ValueError], tags: [].}</pre></dt> <dd> returns the number for the event: <code>jsonInt</code> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/parsejson.nim#L127" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L127" target="_blank">Edit</a> </dd>  <dt><pre id="getFloat%2CJsonParser" data-language="nim">proc getFloat(my: JsonParser): float {...}{.inline, raises: [ValueError], tags: [].}</pre></dt> <dd> returns the number for the event: <code>jsonFloat</code> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/parsejson.nim#L132" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L132" target="_blank">Edit</a> </dd>  <dt><pre id="kind%2CJsonParser" data-language="nim">proc kind(my: JsonParser): JsonEventKind {...}{.inline, raises: [], tags: [].}</pre></dt> <dd> returns the current event type for the JSON parser <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/parsejson.nim#L137" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L137" target="_blank">Edit</a> </dd>  <dt><pre id="getColumn%2CJsonParser" data-language="nim">proc getColumn(my: JsonParser): int {...}{.inline, raises: [], tags: [].}</pre></dt> <dd> get the current column the parser has arrived at. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/parsejson.nim#L141" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L141" target="_blank">Edit</a> </dd>  <dt><pre id="getLine%2CJsonParser" data-language="nim">proc getLine(my: JsonParser): int {...}{.inline, raises: [], tags: [].}</pre></dt> <dd> get the current line the parser has arrived at. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/parsejson.nim#L145" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L145" target="_blank">Edit</a> </dd>  <dt><pre id="getFilename%2CJsonParser" data-language="nim">proc getFilename(my: JsonParser): string {...}{.inline, raises: [], tags: [].}</pre></dt> <dd> get the filename of the file that the parser processes. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/parsejson.nim#L149" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L149" target="_blank">Edit</a> </dd>  <dt><pre id="errorMsg%2CJsonParser" data-language="nim">proc errorMsg(my: JsonParser): string {...}{.raises: [ValueError], tags: [].}</pre></dt> <dd> returns a helpful error message for the event <code>jsonError</code> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/parsejson.nim#L153" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L153" target="_blank">Edit</a> </dd>  <dt><pre id="errorMsgExpected%2CJsonParser%2Cstring" data-language="nim">proc errorMsgExpected(my: JsonParser; e: string): string {...}{.raises: [ValueError],
    tags: [].}</pre></dt> <dd> returns an error message "<code>e</code> expected" in the same format as the other error messages <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/parsejson.nim#L159" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L159" target="_blank">Edit</a> </dd>  <dt><pre id="parseEscapedUTF16%2Ccstring%2Cint" data-language="nim">proc parseEscapedUTF16(buf: cstring; pos: var int): int {...}{.raises: [], tags: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/parsejson.nim#L173" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L173" target="_blank">Edit</a> </dd>  <dt><pre id="getTok%2CJsonParser" data-language="nim">proc getTok(my: var JsonParser): TokKind {...}{.raises: [IOError, OSError],
    tags: [ReadIOEffect].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/parsejson.nim#L358" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L358" target="_blank">Edit</a> </dd>  <dt><pre id="next%2CJsonParser" data-language="nim">proc next(my: var JsonParser) {...}{.raises: [IOError, OSError], tags: [ReadIOEffect].}</pre></dt> <dd> retrieves the first/next event. This controls the parser. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/parsejson.nim#L403" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L403" target="_blank">Edit</a> </dd>  <dt><pre id="raiseParseErr%2CJsonParser%2Cstring" data-language="nim">proc raiseParseErr(p: JsonParser; msg: string) {...}{.noinline, noreturn,
    raises: [JsonParsingError, ValueError], tags: [].}</pre></dt> <dd> raises an <code>EJsonParsingError</code> exception. <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/parsejson.nim#L520" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L520" target="_blank">Edit</a> </dd>  <dt><pre id="eat%2CJsonParser%2CTokKind" data-language="nim">proc eat(p: var JsonParser; tok: TokKind) {...}{.
    raises: [IOError, OSError, JsonParsingError, ValueError],
    tags: [ReadIOEffect].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-1-4/lib/pure/parsejson.nim#L524" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L524" target="_blank">Edit</a> </dd> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2021 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/parsejson.html" class="_attribution-link">https://nim-lang.org/docs/parsejson.html</a>
  </p>
</div>
