<h1 class="title">std/parsejson</h1> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/parsejson.nim#L1" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L1" target="_blank">Edit</a>  <p class="module-desc">This module implements a json parser. It is used and exported by the <code><span class="Identifier">json</span></code> standard library module, but can also be used in its own right.</p>  <h2 id="6">Imports</h2> <dl> <a href="strutils.html">strutils</a>, <a href="lexbase.html">lexbase</a>, <a href="streams.html">streams</a>, <a href="unicode.html">unicode</a>, <a href="decode_helpers.html">decode_helpers</a> </dl>   <h2 id="7">Types</h2> <dl> <div id="JsonError_2"> <dt><pre data-language="nim">JsonError = enum
  errNone,                  ## no error
  errInvalidToken,          ## invalid token
  errStringExpected,        ## string expected
  errColonExpected,         ## `:` expected
  errCommaExpected,         ## `,` expected
  errBracketRiExpected,     ## `]` expected
  errCurlyRiExpected,       ## `}` expected
  errQuoteExpected,         ## `"` or `'` expected
  errEOC_Expected,          ## `*/` expected
  errEofExpected,           ## EOF expected
  errExprExpected            ## expr expected</pre></dt> <dd> enumeration that lists all errors that can occur <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/parsejson.nim#L51" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L51" target="_blank">Edit</a> </dd> </div> <div id="JsonEventKind"> <dt><pre data-language="nim">JsonEventKind = enum
  jsonError,                ## an error occurred during parsing
  jsonEof,                  ## end of file reached
  jsonString,               ## a string literal
  jsonInt,                  ## an integer literal
  jsonFloat,                ## a float literal
  jsonTrue,                 ## the value `true`
  jsonFalse,                ## the value `false`
  jsonNull,                 ## the value `null`
  jsonObjectStart,          ## start of an object: the `{` token
  jsonObjectEnd,            ## end of an object: the `}` token
  jsonArrayStart,           ## start of an array: the `[` token
  jsonArrayEnd               ## end of an array: the `]` token</pre></dt> <dd> enumeration of all events that may occur when parsing <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/parsejson.nim#L21" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L21" target="_blank">Edit</a> </dd> </div> <div id="JsonKindError"> <dt><pre>JsonKindError = object of ValueError</pre></dt> <dd> raised by the <code><span class="Identifier">to</span></code> macro if the JSON kind is incorrect. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/parsejson.nim#L77" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L77" target="_blank">Edit</a> </dd> </div> <div id="JsonParser"> <dt><pre data-language="nim">JsonParser = object of BaseLexer
  a*: string
  tok*: TokKind</pre></dt> <dd> the parser object. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/parsejson.nim#L68" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L68" target="_blank">Edit</a> </dd> </div> <div id="JsonParsingError"> <dt><pre>JsonParsingError = object of ValueError</pre></dt> <dd> is raised for a JSON error <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/parsejson.nim#L79" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L79" target="_blank">Edit</a> </dd> </div> <div id="TokKind"> <dt><pre data-language="nim">TokKind = enum
  tkError, tkEof, tkString, tkInt, tkFloat, tkTrue, tkFalse, tkNull, tkCurlyLe,
  tkCurlyRi, tkBracketLe, tkBracketRi, tkColon, tkComma</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/parsejson.nim#L35" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L35" target="_blank">Edit</a> </dd> </div> </dl>   <h2 id="10">Consts</h2> <dl> <div id="errorMessages"> <dt><pre data-language="nim">errorMessages: array[JsonError, string] = ["no error", "invalid token",
    "string expected", "\':\' expected", "\',\' expected", "\']\' expected",
    "\'}\' expected", "\'\"\' or \"\'\" expected", "\'*/\' expected",
    "EOF expected", "expression expected"]</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/parsejson.nim#L82" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L82" target="_blank">Edit</a> </dd> </div> </dl>   <h2 id="12">Procs</h2> <dl> <div id="close-procs-all"> <div id="close,JsonParser"> <dt><pre data-language="nim">proc close(my: var JsonParser) {.inline, ...raises: [IOError, OSError],
                                 tags: [WriteIOEffect], forbids: [].}</pre></dt> <dd> closes the parser <code><span class="Identifier">my</span></code> and its associated input stream. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/parsejson.nim#L120" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L120" target="_blank">Edit</a> </dd> </div> </div> <div id="eat-procs-all"> <div id="eat,JsonParser,TokKind"> <dt><pre data-language="nim">proc eat(p: var JsonParser; tok: TokKind) {.
    ...raises: [IOError, OSError, JsonParsingError, ValueError],
    tags: [ReadIOEffect], forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/parsejson.nim#L520" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L520" target="_blank">Edit</a> </dd> </div> </div> <div id="errorMsg-procs-all"> <div id="errorMsg,JsonParser"> <dt><pre data-language="nim">proc errorMsg(my: JsonParser): string {....raises: [ValueError], tags: [],
                                        forbids: [].}</pre></dt> <dd> returns a helpful error message for the event <code><span class="Identifier">jsonError</span></code> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/parsejson.nim#L156" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L156" target="_blank">Edit</a> </dd> </div> </div> <div id="errorMsgExpected-procs-all"> <div id="errorMsgExpected,JsonParser,string"> <dt><pre data-language="nim">proc errorMsgExpected(my: JsonParser; e: string): string {....raises: [ValueError],
    tags: [], forbids: [].}</pre></dt> <dd> returns an error message "<code><span class="Identifier">e</span></code> expected" in the same format as the other error messages <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/parsejson.nim#L162" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L162" target="_blank">Edit</a> </dd> </div> </div> <div id="getColumn-procs-all"> <div id="getColumn,JsonParser"> <dt><pre data-language="nim">proc getColumn(my: JsonParser): int {.inline, ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> get the current column the parser has arrived at. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/parsejson.nim#L144" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L144" target="_blank">Edit</a> </dd> </div> </div> <div id="getFilename-procs-all"> <div id="getFilename,JsonParser"> <dt><pre data-language="nim">proc getFilename(my: JsonParser): string {.inline, ...raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> get the filename of the file that the parser processes. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/parsejson.nim#L152" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L152" target="_blank">Edit</a> </dd> </div> </div> <div id="getFloat-procs-all"> <div id="getFloat,JsonParser"> <dt><pre data-language="nim">proc getFloat(my: JsonParser): float {.inline, ...raises: [ValueError], tags: [],
                                       forbids: [].}</pre></dt> <dd> returns the number for the event: <code><span class="Identifier">jsonFloat</span></code> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/parsejson.nim#L135" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L135" target="_blank">Edit</a> </dd> </div> </div> <div id="getInt-procs-all"> <div id="getInt,JsonParser"> <dt><pre data-language="nim">proc getInt(my: JsonParser): BiggestInt {.inline, ...raises: [ValueError],
    tags: [], forbids: [].}</pre></dt> <dd> returns the number for the event: <code><span class="Identifier">jsonInt</span></code> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/parsejson.nim#L130" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L130" target="_blank">Edit</a> </dd> </div> </div> <div id="getLine-procs-all"> <div id="getLine,JsonParser"> <dt><pre data-language="nim">proc getLine(my: JsonParser): int {.inline, ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> get the current line the parser has arrived at. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/parsejson.nim#L148" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L148" target="_blank">Edit</a> </dd> </div> </div> <div id="getTok-procs-all"> <div id="getTok,JsonParser"> <dt><pre data-language="nim">proc getTok(my: var JsonParser): TokKind {....raises: [IOError, OSError],
    tags: [ReadIOEffect], forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/parsejson.nim#L354" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L354" target="_blank">Edit</a> </dd> </div> </div> <div id="kind-procs-all"> <div id="kind,JsonParser"> <dt><pre data-language="nim">proc kind(my: JsonParser): JsonEventKind {.inline, ...raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> returns the current event type for the JSON parser <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/parsejson.nim#L140" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L140" target="_blank">Edit</a> </dd> </div> </div> <div id="next-procs-all"> <div id="next,JsonParser"> <dt><pre data-language="nim">proc next(my: var JsonParser) {....raises: [IOError, OSError],
                                tags: [ReadIOEffect], forbids: [].}</pre></dt> <dd> retrieves the first/next event. This controls the parser. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/parsejson.nim#L399" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L399" target="_blank">Edit</a> </dd> </div> </div> <div id="open-procs-all"> <div id="open,JsonParser,Stream,string"> <dt><pre data-language="nim">proc open(my: var JsonParser; input: Stream; filename: string;
          rawStringLiterals = false) {....raises: [IOError, OSError],
                                       tags: [ReadIOEffect], forbids: [].}</pre></dt> <dd> initializes the parser with an input stream. <code><span class="Identifier">Filename</span></code> is only used for nice error messages. If <code><span class="Identifier">rawStringLiterals</span></code> is true, string literals are kept with their surrounding quotes and escape sequences in them are left untouched too. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/parsejson.nim#L107" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L107" target="_blank">Edit</a> </dd> </div> </div> <div id="parseEscapedUTF16-procs-all"> <div id="parseEscapedUTF16,cstring,int"> <dt><pre data-language="nim">proc parseEscapedUTF16(buf: cstring; pos: var int): int {....raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/parsejson.nim#L168" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L168" target="_blank">Edit</a> </dd> </div> </div> <div id="raiseParseErr-procs-all"> <div id="raiseParseErr,JsonParser,string"> <dt><pre data-language="nim">proc raiseParseErr(p: JsonParser; msg: string) {.noinline, noreturn,
    ...raises: [JsonParsingError, ValueError], tags: [], forbids: [].}</pre></dt> <dd> raises an <code><span class="Identifier">EJsonParsingError</span></code> exception. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/parsejson.nim#L516" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L516" target="_blank">Edit</a> </dd> </div> </div> <div id="str-procs-all"> <div id="str,JsonParser"> <dt><pre data-language="nim">proc str(my: JsonParser): string {.inline, ...raises: [], tags: [], forbids: [].}</pre></dt> <dd> returns the character data for the events: <code><span class="Identifier">jsonInt</span></code>, <code><span class="Identifier">jsonFloat</span></code>, <code><span class="Identifier">jsonString</span></code> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/parsejson.nim#L124" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/parsejson.nim#L124" target="_blank">Edit</a> </dd> </div> </div> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2024 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/parsejson.html" class="_attribution-link">https://nim-lang.org/docs/parsejson.html</a>
  </p>
</div>
