<h1 class="title">std/sysrand</h1> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/sysrand.nim#L1" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/sysrand.nim#L1" target="_blank">Edit</a>  
<div class="admonition admonition-warning">
<span class="admonition-warning-text"><b>Warning:</b></span> This module was added in Nim 1.6. If you are using it for cryptographic purposes, keep in mind that so far this has not been audited by any security professionals, therefore may not be secure.</div> <p><code><span class="Identifier">std</span><span class="Operator">/</span><span class="Identifier">sysrand</span></code> generates random numbers from a secure source provided by the operating system. It is a cryptographically secure pseudorandom number generator and should be unpredictable enough for cryptographic applications, though its exact quality depends on the OS implementation.</p> <table>
<tr>
<th>Targets</th>
<th>Implementation</th>
</tr> <tr>
<td>Windows</td>
<td><a href="https://docs.microsoft.com/en-us/windows/win32/api/bcrypt/nf-bcrypt-bcryptgenrandom">BCryptGenRandom</a></td>
</tr> <tr>
<td>Linux</td>
<td><a href="https://man7.org/linux/man-pages/man2/getrandom.2.html">getrandom</a></td>
</tr> <tr>
<td>MacOSX</td>
<td><a href="https://developer.apple.com/documentation/security/1399291-secrandomcopybytes?language=objc">SecRandomCopyBytes</a></td>
</tr> <tr>
<td>iOS</td>
<td><a href="https://developer.apple.com/documentation/security/1399291-secrandomcopybytes?language=objc">SecRandomCopyBytes</a></td>
</tr> <tr>
<td>OpenBSD</td>
<td><a href="https://man.openbsd.org/getentropy.2">getentropy openbsd</a></td>
</tr> <tr>
<td>FreeBSD</td>
<td><a href="https://www.freebsd.org/cgi/man.cgi?query=getrandom&amp;manpath=FreeBSD+12.0-stable">getrandom freebsd</a></td>
</tr> <tr>
<td>JS (Web Browser)</td>
<td><a href="https://www.w3.org/TR/WebCryptoAPI/#Crypto-method-getRandomValues">getRandomValues</a></td>
</tr> <tr>
<td>Node.js</td>
<td><a href="https://nodejs.org/api/crypto.html#crypto_crypto_randomfillsync_buffer_offset_size">randomFillSync</a></td>
</tr> <tr>
<td>Other Unix platforms</td>
<td><a href="https://en.wikipedia.org/wiki//dev/random">/dev/urandom</a></td>
</tr> </table>
<p>On a Linux target, a call to the <code><span class="Identifier">getrandom</span></code> syscall can be avoided (e.g. for targets running kernel version &lt; 3.17) by passing a compile flag of <code><span class="Operator">-</span><span class="Identifier">d</span><span class="Punctuation">:</span><span class="Identifier">nimNoGetRandom</span></code>. If this flag is passed, sysrand will use <code><span class="Operator">/</span><span class="Identifier">dev</span><span class="Operator">/</span><span class="Identifier">urandom</span></code> as with any other POSIX compliant OS. </p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">import std/sysrand
doAssert urandom(0).len == 0
doAssert urandom(113).len == 113
doAssert urandom(1234) != urandom(1234) # unlikely to fail in practice</pre> <h2 id="see-also">See also</h2>
<ul class="simple">
<li><a href="random.html">random module</a></li> </ul>  <h2 id="6">Imports</h2> <dl> <a href="oserrors.html">oserrors</a> </dl>   <h2 id="12">Procs</h2> <dl> <div id="urandom-procs-all"> <div id="urandom,openArray[byte]"> <dt><pre data-language="nim">proc urandom(dest: var openArray[byte]): bool {....raises: [], tags: [],
    forbids: [].}</pre></dt> <dd> <p>Fills <code><span class="Identifier">dest</span></code> with random bytes suitable for cryptographic use. If the call succeeds, returns <code><span class="Identifier">true</span></code>.</p> <p>If <code><span class="Identifier">dest</span></code> is empty, <code><span class="Identifier">urandom</span></code> immediately returns success, without calling the underlying operating system API.</p> <div class="admonition admonition-warning">
<span class="admonition-warning-text"><b>Warning:</b></span> The code hasn't been audited by cryptography experts and is provided as-is without guarantees. Use at your own risks. For production systems we advise you to request an external audit.</div> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/sysrand.nim#L295" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/sysrand.nim#L295" target="_blank">Edit</a> </dd> </div> <div id="urandom,Natural"> <dt><pre data-language="nim">proc urandom(size: Natural): seq[byte] {.inline, ...raises: [OSError], tags: [],
    forbids: [].}</pre></dt> <dd> Returns random bytes suitable for cryptographic use.<div class="admonition admonition-warning">
<span class="admonition-warning-text"><b>Warning:</b></span> The code hasn't been audited by cryptography experts and is provided as-is without guarantees. Use at your own risks. For production systems we advise you to request an external audit.</div> <a href="https://github.com/nim-lang/Nim/tree/version-2-2/lib/std/sysrand.nim#L316" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/std/sysrand.nim#L316" target="_blank">Edit</a> </dd> </div> </div> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2024 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/sysrand.html" class="_attribution-link">https://nim-lang.org/docs/sysrand.html</a>
  </p>
</div>
