<h1 class="title">std/heapqueue</h1> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/collections/heapqueue.nim#L1" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/collections/heapqueue.nim#L1" target="_blank">Edit</a>  <p class="module-desc">The <code><span class="Identifier">heapqueue</span></code> module implements a <a href="https://en.wikipedia.org/wiki/Binary_heap">binary heap data structure</a> that can be used as a <a href="https://en.wikipedia.org/wiki/Priority_queue">priority queue</a>. They are represented as arrays for which <code><span class="Identifier">a</span><span class="Punctuation">[</span><span class="Identifier">k</span><span class="Punctuation">]</span> <span class="Operator">&lt;=</span> <span class="Identifier">a</span><span class="Punctuation">[</span><span class="DecNumber">2</span><span class="Operator">*</span><span class="Identifier">k</span><span class="Operator">+</span><span class="DecNumber">1</span><span class="Punctuation">]</span></code> and <code><span class="Identifier">a</span><span class="Punctuation">[</span><span class="Identifier">k</span><span class="Punctuation">]</span> <span class="Operator">&lt;=</span> <span class="Identifier">a</span><span class="Punctuation">[</span><span class="DecNumber">2</span><span class="Operator">*</span><span class="Identifier">k</span><span class="Operator">+</span><span class="DecNumber">2</span><span class="Punctuation">]</span></code> for all indices <code><span class="Identifier">k</span></code> (counting elements from 0). The interesting property of a heap is that <code><span class="Identifier">a</span><span class="Punctuation">[</span><span class="DecNumber">0</span><span class="Punctuation">]</span></code> is always its smallest element. </p>
<h2 id="basic-usage">Basic usage</h2> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">import std/heapqueue
var heap = [8, 2].toHeapQueue
heap.push(5)
# the first element is the lowest element
assert heap[0] == 2
# remove and return the lowest element
assert heap.pop() == 2
# the lowest element remaining is 5
assert heap[0] == 5</pre> <h2 id="usage-with-custom-objects">Usage with custom objects</h2>
<p>To use a <code><span class="Identifier">HeapQueue</span></code> with a custom object, the <code><span class="Operator">&lt;</span></code> operator must be implemented.</p> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">import std/heapqueue
type Job = object
  priority: int

proc `&lt;`(a, b: Job): bool = a.priority &lt; b.priority

var jobs = initHeapQueue[Job]()
jobs.push(Job(priority: 1))
jobs.push(Job(priority: 2))

assert jobs[0].priority == 1</pre>  <h2 id="6">Imports</h2> <dl> <a href="since.html">since</a> </dl>   <h2 id="7">Types</h2> <dl> <div id="HeapQueue"> <dt><pre data-language="nim">HeapQueue[T] = object</pre></dt> <dd> A heap queue, commonly known as a priority queue. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/collections/heapqueue.nim#L50" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/collections/heapqueue.nim#L50" target="_blank">Edit</a> </dd> </div> </dl>   <h2 id="12">Procs</h2> <dl> <div id="$-procs-all"> <div id="$,HeapQueue[T]"> <dt><pre data-language="nim">proc `$`[T](heap: HeapQueue[T]): string</pre></dt> <dd> Turns a heap into its string representation. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let heap = [1, 2].toHeapQueue
assert $heap == "[1, 2]"</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/collections/heapqueue.nim#L241" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/collections/heapqueue.nim#L241" target="_blank">Edit</a> </dd> </div> </div> <div id="[]-procs-all"> <div id="[],HeapQueue[T],Natural"> <dt><pre data-language="nim">proc `[]`[T](heap: HeapQueue[T]; i: Natural): lent T {.inline.}</pre></dt> <dd> Accesses the i-th element of <code><span class="Identifier">heap</span></code>. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/collections/heapqueue.nim#L72" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/collections/heapqueue.nim#L72" target="_blank">Edit</a> </dd> </div> </div> <div id="clear-procs-all"> <div id="clear,HeapQueue[T]"> <dt><pre data-language="nim">proc clear[T](heap: var HeapQueue[T])</pre></dt> <dd> Removes all elements from <code><span class="Identifier">heap</span></code>, making it empty. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var heap = [9, 5, 8].toHeapQueue
heap.clear()
assert heap.len == 0</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/collections/heapqueue.nim#L232" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/collections/heapqueue.nim#L232" target="_blank">Edit</a> </dd> </div> </div> <div id="del-procs-all"> <div id="del,HeapQueue[T],Natural"> <dt><pre data-language="nim">proc del[T](heap: var HeapQueue[T]; index: Natural)</pre></dt> <dd> Removes the element at <code><span class="Identifier">index</span></code> from <code><span class="Identifier">heap</span></code>, maintaining the heap invariant. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var heap = [9, 5, 8].toHeapQueue
heap.del(1)
assert heap[0] == 5
assert heap[1] == 8</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/collections/heapqueue.nim#L181" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/collections/heapqueue.nim#L181" target="_blank">Edit</a> </dd> </div> </div> <div id="find-procs-all"> <div id="find,HeapQueue[T],T"> <dt><pre data-language="nim">proc find[T](heap: HeapQueue[T]; x: T): int</pre></dt> <dd> Linear scan to find the index of the item <code><span class="Identifier">x</span></code> or -1 if not found. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let heap = [9, 5, 8].toHeapQueue
assert heap.find(5) == 0
assert heap.find(9) == 1
assert heap.find(777) == -1</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/collections/heapqueue.nim#L169" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/collections/heapqueue.nim#L169" target="_blank">Edit</a> </dd> </div> </div> <div id="initHeapQueue-procs-all"> <div id="initHeapQueue"> <dt><pre data-language="nim">proc initHeapQueue[T](): HeapQueue[T]</pre></dt> <dd> <p>Creates a new empty heap.</p> <p>Heaps are initialized by default, so it is not necessary to call this function explicitly.</p> <p><strong>See also:</strong></p> <ul class="simple">
<li><a href="#toHeapQueue,openArray[T]">toHeapQueue proc</a></li> </ul> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/collections/heapqueue.nim#L54" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/collections/heapqueue.nim#L54" target="_blank">Edit</a> </dd> </div> </div> <div id="len-procs-all"> <div id="len,HeapQueue[T]"> <dt><pre data-language="nim">proc len[T](heap: HeapQueue[T]): int {.inline.}</pre></dt> <dd> Returns the number of elements of <code><span class="Identifier">heap</span></code>. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">let heap = [9, 5, 8].toHeapQueue
assert heap.len == 3</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/collections/heapqueue.nim#L64" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/collections/heapqueue.nim#L64" target="_blank">Edit</a> </dd> </div> </div> <div id="pop-procs-all"> <div id="pop,HeapQueue[T]"> <dt><pre data-language="nim">proc pop[T](heap: var HeapQueue[T]): T</pre></dt> <dd> Pops and returns the smallest item from <code><span class="Identifier">heap</span></code>, maintaining the heap invariant. <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var heap = [9, 5, 8].toHeapQueue
assert heap.pop() == 5</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/collections/heapqueue.nim#L154" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/collections/heapqueue.nim#L154" target="_blank">Edit</a> </dd> </div> </div> <div id="push-procs-all"> <div id="push,HeapQueue[T],sinkT"> <dt><pre data-language="nim">proc push[T](heap: var HeapQueue[T]; item: sink T)</pre></dt> <dd> Pushes <code><span class="Identifier">item</span></code> onto <code><span class="Identifier">heap</span></code>, maintaining the heap invariant. <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/collections/heapqueue.nim#L134" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/collections/heapqueue.nim#L134" target="_blank">Edit</a> </dd> </div> </div> <div id="pushpop-procs-all"> <div id="pushpop,HeapQueue[T],sinkT"> <dt><pre data-language="nim">proc pushpop[T](heap: var HeapQueue[T]; item: sink T): T</pre></dt> <dd> <p>Fast version of a <code><span class="Identifier">push</span><span class="Punctuation">(</span><span class="Punctuation">)</span></code> followed by a <code><span class="Identifier">pop</span><span class="Punctuation">(</span><span class="Punctuation">)</span></code>.</p> <p><strong>See also:</strong></p> <ul class="simple">
<li><a href="#replace,HeapQueue[T],sinkT">replace proc</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var heap = [5, 12].toHeapQueue
assert heap.pushpop(6) == 5
assert heap.len == 2
assert heap[0] == 6
assert heap.pushpop(4) == 4</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/collections/heapqueue.nim#L215" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/collections/heapqueue.nim#L215" target="_blank">Edit</a> </dd> </div> </div> <div id="replace-procs-all"> <div id="replace,HeapQueue[T],sinkT"> <dt><pre data-language="nim">proc replace[T](heap: var HeapQueue[T]; item: sink T): T</pre></dt> <dd> <p>Pops and returns the current smallest value, and add the new item. This is more efficient than <code><span class="Identifier">pop</span><span class="Punctuation">(</span><span class="Punctuation">)</span></code> followed by <code><span class="Identifier">push</span><span class="Punctuation">(</span><span class="Punctuation">)</span></code>, and can be more appropriate when using a fixed-size heap. Note that the value returned may be larger than <code><span class="Identifier">item</span></code>! That constrains reasonable uses of this routine unless written as part of a conditional replacement.</p> <p><strong>See also:</strong></p> <ul class="simple">
<li><a href="#pushpop,HeapQueue[T],sinkT">pushpop proc</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var heap = [5, 12].toHeapQueue
assert heap.replace(6) == 5
assert heap.len == 2
assert heap[0] == 6
assert heap.replace(4) == 6</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/collections/heapqueue.nim#L195" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/collections/heapqueue.nim#L195" target="_blank">Edit</a> </dd> </div> </div> <div id="toHeapQueue-procs-all"> <div id="toHeapQueue,openArray[T]"> <dt><pre data-language="nim">proc toHeapQueue[T](x: openArray[T]): HeapQueue[T]</pre></dt> <dd> <p>Creates a new HeapQueue that contains the elements of <code><span class="Identifier">x</span></code>.</p> <p><strong>See also:</strong></p> <ul class="simple">
<li><a href="#initHeapQueue">initHeapQueue proc</a></li> </ul> <p><strong class="examples_text">Example:</strong></p> <pre class="listing" data-language="nim">var heap = [9, 5, 8].toHeapQueue
assert heap.pop() == 5
assert heap[0] == 8</pre> <a href="https://github.com/nim-lang/Nim/tree/version-2-0/lib/pure/collections/heapqueue.nim#L139" target="_blank">Source</a> <a href="https://github.com/nim-lang/Nim/edit/devel/lib/pure/collections/heapqueue.nim#L139" target="_blank">Edit</a> </dd> </div> </div> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2006&ndash;2024 Andreas Rumpf<br>Licensed under the MIT License.<br>
    <a href="https://nim-lang.org/docs/heapqueue.html" class="_attribution-link">https://nim-lang.org/docs/heapqueue.html</a>
  </p>
</div>
