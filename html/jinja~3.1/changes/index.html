<h1>Changes</h1> <section id="version-3-1-3"> <h2>Version 3.1.3</h2> <p>Unreleased</p> <ul class="simple"> <li>Fix compiler error when checking if required blocks in parent templates are empty. <a class="reference external" href="https://github.com/pallets/jinja/pull/1858">#1858</a>
</li> </ul> </section> <section id="version-3-1-2"> <h2>Version 3.1.2</h2> <p>Released 2022-04-28</p> <ul class="simple"> <li>Add parameters to <code>Environment.overlay</code> to match <code>__init__</code>. <a class="reference external" href="https://github.com/pallets/jinja/issues/1645">#1645</a>
</li> <li>Handle race condition in <code>FileSystemBytecodeCache</code>. <a class="reference external" href="https://github.com/pallets/jinja/issues/1654">#1654</a>
</li> </ul> </section> <section id="version-3-1-1"> <h2>Version 3.1.1</h2> <p>Released 2022-03-25</p> <ul class="simple"> <li>The template filename on Windows uses the primary path separator. <a class="reference external" href="https://github.com/pallets/jinja/issues/1637">#1637</a>
</li> </ul> </section> <section id="version-3-1-0"> <h2>Version 3.1.0</h2> <p>Released 2022-03-24</p> <ul class="simple"> <li>Drop support for Python 3.6. <a class="reference external" href="https://github.com/pallets/jinja/pull/1534">#1534</a>
</li> <li>
<p>Remove previously deprecated code. <a class="reference external" href="https://github.com/pallets/jinja/pull/1544">#1544</a></p> <ul> <li>
<code>WithExtension</code> and <code>AutoEscapeExtension</code> are built-in now.</li> <li>
<code>contextfilter</code> and <code>contextfunction</code> are replaced by <code>pass_context</code>. <code>evalcontextfilter</code> and <code>evalcontextfunction</code> are replaced by <code>pass_eval_context</code>. <code>environmentfilter</code> and <code>environmentfunction</code> are replaced by <code>pass_environment</code>.</li> <li>
<code>Markup</code> and <code>escape</code> should be imported from MarkupSafe.</li> <li>Compiled templates from very old Jinja versions may need to be recompiled.</li> <li>Legacy resolve mode for <code>Context</code> subclasses is no longer supported. Override <code>resolve_or_missing</code> instead of <code>resolve</code>.</li> <li>
<code>unicode_urlencode</code> is renamed to <code>url_quote</code>.</li> </ul> </li> <li>Add support for native types in macros. <a class="reference external" href="https://github.com/pallets/jinja/issues/1510">#1510</a>
</li> <li>The <code>{% trans %}</code> tag can use <code>pgettext</code> and <code>npgettext</code> by passing a context string as the first token in the tag, like <code>{% trans "title" %}</code>. <a class="reference external" href="https://github.com/pallets/jinja/issues/1430">#1430</a>
</li> <li>Update valid identifier characters from Python 3.6 to 3.7. <a class="reference external" href="https://github.com/pallets/jinja/pull/1571">#1571</a>
</li> <li>Filters and tests decorated with <code>@async_variant</code> are pickleable. <a class="reference external" href="https://github.com/pallets/jinja/pull/1612">#1612</a>
</li> <li>Add <code>items</code> filter. <a class="reference external" href="https://github.com/pallets/jinja/issues/1561">#1561</a>
</li> <li>Subscriptions (<code>[0]</code>, etc.) can be used after filters, tests, and calls when the environment is in async mode. <a class="reference external" href="https://github.com/pallets/jinja/issues/1573">#1573</a>
</li> <li>The <code>groupby</code> filter is case-insensitive by default, matching other comparison filters. Added the <code>case_sensitive</code> parameter to control this. <a class="reference external" href="https://github.com/pallets/jinja/issues/1463">#1463</a>
</li> <li>Windows drive-relative path segments in template names will not result in <code>FileSystemLoader</code> and <code>PackageLoader</code> loading from drive-relative paths. <a class="reference external" href="https://github.com/pallets/jinja/pull/1621">#1621</a>
</li> </ul> </section> <section id="version-3-0-3"> <h2>Version 3.0.3</h2> <p>Released 2021-11-09</p> <ul class="simple"> <li>Fix traceback rewriting internals for Python 3.10 and 3.11. <a class="reference external" href="https://github.com/pallets/jinja/issues/1535">#1535</a>
</li> <li>Fix how the native environment treats leading and trailing spaces when parsing values on Python 3.10. <a class="reference external" href="https://github.com/pallets/jinja/pull/1537">#1537</a>
</li> <li>Improve async performance by avoiding checks for common types. <a class="reference external" href="https://github.com/pallets/jinja/issues/1514">#1514</a>
</li> <li>Revert change to <code>hash(Node)</code> behavior. Nodes are hashed by id again <a class="reference external" href="https://github.com/pallets/jinja/issues/1521">#1521</a>
</li> <li>
<code>PackageLoader</code> works when the package is a single module file. <a class="reference external" href="https://github.com/pallets/jinja/issues/1512">#1512</a>
</li> </ul> </section> <section id="version-3-0-2"> <h2>Version 3.0.2</h2> <p>Released 2021-10-04</p> <ul class="simple"> <li>Fix a loop scoping bug that caused assignments in nested loops to still be referenced outside of it. <a class="reference external" href="https://github.com/pallets/jinja/issues/1427">#1427</a>
</li> <li>Make <code>compile_templates</code> deterministic for filter and import names. <a class="reference external" href="https://github.com/pallets/jinja/issues/1452">#1452</a>, <a class="reference external" href="https://github.com/pallets/jinja/issues/1453">#1453</a>
</li> <li>Revert an unintended change that caused <code>Undefined</code> to act like <code>StrictUndefined</code> for the <code>in</code> operator. <a class="reference external" href="https://github.com/pallets/jinja/issues/1448">#1448</a>
</li> <li>Imported macros have access to the current template globals in async environments. <a class="reference external" href="https://github.com/pallets/jinja/issues/1494">#1494</a>
</li> <li>
<code>PackageLoader</code> will not include a current directory (.) path segment. This allows loading templates from the root of a zip import. <a class="reference external" href="https://github.com/pallets/jinja/issues/1467">#1467</a>
</li> </ul> </section> <section id="version-3-0-1"> <h2>Version 3.0.1</h2> <p>Released 2021-05-18</p> <ul class="simple"> <li>Update MarkupSafe dependency to &gt;= 2.0. <a class="reference external" href="https://github.com/pallets/jinja/pull/1418">#1418</a>
</li> <li>Mark top-level names as exported so type checking understands imports in user projects. <a class="reference external" href="https://github.com/pallets/jinja/issues/1426">#1426</a>
</li> <li>Fix some types that weren’t available in Python 3.6.0. <a class="reference external" href="https://github.com/pallets/jinja/issues/1433">#1433</a>
</li> <li>The deprecation warning for unneeded <code>autoescape</code> and <code>with_</code> extensions shows more relevant context. <a class="reference external" href="https://github.com/pallets/jinja/issues/1429">#1429</a>
</li> <li>Fixed calling deprecated <code>jinja2.Markup</code> without an argument. Use <code>markupsafe.Markup</code> instead. <a class="reference external" href="https://github.com/pallets/jinja/issues/1438">#1438</a>
</li> <li>Calling sync <code>render</code> for an async template uses <code>asyncio.run</code> on Python &gt;= 3.7. This fixes a deprecation that Python 3.10 introduces. <a class="reference external" href="https://github.com/pallets/jinja/issues/1443">#1443</a>
</li> </ul> </section> <section id="version-3-0-0"> <h2>Version 3.0.0</h2> <p>Released 2021-05-11</p> <ul class="simple"> <li>Drop support for Python 2.7 and 3.5.</li> <li>Bump MarkupSafe dependency to &gt;=1.1.</li> <li>Bump Babel optional dependency to &gt;=2.1.</li> <li>Remove code that was marked deprecated.</li> <li>Add type hinting. <a class="reference external" href="https://github.com/pallets/jinja/pull/1412">#1412</a>
</li> <li>Use <a class="pep reference external" href="https://peps.python.org/pep-0451/" id="index-0"><strong>PEP 451</strong></a> API to load templates with <a class="reference internal" href="../api/index.html#jinja2.PackageLoader" title="jinja2.loaders.PackageLoader"><code>PackageLoader</code></a>. <a class="reference external" href="https://github.com/pallets/jinja/issues/1168">#1168</a>
</li> <li>Fix a bug that caused imported macros to not have access to the current template’s globals. <a class="reference external" href="https://github.com/pallets/jinja/issues/688">#688</a>
</li> <li>Add ability to ignore <code>trim_blocks</code> using <code>+%}</code>. <a class="reference external" href="https://github.com/pallets/jinja/issues/1036">#1036</a>
</li> <li>Fix a bug that caused custom async-only filters to fail with constant input. <a class="reference external" href="https://github.com/pallets/jinja/issues/1279">#1279</a>
</li> <li>Fix UndefinedError incorrectly being thrown on an undefined variable instead of <code>Undefined</code> being returned on <code>NativeEnvironment</code> on Python 3.10. <a class="reference external" href="https://github.com/pallets/jinja/issues/1335">#1335</a>
</li> <li>Blocks can be marked as <code>required</code>. They must be overridden at some point, but not necessarily by the direct child. <a class="reference external" href="https://github.com/pallets/jinja/issues/1147">#1147</a>
</li> <li>Deprecate the <code>autoescape</code> and <code>with</code> extensions, they are built-in to the compiler. <a class="reference external" href="https://github.com/pallets/jinja/issues/1203">#1203</a>
</li> <li>The <code>urlize</code> filter recognizes <code>mailto:</code> links and takes <code>extra_schemes</code> (or <code>env.policies["urlize.extra_schemes"]</code>) to recognize other schemes. It tries to balance parentheses within a URL instead of ignoring trailing characters. The parsing in general has been updated to be more efficient and match more cases. URLs without a scheme are linked as <code>https://</code> instead of <code>http://</code>. <a class="reference external" href="https://github.com/pallets/jinja/issues/522">#522</a>, <a class="reference external" href="https://github.com/pallets/jinja/issues/827">#827</a>, <a class="reference external" href="https://github.com/pallets/jinja/issues/1172">#1172</a>, <a class="reference external" href="https://github.com/pallets/jinja/pull/1195">#1195</a>
</li> <li>Filters that get attributes, such as <code>map</code> and <code>groupby</code>, can use a false or empty value as a default. <a class="reference external" href="https://github.com/pallets/jinja/issues/1331">#1331</a>
</li> <li>Fix a bug that prevented variables set in blocks or loops from being accessed in custom context functions. <a class="reference external" href="https://github.com/pallets/jinja/issues/768">#768</a>
</li> <li>Fix a bug that caused scoped blocks from accessing special loop variables. <a class="reference external" href="https://github.com/pallets/jinja/issues/1088">#1088</a>
</li> <li>Update the template globals when calling <code>Environment.get_template(globals=...)</code> even if the template was already loaded. <a class="reference external" href="https://github.com/pallets/jinja/issues/295">#295</a>
</li> <li>Do not raise an error for undefined filters in unexecuted if-statements and conditional expressions. <a class="reference external" href="https://github.com/pallets/jinja/issues/842">#842</a>
</li> <li>Add <code>is filter</code> and <code>is test</code> tests to test if a name is a registered filter or test. This allows checking if a filter is available in a template before using it. Test functions can be decorated with <code>@pass_environment</code>, <code>@pass_eval_context</code>, or <code>@pass_context</code>. <a class="reference external" href="https://github.com/pallets/jinja/issues/842">#842</a>, <a class="reference external" href="https://github.com/pallets/jinja/pull/1248">#1248</a>
</li> <li>Support <code>pgettext</code> and <code>npgettext</code> (message contexts) in i18n extension. <a class="reference external" href="https://github.com/pallets/jinja/issues/441">#441</a>
</li> <li>The <code>|indent</code> filter’s <code>width</code> argument can be a string to indent by. <a class="reference external" href="https://github.com/pallets/jinja/pull/1167">#1167</a>
</li> <li>The parser understands hex, octal, and binary integer literals. <a class="reference external" href="https://github.com/pallets/jinja/issues/1170">#1170</a>
</li> <li>
<code>Undefined.__contains__</code> (<code>in</code>) raises an <code>UndefinedError</code> instead of a <code>TypeError</code>. <a class="reference external" href="https://github.com/pallets/jinja/issues/1198">#1198</a>
</li> <li>
<code>Undefined</code> is iterable in an async environment. <a class="reference external" href="https://github.com/pallets/jinja/issues/1294">#1294</a>
</li> <li>
<code>NativeEnvironment</code> supports async mode. <a class="reference external" href="https://github.com/pallets/jinja/issues/1362">#1362</a>
</li> <li>Template rendering only treats <code>\n</code>, <code>\r\n</code> and <code>\r</code> as line breaks. Other characters are left unchanged. <a class="reference external" href="https://github.com/pallets/jinja/issues/769">#769</a>, <a class="reference external" href="https://github.com/pallets/jinja/issues/952">#952</a>, <a class="reference external" href="https://github.com/pallets/jinja/issues/1313">#1313</a>
</li> <li>
<code>|groupby</code> filter takes an optional <code>default</code> argument. <a class="reference external" href="https://github.com/pallets/jinja/issues/1359">#1359</a>
</li> <li>
<p>The function and filter decorators have been renamed and unified. The old names are deprecated. <a class="reference external" href="https://github.com/pallets/jinja/issues/1381">#1381</a></p> <ul> <li>
<code>pass_context</code> replaces <code>contextfunction</code> and <code>contextfilter</code>.</li> <li>
<code>pass_eval_context</code> replaces <code>evalcontextfunction</code> and <code>evalcontextfilter</code>
</li> <li>
<code>pass_environment</code> replaces <code>environmentfunction</code> and <code>environmentfilter</code>.</li> </ul> </li> <li>Async support no longer requires Jinja to patch itself. It must still be enabled with <code>Environment(enable_async=True)</code>. <a class="reference external" href="https://github.com/pallets/jinja/issues/1390">#1390</a>
</li> <li>Overriding <code>Context.resolve</code> is deprecated, override <code>resolve_or_missing</code> instead. <a class="reference external" href="https://github.com/pallets/jinja/issues/1380">#1380</a>
</li> </ul> </section> <section id="version-2-11-3"> <h2>Version 2.11.3</h2> <p>Released 2021-01-31</p> <ul class="simple"> <li>Improve the speed of the <code>urlize</code> filter by reducing regex backtracking. Email matching requires a word character at the start of the domain part, and only word characters in the TLD. <a class="reference external" href="https://github.com/pallets/jinja/pull/1343">#1343</a>
</li> </ul> </section> <section id="version-2-11-2"> <h2>Version 2.11.2</h2> <p>Released 2020-04-13</p> <ul class="simple"> <li>Fix a bug that caused callable objects with <code>__getattr__</code>, like <a class="reference external" href="https://docs.python.org/3/library/unittest.mock.html#unittest.mock.Mock" title="(in Python v3.11)"><code>Mock</code></a> to be treated as a <code>contextfunction()</code>. <a class="reference external" href="https://github.com/pallets/jinja/issues/1145">#1145</a>
</li> <li>Update <code>wordcount</code> filter to trigger <a class="reference internal" href="../api/index.html#jinja2.Undefined" title="jinja2.Undefined"><code>Undefined</code></a> methods by wrapping the input in <code>soft_str()</code>. <a class="reference external" href="https://github.com/pallets/jinja/pull/1160">#1160</a>
</li> <li>Fix a hang when displaying tracebacks on Python 32-bit. <a class="reference external" href="https://github.com/pallets/jinja/issues/1162">#1162</a>
</li> <li>Showing an undefined error for an object that raises <code>AttributeError</code> on access doesn’t cause a recursion error. <a class="reference external" href="https://github.com/pallets/jinja/issues/1177">#1177</a>
</li> <li>Revert changes to <a class="reference internal" href="../api/index.html#jinja2.PackageLoader" title="jinja2.loaders.PackageLoader"><code>PackageLoader</code></a> from 2.10 which removed the dependency on setuptools and pkg_resources, and added limited support for namespace packages. The changes caused issues when using Pytest. Due to the difficulty in supporting Python 2 and <a class="pep reference external" href="https://peps.python.org/pep-0451/" id="index-1"><strong>PEP 451</strong></a> simultaneously, the changes are reverted until 3.0. <a class="reference external" href="https://github.com/pallets/jinja/pull/1182">#1182</a>
</li> <li>Fix line numbers in error messages when newlines are stripped. <a class="reference external" href="https://github.com/pallets/jinja/pull/1178">#1178</a>
</li> <li>The special <code>namespace()</code> assignment object in templates works in async environments. <a class="reference external" href="https://github.com/pallets/jinja/issues/1180">#1180</a>
</li> <li>Fix whitespace being removed before tags in the middle of lines when <code>lstrip_blocks</code> is enabled. <a class="reference external" href="https://github.com/pallets/jinja/issues/1138">#1138</a>
</li> <li>
<a class="reference internal" href="../nativetypes/index.html#jinja2.nativetypes.NativeEnvironment" title="jinja2.nativetypes.NativeEnvironment"><code>NativeEnvironment</code></a> doesn’t evaluate intermediate strings during rendering. This prevents early evaluation which could change the value of an expression. <a class="reference external" href="https://github.com/pallets/jinja/issues/1186">#1186</a>
</li> </ul> </section> <section id="version-2-11-1"> <h2>Version 2.11.1</h2> <p>Released 2020-01-30</p> <ul class="simple"> <li>Fix a bug that prevented looking up a key after an attribute (<code>{{ data.items[1:] }}</code>) in an async template. <a class="reference external" href="https://github.com/pallets/jinja/issues/1141">#1141</a>
</li> </ul> </section> <section id="version-2-11-0"> <h2>Version 2.11.0</h2> <p>Released 2020-01-27</p> <ul class="simple"> <li>Drop support for Python 2.6, 3.3, and 3.4. This will be the last version to support Python 2.7 and 3.5.</li> <li>Added a new <code>ChainableUndefined</code> class to support getitem and getattr on an undefined object. <a class="reference external" href="https://github.com/pallets/jinja/issues/977">#977</a>
</li> <li>Allow <code>{%+</code> syntax (with NOP behavior) when <code>lstrip_blocks</code> is disabled. <a class="reference external" href="https://github.com/pallets/jinja/issues/748">#748</a>
</li> <li>Added a <code>default</code> parameter for the <code>map</code> filter. <a class="reference external" href="https://github.com/pallets/jinja/issues/557">#557</a>
</li> <li>Exclude environment globals from <a class="reference internal" href="../api/index.html#jinja2.meta.find_undeclared_variables" title="jinja2.meta.find_undeclared_variables"><code>meta.find_undeclared_variables()</code></a>. <a class="reference external" href="https://github.com/pallets/jinja/issues/931">#931</a>
</li> <li>Float literals can be written with scientific notation, like 2.56e-3. <a class="reference external" href="https://github.com/pallets/jinja/issues/912">#912</a>, <a class="reference external" href="https://github.com/pallets/jinja/pull/922">#922</a>
</li> <li>Int and float literals can be written with the ‘_’ separator for legibility, like 12_345. <a class="reference external" href="https://github.com/pallets/jinja/pull/923">#923</a>
</li> <li>Fix a bug causing deadlocks in <code>LRUCache.setdefault</code>. <a class="reference external" href="https://github.com/pallets/jinja/pull/1000">#1000</a>
</li> <li>The <code>trim</code> filter takes an optional string of characters to trim. <a class="reference external" href="https://github.com/pallets/jinja/pull/828">#828</a>
</li> <li>A new <code>jinja2.ext.debug</code> extension adds a <code>{% debug %}</code> tag to quickly dump the current context and available filters and tests. <a class="reference external" href="https://github.com/pallets/jinja/issues/174">#174</a>, <a class="reference external" href="https://github.com/pallets/jinja/pull/798">#798</a>, <a class="reference external" href="https://github.com/pallets/jinja/pull/983">#983</a>
</li> <li>Lexing templates with large amounts of whitespace is much faster. <a class="reference external" href="https://github.com/pallets/jinja/issues/857">#857</a>, <a class="reference external" href="https://github.com/pallets/jinja/pull/858">#858</a>
</li> <li>Parentheses around comparisons are preserved, so <code>{{ 2 * (3 &lt; 5) }}</code> outputs “2” instead of “False”. <a class="reference external" href="https://github.com/pallets/jinja/issues/755">#755</a>, <a class="reference external" href="https://github.com/pallets/jinja/pull/938">#938</a>
</li> <li>Add new <code>boolean</code>, <code>false</code>, <code>true</code>, <code>integer</code> and <code>float</code> tests. <a class="reference external" href="https://github.com/pallets/jinja/pull/824">#824</a>
</li> <li>The environment’s <code>finalize</code> function is only applied to the output of expressions (constant or not), not static template data. <a class="reference external" href="https://github.com/pallets/jinja/issues/63">#63</a>
</li> <li>When providing multiple paths to <code>FileSystemLoader</code>, a template can have the same name as a directory. <a class="reference external" href="https://github.com/pallets/jinja/issues/821">#821</a>
</li> <li>Always return <a class="reference internal" href="../api/index.html#jinja2.Undefined" title="jinja2.Undefined"><code>Undefined</code></a> when omitting the <code>else</code> clause in a <code>{{ 'foo' if bar }}</code> expression, regardless of the environment’s <code>undefined</code> class. Omitting the <code>else</code> clause is a valid shortcut and should not raise an error when using <a class="reference internal" href="../api/index.html#jinja2.StrictUndefined" title="jinja2.StrictUndefined"><code>StrictUndefined</code></a>. <a class="reference external" href="https://github.com/pallets/jinja/issues/710">#710</a>, <a class="reference external" href="https://github.com/pallets/jinja/pull/1079">#1079</a>
</li> <li>Fix behavior of <code>loop</code> control variables such as <code>length</code> and <code>revindex0</code> when looping over a generator. <a class="reference external" href="https://github.com/pallets/jinja/issues/459">#459</a>, <a class="reference external" href="https://github.com/pallets/jinja/issues/751">#751</a>, <a class="reference external" href="https://github.com/pallets/jinja/issues/794">#794</a>, <a class="reference external" href="https://github.com/pallets/jinja/pull/993">#993</a>
</li> <li>Async support is only loaded the first time an environment enables it, in order to avoid a slow initial import. <a class="reference external" href="https://github.com/pallets/jinja/issues/765">#765</a>
</li> <li>In async environments, the <code>|map</code> filter will await the filter call if needed. <a class="reference external" href="https://github.com/pallets/jinja/pull/913">#913</a>
</li> <li>In for loops that access <code>loop</code> attributes, the iterator is not advanced ahead of the current iteration unless <code>length</code>, <code>revindex</code>, <code>nextitem</code>, or <code>last</code> are accessed. This makes it less likely to break <code>groupby</code> results. <a class="reference external" href="https://github.com/pallets/jinja/issues/555">#555</a>, <a class="reference external" href="https://github.com/pallets/jinja/pull/1101">#1101</a>
</li> <li>In async environments, the <code>loop</code> attributes <code>length</code> and <code>revindex</code> work for async iterators. <a class="reference external" href="https://github.com/pallets/jinja/pull/1101">#1101</a>
</li> <li>In async environments, values from attribute/property access will be awaited if needed. <a class="reference external" href="https://github.com/pallets/jinja/pull/1101">#1101</a>
</li> <li>
<code>PackageLoader</code> doesn’t depend on setuptools or pkg_resources. <a class="reference external" href="https://github.com/pallets/jinja/issues/970">#970</a>
</li> <li>
<code>PackageLoader</code> has limited support for <a class="pep reference external" href="https://peps.python.org/pep-0420/" id="index-2"><strong>PEP 420</strong></a> namespace packages. <a class="reference external" href="https://github.com/pallets/jinja/issues/1097">#1097</a>
</li> <li>Support <a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.11)"><code>os.PathLike</code></a> objects in <code>FileSystemLoader</code> and <code>ModuleLoader</code>. <a class="reference external" href="https://github.com/pallets/jinja/issues/870">#870</a>
</li> <li>
<a class="reference internal" href="../nativetypes/index.html#jinja2.nativetypes.NativeTemplate" title="jinja2.nativetypes.NativeTemplate"><code>NativeTemplate</code></a> correctly handles quotes between expressions. <code>"'{{ a }}', '{{ b }}'"</code> renders as the tuple <code>('1', '2')</code> rather than the string <code>'1, 2'</code>. <a class="reference external" href="https://github.com/pallets/jinja/issues/1020">#1020</a>
</li> <li>Creating a <a class="reference internal" href="../nativetypes/index.html#jinja2.nativetypes.NativeTemplate" title="jinja2.nativetypes.NativeTemplate"><code>NativeTemplate</code></a> directly creates a <a class="reference internal" href="../nativetypes/index.html#jinja2.nativetypes.NativeEnvironment" title="jinja2.nativetypes.NativeEnvironment"><code>NativeEnvironment</code></a> instead of a default <a class="reference internal" href="../api/index.html#jinja2.Environment" title="jinja2.Environment"><code>Environment</code></a>. <a class="reference external" href="https://github.com/pallets/jinja/issues/1091">#1091</a>
</li> <li>After calling <code>LRUCache.copy()</code>, the copy’s queue methods point to the correct queue. <a class="reference external" href="https://github.com/pallets/jinja/issues/843">#843</a>
</li> <li>Compiling templates always writes UTF-8 instead of defaulting to the system encoding. <a class="reference external" href="https://github.com/pallets/jinja/issues/889">#889</a>
</li> <li>
<code>|wordwrap</code> filter treats existing newlines as separate paragraphs to be wrapped individually, rather than creating short intermediate lines. <a class="reference external" href="https://github.com/pallets/jinja/issues/175">#175</a>
</li> <li>Add <code>break_on_hyphens</code> parameter to <code>|wordwrap</code> filter. <a class="reference external" href="https://github.com/pallets/jinja/issues/550">#550</a>
</li> <li>Cython compiled functions decorated as context functions will be passed the context. <a class="reference external" href="https://github.com/pallets/jinja/pull/1108">#1108</a>
</li> <li>When chained comparisons of constants are evaluated at compile time, the result follows Python’s behavior of returning <code>False</code> if any comparison returns <code>False</code>, rather than only the last one. <a class="reference external" href="https://github.com/pallets/jinja/issues/1102">#1102</a>
</li> <li>Tracebacks for exceptions in templates show the correct line numbers and source for Python &gt;= 3.7. <a class="reference external" href="https://github.com/pallets/jinja/issues/1104">#1104</a>
</li> <li>Tracebacks for template syntax errors in Python 3 no longer show internal compiler frames. <a class="reference external" href="https://github.com/pallets/jinja/issues/763">#763</a>
</li> <li>Add a <code>DerivedContextReference</code> node that can be used by extensions to get the current context and local variables such as <code>loop</code>. <a class="reference external" href="https://github.com/pallets/jinja/issues/860">#860</a>
</li> <li>Constant folding during compilation is applied to some node types that were previously overlooked. <a class="reference external" href="https://github.com/pallets/jinja/issues/733">#733</a>
</li> <li>
<code>TemplateSyntaxError.source</code> is not empty when raised from an included template. <a class="reference external" href="https://github.com/pallets/jinja/issues/457">#457</a>
</li> <li>Passing an <code>Undefined</code> value to <code>get_template</code> (such as through <code>extends</code>, <code>import</code>, or <code>include</code>), raises an <code>UndefinedError</code> consistently. <code>select_template</code> will show the undefined message in the list of attempts rather than the empty string. <a class="reference external" href="https://github.com/pallets/jinja/issues/1037">#1037</a>
</li> <li>
<code>TemplateSyntaxError</code> can be pickled. <a class="reference external" href="https://github.com/pallets/jinja/pull/1117">#1117</a>
</li> </ul> </section> <section id="version-2-10-3"> <h2>Version 2.10.3</h2> <p>Released 2019-10-04</p> <ul class="simple"> <li>Fix a typo in Babel entry point in <code>setup.py</code> that was preventing installation.</li> </ul> </section> <section id="version-2-10-2"> <h2>Version 2.10.2</h2> <p>Released 2019-10-04</p> <ul class="simple"> <li>Fix Python 3.7 deprecation warnings.</li> <li>Using <code>range</code> in the sandboxed environment uses <code>xrange</code> on Python 2 to avoid memory use. <a class="reference external" href="https://github.com/pallets/jinja/issues/933">#933</a>
</li> <li>Use Python 3.7’s better traceback support to avoid a core dump when using debug builds of Python 3.7. <a class="reference external" href="https://github.com/pallets/jinja/issues/1050">#1050</a>
</li> </ul> </section> <section id="version-2-10-1"> <h2>Version 2.10.1</h2> <p>Released 2019-04-06</p> <ul class="simple"> <li>
<code>SandboxedEnvironment</code> securely handles <code>str.format_map</code> in order to prevent code execution through untrusted format strings. The sandbox already handled <code>str.format</code>.</li> </ul> </section> <section id="version-2-10"> <h2>Version 2.10</h2> <p>Released 2017-11-08</p> <ul class="simple"> <li>Added a new extension node called <code>OverlayScope</code> which can be used to create an unoptimized scope that will look up all variables from a derived context.</li> <li>Added an <code>in</code> test that works like the in operator. This can be used in combination with <code>reject</code> and <code>select</code>.</li> <li>Added <code>previtem</code> and <code>nextitem</code> to loop contexts, providing access to the previous/next item in the loop. If such an item does not exist, the value is undefined.</li> <li>Added <code>changed(*values)</code> to loop contexts, providing an easy way of checking whether a value has changed since the last iteration (or rather since the last call of the method)</li> <li>Added a <code>namespace</code> function that creates a special object which allows attribute assignment using the <code>set</code> tag. This can be used to carry data across scopes, e.g. from a loop body to code that comes after the loop.</li> <li>Added a <code>trimmed</code> modifier to <code>{% trans %}</code> to strip linebreaks and surrounding whitespace. Also added a new policy to enable this for all <code>trans</code> blocks.</li> <li>The <code>random</code> filter is no longer incorrectly constant folded and will produce a new random choice each time the template is rendered. <a class="reference external" href="https://github.com/pallets/jinja/pull/478">#478</a>
</li> <li>Added a <code>unique</code> filter. <a class="reference external" href="https://github.com/pallets/jinja/pull/469">#469</a>
</li> <li>Added <code>min</code> and <code>max</code> filters. <a class="reference external" href="https://github.com/pallets/jinja/pull/475">#475</a>
</li> <li>Added tests for all comparison operators: <code>eq</code>, <code>ne</code>, <code>lt</code>, <code>le</code>, <code>gt</code>, <code>ge</code>. <a class="reference external" href="https://github.com/pallets/jinja/pull/665">#665</a>
</li> <li>
<code>import</code> statement cannot end with a trailing comma. <a class="reference external" href="https://github.com/pallets/jinja/pull/617">#617</a>, <a class="reference external" href="https://github.com/pallets/jinja/pull/618">#618</a>
</li> <li>
<code>indent</code> filter will not indent blank lines by default. <a class="reference external" href="https://github.com/pallets/jinja/pull/685">#685</a>
</li> <li>Add <code>reverse</code> argument for <code>dictsort</code> filter. <a class="reference external" href="https://github.com/pallets/jinja/pull/692">#692</a>
</li> <li>Add a <code>NativeEnvironment</code> that renders templates to native Python types instead of strings. <a class="reference external" href="https://github.com/pallets/jinja/pull/708">#708</a>
</li> <li>Added filter support to the block <code>set</code> tag. <a class="reference external" href="https://github.com/pallets/jinja/pull/489">#489</a>
</li> <li>
<code>tojson</code> filter marks output as safe to match documented behavior. <a class="reference external" href="https://github.com/pallets/jinja/pull/718">#718</a>
</li> <li>Resolved a bug where getting debug locals for tracebacks could modify template context.</li> <li>Fixed a bug where having many <code>{% elif ... %}</code> blocks resulted in a “too many levels of indentation” error. These blocks now compile to native <code>elif ..:</code> instead of <code>else: if ..:</code> <a class="reference external" href="https://github.com/pallets/jinja/issues/759">#759</a>
</li> </ul> </section> <section id="version-2-9-6"> <h2>Version 2.9.6</h2> <p>Released 2017-04-03</p> <ul class="simple"> <li>Fixed custom context behavior in fast resolve mode <a class="reference external" href="https://github.com/pallets/jinja/issues/675">#675</a>
</li> </ul> </section> <section id="version-2-9-5"> <h2>Version 2.9.5</h2> <p>Released 2017-01-28</p> <ul class="simple"> <li>Restored the original repr of the internal <code>_GroupTuple</code> because this caused issues with ansible and it was an unintended change. <a class="reference external" href="https://github.com/pallets/jinja/issues/654">#654</a>
</li> <li>Added back support for custom contexts that override the old <code>resolve</code> method since it was hard for people to spot that this could cause a regression.</li> <li>Correctly use the buffer for the else block of for loops. This caused invalid syntax errors to be caused on 2.x and completely wrong behavior on Python 3 <a class="reference external" href="https://github.com/pallets/jinja/issues/669">#669</a>
</li> <li>Resolve an issue where the <code>{% extends %}</code> tag could not be used with async environments. <a class="reference external" href="https://github.com/pallets/jinja/issues/668">#668</a>
</li> <li>Reduce memory footprint slightly by reducing our unicode database dump we use for identifier matching on Python 3 <a class="reference external" href="https://github.com/pallets/jinja/issues/666">#666</a>
</li> <li>Fixed autoescaping not working for macros in async compilation mode. <a class="reference external" href="https://github.com/pallets/jinja/issues/671">#671</a>
</li> </ul> </section> <section id="version-2-9-4"> <h2>Version 2.9.4</h2> <p>Released 2017-01-10</p> <ul class="simple"> <li>Solved some warnings for string literals. <a class="reference external" href="https://github.com/pallets/jinja/issues/646">#646</a>
</li> <li>Increment the bytecode cache version which was not done due to an oversight before.</li> <li>Corrected bad code generation and scoping for filtered loops. <a class="reference external" href="https://github.com/pallets/jinja/issues/649">#649</a>
</li> <li>Resolved an issue where top-level output silencing after known extend blocks could generate invalid code when blocks where contained in if statements. <a class="reference external" href="https://github.com/pallets/jinja/issues/651">#651</a>
</li> <li>Made the <code>truncate.leeway</code> default configurable to improve compatibility with older templates.</li> </ul> </section> <section id="version-2-9-3"> <h2>Version 2.9.3</h2> <p>Released 2017-01-08</p> <ul class="simple"> <li>Restored the use of blocks in macros to the extend that was possible before. On Python 3 it would render a generator repr instead of the block contents. <a class="reference external" href="https://github.com/pallets/jinja/issues/645">#645</a>
</li> <li>Set a consistent behavior for assigning of variables in inner scopes when the variable is also read from an outer scope. This now sets the intended behavior in all situations however it does not restore the old behavior where limited assignments to outer scopes was possible. For more information and a discussion see <a class="reference external" href="https://github.com/pallets/jinja/issues/641">#641</a>
</li> <li>Resolved an issue where <code>block scoped</code> would not take advantage of the new scoping rules. In some more exotic cases a variable overridden in a local scope would not make it into a block.</li> <li>Change the code generation of the <code>with</code> statement to be in line with the new scoping rules. This resolves some unlikely bugs in edge cases. This also introduces a new internal <code>With</code> node that can be used by extensions.</li> </ul> </section> <section id="version-2-9-2"> <h2>Version 2.9.2</h2> <p>Released 2017-01-08</p> <ul class="simple"> <li>Fixed a regression that caused for loops to not be able to use the same variable for the target as well as source iterator. <a class="reference external" href="https://github.com/pallets/jinja/issues/640">#640</a>
</li> <li>Add support for a previously unknown behavior of macros. It used to be possible in some circumstances to explicitly provide a caller argument to macros. While badly buggy and unintended it turns out that this is a common case that gets copy pasted around. To not completely break backwards compatibility with the most common cases it’s now possible to provide an explicit keyword argument for caller if it’s given an explicit default. <a class="reference external" href="https://github.com/pallets/jinja/issues/642">#642</a>
</li> </ul> </section> <section id="version-2-9-1"> <h2>Version 2.9.1</h2> <p>Released 2017-01-07</p> <ul class="simple"> <li>Resolved a regression with call block scoping for macros. Nested caller blocks that used the same identifiers as outer macros could refer to the wrong variable incorrectly.</li> </ul> </section> <section id="version-2-9"> <h2>Version 2.9</h2> <p>Released 2017-01-07, codename Derivation</p> <ul class="simple"> <li>Change cache key definition in environment. This fixes a performance regression introduced in 2.8.</li> <li>Added support for <code>generator_stop</code> on supported Python versions (Python 3.5 and later)</li> <li>Corrected a long standing issue with operator precedence of math operations not being what was expected.</li> <li>Added support for Python 3.6 async iterators through a new async mode.</li> <li>Added policies for filter defaults and similar things.</li> <li>Urlize now sets “rel noopener” by default.</li> <li>Support attribute fallback for old-style classes in 2.x.</li> <li>Support toplevel set statements in extend situations.</li> <li>Restored behavior of Cycler for Python 3 users.</li> <li>Subtraction now follows the same behavior as other operators on undefined values.</li> <li>
<code>map</code> and friends will now give better error messages if you forgot to quote the parameter.</li> <li>Depend on MarkupSafe 0.23 or higher.</li> <li>Improved the <code>truncate</code> filter to support better truncation in case the string is barely truncated at all.</li> <li>Change the logic for macro autoescaping to be based on the runtime autoescaping information at call time instead of macro define time.</li> <li>Ported a modified version of the <code>tojson</code> filter from Flask to Jinja and hooked it up with the new policy framework.</li> <li>Block sets are now marked <code>safe</code> by default.</li> <li>On Python 2 the asciification of ASCII strings can now be disabled with the <code>compiler.ascii_str</code> policy.</li> <li>Tests now no longer accept an arbitrary expression as first argument but a restricted one. This means that you can now properly use multiple tests in one expression without extra parentheses. In particular you can now write <code>foo is divisibleby 2 or foo is
divisibleby 3</code> as you would expect.</li> <li>Greatly changed the scoping system to be more consistent with what template designers and developers expect. There is now no more magic difference between the different include and import constructs. Context is now always propagated the same way. The only remaining differences is the defaults for <code>with context</code> and <code>without
context</code>.</li> <li>The <code>with</code> and <code>autoescape</code> tags are now built-in.</li> <li>Added the new <code>select_autoescape</code> function which helps configuring better autoescaping easier.</li> <li>Fixed a runtime error in the sandbox when attributes of async generators were accessed.</li> </ul> </section> <section id="version-2-8-1"> <h2>Version 2.8.1</h2> <p>Released 2016-12-29</p> <ul class="simple"> <li>Fixed the <code>for_qs</code> flag for <code>urlencode</code>.</li> <li>Fixed regression when applying <code>int</code> to non-string values.</li> <li>SECURITY: if the sandbox mode is used format expressions are now sandboxed with the same rules as in Jinja. This solves various information leakage problems that can occur with format strings.</li> </ul> </section> <section id="version-2-8"> <h2>Version 2.8</h2> <p>Released 2015-07-26, codename Replacement</p> <ul class="simple"> <li>Added <code>target</code> parameter to urlize function.</li> <li>Added support for <code>followsymlinks</code> to the file system loader.</li> <li>The truncate filter now counts the length.</li> <li>Added equalto filter that helps with select filters.</li> <li>Changed cache keys to use absolute file names if available instead of load names.</li> <li>Fixed loop length calculation for some iterators.</li> <li>Changed how Jinja enforces strings to be native strings in Python 2 to work when people break their default encoding.</li> <li>Added <code>make_logging_undefined</code> which returns an undefined object that logs failures into a logger.</li> <li>If unmarshalling of cached data fails the template will be reloaded now.</li> <li>Implemented a block <code>set</code> tag.</li> <li>Default cache size was increased to 400 from a low 50.</li> <li>Fixed <code>is number</code> test to accept long integers in all Python versions.</li> <li>Changed <code>is number</code> to accept Decimal as a number.</li> <li>Added a check for default arguments followed by non-default arguments. This change makes <code>{% macro m(x, y=1, z) %}</code> a syntax error. The previous behavior for this code was broken anyway (resulting in the default value being applied to <code>y</code>).</li> <li>Add ability to use custom subclasses of <code>jinja2.compiler.CodeGenerator</code> and <code>jinja2.runtime.Context</code> by adding two new attributes to the environment (<code>code_generator_class</code> and <code>context_class</code>). <a class="reference external" href="https://github.com/pallets/jinja/pull/404">#404</a>
</li> <li>Added support for context/environment/evalctx decorator functions on the finalize callback of the environment.</li> <li>Escape query strings for urlencode properly. Previously slashes were not escaped in that place.</li> <li>Add ‘base’ parameter to ‘int’ filter.</li> </ul> </section> <section id="version-2-7-3"> <h2>Version 2.7.3</h2> <p>Released 2014-06-06</p> <ul class="simple"> <li>Security issue: Corrected the security fix for the cache folder. This fix was provided by RedHat.</li> </ul> </section> <section id="version-2-7-2"> <h2>Version 2.7.2</h2> <p>Released 2014-01-10</p> <ul class="simple"> <li>Prefix loader was not forwarding the locals properly to inner loaders. This is now fixed.</li> <li>Security issue: Changed the default folder for the filesystem cache to be user specific and read and write protected on UNIX systems. See <a class="reference external" href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=734747">Debian bug 734747</a> for more information.</li> </ul> </section> <section id="version-2-7-1"> <h2>Version 2.7.1</h2> <p>Released 2013-08-07</p> <ul class="simple"> <li>Fixed a bug with <code>call_filter</code> not working properly on environment and context filters.</li> <li>Fixed lack of Python 3 support for bytecode caches.</li> <li>Reverted support for defining blocks in included templates as this broke existing templates for users.</li> <li>Fixed some warnings with hashing of undefineds and nodes if Python is run with warnings for Python 3.</li> <li>Added support for properly hashing undefined objects.</li> <li>Fixed a bug with the title filter not working on already uppercase strings.</li> </ul> </section> <section id="version-2-7"> <h2>Version 2.7</h2> <p>Released 2013-05-20, codename Translation</p> <ul class="simple"> <li>Choice and prefix loaders now dispatch source and template lookup separately in order to work in combination with module loaders as advertised.</li> <li>Fixed filesizeformat.</li> <li>Added a non-silent option for babel extraction.</li> <li>Added <code>urlencode</code> filter that automatically quotes values for URL safe usage with utf-8 as only supported encoding. If applications want to change this encoding they can override the filter.</li> <li>Added <code>keep-trailing-newline</code> configuration to environments and templates to optionally preserve the final trailing newline.</li> <li>Accessing <code>last</code> on the loop context no longer causes the iterator to be consumed into a list.</li> <li>Python requirement changed: 2.6, 2.7 or &gt;= 3.3 are required now, supported by same source code, using the “six” compatibility library.</li> <li>Allow <code>contextfunction</code> and other decorators to be applied to <code>__call__</code>.</li> <li>Added support for changing from newline to different signs in the <code>wordwrap</code> filter.</li> <li>Added support for ignoring memcache errors silently.</li> <li>Added support for keeping the trailing newline in templates.</li> <li>Added finer grained support for stripping whitespace on the left side of blocks.</li> <li>Added <code>map</code>, <code>select</code>, <code>reject</code>, <code>selectattr</code> and <code>rejectattr</code> filters.</li> <li>Added support for <code>loop.depth</code> to figure out how deep inside a recursive loop the code is.</li> <li>Disabled py_compile for pypy and python 3.</li> </ul> </section> <section id="version-2-6"> <h2>Version 2.6</h2> <p>Released 2011-07-24, codename Convolution</p> <ul class="simple"> <li>Internal attributes now raise an internal attribute error now instead of returning an undefined. This fixes problems when passing undefined objects to Python semantics expecting APIs.</li> <li>Traceback support now works properly for PyPy. (Tested with 1.4)</li> <li>Implemented operator intercepting for sandboxed environments. This allows application developers to disable builtin operators for better security. (For instance limit the mathematical operators to actual integers instead of longs)</li> <li>Groupby filter now supports dotted notation for grouping by attributes of attributes.</li> <li>Scoped blocks now properly treat toplevel assignments and imports. Previously an import suddenly “disappeared” in a scoped block.</li> <li>Automatically detect newer Python interpreter versions before loading code from bytecode caches to prevent segfaults on invalid opcodes. The segfault in earlier Jinja versions here was not a Jinja bug but a limitation in the underlying Python interpreter. If you notice Jinja segfaulting in earlier versions after an upgrade of the Python interpreter you don’t have to upgrade, it’s enough to flush the bytecode cache. This just no longer makes this necessary, Jinja will automatically detect these cases now.</li> <li>The sum filter can now sum up values by attribute. This is a backwards incompatible change. The argument to the filter previously was the optional starting index which defaults to zero. This now became the second argument to the function because it’s rarely used.</li> <li>Like sum, sort now also makes it possible to order items by attribute.</li> <li>Like sum and sort, join now also is able to join attributes of objects as string.</li> <li>The internal eval context now has a reference to the environment.</li> <li>Added a mapping test to see if an object is a dict or an object with a similar interface.</li> </ul> </section> <section id="version-2-5-5"> <h2>Version 2.5.5</h2> <p>Released 2010-10-18</p> <ul class="simple"> <li>Built documentation is no longer part of release.</li> </ul> </section> <section id="version-2-5-4"> <h2>Version 2.5.4</h2> <p>Released 2010-10-17</p> <ul class="simple"> <li>Fixed extensions not loading properly with overlays.</li> <li>Work around a bug in cpython for the debugger that causes segfaults on 64bit big-endian architectures.</li> </ul> </section> <section id="version-2-5-3"> <h2>Version 2.5.3</h2> <p>Released 2010-10-17</p> <ul class="simple"> <li>Fixed an operator precedence error introduced in 2.5.2. Statements like “-foo.bar” had their implicit parentheses applied around the first part of the expression (“(-foo).bar”) instead of the more correct “-(foo.bar)”.</li> </ul> </section> <section id="version-2-5-2"> <h2>Version 2.5.2</h2> <p>Released 2010-08-18</p> <ul class="simple"> <li>Improved setup.py script to better work with assumptions people might still have from it (<code>--with-speedups</code>).</li> <li>Fixed a packaging error that excluded the new debug support.</li> </ul> </section> <section id="version-2-5-1"> <h2>Version 2.5.1</h2> <p>Released 2010-08-17</p> <ul class="simple"> <li>StopIteration exceptions raised by functions called from templates are now intercepted and converted to undefineds. This solves a lot of debugging grief. (StopIteration is used internally to abort template execution)</li> <li>Improved performance of macro calls slightly.</li> <li>Babel extraction can now properly extract newstyle gettext calls.</li> <li>Using the variable <code>num</code> in newstyle gettext for something else than the pluralize count will no longer raise a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.11)"><code>KeyError</code></a>.</li> <li>Removed builtin markup class and switched to markupsafe. For backwards compatibility the pure Python implementation still exists but is pulled from markupsafe by the Jinja developers. The debug support went into a separate feature called “debugsupport” and is disabled by default because it is only relevant for Python 2.4</li> <li>Fixed an issue with unary operators having the wrong precedence.</li> </ul> </section> <section id="version-2-5"> <h2>Version 2.5</h2> <p>Released 2010-05-29, codename Incoherence</p> <ul class="simple"> <li>Improved the sort filter (should have worked like this for a long time) by adding support for case insensitive searches.</li> <li>Fixed a bug for getattribute constant folding.</li> <li>Support for newstyle gettext translations which result in a nicer in-template user interface and more consistent catalogs.</li> <li>It’s now possible to register extensions after an environment was created.</li> </ul> </section> <section id="version-2-4-1"> <h2>Version 2.4.1</h2> <p>Released 2010-04-20</p> <ul class="simple"> <li>Fixed an error reporting bug for undefined.</li> </ul> </section> <section id="version-2-4"> <h2>Version 2.4</h2> <p>Released 2010-04-13, codename Correlation</p> <ul class="simple"> <li>The environment template loading functions now transparently pass through a template object if it was passed to it. This makes it possible to import or extend from a template object that was passed to the template.</li> <li>Added a <code>ModuleLoader</code> that can load templates from precompiled sources. The environment now features a method to compile the templates from a configured loader into a zip file or folder.</li> <li>The _speedups C extension now supports Python 3.</li> <li>Added support for autoescaping toggling sections and support for evaluation contexts.</li> <li>Extensions have a priority now.</li> </ul> </section> <section id="version-2-3-1"> <h2>Version 2.3.1</h2> <p>Released 2010-02-19</p> <ul class="simple"> <li>Fixed an error reporting bug on all python versions</li> <li>Fixed an error reporting bug on Python 2.4</li> </ul> </section> <section id="version-2-3"> <h2>Version 2.3</h2> <p>Released 2010-02-10, codename 3000 Pythons</p> <ul class="simple"> <li>Fixes issue with code generator that causes unbound variables to be generated if set was used in if-blocks and other small identifier problems.</li> <li>Include tags are now able to select between multiple templates and take the first that exists, if a list of templates is given.</li> <li>Fixed a problem with having call blocks in outer scopes that have an argument that is also used as local variable in an inner frame <a class="reference external" href="https://github.com/pallets/jinja/issues/360">#360</a>.</li> <li>Greatly improved error message reporting <a class="reference external" href="https://github.com/pallets/jinja/pull/339">#339</a>
</li> <li>Implicit tuple expressions can no longer be totally empty. This change makes <code>{% if %}</code> a syntax error now. <a class="reference external" href="https://github.com/pallets/jinja/issues/364">#364</a>
</li> <li>Added support for translator comments if extracted via babel.</li> <li>Added with-statement extension.</li> <li>Experimental Python 3 support.</li> </ul> </section> <section id="version-2-2-1"> <h2>Version 2.2.1</h2> <p>Released 2009-09-14</p> <ul class="simple"> <li>Fixes some smaller problems for Jinja on Jython.</li> </ul> </section> <section id="version-2-2"> <h2>Version 2.2</h2> <p>Released 2009-09-13, codename Kong</p> <ul class="simple"> <li>Include statements can now be marked with <code>ignore missing</code> to skip non existing templates.</li> <li>Priority of <code>not</code> raised. It’s now possible to write <code>not foo in
bar</code> as an alias to <code>foo not in bar</code> like in python. Previously the grammar required parentheses (<code>not (foo in bar)</code>) which was odd.</li> <li>Fixed a bug that caused syntax errors when defining macros or using the <code>{% call %}</code> tag inside loops.</li> <li>Fixed a bug in the parser that made <code>{{ foo[1, 2] }}</code> impossible.</li> <li>Made it possible to refer to names from outer scopes in included templates that were unused in the callers frame <a class="reference external" href="https://github.com/pallets/jinja/issues/327">#327</a>
</li> <li>Fixed a bug that caused internal errors if names where used as iteration variable and regular variable <em>after</em> the loop if that variable was unused <em>before</em> the loop. <a class="reference external" href="https://github.com/pallets/jinja/pull/331">#331</a>
</li> <li>Added support for optional <code>scoped</code> modifier to blocks.</li> <li>Added support for line-comments.</li> <li>Added the <code>meta</code> module.</li> <li>Renamed (undocumented) attribute “overlay” to “overlayed” on the environment because it was clashing with a method of the same name.</li> <li>Speedup extension is now disabled by default.</li> </ul> </section> <section id="version-2-1-1"> <h2>Version 2.1.1</h2> <p>Released 2008-12-25</p> <ul class="simple"> <li>Fixed a translation error caused by looping over empty recursive loops.</li> </ul> </section> <section id="version-2-1"> <h2>Version 2.1</h2> <p>Released 2008-11-23, codename Yasuzō</p> <ul class="simple"> <li>Fixed a bug with nested loops and the special loop variable. Before the change an inner loop overwrote the loop variable from the outer one after iteration.</li> <li>Fixed a bug with the i18n extension that caused the explicit pluralization block to look up the wrong variable.</li> <li>Fixed a limitation in the lexer that made <code>{{ foo.0.0 }}</code> impossible.</li> <li>Index based subscribing of variables with a constant value returns an undefined object now instead of raising an index error. This was a bug caused by eager optimizing.</li> <li>The i18n extension looks up <code>foo.ugettext</code> now followed by <code>foo.gettext</code> if an translations object is installed. This makes dealing with custom translations classes easier.</li> <li>Fixed a confusing behavior with conditional extending. loops were partially executed under some conditions even though they were not part of a visible area.</li> <li>Added <code>sort</code> filter that works like <code>dictsort</code> but for arbitrary sequences.</li> <li>Fixed a bug with empty statements in macros.</li> <li>Implemented a bytecode cache system.</li> <li>The template context is now weakref-able</li> <li>Inclusions and imports “with context” forward all variables now, not only the initial context.</li> <li>Added a cycle helper called <code>cycler</code>.</li> <li>Added a joining helper called <code>joiner</code>.</li> <li>Added a <code>compile_expression</code> method to the environment that allows compiling of Jinja expressions into callable Python objects.</li> <li>Fixed an escaping bug in urlize</li> </ul> </section> <section id="version-2-0"> <h2>Version 2.0</h2> <p>Released 2008-07-17, codename Jinjavitus</p> <ul class="simple"> <li>The subscribing of objects (looking up attributes and items) changed from slightly. It’s now possible to give attributes or items a higher priority by either using dot-notation lookup or the bracket syntax. This also changed the AST slightly. <code>Subscript</code> is gone and was replaced with <code>Getitem</code> and <code>Getattr</code>.</li> <li>Added support for preprocessing and token stream filtering for extensions. This would allow extensions to allow simplified gettext calls in template data and something similar.</li> <li>Added <code>TemplateStream.dump</code>.</li> <li>Added missing support for implicit string literal concatenation. <code>{{ "foo" "bar" }}</code> is equivalent to <code>{{ "foobar" }}</code>
</li> <li>
<code>else</code> is optional for conditional expressions. If not given it evaluates to <code>false</code>.</li> <li>Improved error reporting for undefined values by providing a position.</li> <li>
<code>filesizeformat</code> filter uses decimal prefixes now per default and can be set to binary mode with the second parameter.</li> <li>Fixed bug in finalizer</li> </ul> </section> <section id="version-2-0rc1"> <h2>Version 2.0rc1</h2> <p>Released 2008-06-09</p> <ul class="simple"> <li>First release of Jinja 2.</li> </ul> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2007&ndash;2021 Pallets<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://jinja.palletsprojects.com/en/3.1.x/changes/" class="_attribution-link">https://jinja.palletsprojects.com/en/3.1.x/changes/</a>
  </p>
</div>
