<h1>Template Designer Documentation</h1> <p>This document describes the syntax and semantics of the template engine and will be most useful as reference to those creating Jinja templates. As the template engine is very flexible, the configuration from the application can be slightly different from the code presented here in terms of delimiters and behavior of undefined values.</p> <section id="synopsis"> <h2>Synopsis</h2> <p>A Jinja template is simply a text file. Jinja can generate any text-based format (HTML, XML, CSV, LaTeX, etc.). A Jinja template doesn’t need to have a specific extension: <code>.html</code>, <code>.xml</code>, or any other extension is just fine.</p> <p>A template contains <strong>variables</strong> and/or <strong>expressions</strong>, which get replaced with values when a template is <em>rendered</em>; and <strong>tags</strong>, which control the logic of the template. The template syntax is heavily inspired by Django and Python.</p> <p>Below is a minimal template that illustrates a few basics using the default Jinja configuration. We will cover the details later in this document:</p> <pre data-language="html+jinja">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;title&gt;My Webpage&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;ul id="navigation"&gt;
    {% for item in navigation %}
        &lt;li&gt;&lt;a href="{{ item.href }}.html"&gt;{{ item.caption }}&lt;/a&gt;&lt;/li&gt;
    {% endfor %}
    &lt;/ul&gt;

    &lt;h1&gt;My Webpage&lt;/h1&gt;
    {{ a_variable }}

    {# a comment #}
&lt;/body&gt;
&lt;/html&gt;
</pre> <p>The following example shows the default configuration settings. An application developer can change the syntax configuration from <code>{% foo %}</code> to <code>&lt;% foo
%&gt;</code>, or something similar.</p> <p>There are a few kinds of delimiters. The default Jinja delimiters are configured as follows:</p> <ul class="simple"> <li>
<code>{% ... %}</code> for <a class="reference internal" href="#list-of-control-structures"><span class="std std-ref">Statements</span></a>
</li> <li>
<code>{{ ... }}</code> for <a class="reference internal" href="#expressions"><span class="std std-ref">Expressions</span></a> to print to the template output</li> <li>
<code>{# ... #}</code> for <a class="reference internal" href="#comments"><span class="std std-ref">Comments</span></a> not included in the template output</li> </ul> <p><a class="reference internal" href="#line-statements"><span class="std std-ref">Line Statements and Comments</span></a> are also possible, though they don’t have default prefix characters. To use them, set <code>line_statement_prefix</code> and <code>line_comment_prefix</code> when creating the <a class="reference internal" href="../api/index.html#jinja2.Environment" title="jinja2.Environment"><code>Environment</code></a>.</p> <section id="template-file-extension"> <h3>Template File Extension</h3> <p>As stated above, any file can be loaded as a template, regardless of file extension. Adding a <code>.jinja</code> extension, like <code>user.html.jinja</code> may make it easier for some IDEs or editor plugins, but is not required. Autoescaping, introduced later, can be applied based on file extension, so you’ll need to take the extra suffix into account in that case.</p> <p>Another good heuristic for identifying templates is that they are in a <code>templates</code> folder, regardless of extension. This is a common layout for projects.</p> </section> </section> <section id="variables"> <h2 id="id1">Variables</h2> <p>Template variables are defined by the context dictionary passed to the template.</p> <p>You can mess around with the variables in templates provided they are passed in by the application. Variables may have attributes or elements on them you can access too. What attributes a variable has depends heavily on the application providing that variable.</p> <p>You can use a dot (<code>.</code>) to access attributes of a variable in addition to the standard Python <code>__getitem__</code> “subscript” syntax (<code>[]</code>).</p> <p>The following lines do the same thing:</p> <pre data-language="html+jinja">{{ foo.bar }}
{{ foo['bar'] }}
</pre> <p>It’s important to know that the outer double-curly braces are <em>not</em> part of the variable, but the print statement. If you access variables inside tags don’t put the braces around them.</p> <p>If a variable or attribute does not exist, you will get back an undefined value. What you can do with that kind of value depends on the application configuration: the default behavior is to evaluate to an empty string if printed or iterated over, and to fail for every other operation.</p> <div class="admonition-implementation admonition" id="notes-on-subscriptions"> <p class="admonition-title">Implementation</p> <p>For the sake of convenience, <code>foo.bar</code> in Jinja does the following things on the Python layer:</p> <ul class="simple"> <li>check for an attribute called <code>bar</code> on <code>foo</code> (<code>getattr(foo, 'bar')</code>)</li> <li>if there is not, check for an item <code>'bar'</code> in <code>foo</code> (<code>foo.__getitem__('bar')</code>)</li> <li>if there is not, return an undefined object.</li> </ul> <p><code>foo['bar']</code> works mostly the same with a small difference in sequence:</p> <ul class="simple"> <li>check for an item <code>'bar'</code> in <code>foo</code>. (<code>foo.__getitem__('bar')</code>)</li> <li>if there is not, check for an attribute called <code>bar</code> on <code>foo</code>. (<code>getattr(foo, 'bar')</code>)</li> <li>if there is not, return an undefined object.</li> </ul> <p>This is important if an object has an item and attribute with the same name. Additionally, the <code>attr()</code> filter only looks up attributes.</p> </div> </section> <section id="filters"> <h2 id="id2">Filters</h2> <p>Variables can be modified by <strong>filters</strong>. Filters are separated from the variable by a pipe symbol (<code>|</code>) and may have optional arguments in parentheses. Multiple filters can be chained. The output of one filter is applied to the next.</p> <p>For example, <code>{{ name|striptags|title }}</code> will remove all HTML Tags from variable <code>name</code> and title-case the output (<code>title(striptags(name))</code>).</p> <p>Filters that accept arguments have parentheses around the arguments, just like a function call. For example: <code>{{ listx|join(', ') }}</code> will join a list with commas (<code>str.join(', ', listx)</code>).</p> <p>The <a class="reference internal" href="#builtin-filters"><span class="std std-ref">List of Builtin Filters</span></a> below describes all the builtin filters.</p> </section> <section id="tests"> <h2 id="id3">Tests</h2> <p>Beside filters, there are also so-called “tests” available. Tests can be used to test a variable against a common expression. To test a variable or expression, you add <code>is</code> plus the name of the test after the variable. For example, to find out if a variable is defined, you can do <code>name is defined</code>, which will then return true or false depending on whether <code>name</code> is defined in the current template context.</p> <p>Tests can accept arguments, too. If the test only takes one argument, you can leave out the parentheses. For example, the following two expressions do the same thing:</p> <pre data-language="html+jinja">{% if loop.index is divisibleby 3 %}
{% if loop.index is divisibleby(3) %}
</pre> <p>The <a class="reference internal" href="#builtin-tests"><span class="std std-ref">List of Builtin Tests</span></a> below describes all the builtin tests.</p> </section> <section id="comments"> <h2 id="id4">Comments</h2> <p>To comment-out part of a line in a template, use the comment syntax which is by default set to <code>{# ... #}</code>. This is useful to comment out parts of the template for debugging or to add information for other template designers or yourself:</p> <pre data-language="html+jinja">{# note: commented-out template because we no longer use this
    {% for user in users %}
        ...
    {% endfor %}
#}
</pre> </section> <section id="whitespace-control"> <h2>Whitespace Control</h2> <p>In the default configuration:</p> <ul class="simple"> <li>a single trailing newline is stripped if present</li> <li>other whitespace (spaces, tabs, newlines etc.) is returned unchanged</li> </ul> <p>If an application configures Jinja to <code>trim_blocks</code>, the first newline after a template tag is removed automatically (like in PHP). The <code>lstrip_blocks</code> option can also be set to strip tabs and spaces from the beginning of a line to the start of a block. (Nothing will be stripped if there are other characters before the start of the block.)</p> <p>With both <code>trim_blocks</code> and <code>lstrip_blocks</code> enabled, you can put block tags on their own lines, and the entire block line will be removed when rendered, preserving the whitespace of the contents. For example, without the <code>trim_blocks</code> and <code>lstrip_blocks</code> options, this template:</p> <pre data-language="html+jinja">&lt;div&gt;
    {% if True %}
        yay
    {% endif %}
&lt;/div&gt;
</pre> <p>gets rendered with blank lines inside the div:</p> <pre data-language="html+jinja">&lt;div&gt;

        yay

&lt;/div&gt;
</pre> <p>But with both <code>trim_blocks</code> and <code>lstrip_blocks</code> enabled, the template block lines are removed and other whitespace is preserved:</p> <pre data-language="html+jinja">&lt;div&gt;
        yay
&lt;/div&gt;
</pre> <p>You can manually disable the <code>lstrip_blocks</code> behavior by putting a plus sign (<code>+</code>) at the start of a block:</p> <pre data-language="html+jinja">&lt;div&gt;
        {%+ if something %}yay{% endif %}
&lt;/div&gt;
</pre> <p>Similarly, you can manually disable the <code>trim_blocks</code> behavior by putting a plus sign (<code>+</code>) at the end of a block:</p> <pre data-language="html+jinja">&lt;div&gt;
    {% if something +%}
        yay
    {% endif %}
&lt;/div&gt;
</pre> <p>You can also strip whitespace in templates by hand. If you add a minus sign (<code>-</code>) to the start or end of a block (e.g. a <a class="reference internal" href="#for-loop"><span class="std std-ref">For</span></a> tag), a comment, or a variable expression, the whitespaces before or after that block will be removed:</p> <pre data-language="html+jinja">{% for item in seq -%}
    {{ item }}
{%- endfor %}
</pre> <p>This will yield all elements without whitespace between them. If <code>seq</code> was a list of numbers from <code>1</code> to <code>9</code>, the output would be <code>123456789</code>.</p> <p>If <a class="reference internal" href="#line-statements"><span class="std std-ref">Line Statements</span></a> are enabled, they strip leading whitespace automatically up to the beginning of the line.</p> <p>By default, Jinja also removes trailing newlines. To keep single trailing newlines, configure Jinja to <code>keep_trailing_newline</code>.</p> <div class="admonition-note admonition"> <p class="admonition-title">Note</p> <p>You must not add whitespace between the tag and the minus sign.</p> <p><strong>valid</strong>:</p> <pre data-language="html+jinja">{%- if foo -%}...{% endif %}
</pre> <p><strong>invalid</strong>:</p> <pre data-language="html+jinja">{% - if foo - %}...{% endif %}
</pre> </div> </section> <section id="escaping"> <h2>Escaping</h2> <p>It is sometimes desirable – even necessary – to have Jinja ignore parts it would otherwise handle as variables or blocks. For example, if, with the default syntax, you want to use <code>{{</code> as a raw string in a template and not start a variable, you have to use a trick.</p> <p>The easiest way to output a literal variable delimiter (<code>{{</code>) is by using a variable expression:</p> <pre data-language="html+jinja">{{ '{{' }}
</pre> <p>For bigger sections, it makes sense to mark a block <code>raw</code>. For example, to include example Jinja syntax in a template, you can use this snippet:</p> <pre data-language="html+jinja">{% raw %}
    &lt;ul&gt;
    {% for item in seq %}
        &lt;li&gt;{{ item }}&lt;/li&gt;
    {% endfor %}
    &lt;/ul&gt;
{% endraw %}
</pre> <div class="admonition-note admonition"> <p class="admonition-title">Note</p> <p>Minus sign at the end of <code>{% raw -%}</code> tag cleans all the spaces and newlines preceding the first character of your raw data.</p> </div> </section> <section id="line-statements"> <h2 id="id5">Line Statements</h2> <p>If line statements are enabled by the application, it’s possible to mark a line as a statement. For example, if the line statement prefix is configured to <code>#</code>, the following two examples are equivalent:</p> <pre data-language="html+jinja">&lt;ul&gt;
# for item in seq
    &lt;li&gt;{{ item }}&lt;/li&gt;
# endfor
&lt;/ul&gt;

&lt;ul&gt;
{% for item in seq %}
    &lt;li&gt;{{ item }}&lt;/li&gt;
{% endfor %}
&lt;/ul&gt;
</pre> <p>The line statement prefix can appear anywhere on the line as long as no text precedes it. For better readability, statements that start a block (such as <code>for</code>, <code>if</code>, <code>elif</code> etc.) may end with a colon:</p> <pre data-language="html+jinja"># for item in seq:
    ...
# endfor
</pre> <div class="admonition-note admonition"> <p class="admonition-title">Note</p> <p>Line statements can span multiple lines if there are open parentheses, braces or brackets:</p> <pre data-language="html+jinja">&lt;ul&gt;
# for href, caption in [('index.html', 'Index'),
                        ('about.html', 'About')]:
    &lt;li&gt;&lt;a href="{{ href }}.html"&gt;{{ caption }}&lt;/a&gt;&lt;/li&gt;
# endfor
&lt;/ul&gt;
</pre> </div> <p>Since Jinja 2.2, line-based comments are available as well. For example, if the line-comment prefix is configured to be <code>##</code>, everything from <code>##</code> to the end of the line is ignored (excluding the newline sign):</p> <pre data-language="html+jinja"># for item in seq:
    &lt;li&gt;{{ item }}&lt;/li&gt;     ## this comment is ignored
# endfor
</pre> </section> <section id="template-inheritance"> <h2 id="id6">Template Inheritance</h2> <p>The most powerful part of Jinja is template inheritance. Template inheritance allows you to build a base “skeleton” template that contains all the common elements of your site and defines <strong>blocks</strong> that child templates can override.</p> <p>Sounds complicated but is very basic. It’s easiest to understand it by starting with an example.</p> <section id="base-template"> <h3>Base Template</h3> <p>This template, which we’ll call <code>base.html</code>, defines a simple HTML skeleton document that you might use for a simple two-column page. It’s the job of “child” templates to fill the empty blocks with content:</p> <pre data-language="html+jinja">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    {% block head %}
    &lt;link rel="stylesheet" href="style.css.html" /&gt;
    &lt;title&gt;{% block title %}{% endblock %} - My Webpage&lt;/title&gt;
    {% endblock %}
&lt;/head&gt;
&lt;body&gt;
    &lt;div id="content"&gt;{% block content %}{% endblock %}&lt;/div&gt;
    &lt;div id="footer"&gt;
        {% block footer %}
        &amp;copy; Copyright 2008 by &lt;a href="http://domain.invalid/"&gt;you&lt;/a&gt;.
        {% endblock %}
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre> <p>In this example, the <code>{% block %}</code> tags define four blocks that child templates can fill in. All the <code>block</code> tag does is tell the template engine that a child template may override those placeholders in the template.</p> <p><code>block</code> tags can be inside other blocks such as <code>if</code>, but they will always be executed regardless of if the <code>if</code> block is actually rendered.</p> </section> <section id="child-template"> <h3>Child Template</h3> <p>A child template might look like this:</p> <pre data-language="html+jinja">{% extends "base.html" %}
{% block title %}Index{% endblock %}
{% block head %}
    {{ super() }}
    &lt;style type="text/css"&gt;
        .important { color: #336699; }
    &lt;/style&gt;
{% endblock %}
{% block content %}
    &lt;h1&gt;Index&lt;/h1&gt;
    &lt;p class="important"&gt;
      Welcome to my awesome homepage.
    &lt;/p&gt;
{% endblock %}
</pre> <p>The <code>{% extends %}</code> tag is the key here. It tells the template engine that this template “extends” another template. When the template system evaluates this template, it first locates the parent. The extends tag should be the first tag in the template. Everything before it is printed out normally and may cause confusion. For details about this behavior and how to take advantage of it, see <a class="reference internal" href="../tricks/index.html#null-default-fallback"><span class="std std-ref">Null-Default Fallback</span></a>. Also a block will always be filled in regardless of whether the surrounding condition is evaluated to be true or false.</p> <p>The filename of the template depends on the template loader. For example, the <a class="reference internal" href="../api/index.html#jinja2.FileSystemLoader" title="jinja2.FileSystemLoader"><code>FileSystemLoader</code></a> allows you to access other templates by giving the filename. You can access templates in subdirectories with a slash:</p> <pre data-language="html+jinja">{% extends "layout/default.html" %}
</pre> <p>But this behavior can depend on the application embedding Jinja. Note that since the child template doesn’t define the <code>footer</code> block, the value from the parent template is used instead.</p> <p>You can’t define multiple <code>{% block %}</code> tags with the same name in the same template. This limitation exists because a block tag works in “both” directions. That is, a block tag doesn’t just provide a placeholder to fill - it also defines the content that fills the placeholder in the <em>parent</em>. If there were two similarly-named <code>{% block %}</code> tags in a template, that template’s parent wouldn’t know which one of the blocks’ content to use.</p> <p>If you want to print a block multiple times, you can, however, use the special <code>self</code> variable and call the block with that name:</p> <pre data-language="html+jinja">&lt;title&gt;{% block title %}{% endblock %}&lt;/title&gt;
&lt;h1&gt;{{ self.title() }}&lt;/h1&gt;
{% block body %}{% endblock %}
</pre> </section> <section id="super-blocks"> <h3>Super Blocks</h3> <p>It’s possible to render the contents of the parent block by calling <code>super()</code>. This gives back the results of the parent block:</p> <pre data-language="html+jinja">{% block sidebar %}
    &lt;h3&gt;Table Of Contents&lt;/h3&gt;
    ...
    {{ super() }}
{% endblock %}
</pre> </section> <section id="nesting-extends"> <h3>Nesting extends</h3> <p>In the case of multiple levels of <code>{% extends %}</code>, <code>super</code> references may be chained (as in <code>super.super()</code>) to skip levels in the inheritance tree.</p> <p>For example:</p> <pre data-language="html+jinja"># parent.tmpl
body: {% block body %}Hi from parent.{% endblock %}

# child.tmpl
{% extends "parent.tmpl" %}
{% block body %}Hi from child. {{ super() }}{% endblock %}

# grandchild1.tmpl
{% extends "child.tmpl" %}
{% block body %}Hi from grandchild1.{% endblock %}

# grandchild2.tmpl
{% extends "child.tmpl" %}
{% block body %}Hi from grandchild2. {{ super.super() }} {% endblock %}
</pre> <p>Rendering <code>child.tmpl</code> will give <code>body: Hi from child. Hi from parent.</code></p> <p>Rendering <code>grandchild1.tmpl</code> will give <code>body: Hi from grandchild1.</code></p> <p>Rendering <code>grandchild2.tmpl</code> will give <code>body: Hi from grandchild2. Hi from parent.</code></p> </section> <section id="named-block-end-tags"> <h3>Named Block End-Tags</h3> <p>Jinja allows you to put the name of the block after the end tag for better readability:</p> <pre data-language="html+jinja">{% block sidebar %}
    {% block inner_sidebar %}
        ...
    {% endblock inner_sidebar %}
{% endblock sidebar %}
</pre> <p>However, the name after the <code>endblock</code> word must match the block name.</p> </section> <section id="block-nesting-and-scope"> <h3>Block Nesting and Scope</h3> <p>Blocks can be nested for more complex layouts. However, per default blocks may not access variables from outer scopes:</p> <pre data-language="html+jinja">{% for item in seq %}
    &lt;li&gt;{% block loop_item %}{{ item }}{% endblock %}&lt;/li&gt;
{% endfor %}
</pre> <p>This example would output empty <code>&lt;li&gt;</code> items because <code>item</code> is unavailable inside the block. The reason for this is that if the block is replaced by a child template, a variable would appear that was not defined in the block or passed to the context.</p> <p>Starting with Jinja 2.2, you can explicitly specify that variables are available in a block by setting the block to “scoped” by adding the <code>scoped</code> modifier to a block declaration:</p> <pre data-language="html+jinja">{% for item in seq %}
    &lt;li&gt;{% block loop_item scoped %}{{ item }}{% endblock %}&lt;/li&gt;
{% endfor %}
</pre> <p>When overriding a block, the <code>scoped</code> modifier does not have to be provided.</p> </section> <section id="required-blocks"> <h3>Required Blocks</h3> <p>Blocks can be marked as <code>required</code>. They must be overridden at some point, but not necessarily by the direct child template. Required blocks may only contain space and comments, and they cannot be rendered directly.</p> <div class="literal-block-wrapper docutils container" id="id20"> <div class="code-block-caption"><span class="caption-text"><code>page.txt</code></span></div> <pre data-language="jinja">{% block body required %}{% endblock %}
</pre> </div> <div class="literal-block-wrapper docutils container" id="id21"> <div class="code-block-caption"><span class="caption-text"><code>issue.txt</code></span></div> <pre data-language="jinja">{% extends "page.txt" %}
</pre> </div> <div class="literal-block-wrapper docutils container" id="id22"> <div class="code-block-caption"><span class="caption-text"><code>bug_report.txt</code></span></div> <pre data-language="jinja">{% extends "issue.txt" %}
{% block body %}Provide steps to demonstrate the bug.{% endblock %}
</pre> </div> <p>Rendering <code>page.txt</code> or <code>issue.txt</code> will raise <code>TemplateRuntimeError</code> because they don’t override the <code>body</code> block. Rendering <code>bug_report.txt</code> will succeed because it does override the block.</p> <p>When combined with <code>scoped</code>, the <code>required</code> modifier must be placed <em>after</em> the scoped modifier. Here are some valid examples:</p> <pre data-language="jinja">{% block body scoped %}{% endblock %}
{% block body required %}{% endblock %}
{% block body scoped required %}{% endblock %}
</pre> </section> <section id="template-objects"> <h3>Template Objects</h3> <p><code>extends</code>, <code>include</code>, and <code>import</code> can take a template object instead of the name of a template to load. This could be useful in some advanced situations, since you can use Python code to load a template first and pass it in to <code>render</code>.</p> <pre data-language="python">if debug_mode:
    layout = env.get_template("debug_layout.html")
else:
    layout = env.get_template("layout.html")

user_detail = env.get_template("user/detail.html")
return user_detail.render(layout=layout)
</pre> <pre data-language="jinja">{% extends layout %}
</pre> <p>Note how <code>extends</code> is passed the variable with the template object that was passed to <code>render</code>, instead of a string.</p> </section> </section> <section id="html-escaping"> <h2>HTML Escaping</h2> <p>When generating HTML from templates, there’s always a risk that a variable will include characters that affect the resulting HTML. There are two approaches:</p> <ol class="loweralpha simple"> <li>manually escaping each variable; or</li> <li>automatically escaping everything by default.</li> </ol> <p>Jinja supports both. What is used depends on the application configuration. The default configuration is no automatic escaping; for various reasons:</p> <ul class="simple"> <li>Escaping everything except for safe values will also mean that Jinja is escaping variables known to not include HTML (e.g. numbers, booleans) which can be a huge performance hit.</li> <li>The information about the safety of a variable is very fragile. It could happen that by coercing safe and unsafe values, the return value is double-escaped HTML.</li> </ul> <section id="working-with-manual-escaping"> <h3>Working with Manual Escaping</h3> <p>If manual escaping is enabled, it’s <strong>your</strong> responsibility to escape variables if needed. What to escape? If you have a variable that <em>may</em> include any of the following chars (<code>&gt;</code>, <code>&lt;</code>, <code>&amp;</code>, or <code>"</code>) you <strong>SHOULD</strong> escape it unless the variable contains well-formed and trusted HTML. Escaping works by piping the variable through the <code>|e</code> filter:</p> <pre data-language="html+jinja">{{ user.username|e }}
</pre> </section> <section id="working-with-automatic-escaping"> <h3>Working with Automatic Escaping</h3> <p>When automatic escaping is enabled, everything is escaped by default except for values explicitly marked as safe. Variables and expressions can be marked as safe either in:</p> <ol class="loweralpha simple"> <li>The context dictionary by the application with <code>markupsafe.Markup</code>
</li> <li>The template, with the <code>|safe</code> filter.</li> </ol> <p>If a string that you marked safe is passed through other Python code that doesn’t understand that mark, it may get lost. Be aware of when your data is marked safe and how it is processed before arriving at the template.</p> <p>If a value has been escaped but is not marked safe, auto-escaping will still take place and result in double-escaped characters. If you know you have data that is already safe but not marked, be sure to wrap it in <code>Markup</code> or use the <code>|safe</code> filter.</p> <p>Jinja functions (macros, <code>super</code>, <code>self.BLOCKNAME</code>) always return template data that is marked as safe.</p> <p>String literals in templates with automatic escaping are considered unsafe because native Python strings are not safe.</p> </section> </section> <section id="list-of-control-structures"> <h2 id="id7">List of Control Structures</h2> <p>A control structure refers to all those things that control the flow of a program - conditionals (i.e. if/elif/else), for-loops, as well as things like macros and blocks. With the default syntax, control structures appear inside <code>{% ... %}</code> blocks.</p> <section id="for"> <h3 id="for-loop">For</h3> <p>Loop over each item in a sequence. For example, to display a list of users provided in a variable called <code>users</code>:</p> <pre data-language="html+jinja">&lt;h1&gt;Members&lt;/h1&gt;
&lt;ul&gt;
{% for user in users %}
  &lt;li&gt;{{ user.username|e }}&lt;/li&gt;
{% endfor %}
&lt;/ul&gt;
</pre> <p>As variables in templates retain their object properties, it is possible to iterate over containers like <code>dict</code>:</p> <pre data-language="html+jinja">&lt;dl&gt;
{% for key, value in my_dict.items() %}
    &lt;dt&gt;{{ key|e }}&lt;/dt&gt;
    &lt;dd&gt;{{ value|e }}&lt;/dd&gt;
{% endfor %}
&lt;/dl&gt;
</pre> <p>Python dicts may not be in the order you want to display them in. If order matters, use the <code>|dictsort</code> filter.</p> <pre data-language="jinja">&lt;dl&gt;
{% for key, value in my_dict | dictsort %}
    &lt;dt&gt;{{ key|e }}&lt;/dt&gt;
    &lt;dd&gt;{{ value|e }}&lt;/dd&gt;
{% endfor %}
&lt;/dl&gt;
</pre> <p>Inside of a for-loop block, you can access some special variables:</p> <table class="docutils align-default"> <thead> <tr>
<th class="head"><p>Variable</p></th> <th class="head"><p>Description</p></th> </tr> </thead>  <tr>
<td><p><code>loop.index</code></p></td> <td><p>The current iteration of the loop. (1 indexed)</p></td> </tr> <tr>
<td><p><code>loop.index0</code></p></td> <td><p>The current iteration of the loop. (0 indexed)</p></td> </tr> <tr>
<td><p><code>loop.revindex</code></p></td> <td><p>The number of iterations from the end of the loop (1 indexed)</p></td> </tr> <tr>
<td><p><code>loop.revindex0</code></p></td> <td><p>The number of iterations from the end of the loop (0 indexed)</p></td> </tr> <tr>
<td><p><code>loop.first</code></p></td> <td><p>True if first iteration.</p></td> </tr> <tr>
<td><p><code>loop.last</code></p></td> <td><p>True if last iteration.</p></td> </tr> <tr>
<td><p><code>loop.length</code></p></td> <td><p>The number of items in the sequence.</p></td> </tr> <tr>
<td><p><code>loop.cycle</code></p></td> <td><p>A helper function to cycle between a list of sequences. See the explanation below.</p></td> </tr> <tr>
<td><p><code>loop.depth</code></p></td> <td><p>Indicates how deep in a recursive loop the rendering currently is. Starts at level 1</p></td> </tr> <tr>
<td><p><code>loop.depth0</code></p></td> <td><p>Indicates how deep in a recursive loop the rendering currently is. Starts at level 0</p></td> </tr> <tr>
<td><p><code>loop.previtem</code></p></td> <td><p>The item from the previous iteration of the loop. Undefined during the first iteration.</p></td> </tr> <tr>
<td><p><code>loop.nextitem</code></p></td> <td><p>The item from the following iteration of the loop. Undefined during the last iteration.</p></td> </tr> <tr>
<td><p><code>loop.changed(*val)</code></p></td> <td><p>True if previously called with a different value (or not called at all).</p></td> </tr>  </table> <p>Within a for-loop, it’s possible to cycle among a list of strings/variables each time through the loop by using the special <code>loop.cycle</code> helper:</p> <pre data-language="html+jinja">{% for row in rows %}
    &lt;li class="{{ loop.cycle('odd', 'even') }}"&gt;{{ row }}&lt;/li&gt;
{% endfor %}
</pre> <p>Since Jinja 2.1, an extra <code>cycle</code> helper exists that allows loop-unbound cycling. For more information, have a look at the <a class="reference internal" href="#builtin-globals"><span class="std std-ref">List of Global Functions</span></a>.</p> <p id="loop-filtering">Unlike in Python, it’s not possible to <code>break</code> or <code>continue</code> in a loop. You can, however, filter the sequence during iteration, which allows you to skip items. The following example skips all the users which are hidden:</p> <pre data-language="html+jinja">{% for user in users if not user.hidden %}
    &lt;li&gt;{{ user.username|e }}&lt;/li&gt;
{% endfor %}
</pre> <p>The advantage is that the special <code>loop</code> variable will count correctly; thus not counting the users not iterated over.</p> <p>If no iteration took place because the sequence was empty or the filtering removed all the items from the sequence, you can render a default block by using <code>else</code>:</p> <pre data-language="html+jinja">&lt;ul&gt;
{% for user in users %}
    &lt;li&gt;{{ user.username|e }}&lt;/li&gt;
{% else %}
    &lt;li&gt;&lt;em&gt;no users found&lt;/em&gt;&lt;/li&gt;
{% endfor %}
&lt;/ul&gt;
</pre> <p>Note that, in Python, <code>else</code> blocks are executed whenever the corresponding loop <strong>did not</strong> <code>break</code>. Since Jinja loops cannot <code>break</code> anyway, a slightly different behavior of the <code>else</code> keyword was chosen.</p> <p>It is also possible to use loops recursively. This is useful if you are dealing with recursive data such as sitemaps or RDFa. To use loops recursively, you basically have to add the <code>recursive</code> modifier to the loop definition and call the <code>loop</code> variable with the new iterable where you want to recurse.</p> <p>The following example implements a sitemap with recursive loops:</p> <pre data-language="html+jinja">&lt;ul class="sitemap"&gt;
{%- for item in sitemap recursive %}
    &lt;li&gt;&lt;a href="{{ item.href|e }}.html"&gt;{{ item.title }}&lt;/a&gt;
    {%- if item.children -%}
        &lt;ul class="submenu"&gt;{{ loop(item.children) }}&lt;/ul&gt;
    {%- endif %}&lt;/li&gt;
{%- endfor %}
&lt;/ul&gt;
</pre> <p>The <code>loop</code> variable always refers to the closest (innermost) loop. If we have more than one level of loops, we can rebind the variable <code>loop</code> by writing <code>{% set outer_loop = loop %}</code> after the loop that we want to use recursively. Then, we can call it using <code>{{ outer_loop(…) }}</code></p> <p>Please note that assignments in loops will be cleared at the end of the iteration and cannot outlive the loop scope. Older versions of Jinja had a bug where in some circumstances it appeared that assignments would work. This is not supported. See <a class="reference internal" href="#assignments"><span class="std std-ref">Assignments</span></a> for more information about how to deal with this.</p> <p>If all you want to do is check whether some value has changed since the last iteration or will change in the next iteration, you can use <code>previtem</code> and <code>nextitem</code>:</p> <pre data-language="html+jinja">{% for value in values %}
    {% if loop.previtem is defined and value &gt; loop.previtem %}
        The value just increased!
    {% endif %}
    {{ value }}
    {% if loop.nextitem is defined and loop.nextitem &gt; value %}
        The value will increase even more!
    {% endif %}
{% endfor %}
</pre> <p>If you only care whether the value changed at all, using <code>changed</code> is even easier:</p> <pre data-language="html+jinja">{% for entry in entries %}
    {% if loop.changed(entry.category) %}
        &lt;h2&gt;{{ entry.category }}&lt;/h2&gt;
    {% endif %}
    &lt;p&gt;{{ entry.message }}&lt;/p&gt;
{% endfor %}
</pre> </section> <section id="if"> <h3 id="id8">If</h3> <p>The <code>if</code> statement in Jinja is comparable with the Python if statement. In the simplest form, you can use it to test if a variable is defined, not empty and not false:</p> <pre data-language="html+jinja">{% if users %}
&lt;ul&gt;
{% for user in users %}
    &lt;li&gt;{{ user.username|e }}&lt;/li&gt;
{% endfor %}
&lt;/ul&gt;
{% endif %}
</pre> <p>For multiple branches, <code>elif</code> and <code>else</code> can be used like in Python. You can use more complex <a class="reference internal" href="#expressions"><span class="std std-ref">Expressions</span></a> there, too:</p> <pre data-language="html+jinja">{% if kenny.sick %}
    Kenny is sick.
{% elif kenny.dead %}
    You killed Kenny!  You bastard!!!
{% else %}
    Kenny looks okay --- so far
{% endif %}
</pre> <p>If can also be used as an <a class="reference internal" href="#if-expression"><span class="std std-ref">inline expression</span></a> and for <a class="reference internal" href="#loop-filtering"><span class="std std-ref">loop filtering</span></a>.</p> </section> <section id="macros"> <h3 id="id9">Macros</h3> <p>Macros are comparable with functions in regular programming languages. They are useful to put often used idioms into reusable functions to not repeat yourself (“DRY”).</p> <p>Here’s a small example of a macro that renders a form element:</p> <pre data-language="html+jinja">{% macro input(name, value='', type='text', size=20) -%}
    &lt;input type="{{ type }}" name="{{ name }}" value="{{
        value|e }}" size="{{ size }}"&gt;
{%- endmacro %}
</pre> <p>The macro can then be called like a function in the namespace:</p> <pre data-language="html+jinja">&lt;p&gt;{{ input('username') }}&lt;/p&gt;
&lt;p&gt;{{ input('password', type='password') }}&lt;/p&gt;
</pre> <p>If the macro was defined in a different template, you have to <a class="reference internal" href="#import"><span class="std std-ref">import</span></a> it first.</p> <p>Inside macros, you have access to three special variables:</p> <dl class="simple"> <dt>
<code>varargs</code> </dt>
<dd>
<p>If more positional arguments are passed to the macro than accepted by the macro, they end up in the special <code>varargs</code> variable as a list of values.</p> </dd> <dt>
<code>kwargs</code> </dt>
<dd>
<p>Like <code>varargs</code> but for keyword arguments. All unconsumed keyword arguments are stored in this special variable.</p> </dd> <dt>
<code>caller</code> </dt>
<dd>
<p>If the macro was called from a <a class="reference internal" href="#call"><span class="std std-ref">call</span></a> tag, the caller is stored in this variable as a callable macro.</p> </dd> </dl> <p>Macros also expose some of their internal details. The following attributes are available on a macro object:</p> <dl class="simple"> <dt>
<code>name</code> </dt>
<dd>
<p>The name of the macro. <code>{{ input.name }}</code> will print <code>input</code>.</p> </dd> <dt>
<code>arguments</code> </dt>
<dd>
<p>A tuple of the names of arguments the macro accepts.</p> </dd> <dt>
<code>catch_kwargs</code> </dt>
<dd>
<p>This is <code>true</code> if the macro accepts extra keyword arguments (i.e.: accesses the special <code>kwargs</code> variable).</p> </dd> <dt>
<code>catch_varargs</code> </dt>
<dd>
<p>This is <code>true</code> if the macro accepts extra positional arguments (i.e.: accesses the special <code>varargs</code> variable).</p> </dd> <dt>
<code>caller</code> </dt>
<dd>
<p>This is <code>true</code> if the macro accesses the special <code>caller</code> variable and may be called from a <a class="reference internal" href="#call"><span class="std std-ref">call</span></a> tag.</p> </dd> </dl> <p>If a macro name starts with an underscore, it’s not exported and can’t be imported.</p> <p>Due to how scopes work in Jinja, a macro in a child template does not override a macro in a parent template. The following will output “LAYOUT”, not “CHILD”.</p> <div class="literal-block-wrapper docutils container" id="id23"> <div class="code-block-caption"><span class="caption-text"><code>layout.txt</code></span></div> <pre data-language="jinja">{% macro foo() %}LAYOUT{% endmacro %}
{% block body %}{% endblock %}
</pre> </div> <div class="literal-block-wrapper docutils container" id="id24"> <div class="code-block-caption"><span class="caption-text"><code>child.txt</code></span></div> <pre data-language="jinja">{% extends 'layout.txt' %}
{% macro foo() %}CHILD{% endmacro %}
{% block body %}{{ foo() }}{% endblock %}
</pre> </div> </section> <section id="call"> <h3 id="id10">Call</h3> <p>In some cases it can be useful to pass a macro to another macro. For this purpose, you can use the special <code>call</code> block. The following example shows a macro that takes advantage of the call functionality and how it can be used:</p> <pre data-language="html+jinja">{% macro render_dialog(title, class='dialog') -%}
    &lt;div class="{{ class }}"&gt;
        &lt;h2&gt;{{ title }}&lt;/h2&gt;
        &lt;div class="contents"&gt;
            {{ caller() }}
        &lt;/div&gt;
    &lt;/div&gt;
{%- endmacro %}

{% call render_dialog('Hello World') %}
    This is a simple dialog rendered by using a macro and
    a call block.
{% endcall %}
</pre> <p>It’s also possible to pass arguments back to the call block. This makes it useful as a replacement for loops. Generally speaking, a call block works exactly like a macro without a name.</p> <p>Here’s an example of how a call block can be used with arguments:</p> <pre data-language="html+jinja">{% macro dump_users(users) -%}
    &lt;ul&gt;
    {%- for user in users %}
        &lt;li&gt;&lt;p&gt;{{ user.username|e }}&lt;/p&gt;{{ caller(user) }}&lt;/li&gt;
    {%- endfor %}
    &lt;/ul&gt;
{%- endmacro %}

{% call(user) dump_users(list_of_user) %}
    &lt;dl&gt;
        &lt;dt&gt;Realname&lt;/dt&gt;
        &lt;dd&gt;{{ user.realname|e }}&lt;/dd&gt;
        &lt;dt&gt;Description&lt;/dt&gt;
        &lt;dd&gt;{{ user.description }}&lt;/dd&gt;
    &lt;/dl&gt;
{% endcall %}
</pre> </section> <section id="id11"> <h3>Filters</h3> <p>Filter sections allow you to apply regular Jinja filters on a block of template data. Just wrap the code in the special <code>filter</code> section:</p> <pre data-language="html+jinja">{% filter upper %}
    This text becomes uppercase
{% endfilter %}
</pre> <p>Filters that accept arguments can be called like this:</p> <pre data-language="html+jinja">{% filter center(100) %}Center this{% endfilter %}
</pre> </section> <section id="assignments"> <h3 id="id12">Assignments</h3> <p>Inside code blocks, you can also assign values to variables. Assignments at top level (outside of blocks, macros or loops) are exported from the template like top level macros and can be imported by other templates.</p> <p>Assignments use the <code>set</code> tag and can have multiple targets:</p> <pre data-language="html+jinja">{% set navigation = [('index.html', 'Index'), ('about.html', 'About')] %}
{% set key, value = call_something() %}
</pre> <div class="admonition-scoping-behavior admonition"> <p class="admonition-title">Scoping Behavior</p> <p>Please keep in mind that it is not possible to set variables inside a block and have them show up outside of it. This also applies to loops. The only exception to that rule are if statements which do not introduce a scope. As a result the following template is not going to do what you might expect:</p> <pre data-language="html+jinja">{% set iterated = false %}
{% for item in seq %}
    {{ item }}
    {% set iterated = true %}
{% endfor %}
{% if not iterated %} did not iterate {% endif %}
</pre> <p>It is not possible with Jinja syntax to do this. Instead use alternative constructs like the loop else block or the special <code>loop</code> variable:</p> <pre data-language="html+jinja">{% for item in seq %}
    {{ item }}
{% else %}
    did not iterate
{% endfor %}
</pre> <p>As of version 2.10 more complex use cases can be handled using namespace objects which allow propagating of changes across scopes:</p> <pre data-language="html+jinja">{% set ns = namespace(found=false) %}
{% for item in items %}
    {% if item.check_something() %}
        {% set ns.found = true %}
    {% endif %}
    * {{ item.title }}
{% endfor %}
Found item having something: {{ ns.found }}
</pre> <p>Note that the <code>obj.attr</code> notation in the <code>set</code> tag is only allowed for namespace objects; attempting to assign an attribute on any other object will raise an exception.</p> <details class="changelog"> <summary>Changelog</summary><div class="versionadded"> <p><span class="versionmodified added">New in version 2.10: </span>Added support for namespace objects</p> </div> </details>
</div> </section> <section id="block-assignments"> <h3>Block Assignments</h3> <details class="changelog"> <summary>Changelog</summary><div class="versionadded"> <p><span class="versionmodified added">New in version 2.8.</span></p> </div> </details><p>Starting with Jinja 2.8, it’s possible to also use block assignments to capture the contents of a block into a variable name. This can be useful in some situations as an alternative for macros. In that case, instead of using an equals sign and a value, you just write the variable name and then everything until <code>{% endset %}</code> is captured.</p> <p>Example:</p> <pre data-language="html+jinja">{% set navigation %}
    &lt;li&gt;&lt;a href="/.html"&gt;Index&lt;/a&gt;
    &lt;li&gt;&lt;a href="/downloads.html"&gt;Downloads&lt;/a&gt;
{% endset %}
</pre> <p>The <code>navigation</code> variable then contains the navigation HTML source.</p> <details class="changelog"> <summary>Changelog</summary><div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2.10.</span></p> </div> </details><p>Starting with Jinja 2.10, the block assignment supports filters.</p> <p>Example:</p> <pre data-language="html+jinja">{% set reply | wordwrap %}
    You wrote:
    {{ message }}
{% endset %}
</pre> </section> <section id="extends"> <h3 id="id13">Extends</h3> <p>The <code>extends</code> tag can be used to extend one template from another. You can have multiple <code>extends</code> tags in a file, but only one of them may be executed at a time.</p> <p>See the section about <a class="reference internal" href="#template-inheritance"><span class="std std-ref">Template Inheritance</span></a> above.</p> </section> <section id="blocks"> <h3 id="id14">Blocks</h3> <p>Blocks are used for inheritance and act as both placeholders and replacements at the same time. They are documented in detail in the <a class="reference internal" href="#template-inheritance"><span class="std std-ref">Template Inheritance</span></a> section.</p> </section> <section id="include"> <h3>Include</h3> <p>The <code>include</code> tag renders another template and outputs the result into the current template.</p> <pre data-language="jinja">{% include 'header.html' %}
Body goes here.
{% include 'footer.html' %}
</pre> <p>The included template has access to context of the current template by default. Use <code>without context</code> to use a separate context instead. <code>with context</code> is also valid, but is the default behavior. See <a class="reference internal" href="#import-visibility"><span class="std std-ref">Import Context Behavior</span></a>.</p> <p>The included template can <code>extend</code> another template and override blocks in that template. However, the current template cannot override any blocks that the included template outputs.</p> <p>Use <code>ignore missing</code> to ignore the statement if the template does not exist. It must be placed <em>before</em> a context visibility statement.</p> <pre data-language="jinja">{% include "sidebar.html" without context %}
{% include "sidebar.html" ignore missing %}
{% include "sidebar.html" ignore missing with context %}
{% include "sidebar.html" ignore missing without context %}
</pre> <p>If a list of templates is given, each will be tried in order until one is not missing. This can be used with <code>ignore missing</code> to ignore if none of the templates exist.</p> <pre data-language="jinja">{% include ['page_detailed.html', 'page.html'] %}
{% include ['special_sidebar.html', 'sidebar.html'] ignore missing %}
</pre> <p>A variable, with either a template name or template object, can also be passed to the statement.</p> </section> <section id="import"> <h3 id="id15">Import</h3> <p>Jinja supports putting often used code into macros. These macros can go into different templates and get imported from there. This works similarly to the import statements in Python. It’s important to know that imports are cached and imported templates don’t have access to the current template variables, just the globals by default. For more details about context behavior of imports and includes, see <a class="reference internal" href="#import-visibility"><span class="std std-ref">Import Context Behavior</span></a>.</p> <p>There are two ways to import templates. You can import a complete template into a variable or request specific macros / exported variables from it.</p> <p>Imagine we have a helper module that renders forms (called <code>forms.html</code>):</p> <pre data-language="html+jinja">{% macro input(name, value='', type='text') -%}
    &lt;input type="{{ type }}" value="{{ value|e }}" name="{{ name }}"&gt;
{%- endmacro %}

{%- macro textarea(name, value='', rows=10, cols=40) -%}
    &lt;textarea name="{{ name }}" rows="{{ rows }}" cols="{{ cols
        }}"&gt;{{ value|e }}&lt;/textarea&gt;
{%- endmacro %}
</pre> <p>The easiest and most flexible way to access a template’s variables and macros is to import the whole template module into a variable. That way, you can access the attributes:</p> <pre data-language="html+jinja">{% import 'forms.html' as forms %}
&lt;dl&gt;
    &lt;dt&gt;Username&lt;/dt&gt;
    &lt;dd&gt;{{ forms.input('username') }}&lt;/dd&gt;
    &lt;dt&gt;Password&lt;/dt&gt;
    &lt;dd&gt;{{ forms.input('password', type='password') }}&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;{{ forms.textarea('comment') }}&lt;/p&gt;
</pre> <p>Alternatively, you can import specific names from a template into the current namespace:</p> <pre data-language="html+jinja">{% from 'forms.html' import input as input_field, textarea %}
&lt;dl&gt;
    &lt;dt&gt;Username&lt;/dt&gt;
    &lt;dd&gt;{{ input_field('username') }}&lt;/dd&gt;
    &lt;dt&gt;Password&lt;/dt&gt;
    &lt;dd&gt;{{ input_field('password', type='password') }}&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;{{ textarea('comment') }}&lt;/p&gt;
</pre> <p>Macros and variables starting with one or more underscores are private and cannot be imported.</p> <details class="changelog"> <summary>Changelog</summary><div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2.4: </span>If a template object was passed to the template context, you can import from that object.</p> </div> </details></section> </section> <section id="import-context-behavior"> <h2 id="import-visibility">Import Context Behavior</h2> <p>By default, included templates are passed the current context and imported templates are not. The reason for this is that imports, unlike includes, are cached; as imports are often used just as a module that holds macros.</p> <p>This behavior can be changed explicitly: by adding <code>with context</code> or <code>without context</code> to the import/include directive, the current context can be passed to the template and caching is disabled automatically.</p> <p>Here are two examples:</p> <pre data-language="html+jinja">{% from 'forms.html' import input with context %}
{% include 'header.html' without context %}
</pre> <div class="admonition-note admonition"> <p class="admonition-title">Note</p> <p>In Jinja 2.0, the context that was passed to the included template did not include variables defined in the template. As a matter of fact, this did not work:</p> <pre data-language="html+jinja">{% for box in boxes %}
    {% include "render_box.html" %}
{% endfor %}
</pre> <p>The included template <code>render_box.html</code> is <em>not</em> able to access <code>box</code> in Jinja 2.0. As of Jinja 2.1, <code>render_box.html</code> <em>is</em> able to do so.</p> </div> </section> <section id="expressions"> <h2 id="id16">Expressions</h2> <p>Jinja allows basic expressions everywhere. These work very similarly to regular Python; even if you’re not working with Python you should feel comfortable with it.</p> <section id="literals"> <h3>Literals</h3> <p>The simplest form of expressions are literals. Literals are representations for Python objects such as strings and numbers. The following literals exist:</p> <dl> <dt>
<code>"Hello World"</code> </dt>
<dd>
<p>Everything between two double or single quotes is a string. They are useful whenever you need a string in the template (e.g. as arguments to function calls and filters, or just to extend or include a template).</p> </dd> <dt>
<code>42 / 123_456</code> </dt>
<dd>
<p>Integers are whole numbers without a decimal part. The ‘_’ character can be used to separate groups for legibility.</p> </dd> <dt>
<code>42.23 / 42.1e2 / 123_456.789</code> </dt>
<dd>
<p>Floating point numbers can be written using a ‘.’ as a decimal mark. They can also be written in scientific notation with an upper or lower case ‘e’ to indicate the exponent part. The ‘_’ character can be used to separate groups for legibility, but cannot be used in the exponent part.</p> </dd> <dt>
<code>['list', 'of', 'objects']</code> </dt>
<dd>
<p>Everything between two brackets is a list. Lists are useful for storing sequential data to be iterated over. For example, you can easily create a list of links using lists and tuples for (and with) a for loop:</p> <pre data-language="html+jinja">&lt;ul&gt;
{% for href, caption in [('index.html', 'Index'), ('about.html', 'About'),
                         ('downloads.html', 'Downloads')] %}
    &lt;li&gt;&lt;a href="{{ href }}.html"&gt;{{ caption }}&lt;/a&gt;&lt;/li&gt;
{% endfor %}
&lt;/ul&gt;
</pre> </dd> <dt>
<code>('tuple', 'of', 'values')</code> </dt>
<dd>
<p>Tuples are like lists that cannot be modified (“immutable”). If a tuple only has one item, it must be followed by a comma (<code>('1-tuple',)</code>). Tuples are usually used to represent items of two or more elements. See the list example above for more details.</p> </dd> <dt>
<code>{'dict': 'of', 'key': 'and', 'value': 'pairs'}</code> </dt>
<dd>
<p>A dict in Python is a structure that combines keys and values. Keys must be unique and always have exactly one value. Dicts are rarely used in templates; they are useful in some rare cases such as the <code>xmlattr()</code> filter.</p> </dd> <dt>
<code>true / false</code> </dt>
<dd>
<p><code>true</code> is always true and <code>false</code> is always false.</p> </dd> </dl> <div class="admonition-note admonition"> <p class="admonition-title">Note</p> <p>The special constants <code>true</code>, <code>false</code>, and <code>none</code> are indeed lowercase. Because that caused confusion in the past, (<code>True</code> used to expand to an undefined variable that was considered false), all three can now also be written in title case (<code>True</code>, <code>False</code>, and <code>None</code>). However, for consistency, (all Jinja identifiers are lowercase) you should use the lowercase versions.</p> </div> </section> <section id="math"> <h3>Math</h3> <p>Jinja allows you to calculate with values. This is rarely useful in templates but exists for completeness’ sake. The following operators are supported:</p> <dl> <dt>
<code>+</code> </dt>
<dd>
<p>Adds two objects together. Usually the objects are numbers, but if both are strings or lists, you can concatenate them this way. This, however, is not the preferred way to concatenate strings! For string concatenation, have a look-see at the <code>~</code> operator. <code>{{ 1 + 1 }}</code> is <code>2</code>.</p> </dd> <dt>
<code>-</code> </dt>
<dd>
<p>Subtract the second number from the first one. <code>{{ 3 - 2 }}</code> is <code>1</code>.</p> </dd> <dt>
<code>/</code> </dt>
<dd>
<p>Divide two numbers. The return value will be a floating point number. <code>{{ 1 / 2 }}</code> is <code>{{ 0.5 }}</code>.</p> </dd> <dt>
<code>//</code> </dt>
<dd>
<p>Divide two numbers and return the truncated integer result. <code>{{ 20 // 7 }}</code> is <code>2</code>.</p> </dd> <dt>
<code>%</code> </dt>
<dd>
<p>Calculate the remainder of an integer division. <code>{{ 11 % 7 }}</code> is <code>4</code>.</p> </dd> <dt>
<code>*</code> </dt>
<dd>
<p>Multiply the left operand with the right one. <code>{{ 2 * 2 }}</code> would return <code>4</code>. This can also be used to repeat a string multiple times. <code>{{ '=' * 80 }}</code> would print a bar of 80 equal signs.</p> </dd> <dt>
<code>**</code> </dt>
<dd>
<p>Raise the left operand to the power of the right operand. <code>{{ 2**3 }}</code> would return <code>8</code>.</p> <p>Unlike Python, chained pow is evaluated left to right. <code>{{ 3**3**3 }}</code> is evaluated as <code>(3**3)**3</code> in Jinja, but would be evaluated as <code>3**(3**3)</code> in Python. Use parentheses in Jinja to be explicit about what order you want. It is usually preferable to do extended math in Python and pass the results to <code>render</code> rather than doing it in the template.</p> <p>This behavior may be changed in the future to match Python, if it’s possible to introduce an upgrade path.</p> </dd> </dl> </section> <section id="comparisons"> <h3>Comparisons</h3> <dl class="simple"> <dt>
<code>==</code> </dt>
<dd>
<p>Compares two objects for equality.</p> </dd> <dt>
<code>!=</code> </dt>
<dd>
<p>Compares two objects for inequality.</p> </dd> <dt>
<code>&gt;</code> </dt>
<dd>
<p><code>true</code> if the left hand side is greater than the right hand side.</p> </dd> <dt>
<code>&gt;=</code> </dt>
<dd>
<p><code>true</code> if the left hand side is greater or equal to the right hand side.</p> </dd> <dt>
<code>&lt;</code> </dt>
<dd>
<p><code>true</code> if the left hand side is lower than the right hand side.</p> </dd> <dt>
<code>&lt;=</code> </dt>
<dd>
<p><code>true</code> if the left hand side is lower or equal to the right hand side.</p> </dd> </dl> </section> <section id="logic"> <h3>Logic</h3> <p>For <code>if</code> statements, <code>for</code> filtering, and <code>if</code> expressions, it can be useful to combine multiple expressions:</p> <dl class="simple"> <dt>
<code>and</code> </dt>
<dd>
<p>Return true if the left and the right operand are true.</p> </dd> <dt>
<code>or</code> </dt>
<dd>
<p>Return true if the left or the right operand are true.</p> </dd> <dt>
<code>not</code> </dt>
<dd>
<p>negate a statement (see below).</p> </dd> <dt>
<code>(expr)</code> </dt>
<dd>
<p>Parentheses group an expression.</p> </dd> </dl> <div class="admonition-note admonition"> <p class="admonition-title">Note</p> <p>The <code>is</code> and <code>in</code> operators support negation using an infix notation, too: <code>foo is not bar</code> and <code>foo not in bar</code> instead of <code>not foo is bar</code> and <code>not foo in bar</code>. All other expressions require a prefix notation: <code>not (foo and bar).</code></p> </div> </section> <section id="other-operators"> <h3>Other Operators</h3> <p>The following operators are very useful but don’t fit into any of the other two categories:</p> <dl> <dt>
<code>in</code> </dt>
<dd>
<p>Perform a sequence / mapping containment test. Returns true if the left operand is contained in the right. <code>{{ 1 in [1, 2, 3] }}</code> would, for example, return true.</p> </dd> <dt>
<code>is</code> </dt>
<dd>
<p>Performs a <a class="reference internal" href="#tests"><span class="std std-ref">test</span></a>.</p> </dd> <dt>
<code>| (pipe, vertical bar)</code> </dt>
<dd>
<p>Applies a <a class="reference internal" href="#filters"><span class="std std-ref">filter</span></a>.</p> </dd> <dt>
<code>~ (tilde)</code> </dt>
<dd>
<p>Converts all operands into strings and concatenates them.</p> <p><code>{{ "Hello " ~ name ~ "!" }}</code> would return (assuming <code>name</code> is set to <code>'John'</code>) <code>Hello John!</code>.</p> </dd> <dt>
<code>()</code> </dt>
<dd>
<p>Call a callable: <code>{{ post.render() }}</code>. Inside of the parentheses you can use positional arguments and keyword arguments like in Python:</p> <p><code>{{ post.render(user, full=true) }}</code>.</p> </dd> <dt>
<code>. / []</code> </dt>
<dd>
<p>Get an attribute of an object. (See <a class="reference internal" href="#variables"><span class="std std-ref">Variables</span></a>)</p> </dd> </dl> </section> <section id="if-expression"> <h3 id="id17">If Expression</h3> <p>It is also possible to use inline <code>if</code> expressions. These are useful in some situations. For example, you can use this to extend from one template if a variable is defined, otherwise from the default layout template:</p> <pre data-language="html+jinja">{% extends layout_template if layout_template is defined else 'default.html' %}
</pre> <p>The general syntax is <code>&lt;do something&gt; if &lt;something is true&gt; else &lt;do
something else&gt;</code>.</p> <p>The <code>else</code> part is optional. If not provided, the else block implicitly evaluates into an <a class="reference internal" href="../api/index.html#jinja2.Undefined" title="jinja2.Undefined"><code>Undefined</code></a> object (regardless of what <code>undefined</code> in the environment is set to):</p> <pre data-language="jinja">{{ "[{}]".format(page.title) if page.title }}
</pre> </section> <section id="python-methods"> <h3 id="id18">Python Methods</h3> <p>You can also use any of the methods defined on a variable’s type. The value returned from the method invocation is used as the value of the expression. Here is an example that uses methods defined on strings (where <code>page.title</code> is a string):</p> <pre data-language="text">{{ page.title.capitalize() }}
</pre> <p>This works for methods on user-defined types. For example, if variable <code>f</code> of type <code>Foo</code> has a method <code>bar</code> defined on it, you can do the following:</p> <pre data-language="text">{{ f.bar(value) }}
</pre> <p>Operator methods also work as expected. For example, <code>%</code> implements printf-style for strings:</p> <pre data-language="text">{{ "Hello, %s!" % name }}
</pre> <p>Although you should prefer the <code>.format</code> method for that case (which is a bit contrived in the context of rendering a template):</p> <pre data-language="text">{{ "Hello, {}!".format(name) }}
</pre> </section> </section> <section id="list-of-builtin-filters"> <h2 id="builtin-filters">List of Builtin Filters</h2> <table class="docutils align-left">  <tr>
<td><p><a class="reference internal" href="#jinja-filters.abs" title="jinja-filters.abs"><code>abs()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.forceescape" title="jinja-filters.forceescape"><code>forceescape()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.map" title="jinja-filters.map"><code>map()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.select" title="jinja-filters.select"><code>select()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.unique" title="jinja-filters.unique"><code>unique()</code></a></p></td> </tr> <tr>
<td><p><a class="reference internal" href="#jinja-filters.attr" title="jinja-filters.attr"><code>attr()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.format" title="jinja-filters.format"><code>format()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.max" title="jinja-filters.max"><code>max()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.selectattr" title="jinja-filters.selectattr"><code>selectattr()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.upper" title="jinja-filters.upper"><code>upper()</code></a></p></td> </tr> <tr>
<td><p><a class="reference internal" href="#jinja-filters.batch" title="jinja-filters.batch"><code>batch()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.groupby" title="jinja-filters.groupby"><code>groupby()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.min" title="jinja-filters.min"><code>min()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.slice" title="jinja-filters.slice"><code>slice()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.urlencode" title="jinja-filters.urlencode"><code>urlencode()</code></a></p></td> </tr> <tr>
<td><p><a class="reference internal" href="#jinja-filters.capitalize" title="jinja-filters.capitalize"><code>capitalize()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.indent" title="jinja-filters.indent"><code>indent()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.pprint" title="jinja-filters.pprint"><code>pprint()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.sort" title="jinja-filters.sort"><code>sort()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.urlize" title="jinja-filters.urlize"><code>urlize()</code></a></p></td> </tr> <tr>
<td><p><a class="reference internal" href="#jinja-filters.center" title="jinja-filters.center"><code>center()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.int" title="jinja-filters.int"><code>int()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.random" title="jinja-filters.random"><code>random()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.string" title="jinja-filters.string"><code>string()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.wordcount" title="jinja-filters.wordcount"><code>wordcount()</code></a></p></td> </tr> <tr>
<td><p><a class="reference internal" href="#jinja-filters.default" title="jinja-filters.default"><code>default()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.items" title="jinja-filters.items"><code>items()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.reject" title="jinja-filters.reject"><code>reject()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.striptags" title="jinja-filters.striptags"><code>striptags()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.wordwrap" title="jinja-filters.wordwrap"><code>wordwrap()</code></a></p></td> </tr> <tr>
<td><p><a class="reference internal" href="#jinja-filters.dictsort" title="jinja-filters.dictsort"><code>dictsort()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.join" title="jinja-filters.join"><code>join()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.rejectattr" title="jinja-filters.rejectattr"><code>rejectattr()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.sum" title="jinja-filters.sum"><code>sum()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.xmlattr" title="jinja-filters.xmlattr"><code>xmlattr()</code></a></p></td> </tr> <tr>
<td><p><a class="reference internal" href="#jinja-filters.escape" title="jinja-filters.escape"><code>escape()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.last" title="jinja-filters.last"><code>last()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.replace" title="jinja-filters.replace"><code>replace()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.title" title="jinja-filters.title"><code>title()</code></a></p></td> <td></td> </tr> <tr>
<td><p><a class="reference internal" href="#jinja-filters.filesizeformat" title="jinja-filters.filesizeformat"><code>filesizeformat()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.length" title="jinja-filters.length"><code>length()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.reverse" title="jinja-filters.reverse"><code>reverse()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.tojson" title="jinja-filters.tojson"><code>tojson()</code></a></p></td> <td></td> </tr> <tr>
<td><p><a class="reference internal" href="#jinja-filters.first" title="jinja-filters.first"><code>first()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.list" title="jinja-filters.list"><code>list()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.round" title="jinja-filters.round"><code>round()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.trim" title="jinja-filters.trim"><code>trim()</code></a></p></td> <td></td> </tr> <tr>
<td><p><a class="reference internal" href="#jinja-filters.float" title="jinja-filters.float"><code>float()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.lower" title="jinja-filters.lower"><code>lower()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.safe" title="jinja-filters.safe"><code>safe()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-filters.truncate" title="jinja-filters.truncate"><code>truncate()</code></a></p></td> <td></td> </tr>  </table> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.abs">
<code>jinja-filters.abs(x, /)</code> </dt> <dd>
<p>Return the absolute value of the argument.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.attr">
<code>jinja-filters.attr(obj: Any, name: str) → jinja2.runtime.Undefined | Any</code> </dt> <dd>
<p>Get an attribute of an object. <code>foo|attr("bar")</code> works like <code>foo.bar</code> just that always an attribute is returned and items are not looked up.</p> <p>See <a class="reference internal" href="#notes-on-subscriptions"><span class="std std-ref">Notes on subscriptions</span></a> for more details.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.batch">
<code>jinja-filters.batch(value: 't.Iterable[V]', linecount: int, fill_with: 't.Optional[V]' = None) → 't.Iterator[t.List[V]]'</code> </dt> <dd>
<p>A filter that batches items. It works pretty much like <code>slice</code> just the other way round. It returns a list of lists with the given number of items. If you provide a second parameter this is used to fill up missing items. See this example:</p> <pre data-language="html+jinja">&lt;table&gt;
{%- for row in items|batch(3, '&amp;nbsp;') %}
  &lt;tr&gt;
  {%- for column in row %}
    &lt;td&gt;{{ column }}&lt;/td&gt;
  {%- endfor %}
  &lt;/tr&gt;
{%- endfor %}
&lt;/table&gt;
</pre> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.capitalize">
<code>jinja-filters.capitalize(s: str) → str</code> </dt> <dd>
<p>Capitalize a value. The first character will be uppercase, all others lowercase.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.center">
<code>jinja-filters.center(value: str, width: int = 80) → str</code> </dt> <dd>
<p>Centers the value in a field of a given width.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.default">
<code>jinja-filters.default(value: V, default_value: V = '', boolean: bool = False) → V</code> </dt> <dd>
<p>If the value is undefined it will return the passed default value, otherwise the value of the variable:</p> <pre data-language="jinja">{{ my_variable|default('my_variable is not defined') }}
</pre> <p>This will output the value of <code>my_variable</code> if the variable was defined, otherwise <code>'my_variable is not defined'</code>. If you want to use default with variables that evaluate to false you have to set the second parameter to <code>true</code>:</p> <pre data-language="jinja">{{ ''|default('the string was empty', true) }}
</pre> <details class="changelog"> <summary>Changelog</summary><div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2.11: </span>It’s now possible to configure the <a class="reference internal" href="../api/index.html#jinja2.Environment" title="jinja2.Environment"><code>Environment</code></a> with <a class="reference internal" href="../api/index.html#jinja2.ChainableUndefined" title="jinja2.ChainableUndefined"><code>ChainableUndefined</code></a> to make the <code>default</code> filter work on nested elements and attributes that may contain undefined values in the chain without getting an <a class="reference internal" href="../api/index.html#jinja2.UndefinedError" title="jinja2.UndefinedError"><code>UndefinedError</code></a>.</p> </div> </details><dl class="field-list simple"> <dt class="field-odd">Aliases<span class="colon">:</span>
</dt> <dd class="field-odd">
<p><code>d</code></p> </dd> </dl> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.dictsort">
<code>jinja-filters.dictsort(value: Mapping[K, V], case_sensitive: bool = False, by: 'te.Literal["key", "value"]' = 'key', reverse: bool = False) → List[Tuple[K, V]]</code> </dt> <dd>
<p>Sort a dict and yield (key, value) pairs. Python dicts may not be in the order you want to display them in, so sort them first.</p> <pre data-language="jinja">{% for key, value in mydict|dictsort %}
    sort the dict by key, case insensitive

{% for key, value in mydict|dictsort(reverse=true) %}
    sort the dict by key, case insensitive, reverse order

{% for key, value in mydict|dictsort(true) %}
    sort the dict by key, case sensitive

{% for key, value in mydict|dictsort(false, 'value') %}
    sort the dict by value, case insensitive
</pre> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.escape">
<code>jinja-filters.escape(value)</code> </dt> <dd>
<p>Replace the characters <code>&amp;</code>, <code>&lt;</code>, <code>&gt;</code>, <code>'</code>, and <code>"</code> in the string with HTML-safe sequences. Use this if you need to display text that might contain such characters in HTML.</p> <p>If the object has an <code>__html__</code> method, it is called and the return value is assumed to already be safe for HTML.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters<span class="colon">:</span>
</dt> <dd class="field-odd">
<p><strong>s</strong> – An object to be converted to a string and escaped.</p> </dd> <dt class="field-even">Returns<span class="colon">:</span>
</dt> <dd class="field-even">
<p>A <code>Markup</code> string with the escaped text.</p> </dd> <dt class="field-odd">Aliases<span class="colon">:</span>
</dt> <dd class="field-odd">
<p><code>e</code></p> </dd> </dl> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.filesizeformat">
<code>jinja-filters.filesizeformat(value: str | float | int, binary: bool = False) → str</code> </dt> <dd>
<p>Format the value like a ‘human-readable’ file size (i.e. 13 kB, 4.1 MB, 102 Bytes, etc). Per default decimal prefixes are used (Mega, Giga, etc.), if the second parameter is set to <code>True</code> the binary prefixes are used (Mebi, Gibi).</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.first">
<code>jinja-filters.first(seq: 't.Iterable[V]') → 't.Union[V, Undefined]'</code> </dt> <dd>
<p>Return the first item of a sequence.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.float">
<code>jinja-filters.float(value: Any, default: float = 0.0) → float</code> </dt> <dd>
<p>Convert the value into a floating point number. If the conversion doesn’t work it will return <code>0.0</code>. You can override this default using the first parameter.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.forceescape">
<code>jinja-filters.forceescape(value: 't.Union[str, HasHTML]') → markupsafe.Markup</code> </dt> <dd>
<p>Enforce HTML escaping. This will probably double escape variables.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.format">
<code>jinja-filters.format(value: str, *args: Any, **kwargs: Any) → str</code> </dt> <dd>
<p>Apply the given values to a <a class="reference external" href="https://docs.python.org/library/stdtypes.html#printf-style-string-formatting">printf-style</a> format string, like <code>string % values</code>.</p> <pre data-language="jinja">{{ "%s, %s!"|format(greeting, name) }}
Hello, World!
</pre> <p>In most cases it should be more convenient and efficient to use the <code>%</code> operator or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str.format" title="(in Python v3.11)"><code>str.format()</code></a>.</p> <pre data-language="text">{{ "%s, %s!" % (greeting, name) }}
{{ "{}, {}!".format(greeting, name) }}
</pre> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.groupby">
<code>jinja-filters.groupby(value: 't.Iterable[V]', attribute: str | int, default: Any | None = None, case_sensitive: bool = False) → 't.List[_GroupTuple]'</code> </dt> <dd>
<p>Group a sequence of objects by an attribute using Python’s <a class="reference external" href="https://docs.python.org/3/library/itertools.html#itertools.groupby" title="(in Python v3.11)"><code>itertools.groupby()</code></a>. The attribute can use dot notation for nested access, like <code>"address.city"</code>. Unlike Python’s <code>groupby</code>, the values are sorted first so only one group is returned for each unique value.</p> <p>For example, a list of <code>User</code> objects with a <code>city</code> attribute can be rendered in groups. In this example, <code>grouper</code> refers to the <code>city</code> value of the group.</p> <pre data-language="html+jinja">&lt;ul&gt;{% for city, items in users|groupby("city") %}
  &lt;li&gt;{{ city }}
    &lt;ul&gt;{% for user in items %}
      &lt;li&gt;{{ user.name }}
    {% endfor %}&lt;/ul&gt;
  &lt;/li&gt;
{% endfor %}&lt;/ul&gt;
</pre> <p><code>groupby</code> yields namedtuples of <code>(grouper, list)</code>, which can be used instead of the tuple unpacking above. <code>grouper</code> is the value of the attribute, and <code>list</code> is the items with that value.</p> <pre data-language="html+jinja">&lt;ul&gt;{% for group in users|groupby("city") %}
  &lt;li&gt;{{ group.grouper }}: {{ group.list|join(", ") }}
{% endfor %}&lt;/ul&gt;
</pre> <p>You can specify a <code>default</code> value to use if an object in the list does not have the given attribute.</p> <pre data-language="jinja">&lt;ul&gt;{% for city, items in users|groupby("city", default="NY") %}
  &lt;li&gt;{{ city }}: {{ items|map(attribute="name")|join(", ") }}&lt;/li&gt;
{% endfor %}&lt;/ul&gt;
</pre> <p>Like the <a class="reference internal" href="#jinja-filters.sort" title="jinja-filters.sort"><code>sort()</code></a> filter, sorting and grouping is case-insensitive by default. The <code>key</code> for each group will have the case of the first item in that group of values. For example, if a list of users has cities <code>["CA", "NY", "ca"]</code>, the “CA” group will have two values. This can be disabled by passing <code>case_sensitive=True</code>.</p> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.1: </span>Added the <code>case_sensitive</code> parameter. Sorting and grouping is case-insensitive by default, matching other filters that do comparisons.</p> </div> <details class="changelog"> <summary>Changelog</summary><div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.0: </span>Added the <code>default</code> parameter.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2.6: </span>The attribute supports dot notation for nested access.</p> </div> </details>
</dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.indent">
<code>jinja-filters.indent(s: str, width: int | str = 4, first: bool = False, blank: bool = False) → str</code> </dt> <dd>
<p>Return a copy of the string with each line indented by 4 spaces. The first line and blank lines are not indented by default.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters<span class="colon">:</span>
</dt> <dd class="field-odd">
<ul class="simple"> <li>
<strong>width</strong> – Number of spaces, or a string, to indent by.</li> <li>
<strong>first</strong> – Don’t skip indenting the first line.</li> <li>
<strong>blank</strong> – Don’t skip indenting empty lines.</li> </ul> </dd> </dl> <details class="changelog"> <summary>Changelog</summary><div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.0: </span><code>width</code> can be a string.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2.10: </span>Blank lines are not indented by default.</p> <p>Rename the <code>indentfirst</code> argument to <code>first</code>.</p> </div> </details>
</dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.int">
<code>jinja-filters.int(value: Any, default: int = 0, base: int = 10) → int</code> </dt> <dd>
<p>Convert the value into an integer. If the conversion doesn’t work it will return <code>0</code>. You can override this default using the first parameter. You can also override the default base (10) in the second parameter, which handles input with prefixes such as 0b, 0o and 0x for bases 2, 8 and 16 respectively. The base is ignored for decimal numbers and non-string values.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.items">
<code>jinja-filters.items(value: Mapping[K, V] | jinja2.runtime.Undefined) → Iterator[Tuple[K, V]]</code> </dt> <dd>
<p>Return an iterator over the <code>(key, value)</code> items of a mapping.</p> <p><code>x|items</code> is the same as <code>x.items()</code>, except if <code>x</code> is undefined an empty iterator is returned.</p> <p>This filter is useful if you expect the template to be rendered with an implementation of Jinja in another programming language that does not have a <code>.items()</code> method on its mapping type.</p> <pre data-language="html+jinja">&lt;dl&gt;
{% for key, value in my_dict|items %}
    &lt;dt&gt;{{ key }}
    &lt;dd&gt;{{ value }}
{% endfor %}
&lt;/dl&gt;
</pre> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.1.</span></p> </div> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.join">
<code>jinja-filters.join(value: Iterable, d: str = '', attribute: str | int | NoneType = None) → str</code> </dt> <dd>
<p>Return a string which is the concatenation of the strings in the sequence. The separator between elements is an empty string per default, you can define it with the optional parameter:</p> <pre data-language="jinja">{{ [1, 2, 3]|join('|') }}
    -&gt; 1|2|3

{{ [1, 2, 3]|join }}
    -&gt; 123
</pre> <p>It is also possible to join certain attributes of an object:</p> <pre data-language="jinja">{{ users|join(', ', attribute='username') }}
</pre> <details class="changelog"> <summary>Changelog</summary><div class="versionadded"> <p><span class="versionmodified added">New in version 2.6: </span>The <code>attribute</code> parameter was added.</p> </div> </details>
</dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.last">
<code>jinja-filters.last(seq: 't.Reversible[V]') → 't.Union[V, Undefined]'</code> </dt> <dd>
<p>Return the last item of a sequence.</p> <p>Note: Does not work with generators. You may want to explicitly convert it to a list:</p> <pre data-language="jinja">{{ data | selectattr('name', '==', 'Jinja') | list | last }}
</pre> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.length">
<code>jinja-filters.length(obj, /)</code> </dt> <dd>
<p>Return the number of items in a container.</p> <dl class="field-list simple"> <dt class="field-odd">Aliases<span class="colon">:</span>
</dt> <dd class="field-odd">
<p><code>count</code></p> </dd> </dl> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.list">
<code>jinja-filters.list(value: 't.Iterable[V]') → 't.List[V]'</code> </dt> <dd>
<p>Convert the value into a list. If it was a string the returned list will be a list of characters.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.lower">
<code>jinja-filters.lower(s: str) → str</code> </dt> <dd>
<p>Convert a value to lowercase.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.map">
<code>jinja-filters.map(value: Iterable, *args: Any, **kwargs: Any) → Iterable</code> </dt> <dd>
<p>Applies a filter on a sequence of objects or looks up an attribute. This is useful when dealing with lists of objects but you are really only interested in a certain value of it.</p> <p>The basic usage is mapping on an attribute. Imagine you have a list of users but you are only interested in a list of usernames:</p> <pre data-language="jinja">Users on this page: {{ users|map(attribute='username')|join(', ') }}
</pre> <p>You can specify a <code>default</code> value to use if an object in the list does not have the given attribute.</p> <pre data-language="jinja">{{ users|map(attribute="username", default="Anonymous")|join(", ") }}
</pre> <p>Alternatively you can let it invoke a filter by passing the name of the filter and the arguments afterwards. A good example would be applying a text conversion filter on a sequence:</p> <pre data-language="jinja">Users on this page: {{ titles|map('lower')|join(', ') }}
</pre> <p>Similar to a generator comprehension such as:</p> <pre data-language="python">(u.username for u in users)
(getattr(u, "username", "Anonymous") for u in users)
(do_lower(x) for x in titles)
</pre> <details class="changelog"> <summary>Changelog</summary><div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2.11.0: </span>Added the <code>default</code> parameter.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 2.7.</span></p> </div> </details>
</dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.max">
<code>jinja-filters.max(value: 't.Iterable[V]', case_sensitive: bool = False, attribute: str | int | NoneType = None) → 't.Union[V, Undefined]'</code> </dt> <dd>
<p>Return the largest item from the sequence.</p> <pre data-language="jinja">{{ [1, 2, 3]|max }}
    -&gt; 3
</pre> <dl class="field-list simple"> <dt class="field-odd">Parameters<span class="colon">:</span>
</dt> <dd class="field-odd">
<ul class="simple"> <li>
<strong>case_sensitive</strong> – Treat upper and lower case strings as distinct.</li> <li>
<strong>attribute</strong> – Get the object with the max value of this attribute.</li> </ul> </dd> </dl> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.min">
<code>jinja-filters.min(value: 't.Iterable[V]', case_sensitive: bool = False, attribute: str | int | NoneType = None) → 't.Union[V, Undefined]'</code> </dt> <dd>
<p>Return the smallest item from the sequence.</p> <pre data-language="jinja">{{ [1, 2, 3]|min }}
    -&gt; 1
</pre> <dl class="field-list simple"> <dt class="field-odd">Parameters<span class="colon">:</span>
</dt> <dd class="field-odd">
<ul class="simple"> <li>
<strong>case_sensitive</strong> – Treat upper and lower case strings as distinct.</li> <li>
<strong>attribute</strong> – Get the object with the min value of this attribute.</li> </ul> </dd> </dl> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.pprint">
<code>jinja-filters.pprint(value: Any) → str</code> </dt> <dd>
<p>Pretty print a variable. Useful for debugging.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.random">
<code>jinja-filters.random(seq: 't.Sequence[V]') → 't.Union[V, Undefined]'</code> </dt> <dd>
<p>Return a random item from the sequence.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.reject">
<code>jinja-filters.reject(value: 't.Iterable[V]', *args: Any, **kwargs: Any) → 't.Iterator[V]'</code> </dt> <dd>
<p>Filters a sequence of objects by applying a test to each object, and rejecting the objects with the test succeeding.</p> <p>If no test is specified, each object will be evaluated as a boolean.</p> <p>Example usage:</p> <pre data-language="jinja">{{ numbers|reject("odd") }}
</pre> <p>Similar to a generator comprehension such as:</p> <pre data-language="python">(n for n in numbers if not test_odd(n))
</pre> <details class="changelog"> <summary>Changelog</summary><div class="versionadded"> <p><span class="versionmodified added">New in version 2.7.</span></p> </div> </details>
</dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.rejectattr">
<code>jinja-filters.rejectattr(value: 't.Iterable[V]', *args: Any, **kwargs: Any) → 't.Iterator[V]'</code> </dt> <dd>
<p>Filters a sequence of objects by applying a test to the specified attribute of each object, and rejecting the objects with the test succeeding.</p> <p>If no test is specified, the attribute’s value will be evaluated as a boolean.</p> <pre data-language="jinja">{{ users|rejectattr("is_active") }}
{{ users|rejectattr("email", "none") }}
</pre> <p>Similar to a generator comprehension such as:</p> <pre data-language="python">(u for user in users if not user.is_active)
(u for user in users if not test_none(user.email))
</pre> <details class="changelog"> <summary>Changelog</summary><div class="versionadded"> <p><span class="versionmodified added">New in version 2.7.</span></p> </div> </details>
</dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.replace">
<code>jinja-filters.replace(s: str, old: str, new: str, count: int | None = None) → str</code> </dt> <dd>
<p>Return a copy of the value with all occurrences of a substring replaced with a new one. The first argument is the substring that should be replaced, the second is the replacement string. If the optional third argument <code>count</code> is given, only the first <code>count</code> occurrences are replaced:</p> <pre data-language="jinja">{{ "Hello World"|replace("Hello", "Goodbye") }}
    -&gt; Goodbye World

{{ "aaaaargh"|replace("a", "d'oh, ", 2) }}
    -&gt; d'oh, d'oh, aaargh
</pre> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.reverse">
<code>jinja-filters.reverse(value: str | Iterable[V]) → str | Iterable[V]</code> </dt> <dd>
<p>Reverse the object or return an iterator that iterates over it the other way round.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.round">
<code>jinja-filters.round(value: float, precision: int = 0, method: 'te.Literal["common", "ceil", "floor"]' = 'common') → float</code> </dt> <dd>
<p>Round the number to a given precision. The first parameter specifies the precision (default is <code>0</code>), the second the rounding method:</p> <ul class="simple"> <li>
<code>'common'</code> rounds either up or down</li> <li>
<code>'ceil'</code> always rounds up</li> <li>
<code>'floor'</code> always rounds down</li> </ul> <p>If you don’t specify a method <code>'common'</code> is used.</p> <pre data-language="jinja">{{ 42.55|round }}
    -&gt; 43.0
{{ 42.55|round(1, 'floor') }}
    -&gt; 42.5
</pre> <p>Note that even if rounded to 0 precision, a float is returned. If you need a real integer, pipe it through <code>int</code>:</p> <pre data-language="jinja">{{ 42.55|round|int }}
    -&gt; 43
</pre> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.safe">
<code>jinja-filters.safe(value: str) → markupsafe.Markup</code> </dt> <dd>
<p>Mark the value as safe which means that in an environment with automatic escaping enabled this variable will not be escaped.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.select">
<code>jinja-filters.select(value: 't.Iterable[V]', *args: Any, **kwargs: Any) → 't.Iterator[V]'</code> </dt> <dd>
<p>Filters a sequence of objects by applying a test to each object, and only selecting the objects with the test succeeding.</p> <p>If no test is specified, each object will be evaluated as a boolean.</p> <p>Example usage:</p> <pre data-language="jinja">{{ numbers|select("odd") }}
{{ numbers|select("odd") }}
{{ numbers|select("divisibleby", 3) }}
{{ numbers|select("lessthan", 42) }}
{{ strings|select("equalto", "mystring") }}
</pre> <p>Similar to a generator comprehension such as:</p> <pre data-language="python">(n for n in numbers if test_odd(n))
(n for n in numbers if test_divisibleby(n, 3))
</pre> <details class="changelog"> <summary>Changelog</summary><div class="versionadded"> <p><span class="versionmodified added">New in version 2.7.</span></p> </div> </details>
</dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.selectattr">
<code>jinja-filters.selectattr(value: 't.Iterable[V]', *args: Any, **kwargs: Any) → 't.Iterator[V]'</code> </dt> <dd>
<p>Filters a sequence of objects by applying a test to the specified attribute of each object, and only selecting the objects with the test succeeding.</p> <p>If no test is specified, the attribute’s value will be evaluated as a boolean.</p> <p>Example usage:</p> <pre data-language="jinja">{{ users|selectattr("is_active") }}
{{ users|selectattr("email", "none") }}
</pre> <p>Similar to a generator comprehension such as:</p> <pre data-language="python">(u for user in users if user.is_active)
(u for user in users if test_none(user.email))
</pre> <details class="changelog"> <summary>Changelog</summary><div class="versionadded"> <p><span class="versionmodified added">New in version 2.7.</span></p> </div> </details>
</dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.slice">
<code>jinja-filters.slice(value: 't.Collection[V]', slices: int, fill_with: 't.Optional[V]' = None) → 't.Iterator[t.List[V]]'</code> </dt> <dd>
<p>Slice an iterator and return a list of lists containing those items. Useful if you want to create a div containing three ul tags that represent columns:</p> <pre data-language="html+jinja">&lt;div class="columnwrapper"&gt;
  {%- for column in items|slice(3) %}
    &lt;ul class="column-{{ loop.index }}"&gt;
    {%- for item in column %}
      &lt;li&gt;{{ item }}&lt;/li&gt;
    {%- endfor %}
    &lt;/ul&gt;
  {%- endfor %}
&lt;/div&gt;
</pre> <p>If you pass it a second argument it’s used to fill missing values on the last iteration.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.sort">
<code>jinja-filters.sort(value: 't.Iterable[V]', reverse: bool = False, case_sensitive: bool = False, attribute: str | int | NoneType = None) → 't.List[V]'</code> </dt> <dd>
<p>Sort an iterable using Python’s <a class="reference external" href="https://docs.python.org/3/library/functions.html#sorted" title="(in Python v3.11)"><code>sorted()</code></a>.</p> <pre data-language="jinja">{% for city in cities|sort %}
    ...
{% endfor %}
</pre> <dl class="field-list simple"> <dt class="field-odd">Parameters<span class="colon">:</span>
</dt> <dd class="field-odd">
<ul class="simple"> <li>
<strong>reverse</strong> – Sort descending instead of ascending.</li> <li>
<strong>case_sensitive</strong> – When sorting strings, sort upper and lower case separately.</li> <li>
<strong>attribute</strong> – When sorting objects or dicts, an attribute or key to sort by. Can use dot notation like <code>"address.city"</code>. Can be a list of attributes like <code>"age,name"</code>.</li> </ul> </dd> </dl> <p>The sort is stable, it does not change the relative order of elements that compare equal. This makes it is possible to chain sorts on different attributes and ordering.</p> <pre data-language="jinja">{% for user in users|sort(attribute="name")
    |sort(reverse=true, attribute="age") %}
    ...
{% endfor %}
</pre> <p>As a shortcut to chaining when the direction is the same for all attributes, pass a comma separate list of attributes.</p> <pre data-language="jinja">{% for user in users|sort(attribute="age,name") %}
    ...
{% endfor %}
</pre> <details class="changelog"> <summary>Changelog</summary><div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2.11.0: </span>The <code>attribute</code> parameter can be a comma separated list of attributes, e.g. <code>"age,name"</code>.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2.6: </span>The <code>attribute</code> parameter was added.</p> </div> </details>
</dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.string">
<code>jinja-filters.string(value)</code> </dt> <dd>
<p>Convert an object to a string if it isn’t already. This preserves a <code>Markup</code> string rather than converting it back to a basic string, so it will still be marked as safe and won’t be escaped again.</p> <pre data-language="python">&gt;&gt;&gt; value = escape("&lt;User 1&gt;")
&gt;&gt;&gt; value
Markup('&amp;lt;User 1&amp;gt;')
&gt;&gt;&gt; escape(str(value))
Markup('&amp;amp;lt;User 1&amp;amp;gt;')
&gt;&gt;&gt; escape(soft_str(value))
Markup('&amp;lt;User 1&amp;gt;')
</pre> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.striptags">
<code>jinja-filters.striptags(value: 't.Union[str, HasHTML]') → str</code> </dt> <dd>
<p>Strip SGML/XML tags and replace adjacent whitespace by one space.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.sum">
<code>jinja-filters.sum(iterable: 't.Iterable[V]', attribute: str | int | NoneType = None, start: V = 0) → V</code> </dt> <dd>
<p>Returns the sum of a sequence of numbers plus the value of parameter ‘start’ (which defaults to 0). When the sequence is empty it returns start.</p> <p>It is also possible to sum up only certain attributes:</p> <pre data-language="jinja">Total: {{ items|sum(attribute='price') }}
</pre> <details class="changelog"> <summary>Changelog</summary><div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2.6: </span>The <code>attribute</code> parameter was added to allow summing up over attributes. Also the <code>start</code> parameter was moved on to the right.</p> </div> </details>
</dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.title">
<code>jinja-filters.title(s: str) → str</code> </dt> <dd>
<p>Return a titlecased version of the value. I.e. words will start with uppercase letters, all remaining characters are lowercase.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.tojson">
<code>jinja-filters.tojson(value: Any, indent: int | None = None) → markupsafe.Markup</code> </dt> <dd>
<p>Serialize an object to a string of JSON, and mark it safe to render in HTML. This filter is only for use in HTML documents.</p> <p>The returned string is safe to render in HTML documents and <code>&lt;script&gt;</code> tags. The exception is in HTML attributes that are double quoted; either use single quotes or the <code>|forceescape</code> filter.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters<span class="colon">:</span>
</dt> <dd class="field-odd">
<ul class="simple"> <li>
<strong>value</strong> – The object to serialize to JSON.</li> <li>
<strong>indent</strong> – The <code>indent</code> parameter passed to <code>dumps</code>, for pretty-printing the value.</li> </ul> </dd> </dl> <details class="changelog"> <summary>Changelog</summary><div class="versionadded"> <p><span class="versionmodified added">New in version 2.9.</span></p> </div> </details>
</dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.trim">
<code>jinja-filters.trim(value: str, chars: str | None = None) → str</code> </dt> <dd>
<p>Strip leading and trailing characters, by default whitespace.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.truncate">
<code>jinja-filters.truncate(s: str, length: int = 255, killwords: bool = False, end: str = '...', leeway: int | None = None) → str</code> </dt> <dd>
<p>Return a truncated copy of the string. The length is specified with the first parameter which defaults to <code>255</code>. If the second parameter is <code>true</code> the filter will cut the text at length. Otherwise it will discard the last word. If the text was in fact truncated it will append an ellipsis sign (<code>"..."</code>). If you want a different ellipsis sign than <code>"..."</code> you can specify it using the third parameter. Strings that only exceed the length by the tolerance margin given in the fourth parameter will not be truncated.</p> <pre data-language="jinja">{{ "foo bar baz qux"|truncate(9) }}
    -&gt; "foo..."
{{ "foo bar baz qux"|truncate(9, True) }}
    -&gt; "foo ba..."
{{ "foo bar baz qux"|truncate(11) }}
    -&gt; "foo bar baz qux"
{{ "foo bar baz qux"|truncate(11, False, '...', 0) }}
    -&gt; "foo bar..."
</pre> <p>The default leeway on newer Jinja versions is 5 and was 0 before but can be reconfigured globally.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.unique">
<code>jinja-filters.unique(value: 't.Iterable[V]', case_sensitive: bool = False, attribute: str | int | NoneType = None) → 't.Iterator[V]'</code> </dt> <dd>
<p>Returns a list of unique items from the given iterable.</p> <pre data-language="jinja">{{ ['foo', 'bar', 'foobar', 'FooBar']|unique|list }}
    -&gt; ['foo', 'bar', 'foobar']
</pre> <p>The unique items are yielded in the same order as their first occurrence in the iterable passed to the filter.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters<span class="colon">:</span>
</dt> <dd class="field-odd">
<ul class="simple"> <li>
<strong>case_sensitive</strong> – Treat upper and lower case strings as distinct.</li> <li>
<strong>attribute</strong> – Filter objects with unique values for this attribute.</li> </ul> </dd> </dl> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.upper">
<code>jinja-filters.upper(s: str) → str</code> </dt> <dd>
<p>Convert a value to uppercase.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.urlencode">
<code>jinja-filters.urlencode(value: str | Mapping[str, Any] | Iterable[Tuple[str, Any]]) → str</code> </dt> <dd>
<p>Quote data for use in a URL path or query using UTF-8.</p> <p>Basic wrapper around <a class="reference external" href="https://docs.python.org/3/library/urllib.parse.html#urllib.parse.quote" title="(in Python v3.11)"><code>urllib.parse.quote()</code></a> when given a string, or <a class="reference external" href="https://docs.python.org/3/library/urllib.parse.html#urllib.parse.urlencode" title="(in Python v3.11)"><code>urllib.parse.urlencode()</code></a> for a dict or iterable.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters<span class="colon">:</span>
</dt> <dd class="field-odd">
<p><strong>value</strong> – Data to quote. A string will be quoted directly. A dict or iterable of <code>(key, value)</code> pairs will be joined as a query string.</p> </dd> </dl> <p>When given a string, “/” is not quoted. HTTP servers treat “/” and “%2F” equivalently in paths. If you need quoted slashes, use the <code>|replace("/", "%2F")</code> filter.</p> <details class="changelog"> <summary>Changelog</summary><div class="versionadded"> <p><span class="versionmodified added">New in version 2.7.</span></p> </div> </details>
</dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.urlize">
<code>jinja-filters.urlize(value: str, trim_url_limit: int | None = None, nofollow: bool = False, target: str | None = None, rel: str | None = None, extra_schemes: Iterable[str] | None = None) → str</code> </dt> <dd>
<p>Convert URLs in text into clickable links.</p> <p>This may not recognize links in some situations. Usually, a more comprehensive formatter, such as a Markdown library, is a better choice.</p> <p>Works on <code>http://</code>, <code>https://</code>, <code>www.</code>, <code>mailto:</code>, and email addresses. Links with trailing punctuation (periods, commas, closing parentheses) and leading punctuation (opening parentheses) are recognized excluding the punctuation. Email addresses that include header fields are not recognized (for example, <code>mailto:address@example.com?cc=copy@example.com</code>).</p> <dl class="field-list simple"> <dt class="field-odd">Parameters<span class="colon">:</span>
</dt> <dd class="field-odd">
<ul class="simple"> <li>
<strong>value</strong> – Original text containing URLs to link.</li> <li>
<strong>trim_url_limit</strong> – Shorten displayed URL values to this length.</li> <li>
<strong>nofollow</strong> – Add the <code>rel=nofollow</code> attribute to links.</li> <li>
<strong>target</strong> – Add the <code>target</code> attribute to links.</li> <li>
<strong>rel</strong> – Add the <code>rel</code> attribute to links.</li> <li>
<strong>extra_schemes</strong> – Recognize URLs that start with these schemes in addition to the default behavior. Defaults to <code>env.policies["urlize.extra_schemes"]</code>, which defaults to no extra schemes.</li> </ul> </dd> </dl> <details class="changelog"> <summary>Changelog</summary><div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.0: </span>The <code>extra_schemes</code> parameter was added.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.0: </span>Generate <code>https://</code> links for URLs without a scheme.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 3.0: </span>The parsing rules were updated. Recognize email addresses with or without the <code>mailto:</code> scheme. Validate IP addresses. Ignore parentheses and brackets in more cases.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2.8: </span>The <code>target</code> parameter was added.</p> </div> </details>
</dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.wordcount">
<code>jinja-filters.wordcount(s: str) → int</code> </dt> <dd>
<p>Count the words in that string.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.wordwrap">
<code>jinja-filters.wordwrap(s: str, width: int = 79, break_long_words: bool = True, wrapstring: str | None = None, break_on_hyphens: bool = True) → str</code> </dt> <dd>
<p>Wrap a string to the given width. Existing newlines are treated as paragraphs to be wrapped separately.</p> <dl class="field-list simple"> <dt class="field-odd">Parameters<span class="colon">:</span>
</dt> <dd class="field-odd">
<ul class="simple"> <li>
<strong>s</strong> – Original text to wrap.</li> <li>
<strong>width</strong> – Maximum length of wrapped lines.</li> <li>
<strong>break_long_words</strong> – If a word is longer than <code>width</code>, break it across lines.</li> <li>
<strong>break_on_hyphens</strong> – If a word contains hyphens, it may be split across lines.</li> <li>
<strong>wrapstring</strong> – String to join each wrapped line. Defaults to <code>Environment.newline_sequence</code>.</li> </ul> </dd> </dl> <details class="changelog"> <summary>Changelog</summary><div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2.11: </span>Existing newlines are treated as paragraphs wrapped separately.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2.11: </span>Added the <code>break_on_hyphens</code> parameter.</p> </div> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 2.7: </span>Added the <code>wrapstring</code> parameter.</p> </div> </details>
</dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-filters.xmlattr">
<code>jinja-filters.xmlattr(d: Mapping[str, Any], autospace: bool = True) → str</code> </dt> <dd>
<p>Create an SGML/XML attribute string based on the items in a dict. All values that are neither <code>none</code> nor <code>undefined</code> are automatically escaped:</p> <pre data-language="html+jinja">&lt;ul{{ {'class': 'my_list', 'missing': none,
        'id': 'list-%d'|format(variable)}|xmlattr }}&gt;
...
&lt;/ul&gt;
</pre> <p>Results in something like this:</p> <pre data-language="html">&lt;ul class="my_list" id="list-42"&gt;
...
&lt;/ul&gt;
</pre> <p>As you can see it automatically prepends a space in front of the item if the filter returned something unless the second parameter is false.</p> </dd>
</dl> </section> <section id="list-of-builtin-tests"> <h2 id="builtin-tests">List of Builtin Tests</h2> <table class="docutils align-left">  <tr>
<td><p><a class="reference internal" href="#jinja-tests.boolean" title="jinja-tests.boolean"><code>boolean()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-tests.even" title="jinja-tests.even"><code>even()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-tests.in" title="jinja-tests.in"><code>in()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-tests.mapping" title="jinja-tests.mapping"><code>mapping()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-tests.sequence" title="jinja-tests.sequence"><code>sequence()</code></a></p></td> </tr> <tr>
<td><p><a class="reference internal" href="#jinja-tests.callable" title="jinja-tests.callable"><code>callable()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-tests.false" title="jinja-tests.false"><code>false()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-tests.integer" title="jinja-tests.integer"><code>integer()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-tests.ne" title="jinja-tests.ne"><code>ne()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-tests.string" title="jinja-tests.string"><code>string()</code></a></p></td> </tr> <tr>
<td><p><a class="reference internal" href="#jinja-tests.defined" title="jinja-tests.defined"><code>defined()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-tests.filter" title="jinja-tests.filter"><code>filter()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-tests.iterable" title="jinja-tests.iterable"><code>iterable()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-tests.none" title="jinja-tests.none"><code>none()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-tests.test" title="jinja-tests.test"><code>test()</code></a></p></td> </tr> <tr>
<td><p><a class="reference internal" href="#jinja-tests.divisibleby" title="jinja-tests.divisibleby"><code>divisibleby()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-tests.float" title="jinja-tests.float"><code>float()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-tests.le" title="jinja-tests.le"><code>le()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-tests.number" title="jinja-tests.number"><code>number()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-tests.true" title="jinja-tests.true"><code>true()</code></a></p></td> </tr> <tr>
<td><p><a class="reference internal" href="#jinja-tests.eq" title="jinja-tests.eq"><code>eq()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-tests.ge" title="jinja-tests.ge"><code>ge()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-tests.lower" title="jinja-tests.lower"><code>lower()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-tests.odd" title="jinja-tests.odd"><code>odd()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-tests.undefined" title="jinja-tests.undefined"><code>undefined()</code></a></p></td> </tr> <tr>
<td><p><a class="reference internal" href="#jinja-tests.escaped" title="jinja-tests.escaped"><code>escaped()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-tests.gt" title="jinja-tests.gt"><code>gt()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-tests.lt" title="jinja-tests.lt"><code>lt()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-tests.sameas" title="jinja-tests.sameas"><code>sameas()</code></a></p></td> <td><p><a class="reference internal" href="#jinja-tests.upper" title="jinja-tests.upper"><code>upper()</code></a></p></td> </tr>  </table> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.boolean">
<code>jinja-tests.boolean(value: Any) → bool</code> </dt> <dd>
<p>Return true if the object is a boolean value.</p> <details class="changelog"> <summary>Changelog</summary><div class="versionadded"> <p><span class="versionmodified added">New in version 2.11.</span></p> </div> </details>
</dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.callable">
<code>jinja-tests.callable(obj, /)</code> </dt> <dd>
<p>Return whether the object is callable (i.e., some kind of function).</p> <p>Note that classes are callable, as are instances of classes with a __call__() method.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.defined">
<code>jinja-tests.defined(value: Any) → bool</code> </dt> <dd>
<p>Return true if the variable is defined:</p> <pre data-language="jinja">{% if variable is defined %}
    value of variable: {{ variable }}
{% else %}
    variable is not defined
{% endif %}
</pre> <p>See the <code>default()</code> filter for a simple way to set undefined variables.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.divisibleby">
<code>jinja-tests.divisibleby(value: int, num: int) → bool</code> </dt> <dd>
<p>Check if a variable is divisible by a number.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.eq">
<code>jinja-tests.eq(a, b, /)</code> </dt> <dd>
<p>Same as a == b.</p> <dl class="field-list simple"> <dt class="field-odd">Aliases<span class="colon">:</span>
</dt> <dd class="field-odd">
<p><code>==</code>, <code>equalto</code></p> </dd> </dl> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.escaped">
<code>jinja-tests.escaped(value: Any) → bool</code> </dt> <dd>
<p>Check if the value is escaped.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.even">
<code>jinja-tests.even(value: int) → bool</code> </dt> <dd>
<p>Return true if the variable is even.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.false">
<code>jinja-tests.false(value: Any) → bool</code> </dt> <dd>
<p>Return true if the object is False.</p> <details class="changelog"> <summary>Changelog</summary><div class="versionadded"> <p><span class="versionmodified added">New in version 2.11.</span></p> </div> </details>
</dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.filter">
<code>jinja-tests.filter(value: str) → bool</code> </dt> <dd>
<p>Check if a filter exists by name. Useful if a filter may be optionally available.</p> <pre data-language="jinja">{% if 'markdown' is filter %}
    {{ value | markdown }}
{% else %}
    {{ value }}
{% endif %}
</pre> <details class="changelog"> <summary>Changelog</summary><div class="versionadded"> <p><span class="versionmodified added">New in version 3.0.</span></p> </div> </details>
</dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.float">
<code>jinja-tests.float(value: Any) → bool</code> </dt> <dd>
<p>Return true if the object is a float.</p> <details class="changelog"> <summary>Changelog</summary><div class="versionadded"> <p><span class="versionmodified added">New in version 2.11.</span></p> </div> </details>
</dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.ge">
<code>jinja-tests.ge(a, b, /)</code> </dt> <dd>
<p>Same as a &gt;= b.</p> <dl class="field-list simple"> <dt class="field-odd">Aliases<span class="colon">:</span>
</dt> <dd class="field-odd">
<p><code>&gt;=</code></p> </dd> </dl> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.gt">
<code>jinja-tests.gt(a, b, /)</code> </dt> <dd>
<p>Same as a &gt; b.</p> <dl class="field-list simple"> <dt class="field-odd">Aliases<span class="colon">:</span>
</dt> <dd class="field-odd">
<p><code>&gt;</code>, <code>greaterthan</code></p> </dd> </dl> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.in">
<code>jinja-tests.in(value: Any, seq: Container) → bool</code> </dt> <dd>
<p>Check if value is in seq.</p> <details class="changelog"> <summary>Changelog</summary><div class="versionadded"> <p><span class="versionmodified added">New in version 2.10.</span></p> </div> </details>
</dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.integer">
<code>jinja-tests.integer(value: Any) → bool</code> </dt> <dd>
<p>Return true if the object is an integer.</p> <details class="changelog"> <summary>Changelog</summary><div class="versionadded"> <p><span class="versionmodified added">New in version 2.11.</span></p> </div> </details>
</dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.iterable">
<code>jinja-tests.iterable(value: Any) → bool</code> </dt> <dd>
<p>Check if it’s possible to iterate over an object.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.le">
<code>jinja-tests.le(a, b, /)</code> </dt> <dd>
<p>Same as a &lt;= b.</p> <dl class="field-list simple"> <dt class="field-odd">Aliases<span class="colon">:</span>
</dt> <dd class="field-odd">
<p><code>&lt;=</code></p> </dd> </dl> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.lower">
<code>jinja-tests.lower(value: str) → bool</code> </dt> <dd>
<p>Return true if the variable is lowercased.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.lt">
<code>jinja-tests.lt(a, b, /)</code> </dt> <dd>
<p>Same as a &lt; b.</p> <dl class="field-list simple"> <dt class="field-odd">Aliases<span class="colon">:</span>
</dt> <dd class="field-odd">
<p><code>&lt;</code>, <code>lessthan</code></p> </dd> </dl> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.mapping">
<code>jinja-tests.mapping(value: Any) → bool</code> </dt> <dd>
<p>Return true if the object is a mapping (dict etc.).</p> <details class="changelog"> <summary>Changelog</summary><div class="versionadded"> <p><span class="versionmodified added">New in version 2.6.</span></p> </div> </details>
</dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.ne">
<code>jinja-tests.ne(a, b, /)</code> </dt> <dd>
<p>Same as a != b.</p> <dl class="field-list simple"> <dt class="field-odd">Aliases<span class="colon">:</span>
</dt> <dd class="field-odd">
<p><code>!=</code></p> </dd> </dl> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.none">
<code>jinja-tests.none(value: Any) → bool</code> </dt> <dd>
<p>Return true if the variable is none.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.number">
<code>jinja-tests.number(value: Any) → bool</code> </dt> <dd>
<p>Return true if the variable is a number.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.odd">
<code>jinja-tests.odd(value: int) → bool</code> </dt> <dd>
<p>Return true if the variable is odd.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.sameas">
<code>jinja-tests.sameas(value: Any, other: Any) → bool</code> </dt> <dd>
<p>Check if an object points to the same memory address than another object:</p> <pre data-language="jinja">{% if foo.attribute is sameas false %}
    the foo attribute really is the `False` singleton
{% endif %}
</pre> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.sequence">
<code>jinja-tests.sequence(value: Any) → bool</code> </dt> <dd>
<p>Return true if the variable is a sequence. Sequences are variables that are iterable.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.string">
<code>jinja-tests.string(value: Any) → bool</code> </dt> <dd>
<p>Return true if the object is a string.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.test">
<code>jinja-tests.test(value: str) → bool</code> </dt> <dd>
<p>Check if a test exists by name. Useful if a test may be optionally available.</p> <pre data-language="jinja">{% if 'loud' is test %}
    {% if value is loud %}
        {{ value|upper }}
    {% else %}
        {{ value|lower }}
    {% endif %}
{% else %}
    {{ value }}
{% endif %}
</pre> <details class="changelog"> <summary>Changelog</summary><div class="versionadded"> <p><span class="versionmodified added">New in version 3.0.</span></p> </div> </details>
</dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.true">
<code>jinja-tests.true(value: Any) → bool</code> </dt> <dd>
<p>Return true if the object is True.</p> <details class="changelog"> <summary>Changelog</summary><div class="versionadded"> <p><span class="versionmodified added">New in version 2.11.</span></p> </div> </details>
</dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.undefined">
<code>jinja-tests.undefined(value: Any) → bool</code> </dt> <dd>
<p>Like <a class="reference internal" href="#jinja-tests.defined" title="jinja-tests.defined"><code>defined()</code></a> but the other way round.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-tests.upper">
<code>jinja-tests.upper(value: str) → bool</code> </dt> <dd>
<p>Return true if the variable is uppercased.</p> </dd>
</dl> </section> <section id="list-of-global-functions"> <h2 id="builtin-globals">List of Global Functions</h2> <p>The following functions are available in the global scope by default:</p> <dl class="py function"> <dt class="sig sig-object py" id="jinja-globals.range">
<code>jinja-globals.range([start, ]stop[, step])</code> </dt> <dd>
<p>Return a list containing an arithmetic progression of integers. <code>range(i, j)</code> returns <code>[i, i+1, i+2, ..., j-1]</code>; start (!) defaults to <code>0</code>. When step is given, it specifies the increment (or decrement). For example, <code>range(4)</code> and <code>range(0, 4, 1)</code> return <code>[0, 1, 2, 3]</code>. The end point is omitted! These are exactly the valid indices for a list of 4 elements.</p> <p>This is useful to repeat a template block multiple times, e.g. to fill a list. Imagine you have 7 users in the list but you want to render three empty items to enforce a height with CSS:</p> <pre data-language="html+jinja">&lt;ul&gt;
{% for user in users %}
    &lt;li&gt;{{ user.username }}&lt;/li&gt;
{% endfor %}
{% for number in range(10 - users|count) %}
    &lt;li class="empty"&gt;&lt;span&gt;...&lt;/span&gt;&lt;/li&gt;
{% endfor %}
&lt;/ul&gt;
</pre> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-globals.lipsum">
<code>jinja-globals.lipsum(n=5, html=True, min=20, max=100)</code> </dt> <dd>
<p>Generates some lorem ipsum for the template. By default, five paragraphs of HTML are generated with each paragraph between 20 and 100 words. If html is False, regular text is returned. This is useful to generate simple contents for layout testing.</p> </dd>
</dl> <dl class="py function"> <dt class="sig sig-object py" id="jinja-globals.dict">
<code>jinja-globals.dict(\**items)</code> </dt> <dd>
<p>A convenient alternative to dict literals. <code>{'foo': 'bar'}</code> is the same as <code>dict(foo='bar')</code>.</p> </dd>
</dl> <dl class="py class"> <dt class="sig sig-object py" id="jinja-globals.cycler">
<code>class jinja-globals.cycler(\*items)</code> </dt> <dd>
<p>Cycle through values by yielding them one at a time, then restarting once the end is reached.</p> <p>Similar to <code>loop.cycle</code>, but can be used outside loops or across multiple loops. For example, render a list of folders and files in a list, alternating giving them “odd” and “even” classes.</p> <pre data-language="html+jinja">{% set row_class = cycler("odd", "even") %}
&lt;ul class="browser"&gt;
{% for folder in folders %}
  &lt;li class="folder {{ row_class.next() }}"&gt;{{ folder }}
{% endfor %}
{% for file in files %}
  &lt;li class="file {{ row_class.next() }}"&gt;{{ file }}
{% endfor %}
&lt;/ul&gt;
</pre> <dl class="field-list simple"> <dt class="field-odd">Parameters<span class="colon">:</span>
</dt> <dd class="field-odd">
<p><strong>items</strong> – Each positional argument will be yielded in the order given for each cycle.</p> </dd> </dl> <details class="changelog"> <summary>Changelog</summary><div class="versionadded"> <p><span class="versionmodified added">New in version 2.1.</span></p> </div> </details><dl class="py property"> <dt class="sig sig-object py" id="jinja-globals.cycler.current">
<code>property current</code> </dt> <dd>
<p>Return the current item. Equivalent to the item that will be returned next time <a class="reference internal" href="#jinja-globals.cycler.next" title="jinja-globals.cycler.next"><code>next()</code></a> is called.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="jinja-globals.cycler.next">
<code>next()</code> </dt> <dd>
<p>Return the current item, then advance <a class="reference internal" href="#jinja-globals.cycler.current" title="jinja-globals.cycler.current"><code>current</code></a> to the next item.</p> </dd>
</dl> <dl class="py method"> <dt class="sig sig-object py" id="jinja-globals.cycler.reset">
<code>reset()</code> </dt> <dd>
<p>Resets the current item to the first item.</p> </dd>
</dl> </dd>
</dl> <dl class="py class"> <dt class="sig sig-object py" id="jinja-globals.joiner">
<code>class jinja-globals.joiner(sep=', ')</code> </dt> <dd>
<p>A tiny helper that can be used to “join” multiple sections. A joiner is passed a string and will return that string every time it’s called, except the first time (in which case it returns an empty string). You can use this to join things:</p> <pre data-language="html+jinja">{% set pipe = joiner("|") %}
{% if categories %} {{ pipe() }}
    Categories: {{ categories|join(", ") }}
{% endif %}
{% if author %} {{ pipe() }}
    Author: {{ author() }}
{% endif %}
{% if can_edit %} {{ pipe() }}
    &lt;a href="?action=edit.html"&gt;Edit&lt;/a&gt;
{% endif %}
</pre> <details class="changelog"> <summary>Changelog</summary><div class="versionadded"> <p><span class="versionmodified added">New in version 2.1.</span></p> </div> </details>
</dd>
</dl> <dl class="py class"> <dt class="sig sig-object py" id="jinja-globals.namespace">
<code>class jinja-globals.namespace(...)</code> </dt> <dd>
<p>Creates a new container that allows attribute assignment using the <code>{% set %}</code> tag:</p> <pre data-language="html+jinja">{% set ns = namespace() %}
{% set ns.foo = 'bar' %}
</pre> <p>The main purpose of this is to allow carrying a value from within a loop body to an outer scope. Initial values can be provided as a dict, as keyword arguments, or both (same behavior as Python’s <code>dict</code> constructor):</p> <pre data-language="html+jinja">{% set ns = namespace(found=false) %}
{% for item in items %}
    {% if item.check_something() %}
        {% set ns.found = true %}
    {% endif %}
    * {{ item.title }}
{% endfor %}
Found item having something: {{ ns.found }}
</pre> <details class="changelog"> <summary>Changelog</summary><div class="versionadded"> <p><span class="versionmodified added">New in version 2.10.</span></p> </div> </details>
</dd>
</dl> </section> <section id="extensions"> <h2>Extensions</h2> <p>The following sections cover the built-in Jinja extensions that may be enabled by an application. An application could also provide further extensions not covered by this documentation; in which case there should be a separate document explaining said <a class="reference internal" href="../extensions/index.html#jinja-extensions"><span class="std std-ref">extensions</span></a>.</p> <section id="i18n"> <h3 id="i18n-in-templates">i18n</h3> <p>If the <a class="reference internal" href="../extensions/index.html#i18n-extension"><span class="std std-ref">i18n Extension</span></a> is enabled, it’s possible to mark text in the template as translatable. To mark a section as translatable, use a <code>trans</code> block:</p> <pre data-language="jinja">{% trans %}Hello, {{ user }}!{% endtrans %}
</pre> <p>Inside the block, no statements are allowed, only text and simple variable tags.</p> <p>Variable tags can only be a name, not attribute access, filters, or other expressions. To use an expression, bind it to a name in the <code>trans</code> tag for use in the block.</p> <pre data-language="jinja">{% trans user=user.username %}Hello, {{ user }}!{% endtrans %}
</pre> <p>To bind more than one expression, separate each with a comma (<code>,</code>).</p> <pre data-language="jinja">{% trans book_title=book.title, author=author.name %}
This is {{ book_title }} by {{ author }}
{% endtrans %}
</pre> <p>To pluralize, specify both the singular and plural forms separated by the <code>pluralize</code> tag.</p> <pre data-language="jinja">{% trans count=list|length %}
There is {{ count }} {{ name }} object.
{% pluralize %}
There are {{ count }} {{ name }} objects.
{% endtrans %}
</pre> <p>By default, the first variable in a block is used to determine whether to use singular or plural form. If that isn’t correct, specify the variable used for pluralizing as a parameter to <code>pluralize</code>.</p> <pre data-language="jinja">{% trans ..., user_count=users|length %}...
{% pluralize user_count %}...{% endtrans %}
</pre> <p>When translating blocks of text, whitespace and linebreaks result in hard to read and error-prone translation strings. To avoid this, a trans block can be marked as trimmed, which will replace all linebreaks and the whitespace surrounding them with a single space and remove leading and trailing whitespace.</p> <pre data-language="jinja">{% trans trimmed book_title=book.title %}
    This is {{ book_title }}.
    You should read it!
{% endtrans %}
</pre> <p>This results in <code>This is %(book_title)s. You should read it!</code> in the translation file.</p> <p>If trimming is enabled globally, the <code>notrimmed</code> modifier can be used to disable it for a block.</p> <details class="changelog"> <summary>Changelog</summary><div class="versionadded"> <p><span class="versionmodified added">New in version 2.10: </span>The <code>trimmed</code> and <code>notrimmed</code> modifiers have been added.</p> </div> </details><p>If the translation depends on the context that the message appears in, the <code>pgettext</code> and <code>npgettext</code> functions take a <code>context</code> string as the first argument, which is used to select the appropriate translation. To specify a context with the <code>{% trans %}</code> tag, provide a string as the first token after <code>trans</code>.</p> <pre data-language="jinja">{% trans "fruit" %}apple{% endtrans %}
{% trans "fruit" trimmed count -%}
    1 apple
{%- pluralize -%}
    {{ count }} apples
{%- endtrans %}
</pre> <div class="versionadded"> <p><span class="versionmodified added">New in version 3.1: </span>A context can be passed to the <code>trans</code> tag to use <code>pgettext</code> and <code>npgettext</code>.</p> </div> <p>It’s possible to translate strings in expressions with these functions:</p> <ul class="simple"> <li>
<code>_(message)</code>: Alias for <code>gettext</code>.</li> <li>
<code>gettext(message)</code>: Translate a message.</li> <li>
<code>ngettext(singluar, plural, n)</code>: Translate a singular or plural message based on a count variable.</li> <li>
<code>pgettext(context, message)</code>: Like <code>gettext()</code>, but picks the translation based on the context string.</li> <li>
<code>npgettext(context, singular, plural, n)</code>: Like <code>npgettext()</code>, but picks the translation based on the context string.</li> </ul> <p>You can print a translated string like this:</p> <pre data-language="jinja">{{ _("Hello, World!") }}
</pre> <p>To use placeholders, use the <code>format</code> filter.</p> <pre data-language="jinja">{{ _("Hello, %(user)s!")|format(user=user.username) }}
</pre> <p>Always use keyword arguments to <code>format</code>, as other languages may not use the words in the same order.</p> <p>If <a class="reference internal" href="../extensions/index.html#newstyle-gettext"><span class="std std-ref">New Style Gettext</span></a> calls are activated, using placeholders is easier. Formatting is part of the <code>gettext</code> call instead of using the <code>format</code> filter.</p> <pre data-language="jinja">{{ gettext('Hello World!') }}
{{ gettext('Hello %(name)s!', name='World') }}
{{ ngettext('%(num)d apple', '%(num)d apples', apples|count) }}
</pre> <p>The <code>ngettext</code> function’s format string automatically receives the count as a <code>num</code> parameter in addition to the given parameters.</p> </section> <section id="expression-statement"> <h3>Expression Statement</h3> <p>If the expression-statement extension is loaded, a tag called <code>do</code> is available that works exactly like the regular variable expression (<code>{{ ... }}</code>); except it doesn’t print anything. This can be used to modify lists:</p> <pre data-language="html+jinja">{% do navigation.append('a string') %}
</pre> </section> <section id="loop-controls"> <h3>Loop Controls</h3> <p>If the application enables the <a class="reference internal" href="../extensions/index.html#loopcontrols-extension"><span class="std std-ref">Loop Controls</span></a>, it’s possible to use <code>break</code> and <code>continue</code> in loops. When <code>break</code> is reached, the loop is terminated; if <code>continue</code> is reached, the processing is stopped and continues with the next iteration.</p> <p>Here’s a loop that skips every second item:</p> <pre data-language="html+jinja">{% for user in users %}
    {%- if loop.index is even %}{% continue %}{% endif %}
    ...
{% endfor %}
</pre> <p>Likewise, a loop that stops processing after the 10th iteration:</p> <pre data-language="html+jinja">{% for user in users %}
    {%- if loop.index &gt;= 10 %}{% break %}{% endif %}
{%- endfor %}
</pre> <p>Note that <code>loop.index</code> starts with 1, and <code>loop.index0</code> starts with 0 (See: <a class="reference internal" href="#for-loop"><span class="std std-ref">For</span></a>).</p> </section> <section id="debug-statement"> <h3>Debug Statement</h3> <p>If the <a class="reference internal" href="../extensions/index.html#debug-extension"><span class="std std-ref">Debug Extension</span></a> is enabled, a <code>{% debug %}</code> tag will be available to dump the current context as well as the available filters and tests. This is useful to see what’s available to use in the template without setting up a debugger.</p> <pre data-language="html+jinja">&lt;pre&gt;{% debug %}&lt;/pre&gt;
</pre> <pre data-language="text">{'context': {'cycler': &lt;class 'jinja2.utils.Cycler'&gt;,
             ...,
             'namespace': &lt;class 'jinja2.utils.Namespace'&gt;},
 'filters': ['abs', 'attr', 'batch', 'capitalize', 'center', 'count', 'd',
             ..., 'urlencode', 'urlize', 'wordcount', 'wordwrap', 'xmlattr'],
 'tests': ['!=', '&lt;', '&lt;=', '==', '&gt;', '&gt;=', 'callable', 'defined',
           ..., 'odd', 'sameas', 'sequence', 'string', 'undefined', 'upper']}
</pre> </section> <section id="with-statement"> <h3>With Statement</h3> <details class="changelog"> <summary>Changelog</summary><div class="versionadded"> <p><span class="versionmodified added">New in version 2.3.</span></p> </div> </details><p>The with statement makes it possible to create a new inner scope. Variables set within this scope are not visible outside of the scope.</p> <p>With in a nutshell:</p> <pre data-language="html+jinja">{% with %}
    {% set foo = 42 %}
    {{ foo }}           foo is 42 here
{% endwith %}
foo is not visible here any longer
</pre> <p>Because it is common to set variables at the beginning of the scope, you can do that within the <code>with</code> statement. The following two examples are equivalent:</p> <pre data-language="html+jinja">{% with foo = 42 %}
    {{ foo }}
{% endwith %}

{% with %}
    {% set foo = 42 %}
    {{ foo }}
{% endwith %}
</pre> <p>An important note on scoping here. In Jinja versions before 2.9 the behavior of referencing one variable to another had some unintended consequences. In particular one variable could refer to another defined in the same with block’s opening statement. This caused issues with the cleaned up scoping behavior and has since been improved. In particular in newer Jinja versions the following code always refers to the variable <code>a</code> from outside the <code>with</code> block:</p> <pre data-language="html+jinja">{% with a={}, b=a.attribute %}...{% endwith %}
</pre> <p>In earlier Jinja versions the <code>b</code> attribute would refer to the results of the first attribute. If you depend on this behavior you can rewrite it to use the <code>set</code> tag:</p> <pre data-language="html+jinja">{% with a={} %}
    {% set b = a.attribute %}
{% endwith %}
</pre> <div class="admonition-extension admonition"> <p class="admonition-title">Extension</p> <p>In older versions of Jinja (before 2.9) it was required to enable this feature with an extension. It’s now enabled by default.</p> </div> </section> </section> <section id="autoescape-overrides"> <h2 id="id19">Autoescape Overrides</h2> <details class="changelog"> <summary>Changelog</summary><div class="versionadded"> <p><span class="versionmodified added">New in version 2.4.</span></p> </div> </details><p>If you want you can activate and deactivate the autoescaping from within the templates.</p> <p>Example:</p> <pre data-language="html+jinja">{% autoescape true %}
    Autoescaping is active within this block
{% endautoescape %}

{% autoescape false %}
    Autoescaping is inactive within this block
{% endautoescape %}
</pre> <p>After an <code>endautoescape</code> the behavior is reverted to what it was before.</p> <div class="admonition-extension admonition"> <p class="admonition-title">Extension</p> <p>In older versions of Jinja (before 2.9) it was required to enable this feature with an extension. It’s now enabled by default.</p> </div> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2007&ndash;2021 Pallets<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://jinja.palletsprojects.com/en/3.1.x/templates/" class="_attribution-link">https://jinja.palletsprojects.com/en/3.1.x/templates/</a>
  </p>
</div>
