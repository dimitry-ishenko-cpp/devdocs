     <h1 class="fancy_title"> The SQLITE_MEMSTAT Virtual Table </h1>  <h2 id="overview">
<span>1. </span>Overview</h2> <p> The SQLITE_MEMSTAT extension implements an <a href="vtab.html#epoonlyvtab">eponymous-only virtual table</a> that provides SQL access to the <a href="c3ref/status.html">sqlite3_status64()</a> and <a href="c3ref/db_status.html">sqlite3_db_status()</a> interfaces. </p> <p> The SQLITE_STMT extension can also be loaded at run-time by compiling the extension into a shared library or DLL using the source code at <a href="https://sqlite.org/src/file/ext/misc/memstat.c">https://sqlite.org/src/file/ext/misc/memstat.c</a> and following the instructions for how to <a href="loadext.html#build">compile loadable extensions</a>. </p> <h2 id="usage">
<span>2. </span>Usage</h2> <p> The SQLITE_MEMSTAT virtual table is a read-only table that can be queried to determine performance characteristics (primarily the amount of memory being used) of the current instance of SQLite. The SQLITE_MEMSTATE table is essentially a wrapper around the C-language APIs <a href="c3ref/status.html">sqlite3_status64()</a> and <a href="c3ref/db_status.html">sqlite3_db_status()</a>. If the <a href="https://sqlite.org/src/file/ext/misc/memstat.c">memstat.c</a> source file is compiled with the -DSQLITE_ENABLE_ZIPVFS option, then SQLITE_MEMSTAT will also do some <a href="c3ref/file_control.html">file-control</a> calls to extract memory usage information about the <a href="https://www.hwaci.com/sw/sqlite/zipvfs.html">ZIPVFS</a> subsystem, if that subsystem as been licensed, installed, and is in use. </p>
<p> The SQLITE_MEMSTAT table appears to have the following schema: </p>
<pre data-language="sql">CREATE TABLE sqlite_memstat(
  name TEXT,
  schema TEXT,
  value INT,
  hiwtr INT
);
</pre> <p> Each row of the SQLITE_MEMSTAT table corresponds to a single call to one of the <a href="c3ref/status.html">sqlite3_status64()</a> or <a href="c3ref/db_status.html">sqlite3_db_status()</a> interfaces. The NAME column of the row identifies which "verb" was passed to those interfaces. For example, if <a href="c3ref/status.html">sqlite3_status64()</a> is invoked with <a href="c3ref/c_status_malloc_count.html#sqlitestatusmemoryused">SQLITE_STATUS_MEMORY_USED</a>, then the NAME column is 'MEMORY_USED'. Or if <a href="c3ref/db_status.html">sqlite3_db_status()</a> is invoked with <a href="c3ref/c_dbstatus_options.html#sqlitedbstatuscacheused">SQLITE_DBSTATUS_CACHE_USED</a>, then the NAME column is "DB_CACHE_USED". </p>
<p> The SCHEMA column is NULL, except for cases when the <a href="c3ref/file_control.html">sqlite3_file_control()</a> interface is used to interrogate the ZIPVFS backend. As this only happens when the memstat.c module is compiled with -DSQLITE_ENABLE_ZIPVFS and when <a href="https://www.hwaci.com/sw/sqlite/zipvfs.html">ZIPVFS</a> is in use, SCHEMA is usually NULL. </p>
<p> The VALUE and HIWTR columns report the current value of the measure and its "high-water mark". The high-water mark is the highest value ever seen for the measurement, at least since the last reset. The SQLITE_MEMSTAT virtual table does not provide a mechanism for resetting the high-water mark. </p>
<p> Depending on which parameter is being interrogated, one of the VALUE or HIWTR mark measurements might be undefined. For example, only the high-water mark is meaningful for <a href="c3ref/c_status_malloc_count.html#sqlitestatusmallocsize">SQLITE_STATUS_MALLOC_SIZE</a>, and only the current value is meaningful for <a href="c3ref/c_dbstatus_options.html#sqlitedbstatuscacheused">SQLITE_DBSTATUS_CACHE_USED</a>. For rows where one or the other of VALUE or HIWTR is not meaningful, that value is returned as NULL. the interfaces, with the initial </p>
<p><small><i>This page last modified on <a href="https://sqlite.org/docsrc/honeypot" id="mtimelink" data-href="https://sqlite.org/docsrc/finfo/pages/memstat.in?m=4d88e885eb">2022-01-08 05:02:57</a> UTC </i></small></p> <div class="_attribution">
  <p class="_attribution-p">
    SQLite is in the Public Domain.<br>
    <a href="https://sqlite.org/memstat.html" class="_attribution-link">https://sqlite.org/memstat.html</a>
  </p>
</div>
