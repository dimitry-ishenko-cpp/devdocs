      <h1>Retrieving Statement SQL</h1>  <pre data-language="sql">
const char *sqlite3_sql(sqlite3_stmt *pStmt);
char *sqlite3_expanded_sql(sqlite3_stmt *pStmt);
#ifdef SQLITE_ENABLE_NORMALIZE
const char *sqlite3_normalized_sql(sqlite3_stmt *pStmt);
#endif
</pre> <p> The sqlite3_sql(P) interface returns a pointer to a copy of the UTF-8 SQL text used to create <a href="stmt.html">prepared statement</a> P if P was created by <a href="prepare.html">sqlite3_prepare_v2()</a>, <a href="prepare.html">sqlite3_prepare_v3()</a>, <a href="prepare.html">sqlite3_prepare16_v2()</a>, or <a href="prepare.html">sqlite3_prepare16_v3()</a>. The sqlite3_expanded_sql(P) interface returns a pointer to a UTF-8 string containing the SQL text of prepared statement P with <a href="../lang_expr.html#varparam">bound parameters</a> expanded. The sqlite3_normalized_sql(P) interface returns a pointer to a UTF-8 string containing the normalized SQL text of prepared statement P. The semantics used to normalize a SQL statement are unspecified and subject to change. At a minimum, literal values will be replaced with suitable placeholders.</p> <p>For example, if a prepared statement is created using the SQL text "SELECT $abc,:xyz" and if parameter $abc is bound to integer 2345 and parameter :xyz is unbound, then sqlite3_sql() will return the original string, "SELECT $abc,:xyz" but sqlite3_expanded_sql() will return "SELECT 2345,NULL".</p> <p>The sqlite3_expanded_sql() interface returns NULL if insufficient memory is available to hold the result, or if the result would exceed the the maximum string length determined by the <a href="c_limit_attached.html#sqlitelimitlength">SQLITE_LIMIT_LENGTH</a>.</p> <p>The <a href="../compile.html#trace_size_limit">SQLITE_TRACE_SIZE_LIMIT</a> compile-time option limits the size of bound parameter expansions. The <a href="../compile.html#omit_trace">SQLITE_OMIT_TRACE</a> compile-time option causes sqlite3_expanded_sql() to always return NULL.</p> <p>The strings returned by sqlite3_sql(P) and sqlite3_normalized_sql(P) are managed by SQLite and are automatically freed when the prepared statement is finalized. The string returned by sqlite3_expanded_sql(P), on the other hand, is obtained from <a href="free.html">sqlite3_malloc()</a> and must be freed by the application by passing it to <a href="free.html">sqlite3_free()</a>.</p> <p>The sqlite3_normalized_sql() interface is only available if the <a href="../compile.html#enable_normalize">SQLITE_ENABLE_NORMALIZE</a> compile-time option is defined. </p>
<p>See also lists of <a href="objlist.html">Objects</a>, <a href="constlist.html">Constants</a>, and <a href="funclist.html">Functions</a>.</p> <div class="_attribution">
  <p class="_attribution-p">
    SQLite is in the Public Domain.<br>
    <a href="https://sqlite.org/c3ref/expanded_sql.html" class="_attribution-link">https://sqlite.org/c3ref/expanded_sql.html</a>
  </p>
</div>
