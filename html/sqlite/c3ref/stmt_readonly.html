      <h1>Determine If An SQL Statement Writes The Database</h1>  <pre data-language="sql">
int sqlite3_stmt_readonly(sqlite3_stmt *pStmt);
</pre> <p> The sqlite3_stmt_readonly(X) interface returns true (non-zero) if and only if the <a href="stmt.html">prepared statement</a> X makes no direct changes to the content of the database file.</p> <p>Note that <a href="../appfunc.html">application-defined SQL functions</a> or <a href="../vtab.html">virtual tables</a> might change the database indirectly as a side effect. For example, if an application defines a function "eval()" that calls <a href="exec.html">sqlite3_exec()</a>, then the following SQL statement would change the database file through side-effects:</p> <p></p>
<pre data-language="sql">
SELECT eval('DELETE FROM t1') FROM t2;
</pre> <p>But because the <a href="../lang_select.html">SELECT</a> statement does not change the database file directly, sqlite3_stmt_readonly() would still return true.</p> <p>Transaction control statements such as <a href="../lang_transaction.html">BEGIN</a>, <a href="../lang_transaction.html">COMMIT</a>, <a href="../lang_transaction.html">ROLLBACK</a>, <a href="../lang_savepoint.html">SAVEPOINT</a>, and <a href="../lang_savepoint.html">RELEASE</a> cause sqlite3_stmt_readonly() to return true, since the statements themselves do not actually modify the database but rather they control the timing of when other statements modify the database. The <a href="../lang_attach.html">ATTACH</a> and <a href="../lang_detach.html">DETACH</a> statements also cause sqlite3_stmt_readonly() to return true since, while those statements change the configuration of a database connection, they do not make changes to the content of the database files on disk. The sqlite3_stmt_readonly() interface returns true for <a href="../lang_transaction.html">BEGIN</a> since <a href="../lang_transaction.html">BEGIN</a> merely sets internal flags, but the <a href="../lang_transaction.html">BEGIN IMMEDIATE</a> and <a href="../lang_transaction.html">BEGIN EXCLUSIVE</a> commands do touch the database and so sqlite3_stmt_readonly() returns false for those commands.</p> <p>This routine returns false if there is any possibility that the statement might change the database file. A false return does not guarantee that the statement will change the database file. For example, an UPDATE statement might have a WHERE clause that makes it a no-op, but the sqlite3_stmt_readonly() result would still be false. Similarly, a CREATE TABLE IF NOT EXISTS statement is a read-only no-op if the table already exists, but sqlite3_stmt_readonly() still returns false for such a statement.</p> <p>If prepared statement X is an <a href="../lang_explain.html">EXPLAIN</a> or <a href="../eqp.html">EXPLAIN QUERY PLAN</a> statement, then sqlite3_stmt_readonly(X) returns the same value as if the EXPLAIN or EXPLAIN QUERY PLAN prefix were omitted. </p>
<p>See also lists of <a href="objlist.html">Objects</a>, <a href="constlist.html">Constants</a>, and <a href="funclist.html">Functions</a>.</p> <div class="_attribution">
  <p class="_attribution-p">
    SQLite is in the Public Domain.<br>
    <a href="https://sqlite.org/c3ref/stmt_readonly.html" class="_attribution-link">https://sqlite.org/c3ref/stmt_readonly.html</a>
  </p>
</div>
