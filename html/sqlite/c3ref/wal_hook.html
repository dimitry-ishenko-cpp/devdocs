      <h1>Write-Ahead Log Commit Hook</h1>  <pre data-language="sql">
void *sqlite3_wal_hook(
  sqlite3*,
  int(*)(void *,sqlite3*,const char*,int),
  void*
);
</pre> <p> The <a href="wal_hook.html">sqlite3_wal_hook()</a> function is used to register a callback that is invoked each time data is committed to a database in wal mode.</p> <p>The callback is invoked by SQLite after the commit has taken place and the associated write-lock on the database released, so the implementation may read, write or <a href="../wal.html#ckpt">checkpoint</a> the database as required.</p> <p>The first parameter passed to the callback function when it is invoked is a copy of the third parameter passed to sqlite3_wal_hook() when registering the callback. The second is a copy of the database handle. The third parameter is the name of the database that was written to - either "main" or the name of an <a href="../lang_attach.html">ATTACH</a>-ed database. The fourth parameter is the number of pages currently in the write-ahead log file, including those that were just committed.</p> <p>The callback function should normally return <a href="../rescode.html#ok">SQLITE_OK</a>. If an error code is returned, that error will propagate back up through the SQLite code base to cause the statement that provoked the callback to report an error, though the commit will have still occurred. If the callback returns <a href="../rescode.html#row">SQLITE_ROW</a> or <a href="../rescode.html#done">SQLITE_DONE</a>, or if it returns a value that does not correspond to any valid SQLite error code, the results are undefined.</p> <p>A single database handle may have at most a single write-ahead log callback registered at one time. Calling <a href="wal_hook.html">sqlite3_wal_hook()</a> replaces any previously registered write-ahead log callback. The return value is a copy of the third parameter from the previous call, if any, or 0. Note that the <a href="wal_autocheckpoint.html">sqlite3_wal_autocheckpoint()</a> interface and the <a href="../pragma.html#pragma_wal_autocheckpoint">wal_autocheckpoint pragma</a> both invoke <a href="wal_hook.html">sqlite3_wal_hook()</a> and will overwrite any prior <a href="wal_hook.html">sqlite3_wal_hook()</a> settings. </p>
<p>See also lists of <a href="objlist.html">Objects</a>, <a href="constlist.html">Constants</a>, and <a href="funclist.html">Functions</a>.</p> <div class="_attribution">
  <p class="_attribution-p">
    SQLite is in the Public Domain.<br>
    <a href="https://sqlite.org/c3ref/wal_hook.html" class="_attribution-link">https://sqlite.org/c3ref/wal_hook.html</a>
  </p>
</div>
