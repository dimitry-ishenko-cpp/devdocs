    <h1 id="firstHeading" class="firstHeading">std::weak_ptr&lt;T&gt;::swap</h1>            <table class="t-dcl-begin"> <tr class="t-dcl t-since-cxx11"> <td> <pre data-language="cpp">void swap( weak_ptr&amp; r ) noexcept;</pre>
</td> <td class="t-dcl-nopad"> </td> <td> <span class="t-mark-rev t-since-cxx11">(since C++11)</span> </td> </tr>  </table> <p>Exchanges the stored pointer values and the ownerships of <code>*this</code> and <code>r</code>. Reference counts, if any, are not adjusted.</p>
<h3 id="Parameters"> Parameters</h3> <table class="t-par-begin"> <tr class="t-par"> <td> r </td> <td> - </td> <td> smart pointer to exchange the contents with </td>
</tr>
</table> <h3 id="Return_value"> Return value</h3> <p>(none)</p>
<h3 id="Example"> Example</h3> <div class="t-example"> <div class="cpp source-cpp"><pre data-language="cpp">#include &lt;iostream&gt;
#include &lt;memory&gt;
#include &lt;string&gt;
 
struct Foo
{
    Foo(int _val) : val(_val) { std::cout &lt;&lt; "Foo...\n"; }
    ~Foo() { std::cout &lt;&lt; "~Foo...\n"; }
    std::string print() { return std::to_string(val); }
    int val;
};
 
int main()
{
    std::shared_ptr&lt;Foo&gt; sp1 = std::make_shared&lt;Foo&gt;(100);
    std::shared_ptr&lt;Foo&gt; sp2 = std::make_shared&lt;Foo&gt;(200);
    std::weak_ptr&lt;Foo&gt; wp1 = sp1;
    std::weak_ptr&lt;Foo&gt; wp2 = sp2;
    auto print = [&amp;]()
    {
        auto p1 = wp1.lock();
        auto p2 = wp2.lock();
        std::cout &lt;&lt; " p1=" &lt;&lt; (p1 ? p1-&gt;print() : "nullptr");
        std::cout &lt;&lt; " p2=" &lt;&lt; (p2 ? p2-&gt;print() : "nullptr") &lt;&lt; '\n';  
    };
    print();
 
    wp1.swap(wp2);
    print();
 
    wp1.reset();
    print();
 
    wp1.swap(wp2);
    print();   
}</pre></div> <p>Output:</p>
<div class="text source-text"><pre data-language="c">Foo...
Foo...
 p1=100 p2=200
 p1=200 p2=100
 p1=nullptr p2=100
 p1=100 p2=nullptr
~Foo...
~Foo...</pre></div> </div>           <div class="_attribution">
  <p class="_attribution-p">
    &copy; cppreference.com<br>Licensed under the Creative Commons Attribution-ShareAlike Unported License v3.0.<br>
    <a href="https://en.cppreference.com/w/cpp/memory/weak_ptr/swap" class="_attribution-link">https://en.cppreference.com/w/cpp/memory/weak_ptr/swap</a>
  </p>
</div>
