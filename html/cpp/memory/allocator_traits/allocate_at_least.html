    <h1 id="firstHeading" class="firstHeading">std::allocator_traits&lt;Alloc&gt;::allocate_at_least</h1>            <table class="t-dcl-begin"> <tr class="t-dcl t-since-cxx23"> <td> <pre data-language="cpp">[[nodiscard]] static constexpr std::allocation_result&lt;pointer, size_type&gt;
    allocate_at_least( Alloc&amp; a, size_type n );</pre>
</td> <td class="t-dcl-nopad"> </td> <td> <span class="t-mark-rev t-since-cxx23">(since C++23)</span> </td> </tr>  </table> <p><code>allocate_at_least</code> calls <code>a.allocate_at_least(n)</code> and returns its result if the call is well-formed, otherwise, it is equivalent to <code>return {a.allocate(n), n};</code>.</p>
<p><code>allocator_at_least</code> tries to allocate a storage for at least <code>n</code> <code>value_type</code> objects, and provides a fallback mechanism that allocates a storage for exact <code>n</code> objects.</p>
<h3 id="Parameters"> Parameters</h3> <table class="t-par-begin"> <tr class="t-par"> <td> a </td> <td> - </td> <td> an allocator used for allocating storage </td>
</tr> <tr class="t-par"> <td> n </td> <td> - </td> <td> the lower bound of number of objects to allocate storage for </td>
</tr>
</table> <h3 id="Return_value"> Return value</h3> <p><code>a.allocate_at_least(n)</code> if it is well-formed.</p>
<p>Otherwise, <code><a href="http://en.cppreference.com/w/cpp/memory/allocation_result"><span class="kw3373">std::<span class="me2">allocation_result</span></span></a><span class="sy1">&lt;</span>pointer, size_type<span class="sy1">&gt;</span><span class="br0">{</span>a.<span class="me1">allocate</span><span class="br0">(</span>n<span class="br0">)</span>, n<span class="br0">}</span></code>.</p>
<h3 id="Exceptions"> Exceptions</h3> <p>Throws what and when the selected allocation function throws.</p>
<h3 id="Notes"> Notes</h3> <p>The <code>allocate_at_least</code> member function of <a href="../../named_req/allocator.html" title="cpp/named req/Allocator">Allocator</a> types are mainly provided for contiguous containers, e.g. <code><a href="../../container/vector.html" title="cpp/container/vector">std::vector</a></code> and <code><a href="../../string/basic_string.html" title="cpp/string/basic string">std::basic_string</a></code>, in order to reduce reallocation by making their capacity match the actually allocated size when possible. Because <code>allocate_at_least</code> provides a fallback mechanism, it can be directly used where appropriate.</p>
<p>Given an allocator object <code>a</code> of type <code>Alloc</code>, let <code>result</code> denote the value returned from <code><a href="http://en.cppreference.com/w/cpp/memory/allocator_traits"><span class="kw703">std::<span class="me2">allocator_traits</span></span></a><span class="sy1">&lt;</span>Alloc<span class="sy1">&gt;</span><span class="sy4">::</span><span class="me2">allocate_at_least</span><span class="br0">(</span>a, n<span class="br0">)</span></code>, the storage should be deallocated by <code>a.deallocate(result.ptr, m)</code> (typically called via <code><a href="http://en.cppreference.com/w/cpp/memory/allocator_traits"><span class="kw703">std::<span class="me2">allocator_traits</span></span></a><span class="sy1">&lt;</span>Alloc<span class="sy1">&gt;</span><span class="sy4">::</span><span class="me2">deallocate</span><span class="br0">(</span>a, result.<span class="me1">ptr</span>, m<span class="br0">)</span></code>) in order to avoid memory leak.</p>
<p>The argument <code>m</code> used in deallocation must be not less than <code>n</code> and not greater than <code>result.count</code>, otherwise, the behavior is undefined. Note that <code>n</code> is always equal to <code>result.count</code> if the allocator does not provide <code>allocate_at_least</code>, which means that <code>m</code> is required to be equal to <code>n</code>.</p>
<table class="wikitable ftm-begin ftm-has-value"> <tr> <th>
<a href="../../utility/feature_test.html" title="cpp/utility/feature test">Feature-test</a> macro</th> <th>Value</th> <th><span title="Standard in which the feature is introduced">Std</span></th> <th>Feature </th>
</tr> <tr> <td><a href="../../feature_test.html#cpp_lib_allocate_at_least" title="cpp/feature test"><code>__cpp_lib_allocate_at_least</code></a></td> <td><span class="nu0">202302L</span></td> <td><span class="t-mark">(C++23)</span></td> <td>
<a href="#top"><code>allocate_at_least</code></a> etc. </td>
</tr>
</table> <h3 id="Example"> Example</h3>  <h3 id="See_also"> See also</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="../allocator/allocate_at_least.html" title="cpp/memory/allocator/allocate at least"> <span class="t-lines"><span>allocate_at_least</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx23">(C++23)</span></span></span></div> </td> <td> allocates uninitialized storage at least as large as requested size <br> <span class="t-mark">(public member function of <code>std::allocator&lt;T&gt;</code>)</span>  </td>
</tr> </table>           <div class="_attribution">
  <p class="_attribution-p">
    &copy; cppreference.com<br>Licensed under the Creative Commons Attribution-ShareAlike Unported License v3.0.<br>
    <a href="https://en.cppreference.com/w/cpp/memory/allocator_traits/allocate_at_least" class="_attribution-link">https://en.cppreference.com/w/cpp/memory/allocator_traits/allocate_at_least</a>
  </p>
</div>
