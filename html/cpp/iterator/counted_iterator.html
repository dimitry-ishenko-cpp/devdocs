    <h1 id="firstHeading" class="firstHeading">std::counted_iterator</h1>            <table class="t-dcl-begin"> <tr class="t-dsc-header"> <th> Defined in header <code><a href="../header/iterator.html" title="cpp/header/iterator">&lt;iterator&gt;</a></code> </th> <th> </th> <th> </th> </tr> <tr class="t-dcl t-since-cxx20"> <td> <pre data-language="cpp">template&lt; std::input_or_output_iterator I &gt;
class counted_iterator;</pre>
</td> <td class="t-dcl-nopad"> </td> <td> <span class="t-mark-rev t-since-cxx20">(since C++20)</span> </td> </tr>  </table> <p><code>std::counted_iterator</code> is an iterator adaptor which behaves exactly like the underlying iterator, except that it keeps track of the distance to the end of its range. This iterator is equal to <code><a href="default_sentinel_t.html" title="cpp/iterator/default sentinel t">std::default_sentinel</a></code> if and only if its count reaches zero.</p>
<h3 id="Member_types"> Member types</h3> <table class="t-dsc-begin"> <tr class="t-dsc-hitem"> <th> Member type </th> <th> Definition </th>
</tr> <tr class="t-dsc"> <td> <code>iterator_type</code> </td> <td> <code>I</code> </td>
</tr> <tr class="t-dsc"> <td> <code>value_type</code> </td> <td> <code><a href="http://en.cppreference.com/w/cpp/iterator/iter_t"><span class="kw2872">std::<span class="me2">iter_value_t</span></span></a><span class="sy1">&lt;</span>I<span class="sy1">&gt;</span></code> if <code>I</code> models <a href="indirectly_readable.html" title="cpp/iterator/indirectly readable"><code>indirectly_readable</code></a>; otherwise, not defined </td>
</tr> <tr class="t-dsc"> <td> <code>difference_type</code> </td> <td> <code><a href="http://en.cppreference.com/w/cpp/iterator/iter_t"><span class="kw2875">std::<span class="me2">iter_difference_t</span></span></a><span class="sy1">&lt;</span>I<span class="sy1">&gt;</span></code> </td>
</tr> <tr class="t-dsc"> <td> <code>iterator_concept</code> </td> <td> <code>I::iterator_concept</code> if present; otherwise, not defined </td>
</tr> <tr class="t-dsc"> <td> <code>iterator_category</code> </td> <td> <code>I::iterator_category</code> if present; otherwise, not defined </td>
</tr> </table> <h3 id="Member_objects"> Member objects</h3> <table class="t-dsc-begin"> <tr class="t-dsc-hitem"> <th> Member name </th> <th> Definition </th>
</tr> <tr class="t-dsc"> <td> <code><i>current</i></code> <span class="t-mark">(private)</span> </td> <td> the underlying iterator which <a href="counted_iterator/base.html" title="cpp/iterator/counted iterator/base"><code>base()</code></a> accesses<br><span class="t-mark t-mark-expos">(<span title="This definition is for illustration purposes only. An implementation does not need to define an entity in this manner. The name of this entity is unspecified.">exposition-only member object*</span>)</span> </td>
</tr> <tr class="t-dsc"> <td> <code><i>length</i></code> <span class="t-mark">(private)</span> </td> <td> the distance between the underlying iterator and the end of its range<br><span class="t-mark t-mark-expos">(<span title="This definition is for illustration purposes only. An implementation does not need to define an entity in this manner. The name of this entity is unspecified.">exposition-only member object*</span>)</span> </td>
</tr> </table> <h3 id="Member_functions"> Member functions</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="counted_iterator/counted_iterator.html" title="cpp/iterator/counted iterator/counted iterator"> <span class="t-lines"><span>(constructor)</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx20">(C++20)</span></span></span></div> </td> <td> constructs a new iterator adaptor <br> <span class="t-mark">(public member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="counted_iterator/operator=.html" title="cpp/iterator/counted iterator/operator="> <span class="t-lines"><span>operator=</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx20">(C++20)</span></span></span></div> </td> <td> assigns another iterator adaptor <br> <span class="t-mark">(public member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="counted_iterator/base.html" title="cpp/iterator/counted iterator/base"> <span class="t-lines"><span>base</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx20">(C++20)</span></span></span></div> </td> <td> accesses the underlying iterator <br> <span class="t-mark">(public member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="counted_iterator/count.html" title="cpp/iterator/counted iterator/count"> <span class="t-lines"><span>count</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx20">(C++20)</span></span></span></div> </td> <td> returns the distance to the end <br> <span class="t-mark">(public member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="counted_iterator/operator*.html" title="cpp/iterator/counted iterator/operator*"> <span class="t-lines"><span>operator*</span><span>operator-&gt;</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx20">(C++20)</span></span></span></div> </td> <td> accesses the pointed-to element <br> <span class="t-mark">(public member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="counted_iterator/operator_at.html" title="cpp/iterator/counted iterator/operator at"> <span class="t-lines"><span>operator[]</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx20">(C++20)</span></span></span></div> </td> <td> accesses an element by index <br> <span class="t-mark">(public member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="counted_iterator/operator_arith.html" title="cpp/iterator/counted iterator/operator arith"> <span class="t-lines"><span>operator++</span><span>operator++<span class="t-dsc-small">(int)</span></span><span>operator+=</span><span>operator+</span><span>operator--</span><span>operator--<span class="t-dsc-small">(int)</span></span><span>operator-=</span><span>operator-</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx20">(C++20)</span></span></span></div> </td> <td> advances or decrements the iterator <br> <span class="t-mark">(public member function)</span>  </td>
</tr> </table> <h3 id="Non-member_functions"> Non-member functions</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="counted_iterator/operator_cmp.html" title="cpp/iterator/counted iterator/operator cmp"> <span class="t-lines"><span>operator==</span><span>operator&lt;=&gt;</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx20">(C++20)</span></span></span></div> </td> <td> compares the distances to the end <br> <span class="t-mark">(function template)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="counted_iterator/operator_cmp2.html" title="cpp/iterator/counted iterator/operator cmp2"> <span class="t-lines"><span>operator==<span class="t-dsc-small">(std::default_sentinel)</span></span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx20">(C++20)</span></span></span></div> </td> <td> checks if the distance to the end is equal to <code>​0​</code> <br> <span class="t-mark">(function template)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="counted_iterator/operator_plus_.html" title="cpp/iterator/counted iterator/operator+"> <span class="t-lines"><span>operator+</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx20">(C++20)</span></span></span></div> </td> <td> advances the iterator <br> <span class="t-mark">(function template)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="counted_iterator/operator-.html" title="cpp/iterator/counted iterator/operator-"> <span class="t-lines"><span>operator-</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx20">(C++20)</span></span></span></div> </td> <td> computes the distance between two iterator adaptors <br> <span class="t-mark">(function template)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="counted_iterator/operator-2.html" title="cpp/iterator/counted iterator/operator-2"> <span class="t-lines"><span>operator-<span class="t-dsc-small">(std::default_sentinel_t)</span></span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx20">(C++20)</span></span></span></div> </td> <td> computes the signed distance to the end <br> <span class="t-mark">(function template)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="counted_iterator/iter_move.html" title="cpp/iterator/counted iterator/iter move"> <span class="t-lines"><span>iter_move</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx20">(C++20)</span></span></span></div> </td> <td> casts the result of dereferencing the underlying iterator to its associated rvalue reference type <br> <span class="t-mark">(function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="counted_iterator/iter_swap.html" title="cpp/iterator/counted iterator/iter swap"> <span class="t-lines"><span>iter_swap</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx20">(C++20)</span></span></span></div> </td> <td> swaps the objects pointed to by two underlying iterators <br> <span class="t-mark">(function template)</span>  </td>
</tr> </table> <h3 id="Helper_classes"> Helper classes</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="counted_iterator/iterator_traits.html" title="cpp/iterator/counted iterator/iterator traits"> <span class="t-lines"><span>std::iterator_traits<span class="t-dsc-small">&lt;std::counted_iterator&gt;</span></span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx20">(C++20)</span></span></span></div> </td> <td> provides uniform interface to the properties of the <code>std::counted_iterator</code> type <br> <span class="t-mark">(class template specialization)</span>  </td>
</tr> </table> <h3 id="Example"> Example</h3> <div class="t-example"> <div class="cpp source-cpp"><pre data-language="cpp">#include &lt;algorithm&gt;
#include &lt;iostream&gt;
#include &lt;iterator&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
 
using std::operator""s;
 
void print(auto const remark, auto const&amp; v)
{
    const auto size = std::ssize(v);
    std::cout &lt;&lt; remark &lt;&lt; '[' &lt;&lt; size &lt;&lt; "] { ";
    for (auto it = std::counted_iterator{std::cbegin(v), size};
         it != std::default_sentinel; ++it)
        std::cout &lt;&lt; *it &lt;&lt; (it.count() &gt; 1 ? ", " : " ");
    std::cout &lt;&lt; "}\n";
}
 
int main()
{
    const auto src = {"Arcturus"s, "Betelgeuse"s, "Canopus"s, "Deneb"s, "Elnath"s};
    print("src", src);
    std::vector&lt;decltype(src)::value_type&gt; dst;
    std::ranges::copy(std::counted_iterator{src.begin(), 3},
                      std::default_sentinel,
                      std::back_inserter(dst));
    print("dst", dst);
}</pre></div> <p>Output:</p>
<div class="text source-text"><pre data-language="c">src[5] { Arcturus, Betelgeuse, Canopus, Deneb, Elnath }
dst[3] { Arcturus, Betelgeuse, Canopus }</pre></div> </div> <h3 id="Defect_reports"> Defect reports</h3> <p>The following behavior-changing defect reports were applied retroactively to previously published C++ standards.</p>
<table class="dsctable"> <tr> <th>DR </th> <th>Applied to </th> <th>Behavior as published </th> <th>Correct behavior </th>
</tr> <tr> <td>
<a rel="nofollow" class="external text" href="https://wg21.link/P2259R1">P2259R1</a> </td> <td>C++20 </td> <td>member typedefs are not provided <code><a href="incrementable_traits.html" title="cpp/iterator/incrementable traits">std::incrementable_traits</a></code><br>is specialized for <code>counted_iterator</code> </td> <td>member typedefs are added to account for <a href="counted_iterator/iterator_traits.html" title="cpp/iterator/counted iterator/iterator traits"><code>iterator_traits</code></a> fix<br>redundant <code><a href="incrementable_traits.html" title="cpp/iterator/incrementable traits">std::incrementable_traits</a></code> specialization is removed </td>
</tr>
</table> <h3 id="See_also"> See also</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="default_sentinel_t.html" title="cpp/iterator/default sentinel t"> <span class="t-lines"><span>default_sentinel_t</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx20">(C++20)</span></span></span></div> </td> <td> default sentinel for use with iterators that know the bound of their range <br> <span class="t-mark">(class)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../ranges/view_counted.html" title="cpp/ranges/view counted"> <span class="t-lines"><span>views::counted</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx20">(C++20)</span></span></span></div> </td> <td> creates a subrange from an iterator and a count<br><span class="t-mark">(customization point object)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../ranges/take_view.html" title="cpp/ranges/take view"> <span class="t-lines"><span>ranges::take_view</span><span>views::take</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx20">(C++20)</span></span></span></div> </td> <td> a <a href="../ranges/view.html" title="cpp/ranges/view"><code>view</code></a> consisting of the first N elements of another <a href="../ranges/view.html" title="cpp/ranges/view"><code>view</code></a><br><span class="t-mark">(class template)</span> <span class="t-mark">(range adaptor object)</span> </td>
</tr> </table>           <div class="_attribution">
  <p class="_attribution-p">
    &copy; cppreference.com<br>Licensed under the Creative Commons Attribution-ShareAlike Unported License v3.0.<br>
    <a href="https://en.cppreference.com/w/cpp/iterator/counted_iterator" class="_attribution-link">https://en.cppreference.com/w/cpp/iterator/counted_iterator</a>
  </p>
</div>
