    <h1 id="firstHeading" class="firstHeading">std::locale</h1>            <table class="t-dcl-begin"> <tr class="t-dsc-header"> <th> Defined in header <code><a href="../header/locale.html" title="cpp/header/locale">&lt;locale&gt;</a></code> </th> <th> </th> <th> </th> </tr> <tr class="t-dcl"> <td class="t-dcl-nopad"> <pre data-language="cpp">class locale;</pre>
</td> <td class="t-dcl-nopad"> </td> <td class="t-dcl-nopad"> </td> </tr>  </table> <p>An object of class <code>std::locale</code> is an immutable indexed set of immutable facets. Each stream object of the C++ input/output library is associated with an <code>std::locale</code> object and uses its facets for parsing and formatting of all data. <span class="t-rev-inl t-since-cxx11"><span>In addition, a locale object is associated with each <code><a href="../regex/basic_regex.html" title="cpp/regex/basic regex">std::basic_regex</a></code> object.</span><span><span class="t-mark-rev t-since-cxx11">(since C++11)</span></span></span> Locale objects can also be used as predicates that perform string collation with the standard containers and algorithms and can be accessed directly to obtain or modify the facets they hold.</p>
<p>Each locale constructed in a C++ program holds at least the following standard facets (i.e. <code><a href="has_facet.html" title="cpp/locale/has facet">std::has_facet</a></code> returns <code>true</code> for all these facet types), but a program may define additional specializations or completely new facets and add them to any existing locale object.</p>
<table class="wikitable"> <tr style="text-align:center; font-size:16px; line-height:16px;"> <th colspan="2">Supported facets </th>
</tr> <tr> <td>
<a href="http://en.cppreference.com/w/cpp/locale/collate"><span class="kw1946">std::<span class="me2">collate</span></span></a><span class="sy1">&lt;</span><span class="kw4">char</span><span class="sy1">&gt;</span><br><a href="http://en.cppreference.com/w/cpp/locale/collate"><span class="kw1946">std::<span class="me2">collate</span></span></a><span class="sy1">&lt;</span><span class="kw4">wchar_t</span><span class="sy1">&gt;</span> </td> <td rowspan="2">
<a href="http://en.cppreference.com/w/cpp/locale/codecvt"><span class="kw1942">std::<span class="me2">codecvt</span></span></a><span class="sy1">&lt;</span><span class="kw4">char</span>, <span class="kw4">char</span>, <a href="http://en.cppreference.com/w/cpp/string/multibyte/mbstate_t"><span class="kw1182">std::<span class="me2">mbstate_t</span></span></a><span class="sy1">&gt;</span><br><a href="http://en.cppreference.com/w/cpp/locale/codecvt"><span class="kw1942">std::<span class="me2">codecvt</span></span></a><span class="sy1">&lt;</span><span class="kw4">wchar_t</span>, <span class="kw4">char</span>, <a href="http://en.cppreference.com/w/cpp/string/multibyte/mbstate_t"><span class="kw1182">std::<span class="me2">mbstate_t</span></span></a><span class="sy1">&gt;</span><br><a href="http://en.cppreference.com/w/cpp/locale/codecvt"><span class="kw1942">std::<span class="me2">codecvt</span></span></a><span class="sy1">&lt;</span><span class="kw4">char16_t</span>, char8_t, <a href="http://en.cppreference.com/w/cpp/string/multibyte/mbstate_t"><span class="kw1182">std::<span class="me2">mbstate_t</span></span></a><span class="sy1">&gt;</span> <span class="t-mark-rev t-since-cxx20">(since C++20)</span><br><a href="http://en.cppreference.com/w/cpp/locale/codecvt"><span class="kw1942">std::<span class="me2">codecvt</span></span></a><span class="sy1">&lt;</span><span class="kw4">char32_t</span>, char8_t, <a href="http://en.cppreference.com/w/cpp/string/multibyte/mbstate_t"><span class="kw1182">std::<span class="me2">mbstate_t</span></span></a><span class="sy1">&gt;</span> <span class="t-mark-rev t-since-cxx20">(since C++20)</span> </td>
</tr> <tr> <td>
<a href="http://en.cppreference.com/w/cpp/locale/ctype"><span class="kw1941">std::<span class="me2">ctype</span></span></a><span class="sy1">&lt;</span><span class="kw4">char</span><span class="sy1">&gt;</span><br><a href="http://en.cppreference.com/w/cpp/locale/ctype"><span class="kw1941">std::<span class="me2">ctype</span></span></a><span class="sy1">&lt;</span><span class="kw4">wchar_t</span><span class="sy1">&gt;</span> </td>
</tr> <tr> <td>
<a href="http://en.cppreference.com/w/cpp/locale/money_get"><span class="kw1967">std::<span class="me2">money_get</span></span></a><span class="sy1">&lt;</span><span class="kw4">char</span><span class="sy1">&gt;</span><br><a href="http://en.cppreference.com/w/cpp/locale/money_get"><span class="kw1967">std::<span class="me2">money_get</span></span></a><span class="sy1">&lt;</span><span class="kw4">wchar_t</span><span class="sy1">&gt;</span> </td> <td rowspan="2">
<a href="http://en.cppreference.com/w/cpp/locale/moneypunct"><span class="kw1975">std::<span class="me2">moneypunct</span></span></a><span class="sy1">&lt;</span><span class="kw4">char</span><span class="sy1">&gt;</span><br><a href="http://en.cppreference.com/w/cpp/locale/moneypunct"><span class="kw1975">std::<span class="me2">moneypunct</span></span></a><span class="sy1">&lt;</span><span class="kw4">char</span>, <span class="kw2">true</span><span class="sy1">&gt;</span><br><a href="http://en.cppreference.com/w/cpp/locale/moneypunct"><span class="kw1975">std::<span class="me2">moneypunct</span></span></a><span class="sy1">&lt;</span><span class="kw4">wchar_t</span><span class="sy1">&gt;</span><br><a href="http://en.cppreference.com/w/cpp/locale/moneypunct"><span class="kw1975">std::<span class="me2">moneypunct</span></span></a><span class="sy1">&lt;</span><span class="kw4">wchar_t</span>, <span class="kw2">true</span><span class="sy1">&gt;</span> </td>
</tr> <tr> <td>
<a href="http://en.cppreference.com/w/cpp/locale/money_put"><span class="kw1971">std::<span class="me2">money_put</span></span></a><span class="sy1">&lt;</span><span class="kw4">char</span><span class="sy1">&gt;</span><br><a href="http://en.cppreference.com/w/cpp/locale/money_put"><span class="kw1971">std::<span class="me2">money_put</span></span></a><span class="sy1">&lt;</span><span class="kw4">wchar_t</span><span class="sy1">&gt;</span> </td>
</tr> <tr> <td>
<a href="http://en.cppreference.com/w/cpp/locale/num_get"><span class="kw1958">std::<span class="me2">num_get</span></span></a><span class="sy1">&lt;</span><span class="kw4">char</span><span class="sy1">&gt;</span><br><a href="http://en.cppreference.com/w/cpp/locale/num_get"><span class="kw1958">std::<span class="me2">num_get</span></span></a><span class="sy1">&lt;</span><span class="kw4">wchar_t</span><span class="sy1">&gt;</span> </td> <td rowspan="2">
<a href="http://en.cppreference.com/w/cpp/locale/numpunct"><span class="kw1964">std::<span class="me2">numpunct</span></span></a><span class="sy1">&lt;</span><span class="kw4">char</span><span class="sy1">&gt;</span><br><a href="http://en.cppreference.com/w/cpp/locale/numpunct"><span class="kw1964">std::<span class="me2">numpunct</span></span></a><span class="sy1">&lt;</span><span class="kw4">wchar_t</span><span class="sy1">&gt;</span> </td>
</tr> <tr> <td>
<a href="http://en.cppreference.com/w/cpp/locale/num_put"><span class="kw1961">std::<span class="me2">num_put</span></span></a><span class="sy1">&lt;</span><span class="kw4">char</span><span class="sy1">&gt;</span><br><a href="http://en.cppreference.com/w/cpp/locale/num_put"><span class="kw1961">std::<span class="me2">num_put</span></span></a><span class="sy1">&lt;</span><span class="kw4">wchar_t</span><span class="sy1">&gt;</span> </td>
</tr> <tr> <td>
<a href="http://en.cppreference.com/w/cpp/locale/time_get"><span class="kw1952">std::<span class="me2">time_get</span></span></a><span class="sy1">&lt;</span><span class="kw4">char</span><span class="sy1">&gt;</span><br><a href="http://en.cppreference.com/w/cpp/locale/time_get"><span class="kw1952">std::<span class="me2">time_get</span></span></a><span class="sy1">&lt;</span><span class="kw4">wchar_t</span><span class="sy1">&gt;</span> </td> <td rowspan="2">
<a href="http://en.cppreference.com/w/cpp/locale/messages"><span class="kw1949">std::<span class="me2">messages</span></span></a><span class="sy1">&lt;</span><span class="kw4">char</span><span class="sy1">&gt;</span><br><a href="http://en.cppreference.com/w/cpp/locale/messages"><span class="kw1949">std::<span class="me2">messages</span></span></a><span class="sy1">&lt;</span><span class="kw4">wchar_t</span><span class="sy1">&gt;</span> </td>
</tr> <tr> <td>
<a href="http://en.cppreference.com/w/cpp/locale/time_put"><span class="kw1955">std::<span class="me2">time_put</span></span></a><span class="sy1">&lt;</span><span class="kw4">char</span><span class="sy1">&gt;</span><br><a href="http://en.cppreference.com/w/cpp/locale/time_put"><span class="kw1955">std::<span class="me2">time_put</span></span></a><span class="sy1">&lt;</span><span class="kw4">wchar_t</span><span class="sy1">&gt;</span> </td>
</tr> <tr style="text-align:center"> <th colspan="2">Deprecated facets </th>
</tr> <tr> <td colspan="2">
<a href="http://en.cppreference.com/w/cpp/locale/codecvt"><span class="kw1942">std::<span class="me2">codecvt</span></span></a><span class="sy1">&lt;</span><span class="kw4">char16_t</span>, <span class="kw4">char</span>, <a href="http://en.cppreference.com/w/cpp/string/multibyte/mbstate_t"><span class="kw1182">std::<span class="me2">mbstate_t</span></span></a><span class="sy1">&gt;</span> <span class="t-mark-rev t-since-cxx11">(since C++11)</span><span class="t-mark-rev t-deprecated-cxx20">(deprecated in C++20)</span><br><a href="http://en.cppreference.com/w/cpp/locale/codecvt"><span class="kw1942">std::<span class="me2">codecvt</span></span></a><span class="sy1">&lt;</span><span class="kw4">char32_t</span>, <span class="kw4">char</span>, <a href="http://en.cppreference.com/w/cpp/string/multibyte/mbstate_t"><span class="kw1182">std::<span class="me2">mbstate_t</span></span></a><span class="sy1">&gt;</span> <span class="t-mark-rev t-since-cxx11">(since C++11)</span><span class="t-mark-rev t-deprecated-cxx20">(deprecated in C++20)</span> </td>
</tr>
</table> <p>Internally, a locale object is implemented as if it is a reference-counted pointer to an array (indexed by <code><a href="locale/id.html" title="cpp/locale/locale/id">std::locale::id</a></code>) of reference-counted pointers to facets: copying a locale only copies one pointer and increments several reference counts. To maintain the standard C++ library thread safety guarantees (operations on different objects are always thread-safe), both the locale reference count and each facet reference count are updated in a thread-safe manner, similar to <code><a href="../memory/shared_ptr.html" title="cpp/memory/shared ptr">std::shared_ptr</a></code>.</p>
<h3 id="Member_types"> Member types</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="locale/id.html" title="cpp/locale/locale/id"> <span class="t-lines"><span>id</span></span></a></div> </td> <td> the facet index type: each facet class must declare or inherit a public static member of this type <br> <span class="t-mark">(class)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="locale/facet.html" title="cpp/locale/locale/facet"> <span class="t-lines"><span>facet</span></span></a></div> </td> <td> the base class for all facet categories: each facet of any category is derived from this type <br> <span class="t-mark">(class)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><span class="t-lines"><span>category</span></span></div> </td> <td> <span class="kw4">int</span> <br> <span class="t-mark">(typedef)</span> </td>
</tr> </table> <h3 id="Member_objects"> Member objects</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><span class="t-lines"><span>none</span></span></div>
<div><span class="t-lines"><span><span class="t-cmark">[static]</span></span></span></div> </td> <td> a zero value of type <code>category</code> indicating no facet category <br> <span class="t-mark">(public static member constant)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><span class="t-lines"><span>collate</span></span></div>
<div><span class="t-lines"><span><span class="t-cmark">[static]</span></span></span></div> </td> <td> a bitmask value of type <code>category</code> indicating the collate facet category <br> <span class="t-mark">(public static member constant)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><span class="t-lines"><span>ctype</span></span></div>
<div><span class="t-lines"><span><span class="t-cmark">[static]</span></span></span></div> </td> <td> a bitmask value of type <code>category</code> indicating the ctype facet category <br> <span class="t-mark">(public static member constant)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><span class="t-lines"><span>monetary</span></span></div>
<div><span class="t-lines"><span><span class="t-cmark">[static]</span></span></span></div> </td> <td> a bitmask value of type <code>category</code> indicating the monetary facet category <br> <span class="t-mark">(public static member constant)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><span class="t-lines"><span>numeric</span></span></div>
<div><span class="t-lines"><span><span class="t-cmark">[static]</span></span></span></div> </td> <td> a bitmask value of type <code>category</code> indicating the numeric facet category <br> <span class="t-mark">(public static member constant)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><span class="t-lines"><span>time</span></span></div>
<div><span class="t-lines"><span><span class="t-cmark">[static]</span></span></span></div> </td> <td> a bitmask value of type <code>category</code> indicating the time facet category <br> <span class="t-mark">(public static member constant)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><span class="t-lines"><span>messages</span></span></div>
<div><span class="t-lines"><span><span class="t-cmark">[static]</span></span></span></div> </td> <td> a bitmask value of type <code>category</code> indicating the messages facet category <br> <span class="t-mark">(public static member constant)</span> </td>
</tr> <tr class="t-dsc"> <td> <div><span class="t-lines"><span>all</span></span></div>
<div><span class="t-lines"><span><span class="t-cmark">[static]</span></span></span></div> </td> <td> <code>collate | ctype | monetary | numeric | time | messages</code> <br> <span class="t-mark">(public static member constant)</span> </td>
</tr> </table> <p><code>std::locale</code> member functions expecting a <code>category</code> argument require one of the category values defined above, or the union of two or more such values. The <a href="lc_categories.html" title="cpp/locale/LC categories"><code>LC</code> constants</a> are not accepted.</p>
<h3 id="Member_functions"> Member functions</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="locale/locale.html" title="cpp/locale/locale/locale"> <span class="t-lines"><span>(constructor)</span></span></a></div> </td> <td> constructs a new locale <br> <span class="t-mark">(public member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="locale/~locale.html" title="cpp/locale/locale/~locale"> <span class="t-lines"><span>(destructor)</span></span></a></div> </td> <td> destructs the locale and the facets whose reference count becomes zero <br> <span class="t-mark">(public member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="locale/operator=.html" title="cpp/locale/locale/operator="> <span class="t-lines"><span>operator=</span></span></a></div> </td> <td> replaces a locale <br> <span class="t-mark">(public member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="locale/combine.html" title="cpp/locale/locale/combine"> <span class="t-lines"><span>combine</span></span></a></div> </td> <td> constructs a locale with compile-time identified facet copied from another locale <br> <span class="t-mark">(public member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="locale/name.html" title="cpp/locale/locale/name"> <span class="t-lines"><span>name</span></span></a></div> </td> <td> returns the name of the locale or <span class="st0">"*"</span> if unnamed <br> <span class="t-mark">(public member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="locale/operator_cmp.html" title="cpp/locale/locale/operator cmp"> <span class="t-lines"><span>operator==</span><span>operator!=</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-until-cxx20">(removed in C++20)</span></span></span></div> </td> <td> equality comparison between locale objects <br> <span class="t-mark">(public member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="locale/operator().html" title="cpp/locale/locale/operator()"> <span class="t-lines"><span>operator()</span></span></a></div> </td> <td> lexicographically compares two strings using this locale's collate facet <br> <span class="t-mark">(public member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="locale/global.html" title="cpp/locale/locale/global"> <span class="t-lines"><span>global</span></span></a></div>
<div><span class="t-lines"><span><span class="t-cmark">[static]</span></span></span></div> </td> <td> changes the global locale <br> <span class="t-mark">(public static member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="locale/classic.html" title="cpp/locale/locale/classic"> <span class="t-lines"><span>classic</span></span></a></div>
<div><span class="t-lines"><span><span class="t-cmark">[static]</span></span></span></div> </td> <td> obtains a reference to the "C" locale <br> <span class="t-mark">(public static member function)</span>  </td>
</tr> </table> <h3 id="Example"> Example</h3> <div class="t-example">
<p>Demonstrates the typical prologue of a locale-sensitive program (cross-platform).</p>
<div class="cpp source-cpp"><pre data-language="cpp">#include &lt;iostream&gt;
#include &lt;locale&gt;
 
int main()
{
    std::wcout &lt;&lt; "User-preferred locale setting is "
               &lt;&lt; std::locale("").name().c_str() &lt;&lt; '\n';
    // on startup, the global locale is the "C" locale
    std::wcout &lt;&lt; 1000.01 &lt;&lt; '\n';
 
    // replace the C++ global locale and the "C" locale with the user-preferred locale
    std::locale::global(std::locale(""));
    // use the new global locale for future wide character output
    std::wcout.imbue(std::locale());
 
    // output the same number again
    std::wcout &lt;&lt; 1000.01 &lt;&lt; '\n';
}</pre></div> <p>Possible output:</p>
<div class="text source-text"><pre data-language="c">User-preferred locale setting is en_US.UTF8
1000.01
1,000.01</pre></div> </div> <h3 id="Defect_reports"> Defect reports</h3> <p>The following behavior-changing defect reports were applied retroactively to previously published C++ standards.</p>
<table class="dsctable"> <tr> <th>DR </th> <th>Applied to </th> <th>Behavior as published </th> <th>Correct behavior </th>
</tr> <tr> <td>
<a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue340">LWG 340</a> </td> <td>C++98 </td> <td>the set of standard facets that all locales need to hold was unclear </td> <td>made clear </td>
</tr> <tr> <td>
<a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue347">LWG 347</a> </td> <td>C++98 </td> <td>parameters of type <code>category</code> could accept <code>LC</code> constants </td> <td>not accepted anymore </td>
</tr>
</table> <h3 id="See_also"> See also</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="use_facet.html" title="cpp/locale/use facet"> <span class="t-lines"><span>use_facet</span></span></a></div> </td> <td> obtains a facet from a locale <br> <span class="t-mark">(function template)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="has_facet.html" title="cpp/locale/has facet"> <span class="t-lines"><span>has_facet</span></span></a></div> </td> <td> checks if a locale implements a specific facet <br> <span class="t-mark">(function template)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../io/ios_base/imbue.html" title="cpp/io/ios base/imbue"> <span class="t-lines"><span>imbue</span></span></a></div> </td> <td> sets locale <br> <span class="t-mark">(public member function of <code>std::ios_base</code>)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../io/ios_base/getloc.html" title="cpp/io/ios base/getloc"> <span class="t-lines"><span>getloc</span></span></a></div> </td> <td> returns current locale <br> <span class="t-mark">(public member function of <code>std::ios_base</code>)</span>  </td>
</tr> </table>           <div class="_attribution">
  <p class="_attribution-p">
    &copy; cppreference.com<br>Licensed under the Creative Commons Attribution-ShareAlike Unported License v3.0.<br>
    <a href="https://en.cppreference.com/w/cpp/locale/locale" class="_attribution-link">https://en.cppreference.com/w/cpp/locale/locale</a>
  </p>
</div>
