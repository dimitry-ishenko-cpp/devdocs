<h1 class="title-page">HTTP</h1> <div class="subtitle-page">Documentation of Meteor's HTTP API.</div>    <p><code>HTTP</code> provides an HTTP request API on the client and server. To use these functions, add the HTTP package to your project by running in your terminal:</p> <pre class="highlight bash" data-language="bash">meteor add http</pre>  <h2 class="api-heading" id="HTTP-call"> <div class="locus"> Anywhere </div> <code>HTTP.call(method, url, [options], [asyncCallback])</code> <div class="subtext-api"> <code>import { HTTP } from 'meteor/http'</code> <a class="src-code link secondary" href="https://github.com/meteor/meteor/blob/master/packages/http/httpcall_client.js#L19" target="_blank"> (http/httpcall_client.js, line 19) </a> </div> </h2>   <p>Perform an outbound HTTP request.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>method</code> <span class="type">String</span> </dt> <dd> <p>The <a href="http://en.wikipedia.org/wiki/HTTP_method" target="_blank" rel="external">HTTP method</a> to use, such as "<code>GET</code>", "<code>POST</code>", or "<code>HEAD</code>".</p> </dd> <dt> <code>url</code> <span class="type">String</span> </dt> <dd> <p>The URL to retrieve.</p> </dd> <dt> <code>asyncCallback</code> <span class="type">Function</span> </dt> <dd> <p>Optional callback. If passed, the method runs asynchronously, instead of synchronously, and calls asyncCallback. On the client, this callback is required.</p> </dd> </dl> <h4 class="subheading">Options</h4> <dl class="args"> <dt> <code>content</code> <span class="type">String</span> </dt> <dd> <p>String to use as the HTTP request body.</p> </dd> <dt> <code>data</code> <span class="type">Object</span> </dt> <dd> <p>JSON-able object to stringify and use as the HTTP request body. Overwrites <code>content</code>.</p> </dd> <dt> <code>query</code> <span class="type">String</span> </dt> <dd> <p>Query string to go in the URL. Overwrites any query string in <code>url</code>.</p> </dd> <dt> <code>params</code> <span class="type">Object</span> </dt> <dd> <p>Dictionary of request parameters to be encoded and placed in the URL (for GETs) or request body (for POSTs). If <code>content</code> or <code>data</code> is specified, <code>params</code> will always be placed in the URL.</p> </dd> <dt> <code>auth</code> <span class="type">String</span> </dt> <dd> <p>HTTP basic authentication string of the form <code>"username:password"</code></p> </dd> <dt> <code>headers</code> <span class="type">Object</span> </dt> <dd> <p>Dictionary of strings, headers to add to the HTTP request.</p> </dd> <dt> <code>timeout</code> <span class="type">Number</span> </dt> <dd> <p>Maximum time in milliseconds to wait for the request before failing. There is no timeout by default.</p> </dd> <dt> <code>followRedirects</code> <span class="type">Boolean</span> </dt> <dd> <p>If <code>true</code>, transparently follow HTTP redirects. Cannot be set to <code>false</code> on the client. Default <code>true</code>.</p> </dd> <dt> <code>npmRequestOptions</code> <span class="type">Object</span> </dt> <dd> <p>On the server, <code>HTTP.call</code> is implemented by using the <a href="https://www.npmjs.com/package/request" target="_blank" rel="external">npm <code>request</code> module</a>. Any options in this object will be passed directly to the <code>request</code> invocation.</p> </dd> <dt> <code>beforeSend</code> <span class="type">Function</span> </dt> <dd> <p>On the client, this will be called before the request is sent to allow for more direct manipulation of the underlying XMLHttpRequest object, which will be passed as the first argument. If the callback returns <code>false</code>, the request will be not be send.</p> </dd> </dl>   <p>This function initiates an HTTP request to a remote server.</p> <p>On the server, this function can be run either synchronously or asynchronously. If the callback is omitted, it runs synchronously and the results are returned once the request completes successfully. If the request was not successful, an error is thrown. This is useful when making server-to-server HTTP API calls from within Meteor methods, as the method can succeed or fail based on the results of the synchronous HTTP call. In this case, consider using <a href="#method_unblock"><code>this.unblock()</code></a> to allow other methods on the same connection to run in the mean time. </p> <p>On the client, this function must be used asynchronously by passing a callback. Note that some browsers first send an <code>OPTIONS</code> request before sending your request (in order to <a href="http://stackoverflow.com/a/21783145/627729" target="_blank" rel="external">determine CORS headers</a>).</p> <p>Both HTTP and HTTPS protocols are supported. The <code>url</code> argument must be an absolute URL including protocol and host name on the server, but may be relative to the current host on the client. The <code>query</code> option replaces the query string of <code>url</code>. Parameters specified in <code>params</code> that are put in the URL are appended to any query string. For example, with a <code>url</code> of <code>'/path?query'</code> and <code>params</code> of <code>{ foo: 'bar' }</code>, the final URL will be <code>'/path?query&amp;foo=bar'</code>.</p> <p>The <code>params</code> are put in the URL or the request body, depending on the type of request. In the case of request with no bodies, like GET and HEAD, the parameters will always go in the URL. For a POST or other type of request, the parameters will be encoded into the body with a standard <code>x-www-form-urlencoded</code> content type, unless the <code>content</code> or <code>data</code> option is used to specify a body, in which case the parameters will be appended to the URL instead.</p> <p>When run in asynchronous mode, the callback receives two arguments, <code>error</code> and <code>result</code>. The <code>error</code> argument will contain an Error if the request fails in any way, including a network error, time-out, or an HTTP status code in the 400 or 500 range. In case of a 4xx/5xx HTTP status code, the <code>response</code> property on <code>error</code> matches the contents of the result object. When run in synchronous mode, either <code>result</code> is returned from the function, or <code>error</code> is thrown.</p> <p>Contents of the result object:</p> <dl class="objdesc"> <dt>
<span class="name">statusCode</span> <span class="type">Number</span>
</dt> <dd>Numeric HTTP result status code, or <code>null</code> on error.</dd> <dt>
<span class="name">content</span> <span class="type">String</span>
</dt> <dd>The body of the HTTP response as a string.</dd> <dt>
<span class="name">data</span> <span class="type">Object or <code>null</code></span>
</dt> <dd>If the response headers indicate JSON content, this contains the body of the document parsed as a JSON object.</dd> <dt>
<span class="name">headers</span> <span class="type">Object</span>
</dt> <dd>A dictionary of HTTP headers from the response.</dd> </dl> <p>Example server method:</p> <pre class="highlight js" data-language="js">Meteor.methods({
  checkTwitter(userId) {
    check(userId, String);
    this.unblock();

    try {
      const result = HTTP.call('GET', 'http://api.twitter.com/xyz', {
        params: { user: userId }
      });

      return true;
    } catch (e) {
      // Got a network error, timeout, or HTTP error in the 400 or 500 range.

      return false;
    }
  }
});</pre> <p>Example asynchronous HTTP call:</p> <pre class="highlight js" data-language="js">HTTP.call('POST', 'http://api.twitter.com/xyz', {
  data: { some: 'json', stuff: 1 }
}, (error, result) =&gt; {
  if (!error) {
    Session.set('twizzled', true);
  }
});</pre>  <h2 class="api-heading" id="HTTP-get"> <div class="locus"> Anywhere </div> <code>HTTP.get(url, [callOptions], [asyncCallback])</code> <div class="subtext-api"> <code>import { HTTP } from 'meteor/http'</code> <a class="src-code link secondary" href="https://github.com/meteor/meteor/blob/master/packages/http/httpcall_common.js#L49" target="_blank"> (http/httpcall_common.js, line 49) </a> </div> </h2>   <p>Send an HTTP <code>GET</code> request. Equivalent to calling <a href="#http_call"><code>HTTP.call</code></a> with "GET" as the first argument.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>url</code> <span class="type">String</span> </dt> <dd> <p>The URL to which the request should be sent.</p> </dd> <dt> <code>callOptions</code> <span class="type">Object</span> </dt> <dd> <p>Options passed on to <a href="#http_call"><code>HTTP.call</code></a>.</p> </dd> <dt> <code>asyncCallback</code> <span class="type">Function</span> </dt> <dd> <p>Callback that is called when the request is completed. Required on the client.</p> </dd> </dl>    <h2 class="api-heading" id="HTTP-post"> <div class="locus"> Anywhere </div> <code>HTTP.post(url, [callOptions], [asyncCallback])</code> <div class="subtext-api"> <code>import { HTTP } from 'meteor/http'</code> <a class="src-code link secondary" href="https://github.com/meteor/meteor/blob/master/packages/http/httpcall_common.js#L60" target="_blank"> (http/httpcall_common.js, line 60) </a> </div> </h2>   <p>Send an HTTP <code>POST</code> request. Equivalent to calling <a href="#http_call"><code>HTTP.call</code></a> with "POST" as the first argument.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>url</code> <span class="type">String</span> </dt> <dd> <p>The URL to which the request should be sent.</p> </dd> <dt> <code>callOptions</code> <span class="type">Object</span> </dt> <dd> <p>Options passed on to <a href="#http_call"><code>HTTP.call</code></a>.</p> </dd> <dt> <code>asyncCallback</code> <span class="type">Function</span> </dt> <dd> <p>Callback that is called when the request is completed. Required on the client.</p> </dd> </dl>    <h2 class="api-heading" id="HTTP-put"> <div class="locus"> Anywhere </div> <code>HTTP.put(url, [callOptions], [asyncCallback])</code> <div class="subtext-api"> <code>import { HTTP } from 'meteor/http'</code> <a class="src-code link secondary" href="https://github.com/meteor/meteor/blob/master/packages/http/httpcall_common.js#L71" target="_blank"> (http/httpcall_common.js, line 71) </a> </div> </h2>   <p>Send an HTTP <code>PUT</code> request. Equivalent to calling <a href="#http_call"><code>HTTP.call</code></a> with "PUT" as the first argument.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>url</code> <span class="type">String</span> </dt> <dd> <p>The URL to which the request should be sent.</p> </dd> <dt> <code>callOptions</code> <span class="type">Object</span> </dt> <dd> <p>Options passed on to <a href="#http_call"><code>HTTP.call</code></a>.</p> </dd> <dt> <code>asyncCallback</code> <span class="type">Function</span> </dt> <dd> <p>Callback that is called when the request is completed. Required on the client.</p> </dd> </dl>    <h2 class="api-heading" id="HTTP-del"> <div class="locus"> Anywhere </div> <code>HTTP.del(url, [callOptions], [asyncCallback])</code> <div class="subtext-api"> <code>import { HTTP } from 'meteor/http'</code> <a class="src-code link secondary" href="https://github.com/meteor/meteor/blob/master/packages/http/httpcall_common.js#L82" target="_blank"> (http/httpcall_common.js, line 82) </a> </div> </h2>   <p>Send an HTTP <code>DELETE</code> request. Equivalent to calling <a href="#http_call"><code>HTTP.call</code></a> with "DELETE" as the first argument. (Named <code>del</code> to avoid conflict with the Javascript keyword <code>delete</code>)</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>url</code> <span class="type">String</span> </dt> <dd> <p>The URL to which the request should be sent.</p> </dd> <dt> <code>callOptions</code> <span class="type">Object</span> </dt> <dd> <p>Options passed on to <a href="#http_call"><code>HTTP.call</code></a>.</p> </dd> <dt> <code>asyncCallback</code> <span class="type">Function</span> </dt> <dd> <p>Callback that is called when the request is completed. Required on the client.</p> </dd> </dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2011&ndash;2017 Meteor Development Group, Inc.<br>Licensed under the MIT License.<br>
    <a href="https://docs.meteor.com/api/http.html" class="_attribution-link">https://docs.meteor.com/api/http.html</a>
  </p>
</div>
