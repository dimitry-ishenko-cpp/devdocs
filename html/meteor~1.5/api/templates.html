<h1 class="title-page">Templates</h1> <div class="subtitle-page">Documentation of Meteor's template API.</div>    <p>When you write a template as <code>&lt;template name="foo"&gt; ... &lt;/template&gt;</code> in an HTML file in your app, Meteor generates a “template object” named <code>Template.foo</code>. Note that template name cannot contain hyphens and other special characters.</p> <p>The same template may occur many times on a page, and these occurrences are called template instances. Template instances have a life cycle of being created, put into the document, and later taken out of the document and destroyed. Meteor manages these stages for you, including determining when a template instance has been removed or replaced and should be cleaned up. You can associate data with a template instance, and you can access its DOM nodes when it is in the document.</p> <p>Read more about templates and how to use them in the <a href="spacebars.html">Spacebars</a> and <a href="../guide/introduction.html">Blaze</a> article in the Guide.</p> <h2 id="Template-Declarations">Template Declarations</h2> <h3 class="api-heading" id="Template-events"> <div class="locus"> Client </div> <code>Template#events(eventMap)</code> <div class="subtext-api"> <code>import { Template } from 'meteor/templating'</code> <a class="src-code link secondary" href="https://github.com/meteor/blaze/blob/master/packages/blaze/template.js#L477" target="_blank"> (blaze/template.js, line 477) </a> </div> </h3>   <p>Specify event handlers for this template.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>eventMap</code> <span class="type"><a href="#Event-Maps">Event Map</a></span> </dt> <dd> <p>Event handlers to associate with this template.</p> </dd> </dl>   <p>Declare event handlers for instances of this template. Multiple calls add new event handlers in addition to the existing ones.</p> <p>See <a href="#Event-Maps">Event Maps</a> for a detailed description of the event map format and how event handling works in Meteor.</p>  <h3 class="api-heading" id="Template-helpers"> <div class="locus"> Client </div> <code>Template#helpers(helpers)</code> <div class="subtext-api"> <code>import { Template } from 'meteor/templating'</code> <a class="src-code link secondary" href="https://github.com/meteor/blaze/blob/master/packages/blaze/template.js#L443" target="_blank"> (blaze/template.js, line 443) </a> </div> </h3>   <p>Specify template helpers available to this template.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>helpers</code> <span class="type">Object</span> </dt> <dd> <p>Dictionary of helper functions by name.</p> </dd> </dl>   <p>Each template has a local dictionary of helpers that are made available to it, and this call specifies helpers to add to the template’s dictionary.</p> <p>Example:</p> <pre class="highlight js" data-language="js">Template.myTemplate.helpers({
  foo() {
    return Session.get("foo");
  }
});</pre> <p>Now you can invoke this helper with <code>{{foo}}</code> in the template defined with <code>&lt;template name="myTemplate"&gt;</code>.</p> <p>Helpers can accept positional and keyword arguments:</p> <pre class="highlight js" data-language="js">Template.myTemplate.helpers({
  displayName(firstName, lastName, keyword) {
    var prefix = keyword.hash.title ? keyword.hash.title + " " : "";
    return prefix + firstName + " " + lastName;
  }
});</pre> <p>Then you can call this helper from template like this:</p> <pre class="highlight clojure" data-language="clojure">{{displayName "John" "Doe" title="President"}}</pre> <p>You can learn more about arguments to helpers in <a href="spacebars.html">Spacebars</a>.</p> <p>Under the hood, each helper starts a new <a href="http://docs.meteor.com/api/tracker.html#Tracker-autorun" target="_blank" rel="external"><code>Tracker.autorun</code></a>. When its reactive dependencies change, the helper is rerun. Helpers depend on their data context, passed arguments and other reactive data sources accessed during execution.</p> <p>To create a helper that can be used in any template, use <a href="templates.html#Template-registerHelper"><code>Template.registerHelper</code></a>.</p>  <h3 class="api-heading" id="Template-onRendered"> <div class="locus"> Client </div> <code>Template#onRendered</code> <div class="subtext-api"> <code>import { Template } from 'meteor/templating'</code> <a class="src-code link secondary" href="https://github.com/meteor/blaze/blob/master/packages/blaze/template.js#L78" target="_blank"> (blaze/template.js, line 78) </a> </div> </h3>   <p>Register a function to be called when an instance of this template is inserted into the DOM.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>callback</code> <span class="type">Function</span> </dt> <dd> <p>A function to be added as a callback.</p> </dd> </dl>   <p>Callbacks added with this method are called once when an instance of Template.<em>myTemplate</em> is rendered into DOM nodes and put into the document for the first time.</p> <p>In the body of a callback, <code>this</code> is a <a href="templates.html#Template-instances">template instance</a> object that is unique to this occurrence of the template and persists across re-renderings. Use the <code>onCreated</code> and <code>onDestroyed</code> callbacks to perform initialization or clean-up on the object.</p> <p>Because your template has been rendered, you can use functions like <a href="templates.html#Blaze-TemplateInstance-findAll"><code>this.findAll</code></a> which look at its DOM nodes.</p> <p>This can be a good place to apply any DOM manipulations you want, after the template is rendered for the first time.</p> <pre class="highlight html" data-language="html">&lt;template name="myPictures"&gt;
  &lt;div class="container"&gt;

    {{#each pictures}}
      &lt;img class="item" src="/{{.}}"/&gt;

    {{/each}}
  &lt;/div&gt;

&lt;/template&gt;</pre> <pre class="highlight js" data-language="js">Template.myPictures.onRendered(function () {
  // Use the Packery jQuery plugin

  this.$('.container').packery({
    itemSelector: '.item',
    gutter: 10

  });
});</pre>  <h3 class="api-heading" id="Template-onCreated"> <div class="locus"> Client </div> <code>Template#onCreated</code> <div class="subtext-api"> <code>import { Template } from 'meteor/templating'</code> <a class="src-code link secondary" href="https://github.com/meteor/blaze/blob/master/packages/blaze/template.js#L65" target="_blank"> (blaze/template.js, line 65) </a> </div> </h3>   <p>Register a function to be called when an instance of this template is created.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>callback</code> <span class="type">Function</span> </dt> <dd> <p>A function to be added as a callback.</p> </dd> </dl>   <p>Callbacks added with this method are called before your template’s logic is evaluated for the first time. Inside a callback, <code>this</code> is the new <a href="#Template-instances">template instance</a> object. Properties you set on this object will be visible from the callbacks added with <code>onRendered</code> and <code>onDestroyed</code> methods and from event handlers.</p> <p>These callbacks fire once and are the first group of callbacks to fire. Handling the <code>created</code> event is a useful way to set up values on template instance that are read from template helpers using <code>Template.instance()</code>.</p> <pre class="highlight js" data-language="js">Template.myPictures.onCreated(function () {
  // set up local reactive variables

  this.highlightedPicture = new ReactiveVar(null);
  
  // register this template within some central store

  GalleryTemplates.push(this);
});</pre>  <h3 class="api-heading" id="Template-onDestroyed"> <div class="locus"> Client </div> <code>Template#onDestroyed</code> <div class="subtext-api"> <code>import { Template } from 'meteor/templating'</code> <a class="src-code link secondary" href="https://github.com/meteor/blaze/blob/master/packages/blaze/template.js#L91" target="_blank"> (blaze/template.js, line 91) </a> </div> </h3>   <p>Register a function to be called when an instance of this template is removed from the DOM and destroyed.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>callback</code> <span class="type">Function</span> </dt> <dd> <p>A function to be added as a callback.</p> </dd> </dl>   <p>These callbacks are called when an occurrence of a template is taken off the page for any reason and not replaced with a re-rendering. Inside a callback, <code>this</code> is the <a href="templates.html#Template-instances">template instance</a> object being destroyed.</p> <p>This group of callbacks is most useful for cleaning up or undoing any external effects of <code>created</code> or <code>rendered</code> groups. This group fires once and is the last callback to fire.</p> <pre class="highlight js" data-language="js">Template.myPictures.onDestroyed(function () {
  // deregister from some central store

  GalleryTemplates = _.without(GalleryTemplates, this);
});</pre> <h2 id="Template-instances">Template instances</h2>
<p>A template instance object represents an occurrence of a template in the document. It can be used to access the DOM and it can be assigned properties that persist as the template is reactively updated.</p> <p>Template instance objects are found as the value of <code>this</code> in the <code>onCreated</code>, <code>onRendered</code>, and <code>onDestroyed</code> template callbacks, and as an argument to event handlers. You can access the current template instance from helpers using <a href="templates.html#Template-instance"><code>Template.instance()</code></a>.</p> <p>In addition to the properties and functions described below, you can assign additional properties of your choice to the object. Use the <a href="templates.html#Template-onCreated"><code>onCreated</code></a> and <a href="templates.html#Template-onDestroyed"><code>onDestroyed</code></a> methods to add callbacks performing initialization or clean-up on the object.</p> <p>You can only access <code>findAll</code>, <code>find</code>, <code>firstNode</code>, and <code>lastNode</code> from the <code>onRendered</code> callback and event handlers, not from <code>onCreated</code> and <code>onDestroyed</code>, because they require the template instance to be in the DOM.</p> <p>Template instance objects are <code>instanceof Blaze.TemplateInstance</code>.</p>  <h3 class="api-heading" id="Blaze-TemplateInstance-findAll"> <div class="locus"> Client </div> <code>Blaze.TemplateInstance#findAll(selector)</code> <div class="subtext-api"> <a class="src-code link secondary" href="https://github.com/meteor/blaze/blob/master/packages/blaze/template.js#L304" target="_blank"> (blaze/template.js, line 304) </a> </div> </h3>   <p>Find all elements matching <code>selector</code> in this template instance.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>selector</code> <span class="type">String</span> </dt> <dd> <p>The CSS selector to match, scoped to the template contents.</p> </dd> </dl>   <p><code>template.findAll</code> returns an array of DOM elements matching <code>selector</code>.</p>  <h3 class="api-heading" id="Blaze-TemplateInstance-$"> <div class="locus"> Client </div> <code>Blaze.TemplateInstance#$(selector)</code> <div class="subtext-api"> <a class="src-code link secondary" href="https://github.com/meteor/blaze/blob/master/packages/blaze/template.js#L291" target="_blank"> (blaze/template.js, line 291) </a> </div> </h3>   <p>Find all elements matching <code>selector</code> in this template instance, and return them as a JQuery object.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>selector</code> <span class="type">String</span> </dt> <dd> <p>The CSS selector to match, scoped to the template contents.</p> </dd> </dl>   <p><code>template.$</code> returns a <a href="http://api.jquery.com/Types/#jQuery" target="_blank" rel="external">jQuery object</a> of those same elements. jQuery objects are similar to arrays, with additional methods defined by the jQuery library.</p> <p>The template instance serves as the document root for the selector. Only elements inside the template and its sub-templates can match parts of the selector.</p>  <h3 class="api-heading" id="Blaze-TemplateInstance-find"> <div class="locus"> Client </div> <code>Blaze.TemplateInstance#find(selector)</code> <div class="subtext-api"> <a class="src-code link secondary" href="https://github.com/meteor/blaze/blob/master/packages/blaze/template.js#L314" target="_blank"> (blaze/template.js, line 314) </a> </div> </h3>   <p>Find one element matching <code>selector</code> in this template instance.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>selector</code> <span class="type">String</span> </dt> <dd> <p>The CSS selector to match, scoped to the template contents.</p> </dd> </dl>   <p>Returns one DOM element matching <code>selector</code>, or <code>null</code> if there are no such elements.</p> <p>The template instance serves as the document root for the selector. Only elements inside the template and its sub-templates can match parts of the selector.</p>  <h3 class="api-heading" id="Blaze-TemplateInstance-firstNode"> <div class="locus"> Client </div> <code>Blaze.TemplateInstance#firstNode</code> <div class="subtext-api"> <a class="src-code link secondary" href="https://github.com/meteor/blaze/blob/master/packages/blaze/template.js#L254" target="_blank"> (blaze/template.js, line 254) </a> </div> </h3>   <p>The first top-level DOM node in this template instance.</p>    <p>The two nodes <code>firstNode</code> and <code>lastNode</code> indicate the extent of the rendered template in the DOM. The rendered template includes these nodes, their intervening siblings, and their descendents. These two nodes are siblings (they have the same parent), and <code>lastNode</code> comes after <code>firstNode</code>, or else they are the same node.</p>  <h3 class="api-heading" id="Blaze-TemplateInstance-lastNode"> <div class="locus"> Client </div> <code>Blaze.TemplateInstance#lastNode</code> <div class="subtext-api"> <a class="src-code link secondary" href="https://github.com/meteor/blaze/blob/master/packages/blaze/template.js#L264" target="_blank"> (blaze/template.js, line 264) </a> </div> </h3>   <p>The last top-level DOM node in this template instance.</p>     <h3 class="api-heading" id="Blaze-TemplateInstance-data"> <div class="locus"> Client </div> <code>Blaze.TemplateInstance#data</code> <div class="subtext-api"> <a class="src-code link secondary" href="https://github.com/meteor/blaze/blob/master/packages/blaze/template.js#L161" target="_blank"> (blaze/template.js, line 161) </a> </div> </h3>   <p>The data context of this instance's latest invocation.</p>    <p>This property provides access to the data context at the top level of the template. It is updated each time the template is re-rendered. Access is read-only and non-reactive.</p>  <h3 class="api-heading" id="Blaze-TemplateInstance-autorun"> <div class="locus"> Client </div> <code>Blaze.TemplateInstance#autorun(runFunc)</code> <div class="subtext-api"> <a class="src-code link secondary" href="https://github.com/meteor/blaze/blob/master/packages/blaze/template.js#L324" target="_blank"> (blaze/template.js, line 324) </a> </div> </h3>   <p>A version of <a href="https://docs.meteor.com/api/tracker.html#Tracker-autorun" target="_blank" rel="external">Tracker.autorun</a> that is stopped when the template is destroyed.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>runFunc</code> <span class="type">Function</span> </dt> <dd> <p>The function to run. It receives one argument: a Tracker.Computation object.</p> </dd> </dl>   <p>You can use <code>this.autorun</code> from an <a href="templates.html#Template-onCreated"><code>onCreated</code></a> or <a href="templates.html#Template-onRendered"><code>onRendered</code></a> callback to reactively update the DOM or the template instance. You can use <code>Template.currentData()</code> inside of this callback to access reactive data context of the template instance. The Computation is automatically stopped when the template is destroyed.</p> <p>Alias for <code>template.view.autorun</code>.</p>  <h3 class="api-heading" id="Blaze-TemplateInstance-subscribe"> <div class="locus"> Client </div> <code>Blaze.TemplateInstance#subscribe(name, [arg1, arg2...], [options])</code> <div class="subtext-api"> <a class="src-code link secondary" href="https://github.com/meteor/blaze/blob/master/packages/blaze/template.js#L347" target="_blank"> (blaze/template.js, line 347) </a> </div> </h3>   <p>A version of <a href="https://docs.meteor.com/api/pubsub.html#Meteor-subscribe" target="_blank" rel="external">Meteor.subscribe</a> that is stopped when the template is destroyed.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>name</code> <span class="type">String</span> </dt> <dd> <p>Name of the subscription. Matches the name of the server's <code>publish()</code> call.</p> </dd> <dt> <code>arg1, arg2...</code> <span class="type">Any</span> </dt> <dd> <p>Optional arguments passed to publisher function on server.</p> </dd> </dl> <h4 class="subheading">Options</h4> <dl class="args"> <dt> <code>onReady</code> <span class="type">Function</span> </dt> <dd> <p>Passed to <a href="https://docs.meteor.com/api/pubsub.html#Meteor-subscribe" target="_blank" rel="external"><code>Meteor.subscribe</code></a>.</p> </dd> <dt> <code>onStop</code> <span class="type">Function</span> </dt> <dd> <p>Passed to <a href="https://docs.meteor.com/api/pubsub.html#Meteor-subscribe" target="_blank" rel="external"><code>Meteor.subscribe</code></a>.</p> </dd> <dt> <code>connection</code> <span class="type"><a href="https://docs.meteor.com/api/connections.html#DDP-connect" target="_blank" rel="external">DDP Connection</a></span> </dt> <dd> <p>The connection on which to make the subscription.</p> </dd> </dl>   <p>You can use <code>this.subscribe</code> from an <a href="templates.html#Template-onCreated"><code>onCreated</code></a> callback to specify which data publications this template depends on. The subscription is automatically stopped when the template is destroyed.</p> <p>There is a complementary function <code>Template.instance().subscriptionsReady()</code> which returns true when all of the subscriptions called with <code>this.subscribe</code> are ready.</p> <p>Inside the template’s HTML, you can use the built-in helper <code>Template.subscriptionsReady</code>, which is an easy pattern for showing loading indicators in your templates when they depend on data loaded from subscriptions.</p> <p>Example:</p> <pre class="highlight js" data-language="js">Template.notifications.onCreated(function () {
  // Use this.subscribe inside onCreated callback

  this.subscribe("notifications");
});</pre> <pre class="highlight html" data-language="html">&lt;template name="notifications"&gt;
  {{#if Template.subscriptionsReady}}
    &lt;!-- This is displayed when all data is ready. --&gt;

    {{#each notifications}}
      {{&gt; notification}}
    {{/each}}
  {{else}}
    Loading...
  {{/if}}
&lt;/template&gt;</pre> <p>Another example where the subscription depends on the data context:</p> <pre class="highlight js" data-language="js">Template.comments.onCreated(function () {
  // Use this.subscribe with the data context reactively

  this.autorun(() =&gt; {
    var dataContext = Template.currentData();
    this.subscribe("comments", dataContext.postId);
  });
});</pre> <pre class="highlight html" data-language="html">{{#with post}}
  {{&gt; comments postId=_id}}
{{/with}}</pre> <p>Another example where you want to initialize a plugin when the subscription is done:</p> <pre class="highlight js" data-language="js">Template.listing.onRendered(function () {
  var template = this;
  
  template.subscribe('listOfThings', () =&gt; {
    // Wait for the data to load using the callback

    Tracker.afterFlush(() =&gt; {
      // Use Tracker.afterFlush to wait for the UI to re-render

      // then use highlight.js to highlight a code snippet

      highlightBlock(template.find('.code'));
    });
  });
});</pre>  <h3 class="api-heading" id="Blaze-TemplateInstance-view"> <div class="locus"> Client </div> <code>Blaze.TemplateInstance#view</code> <div class="subtext-api"> <a class="src-code link secondary" href="https://github.com/meteor/blaze/blob/master/packages/blaze/template.js#L243" target="_blank"> (blaze/template.js, line 243) </a> </div> </h3>   <p>The <a href="blaze.html#Blaze-View">View</a> object for this invocation of the template.</p>     <h2 class="api-heading" id="Template-registerHelper"> <div class="locus"> Client </div> <code>Template.registerHelper(name, function)</code> <div class="subtext-api"> <code>import { Template } from 'meteor/templating'</code> <a class="src-code link secondary" href="https://github.com/meteor/blaze/blob/master/packages/blaze/template.js#L556" target="_blank"> (blaze/template.js, line 556) </a> </div> </h2>   <p>Defines a <a href="#Template-helpers">helper function</a> which can be used from all templates.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>name</code> <span class="type">String</span> </dt> <dd> <p>The name of the helper function you are defining.</p> </dd> <dt> <code>function</code> <span class="type">Function</span> </dt> <dd> <p>The helper function itself.</p> </dd> </dl>    <h2 class="api-heading" id="Template-instance"> <div class="locus"> Client </div> <code>Template.instance()</code> <div class="subtext-api"> <code>import { Template } from 'meteor/templating'</code> <a class="src-code link secondary" href="https://github.com/meteor/blaze/blob/master/packages/blaze/template.js#L505" target="_blank"> (blaze/template.js, line 505) </a> </div> </h2>   <p>The <a href="#Template-instances">template instance</a> corresponding to the current template helper, event handler, callback, or autorun. If there isn't one, <code>null</code>.</p>     <h2 class="api-heading" id="Template-currentData"> <div class="locus"> Client </div> <code>Template.currentData()</code> <div class="subtext-api"> <code>import { Template } from 'meteor/templating'</code> <a class="src-code link secondary" href="https://github.com/meteor/blaze/blob/master/packages/blaze/template.js#L537" target="_blank"> (blaze/template.js, line 537) </a> </div> </h2>   <ul> <li>Inside an <code>onCreated</code>, <code>onRendered</code>, or <code>onDestroyed</code> callback, returns the data context of the template.</li> <li>Inside an event handler, returns the data context of the template on which this event handler was defined.</li> <li>Inside a helper, returns the data context of the DOM node where the helper was used.</li> </ul> <p>Establishes a reactive dependency on the result.</p>     <h2 class="api-heading" id="Template-parentData"> <div class="locus"> Client </div> <code>Template.parentData([numLevels])</code> <div class="subtext-api"> <code>import { Template } from 'meteor/templating'</code> <a class="src-code link secondary" href="https://github.com/meteor/blaze/blob/master/packages/blaze/template.js#L546" target="_blank"> (blaze/template.js, line 546) </a> </div> </h2>   <p>Accesses other data contexts that enclose the current data context.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>numLevels</code> <span class="type">Integer</span> </dt> <dd> <p>The number of levels beyond the current data context to look. Defaults to 1.</p> </dd> </dl>   <p>For example, <code>Template.parentData(0)</code> is equivalent to <code>Template.currentData()</code>. <code>Template.parentData(2)</code> is equivalent to <code>{{../..}}</code> in a template.</p>  <h2 class="api-heading" id="Template-body"> <div class="locus"> Client </div> <code>Template.body</code> <div class="subtext-api"> <code>import { Template } from 'meteor/templating-runtime'</code> <a class="src-code link secondary" href="https://github.com/meteor/blaze/blob/master/packages/templating-runtime/templating.js#L47" target="_blank"> (templating-runtime/templating.js, line 47) </a> </div> </h2>   <p>The <a href="#Template-Declarations">template object</a> representing your <code>&lt;body&gt;</code> tag.</p>    <p>You can define helpers and event maps on <code>Template.body</code> just like on any <code>Template.myTemplate</code> object.</p> <p>Helpers on <code>Template.body</code> are only available in the <code>&lt;body&gt;</code> tags of your app. To register a global helper, use <a href="templates.html#Template-registerHelper">Template.registerHelper</a>. Event maps on <code>Template.body</code> don’t apply to elements added to the body via <code>Blaze.render</code>, jQuery, or the DOM API, or to the body element itself. To handle events on the body, window, or document, use jQuery or the DOM API.</p>  <h2 class="api-heading" id="Template-dynamic"> <div class="locus"> Templates </div> <code>{{&gt; Template.dynamic template=template [data=data] }}</code> <div class="subtext-api"> <a class="src-code link secondary" href="https://github.com/meteor/blaze/blob/master/packages/templating-runtime/dynamic.js#L3" target="_blank"> (templating-runtime/dynamic.js, line 3) </a> </div> </h2>   <p>Choose a template to include dynamically, by name.</p>  <h4 class="subheading">Arguments</h4> <dl class="args"> <dt> <code>template</code> <span class="type">String</span> </dt> <dd> <p>The name of the template to include.</p> </dd> <dt> <code>data</code> <span class="type">Object</span> </dt> <dd> <p>Optional. The data context in which to include the template.</p> </dd> </dl>   <p><code>Template.dynamic</code> allows you to include a template by name, where the name may be calculated by a helper and may change reactively. The <code>data</code> argument is optional, and if it is omitted, the current data context is used. It’s also possible, to use <code>Template.dynamic</code> as a block helper (<code>{{#Template.dynamic}} ... {{/Template.dynamic}}</code>)</p> <p>For example, if there is a template named “foo”, <code>{{&gt; Template.dynamic
template="foo"}}</code> is equivalent to <code>{{&gt; foo}}</code> and <code>{{#Template.dynamic template="foo"}} ... {{/Template.dynamic}}</code> is equivalent to <code>{{#foo}} ... {{/foo}}</code>.</p> <h2 id="Event-Maps">Event Maps</h2>
<p>An event map is an object where the properties specify a set of events to handle, and the values are the handlers for those events. The property can be in one of several forms:</p> <dl> <dt><span class="name"><em>eventtype</em></span></dt>
<dd>
<p>Matches the type of events, such as <code>'click'</code>, separated by a forward slash, like so <code>'touchend/mouseup/keyup'</code>.</p> </dd> <dt><span class="name"><em>eventtype selector</em></span></dt>
<dd>
<p>Matches a particular type of event, but only when it appears on an element that matches a certain CSS selector.</p> </dd> <dt><span class="name"><em>event1, event2</em></span></dt>
<dd>
<p>To handle more than one event / selector with the same function, use a comma-separated list.</p> </dd> </dl> <p>The handler function receives two arguments: <code>event</code>, an object with information about the event, and <code>template</code>, a <a href="#Template-instances">template instance</a> for the template where the handler is defined. The handler also receives some additional context data in <code>this</code>, depending on the context of the current element handling the event. In a template, an element’s context is the data context where that element occurs, which is set by block helpers such as <code>#with</code> and <code>#each</code>.</p> <p>Example:</p> <pre class="highlight js" data-language="js">{
  // Fires when any element is clicked

  'click'(event) { ... },
  
  // Fires when any element with the 'accept' class is clicked

  'click .accept'(event) { ... },
  
  // Fires when 'accept' is clicked or focused

  'click .accept, focus .accept'(event) { ... }
  'click/focus .accept'(event) { ... }
  
  // Fires when 'accept' is clicked or focused, or a key is pressed

  'click .accept, focus .accept, keypress'(event) { ... }
  'click/focus .accept, keypress'(event) { ... }
  
}</pre> <p>Most events bubble up the document tree from their originating element. For example, <code>'click p'</code> catches a click anywhere in a paragraph, even if the click originated on a link, span, or some other element inside the paragraph. The originating element of the event is available as the <code>target</code> property, while the element that matched the selector and is currently handling it is called <code>currentTarget</code>.</p> <pre class="highlight js" data-language="js">{
  'click p'(event) {
    var paragraph = event.currentTarget; // always a P

    var clickedElement = event.target; // could be the P or a child element

  }
}</pre> <p>If a selector matches multiple elements that an event bubbles to, it will be called multiple times, for example in the case of <code>'click
div'</code> or <code>'click *'</code>. If no selector is given, the handler will only be called once, on the original target element.</p> <p>The following properties and methods are available on the event object passed to handlers:</p> <dl class="objdesc"> <dt>
<span class="name">type</span><span class="type">String</span>
</dt>
<dd>
<p>The event’s type, such as “click”, “blur” or “keypress”.</p> </dd> <dt>
<span class="name">target</span><span class="type">DOM Element</span>
</dt>
<dd>
<p>The element that originated the event.</p> </dd> <dt>
<span class="name">currentTarget</span><span class="type">DOM Element</span>
</dt>
<dd>
<p>The element currently handling the event. This is the element that matched the selector in the event map. For events that bubble, it may be <code>target</code> or an ancestor of <code>target</code>, and its value changes as the event bubbles.</p> </dd> <dt>
<span class="name">which</span><span class="type">Number</span>
</dt>
<dd>
<p>For mouse events, the number of the mouse button (1=left, 2=middle, 3=right). For key events, a character or key code.</p> </dd> <dt><span class="name">stopPropagation()</span></dt>
<dd>
<p>Prevent the event from propagating (bubbling) up to other elements. Other event handlers matching the same element are still fired, in this and other event maps.</p> </dd> <dt><span class="name">stopImmediatePropagation()</span></dt>
<dd>
<p>Prevent all additional event handlers from being run on this event, including other handlers in this event map, handlers reached by bubbling, and handlers in other event maps.</p> </dd> <dt><span class="name">preventDefault()</span></dt>
<dd>
<p>Prevents the action the browser would normally take in response to this event, such as following a link or submitting a form. Further handlers are still called, but cannot reverse the effect.</p> </dd> <dt><span class="name">isPropagationStopped()</span></dt>
<dd>
<p>Returns whether <code>stopPropagation()</code> has been called for this event.</p> </dd> <dt><span class="name">isImmediatePropagationStopped()</span></dt>
<dd>
<p>Returns whether <code>stopImmediatePropagation()</code> has been called for this event.</p> </dd> <dt><span class="name">isDefaultPrevented()</span></dt>
<dd>
<p>Returns whether <code>preventDefault()</code> has been called for this event.</p> </dd> </dl> <p>Returning <code>false</code> from a handler is the same as calling both <code>stopImmediatePropagation</code> and <code>preventDefault</code> on the event.</p> <p>Event types and their uses include:</p> <dl class="objdesc"> <dt><span class="name"><code>click</code></span></dt>
<dd>
<p>Mouse click on any element, including a link, button, form control, or div. Use <code>preventDefault()</code> to prevent a clicked link from being followed. Some ways of activating an element from the keyboard also fire <code>click</code>.</p> </dd> <dt><span class="name"><code>dblclick</code></span></dt>
<dd>
<p>Double-click.</p> </dd> <dt><span class="name"><code>focus, blur</code></span></dt>
<dd>
<p>A text input field or other form control gains or loses focus. You can make any element focusable by giving it a <code>tabindex</code> property. Browsers differ on whether links, checkboxes, and radio buttons are natively focusable. These events do not bubble.</p> </dd> <dt><span class="name"><code>change</code></span></dt>
<dd>
<p>A checkbox or radio button changes state. For text fields, use <code>blur</code> or key events to respond to changes.</p> </dd> <dt><span class="name"><code>mouseenter, mouseleave</code></span></dt>
<dd>
<p> The pointer enters or leaves the bounds of an element. These events do not bubble.</p> </dd> <dt><span class="name"><code>mousedown, mouseup</code></span></dt>
<dd>
<p>The mouse button is newly down or up.</p> </dd> <dt><span class="name"><code>keydown, keypress, keyup</code></span></dt>
<dd>
<p>The user presses a keyboard key. <code>keypress</code> is most useful for catching typing in text fields, while <code>keydown</code> and <code>keyup</code> can be used for arrow keys or modifier keys.</p> </dd> </dl> <p>Other DOM events are available as well, but for the events above, Meteor has taken some care to ensure that they work uniformly in all browsers.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2011&ndash;2017 Meteor Development Group, Inc.<br>Licensed under the MIT License.<br>
    <a href="http://blazejs.org/api/templates.html" class="_attribution-link">http://blazejs.org/api/templates.html</a>
  </p>
</div>
