<h1 id="class-ActiveRecord::Type::Value" class="class"> class ActiveRecord::Type::Value </h1>
<dl class="meta">
<dt>Parent:</dt>
<dd class="meta-parent"><a href="../../object.html">Object</a></dd>
<dt>Included modules:</dt>
<dd class="meta-includes"><span class="include">ActiveModel::Type::SerializeCastValue</span></dd>
</dl> <section class="description"> <h1 id="class-ActiveRecord::Type::Value-label-Active+Model+Value+Type">Active Model Value Type</h1> <p>The base class for all attribute types. This class also serves as the default type for attributes that do not specify a type.</p> </section> <section id="5Buntitled-5D" class="documentation-section"> <section class="attribute-method-details"> <header> <h3>Attributes</h3> </header> <div class="method-detail"> <div class="method-heading attribute-method-heading" id="attribute-i-limit"> <span class="method-name">limit</span><span class="attribute-access-type">[R]</span> </div>  </div> <div class="method-detail"> <div class="method-heading attribute-method-heading" id="attribute-i-precision"> <span class="method-name">precision</span><span class="attribute-access-type">[R]</span> </div>  </div> <div class="method-detail"> <div class="method-heading attribute-method-heading" id="attribute-i-scale"> <span class="method-name">scale</span><span class="attribute-access-type">[R]</span> </div>  </div> </section> <section id="public-class-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Class Methods</h3> </header> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-c-new"> <span class="method-name">new</span><span class="method-args">(precision: nil, limit: nil, scale: nil)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="new-source"> <pre class="ruby" data-language="ruby"># File activemodel/lib/active_model/type/value.rb, line 17
def initialize(precision: nil, limit: nil, scale: nil)
  super()
  @precision = precision
  @scale = scale
  @limit = limit
end</pre> </div> <p>Initializes a type with three basic configuration settings: precision, limit, and scale. The <a href="value.html"><code>Value</code></a> base class does not define behavior for these settings. It uses them for equality comparison and hash key generation only.</p> <div class="method-calls-super"> Calls superclass method </div>  </div> </div> </section> <section id="public-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-3D-3D"> <span class="method-name">==</span><span class="method-args">(other)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="3D-3D-source"> <pre class="ruby" data-language="ruby"># File activemodel/lib/active_model/type/value.rb, line 121
def ==(other)
  self.class == other.class &amp;&amp;
    precision == other.precision &amp;&amp;
    scale == other.scale &amp;&amp;
    limit == other.limit
end</pre> </div>  </div> <div class="aliases"> Also aliased as: <a href="value.html#method-i-eql-3F">eql?</a> </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-as_json"> <span class="method-name">as_json</span><span class="method-args">(*)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="as_json-source"> <pre class="ruby" data-language="ruby"># File activemodel/lib/active_model/type/value.rb, line 144
def as_json(*)
  raise NoMethodError
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-assert_valid_value"> <span class="method-name">assert_valid_value</span><span class="method-args">(_)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="assert_valid_value-source"> <pre class="ruby" data-language="ruby"># File activemodel/lib/active_model/type/value.rb, line 133
def assert_valid_value(_)
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-cast"> <span class="method-name">cast</span><span class="method-args">(value)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="cast-source"> <pre class="ruby" data-language="ruby"># File activemodel/lib/active_model/type/value.rb, line 57
def cast(value)
  cast_value(value) unless value.nil?
end</pre> </div> <p><a href="../type.html"><code>Type</code></a> casts a value from user input (e.g. from a setter). This value may be a string from the form builder, or a ruby object passed to a setter. There is currently no way to differentiate between which source it came from.</p> <p>The return value of this method will be returned from <a href="../../activerecord/attributemethods/read.html#method-i-read_attribute"><code>ActiveRecord::AttributeMethods::Read#read_attribute</code></a>. See also: <a href="value.html#method-i-cast_value"><code>Value#cast_value</code></a>.</p> <p><code>value</code> The raw input, as provided to the attribute setter.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-changed-3F"> <span class="method-name">changed?</span><span class="method-args">(old_value, new_value, _new_value_before_type_cast)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="changed-3F-source"> <pre class="ruby" data-language="ruby"># File activemodel/lib/active_model/type/value.rb, line 84
def changed?(old_value, new_value, _new_value_before_type_cast)
  old_value != new_value
end</pre> </div> <p>Determines whether a value has changed for dirty checking. <code>old_value</code> and <code>new_value</code> will always be type-cast. Types should not need to override this method.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-changed_in_place-3F"> <span class="method-name">changed_in_place?</span><span class="method-args">(raw_old_value, new_value)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="changed_in_place-3F-source"> <pre class="ruby" data-language="ruby"># File activemodel/lib/active_model/type/value.rb, line 105
def changed_in_place?(raw_old_value, new_value)
  false
end</pre> </div> <p>Determines whether the mutable value has been modified since it was read. Returns <code>false</code> by default. If your type returns an object which could be mutated, you should override this method. You will need to either:</p> <ul><li> <p>pass <code>new_value</code> to <a href="value.html#method-i-serialize"><code>Value#serialize</code></a> and compare it to <code>raw_old_value</code></p> </li></ul> <p>or</p> <ul><li> <p>pass <code>raw_old_value</code> to <a href="value.html#method-i-deserialize"><code>Value#deserialize</code></a> and compare it to <code>new_value</code></p> </li></ul> <p><code>raw_old_value</code> The original value, before being passed to <code>deserialize</code>.</p> <p><code>new_value</code> The current value, after type casting.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-deserialize"> <span class="method-name">deserialize</span><span class="method-args">(value)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="deserialize-source"> <pre class="ruby" data-language="ruby"># File activemodel/lib/active_model/type/value.rb, line 43
def deserialize(value)
  cast(value)
end</pre> </div> <p>Converts a value from database input to the appropriate ruby type. The return value of this method will be returned from <a href="../../activerecord/attributemethods/read.html#method-i-read_attribute"><code>ActiveRecord::AttributeMethods::Read#read_attribute</code></a>. The default implementation just calls <a href="value.html#method-i-cast"><code>Value#cast</code></a>.</p> <p><code>value</code> The raw input, as provided from the database.</p>  </div> </div> <div class="method-detail method-alias"> <div class="method-header"> <div class="method-heading" id="method-i-eql-3F"> <span class="method-name">eql?</span><span class="method-args">(other)</span> </div> </div>  <div class="aliases"> Alias for: <a href="value.html#method-i-3D-3D">==</a> </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-hash"> <span class="method-name">hash</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="hash-source"> <pre class="ruby" data-language="ruby"># File activemodel/lib/active_model/type/value.rb, line 129
def hash
  [self.class, precision, scale, limit].hash
end</pre> </div>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-serializable-3F"> <span class="method-name">serializable?</span><span class="method-args">(value)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="serializable-3F-source"> <pre class="ruby" data-language="ruby"># File activemodel/lib/active_model/type/value.rb, line 28
def serializable?(value)
  true
end</pre> </div> <p>Returns true if this type can convert <code>value</code> to a type that is usable by the database. For example a boolean type can return <code>true</code> if the value parameter is a Ruby boolean, but may return <code>false</code> if the value parameter is some other object.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-serialize"> <span class="method-name">serialize</span><span class="method-args">(value)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="serialize-source"> <pre class="ruby" data-language="ruby"># File activemodel/lib/active_model/type/value.rb, line 65
def serialize(value)
  value
end</pre> </div> <p>Casts a value from the ruby type to a type that the database knows how to understand. The returned value from this method should be a <code>String</code>, <code>Numeric</code>, <code>Date</code>, <code>Time</code>, <code>Symbol</code>, <code>true</code>, <code>false</code>, or <code>nil</code>.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-type"> <span class="method-name">type</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="type-source"> <pre class="ruby" data-language="ruby"># File activemodel/lib/active_model/type/value.rb, line 34
def type
end</pre> </div> <p>Returns the unique type name as a <span><code>Symbol</code></span>. Subclasses should override this method.</p>  </div> </div> </section> <section id="private-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Private Instance Methods</h3> </header> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-cast_value"> <span class="method-name">cast_value</span><span class="method-args">(value)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="cast_value-source"> <pre class="ruby" data-language="ruby"># File activemodel/lib/active_model/type/value.rb, line 152
def cast_value(value) # :doc:
  value
end</pre> </div> <p>Convenience method for types which do not need separate type casting behavior for user and database inputs. Called by <a href="value.html#method-i-cast"><code>Value#cast</code></a> for values except <code>nil</code>.</p>  </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2004&ndash;2021 David Heinemeier Hansson<br>Licensed under the MIT License.<br>
    
  </p>
</div>
