<h1>Action View Helpers</h1>
<div class="_simple"> <p>After reading this guide, you will know:</p> <ul> <li>How to format dates, strings, and numbers.</li> <li>How to work with text and tags.</li> <li>How to link to images, videos, stylesheets, etc.</li> <li>How to work with Atom feeds and JavaScript in the views.</li> <li>How to cache, capture, debug and sanitize content.</li> </ul>  <h2 class="chapter">  Chapters </h2> <ol class="chapters"> <li>
<a href="#formatting">Formatting</a> <ul> <li><a href="#dates">Dates</a></li> <li><a href="#numbers">Numbers</a></li> <li><a href="#text">Text</a></li> </ul>
</li> <li><a href="#forms">Forms</a></li> <li>
<a href="#navigation">Navigation</a> <ul> <li><a href="#button-to">button_to</a></li> <li><a href="#current-page-questionmark">current_page?</a></li> <li><a href="#link-to">link_to</a></li> <li><a href="#mail-to">mail_to</a></li> <li><a href="#url-for">url_for</a></li> </ul>
</li> <li>
<a href="#sanitization">Sanitization</a> <ul> <li><a href="#sanitize">sanitize</a></li> <li><a href="#sanitize-css">sanitize_css</a></li> <li><a href="#strip-links">strip_links</a></li> <li><a href="#strip-tags">strip_tags</a></li> </ul>
</li> <li>
<a href="#assets">Assets</a> <ul> <li><a href="#audio-tag">audio_tag</a></li> <li><a href="#auto-discovery-link-tag">auto_discovery_link_tag</a></li> <li><a href="#favicon-link-tag">favicon_link_tag</a></li> <li><a href="#image-tag">image_tag</a></li> <li><a href="#javascript-include-tag">javascript_include_tag</a></li> <li><a href="#picture-tag">picture_tag</a></li> <li><a href="#preload-link-tag">preload_link_tag</a></li> <li><a href="#stylesheet-link-tag">stylesheet_link_tag</a></li> <li><a href="#video-tag">video_tag</a></li> </ul>
</li> <li>
<a href="#javascript">JavaScript</a> <ul> <li><a href="#escape-javascript">escape_javascript</a></li> <li><a href="#javascript-tag">javascript_tag</a></li> </ul>
</li> <li>
<a href="#alternative-tags">Alternative Tags</a> <ul> <li><a href="#tag">tag</a></li> <li><a href="#token-list">token_list</a></li> </ul>
</li> <li>
<a href="#capture-blocks">Capture Blocks</a> <ul> <li><a href="#capture">capture</a></li> <li><a href="#content-for">content_for</a></li> </ul>
</li> <li>
<a href="#performance">Performance</a> <ul> <li><a href="#benchmark">benchmark</a></li> <li><a href="#cache">cache</a></li> </ul>
</li> <li>
<a href="#miscellaneous">Miscellaneous</a> <ul> <li><a href="#atom-feed">atom_feed</a></li> <li><a href="#debug">debug</a></li> </ul>
</li> </ol>  <hr>  <p>The following outlines <strong>some of the most commonly used helpers</strong> available in Action View. It serves as a good starting point, but reviewing the full <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers.html">API Documentation</a> is also recommended, as it covers all of the helpers in more detail.</p>
<h1 id="formatting"><a class="anchorlink" href="#formatting"><span>1</span> Formatting</a></h1>
<h2 id="dates"><a class="anchorlink" href="#dates"><span>1.1</span> Dates</a></h2>
<p>These helpers facilitate the display of date and/or time elements as contextual human readable forms.</p>
<h3 id="distance-of-time-in-words"><a class="anchorlink" href="#distance-of-time-in-words"><span>1.1.1</span> distance_of_time_in_words</a></h3>
<p>Reports the approximate distance in time between two <code>Time</code> or <code>Date</code> objects or integers as seconds. Set <code>include_seconds</code> to true if you want more detailed approximations.</p>
<div class="interstitial code"> <pre data-language="ruby">distance_of_time_in_words(Time.current, 15.seconds.from_now)
# =&gt; less than a minute
distance_of_time_in_words(Time.current, 15.seconds.from_now, include_seconds: true)
# =&gt; less than 20 seconds</pre> <button class="clipboard-button" data-clipboard-text="distance_of_time_in_words(Time.current, 15.seconds.from_now)
# =&gt; less than a minute
distance_of_time_in_words(Time.current, 15.seconds.from_now, include_seconds: true)
# =&gt; less than 20 seconds
">Copy</button> </div> <div class="interstitial note"><p>We use <code>Time.current</code> instead of <code>Time.now</code> because it returns the current time based on the timezone set in Rails, whereas <code>Time.now</code> returns a Time object based on the server's timezone.</p></div>
<p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-distance_of_time_in_words"><code>distance_of_time_in_words</code> API Documentation</a> for more information.</p>
<h3 id="time-ago-in-words"><a class="anchorlink" href="#time-ago-in-words"><span>1.1.2</span> time_ago_in_words</a></h3>
<p>Reports the approximate distance in time between a <code>Time</code> or <code>Date</code> object, or integer as seconds, and <code>Time.current</code>.</p>
<div class="interstitial code"> <pre data-language="ruby">time_ago_in_words(3.minutes.from_now) # =&gt; 3 minutes</pre> <button class="clipboard-button" data-clipboard-text="time_ago_in_words(3.minutes.from_now) # =&gt; 3 minutes
">Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-time_ago_in_words"><code>time_ago_in_words</code> API Documentation</a> for more information.</p>
<h2 id="numbers"><a class="anchorlink" href="#numbers"><span>1.2</span> Numbers</a></h2>
<p>A set of methods for converting numbers into formatted strings. Methods are provided for phone numbers, currency, percentage, precision, positional notation, and file size.</p>
<h3 id="number-to-currency"><a class="anchorlink" href="#number-to-currency"><span>1.2.1</span> number_to_currency</a></h3>
<p>Formats a number into a currency string (e.g., $13.65).</p>
<div class="interstitial code"> <pre data-language="ruby">number_to_currency(1234567890.50) # =&gt; $1,234,567,890.50</pre> <button class="clipboard-button" data-clipboard-text="number_to_currency(1234567890.50) # =&gt; $1,234,567,890.50
">Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_currency"><code>number_to_currency</code> API Documentation</a> for more information.</p>
<h3 id="number-to-human"><a class="anchorlink" href="#number-to-human"><span>1.2.2</span> number_to_human</a></h3>
<p>Pretty prints (formats and approximates) a number so it is more readable by users; useful for numbers that can get very large.</p>
<div class="interstitial code"> <pre data-language="ruby">number_to_human(1234)    # =&gt; 1.23 Thousand
number_to_human(1234567) # =&gt; 1.23 Million</pre> <button class="clipboard-button" data-clipboard-text="number_to_human(1234)    # =&gt; 1.23 Thousand
number_to_human(1234567) # =&gt; 1.23 Million
">Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_human"><code>number_to_human</code> API Documentation</a> for more information.</p>
<h3 id="number-to-human-size"><a class="anchorlink" href="#number-to-human-size"><span>1.2.3</span> number_to_human_size</a></h3>
<p>Formats the bytes in size into a more understandable representation; useful for reporting file sizes to users.</p>
<div class="interstitial code"> <pre data-language="ruby">number_to_human_size(1234)    # =&gt; 1.21 KB
number_to_human_size(1234567) # =&gt; 1.18 MB</pre> <button class="clipboard-button" data-clipboard-text="number_to_human_size(1234)    # =&gt; 1.21 KB
number_to_human_size(1234567) # =&gt; 1.18 MB
">Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_human_size"><code>number_to_human_size</code> API Documentation</a> for more information.</p>
<h3 id="number-to-percentage"><a class="anchorlink" href="#number-to-percentage"><span>1.2.4</span> number_to_percentage</a></h3>
<p>Formats a number as a percentage string.</p>
<div class="interstitial code"> <pre data-language="ruby">number_to_percentage(100, precision: 0) # =&gt; 100%</pre> <button class="clipboard-button" data-clipboard-text="number_to_percentage(100, precision: 0) # =&gt; 100%
">Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_percentage"><code>number_to_percentage</code> API Documentation</a> for more information.</p>
<h3 id="number-to-phone"><a class="anchorlink" href="#number-to-phone"><span>1.2.5</span> number_to_phone</a></h3>
<p>Formats a number into a phone number (US by default).</p>
<div class="interstitial code"> <pre data-language="ruby">number_to_phone(1235551234) # =&gt; 123-555-1234</pre> <button class="clipboard-button" data-clipboard-text="number_to_phone(1235551234) # =&gt; 123-555-1234
">Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_phone"><code>number_to_phone</code> API Documentation</a> for more information.</p>
<h3 id="number-with-delimiter"><a class="anchorlink" href="#number-with-delimiter"><span>1.2.6</span> number_with_delimiter</a></h3>
<p>Formats a number with grouped thousands using a delimiter.</p>
<div class="interstitial code"> <pre data-language="ruby">number_with_delimiter(12345678) # =&gt; 12,345,678</pre> <button class="clipboard-button" data-clipboard-text="number_with_delimiter(12345678) # =&gt; 12,345,678
">Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_with_delimiter"><code>number_with_delimiter</code> API Documentation</a> for more information.</p>
<h3 id="number-with-precision"><a class="anchorlink" href="#number-with-precision"><span>1.2.7</span> number_with_precision</a></h3>
<p>Formats a number with the specified level of <code>precision</code>, which defaults to 3.</p>
<div class="interstitial code"> <pre data-language="ruby">number_with_precision(111.2345)               # =&gt; 111.235
number_with_precision(111.2345, precision: 2) # =&gt; 111.23</pre> <button class="clipboard-button" data-clipboard-text="number_with_precision(111.2345)               # =&gt; 111.235
number_with_precision(111.2345, precision: 2) # =&gt; 111.23
">Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_with_precision"><code>number_with_precision</code> API Documentation</a> for more information.</p>
<h2 id="text"><a class="anchorlink" href="#text"><span>1.3</span> Text</a></h2>
<p>A set of methods for filtering, formatting and transforming strings.</p>
<h3 id="excerpt"><a class="anchorlink" href="#excerpt"><span>1.3.1</span> excerpt</a></h3>
<p>Given a <code>text</code> and a <code>phrase</code>, <code>excerpt</code> searches for and extracts the first occurrence of the <code>phrase</code>, plus the requested surrounding text determined by a <code>radius</code>. An omission marker is prepended/appended if the start/end of the result does not coincide with the start/end of the text.</p>
<div class="interstitial code"> <pre data-language="ruby">excerpt("This is a very beautiful morning", "very", separator: " ", radius: 1)
# =&gt; ...a very beautiful...

excerpt("This is also an example", "an", radius: 8, omission: "&lt;chop&gt; ")
#=&gt; &lt;chop&gt; is also an example</pre> <button class="clipboard-button" data-clipboard-text='excerpt("This is a very beautiful morning", "very", separator: " ", radius: 1)
# =&gt; ...a very beautiful...

excerpt("This is also an example", "an", radius: 8, omission: "&lt;chop&gt; ")
#=&gt; &lt;chop&gt; is also an example
'>Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-excerpt"><code>excerpt</code> API Documentation</a> for more information.</p>
<h3 id="pluralize"><a class="anchorlink" href="#pluralize"><span>1.3.2</span> pluralize</a></h3>
<p>Returns the singular or plural form of a word based on the value of a number.</p>
<div class="interstitial code"> <pre data-language="ruby">pluralize(1, "person") # =&gt; 1 person
pluralize(2, "person") # =&gt; 2 people
pluralize(3, "person", plural: "users") # =&gt; 3 users</pre> <button class="clipboard-button" data-clipboard-text='pluralize(1, "person") # =&gt; 1 person
pluralize(2, "person") # =&gt; 2 people
pluralize(3, "person", plural: "users") # =&gt; 3 users
'>Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-pluralize"><code>pluralize</code> API Documentation</a> for more information.</p>
<h3 id="truncate"><a class="anchorlink" href="#truncate"><span>1.3.3</span> truncate</a></h3>
<p>Truncates a given <code>text</code> to a given <code>length</code>. If the text is truncated, an omission marker will be appended to the result for a total length not exceeding <code>length</code>.</p>
<div class="interstitial code"> <pre data-language="ruby">truncate("Once upon a time in a world far far away")
# =&gt; "Once upon a time in a world..."

truncate("Once upon a time in a world far far away", length: 17)
# =&gt; "Once upon a ti..."

truncate("one-two-three-four-five", length: 20, separator: "-")
# =&gt; "one-two-three..."

truncate("And they found that many people were sleeping better.", length: 25, omission: "... (continued)")
# =&gt; "And they f... (continued)"

truncate("&lt;p&gt;Once upon a time in a world far far away&lt;/p&gt;", escape: false)
# =&gt; "&lt;p&gt;Once upon a time in a wo..."</pre> <button class="clipboard-button" data-clipboard-text='truncate("Once upon a time in a world far far away")
# =&gt; "Once upon a time in a world..."

truncate("Once upon a time in a world far far away", length: 17)
# =&gt; "Once upon a ti..."

truncate("one-two-three-four-five", length: 20, separator: "-")
# =&gt; "one-two-three..."

truncate("And they found that many people were sleeping better.", length: 25, omission: "... (continued)")
# =&gt; "And they f... (continued)"

truncate("&lt;p&gt;Once upon a time in a world far far away&lt;/p&gt;", escape: false)
# =&gt; "&lt;p&gt;Once upon a time in a wo..."
'>Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-truncate"><code>truncate</code> API Documentation</a> for more information.</p>
<h3 id="word-wrap"><a class="anchorlink" href="#word-wrap"><span>1.3.4</span> word_wrap</a></h3>
<p>Wraps the text into lines no longer than <code>line_width</code> width.</p>
<div class="interstitial code"> <pre data-language="ruby">word_wrap("Once upon a time", line_width: 8)
# =&gt; "Once\nupon a\ntime"</pre> <button class="clipboard-button" data-clipboard-text='word_wrap("Once upon a time", line_width: 8)
# =&gt; "Once\nupon a\ntime"
'>Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-word_wrap"><code>word_wrap</code> API Documentation</a> for more information.</p>
<h1 id="forms"><a class="anchorlink" href="#forms"><span>2</span> Forms</a></h1>
<p>Form helpers simplify working with models compared to using standard HTML elements alone. They offer a range of methods tailored to generating forms based on your models. Some methods correspond to a specific type of input, such as text fields, password fields, select dropdowns, and more. When a form is submitted, the inputs within the form are grouped into the params object and sent back to the controller.</p>
<p>You can learn more about form helpers in the <a href="form_helpers.html">Action View Form Helpers Guide</a>.</p>
<h1 id="navigation"><a class="anchorlink" href="#navigation"><span>3</span> Navigation</a></h1>
<p>A set of methods to build links and URLs that depend on the routing subsystem.</p>
<h2 id="button-to"><a class="anchorlink" href="#button-to"><span>3.1</span> button_to</a></h2>
<p>Generates a form that submits to the passed URL. The form has a submit button with the value of the <code>name</code>.</p>
<div class="interstitial code"> <pre data-language="erb">&lt;%= button_to "Sign in", sign_in_path %&gt;</pre> <button class="clipboard-button" data-clipboard-text='&lt;%= button_to "Sign in", sign_in_path %&gt;
'>Copy</button> </div> <p>would output the following HTML:</p>
<div class="interstitial code"> <pre data-language="html">&lt;form method="post" action="/sessions" class="button_to"&gt;
  &lt;input type="submit" value="Sign in" /&gt;
&lt;/form&gt;</pre> <button class="clipboard-button" data-clipboard-text='&lt;form method="post" action="/sessions" class="button_to"&gt;
  &lt;input type="submit" value="Sign in" /&gt;
&lt;/form&gt;
'>Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to"><code>button_to</code> API Documentation</a> for more information.</p>
<h2 id="current-page-questionmark"><a class="anchorlink" href="#current-page-questionmark"><span>3.2</span> current_page?</a></h2>
<p>Returns true if the current request URL matches the given <code>options</code>.</p>
<div class="interstitial code"> <pre data-language="erb">&lt;% if current_page?(controller: 'profiles', action: 'show') %&gt;
  &lt;strong&gt;Currently on the profile page&lt;/strong&gt;
&lt;% end %&gt;</pre> <button class="clipboard-button" data-clipboard-text="&lt;% if current_page?(controller: 'profiles', action: 'show') %&gt;
  &lt;strong&gt;Currently on the profile page&lt;/strong&gt;
&lt;% end %&gt;
">Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-current_page-3F"><code>current_page?</code> API Documentation</a> for more information.</p>
<h2 id="link-to"><a class="anchorlink" href="#link-to"><span>3.3</span> link_to</a></h2>
<p>Links to a URL derived from <code>url_for</code> under the hood. It's commonly used to create links for RESTful resources, especially when passing models as arguments to <code>link_to</code>.</p>
<div class="interstitial code"> <pre data-language="ruby">link_to "Profile", @profile
# =&gt; &lt;a href="/profiles/1.html"&gt;Profile&lt;/a&gt;

link_to "Book", @book # given a composite primary key [:author_id, :id]
# =&gt; &lt;a href="/books/2_1.html"&gt;Book&lt;/a&gt;

link_to "Profiles", profiles_path
# =&gt; &lt;a href="/profiles.html"&gt;Profiles&lt;/a&gt;

link_to nil, "https://example.com"
# =&gt; &lt;a href="https://www.example.com"&gt;https://www.example.com&lt;/a&gt;

link_to "Articles", articles_path, id: "articles", class: "article__container"
# =&gt; &lt;a href="/articles.html" class="article__container" id="articles"&gt;Articles&lt;/a&gt;</pre> <button class="clipboard-button" data-clipboard-text='link_to "Profile", @profile
# =&gt; &lt;a href="/profiles/1.html"&gt;Profile&lt;/a&gt;

link_to "Book", @book # given a composite primary key [:author_id, :id]
# =&gt; &lt;a href="/books/2_1.html"&gt;Book&lt;/a&gt;

link_to "Profiles", profiles_path
# =&gt; &lt;a href="/profiles.html"&gt;Profiles&lt;/a&gt;

link_to nil, "https://example.com"
# =&gt; &lt;a href="https://www.example.com"&gt;https://www.example.com&lt;/a&gt;

link_to "Articles", articles_path, id: "articles", class: "article__container"
# =&gt; &lt;a href="/articles.html" class="article__container" id="articles"&gt;Articles&lt;/a&gt;
'>Copy</button> </div> <p>You can use a block if your link target can't fit in the name parameter.</p>
<div class="interstitial code"> <pre data-language="erb">&lt;%= link_to @profile do %&gt;
  &lt;strong&gt;&lt;%= @profile.name %&gt;&lt;/strong&gt; -- &lt;span&gt;Check it out!&lt;/span&gt;
&lt;% end %&gt;</pre> <button class="clipboard-button" data-clipboard-text="&lt;%= link_to @profile do %&gt;
  &lt;strong&gt;&lt;%= @profile.name %&gt;&lt;/strong&gt; -- &lt;span&gt;Check it out!&lt;/span&gt;
&lt;% end %&gt;
">Copy</button> </div> <p>It would output the following HTML:</p>
<div class="interstitial code"> <pre data-language="html">&lt;a href="/profiles/1.html"&gt;
  &lt;strong&gt;David&lt;/strong&gt; -- &lt;span&gt;Check it out!&lt;/span&gt;
&lt;/a&gt;</pre> <button class="clipboard-button" data-clipboard-text='&lt;a href="/profiles/1.html"&gt;
  &lt;strong&gt;David&lt;/strong&gt; -- &lt;span&gt;Check it out!&lt;/span&gt;
&lt;/a&gt;
'>Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to"><code>link_to</code> API Documentation</a> for more information.</p>
<h2 id="mail-to"><a class="anchorlink" href="#mail-to"><span>3.4</span> mail_to</a></h2>
<p>Generates a <code>mailto</code> link tag to the specified email address. You can also specify the link text, additional HTML options, and whether to encode the email address.</p>
<div class="interstitial code"> <pre data-language="ruby">mail_to "john_doe@gmail.com"
# =&gt; &lt;a href="mailto:john_doe@gmail.com.html"&gt;john_doe@gmail.com&lt;/a&gt;

mail_to "me@john_doe.com", cc: "me@jane_doe.com",
        subject: "This is an example email"
# =&gt; &lt;a href="mailto:.html"me@john_doe.com?cc=me@jane_doe.com&amp;subject=This%20is%20an%20example%20email"&gt;"me@john_doe.com&lt;/a&gt;</pre> <button class="clipboard-button" data-clipboard-text='mail_to "john_doe@gmail.com"
# =&gt; &lt;a href="mailto:john_doe@gmail.com.html"&gt;john_doe@gmail.com&lt;/a&gt;

mail_to "me@john_doe.com", cc: "me@jane_doe.com",
        subject: "This is an example email"
# =&gt; &lt;a href="mailto:.html"me@john_doe.com?cc=me@jane_doe.com&amp;subject=This%20is%20an%20example%20email"&gt;"me@john_doe.com&lt;/a&gt;
'>Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-mail_to"><code>mail_to</code> API Documentation</a> for more information.</p>
<h2 id="url-for"><a class="anchorlink" href="#url-for"><span>3.5</span> url_for</a></h2>
<p>Returns the URL for the set of <code>options</code> provided.</p>
<div class="interstitial code"> <pre data-language="ruby">url_for @profile
# =&gt; /profiles/1

url_for [ @hotel, @booking, page: 2, line: 3 ]
# =&gt; /hotels/1/bookings/1?line=3&amp;page=2

url_for @post # given a composite primary key [:blog_id, :id]
# =&gt; /posts/1_2</pre> <button class="clipboard-button" data-clipboard-text="url_for @profile
# =&gt; /profiles/1

url_for [ @hotel, @booking, page: 2, line: 3 ]
# =&gt; /hotels/1/bookings/1?line=3&amp;page=2

url_for @post # given a composite primary key [:blog_id, :id]
# =&gt; /posts/1_2
">Copy</button> </div> <h1 id="sanitization"><a class="anchorlink" href="#sanitization"><span>4</span> Sanitization</a></h1>
<p>A set of methods for scrubbing text of undesired HTML elements. The helpers are particularly useful for helping to ensure that only safe and valid HTML/CSS is rendered. It can also be useful to prevent XSS attacks by escaping or removing potentially malicious content from user input before rendering it in your views.</p>
<p>This functionality is powered internally by the <a href="https://github.com/rails/rails-html-sanitizer">rails-html-sanitizer</a> gem.</p>
<h2 id="sanitize"><a class="anchorlink" href="#sanitize"><span>4.1</span> sanitize</a></h2>
<p>The <code>sanitize</code> method will HTML encode all tags and strip all attributes that aren't specifically allowed.</p>
<div class="interstitial code"> <pre data-language="ruby">sanitize @article.body</pre> <button class="clipboard-button" data-clipboard-text="sanitize @article.body
">Copy</button> </div> <p>If either the <code>:attributes</code> or <code>:tags</code> options are passed, only the mentioned attributes and tags are allowed and nothing else.</p>
<div class="interstitial code"> <pre data-language="ruby">sanitize @article.body, tags: %w(table tr td), attributes: %w(id class style)</pre> <button class="clipboard-button" data-clipboard-text="sanitize @article.body, tags: %w(table tr td), attributes: %w(id class style)
">Copy</button> </div> <p>To change defaults for multiple uses, for example, adding table tags to the default:</p>
<div class="interstitial code"> <pre data-language="ruby"># config/application.rb
class Application &lt; Rails::Application
  config.action_view.sanitized_allowed_tags = %w(table tr td)
end</pre> <button class="clipboard-button" data-clipboard-text="class Application &lt; Rails::Application
  config.action_view.sanitized_allowed_tags = %w(table tr td)
end
">Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-sanitize"><code>sanitize</code> API Documentation</a> for more information.</p>
<h2 id="sanitize-css"><a class="anchorlink" href="#sanitize-css"><span>4.2</span> sanitize_css</a></h2>
<p>Sanitizes a block of CSS code, particularly when it comes across a style attribute in HTML content. <code>sanitize_css</code> is particularly useful when dealing with user-generated content or dynamic content that includes style attributes.</p>
<p>The <code>sanitize_css</code> method below will remove the styles that are not allowed.</p>
<div class="interstitial code"> <pre data-language="ruby">sanitize_css("background-color: red; color: white; font-size: 16px;")</pre> <button class="clipboard-button" data-clipboard-text='sanitize_css("background-color: red; color: white; font-size: 16px;")
'>Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-sanitize_css"><code>sanitize_css</code> API Documentation</a> for more information.</p>
<h2 id="strip-links"><a class="anchorlink" href="#strip-links"><span>4.3</span> strip_links</a></h2>
<p>Strips all link tags from text leaving just the link text.</p>
<div class="interstitial code"> <pre data-language="ruby">strip_links("&lt;a href='https://rubyonrails.org'&gt;Ruby on Rails&lt;/a&gt;")
# =&gt; Ruby on Rails

strip_links("emails to &lt;a href='mailto:me@email.com'&gt;me@email.com&lt;/a&gt;.")
# =&gt; emails to me@email.com.

strip_links("Blog: &lt;a href='http://myblog.com/'&gt;Visit&lt;/a&gt;.")
# =&gt; Blog: Visit.</pre> <button class="clipboard-button" data-clipboard-text="strip_links(&quot;&lt;a href='https://rubyonrails.org'&gt;Ruby on Rails&lt;/a&gt;&quot;)
# =&gt; Ruby on Rails

strip_links(&quot;emails to &lt;a href='mailto:me@email.com'&gt;me@email.com&lt;/a&gt;.&quot;)
# =&gt; emails to me@email.com.

strip_links(&quot;Blog: &lt;a href='http://myblog.com/'&gt;Visit&lt;/a&gt;.&quot;)
# =&gt; Blog: Visit.
">Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-strip_links"><code>strip_links</code> API Documentation</a> for more information.</p>
<h2 id="strip-tags"><a class="anchorlink" href="#strip-tags"><span>4.4</span> strip_tags</a></h2>
<p>Strips all HTML tags from the HTML, including comments and special characters.</p>
<div class="interstitial code"> <pre data-language="ruby">strip_tags("Strip &lt;i&gt;these&lt;/i&gt; tags!")
# =&gt; Strip these tags!

strip_tags("&lt;b&gt;Bold&lt;/b&gt; no more! &lt;a href='more.html'&gt;See more&lt;/a&gt;")
# =&gt; Bold no more! See more

strip_links('&lt;&lt;a href="https://example.org"&gt;malformed &amp; link&lt;/a&gt;')
# =&gt; &amp;lt;malformed &amp;amp; link</pre> <button class="clipboard-button" data-clipboard-text="strip_tags(&quot;Strip &lt;i&gt;these&lt;/i&gt; tags!&quot;)
# =&gt; Strip these tags!

strip_tags(&quot;&lt;b&gt;Bold&lt;/b&gt; no more! &lt;a href='more.html'&gt;See more&lt;/a&gt;&quot;)
# =&gt; Bold no more! See more

strip_links('&lt;&lt;a href=&quot;https://example.org&quot;&gt;malformed &amp; link&lt;/a&gt;')
# =&gt; &amp;lt;malformed &amp;amp; link
">Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-strip_tags"><code>strip_tags</code> API Documentation</a> for more information.</p>
<h1 id="assets"><a class="anchorlink" href="#assets"><span>5</span> Assets</a></h1>
<p>A set of methods for generating HTML that links views to assets such as images, JavaScript files, stylesheets, and feeds.</p>
<p>By default, Rails links to these assets on the current host in the public folder, but you can direct Rails to link to assets from a dedicated assets server by setting <a href="configuring.html#config-asset-host"><code>config.asset_host</code></a> in the application configuration, typically in <code>config/environments/production.rb</code>.</p>
<p>For example, let's say your asset host is <code>assets.example.com</code>:</p>
<div class="interstitial code"> <pre data-language="ruby">config.asset_host = "assets.example.com"</pre> <button class="clipboard-button" data-clipboard-text='config.asset_host = "assets.example.com"
'>Copy</button> </div> <p>then the corresponding URL for an <code>image_tag</code> would be:</p>
<div class="interstitial code"> <pre data-language="ruby">image_tag("rails.png")
# =&gt; &lt;img src="//assets.example.com/images/rails.png" /&gt;</pre> <button class="clipboard-button" data-clipboard-text='image_tag("rails.png")
# =&gt; &lt;img src="//assets.example.com/images/rails.png" /&gt;
'>Copy</button> </div> <h2 id="audio-tag"><a class="anchorlink" href="#audio-tag"><span>5.1</span> audio_tag</a></h2>
<p>Generates an HTML audio tag with source(s), either as a single tag for a string source or nested source tags within an array for multiple sources. The <code>sources</code> can be full paths, files in your public audios directory, or <a href="active_storage_overview.html">Active Storage attachments</a>.</p>
<div class="interstitial code"> <pre data-language="ruby">audio_tag("sound")
# =&gt; &lt;audio src="/audios/sound"&gt;&lt;/audio&gt;

audio_tag("sound.wav", "sound.mid")
# =&gt; &lt;audio&gt;&lt;source src="/audios/sound.wav" /&gt;&lt;source src="/audios/sound.mid" /&gt;&lt;/audio&gt;

audio_tag("sound", controls: true)
# =&gt; &lt;audio controls="controls" src="/audios/sound"&gt;&lt;/audio&gt;</pre> <button class="clipboard-button" data-clipboard-text='audio_tag("sound")
# =&gt; &lt;audio src="/audios/sound"&gt;&lt;/audio&gt;

audio_tag("sound.wav", "sound.mid")
# =&gt; &lt;audio&gt;&lt;source src="/audios/sound.wav" /&gt;&lt;source src="/audios/sound.mid" /&gt;&lt;/audio&gt;

audio_tag("sound", controls: true)
# =&gt; &lt;audio controls="controls" src="/audios/sound"&gt;&lt;/audio&gt;
'>Copy</button> </div> <div class="interstitial info"><p>Internally, <code>audio_tag</code> uses <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/AssetUrlHelper.html#method-i-audio_path"><code>audio_path</code> from the AssetUrlHelpers</a> to build the audio path.</p></div>
<p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-audio_tag"><code>audio_tag</code> API Documentation</a> for more information.</p>
<h2 id="auto-discovery-link-tag"><a class="anchorlink" href="#auto-discovery-link-tag"><span>5.2</span> auto_discovery_link_tag</a></h2>
<p>Returns a link tag that browsers and feed readers can use to auto-detect an RSS, Atom, or JSON feed.</p>
<div class="interstitial code"> <pre data-language="ruby">auto_discovery_link_tag(:rss, "http://www.example.com/feed.rss", { title: "RSS Feed" })
# =&gt; &lt;link rel="alternate" type="application/rss+xml" title="RSS Feed" href="http://www.example.com/feed.rss" /&gt;</pre> <button class="clipboard-button" data-clipboard-text='auto_discovery_link_tag(:rss, "http://www.example.com/feed.rss", { title: "RSS Feed" })
# =&gt; &lt;link rel="alternate" type="application/rss+xml" title="RSS Feed" href="http://www.example.com/feed.rss" /&gt;
'>Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-auto_discovery_link_tag"><code>auto_discovery_link_tag</code> API Documentation</a> for more information.</p>
<h2 id="favicon-link-tag"><a class="anchorlink" href="#favicon-link-tag"><span>5.3</span> favicon_link_tag</a></h2>
<p>Returns a link tag for a favicon managed by the asset pipeline. The <code>source</code> can be a full path or a file that exists in your assets directory.</p>
<div class="interstitial code"> <pre data-language="ruby">favicon_link_tag
# =&gt; &lt;link href="/assets/favicon.ico.html" rel="icon" type="image/x-icon" /&gt;</pre> <button class="clipboard-button" data-clipboard-text='favicon_link_tag
# =&gt; &lt;link href="/assets/favicon.ico.html" rel="icon" type="image/x-icon" /&gt;
'>Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-favicon_link_tag"><code>favicon_link_tag</code> API Documentation</a> for more information.</p>
<h2 id="image-tag"><a class="anchorlink" href="#image-tag"><span>5.4</span> image_tag</a></h2>
<p>Returns an HTML image tag for the source. The <code>source</code> can be a full path or a file that exists in your <code>app/assets/images</code> directory.</p>
<div class="interstitial code"> <pre data-language="ruby">image_tag("icon.png")
# =&gt; &lt;img src="/assets/icon.png" /&gt;

image_tag("icon.png", size: "16x10", alt: "Edit Article")
# =&gt; &lt;img src="/assets/icon.png" width="16" height="10" alt="Edit Article" /&gt;</pre> <button class="clipboard-button" data-clipboard-text='image_tag("icon.png")
# =&gt; &lt;img src="/assets/icon.png" /&gt;

image_tag("icon.png", size: "16x10", alt: "Edit Article")
# =&gt; &lt;img src="/assets/icon.png" width="16" height="10" alt="Edit Article" /&gt;
'>Copy</button> </div> <div class="interstitial info"><p>Internally, <code>image_tag</code> uses <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/AssetUrlHelper.html#method-i-image_path"><code>image_path</code> from the AssetUrlHelpers</a> to build the image path.</p></div>
<p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-image_tag"><code>image_tag</code> API Documentation</a> for more information.</p>
<h2 id="javascript-include-tag"><a class="anchorlink" href="#javascript-include-tag"><span>5.5</span> javascript_include_tag</a></h2>
<p>Returns an HTML script tag for each of the sources provided. You can pass in the filename (<code>.js</code> extension is optional) of JavaScript files that exist in your <code>app/assets/javascripts</code> directory for inclusion into the current page, or you can pass the full path relative to your document root.</p>
<div class="interstitial code"> <pre data-language="ruby">javascript_include_tag("common")
# =&gt; &lt;script src="/assets/common.js"&gt;&lt;/script&gt;

javascript_include_tag("common", async: true)
# =&gt; &lt;script src="/assets/common.js" async="async"&gt;&lt;/script&gt;</pre> <button class="clipboard-button" data-clipboard-text='javascript_include_tag("common")
# =&gt; &lt;script src="/assets/common.js"&gt;&lt;/script&gt;

javascript_include_tag("common", async: true)
# =&gt; &lt;script src="/assets/common.js" async="async"&gt;&lt;/script&gt;
'>Copy</button> </div> <p>Some of the most common attributes are <code>async</code> and <code>defer</code>, where <code>async</code> will allow the script to be loaded in parallel to be parsed and evaluated as soon as possible, and <code>defer</code> will indicate that the script is meant to be executed after the document has been parsed.</p>
<div class="interstitial info"><p>Internally, <code>javascript_include_tag</code> uses <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/AssetUrlHelper.html#method-i-javascript_path"><code>javascript_path</code> from the AssetUrlHelpers</a> to build the script path.</p></div>
<p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-javascript_include_tag"><code>javascript_include_tag</code> API Documentation</a> for more information.</p>
<h2 id="picture-tag"><a class="anchorlink" href="#picture-tag"><span>5.6</span> picture_tag</a></h2>
<p>Returns an HTML picture tag for the source. It supports passing a String, an Array, or a Block.</p>
<div class="interstitial code"> <pre data-language="ruby">picture_tag("icon.webp", "icon.png")</pre> <button class="clipboard-button" data-clipboard-text='picture_tag("icon.webp", "icon.png")
'>Copy</button> </div> <p>This generates the following HTML:</p>
<div class="interstitial code"> <pre data-language="html">&lt;picture&gt;
  &lt;source srcset="/assets/icon.webp" type="image/webp" /&gt;
  &lt;source srcset="/assets/icon.png" type="image/png" /&gt;
  &lt;img src="/assets/icon.png" /&gt;
&lt;/picture&gt;</pre> <button class="clipboard-button" data-clipboard-text='&lt;picture&gt;
  &lt;source srcset="/assets/icon.webp" type="image/webp" /&gt;
  &lt;source srcset="/assets/icon.png" type="image/png" /&gt;
  &lt;img src="/assets/icon.png" /&gt;
&lt;/picture&gt;
'>Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-picture_tag"><code>picture_tag</code> API Documentation</a> for more information.</p>
<h2 id="preload-link-tag"><a class="anchorlink" href="#preload-link-tag"><span>5.7</span> preload_link_tag</a></h2>
<p>Returns a link tag that browsers can use to preload the source. The source can be the path of a resource managed by the asset pipeline, a full path, or a URI.</p>
<div class="interstitial code"> <pre data-language="ruby">preload_link_tag("application.css")
# =&gt; &lt;link rel="preload" href="/assets/application.css.html" as="style" type="text/css" /&gt;</pre> <button class="clipboard-button" data-clipboard-text='preload_link_tag("application.css")
# =&gt; &lt;link rel="preload" href="/assets/application.css.html" as="style" type="text/css" /&gt;
'>Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-preload_link_tag"><code>preload_link_tag</code> API Documentation</a> for more information.</p>
<h2 id="stylesheet-link-tag"><a class="anchorlink" href="#stylesheet-link-tag"><span>5.8</span> stylesheet_link_tag</a></h2>
<p>Returns a stylesheet link tag for the sources specified as arguments. If you don't specify an extension, <code>.css</code> will be appended automatically.</p>
<div class="interstitial code"> <pre data-language="ruby">stylesheet_link_tag("application")
# =&gt; &lt;link href="/assets/application.css.html" rel="stylesheet" /&gt;

stylesheet_link_tag("application", media: "all")
# =&gt; &lt;link href="/assets/application.css.html" media="all" rel="stylesheet" /&gt;</pre> <button class="clipboard-button" data-clipboard-text='stylesheet_link_tag("application")
# =&gt; &lt;link href="/assets/application.css.html" rel="stylesheet" /&gt;

stylesheet_link_tag("application", media: "all")
# =&gt; &lt;link href="/assets/application.css.html" media="all" rel="stylesheet" /&gt;
'>Copy</button> </div> <p><code>media</code> is used to specify the media type for the link. The most common media types are <code>all</code>, <code>screen</code>, <code>print</code>, and <code>speech</code>.</p>
<div class="interstitial info"><p>Internally, <code>stylesheet_link_tag</code> uses <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/AssetUrlHelper.html#method-i-stylesheet_path"><code>stylesheet_path</code> from the AssetUrlHelpers</a> to build the stylesheet path.</p></div>
<p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-stylesheet_link_tag"><code>stylesheet_link_tag</code> API Documentation</a> for more information.</p>
<h2 id="video-tag"><a class="anchorlink" href="#video-tag"><span>5.9</span> video_tag</a></h2>
<p>Generate an HTML video tag with source(s), either as a single tag for a string source or nested source tags within an array for multiple sources. The <code>sources</code> can be full paths, files in your public videos directory, or Active Storage attachments.</p>
<div class="interstitial code"> <pre data-language="ruby">video_tag("trailer")
# =&gt; &lt;video src="/videos/trailer"&gt;&lt;/video&gt;

video_tag(["trailer.ogg", "trailer.flv"])
# =&gt; &lt;video&gt;&lt;source src="/videos/trailer.ogg" /&gt;&lt;source src="/videos/trailer.flv" /&gt;&lt;/video&gt;

video_tag("trailer", controls: true)
# =&gt; &lt;video controls="controls" src="/videos/trailer"&gt;&lt;/video&gt;</pre> <button class="clipboard-button" data-clipboard-text='video_tag("trailer")
# =&gt; &lt;video src="/videos/trailer"&gt;&lt;/video&gt;

video_tag(["trailer.ogg", "trailer.flv"])
# =&gt; &lt;video&gt;&lt;source src="/videos/trailer.ogg" /&gt;&lt;source src="/videos/trailer.flv" /&gt;&lt;/video&gt;

video_tag("trailer", controls: true)
# =&gt; &lt;video controls="controls" src="/videos/trailer"&gt;&lt;/video&gt;
'>Copy</button> </div> <div class="interstitial info"><p>Internally, <code>video_tag</code> uses <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/AssetUrlHelper.html#method-i-video_path"><code>video_path</code> from the AssetUrlHelpers</a> to build the video path.</p></div>
<p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-video_tag"><code>video_tag</code> API Documentation</a> for more information.</p>
<h1 id="javascript"><a class="anchorlink" href="#javascript"><span>6</span> JavaScript</a></h1>
<p>A set of methods for working with JavaScript in your views.</p>
<h2 id="escape-javascript"><a class="anchorlink" href="#escape-javascript"><span>6.1</span> escape_javascript</a></h2>
<p>Escapes carriage returns and single and double quotes for JavaScript segments. You would use this method to take a string of text and make sure that it doesn’t contain any invalid characters when the browser tries to parse it.</p>
<p>For example, if you have a partial with a greeting that contains double quotes, you can escape the greeting to use in a JavaScript alert.</p>
<div class="interstitial code"> <pre data-language="erb">&lt;%# app/views/users/greeting.html.rb %&gt;
My name is &lt;%= current_user.name %&gt;, and I'm here to say "Welcome to our website!"</pre> <button class="clipboard-button" data-clipboard-text="My name is &lt;%= current_user.name %&gt;, and I'm here to say &quot;Welcome to our website!&quot;
">Copy</button> </div> <div class="interstitial code"> <pre data-language="erb">&lt;script&gt;
  var greeting = "&lt;%= escape_javascript render('users/greeting') %&gt;";
  alert(`Hello, ${greeting}`);
&lt;/script&gt;</pre> <button class="clipboard-button" data-clipboard-text="&lt;script&gt;
  var greeting = &quot;&lt;%= escape_javascript render('users/greeting') %&gt;&quot;;
  alert(`Hello, ${greeting}`);
&lt;/script&gt;
">Copy</button> </div> <p>This will escape the quotes correctly and display the greeting in an alert box.</p>
<p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/JavaScriptHelper.html#method-i-escape_javascript"><code>escape_javascript</code> API Documentation</a> for more information.</p>
<h2 id="javascript-tag"><a class="anchorlink" href="#javascript-tag"><span>6.2</span> javascript_tag</a></h2>
<p>Returns a JavaScript tag wrapping the provided code. You can pass a hash of options to control the behavior of the <code>&lt;script&gt;</code> tag.</p>
<div class="interstitial code"> <pre data-language="ruby">javascript_tag("alert('All is good')", type: "application/javascript")</pre> <button class="clipboard-button" data-clipboard-text="javascript_tag(&quot;alert('All is good')&quot;, type: &quot;application/javascript&quot;)
">Copy</button> </div> <div class="interstitial code"> <pre data-language="html">&lt;script type="application/javascript"&gt;
//&lt;![CDATA[
alert('All is good')
//]]&gt;
&lt;/script&gt;</pre> <button class="clipboard-button" data-clipboard-text="&lt;script type=&quot;application/javascript&quot;&gt;
//&lt;![CDATA[
alert('All is good')
//]]&gt;
&lt;/script&gt;
">Copy</button> </div> <p>Instead of passing the content as an argument, you can also use a block.</p>
<div class="interstitial code"> <pre data-language="erb">&lt;%= javascript_tag type: "application/javascript" do %&gt;
  alert("Welcome to my app!")
&lt;% end %&gt;</pre> <button class="clipboard-button" data-clipboard-text='&lt;%= javascript_tag type: "application/javascript" do %&gt;
  alert("Welcome to my app!")
&lt;% end %&gt;
'>Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/JavaScriptHelper.html#method-i-javascript_tag"><code>javascript_tag</code> API Documentation</a> for more information.</p>
<h1 id="alternative-tags"><a class="anchorlink" href="#alternative-tags"><span>7</span> Alternative Tags</a></h1>
<p>A set of methods to generate HTML tags programmatically.</p>
<h2 id="tag"><a class="anchorlink" href="#tag"><span>7.1</span> tag</a></h2>
<p>Generates a standalone HTML tag with the given <code>name</code> and <code>options</code>.</p>
<p>Every tag can be built with:</p>
<div class="interstitial code"> <pre data-language="ruby">tag.some_tag_name(optional content, options)</pre> <button class="clipboard-button" data-clipboard-text="tag.some_tag_name(optional content, options)
">Copy</button> </div> <p>where tag name can be e.g. <code>br</code>, <code>div</code>, <code>section</code>, <code>article</code>, or any tag really.</p>
<p>For example, here are some common uses:</p>
<div class="interstitial code"> <pre data-language="ruby">tag.h1 "All titles fit to print"
# =&gt; &lt;h1&gt;All titles fit to print&lt;/h1&gt;

tag.div "Hello, world!"
# =&gt; &lt;div&gt;Hello, world!&lt;/div&gt;</pre> <button class="clipboard-button" data-clipboard-text='tag.h1 "All titles fit to print"
# =&gt; &lt;h1&gt;All titles fit to print&lt;/h1&gt;

tag.div "Hello, world!"
# =&gt; &lt;div&gt;Hello, world!&lt;/div&gt;
'>Copy</button> </div> <p>Additionally, you can pass options to add attributes to the generated tag.</p>
<div class="interstitial code"> <pre data-language="ruby">tag.section class: %w( kitties puppies )
# =&gt; &lt;section class="kitties puppies"&gt;&lt;/section&gt;</pre> <button class="clipboard-button" data-clipboard-text='tag.section class: %w( kitties puppies )
# =&gt; &lt;section class="kitties puppies"&gt;&lt;/section&gt;
'>Copy</button> </div> <p>In addition, HTML <code>data-*</code> attributes can be passed to the <code>tag</code> helper using the <code>data</code> option, with a hash containing key-value pairs of sub-attributes. The sub-attributes are then converted to <code>data-*</code> attributes that are dasherized in order to work well with JavaScript.</p>
<div class="interstitial code"> <pre data-language="ruby">tag.div data: { user_id: 123 }
# =&gt; &lt;div data-user-id="123"&gt;&lt;/div&gt;</pre> <button class="clipboard-button" data-clipboard-text='tag.div data: { user_id: 123 }
# =&gt; &lt;div data-user-id="123"&gt;&lt;/div&gt;
'>Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/TagHelper.html#method-i-tag"><code>tag</code> API Documentation</a> for more information.</p>
<h2 id="token-list"><a class="anchorlink" href="#token-list"><span>7.2</span> token_list</a></h2>
<p>Returns a string of tokens built from the arguments provided. This method is also aliased as <code>class_names</code>.</p>
<div class="interstitial code"> <pre data-language="ruby">token_list("cats", "dogs")
# =&gt; "cats dogs"

token_list(nil, false, 123, "", "foo", { bar: true })
# =&gt; "123 foo bar"

mobile, alignment = true, "center"
token_list("flex items-#{alignment}", "flex-col": mobile)
# =&gt; "flex items-center flex-col"
class_names("flex items-#{alignment}", "flex-col": mobile) # using the alias
# =&gt; "flex items-center flex-col"</pre> <button class="clipboard-button" data-clipboard-text='token_list("cats", "dogs")
# =&gt; "cats dogs"

token_list(nil, false, 123, "", "foo", { bar: true })
# =&gt; "123 foo bar"

mobile, alignment = true, "center"
token_list("flex items-#{alignment}", "flex-col": mobile)
# =&gt; "flex items-center flex-col"
class_names("flex items-#{alignment}", "flex-col": mobile) # using the alias
# =&gt; "flex items-center flex-col"
'>Copy</button> </div> <h1 id="capture-blocks"><a class="anchorlink" href="#capture-blocks"><span>8</span> Capture Blocks</a></h1>
<p>A set of methods to let you extract generated markup which can be used in other parts of a template or layout file.</p>
<p>It provides a method to capture blocks into variables through <code>capture</code>, and a way to capture a block of markup for use in a layout through <code>content_for</code>.</p>
<h2 id="capture"><a class="anchorlink" href="#capture"><span>8.1</span> capture</a></h2>
<p>The <code>capture</code> method allows you to extract part of a template into a variable.</p>
<div class="interstitial code"> <pre data-language="erb">&lt;% @greeting = capture do %&gt;
  &lt;p&gt;Welcome! The date and time is &lt;%= Time.current %&gt;&lt;/p&gt;
&lt;% end %&gt;</pre> <button class="clipboard-button" data-clipboard-text="&lt;% @greeting = capture do %&gt;
  &lt;p&gt;Welcome! The date and time is &lt;%= Time.current %&gt;&lt;/p&gt;
&lt;% end %&gt;
">Copy</button> </div> <p>You can then use this variable anywhere in your templates, layouts, or helpers.</p>
<div class="interstitial code"> <pre data-language="erb">&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Welcome!&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;%= @greeting %&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre> <button class="clipboard-button" data-clipboard-text="&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Welcome!&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;%= @greeting %&gt;
  &lt;/body&gt;
&lt;/html&gt;
">Copy</button> </div> <p>The return of capture is the string generated by the block.</p>
<div class="interstitial code"> <pre data-language="ruby">@greeting
# =&gt; "Welcome to my shiny new web page! The date and time is 2018-09-06 11:09:16 -0500"</pre> <button class="clipboard-button" data-clipboard-text='@greeting
# =&gt; "Welcome to my shiny new web page! The date and time is 2018-09-06 11:09:16 -0500"
'>Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#method-i-capture"><code>capture</code> API Documentation</a> for more information.</p>
<h2 id="content-for"><a class="anchorlink" href="#content-for"><span>8.2</span> content_for</a></h2>
<p>Calling <code>content_for</code> stores a block of markup in an identifier for later use. You can make subsequent calls to the stored content in other templates, helper modules or the layout by passing the identifier as an argument to <code>yield</code>.</p>
<p>A common use case is to set the title of a page in a <code>content_for</code> block.</p>
<p>You define a <code>content_for</code> block in the special page's view, and then you <code>yield</code> it within the layout. For other pages, where the <code>content_for</code> block isn't utilized, it remains empty, resulting in nothing being yielded.</p>
<div class="interstitial code"> <pre data-language="erb">&lt;%# app/views/users/special_page.html.erb %&gt;
&lt;% content_for(:html_title) { "Special Page Title" } %&gt;</pre> <button class="clipboard-button" data-clipboard-text='&lt;% content_for(:html_title) { "Special Page Title" } %&gt;
'>Copy</button> </div> <div class="interstitial code"> <pre data-language="erb">&lt;%# app/views/layouts/application.html.erb %&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;&lt;%= content_for?(:html_title) ? yield(:html_title) : "Default Title" %&gt;&lt;/title&gt;
  &lt;/head&gt;
&lt;/html&gt;</pre> <button class="clipboard-button" data-clipboard-text='&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;&lt;%= content_for?(:html_title) ? yield(:html_title) : "Default Title" %&gt;&lt;/title&gt;
  &lt;/head&gt;
&lt;/html&gt;
'>Copy</button> </div> <p>You'll notice that in the above example, we use the <code>content_for?</code> predicate method to conditionally render a title. This method checks whether any content has been captured yet using <code>content_for</code>, enabling you to adjust parts of your layout based on the content within your views.</p>
<p>Additionally, you can employ <code>content_for</code> within a helper module.</p>
<div class="interstitial code"> <pre data-language="ruby"># app/helpers/title_helper.rb
module TitleHelper
  def html_title
    content_for(:html_title) || "Default Title"
  end
end</pre> <button class="clipboard-button" data-clipboard-text='module TitleHelper
  def html_title
    content_for(:html_title) || "Default Title"
  end
end
'>Copy</button> </div> <p>Now, you can call <code>html_title</code> in your layout to retrieve the content stored in the <code>content_for</code> block. If a <code>content_for</code> block is set on the page being rendered, such as in the case of the <code>special_page</code>, it will display the title. Otherwise, it will display the default text "Default Title".</p>
<div class="interstitial warning"><p><code>content_for</code> is ignored in caches. So you shouldn’t use it for elements that will be fragment cached.</p></div>
<div class="interstitial note"><p>You may be thinking what's the difference between <code>capture</code> and <code>content_for</code>? <br><br> <code>capture</code> is used to capture a block of markup in a variable, while <code>content_for</code> is used to store a block of markup in an identifier for later use. Internally <code>content_for</code> actually calls <code>capture</code>. However, the key difference lies in their behavior when invoked multiple times.<br><br> <code>content_for</code> can be called repeatedly, concatenating the blocks it receives for a specific identifier in the order they are provided. Each subsequent call simply adds to what's already stored. In contrast, <code>capture</code> only returns the content of the block, without keeping track of any previous invocations.</p></div>
<p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#method-i-content_for"><code>content_for</code> API Documentation</a> for more information.</p>
<h1 id="performance"><a class="anchorlink" href="#performance"><span>9</span> Performance</a></h1>
<h2 id="benchmark"><a class="anchorlink" href="#benchmark"><span>9.1</span> benchmark</a></h2>
<p>Wrap a <code>benchmark</code> block around expensive operations or possible bottlenecks to get a time reading for the operation.</p>
<div class="interstitial code"> <pre data-language="erb">&lt;% benchmark "Process data files" do %&gt;
  &lt;%= expensive_files_operation %&gt;
&lt;% end %&gt;</pre> <button class="clipboard-button" data-clipboard-text='&lt;% benchmark "Process data files" do %&gt;
  &lt;%= expensive_files_operation %&gt;
&lt;% end %&gt;
'>Copy</button> </div> <p>This would add something like <code>Process data files (0.34523)</code> to the log, which you can then use to compare timings when optimizing your code.</p>
<div class="interstitial note"><p>This helper is a part of Active Support, and it is also available on controllers, helpers, models, etc.</p></div>
<p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActiveSupport/Benchmarkable.html#method-i-benchmark"><code>benchmark</code> API Documentation</a> for more information.</p>
<h2 id="cache"><a class="anchorlink" href="#cache"><span>9.2</span> cache</a></h2>
<p>You can cache fragments of a view rather than an entire action or page. This technique is useful for caching pieces like menus, lists of news topics, static HTML fragments, and so on. It allows a fragment of view logic to be wrapped in a cache block and served out of the cache store when the next request comes in.</p>
<p>The <code>cache</code> method takes a block that contains the content you wish to cache.</p>
<p>For example, you could cache the footer of your application layout by wrapping it in a <code>cache</code> block.</p>
<div class="interstitial code"> <pre data-language="erb">&lt;% cache do %&gt;
  &lt;%= render "application/footer" %&gt;
&lt;% end %&gt;</pre> <button class="clipboard-button" data-clipboard-text='&lt;% cache do %&gt;
  &lt;%= render "application/footer" %&gt;
&lt;% end %&gt;
'>Copy</button> </div> <p>You could also cache based on model instances, for example, you can cache each article on a page by passing the <code>article</code> object to the <code>cache</code> method. This would cache each article separately.</p>
<div class="interstitial code"> <pre data-language="erb">&lt;% @articles.each do |article| %&gt;
  &lt;% cache article do %&gt;
    &lt;%= render article %&gt;
  &lt;% end %&gt;
&lt;% end %&gt;</pre> <button class="clipboard-button" data-clipboard-text="&lt;% @articles.each do |article| %&gt;
  &lt;% cache article do %&gt;
    &lt;%= render article %&gt;
  &lt;% end %&gt;
&lt;% end %&gt;
">Copy</button> </div> <p>When your application receives its first request to this page, Rails will write a new cache entry with a unique key. A key looks something like this:</p>
<div class="interstitial code"> <pre data-language="irb">views/articles/index:bea67108094918eeba32cd4a6f786301/articles/1</pre> <button class="clipboard-button" data-clipboard-text="">Copy</button> </div> <p>See <a href="caching_with_rails.html#fragment-caching"><code>Fragment Caching</code></a> and the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/CacheHelper.html#method-i-cache"><code>cache</code> API Documentation</a> for more information.</p>
<h1 id="miscellaneous"><a class="anchorlink" href="#miscellaneous"><span>10</span> Miscellaneous</a></h1>
<h2 id="atom-feed"><a class="anchorlink" href="#atom-feed"><span>10.1</span> atom_feed</a></h2>
<p>Atom Feeds are XML-based file formats used to syndicate content and can be used by users in feed readers to browse content or by search engines to help discover additional information about your site.</p>
<p>This helper makes building an Atom feed easy, and is mostly used in Builder templates for creating XML. Here's a full usage example:</p>
<div class="interstitial code"> <pre data-language="ruby"># config/routes.rb
resources :articles</pre> <button class="clipboard-button" data-clipboard-text="resources :articles
">Copy</button> </div> <div class="interstitial code"> <pre data-language="ruby"># app/controllers/articles_controller.rb
def index
  @articles = Article.all

  respond_to do |format|
    format.html
    format.atom
  end
end</pre> <button class="clipboard-button" data-clipboard-text="def index
  @articles = Article.all

  respond_to do |format|
    format.html
    format.atom
  end
end
">Copy</button> </div> <div class="interstitial code"> <pre data-language="ruby"># app/views/articles/index.atom.builder
atom_feed do |feed|
  feed.title("Articles Index")
  feed.updated(@articles.first.created_at)

  @articles.each do |article|
    feed.entry(article) do |entry|
      entry.title(article.title)
      entry.content(article.body, type: "html")

      entry.author do |author|
        author.name(article.author_name)
      end
    end
  end
end</pre> <button class="clipboard-button" data-clipboard-text='atom_feed do |feed|
  feed.title("Articles Index")
  feed.updated(@articles.first.created_at)

  @articles.each do |article|
    feed.entry(article) do |entry|
      entry.title(article.title)
      entry.content(article.body, type: "html")

      entry.author do |author|
        author.name(article.author_name)
      end
    end
  end
end
'>Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/AtomFeedHelper.html#method-i-atom_feed"><code>atom_feed</code> API Documentation</a> for more information.</p>
<h2 id="debug"><a class="anchorlink" href="#debug"><span>10.2</span> debug</a></h2>
<p>Returns a YAML representation of an object wrapped with a <code>pre</code> tag. This creates a very readable way to inspect an object.</p>
<div class="interstitial code"> <pre data-language="ruby">my_hash = { "first" =&gt; 1, "second" =&gt; "two", "third" =&gt; [1, 2, 3] }
debug(my_hash)</pre> <button class="clipboard-button" data-clipboard-text='my_hash = { "first" =&gt; 1, "second" =&gt; "two", "third" =&gt; [1, 2, 3] }
debug(my_hash)
'>Copy</button> </div> <div class="interstitial code"> <pre data-language="html">&lt;pre class="debug_dump"&gt;---
first: 1
second: two
third:
- 1
- 2
- 3
&lt;/pre&gt;</pre> <button class="clipboard-button" data-clipboard-text='&lt;pre class="debug_dump"&gt;---
first: 1
second: two
third:
- 1
- 2
- 3
&lt;/pre&gt;
'>Copy</button> </div> <p>See the <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/DebugHelper.html#method-i-debug"><code>debug</code> API Documentation</a> for more information.</p> <hr> <h2>Feedback</h2> <p> You're encouraged to help improve the quality of this guide. </p> <p> Please contribute if you see any typos or factual errors. To get started, you can read our <a href="https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#contributing-to-the-rails-documentation">documentation contributions</a> section. </p> <p> You may also find incomplete content or stuff that is not up to date. Please do add any missing documentation for main. Make sure to check <a href="https://edgeguides.rubyonrails.org">Edge Guides</a> first to verify if the issues are already fixed or not on the main branch. Check the <span>Ruby on Rails Guides Guidelines</span> for style and conventions. </p> <p> If for whatever reason you spot something to fix but cannot patch it yourself, please <a href="https://github.com/rails/rails/issues">open an issue</a>. </p> <p>And last but not least, any kind of discussion regarding Ruby on Rails documentation is very welcome on the <a href="https://discuss.rubyonrails.org/c/rubyonrails-docs">official Ruby on Rails Forum</a>. </p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2004&ndash;2021 David Heinemeier Hansson<br>Licensed under the Creative Commons Attribution-ShareAlike 4.0 International License.<br>
    
  </p>
</div>
