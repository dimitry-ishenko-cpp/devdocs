<h1 id="module-ActiveStorage::Blob::Representable" class="module"> module ActiveStorage::Blob::Representable </h1>  <section id="5Buntitled-5D" class="documentation-section"> <section id="public-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-preview"> <span class="method-name">preview</span><span class="method-args">(transformations)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="preview-source"> <pre class="ruby" data-language="ruby"># File activestorage/app/models/active_storage/blob/representable.rb, line 63
def preview(transformations)
  if previewable?
    ActiveStorage::Preview.new(self, transformations)
  else
    raise ActiveStorage::UnpreviewableError, "No previewer found for blob with ID=#{id} and content_type=#{content_type}"
  end
end</pre> </div> <p>Returns an <a href="../preview.html"><code>ActiveStorage::Preview</code></a> instance with the set of <code>transformations</code> provided. A preview is an image generated from a non-image blob. Active Storage comes with built-in previewers for videos and PDF documents. The video previewer extracts the first frame from a video and the PDF previewer extracts the first page from a PDF document.</p> <pre class="ruby" data-language="ruby">blob.preview(resize_to_limit: [100, 100]).processed.url
</pre> <p>Avoid processing previews synchronously in views. Instead, link to a controller action that processes them on demand. Active Storage provides one, but you may want to create your own (for example, if you need authentication). Here’s how to use the built-in version:</p> <pre>&lt;%= image_tag video.preview(resize_to_limit: [100, 100]) %&gt;</pre> <p>This method raises <a href="../unpreviewableerror.html"><code>ActiveStorage::UnpreviewableError</code></a> if no previewer accepts the receiving blob. To determine whether a blob is accepted by any previewer, call <a href="representable.html#method-i-previewable-3F"><code>ActiveStorage::Blob#previewable?</code></a>.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-previewable-3F"> <span class="method-name">previewable?</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="previewable-3F-source"> <pre class="ruby" data-language="ruby"># File activestorage/app/models/active_storage/blob/representable.rb, line 72
def previewable?
  ActiveStorage.previewers.any? { |klass| klass.accept?(self) }
end</pre> </div> <p>Returns true if any registered previewer accepts the blob. By default, this will return true for videos and PDF documents.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-representable-3F"> <span class="method-name">representable?</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="representable-3F-source"> <pre class="ruby" data-language="ruby"># File activestorage/app/models/active_storage/blob/representable.rb, line 97
def representable?
  variable? || previewable?
end</pre> </div> <p>Returns true if the blob is variable or previewable.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-representation"> <span class="method-name">representation</span><span class="method-args">(transformations)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="representation-source"> <pre class="ruby" data-language="ruby"># File activestorage/app/models/active_storage/blob/representable.rb, line 85
def representation(transformations)
  case
  when previewable?
    preview transformations
  when variable?
    variant transformations
  else
    raise ActiveStorage::UnrepresentableError, "No previewer found and can't transform blob with ID=#{id} and content_type=#{content_type}"
  end
end</pre> </div> <p>Returns an <a href="../preview.html"><code>ActiveStorage::Preview</code></a> for a previewable blob or an <a href="../variant.html"><code>ActiveStorage::Variant</code></a> for a variable image blob.</p> <pre class="ruby" data-language="ruby">blob.representation(resize_to_limit: [100, 100]).processed.url
</pre> <p>Raises <a href="../unrepresentableerror.html"><code>ActiveStorage::UnrepresentableError</code></a> if the receiving blob is neither variable nor previewable. Call <a href="representable.html#method-i-representable-3F"><code>ActiveStorage::Blob#representable?</code></a> to determine whether a blob is representable.</p> <p>See <a href="representable.html#method-i-preview"><code>ActiveStorage::Blob#preview</code></a> and <a href="representable.html#method-i-variant"><code>ActiveStorage::Blob#variant</code></a> for more information.</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-variable-3F"> <span class="method-name">variable?</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="variable-3F-source"> <pre class="ruby" data-language="ruby"># File activestorage/app/models/active_storage/blob/representable.rb, line 44
def variable?
  ActiveStorage.variable_content_types.include?(content_type)
end</pre> </div> <p>Returns true if the variant processor can transform the blob (its content type is in <code>ActiveStorage.variable_content_types</code>).</p>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-variant"> <span class="method-name">variant</span><span class="method-args">(transformations)</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="variant-source"> <pre class="ruby" data-language="ruby"># File activestorage/app/models/active_storage/blob/representable.rb, line 34
def variant(transformations)
  if variable?
    variant_class.new(self, ActiveStorage::Variation.wrap(transformations).default_to(default_variant_transformations))
  else
    raise ActiveStorage::InvariableError, "Can't transform blob with ID=#{id} and content_type=#{content_type}"
  end
end</pre> </div> <p>Returns an <a href="../variant.html"><code>ActiveStorage::Variant</code></a> or <a href="../variantwithrecord.html"><code>ActiveStorage::VariantWithRecord</code></a> instance with the set of <code>transformations</code> provided. This is only relevant for image files, and it allows any image to be transformed for size, colors, and the like. Example:</p> <pre class="ruby" data-language="ruby">avatar.variant(resize_to_limit: [100, 100]).processed.url
</pre> <p>This will create and process a variant of the avatar blob that’s constrained to a height and width of 100px. Then it’ll upload said variant to the service according to a derivative key of the blob and the transformations.</p> <p>Frequently, though, you don’t actually want to transform the variant right away. But rather simply refer to a specific variant that can be created by a controller on-demand. Like so:</p> <pre>&lt;%= image_tag Current.user.avatar.variant(resize_to_limit: [100, 100]) %&gt;</pre> <p>This will create a URL for that specific blob with that specific variant, which the ActiveStorage::RepresentationsController can then produce on-demand.</p> <p>Raises <a href="../invariableerror.html"><code>ActiveStorage::InvariableError</code></a> if the variant processor cannot transform the blob. To determine whether a blob is variable, call <a href="representable.html#method-i-variable-3F"><code>ActiveStorage::Blob#variable?</code></a>.</p>  </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2004&ndash;2021 David Heinemeier Hansson<br>Licensed under the MIT License.<br>
    
  </p>
</div>
