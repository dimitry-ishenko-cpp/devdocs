<h1 id="module-ActionView::Helpers::NumberHelper" class="module"> module ActionView::Helpers::NumberHelper </h1> <section class="description"> <h1 id="module-ActionView::Helpers::NumberHelper-label-Action+View+Number+Helpers">Action View Number Helpers</h1> <p>Provides methods for converting numbers into formatted strings. Methods are provided for phone numbers, currency, percentage, precision, positional notation, file size, and pretty printing.</p> <p>Most methods expect a <code>number</code> argument, and will return it unchanged if can’t be converted into a valid number.</p> </section> <section id="5Buntitled-5D" class="documentation-section"> <section id="public-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-number_to_currency"> <span class="method-name">number_to_currency</span><span class="method-args">(number, options = {})</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="number_to_currency-source"> <pre class="ruby" data-language="ruby"># File actionview/lib/action_view/helpers/number_helper.rb, line 128
def number_to_currency(number, options = {})
  delegate_number_helper_method(:number_to_currency, number, options)
end</pre> </div> <p>Formats a <code>number</code> into a currency string (e.g., $13.65). You can customize the format in the <code>options</code> hash.</p> <p>The currency unit and number formatting of the current locale will be used unless otherwise specified in the provided options. No currency conversion is performed. If the user is given a way to change their locale, they will also be able to change the relative value of the currency displayed with this helper. If your application will ever support multiple locales, you may want to specify a constant <code>:locale</code> option or consider using a library capable of currency conversion.</p> <h4 id="method-i-number_to_currency-label-Options">Options</h4> <ul>
<li> <p><code>:locale</code> - Sets the locale to be used for formatting (defaults to current locale).</p> </li>
<li> <p><code>:precision</code> - Sets the level of precision (defaults to 2).</p> </li>
<li> <p><code>:unit</code> - Sets the denomination of the currency (defaults to “$”).</p> </li>
<li> <p><code>:separator</code> - Sets the separator between the units (defaults to “.”).</p> </li>
<li> <p><code>:delimiter</code> - Sets the thousands delimiter (defaults to “,”).</p> </li>
<li> <p><code>:format</code> - Sets the format for non-negative numbers (defaults to “%u%n”). Fields are <code>%u</code> for the currency, and <code>%n</code> for the number.</p> </li>
<li> <p><code>:negative_format</code> - Sets the format for negative numbers (defaults to prepending a hyphen to the formatted number given by <code>:format</code>). Accepts the same fields than <code>:format</code>, except <code>%n</code> is here the absolute value of the number.</p> </li>
<li> <p><code>:raise</code> - If true, raises <code>InvalidNumberError</code> when the argument is invalid.</p> </li>
<li> <p><code>:strip_insignificant_zeros</code> - If <code>true</code> removes insignificant zeros after the decimal separator (defaults to <code>false</code>).</p> </li>
</ul> <h4 id="method-i-number_to_currency-label-Examples">Examples</h4> <pre class="ruby" data-language="ruby">number_to_currency(1234567890.50)                    # =&gt; $1,234,567,890.50
number_to_currency(1234567890.506)                   # =&gt; $1,234,567,890.51
number_to_currency(1234567890.506, precision: 3)     # =&gt; $1,234,567,890.506
number_to_currency(1234567890.506, locale: :fr)      # =&gt; 1 234 567 890,51 €
number_to_currency("123a456")                        # =&gt; $123a456

number_to_currency("123a456", raise: true)           # =&gt; InvalidNumberError

number_to_currency(-0.456789, precision: 0)
# =&gt; "$0"
number_to_currency(-1234567890.50, negative_format: "(%u%n)")
# =&gt; ($1,234,567,890.50)
number_to_currency(1234567890.50, unit: "R$", separator: ",", delimiter: "")
# =&gt; R$1234567890,50
number_to_currency(1234567890.50, unit: "R$", separator: ",", delimiter: "", format: "%n %u")
# =&gt; 1234567890,50 R$
number_to_currency(1234567890.50, strip_insignificant_zeros: true)
# =&gt; "$1,234,567,890.5"
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-number_to_human"> <span class="method-name">number_to_human</span><span class="method-args">(number, options = {})</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="number_to_human-source"> <pre class="ruby" data-language="ruby"># File actionview/lib/action_view/helpers/number_helper.rb, line 405
def number_to_human(number, options = {})
  delegate_number_helper_method(:number_to_human, number, options)
end</pre> </div> <p>Pretty prints (formats and approximates) a number in a way it is more readable by humans (e.g.: 1200000000 becomes “1.2 Billion”). This is useful for numbers that can get very large (and too hard to read).</p> <p>See <code>number_to_human_size</code> if you want to print a file size.</p> <p>You can also define your own unit-quantifier names if you want to use other decimal units (e.g.: 1500 becomes “1.5 kilometers”, 0.150 becomes “150 milliliters”, etc). You may define a wide range of unit quantifiers, even fractional ones (centi, deci, mili, etc).</p> <h4 id="method-i-number_to_human-label-Options">Options</h4> <ul>
<li> <p><code>:locale</code> - Sets the locale to be used for formatting (defaults to current locale).</p> </li>
<li> <p><code>:precision</code> - Sets the precision of the number (defaults to 3).</p> </li>
<li> <p><code>:significant</code> - If <code>true</code>, precision will be the number of significant_digits. If <code>false</code>, the number of fractional digits (defaults to <code>true</code>)</p> </li>
<li> <p><code>:separator</code> - Sets the separator between the fractional and integer digits (defaults to “.”).</p> </li>
<li> <p><code>:delimiter</code> - Sets the thousands delimiter (defaults to “”).</p> </li>
<li> <p><code>:strip_insignificant_zeros</code> - If <code>true</code> removes insignificant zeros after the decimal separator (defaults to <code>true</code>)</p> </li>
<li> <p><code>:units</code> - A <a href="../../hash.html"><code>Hash</code></a> of unit quantifier names. Or a string containing an i18n scope where to find this hash. It might have the following keys:</p> <ul>
<li> <p><strong>integers</strong>: <code>:unit</code>, <code>:ten</code>, <code>:hundred</code>, <code>:thousand</code>, <code>:million</code>, <code>:billion</code>, <code>:trillion</code>, <code>:quadrillion</code></p> </li>
<li> <p><strong>fractionals</strong>: <code>:deci</code>, <code>:centi</code>, <code>:mili</code>, <code>:micro</code>, <code>:nano</code>, <code>:pico</code>, <code>:femto</code></p> </li>
</ul> </li>
<li> <p><code>:format</code> - Sets the format of the output string (defaults to “%n %u”). The field types are:</p> <ul>
<li> <p>%u - The quantifier (ex.: ‘thousand’)</p> </li>
<li> <p>%n - The number</p> </li>
</ul> </li>
<li> <p><code>:raise</code> - If true, raises <code>InvalidNumberError</code> when the argument is invalid.</p> </li>
</ul> <h4 id="method-i-number_to_human-label-Examples">Examples</h4> <pre class="ruby" data-language="ruby">number_to_human(123)                                          # =&gt; "123"
number_to_human(1234)                                         # =&gt; "1.23 Thousand"
number_to_human(12345)                                        # =&gt; "12.3 Thousand"
number_to_human(1234567)                                      # =&gt; "1.23 Million"
number_to_human(1234567890)                                   # =&gt; "1.23 Billion"
number_to_human(1234567890123)                                # =&gt; "1.23 Trillion"
number_to_human(1234567890123456)                             # =&gt; "1.23 Quadrillion"
number_to_human(1234567890123456789)                          # =&gt; "1230 Quadrillion"
number_to_human(489939, precision: 2)                         # =&gt; "490 Thousand"
number_to_human(489939, precision: 4)                         # =&gt; "489.9 Thousand"
number_to_human(1234567, precision: 4,
                        significant: false)                   # =&gt; "1.2346 Million"
number_to_human(1234567, precision: 1,
                        separator: ',',
                        significant: false)                   # =&gt; "1,2 Million"

number_to_human(500000000, precision: 5)                      # =&gt; "500 Million"
number_to_human(12345012345, significant: false)              # =&gt; "12.345 Billion"
</pre> <p>Non-significant zeros after the decimal separator are stripped out by default (set <code>:strip_insignificant_zeros</code> to <code>false</code> to change that):</p> <pre class="ruby" data-language="ruby">number_to_human(12.00001)                                       # =&gt; "12"
number_to_human(12.00001, strip_insignificant_zeros: false)     # =&gt; "12.0"
</pre> <h4 id="method-i-number_to_human-label-Custom+Unit+Quantifiers">Custom Unit Quantifiers</h4> <p>You can also use your own custom unit quantifiers:</p> <pre class="ruby" data-language="ruby">number_to_human(500000, units: {unit: "ml", thousand: "lt"})  # =&gt; "500 lt"
</pre> <p>If in your I18n locale you have:</p> <pre>distance:
  centi:
    one: "centimeter"
    other: "centimeters"
  unit:
    one: "meter"
    other: "meters"
  thousand:
    one: "kilometer"
    other: "kilometers"
  billion: "gazillion-distance"</pre> <p>Then you could do:</p> <pre class="ruby" data-language="ruby">number_to_human(543934, units: :distance)              # =&gt; "544 kilometers"
number_to_human(54393498, units: :distance)            # =&gt; "54400 kilometers"
number_to_human(54393498000, units: :distance)         # =&gt; "54.4 gazillion-distance"
number_to_human(343, units: :distance, precision: 1)   # =&gt; "300 meters"
number_to_human(1, units: :distance)                   # =&gt; "1 meter"
number_to_human(0.34, units: :distance)                # =&gt; "34 centimeters"
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-number_to_human_size"> <span class="method-name">number_to_human_size</span><span class="method-args">(number, options = {})</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="number_to_human_size-source"> <pre class="ruby" data-language="ruby"># File actionview/lib/action_view/helpers/number_helper.rb, line 298
def number_to_human_size(number, options = {})
  delegate_number_helper_method(:number_to_human_size, number, options)
end</pre> </div> <p>Formats the bytes in <code>number</code> into a more understandable representation (e.g., giving it 1500 yields 1.46 KB). This method is useful for reporting file sizes to users. You can customize the format in the <code>options</code> hash.</p> <p>See <code>number_to_human</code> if you want to pretty-print a generic number.</p> <h4 id="method-i-number_to_human_size-label-Options">Options</h4> <ul>
<li> <p><code>:locale</code> - Sets the locale to be used for formatting (defaults to current locale).</p> </li>
<li> <p><code>:precision</code> - Sets the precision of the number (defaults to 3).</p> </li>
<li> <p><code>:significant</code> - If <code>true</code>, precision will be the number of significant_digits. If <code>false</code>, the number of fractional digits (defaults to <code>true</code>)</p> </li>
<li> <p><code>:separator</code> - Sets the separator between the fractional and integer digits (defaults to “.”).</p> </li>
<li> <p><code>:delimiter</code> - Sets the thousands delimiter (defaults to “”).</p> </li>
<li> <p><code>:strip_insignificant_zeros</code> - If <code>true</code> removes insignificant zeros after the decimal separator (defaults to <code>true</code>)</p> </li>
<li> <p><code>:raise</code> - If true, raises <code>InvalidNumberError</code> when the argument is invalid.</p> </li>
</ul> <h4 id="method-i-number_to_human_size-label-Examples">Examples</h4> <pre class="ruby" data-language="ruby">number_to_human_size(123)                                          # =&gt; 123 Bytes
number_to_human_size(1234)                                         # =&gt; 1.21 KB
number_to_human_size(12345)                                        # =&gt; 12.1 KB
number_to_human_size(1234567)                                      # =&gt; 1.18 MB
number_to_human_size(1234567890)                                   # =&gt; 1.15 GB
number_to_human_size(1234567890123)                                # =&gt; 1.12 TB
number_to_human_size(1234567890123456)                             # =&gt; 1.1 PB
number_to_human_size(1234567890123456789)                          # =&gt; 1.07 EB
number_to_human_size(1234567, precision: 2)                        # =&gt; 1.2 MB
number_to_human_size(483989, precision: 2)                         # =&gt; 470 KB
number_to_human_size(1234567, precision: 2, separator: ',')        # =&gt; 1,2 MB
number_to_human_size(1234567890123, precision: 5)                  # =&gt; "1.1228 TB"
number_to_human_size(524288000, precision: 5)                      # =&gt; "500 MB"
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-number_to_percentage"> <span class="method-name">number_to_percentage</span><span class="method-args">(number, options = {})</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="number_to_percentage-source"> <pre class="ruby" data-language="ruby"># File actionview/lib/action_view/helpers/number_helper.rb, line 168
def number_to_percentage(number, options = {})
  delegate_number_helper_method(:number_to_percentage, number, options)
end</pre> </div> <p>Formats a <code>number</code> as a percentage string (e.g., 65%). You can customize the format in the <code>options</code> hash.</p> <h4 id="method-i-number_to_percentage-label-Options">Options</h4> <ul>
<li> <p><code>:locale</code> - Sets the locale to be used for formatting (defaults to current locale).</p> </li>
<li> <p><code>:precision</code> - Sets the precision of the number (defaults to 3).</p> </li>
<li> <p><code>:significant</code> - If <code>true</code>, precision will be the number of significant_digits. If <code>false</code>, the number of fractional digits (defaults to <code>false</code>).</p> </li>
<li> <p><code>:separator</code> - Sets the separator between the fractional and integer digits (defaults to “.”).</p> </li>
<li> <p><code>:delimiter</code> - Sets the thousands delimiter (defaults to “”).</p> </li>
<li> <p><code>:strip_insignificant_zeros</code> - If <code>true</code> removes insignificant zeros after the decimal separator (defaults to <code>false</code>).</p> </li>
<li> <p><code>:format</code> - Specifies the format of the percentage string The number field is <code>%n</code> (defaults to “%n%”).</p> </li>
<li> <p><code>:raise</code> - If true, raises <code>InvalidNumberError</code> when the argument is invalid.</p> </li>
</ul> <h4 id="method-i-number_to_percentage-label-Examples">Examples</h4> <pre class="ruby" data-language="ruby">number_to_percentage(100)                                        # =&gt; 100.000%
number_to_percentage("98")                                       # =&gt; 98.000%
number_to_percentage(100, precision: 0)                          # =&gt; 100%
number_to_percentage(1000, delimiter: '.', separator: ',')       # =&gt; 1.000,000%
number_to_percentage(302.24398923423, precision: 5)              # =&gt; 302.24399%
number_to_percentage(1000, locale: :fr)                          # =&gt; 1 000,000%
number_to_percentage("98a")                                      # =&gt; 98a%
number_to_percentage(100, format: "%n  %")                       # =&gt; 100.000  %

number_to_percentage("98a", raise: true)                         # =&gt; InvalidNumberError
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-number_to_phone"> <span class="method-name">number_to_phone</span><span class="method-args">(number, options = {})</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="number_to_phone-source"> <pre class="ruby" data-language="ruby"># File actionview/lib/action_view/helpers/number_helper.rb, line 63
def number_to_phone(number, options = {})
  return unless number
  options = options.symbolize_keys

  parse_float(number, true) if options.delete(:raise)
  ERB::Util.html_escape(ActiveSupport::NumberHelper.number_to_phone(number, options))
end</pre> </div> <p>Formats a <code>number</code> into a phone number (US by default e.g., (555) 123-9876). You can customize the format in the <code>options</code> hash.</p> <h4 id="method-i-number_to_phone-label-Options">Options</h4> <ul>
<li> <p><code>:area_code</code> - Adds parentheses around the area code.</p> </li>
<li> <p><code>:delimiter</code> - Specifies the delimiter to use (defaults to “-”).</p> </li>
<li> <p><code>:extension</code> - Specifies an extension to add to the end of the generated number.</p> </li>
<li> <p><code>:country_code</code> - Sets the country code for the phone number.</p> </li>
<li> <p><code>:pattern</code> - Specifies how the number is divided into three groups with the custom regexp to override the default format.</p> </li>
<li> <p><code>:raise</code> - If true, raises <code>InvalidNumberError</code> when the argument is invalid.</p> </li>
</ul> <h4 id="method-i-number_to_phone-label-Examples">Examples</h4> <pre class="ruby" data-language="ruby">number_to_phone(5551234)                                           # =&gt; 555-1234
number_to_phone("5551234")                                         # =&gt; 555-1234
number_to_phone(1235551234)                                        # =&gt; 123-555-1234
number_to_phone(1235551234, area_code: true)                       # =&gt; (123) 555-1234
number_to_phone(1235551234, delimiter: " ")                        # =&gt; 123 555 1234
number_to_phone(1235551234, area_code: true, extension: 555)       # =&gt; (123) 555-1234 x 555
number_to_phone(1235551234, country_code: 1)                       # =&gt; +1-123-555-1234
number_to_phone("123a456")                                         # =&gt; 123a456
number_to_phone("1234a567", raise: true)                           # =&gt; InvalidNumberError

number_to_phone(1235551234, country_code: 1, extension: 1343, delimiter: ".")
# =&gt; +1.123.555.1234 x 1343

number_to_phone(75561234567, pattern: /(\d{1,4})(\d{4})(\d{4})$/, area_code: true)
# =&gt; "(755) 6123-4567"
number_to_phone(13312345678, pattern: /(\d{3})(\d{4})(\d{4})$/)
# =&gt; "133-1234-5678"
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-number_with_delimiter"> <span class="method-name">number_with_delimiter</span><span class="method-args">(number, options = {})</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="number_with_delimiter-source"> <pre class="ruby" data-language="ruby"># File actionview/lib/action_view/helpers/number_helper.rb, line 207
def number_with_delimiter(number, options = {})
  delegate_number_helper_method(:number_to_delimited, number, options)
end</pre> </div> <p>Formats a <code>number</code> with grouped thousands using <code>delimiter</code> (e.g., 12,324). You can customize the format in the <code>options</code> hash.</p> <h4 id="method-i-number_with_delimiter-label-Options">Options</h4> <ul>
<li> <p><code>:locale</code> - Sets the locale to be used for formatting (defaults to current locale).</p> </li>
<li> <p><code>:delimiter</code> - Sets the thousands delimiter (defaults to “,”).</p> </li>
<li> <p><code>:separator</code> - Sets the separator between the fractional and integer digits (defaults to “.”).</p> </li>
<li> <p><code>:delimiter_pattern</code> - Sets a custom regular expression used for deriving the placement of delimiter. Helpful when using currency formats like INR.</p> </li>
<li> <p><code>:raise</code> - If true, raises <code>InvalidNumberError</code> when the argument is invalid.</p> </li>
</ul> <h4 id="method-i-number_with_delimiter-label-Examples">Examples</h4> <pre class="ruby" data-language="ruby">number_with_delimiter(12345678)                        # =&gt; 12,345,678
number_with_delimiter("123456")                        # =&gt; 123,456
number_with_delimiter(12345678.05)                     # =&gt; 12,345,678.05
number_with_delimiter(12345678, delimiter: ".")        # =&gt; 12.345.678
number_with_delimiter(12345678, delimiter: ",")        # =&gt; 12,345,678
number_with_delimiter(12345678.05, separator: " ")     # =&gt; 12,345,678 05
number_with_delimiter(12345678.05, locale: :fr)        # =&gt; 12 345 678,05
number_with_delimiter("112a")                          # =&gt; 112a
number_with_delimiter(98765432.98, delimiter: " ", separator: ",")
# =&gt; 98 765 432,98

number_with_delimiter("123456.78",
  delimiter_pattern: /(\d+?)(?=(\d\d)+(\d)(?!\d))/)    # =&gt; "1,23,456.78"

number_with_delimiter("112a", raise: true)              # =&gt; raise InvalidNumberError
</pre>  </div> </div> <div class="method-detail "> <div class="method-header"> <div class="method-heading" id="method-i-number_with_precision"> <span class="method-name">number_with_precision</span><span class="method-args">(number, options = {})</span> <a class="method-click-advice">Show source</a> </div> </div> <div class="method-description">
<div class="method-source-code" id="number_with_precision-source"> <pre class="ruby" data-language="ruby"># File actionview/lib/action_view/helpers/number_helper.rb, line 252
def number_with_precision(number, options = {})
  delegate_number_helper_method(:number_to_rounded, number, options)
end</pre> </div> <p>Formats a <code>number</code> with the specified level of <code>:precision</code> (e.g., 112.32 has a precision of 2 if <code>:significant</code> is <code>false</code>, and 5 if <code>:significant</code> is <code>true</code>). You can customize the format in the <code>options</code> hash.</p> <h4 id="method-i-number_with_precision-label-Options">Options</h4> <ul>
<li> <p><code>:locale</code> - Sets the locale to be used for formatting (defaults to current locale).</p> </li>
<li> <p><code>:precision</code> - Sets the precision of the number (defaults to 3).</p> </li>
<li> <p><code>:significant</code> - If <code>true</code>, precision will be the number of significant_digits. If <code>false</code>, the number of fractional digits (defaults to <code>false</code>).</p> </li>
<li> <p><code>:separator</code> - Sets the separator between the fractional and integer digits (defaults to “.”).</p> </li>
<li> <p><code>:delimiter</code> - Sets the thousands delimiter (defaults to “”).</p> </li>
<li> <p><code>:strip_insignificant_zeros</code> - If <code>true</code> removes insignificant zeros after the decimal separator (defaults to <code>false</code>).</p> </li>
<li> <p><code>:raise</code> - If true, raises <code>InvalidNumberError</code> when the argument is invalid.</p> </li>
</ul> <h4 id="method-i-number_with_precision-label-Examples">Examples</h4> <pre class="ruby" data-language="ruby">number_with_precision(111.2345)                                         # =&gt; 111.235
number_with_precision(111.2345, precision: 2)                           # =&gt; 111.23
number_with_precision(13, precision: 5)                                 # =&gt; 13.00000
number_with_precision(389.32314, precision: 0)                          # =&gt; 389
number_with_precision(111.2345, significant: true)                      # =&gt; 111
number_with_precision(111.2345, precision: 1, significant: true)        # =&gt; 100
number_with_precision(13, precision: 5, significant: true)              # =&gt; 13.000
number_with_precision(111.234, locale: :fr)                             # =&gt; 111,234

number_with_precision(13, precision: 5, significant: true, strip_insignificant_zeros: true)
# =&gt; 13

number_with_precision(389.32314, precision: 4, significant: true)       # =&gt; 389.3
number_with_precision(1111.2345, precision: 2, separator: ',', delimiter: '.')
# =&gt; 1.111,23
</pre>  </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2004&ndash;2021 David Heinemeier Hansson<br>Licensed under the MIT License.<br>
    
  </p>
</div>
