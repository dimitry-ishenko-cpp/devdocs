<div id="col-content" data-swiftype-index="true"> <div id="chef-serverrb-optional-settings"><h1>chef-server.rb Optional Settings</h1></div>  <div id="chef-product-version-dropdown" data-chef-product-key="chef-server" data-default-version="chef-server_14"> <label id="chef-product-version-dropdown-label" for="chef_product">Version:</label> <select id="chef-product-version-dropdown-select" name="chef_product" onchange="selectProductVersion()"><option data-product="chef-server" data-version="14" value="chef-server_14"> Chef Infra Server 14 </option>
<option data-product="chef-server" data-version="13.2" value="chef-server_13_2"> Chef Infra Server 13.2 </option></select> </div> <div class="prose"> <div class="chef-product-version chef-server_14"> <p data-swiftype-index="false"> <a href="https://github.com/chef/chef-server/blob/main/docs-chef-io/content/server/v14/config_rb_server_optional_settings.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> The <code>/etc/opscode/chef-server.rb</code> file contains all of the non-default configuration settings used by the Chef Infra Server. The default settings are built into the Chef Infra Server configuration and should only be added to the <code>chef-server.rb</code> file to apply non-default values. These configuration settings are processed when the <code>chef-server-ctl reconfigure</code> command is run. The <code>chef-server.rb</code> file is a Ruby file, which means that conditional statements can be used within it. <h2 id="settings-14">Settings</h2> <p>The following sections describe the various settings that are available in the chef-server.rb file.</p> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> <p>When changes are made to the chef-server.rb file the Chef Infra Server must be reconfigured by running the following command:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef-server-ctl reconfigure
</code></pre></div> </div> </div> <h3 id="general-14">General</h3> <p>This configuration file has the following general settings:</p> <dl> <dt><code>addons['install']</code></dt> <dd> <p>Default value: <code>false</code>.</p> </dd> <dt><code>addons['path']</code></dt> <dd> <p>Default value: <code>nil</code>.</p> </dd> <dt><code>addons['packages']</code></dt> <dd> <p>Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#c65d09">%w{chef-manage}</span>
</code></pre></div>
</dd> <dt><code>api_version</code></dt> <dd> <p>The version of the Chef Infra Server. Default value: <code>'12.0.0'</code>.</p> </dd> <dt><code>default_orgname</code></dt> <dd> <p>The <code>ORG_NAME</code> part of the <code>/organizations</code> endpoint in Chef Infra Server.</p> </dd> <dt><code>flavor</code></dt> <dd> <p>Default value: <code>'cs'</code>.</p> </dd> <dt><code>fips</code></dt> <dd> <p>Set to <code>true</code> to run the server in FIPS compliance mode. Set to <code>false</code> to force the server to run without FIPS compliance mode. Default: The value in the kernel configuration.</p> </dd> </dl> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> Chef Infra Server versions earlier than 14.5 configured with <code>nginx['enable_non_ssl'] = false</code> and <code>fips = true</code> require <code>export CSC_LB_URL=https://127.0.0.1</code> to run the command <code>chef-server-ctl reindex &lt;options&gt;</code> </div> </div> <dl> <dt><code>insecure_addon_compat</code></dt> <dd> <p>Set to <code>true</code> to keep Chef Infra Server compatible with older add-on versions by rendering secrets and credentials to <code>/etc/opscode/chef-server-running.json</code> and other files in <code>/etc/opscode/</code>. When set to <code>false</code>, secrets are <strong>only</strong> written to <code>/etc/opscode/private-chef-secrets.json</code> and <strong>not</strong> to any other files. Default value: <code>true</code>.</p> <p>See <a href="../server_security/index.html#add-on-compatibility">Add-on Compatibility</a> for the minimum add-on versions supporting <code>insecure_addon_compat false</code>.</p> </dd> <dt><code>install_path</code></dt> <dd> <p>The directory in which the Chef Infra Server is installed. Default value: <code>'/opt/opscode'</code>.</p> </dd> <dt><code>from_email</code></dt> <dd> <p>The email address from which invitations to the Chef management console are sent. Default value: <code>'"Opscode" &lt;donotreply@chef.io&gt;'</code>.</p> </dd> <dt><code>license['nodes']</code></dt> <dd> <p>The number of licensed nodes. Default value: <code>25</code>.</p> </dd> <dt><code>license['upgrade_url']</code></dt> <dd> <p>The URL to visit for more information about how to update the number of nodes licensed for an organization. Default value: <code>'https://www.chef.io/pricing'</code>.</p> </dd> <dt><code>notification_email</code></dt> <dd> <p>The email addressed to which email notifications are sent. Default value: <code>'pc-default@opscode.com'</code>.</p> </dd> <dt><code>role</code></dt> <dd> <p>The configuration type of the Chef Infra Server. Possible values: <code>backend</code>, <code>frontend</code>, or <code>standalone</code>. Default value: <code>'standalone'</code>.</p> </dd> <dt><code>topology</code></dt> <dd> <p>The topology of the Chef Infra Server. Possible values: <code>manual</code>, <code>standalone</code>, and <code>tier</code>. Default value: <code>'standalone'</code>.</p> </dd> </dl> <h3 id="bookshelf-14">bookshelf</h3> The <strong>bookshelf</strong> service is an Amazon Simple Storage Service (S3)-compatible service that is used to store cookbooks, including all of the files—recipes, templates, and so on—that are associated with each cookbook. <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> To <a href="../index.html#aws-settings">configure the server for external cookbook storage</a>, updates are made to settings for both the <strong>bookshelf</strong> and <strong>opscode-erchef</strong> services. </div> </div> <p>This configuration file has the following settings for <code>bookshelf</code>:</p> <dl> <dt><code>bookshelf['access_key_id']</code></dt> <dd> <p>Deprecated. Use <code>chef-server-ctl set-secret bookshelf access_key_id</code> from the <a href="../ctl_chef_server/index.html#secrets-management">Secrets Management</a> commands.</p> <p>The access key identifier. This may point at an external storage location, such as Amazon EC2. See <a href="../index.html#aws-settings">AWS external bookshelf settings</a> for more information on configuring external bookshelf. Default value: <strong>generated</strong>.</p> </dd> <dt><code>bookshelf['data_dir']</code></dt> <dd> <p>The directory in which on-disk data is stored. The default value is the recommended value. Default value: <code>/var/opt/opscode/bookshelf/data</code>.</p> </dd> <dt><code>bookshelf['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value: <code>/var/opt/opscode/bookshelf</code>.</p> </dd> <dt><code>bookshelf['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>bookshelf['enable_request_logging']</code></dt> <dd> <p>Use to configure request logging for the bookshelf service. Default value: <code>false</code>.</p> </dd> <dt><code>bookshelf['external_url']</code></dt> <dd> <p>The base URL to which the service is to return links to API resources. Use <code>:host_header</code> to ensure the URL is derived from the host header of the incoming HTTP request. Default value: <code>:host_header</code>.</p> </dd> <dt><code>bookshelf['listen']</code></dt> <dd> <p>The IP address on which the service is to listen. Default value: <code>127.0.0.1</code>.</p> </dd> <dt><code>bookshelf['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value: <code>/var/log/opscode/bookshelf</code>.</p> </dd> <dt><code>bookshelf['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">{ <span style="color:#4070a0">'file_maxbytes'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">104857600</span>, <span style="color:#4070a0">'num_to_keep'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">10</span> }
</code></pre></div>
</dd> <dt><code>bookshelf['port']</code></dt> <dd> <p>The port on which the service is to listen. Default value: <code>4321</code>.</p> </dd> <dt><code>bookshelf['secret_access_key']</code></dt> <dd> <p>Deprecated. Use <code>chef-server-ctl set-secret bookshelf secret_access_key</code> from the <a href="../ctl_chef_server/index.html#secrets-management">Secrets Management</a> commands.</p> <p>The secret key. This may point at an external storage location, such as Amazon EC2. See <a href="../index.html#aws-settings">AWS external bookshelf settings</a> for more information on configuring external bookshelf. Default value: <strong>generated</strong>.</p> </dd> <dt><code>bookshelf['storage_type']</code></dt> <dd> <p>Determines where cookbooks are stored. Default value: <code>:filesystem</code>.</p> <p>In instances that require cookbooks to be stored within a SQL backend, such as in a high availability setup, you must set <code>storage_type</code> to <code>:sql</code>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">bookshelf<span style="color:#666">[</span><span style="color:#4070a0">'storage_type'</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#517918">:sql</span>
</code></pre></div>
</dd> <dt><code>bookshelf['stream_download']</code></dt> <dd> <p>Enable stream downloading of cookbooks. This setting (when <code>true</code>) typically results in improved cookbook download performance, especially with the memory usage of the <strong>bookshelf</strong> service and the behavior of load balancers and proxies in-between Chef Infra Client and the Chef Infra Server. Default value: <code>true</code>.</p> </dd> <dt><code>bookshelf['sql_connection_user']</code></dt> <dd> <p>The PostgreSQL user name in <code>'username@hostname'</code> format (e.g. <code>'bookshelf@my_postgresql.postgres.database.azure.com'</code>), where <code>username</code> would normally equal the value of <code>bookshelf['sql_user']</code> (default: <code>'bookshelf'</code>). This setting is <strong>required</strong> in an external Azure PostgreSQL database-as-a-service configuration. If set to <code>nil</code>, Chef Infra Server assumes that the database is not on Azure and the PostgreSQL connection will be made using the value specified in <code>bookshelf['sql_user']</code>. Default value: <code>nil</code>.</p> </dd> <dt><code>bookshelf['vip']</code></dt> <dd> <p>The virtual IP address. This may point at an external storage location, such as Amazon EC2. See <a href="../index.html#aws-settings">AWS external bookshelf settings</a> for more information on configuring external bookshelf. Default value: <code>127.0.0.1</code>.</p> </dd> </dl> <h3 id="bootstrap-14">bootstrap</h3> <p>This configuration file has the following settings for <code>bootstrap</code>:</p> <dl> <dt><code>bootstrap['enable']</code></dt> <dd> <p>Indicates whether an attempt to bootstrap the Chef Infra Server is made. Generally only enabled on systems that have bootstrap enabled via a <code>server</code> entry. Default value: <code>true</code>.</p> </dd> </dl> <h3 id="compliance-forwarding-14">compliance forwarding</h3> <p>The configuration file has the following settings for forwarding <code>compliance</code> requests using the Chef Infra Server authentication system.</p> <dl> <dt><code>profiles['root_url']</code></dt> <dd> <p>If set, any properly signed requests arriving at <code>/organizations/ORGNAME/owners/OWNER/compliance</code> will be forwarded to this URL. This is expected to be a fully qualified resource, e.g. <code>http://compliance.example.org/owners/OWNER/compliance</code>.</p> </dd> </dl> <h3 id="dark_launch-14">dark_launch</h3> <p>This configuration file has the following settings for <code>dark_launch</code>:</p> <dl> <dt><code>dark_launch['actions']</code></dt> <dd> <p>Enable Chef actions. Default value: <code>true</code>.</p> </dd> <dt><code>dark_launch['add_type_and_bag_to_items']</code></dt> <dd> <p>Default value: <code>true</code>.</p> </dd> <dt><code>dark_launch['new_theme']</code></dt> <dd> <p>Default value: <code>true</code>.</p> </dd> <dt><code>dark_launch['private-chef']</code></dt> <dd> <p>Default value: <code>true</code>.</p> </dd> <dt><code>dark_launch['quick_start']</code></dt> <dd> <p>Default value: <code>false</code>.</p> </dd> <dt><code>dark_launch['reporting']</code></dt> <dd> <p>Enable Reporting, which performs data collection during a Chef Infra Client run. Default value: <code>true</code>.</p> </dd> <dt><code>dark_launch['sql_users']</code></dt> <dd> <p>Default value: <code>true</code>.</p> </dd> </dl> <h3 id="data_collector-14">data_collector</h3> <p>This configuration file has the following settings for <code>data_collector</code>:</p> <dl> <dt><code>data_collector['root_url']</code></dt> <dd> <p>The fully qualified URL to the data collector server API. When present, it will enable the data collector in <strong>opscode-erchef</strong>. This also enables Chef Infra Server authenticated forwarding any properly signed requests arriving at <code>/organizations/ORGNAME/data-collector</code> to this URL with the data collector token appended. This is also target for requests authenticated and forwarded by the <code>/organizations/ORGNAME/data-collector</code> endpoint. For the forwarding to work correctly the <code>data_collector['token']</code> field must also be set. For example, if the data collector in Chef Automate is being used, the URI would look like: <code>http://my_automate_server.example.org/data-collector/v0/</code>.</p> </dd> <dt><code>data_collector['proxy']</code></dt> <dd> <p>If set to <code>true</code>, Chef Infra Server will proxy all requests sent to <code>/data-collector</code> to the configured Chef Automate <code>data_collector['root_url']</code>. Note that <em>this route</em> does not check the request signature and add the right data_collector token, but just proxies the Chef Automate endpoint <strong>as-is</strong>. Default value: <code>nil</code>.</p> </dd> <dt><code>data_collector['token']</code></dt> <dd> <p>Deprecated. Use <code>chef-server-ctl set-secret data_collector token</code> from the <a href="../ctl_chef_server/index.html#secrets-management">Secrets Management</a> commands.</p> <p>Legacy configuration for shared data collector security token. When configured, the token will be passed as an HTTP header named <code>x-data-collector-token</code> which the server can choose to accept or reject.</p> </dd> <dt><code>data_collector['timeout']</code></dt> <dd> <p>The amount of time (in milliseconds) before a request to the data collector API times out. Default value: <span class="title-ref">30000</span>.</p> </dd> <dt><code>data_collector['http_init_count']</code></dt> <dd> <p>The initial worker count for the HTTP connection pool that is used by the data collector. Default value: <span class="title-ref">25</span>.</p> </dd> <dt><code>data_collector['http_max_count']</code></dt> <dd> <p>The maximum worker count for the HTTP connection pool that is used by the data collector. Default value: <span class="title-ref">100</span>.</p> </dd> <dt><code>data_collector['http_max_age']</code></dt> <dd> <p>The maximum connection worker age (in seconds) for the HTTP connection pool that is used by the data collector. Default value: <span class="title-ref">"{70, sec}"</span>.</p> </dd> <dt><code>data_collector['http_cull_interval']</code></dt> <dd> <p>The maximum cull interval (in minutes) for the HTTP connection pool that is used by the data collector. Default value: <span class="title-ref">"{1, min}"</span>.</p> </dd> <dt><code>data_collector['http_max_connection_duration']</code></dt> <dd> <p>The maximum connection duration (in seconds) for the HTTP connection pool that is used by the data collector. Default value: <span class="title-ref">"{70, sec}"</span>.</p> </dd> <dt><code>data_collector['ibrowse_options']</code></dt> <dd> <p>An array of comma-separated key-value pairs of ibrowse options for the HTTP connection pool that is used by the data collector. Default value: <span class="title-ref">"[{connect_timeout, 10000}]"</span>.</p> </dd> <dt><code>data_collector['health_check']</code></dt> <dd> <p>A boolean that controls whether the data collector health is included in the overall health at the <code>_status</code> endpoint. When set to <code>true</code>, Chef Infra Server will report that healthy front end Chef HA cluster members have failed when the <span class="title-ref">data_collector[‘root_url’]</span><span class="title-ref"> cannot be reached. As a result, the load balancer will remove those members from the load balancer pool. Default value: </span><span class="title-ref">true</span>`.</p> </dd> </dl> <h3 id="estatsd-14">estatsd</h3> <p>This configuration file has the following settings for <code>estatsd</code>:</p> <dl> <dt><code>estatsd['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value: <code>'/var/opt/opscode/estatsd'</code>.</p> </dd> <dt><code>estatsd['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>estatsd['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value: <code>'/var/log/opscode/estatsd'</code>.</p> </dd> <dt><code>estatsd['port']</code></dt> <dd> <p>The port on which the service is to listen. Default value: <code>9466</code>.</p> </dd> <dt><code>estatsd['protocol']</code></dt> <dd> <p>Use to send application statistics with StatsD protocol formatting. Set this value to <code>statsd</code> to apply StatsD protocol formatting.</p> </dd> <dt><code>estatsd['vip']</code></dt> <dd> <p>The virtual IP address. Default value: <code>'127.0.0.1'</code>.</p> </dd> </dl> <h3 id="lb--lb_internal-14">lb / lb_internal</h3> <p>This configuration file has the following settings for <code>lb</code>:</p> <dl> <dt><code>lb['api_fqdn']</code></dt> <dd> <p>Default value: <code>node['fqdn']</code>.</p> </dd> <dt><code>lb['ban_refresh_interval']</code></dt> <dd> <p>Default value: <code>600</code>.</p> </dd> <dt><code>lb['bookshelf']</code></dt> <dd> <p>Default value: <code>127.0.0.1</code>.</p> </dd> <dt><code>lb['cache_cookbook_files']</code></dt> <dd> <p>Default value: <code>false</code>.</p> </dd> <dt><code>lb['chef_max_version']</code></dt> <dd> <p>The maximum version of Chef Infra Client that is allowed to access the Chef Infra Server via the Chef Infra Server API. Default value: <code>11</code>.</p> </dd> <dt><code>lb['chef_min_version']</code></dt> <dd> <p>The minimum version of Chef Infra Client that is allowed to access the Chef Infra Server via the Chef Infra Server API. Default value: <code>10</code>.</p> </dd> <dt><code>lb['chef_server_webui']</code></dt> <dd> <p>Default value: <code>127.0.0.1</code>.</p> </dd> <dt><code>lb['debug']</code></dt> <dd> <p>Default value: <code>false</code>.</p> </dd> <dt><code>lb['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>lb['erchef']</code></dt> <dd> <p>Default value: <code>127.0.0.1</code>.</p> </dd> <dt><code>lb['maint_refresh_interval']</code></dt> <dd> <p>Default value: <code>600</code>.</p> </dd> <dt><code>lb['redis_connection_pool_size']</code></dt> <dd> <p>Default value: <code>250</code>.</p> </dd> <dt><code>lb['redis_connection_timeout']</code></dt> <dd> <p>The amount of time (in milliseconds) to wait before timing out. Default value: <code>1000</code>.</p> </dd> <dt><code>lb['redis_keepalive_timeout']</code></dt> <dd> <p>The amount of time (in milliseconds) to wait before timing out. Default value: <code>2000</code>.</p> </dd> <dt><code>lb['upstream']['bookshelf']</code></dt> <dd> <p>The default value is the recommended value. Default value: <code>[ '127.0.0.1' ]</code>.</p> </dd> <dt><code>lb['upstream']['oc_bifrost']</code></dt> <dd> <p>The default value is the recommended value. Default value: <code>[ '127.0.0.1' ]</code>.</p> </dd> <dt><code>lb['upstream']['opscode_erchef']</code></dt> <dd> <p>The default value is the recommended value. Default value: <code>[ '127.0.0.1' ]</code>.</p> </dd> <dt><code>lb['upstream']['opscode_solr4']</code></dt> <dd> <p>The default value is the recommended value. Default value: <code>[ '127.0.0.1' ]</code>.</p> </dd> <dt><code>lb['vip']</code></dt> <dd> <p>The virtual IP address. Default value: <code>127.0.0.1</code>.</p> </dd> <dt><code>lb['web_ui_fqdn']</code></dt> <dd> <p>Default value: <code>node['fqdn']</code>.</p> </dd> <dt><code>lb['xdl_defaults']['503_mode']</code></dt> <dd> <p>The default value is the recommended value. Default value: <code>false</code>.</p> </dd> <dt><code>lb['xdl_defaults']['couchdb_acls']</code></dt> <dd> <p>The default value is the recommended value. Default value: <code>true</code>.</p> </dd> <dt><code>lb['xdl_defaults']['couchdb_association_requests']</code></dt> <dd> <p>The default value is the recommended value. Default value: <code>true</code>.</p> </dd> <dt><code>lb['xdl_defaults']['couchdb_associations']</code></dt> <dd> <p>The default value is the recommended value. Default value: <code>true</code>.</p> </dd> <dt><code>lb['xdl_defaults']['couchdb_containers']</code></dt> <dd> <p>The default value is the recommended value. Default value: <code>true</code>.</p> </dd> <dt><code>lb['xdl_defaults']['couchdb_groups']</code></dt> <dd> <p>The default value is the recommended value. Default value: <code>true</code>.</p> </dd> <dt><code>lb['xdl_defaults']['couchdb_organizations']</code></dt> <dd> <p>The default value is the recommended value. Default value: <code>true</code>.</p> </dd> </dl> <p>And for the internal load balancers:</p> <dl> <dt><code>lb_internal['account_port']</code></dt> <dd> <p>Default value: <code>9685</code>.</p> </dd> <dt><code>lb_internal['chef_port']</code></dt> <dd> <p>Default value: <code>9680</code>.</p> </dd> <dt><code>lb_internal['enable']</code></dt> <dd> <p>Default value: <code>true</code>.</p> </dd> <dt><code>lb_internal['oc_bifrost_port']</code></dt> <dd> <p>Default value: <code>9683</code>.</p> </dd> <dt><code>lb_internal['vip']</code></dt> <dd> <p>The virtual IP address. Default value: <code>'127.0.0.1'</code>.</p> </dd> </dl> <h3 id="ldap-14">ldap</h3>  <div class="admonition-warning"> <p class="admonition-warning-title">Warning</p> <div class="admonition-warning-text"> <p>The following settings <strong>MUST</strong> be in the config file for LDAP authentication to Active Directory to work:</p> <ul> <li><code>base_dn</code></li> <li><code>bind_dn</code></li> <li><code>group_dn</code></li> <li><code>host</code></li> </ul> <p>If those settings are missing, you will get authentication errors and be unable to proceed.</p> </div> </div> <p>This configuration file has the following settings for <code>ldap</code>:</p> <dl> <dt><code>ldap['base_dn']</code></dt> <dd> <p>The root LDAP node under which all other nodes exist in the directory structure. For Active Directory, this is typically <code>cn=users</code> and then the domain. For example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#4070a0">'OU=Employees,OU=Domain users,DC=example,DC=com'</span>
</code></pre></div>
<p>Default value: <code>nil</code>.</p> </dd> <dt><code>ldap['bind_dn']</code></dt> <dd> <p>The distinguished name used to bind to the LDAP server. The user the Chef Infra Server will use to perform LDAP searches. This is often the administrator or manager user. This user needs to have read access to all LDAP users that require authentication. The Chef Infra Server must do an LDAP search before any user can log in. Many Active Directory and LDAP systems do not allow an anonymous bind. If anonymous bind is allowed, leave the <code>bind_dn</code> and <code>bind_password</code> settings blank. If anonymous bind is not allowed, a user with <code>READ</code> access to the directory is required. This user must be specified as an LDAP distinguished name similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#4070a0">'CN=user,OU=Employees,OU=Domainuser,DC=example,DC=com'</span>
</code></pre></div>
<div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> <p>If you need to escape characters in a distinguished name, such as when using Active Directory, they must be <a href="https://social.technet.microsoft.com/wiki/contents/articles/5312.active-directory-characters-to-escape.aspx">escaped with a backslash escape character</a>.</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#4070a0">'CN=example\\user,OU=Employees,OU=Domainuser,DC=example,DC=com'</span>
</code></pre></div>
</div> </div> <p>Default value: <code>nil</code>.</p> </dd> <dt><code>ldap['bind_password']</code></dt> <dd> <p>Deprecated. Use <code>chef-server-ctl set-secret ldap bind_password</code> from the <a href="../../ctl_chef_server.html#ctl-chef-server-secrets-management">Secrets Management</a> commands.</p> <p>Legacy configuration for the password of the binding user. The password for the user specified by <code>ldap['bind_dn']</code>. Leave this value and <code>ldap['bind_dn']</code> unset if anonymous bind is sufficient. Default value: <code>nil</code>.</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef-server-ctl set-secret ldap bind_password
Enter ldap bind_password:    <span style="color:#666">(</span>no terminal output<span style="color:#666">)</span>
Re-enter ldap bind_password: <span style="color:#666">(</span>no terminal output<span style="color:#666">)</span>
</code></pre></div>
<p>Remove a set password via</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef-server-ctl remove-secret ldap bind_password
</code></pre></div>
</dd> <dt><code>ldap['group_dn']</code></dt> <dd> <p>The distinguished name for a group. When set to the distinguished name of a group, only members of that group can log in. This feature filters based on the <code>memberOf</code> attribute and only works with LDAP servers that provide such an attribute. In OpenLDAP, the <code>memberOf</code> overlay provides this attribute. For example, if the value of the <code>memberOf</code> attribute is <code>CN=abcxyz,OU=users,DC=company,DC=com</code>, then use:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">ldap<span style="color:#666">[</span><span style="color:#4070a0">'group_dn'</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#4070a0">'CN=abcxyz,OU=users,DC=company,DC=com'</span>
</code></pre></div>
</dd> <dt><code>ldap['host']</code></dt> <dd> <p>The name (or IP address) of the LDAP server. The hostname of the LDAP or Active Directory server. Be sure the Chef Infra Server is able to resolve any host names. Default value: <code>ldap-server-host</code>.</p> </dd> <dt><code>ldap['login_attribute']</code></dt> <dd> <p>The LDAP attribute that holds the user’s login name. Use to specify the Chef Infra Server user name for an LDAP user. Default value: <code>sAMAccountName</code>.</p> </dd> <dt><code>ldap['port']</code></dt> <dd> <p>An integer that specifies the port on which the LDAP server listens. The default value is an appropriate value for most configurations. Default value: <code>389</code> or <code>636</code> when <code>ldap['encryption']</code> is set to <code>:simple_tls</code>.</p> </dd> <dt><code>ldap['ssl_enabled']</code></dt> <dd> <p>Cause the Chef Infra Server to connect to the LDAP server using SSL. Default value: <code>false</code>. Must be <code>false</code> when <code>ldap['tls_enabled']</code> is <code>true</code>.</p> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> <p>It’s recommended that you enable SSL for Active Directory.</p> </div> </div> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> <p>Previous versions of the Chef Infra Server used the <code>ldap['ssl_enabled']</code> setting to first enable SSL, and then the <code>ldap['encryption']</code> setting to specify the encryption type. These settings are deprecated.</p> </div> </div> </dd> <dt><code>ldap['system_adjective']</code></dt> <dd> <p>A descriptive name for the login system that is displayed to users in the Chef Infra Server management console. If a value like “corporate” is used, then the Chef management console user interface will display strings like “the corporate login server”, “corporate login”, or “corporate password.” Default value: <code>AD/LDAP</code>.</p> <div class="admonition-warning"> <p class="admonition-warning-title">Warning</p> <div class="admonition-warning-text"> <p>This setting is <strong>not</strong> used by the Chef Infra Server. It is used only by the Chef management console.</p> </div> </div> </dd> <dt><code>ldap['timeout']</code></dt> <dd> <p>The amount of time (in seconds) to wait before timing out. Default value: <code>60000</code>.</p> </dd> <dt><code>ldap['tls_enabled']</code></dt> <dd> <p>Enable TLS. When enabled, communication with the LDAP server is done via a secure SSL connection on a dedicated port. When <code>true</code>, <code>ldap['port']</code> is also set to <code>636</code>. Default value: <code>false</code>. Must be <code>false</code> when <code>ldap['ssl_enabled']</code> is <code>true</code>.</p> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> <p>Previous versions of the Chef Infra Server used the <code>ldap['ssl_enabled']</code> setting to first enable SSL, and then the <code>ldap['encryption']</code> setting to specify the encryption type. These settings are deprecated.</p> </div> </div> </dd> </dl> <h3 id="nginx-14">nginx</h3> <p>This configuration file has the following settings for <code>nginx</code>:</p> <dl> <dt><code>nginx['cache_max_size']</code></dt> <dd> <p>The <code>max_size</code> parameter used by the Nginx cache manager, which is part of the <code>proxy_cache_path</code> directive. When the size of file storage exceeds this value, the Nginx cache manager removes the least recently used data. Default value: <code>5000m</code>.</p> </dd> <dt><code>nginx['client_max_body_size']</code></dt> <dd> <p>The maximum accepted body size for a client request, as indicated by the <code>Content-Length</code> request header. Default value: <code>250m</code>.</p> </dd> <dt><code>nginx['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value: <code>/var/opt/opscode/nginx</code>.</p> </dd> <dt><code>nginx['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>nginx['enable_ipv6']</code></dt> <dd> <p>Enable Internet Protocol version 6 (IPv6) addresses. Default value: <code>false</code>.</p> </dd> <dt><code>nginx['enable_non_ssl']</code></dt> <dd> <p>Allow port 80 redirects to port 443. Set to <code>true</code>, to enable SSL termination by the front-end hardware load balancers for WebUI and API endpoints. Default value: <code>false</code>.</p> </dd> </dl> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> Chef Infra Server versions earlier than 14.5 configured with <code>nginx['enable_non_ssl'] = false</code> and <code>fips = true</code> require <code>export CSC_LB_URL=https://127.0.0.1</code> to run the command <code>chef-server-ctl reindex &lt;options&gt;</code> </div> </div> <dl> <dt><code>nginx['enable_stub_status']</code></dt> <dd> <p>Enables the Nginx <code>stub_status</code> module. See <code>nginx['stub_status']['allow_list']</code>, <code>nginx['stub_status']['listen_host']</code>, <code>nginx['stub_status']['listen_port']</code>, and <code>nginx['stub_status']['location']</code>. Default value: <code>true</code>.</p> </dd> <dt><code>nginx['gzip']</code></dt> <dd> <p>Enable gzip compression. Default value: <code>on</code>.</p> </dd> <dt><code>nginx['gzip_comp_level']</code></dt> <dd> <p>The compression level used with gzip, from least amount of compression (<code>1</code>, fastest) to the most (<code>2</code>, slowest). Default value: <code>2</code>.</p> </dd> <dt><code>nginx['gzip_http_version']</code></dt> <dd> <p>Enable gzip depending on the version of the HTTP request. Default value: <code>1.0</code>.</p> </dd> <dt><code>nginx['gzip_proxied']</code></dt> <dd> <p>The type of compression used based on the request and response. Default value: <code>any</code>.</p> </dd> <dt><code>nginx['gzip_types']</code></dt> <dd> <p>Enable compression for the specified MIME-types. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#666">[</span> <span style="color:#4070a0">'text/plain'</span>,
  <span style="color:#4070a0">'text/css'</span>,
  <span style="color:#4070a0">'application/x-javascript'</span>,
  <span style="color:#4070a0">'text/xml'</span>, <span style="color:#4070a0">'application/xml'</span>,
  <span style="color:#4070a0">'application/xml+rss'</span>,
  <span style="color:#4070a0">'text/javascript'</span>,
  <span style="color:#4070a0">'application/json'</span>
  <span style="color:#666">]</span>
</code></pre></div>
</dd> <dt><code>nginx['keepalive_timeout']</code></dt> <dd> <p>The amount of time (in seconds) to wait for requests on a HTTP keepalive connection. Default value: <code>65</code>.</p> </dd> <dt><code>nginx['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value: <code>/var/log/opscode/nginx</code>.</p> </dd> <dt><code>nginx['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value: <code>{ 'file_maxbytes' =&gt; 104857600, 'num_to_keep' =&gt; 10 }</code></p> </dd> <dt><code>nginx['log_x_forwarded_for']</code></dt> <dd> <p>Log $http_x_forwarded_for (“X-Forwarded-For”) instead of $remote_addr if <code>true</code>. Default value <code>false</code>.</p> </dd> <dt><code>nginx['non_ssl_port']</code></dt> <dd> <p>The port on which the WebUI and API are bound for non-SSL connections. Default value: <code>80</code>. Use <code>nginx['enable_non_ssl']</code> to enable or disable SSL redirects on this port number. Set to <code>false</code> to disable non-SSL connections.</p> </dd> <dt><code>nginx['sendfile']</code></dt> <dd> <p>Copy data between file descriptors when <code>sendfile()</code> is used. Default value: <code>on</code>.</p> </dd> <dt><code>nginx['server_name']</code></dt> <dd> <p>The FQDN for the server. Default value: <code>node['fqdn']</code>.</p> </dd> <dt><code>nginx['ssl_certificate']</code></dt> <dd> <p>The SSL certificate used to verify communication over HTTPS. Default value: <code>nil</code>.</p> </dd> <dt><code>nginx['ssl_certificate_key']</code></dt> <dd> <p>The certificate key used for SSL communication. Default value: <code>nil</code>.</p> </dd> <dt><code>nginx['ssl_ciphers']</code></dt> <dd> <p>The list of supported cipher suites that are used to establish a secure connection. To favor AES256 with ECDHE forward security, drop the <code>RC4-SHA:RC4-MD5:RC4:RSA</code> prefix. See <a href="https://www.openssl.org/docs/man1.0.2/man1/ciphers.html">this link</a> for more information. For example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">nginx<span style="color:#666">[</span><span style="color:#4070a0">'ssl_ciphers'</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#517918">HIGH</span>: <span style="color:#666">...</span> :<span style="color:#666">!</span><span style="color:#60add5">PSK</span>
</code></pre></div>
</dd> <dt><code>nginx['ssl_company_name']</code></dt> <dd> <p>The name of your company. Default value: <code>YouCorp</code>.</p> </dd> <dt><code>nginx['ssl_country_name']</code></dt> <dd> <p>The country in which your company is located. Default value: <code>US</code>.</p> </dd> <dt><code>nginx['ssl_email_address']</code></dt> <dd> <p>The default email address for your company. Default value: <code>you@example.com</code>.</p> </dd> <dt><code>nginx['ssl_locality_name']</code></dt> <dd> <p>The city in which your company is located. Default value: <code>Seattle</code>.</p> </dd> <dt><code>nginx['ssl_organizational_unit_name']</code></dt> <dd> <p>The organization or group within your company that is running the Chef Infra Server. Default value: <code>Operations</code>.</p> </dd> <dt><code>nginx['ssl_port']</code></dt> <dd> <p>Default value: <code>443</code>.</p> </dd> <dt><code>nginx['ssl_protocols']</code></dt> <dd> <p>The SSL protocol versions that are enabled for the Chef Infra Server API. Starting with Chef Infra Server 14.3, this value defaults to <code>'TLSv1.2'</code> for enhanced security. Previous releases defaulted to <code>'TLSv1 TLSv1.1 TLSv1.2'</code>, which allowed for less secure SSL connections. TLS 1.2 is supported on Chef Infra Client 10.16.4 and later on Linux, Unix, and macOS, and on Chef Infra Client 12.8 and later on Windows. If it is necessary to support these older end-of-life Chef Infra Client releases, set this value to <code>'TLSv1.1 TLSv1.2'</code>.</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">nginx<span style="color:#666">[</span><span style="color:#4070a0">'ssl_protocols'</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#4070a0">'TLSv1.2'</span>
</code></pre></div>
<p>Default value: <code>TLSv1.2</code>.</p> </dd> <dt><code>nginx['ssl_state_name']</code></dt> <dd> <p>The state, province, or region in which your company is located. Default value: <code>WA</code>.</p> </dd> <dt><code>nginx['strict_host_header']</code></dt> <dd> <p>Whether nginx should only respond to requests where the Host header matches one of the configured FQDNs. Default value: <code>false</code>.</p> </dd> <dt><code>nginx['stub_status']['allow_list']</code></dt> <dd> <p>The IP address on which accessing the <code>stub_status</code> endpoint is allowed. Default value: <code>["127.0.0.1"]</code>.</p> </dd> <dt><code>nginx['stub_status']['listen_host']</code></dt> <dd> <p>The host on which the Nginx <code>stub_status</code> module listens. Default value: <code>"127.0.0.1"</code>.</p> </dd> <dt><code>nginx['stub_status']['listen_port']</code></dt> <dd> <p>The port on which the Nginx <code>stub_status</code> module listens. Default value: <code>"9999"</code>.</p> </dd> <dt><code>nginx['stub_status']['location']</code></dt> <dd> <p>The name of the Nginx <code>stub_status</code> endpoint used to access data generated by the Nginx <code>stub_status</code> module. Default value: <code>"/nginx_status"</code>.</p> </dd> <dt><code>nginx['tcp_nodelay']</code></dt> <dd> <p>Enable the Nagle buffering algorithm. Default value: <code>on</code>.</p> </dd> <dt><code>nginx['tcp_nopush']</code></dt> <dd> <p>Enable TCP/IP transactions. Default value: <code>on</code>.</p> </dd> <dt><code>nginx["time_format"]</code></dt> <dd> <p>The time format of nginx <code>access.log</code>. Possible values : <code>"time_iso8601"</code> (ex: [2020-10-21T07:22:00+00:00]), <code>"time_local"</code> (ex: [07/Jun/2018:01:05:11 +0900]).</p> <p>Default value : <code>"time_iso8601"</code>.</p> <p><strong>New in Chef Infra Server 14.1</strong></p> </dd> <dt><code>nginx['url']</code></dt> <dd> <p>Default value: <code>https://#{node['fqdn']}</code>.</p> </dd> <dt><code>nginx['use_implicit_hosts']</code></dt> <dd> <p>Automatically add <span class="title-ref">localhost</span> and any local IP addresses to the configured FQDNs. Useful in combination with <code>nginx['strict_host_header']</code>. Default value: <code>true</code>.</p> </dd> <dt><code>nginx['show_welcome_page']</code></dt> <dd> <p>Determines whether or not the default nginx welcome page is shown. Default value: <code>true</code>.</p> </dd> <dt><code>nginx['worker_connections']</code></dt> <dd> <p>The maximum number of simultaneous clients. Use with <code>nginx['worker_processes']</code> to determine the maximum number of allowed clients. Default value: <code>10240</code>.</p> </dd> <dt><code>nginx['worker_processes']</code></dt> <dd> <p>The number of allowed worker processes. Use with <code>nginx['worker_connections']</code> to determine the maximum number of allowed clients. Default value: <code>node['cpu']['total'].to_i</code>.</p> </dd> <dt><code>nginx['x_forwarded_proto']</code></dt> <dd> <p>The protocol used to connect to the server. Possible values: <code>http</code> and <code>https</code>. This is the protocol used to connect to the Chef Infra Server by a Chef Infra Client or a workstation. Default value: <code>'https'</code>.</p> </dd> <dt><code>nginx['hsts_max_age']</code></dt> <dd> <p>Time duration in seconds till which the browser caches the <code>HSTS</code> information. Possible values: greater than or equal to <code>31536000</code> and less than or equal to <code>63072000</code>. Default value: <code>31536000</code> (1 year).</p> </dd> <dt><code>nginx['nginx_no_root']</code></dt> <dd> <p>Boolean, default <code>false</code>. Specifies that <code>nginx</code> processes, including the <code>master</code> process, should not run as the <code>root</code> user on a system and will instead run as <code>user['username']</code> (defaults to <code>opscode</code>). <strong>REQUIRES</strong> that <code>nginx['ssl_port']</code> and <code>nginx['non_ssl_port']</code> options are configured to non-privileged ports greater than <code>1024</code> or that the local system is otherwise allowed to bind to privileged ports with the user <code>user['username']</code>.</p> <p>*<em>New in Chef Infra Server 14.10</em></p> </dd> </dl> <h3 id="oc_bifrost-14">oc_bifrost</h3> The <strong>oc_bifrost</strong> service ensures that every request to view or manage objects stored on the Chef Infra Server is authorized. <p>This configuration file has the following settings for <code>oc_bifrost</code>:</p> <dl> <dt><code>oc_bifrost['db_pool_size']</code></dt> <dd> <p>The number of open connections to PostgreSQL that are maintained by the service. This value should be increased if failures indicate that the <strong>oc_bifrost</strong> service ran out of connections. This value should be tuned in conjunction with the <code>postgresql['max_connections']</code> setting for PostgreSQL. Default value: <code>20</code>.</p> </dd> <dt><code>oc_bifrost['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value: <code>/var/opt/opscode/oc_bifrost</code>.</p> </dd> <dt><code>oc_bifrost['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>oc_bifrost['enable_request_logging']</code></dt> <dd> <p>Use to configure request logging for the <code>oc_bifrost</code> service. Default value: <code>true</code>.</p> </dd> <dt><code>oc_bifrost['extended_perf_log']</code></dt> <dd> <p>Default value: <code>true</code>.</p> </dd> <dt><code>oc_bifrost['listen']</code></dt> <dd> <p>The IP address on which the service is to listen. Default value: <code>'127.0.0.1'</code>.</p> </dd> <dt><code>oc_bifrost['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value: <code>/var/log/opscode/oc_bifrost</code>.</p> </dd> <dt><code>oc_bifrost['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">{ <span style="color:#4070a0">'file_maxbytes'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">104857600</span>, <span style="color:#4070a0">'num_to_keep'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">10</span> }
</code></pre></div>
</dd> <dt><code>oc_bifrost['port']</code></dt> <dd> <p>The port on which the service is to listen. Default value: <code>9463</code>.</p> </dd> <dt><code>oc_bifrost['sql_connection_user']</code></dt> <dd> <p>The PostgreSQL user name in <code>'username@hostname'</code> format (e.g. <code>'bifrost@my_postgresql.postgres.database.azure.com'</code>), where <code>username</code> would normally equal the value of <code>oc_bifrost['sql_user']</code> (default: <code>'bifrost'</code>). This setting is <strong>required</strong> in an external Azure PostgreSQL database-as-a-service configuration. If set to <code>nil</code>, Chef Infra Server assumes that the database is not on Azure and the PostgreSQL connection will be made using the value specified in <code>oc_bifrost['sql_user']</code>. Default value: <code>nil</code>.</p> </dd> <dt><code>oc_bifrost['sql_password']</code></dt> <dd> <p>The password for the <code>sql_user</code>. Default value: <strong>generated</strong>.</p> <p>To override the default value, use the <a href="../ctl_chef_server/index.html#secrets-management">Secrets Management</a> command: <code>chef-server-ctl set-secret oc_bifrost sql_password</code>.</p> </dd> <dt><code>oc_bifrost['sql_ro_password']</code></dt> <dd> <p>The password for the <code>sql_ro_user</code>. Default value: <strong>generated</strong>.</p> <p>To override the default value, use the <a href="../ctl_chef_server/index.html#secrets-management">Secrets Management</a> command: <code>chef-server-ctl set-secret oc_bifrost sql_ro_password</code>.</p> </dd> <dt><code>oc_bifrost['sql_ro_user']</code></dt> <dd> <p>Default value: <code>'bifrost_ro'</code>.</p> </dd> <dt><code>oc_bifrost['sql_user']</code></dt> <dd> <p>The user with permission to publish data. Default value: <code>'bifrost'</code>.</p> </dd> <dt><code>oc_bifrost['superuser_id']</code></dt> <dd> <p>Default value: <strong>generated</strong>.</p> </dd> <dt><code>oc_bifrost['vip']</code></dt> <dd> <p>The virtual IP address. Default value: <code>'127.0.0.1'</code>.</p> </dd> </dl> <h3 id="oc_chef_authz-14">oc_chef_authz</h3> <p>The <strong>opscode-authz</strong> service is used to handle authorization requests from oc_erchef to oc_bifrost in the Chef Infra Server.</p> <p>This configuration file has the following settings for <code>oc_chef_authz</code>:</p> <dl> <dt><code>oc_chef_authz['http_cull_interval']</code></dt> <dd> <p>Default value: <code>'{1, min}'</code>.</p> </dd> <dt><code>oc_chef_authz['http_init_count']</code></dt> <dd> <p>Default value: <code>25</code>.</p> </dd> <dt><code>oc_chef_authz['http_max_age']</code></dt> <dd> <p>Default value: <code>'{70, sec}'</code>.</p> </dd> <dt><code>oc_chef_authz['http_max_connection_duration']</code></dt> <dd> <p>Default value: <code>'{70, sec}'</code>.</p> </dd> <dt><code>oc_chef_authz['http_max_count']</code></dt> <dd> <p>Default value: <code>100</code>.</p> </dd> <dt><code>oc_chef_authz['ibrowse_options']</code></dt> <dd> <p>The amount of time (in milliseconds) to wait for a connection to be established. Default value: <code>'[{connect_timeout, 5000}]'</code>.</p> </dd> <dt><code>oc_chef_authz['max_connection_request_limit']</code></dt> <dd> <p>The maximum number of requests allowed per connection. Default value: <code>100</code>.</p> </dd> </dl> <h3 id="oc-chef-pedant-14">oc-chef-pedant</h3> <p>This configuration file has the following settings for <code>oc-chef-pedant</code>:</p> <dl> <dt><code>oc_chef_pedant['debug_org_creation']</code></dt> <dd> <p>Run tests with full output. Default value: <code>false</code>.</p> </dd> <dt><code>oc_chef_pedant['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#4070a0">'/var/opt/opscode/oc-chef-pedant'</span>
</code></pre></div>
</dd> <dt><code>oc_chef_pedant['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#4070a0">'/var/log/opscode/oc-chef-pedant'</span>
</code></pre></div>
</dd> <dt><code>oc_chef_pedant['log_http_requests']</code></dt> <dd> <p>Log HTTP requests in a file named <code>http-traffic.log</code> that is located in the path specified by <code>log_directory</code>. Default value: <code>true</code>.</p> </dd> <dt><code>oc_chef_pedant['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">{ <span style="color:#4070a0">'file_maxbytes'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">104857600</span>, <span style="color:#4070a0">'num_to_keep'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">10</span> }
</code></pre></div>
</dd> </dl> <h3 id="oc-id-14">oc-id</h3> The <strong>oc-id</strong> service enables OAuth 2.0 authentication to the Chef Infra Server by external applications, including Chef Supermarket. OAuth 2.0 uses token-based authentication, where external applications use tokens that are issued by the <strong>oc-id</strong> provider. No special credentials—<code>webui_priv.pem</code> or privileged keys—are stored on the external application. <p>This configuration file has the following settings for <code>oc-id</code>:</p> <dl> <dt><code>oc_id['administrators']</code></dt> <dd> <p>An array of Chef Infra Server user names who may add applications to the identity service. For example, <code>['user1', 'user2']</code>. Default value: <code>[ ]</code>.</p> </dd> <dt><code>oc_id['applications']</code></dt> <dd> <p>A Hash that contains OAuth 2 application information. Default value: <code>{ }</code>.</p> <p>To define OAuth 2 information for Chef Supermarket, create a Hash similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">oc_id<span style="color:#666">[</span><span style="color:#4070a0">'applications'</span><span style="color:#666">]</span> <span style="color:#666">||=</span> {}
oc_id<span style="color:#666">[</span><span style="color:#4070a0">'applications'</span><span style="color:#666">][</span><span style="color:#4070a0">'supermarket'</span><span style="color:#666">]</span> <span style="color:#666">=</span> {
  <span style="color:#4070a0">'redirect_uri'</span> <span style="color:#666">=&gt;</span> <span style="color:#4070a0">'https://supermarket.mycompany.com/auth/chef_oauth2/callback'</span>,
}
</code></pre></div> </dd> <dt><code>oc_id['db_pool_size']</code></dt> <dd> <p>The number of open connections to PostgreSQL that are maintained by the service. Default value: <code>'20'</code>.</p> </dd> <dt><code>oc_id['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value: none.</p> </dd> <dt><code>oc_id['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>oc_id['email_from_address']</code></dt> <dd> <p>Outbound email address. Defaults to the <code>'from_email'</code> value.</p> </dd> <dt><code>oc_id['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value: <code>'/var/opt/opscode/oc_id'</code>.</p> </dd> <dt><code>oc_id['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">{ <span style="color:#4070a0">'file_maxbytes'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">104857600</span>, <span style="color:#4070a0">'num_to_keep'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">10</span> }
</code></pre></div>
</dd> <dt><code>oc_id['origin']</code></dt> <dd> <p>The FQDN for the server that is sending outbound email. Defaults to the <code>'api_fqdn'</code> value, which is the FQDN for the Chef Infra Server.</p> </dd> <dt><code>oc_id['num_to_keep']</code></dt> <dd> <p>The number of log files to keep. Default value: <code>10</code>.</p> </dd> <dt><code>oc_id['port']</code></dt> <dd> <p>The port on which the service is to listen. Default value: <code>9090</code>.</p> </dd> <dt><code>oc_id['sql_connection_user']</code></dt> <dd> <p>The PostgreSQL user name in <code>'username@hostname'</code> format (e.g. <code>'oc_id@my_postgresql.postgres.database.azure.com'</code>), where <code>username</code> would normally equal the value of <code>oc_id['sql_user']</code> (default: <code>'od_id'</code>). This setting is <strong>required</strong> in an external Azure PostgreSQL database-as-a-service configuration. If set to <code>nil</code>, Chef Infra Server assumes that the database is not on Azure and the PostgreSQL connection will be made using the value specified in <code>oc_id['sql_user']</code>. Default value: <code>nil</code>.</p> </dd> <dt><code>oc_id['sql_database']</code></dt> <dd> <p>The name of the database. Default value: <code>oc_id</code>.</p> </dd> <dt><code>oc_id['sql_password']</code></dt> <dd> <p>The password for the <code>sql_user</code>. Default value: <strong>generated</strong>.</p> <p>To override the default value, use the <a href="../ctl_chef_server/index.html#secrets-management">Secrets Management</a> command: <code>chef-server-ctl set-secret oc_id sql_password</code>.</p> </dd> <dt><code>oc_id['sql_user']</code></dt> <dd> <p>The user with permission to write to <code>sql_database</code>. Default value: <code>oc_id</code>.</p> </dd> <dt><code>oc_id['vip']</code></dt> <dd> <p>The virtual IP address. Default value: <code>'127.0.0.1'</code>.</p> </dd> </dl> <h3 id="opscode-chef-mover-14">opscode-chef-mover</h3> <p>This configuration file has the following settings for <code>opscode-chef-mover</code>:</p> <dl> <dt><code>opscode_chef_mover['bulk_fetch_batch_size']</code></dt> <dd> <p>Default value: <code>'5'</code>.</p> </dd> <dt><code>opscode_chef_mover['cache_ttl']</code></dt> <dd> <p>Default value: <code>'3600'</code>.</p> </dd> <dt><code>opscode_chef_mover['db_pool_size']</code></dt> <dd> <p>The number of open connections to PostgreSQL that are maintained by the service. Default value: <code>'5'</code>.</p> </dd> <dt><code>opscode_chef_mover['data_dir']</code></dt> <dd> <p>The directory in which on-disk data is stored. The default value is the recommended value. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#4070a0">'/var/opt/opscode/opscode-chef-mover/data'</span>
</code></pre></div>
</dd> <dt><code>opscode_chef_mover['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#4070a0">'/var/opt/opscode/opscode-chef-mover'</span>
</code></pre></div>
</dd> <dt><code>opscode_chef_mover['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>opscode_chef_mover['ibrowse_max_pipeline_size']</code></dt> <dd> <p>Default value: <code>1</code>.</p> </dd> <dt><code>opscode_chef_mover['ibrowse_max_sessions']</code></dt> <dd> <p>Default value: <code>256</code>.</p> </dd> <dt><code>opscode_chef_mover['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#4070a0">'/var/log/opscode/opscode-chef-mover'</span>
</code></pre></div>
</dd> <dt><code>opscode_chef_mover['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">{ <span style="color:#4070a0">'file_maxbytes'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">104857600</span>, <span style="color:#4070a0">'num_to_keep'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">10</span> }
</code></pre></div>
</dd> <dt><code>opscode_chef_mover['max_cache_size']</code></dt> <dd> <p>Default value: <code>'10000'</code>.</p> </dd> <dt><code>opscode_chef_mover['solr_http_cull_interval']</code></dt> <dd> <p>Default value: <code>'{1, min}'</code>.</p> </dd> <dt><code>opscode_chef_mover['solr_http_init_count']</code></dt> <dd> <p>Default value: <code>25</code>.</p> </dd> <dt><code>opscode_chef_mover['solr_http_max_age']</code></dt> <dd> <p>Default value: <code>'{70, sec}'</code>.</p> </dd> <dt><code>opscode_chef_mover['solr_http_max_connection_duration']</code></dt> <dd> <p>Default value: <code>'{70, sec}'</code>.</p> </dd> <dt><code>opscode_chef_mover['solr_http_max_count']</code></dt> <dd> <p>Default value: <code>100</code>.</p> </dd> <dt><code>opscode_chef_mover['solr_ibrowse_options']</code></dt> <dd> <p>Default value: <code>'[{connect_timeout, 10000}]'</code>.</p> </dd> <dt><code>opscode_chef_mover['solr_timeout']</code></dt> <dd> <p>Default value: <code>30000</code>.</p> </dd> </dl> <h3 id="opscode-erchef-14">opscode-erchef</h3> <p>The <strong>opscode-erchef</strong> service is an Erlang-based service that is used to handle Chef Infra Server API requests to the following areas within the Chef Infra Server:</p> <ul> <li>Cookbooks</li> <li>Data bags</li> <li>Environments</li> <li>Nodes</li> <li>Roles</li> <li>Sandboxes</li> <li>Search</li> </ul> <p>This configuration file has the following settings for <code>opscode-erchef</code>:</p> <dl> <dt><code>opscode_erchef["allow_email_update_only_from_manage"]</code></dt> <dd> <p>Set to <code>true</code>, users can only update their email from the Chef management console. Set to <code>false</code>, users can update their email using knife and the Chef management console.</p> <p>Default value : <code>false</code>.</p> <p><strong>New in Chef Infra Server 14.5</strong></p> </dd> <dt><code>opscode_erchef['auth_skew']</code></dt> <dd> <p>Default value: <code>900</code>.</p> </dd> <dt><code>opscode_erchef['authz_fanout']</code></dt> <dd> <p>Default value: <code>20</code>.</p> </dd> <dt><code>opscode_erchef['authz_timeout']</code></dt> <dd> <p>The amount of time (in seconds) before a request to the <strong>oc_bifrost</strong> service times out. Default value: <code>2000</code>.</p> </dd> <dt><code>opscode_erchef['base_resource_url']</code></dt> <dd> <p>The base URL to which the service is to return links to API resources. Use <code>:host_header</code> to ensure the URL is derived from the host header of the incoming HTTP request. Default value: <code>:host_header</code>.</p> </dd> <dt><code>opscode_erchef['bulk_fetch_batch_size']</code></dt> <dd> <p>The number of nodes that may be deserialized. Currently only applies to the <code>/search</code> endpoint in the Chef Infra Server API. The default value is the recommended value. Default value: <code>5</code>.</p> </dd> <dt><code>opscode_erchef['cache_ttl']</code></dt> <dd> <p>Default value: <code>3600</code>.</p> </dd> <dt><code>opscode_erchef['cleanup_batch_size']</code></dt> <dd> <p>Default value: <code>0</code>.</p> </dd> <dt><code>opscode_erchef['couchdb_max_conn']</code></dt> <dd> <p>Default value: <code>'100'</code>.</p> </dd> <dt><code>opscode_erchef['db_pool_size']</code></dt> <dd> <p>The number of open connections to PostgreSQL that are maintained by the service. Default value: <code>20</code>.</p> </dd> <dt><code>opscode_erchef['depsolver_timeout']</code></dt> <dd> <p>The amount of time (in milliseconds) to wait for cookbook dependency problems to be solved. Default value: <code>'5000'</code>.</p> </dd> <dt><code>opscode_erchef['depsolver_worker_count']</code></dt> <dd> <p>The number of Ruby processes for which cookbook dependency problems are unsolved. Use the <code>pgrep -fl depselector</code> command to verify the number of depsolver workers that are running. If you are seeing 503 service unavailable errors, increase this value. Default value: <code>'5'</code>.</p> </dd> <dt><code>opscode_erchef['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value: <code>/var/opt/opscode/opscode-erchef</code>.</p> </dd> <dt><code>opscode_erchef['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>opscode_erchef['enable_actionlog']</code></dt> <dd> <p>Use to enable Chef actions, a premium feature of the Chef Infra Server. Default value: <code>false</code>.</p> </dd> <dt><code>opscode_erchef['enable_request_logging']</code></dt> <dd> <p>Use to configure request logging for the <code>opscode_erchef</code> service. Default value: <code>true</code>.</p> </dd> <dt><code>opscode_erchef['ibrowse_max_pipeline_size']</code></dt> <dd> <p>Default value: <code>1</code>.</p> </dd> <dt><code>opscode_erchef['ibrowse_max_sessions']</code></dt> <dd> <p>Default value: <code>256</code>.</p> </dd> <dt><code>opscode_erchef['enable_ibrowse_traces']</code></dt> <dd> <p>Use to configure ibrowse logging for the <code>opscode_erchef</code> service. Default value: <code>false</code>.</p> </dd> <dt><code>opscode_erchef["include_version_in_status"]</code></dt> <dd> <p>Set to <code>true</code> to include <code>server_version</code> as part of the <code>/_status</code> endpoint.</p> <p>Default value : <code>false</code>.</p> <p><strong>New in Chef Infra Server 14.1</strong></p> </dd> <dt><code>opscode_erchef['listen']</code></dt> <dd> <p>The IP address on which the service is to listen. Default value: <code>127.0.0.1</code>.</p> </dd> <dt><code>opscode_erchef['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value: <code>/var/log/opscode/opscode-erchef</code>.</p> </dd> <dt><code>opscode_erchef['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">{ <span style="color:#4070a0">'file_maxbytes'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">104857600</span>, <span style="color:#4070a0">'num_to_keep'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">10</span> }
</code></pre></div>
</dd> <dt><code>opscode_erchef['max_cache_size']</code></dt> <dd> <p>Default value: <code>10000</code>.</p> </dd> <dt><code>opscode_erchef['max_request_size']</code></dt> <dd> <p>When the request body size is greater than this value, a <code>413 Request Entity Too Large</code> error is returned. Default value: <code>2000000</code>.</p> </dd> <dt><code>opscode_erchef['nginx_bookshelf_caching']</code></dt> <dd> <p>Whether Nginx is used to cache cookbooks. When <code>:on</code>, Nginx serves up the cached content instead of forwarding the request. Default value: <code>:off</code>.</p> </dd> <dt><code>opscode_erchef['port']</code></dt> <dd> <p>The port on which the service is to listen. Default value: <code>8000</code>.</p> </dd> <dt><code>opscode_erchef['reindex_batch_size']</code></dt> <dd> <p>The number of items to fetch from the database and send to the search index at a time. Default value: <code>10</code>.</p> </dd> <dt><code>opscode_erchef['reindex_sleep_min_ms']</code></dt> <dd> <p>The minimum number of milliseconds to sleep before retrying a failed attempt to index an item. Retries are delayed a random number of miliseconds between <code>reindex_sleep_min_ms</code> and <code>reindex_sleep_max_ms</code>. Set both this and <code>reindex_sleep_max_ms</code> to 0 to retry without delay. Default value: <code>500</code></p> </dd> <dt><code>opscode_erchef['reindex_sleep_max_ms']</code></dt> <dd> <p>The maximum number of milliseconds to sleep before retrying a failed attempt to index an item. Retries are delayed a random number of miliseconds between <code>reindex_sleep_min_ms</code> and <code>reindex_sleep_max_ms</code>. Set both this and <code>reindex_sleep_min_ms</code> to 0 to retry without delay. Default value: <code>2000</code></p> </dd> <dt><code>opscode_erchef['reindex_item_retries']</code></dt> <dd> <p>The number of times to retry sending an object for indexing in the case of failure. Default value: <code>3</code></p> </dd> <dt><code>opscode_erchef['root_metric_key']</code></dt> <dd> <p>Default value: <code>chefAPI</code>.</p> </dd> <dt><code>opscode_erchef['s3_bucket']</code></dt> <dd> <p>The name of the Amazon Simple Storage Service (S3) bucket. This may point at external storage locations, such as Amazon EC2. See <a href="../index.html#aws-settings">AWS external bookshelf settings</a> for more information on configuring external bookshelf.</p> </dd> <dt><code>opscode_erchef['s3_parallel_ops_fanout']</code></dt> <dd> <p>Default value: <code>20</code>.</p> </dd> <dt><code>opscode_erchef['s3_parallel_ops_timeout']</code></dt> <dd> <p>Default value: <code>5000</code>.</p> </dd> <dt><code>opscode_erchef['s3_url_expiry_window_size']</code></dt> <dd> <p>The frequency at which unique URLs are generated. This value may be a specific amount of time, i.e. <code>15m</code> (fifteen minutes) or a percentage of the value of <code>s3_url_ttl</code>, i.e. <code>10%</code>. Default value: <code>:off</code>.</p> </dd> <dt><code>opscode_erchef['s3_url_ttl']</code></dt> <dd> <p>The amount of time (in seconds) before connections to the server expire. If node bootstraps are timing out, increase this setting. Default value: <code>28800</code>.</p> </dd> <dt><code>opscode_erchef['sql_connection_user']</code></dt> <dd> <p>The PostgreSQL user name in <code>'username@hostname'</code> format (e.g. <code>'opscode_chef@my_postgresql.postgres.database.azure.com'</code>), where <code>username</code> would normally equal the value of <code>opscode-erchef['sql_user']</code> (default: <code>'opscode_chef'</code>). This setting is <strong>required</strong> in an external Azure PostgreSQL database-as-a-service configuration. If set to <code>nil</code>, Chef Infra Server assumes that the database is not on Azure and the PostgreSQL connection will be made using the value specified in <code>opscode_erchef['sql_user']</code>.Default value: <code>nil</code>.</p> </dd> <dt><code>opscode_erchef['strict_search_result_acls']</code></dt> <dd> <p>Use to specify that search results only return objects to which an actor (user, client, etc.) has read access, as determined by ACL settings. This affects all searches. When <code>true</code>, the performance of the Chef management console may increase because it enables the Chef management console to skip redundant ACL checks. To ensure the Chef management console is configured properly, after this setting has been applied with a <code>chef-server-ctl reconfigure</code> run <code>chef-manage-ctl reconfigure</code> to ensure the Chef management console also picks up the setting. Default value: <code>false</code>.</p> <div class="admonition-warning"> <p class="admonition-warning-title">Warning</p> <div class="admonition-warning-text"> <p>When <code>true</code>, <code>opscode_erchef['strict_search_result_acls']</code> affects all search results and any actor (user, client, etc.) that does not have read access to a search result will not be able to view it. For example, this could affect search results returned during a Chef Infra Client runs if a Chef Infra Client does not have permission to read the information.</p> </div> </div> </dd> <dt><code>opscode_erchef['udp_socket_pool_size']</code></dt> <dd> <p>Default value: <code>20</code>.</p> </dd> <dt><code>opscode_erchef['umask']</code></dt> <dd> <p>Default value: <code>0022</code>.</p> </dd> <dt><code>opscode_erchef['validation_client_name']</code></dt> <dd> <p>Default value: <code>chef-validator</code>.</p> </dd> <dt><code>opscode_erchef['vip']</code></dt> <dd> <p>The virtual IP address. Default value: <code>127.0.0.1</code>.</p> </dd> <dt><code>opscode_erchef['cbv_cache_enabled']</code></dt> <dd> <p>Enable cookbook version response caching by setting this to <code>true</code>. If you frequently see very long response times from <code>cookbook_versions</code> when under load, this is worth enabling. Enabling this makes it possible for a client to receive stale results. When a cookbook is updated in place (without incrementing the version), and the old response has not expired from the cache, the Infra Server will give the old response to the client. Subsequent client runs will receive the updated response. Default value: <code>false</code>.</p> </dd> <dt><code>opscode_erchef['cbv_cache_item_ttl']</code></dt> <dd> <p>The minimum time in milliseconds that Chef Infra Server will keep any given cookbook version response in the cache when when <code>cbv_cache_enabled</code> is enabled. Default value: <code>30000</code>. </p>
<div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> Be careful if increasing this number - requests for a given set of cookbook versions will be stale if the resolved cookbook versions are updated before the cache entry times out. This will not occur if you increment the version of a cookbook with every cookbook update, which is the recommended approach to updating cookbooks. </div> </div> </dd> </dl> <h3 id="elasticsearch-14">Elasticsearch</h3> <p>This configuration file has the following settings for <code>elasticsearch</code>:</p> <dl> <dt><code>elasticsearch['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>elasticsearch['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value: <code>/var/opt/opscode/elasticsearch</code></p> </dd> </dl> <p><code>elasticsearch['data_dir']</code></p> <p>:The paths used to store data. Default value: <code>/var/opt/opscode/elasticsearch/data</code></p> <dl> <dt><code>elasticsearch['plugins_directory']</code></dt> <dd> <p>The default location of the plugins directory depends on which package you install. Default value: <code>/var/opt/opscode/elasticsearch/plugins</code></p> </dd> </dl> <p><code>elasticsearch['scripts_directory']</code></p> <p>:The default location of the scripts directory depends on which package you install. Default value: <code>/var/opt/opscode/elasticsearch/scripts</code></p> <dl> <dt><code>elasticsearch['temp_directory']</code></dt> <dd> <p>By default, Elasticsearch uses a private temporary directory that the startup script creates immediately below the system temporary directory. Default value: <code>/var/opt/opscode/elasticsearch/tmp</code></p> </dd> <dt><code>elasticsearch['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value: <code>/var/log/opscode/elasticsearch</code></p> </dd> <dt><code>elasticsearch['log_rotation']['file_maxbytes']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed file_maxbytes. Default value for ‘file_maxbytes’: <code>104857600</code></p> </dd> <dt><code>elasticsearch['log_rotation']['num_to_keep']</code></dt> <dd> <p>The log rotation policy for this service. The maximum number of log files in the rotation is defined by num_to_keep. Default value for ‘num_to_keep’: =&gt; <code>10</code></p> </dd> <dt><code>elasticsearch['vip']</code></dt> <dd> <p>The virtual IP address for the machine on which Apache Solr is running. Default value: <code>127.0.0.1</code></p> </dd> <dt><code>elasticsearch['listen']</code></dt> <dd> <p>The IP address for the machine on which Apache Solr is running. Default value: <code>127.0.0.1</code></p> </dd> <dt><code>elasticsearch['port']</code></dt> <dd> <p>The port on which the service is to listen. Default value: <code>9200</code></p> </dd> <dt><code>elasticsearch['enable_gc_log']</code></dt> <dd> <p>Enable or disable GC logging. Default value: <code>false</code></p> </dd> <dt><code>elasticsearch['initial_cluster_join_timeout']</code></dt> <dd> <p>Default value: <code>90</code></p> </dd> <dt><code>elasticsearch['jvm_opts']</code></dt> <dd> <p>Default values are set based on <a href="https://github.com/elastic/elasticsearch/blob/6.8/distribution/src/config/jvm.options">JVM configuration options</a>.</p> </dd> </dl> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> <p>Each item in this list will be placed as is into the java_opts config file. Entries are set in chef-server.rb as:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"> elasticsearch<span style="color:#666">.</span>jvm_opts <span style="color:#666">=</span> <span style="color:#666">[</span>
  <span style="color:#4070a0">"-xoption1"</span>,
  <span style="color:#4070a0">"-xoption2"</span>,
  <span style="color:#666">...</span>
  <span style="color:#4070a0">"optionN"</span>
 <span style="color:#666">]</span>
</code></pre></div> </div> </div> <dl> <dt><code>elasticsearch['heap_size']</code></dt> <dd> <p>The amount of memory (in MBs) available to Elasticsearch. If there is not enough memory available, search queries made by nodes to Elasticsearch may fail. The amount of memory that must be available also depends on the number of nodes in the organization, the frequency of search queries, and other characteristics that are unique to each organization. In general, as the number of nodes increases, so does the amount of memory. The default value should work for many organizations with fewer than 25 nodes. For an organization with several hundred nodes, the amount of memory that is required often exceeds 3GB. Default value is is equivalent to 25% of the system memory or 1024 MB, whichever is greater.</p> </dd> </dl> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> If new_size or heap_size is also specified directly in java_opts, it will be ignored in favor of the chef-server.rb values or the defaults as calculated here. Only use chef-server.rb to set heap and new sizes. Learn more about <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/heap-size.html">Elasticsearch heap-size</a>. It will error out if the system memory is less than 4 GB. This value is bounded between 1 GB - 28 GB. </div> </div> <dl> <dt><code>elasticsearch['new_size']</code></dt> <dd> <p>Defaults to the larger of 1/16th the heap_size and 32 MB.</p> </dd> </dl> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> If new_size or heap_size is also specified directly in java_opts, it will be ignored in favor of the chef-server.rb values or the defaults as calculated here. Only use chef-server.rb to set heap and new sizes. Learn more about <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/heap-size.html">Elasticsearch heap-size documentation</a>. </div> </div> <h3 id="postgresql-14">postgresql</h3> The <strong>postgresql</strong> service is used to store node, object, and user data. <p>This configuration file has the following settings for <code>postgresql</code>:</p> <dl> <dt><code>postgresql['checkpoint_completion_target']</code></dt> <dd> <p>A completion percentage that is used to determine how quickly a checkpoint should finish in relation to the completion status of the next checkpoint. For example, if the value is <code>0.5</code>, then a checkpoint attempts to finish before 50% of the next checkpoint is done. Default value: <code>0.5</code>.</p> </dd> <dt><code>postgresql['checkpoint_segments']</code></dt> <dd> <p>The maximum amount (in megabytes) between checkpoints in log file segments. Default value: <code>3</code>.</p> </dd> <dt><code>postgresql['checkpoint_timeout']</code></dt> <dd> <p>The amount of time (in minutes) between checkpoints. Default value: <code>5min</code>.</p> </dd> <dt><code>postgresql['checkpoint_warning']</code></dt> <dd> <p>The frequency (in seconds) at which messages are sent to the server log files if checkpoint segments are being filled faster than their currently configured values. Default value: <code>30s</code>.</p> </dd> <dt><code>postgresql['data_dir']</code></dt> <dd> <p>The directory in which on-disk data is stored. The default value is the recommended value. Default value: <code>/var/opt/opscode/postgresql/#{node['private_chef']['postgresql']['version']}/data</code>.</p> </dd> <dt><code>postgresql['db_connection_superuser']</code></dt> <dd> <p>The PostgreSQL superuser name in <code>'username@hostname'</code> format (e.g. <code>'opscode_pgsql@my_postgresql.postgres.database.azure.com'</code>), where <code>username</code> would normally equal the value of <code>postgresql['db_superuser']</code> with any dashes replaced by underscores. This setting is <strong>required</strong> in an external Azure PostgreSQL database-as-a-service configuration. If set to <code>nil</code>, Chef Infra Server assumes that the database is not on Azure and the PostgreSQL connection will be made using the value specified in <code>postgresql['db_superuser']</code>. Default value: <code>nil</code>.</p> </dd> <dt><code>postgresql['db_superuser']</code></dt> <dd> <p>Default value: <code>opscode-pgsql</code>. If <code>username</code> is set, set <code>db_superuser</code> to the same value.</p> </dd> <dt><code>postgresql['db_superuser_password']</code></dt> <dd> <p>Password for the DB superuser. Default value: <strong>generated</strong>.</p> <p>To override the default value, use the <a href="../ctl_chef_server/index.html#secrets-management">Secrets Management</a> command: <code>chef-server-ctl set-db-superuser-password</code>.</p> </dd> <dt><code>postgresql['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value: <code>/var/opt/opscode/postgresql/#{node['private_chef']['postgresql']['version']}</code>.</p> </dd> <dt><code>postgresql['effective_cache_size']</code></dt> <dd> <p>The size of the disk cache that is used for data files. Default value: 50% of available RAM.</p> </dd> <dt><code>postgresql['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>postgresql['home']</code></dt> <dd> <p>The home directory for PostgreSQL. Default value: <code>/var/opt/opscode/postgresql</code>.</p> </dd> <dt><code>postgresql['keepalives_count']</code></dt> <dd> <p>The maximum number of keepalive proves that should be sent before dropping a connection. Default value: <code>2</code>.</p> </dd> <dt><code>postgresql['keepalives_idle']</code></dt> <dd> <p>The amount of time (in seconds) a connection must remain idle before keepalive probes will resume. Default value: <code>60</code>.</p> </dd> <dt><code>postgresql['keepalives_interval']</code></dt> <dd> <p>The amount of time (in seconds) between probes. Default value: <code>15</code>.</p> </dd> <dt><code>postgresql['listen_address']</code></dt> <dd> <p>The connection source to which PostgreSQL is to respond. Default value: <code>localhost</code>.</p> </dd> <dt><code>postgresql['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value: <code>/var/log/opscode/postgresql/#{node['private_chef']['postgresql']['version']}</code>.</p> </dd> <dt><code>postgresql['log_min_duration_statement']</code></dt> <dd> <p>When to log a slow PostgreSQL query statement. Possible values: <code>-1</code> (disabled, do not log any statements), <code>0</code> (log every statement), or an integer greater than zero. When the integer is greater than zero, this value is the amount of time (in milliseconds) that a query statement must have run before it is logged. Default value: <code>-1</code>.</p> </dd> <dt><code>postgresql['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value: <code>{ 'file_maxbytes' =&gt; 104857600, 'num_to_keep' =&gt; 10 }</code></p> </dd> <dt><code>postgresql['max_connections']</code></dt> <dd> <p>The maximum number of allowed concurrent connections. Default value: <code>350</code>.</p> </dd> <dt><code>postgresql['md5_auth_cidr_addresses']</code></dt> <dd> <p>Use instead of <code>trust_auth_cidr_addresses</code> to encrypt passwords using MD5 hashes. Default value: <code>[ '127.0.0.1/32', '::1/128' ]</code>.</p> </dd> <dt><code>postgresql['port']</code></dt> <dd> <p>The port on which the service is to listen. Default value: <code>5432</code>.</p> </dd> <dt><code>postgresql['shared_buffers']</code></dt> <dd> <p>The amount of memory that is dedicated to PostgreSQL for data caching. Default value: <code>#{(node['memory']['total'].to_i / 4) / (1024)}MB</code>.</p> </dd> <dt><code>postgresql['shell']</code></dt> <dd> <p>Default value: <code>/bin/sh</code>.</p> </dd> <dt><code>postgresql['shmall']</code></dt> <dd> <p>The total amount of available shared memory. Default value: <code>4194304</code>.</p> </dd> <dt><code>postgresql['shmmax']</code></dt> <dd> <p>The maximum amount of shared memory. Default value: <code>17179869184</code>.</p> </dd> <dt><code>postgresql['sslmode']</code></dt> <dd> <p>SSL encryption mode between the Chef Infra Server and PostgreSQL. Valid settings are <code>'disable'</code> and <code>'require'</code>. Default value: <code>'disable'</code>.</p> </dd> <dt><code>postgresql['trust_auth_cidr_addresses']</code></dt> <dd> <p>Use for clear-text passwords. See <code>md5_auth_cidr_addresses</code>. Default value: <code>'127.0.0.1/32', '::1/128'</code>.</p> </dd> <dt><code>postgresql['user_path']</code></dt> <dd> <p>Default value: <code>/opt/opscode/embedded/bin:/opt/opscode/bin:$PATH</code>.</p> </dd> <dt><code>postgresql['username']</code></dt> <dd> <p>The PostgreSQL account user name. Default value: <code>opscode-pgsql</code>. If setting this value, must set <code>db_superuser</code> to the same value.</p> </dd> <dt><code>postgresql['version']</code></dt> <dd> <p>The (currently) hardcoded version of PostgreSQL. Default value: <code>'9.2'</code>.</p> </dd> <dt><code>postgresql['vip']</code></dt> <dd> <p>The virtual IP address. Default value: <code>127.0.0.1</code>.</p> </dd> <dt><code>postgresql['work_mem']</code></dt> <dd> <p>The size (in megabytes) of allowed in-memory sorting. Default value: <code>8MB</code>.</p> </dd> <dt><code>postgresql['pg_upgrade_timeout']</code></dt> <dd> <p>The timeout value (in seconds) for PostgreSQL upgrade. Default value: <code>7200</code>.</p> </dd> </dl> <h3 id="redis_lb-14">redis_lb</h3> Key-value store used in conjunction with Nginx to route requests and populate request data used by the Chef Infra Server. <p>This configuration file has the following settings for <code>redis_lb</code>:</p> <dl> <dt><code>redis_lb['activerehashing']</code></dt> <dd> <p>Enable active rehashing. Default value: <code>'no'</code>.</p> </dd> <dt><code>redis_lb['aof_rewrite_min_size']</code></dt> <dd> <p>The minimum size of the append-only file. Only files larger than this value are rewritten. Default value: <code>'16mb'</code>.</p> </dd> <dt><code>redis_lb['aof_rewrite_percent']</code></dt> <dd> <p>The size of the current append-only file, as compared to the base size. The append-only file is rewritten when the current file exceeds the base size by this value. Default value: <code>'50'</code>.</p> </dd> <dt><code>redis_lb['appendfsync']</code></dt> <dd> <p>The frequency at which the operating system writes data on-disk, instead of waiting for more data. Possible values: <code>no</code> (don’t fsync, let operating system flush data), <code>always</code> (fsync after every write to the append-only log file), and <code>everysec</code> (fsync only once time per second). Default value: <code>'always'</code>.</p> </dd> <dt><code>redis_lb['appendonly']</code></dt> <dd> <p>Dump data asynchronously on-disk or to an append-only log file. Set to <code>yes</code> to dump data to an append-only log file. Default value: <code>'no'</code>.</p> </dd> <dt><code>redis_lb['bind']</code></dt> <dd> <p>Bind Redis to the specified IP address. Default value: <code>'127.0.0.1'</code>.</p> </dd> <dt><code>redis_lb['data_dir']</code></dt> <dd> <p>The directory in which on-disk data is stored. The default value is the recommended value. Default value: <code>'/var/opt/opscode/redis_lb/data'</code>.</p> </dd> <dt><code>redis_lb['databases']</code></dt> <dd> <p>The number of databases. Default value: <code>'16'</code>.</p> </dd> <dt><code>redis_lb['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value: <code>'/var/opt/opscode/redis_lb'</code>.</p> </dd> <dt><code>redis_lb['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>redis_lb['ha']</code></dt> <dd> <p>Run the Chef Infra Server in a high availability topology. When <code>topology</code> is set to <code>ha</code>, this setting defaults to <code>true</code>. Default value: <code>false</code>.</p> </dd> <dt><code>redis_lb['keepalive']</code></dt> <dd> <p>The amount of time (in seconds) to wait for requests on a connection. Default value: <code>'60'</code>.</p> </dd> <dt><code>redis_lb['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value: <code>'/var/log/opscode/redis_lb'</code>.</p> </dd> <dt><code>redis_lb['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">{ <span style="color:#4070a0">'file_maxbytes'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">104857600</span>, <span style="color:#4070a0">'num_to_keep'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">10</span> }
</code></pre></div>
</dd> <dt><code>redis_lb['loglevel']</code></dt> <dd> <p>The level of logging to be stored in a log file.. Possible values: <code>debug</code>, <code>notice</code>, <code>verbose</code>, and <code>warning</code>. Default value: <code>'notice'</code>.</p> </dd> <dt><code>redis_lb['maxmemory']</code></dt> <dd> <p>The maximum amount of memory (in bytes). Default value: <code>'8m'</code>.</p> </dd> <dt><code>redis_lb['maxmemory_policy']</code></dt> <dd> <p>The policy applied when the maximum amount of memory is reached. Possible values: <code>allkeys-lru</code> (remove keys, starting with those used least frequently), <code>allkeys-random</code> (remove keys randomly), <code>noeviction</code> (don’t expire, return an error on write operation), <code>volatile-lru</code> (remove expired keys, starting with those used least frequently), <code>volatile-random</code> (remove expired keys randomly), and <code>volatile-ttl</code> (remove keys, starting with nearest expired time). Default value: <code>'noeviction'</code>.</p> </dd> <dt><code>redis_lb['port']</code></dt> <dd> <p>The port on which the service is to listen. Default value: <code>'16379'</code>.</p> </dd> <dt><code>redis_lb['save_frequency']</code></dt> <dd> <p>Set the save frequency. Pattern: <code>{ "seconds" =&gt; "keys", "seconds" =&gt; "keys", "seconds" =&gt; "keys" }</code>. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">{ <span style="color:#4070a0">'900'</span> <span style="color:#666">=&gt;</span> <span style="color:#4070a0">'1'</span>, <span style="color:#4070a0">'300'</span> <span style="color:#666">=&gt;</span> <span style="color:#4070a0">'10'</span>, <span style="color:#4070a0">'60'</span> <span style="color:#666">=&gt;</span> <span style="color:#4070a0">'1000'</span> }
</code></pre></div>
<p>Which saves the database every 15 minutes if at least one key changes, every 5 minutes if at least 10 keys change, and every 60 seconds if 10000 keys change.</p> </dd> <dt><code>redis_lb['timeout']</code></dt> <dd> <p>The amount of time (in seconds) a client may be idle before timeout. Default value: <code>'300'</code>.</p> </dd> <dt><code>redis_lb['vip']</code></dt> <dd> <p>The virtual IP address. Default value: <code>'127.0.0.1'</code>.</p> </dd> <dt><code>redis_lb['password']</code></dt> <dd> <p>Legacy configuration setting for the Redis password. Default value: <strong>generated</strong>.</p> <p>To override the default value, use the <a href="../ctl_chef_server/index.html#secrets-management">Secrets Management</a> command: <code>chef-server-ctl set-secret redis_lb password</code>.</p> </dd> </dl> <h3 id="upgrades-14">upgrades</h3> <p>This configuration file has the following settings for <code>upgrades</code>:</p> <dl> <dt><code>upgrades['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value: <code>'/var/opt/opscode/upgrades'</code>.</p> </dd> </dl> <h3 id="user-14">user</h3> <p>This configuration file has the following settings for <code>user</code>:</p> <dl> <dt><code>user['home']</code></dt> <dd> <p>The home directory for the user under which Chef Infra Server services run. Default value: <code>/opt/opscode/embedded</code>.</p> </dd> <dt><code>user['shell']</code></dt> <dd> <p>The shell for the user under which Chef Infra Server services run. Default value: <code>/bin/sh</code>.</p> </dd> <dt><code>user['username']</code></dt> <dd> <p>The user name under which Chef Infra Server services run. Default value: <code>opscode</code>.</p> </dd> </dl> <h3 id="required_recipe-14">required_recipe</h3> <p><code>required_recipe</code> is a feature that allows an administrator to specify a recipe that will be run by all Chef Infra Clients that connect to it, regardless of the node’s run list. This feature is targeted at expert level practitioners who are delivering isolated configuration changes to the target systems, such as self-contained agent software. Further explanation of the feature can be found in <a href="https://github.com/chef/chef/blob/main/docs/dev/design_documents/server_enforced_recipes.md">Chef Infra Client Development Docs</a>.</p> <p>This configuration file has the following settings for <code>required_recipe</code>:</p> <dl> <dt><code>required_recipe["enable"]</code></dt> <dd> <p>Whether the feature is enabled. Default value: <code>false</code>.</p> </dd> <dt><code>required_recipe["path"]</code></dt> <dd> <p>The location of the recipe to serve. The file must be owned by the root user and group, and may not be group or world-writeable. Default value: <code>nil</code>.</p> </dd> </dl> </div> <div class="chef-product-version chef-server_13_2"> <div class="chef-product-version-not-newest"> <p><strong>Note:</strong> You are viewing documentation for an older version of <span class="chef-product-version-name">Chef Infra Server</span>.</p> </div> <p data-swiftype-index="false"> <a href="https://github.com/chef/chef-server/blob/main/docs-chef-io/content/server/v13_2/config_rb_server_optional_settings.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> The <code>/etc/opscode/chef-server.rb</code> file contains all of the non-default configuration settings used by the Chef Infra Server. The default settings are built into the Chef Infra Server configuration and should only be added to the <code>chef-server.rb</code> file to apply non-default values. These configuration settings are processed when the <code>chef-server-ctl reconfigure</code> command is run. The <code>chef-server.rb</code> file is a Ruby file, which means that conditional statements can be used within it. <h2 id="settings-13_2">Settings</h2> <p>The following sections describe the various settings that are available in the chef-server.rb file.</p> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> <p>When changes are made to the chef-server.rb file the Chef Infra Server must be reconfigured by running the following command:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef-server-ctl reconfigure
</code></pre></div> </div> </div> <h3 id="general-13_2">General</h3> <p>This configuration file has the following general settings:</p> <dl> <dt><code>addons['install']</code></dt> <dd> <p>Default value: <code>false</code>.</p> </dd> <dt><code>addons['path']</code></dt> <dd> <p>Default value: <code>nil</code>.</p> </dd> <dt><code>addons['packages']</code></dt> <dd> <p>Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#c65d09">%w{chef-manage}</span>
</code></pre></div>
</dd> <dt><code>api_version</code></dt> <dd> <p>The version of the Chef Infra Server. Default value: <code>'12.0.0'</code>.</p> </dd> <dt><code>default_orgname</code></dt> <dd> <p>The <code>ORG_NAME</code> part of the <code>/organizations</code> endpoint in Chef Infra Server.</p> </dd> <dt><code>flavor</code></dt> <dd> <p>Default value: <code>'cs'</code>.</p> </dd> <dt><code>fips</code></dt> <dd> <p>Set to <code>true</code> to run the server in FIPS compliance mode. Set to <code>false</code> to force the server to run without FIPS compliance mode. Default: The kernel configuration FIPS value.</p> </dd> </dl> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> Chef Infra Server versions earlier than 14.5 that are configured with <code>nginx['enable_non_ssl'] = false</code> and <code>fips = true</code> require <code>export CSC_LB_URL=https://127.0.0.1</code> to run the command <code>chef-server-ctl reindex &lt;options&gt;</code> </div> </div> <div id="config_rb_server_insecure_addon_compat" markdown="1"> <dl> <dt><code>insecure_addon_compat</code></dt> <dd> <p>Set to <code>true</code> to keep Chef Infra Server compatible with older add-on versions by rendering secrets and credentials to <code>/etc/opscode/chef-server-running.json</code> and other files in <code>/etc/opscode/</code>. When set to <code>false</code>, secrets are <strong>only</strong> written to <code>/etc/opscode/private-chef-secrets.json</code> and <strong>not</strong> to any other files. Default value: <code>true</code>.</p> <p>See <a href="../server_security/index.html#add-on-compatibility">Add-on Compatibility</a> for the minimum add-on versions supporting <code>insecure_addon_compat false</code>.</p> </dd> <dt><code>install_path</code></dt> <dd> <p>The directory in which the Chef Infra Server is installed. Default value: <code>'/opt/opscode'</code>.</p> </dd> <dt><code>from_email</code></dt> <dd> <p>The email address from which invitations to the Chef management console are sent. Default value: <code>'"Opscode" &lt;donotreply@chef.io&gt;'</code>.</p> </dd> <dt><code>license['nodes']</code></dt> <dd> <p>The number of licensed nodes. Default value: <code>25</code>.</p> </dd> <dt><code>license['upgrade_url']</code></dt> <dd> <p>The URL to visit for more information about how to update the number of nodes licensed for an organization. Default value: <code>https://www.chef.io/pricing'</code>.</p> </dd> <dt><code>notification_email</code></dt> <dd> <p>The email addressed to which email notifications are sent. Default value: <code>'pc-default@opscode.com'</code>.</p> </dd> <dt><code>role</code></dt> <dd> <p>The configuration type of the Chef Infra Server. Possible values: <code>backend</code>, <code>frontend</code>, or <code>standalone</code>. Default value: <code>'standalone'</code>.</p> </dd> <dt><code>topology</code></dt> <dd> <p>The topology of the Chef Infra Server. Possible values: <code>manual</code>, <code>standalone</code>, and <code>tier</code>. Default value: <code>'standalone'</code>.</p> </dd> </dl> </div> <h3 id="bookshelf-13_2">bookshelf</h3> The <strong>bookshelf</strong> service is an Amazon Simple Storage Service (S3)-compatible service that is used to store cookbooks, including all of the files—recipes, templates, and so on—that are associated with each cookbook. <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> To <a href="../index.html#aws-settings">configure the server for external cookbook storage</a>, updates are made to settings for both the <strong>bookshelf</strong> and <strong>opscode-erchef</strong> services. </div> </div> <p>This configuration file has the following settings for <code>bookshelf</code>:</p> <dl> <dt><code>bookshelf['access_key_id']</code></dt> <dd> <p>Deprecated. Use <code>chef-server-ctl set-secret bookshelf access_key_id</code> from the <a href="../ctl_chef_server/index.html#secrets-management">Secrets Management</a> commands.</p> <p>The access key identifier. This may point at an external storage location, such as Amazon EC2. See <a href="../index.html#aws-settings">AWS external bookshelf settings</a> for more information on configuring external bookshelf. Default value: <strong>generated</strong>.</p> </dd> <dt><code>bookshelf['data_dir']</code></dt> <dd> <p>The directory in which on-disk data is stored. The default value is the recommended value. Default value: <code>/var/opt/opscode/bookshelf/data</code>.</p> </dd> <dt><code>bookshelf['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value: <code>/var/opt/opscode/bookshelf</code>.</p> </dd> <dt><code>bookshelf['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>bookshelf['enable_request_logging']</code></dt> <dd> <p>Use to configure request logging for the bookshelf service. Default value: <code>false</code>.</p> </dd> <dt><code>bookshelf['external_url']</code></dt> <dd> <p>The base URL to which the service is to return links to API resources. Use <code>:host_header</code> to ensure the URL is derived from the host header of the incoming HTTP request. Default value: <code>:host_header</code>.</p> </dd> <dt><code>bookshelf['listen']</code></dt> <dd> <p>The IP address on which the service is to listen. Default value: <code>127.0.0.1</code>.</p> </dd> <dt><code>bookshelf['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value: <code>/var/log/opscode/bookshelf</code>.</p> </dd> <dt><code>bookshelf['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">{ <span style="color:#4070a0">'file_maxbytes'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">104857600</span>, <span style="color:#4070a0">'num_to_keep'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">10</span> }
</code></pre></div>
</dd> <dt><code>bookshelf['port']</code></dt> <dd> <p>The port on which the service is to listen. Default value: <code>4321</code>.</p> </dd> <dt><code>bookshelf['secret_access_key']</code></dt> <dd> <p>Deprecated. Use <code>chef-server-ctl set-secret bookshelf secret_access_key</code> from the <a href="../ctl_chef_server/index.html#secrets-management">Secrets Management</a> commands.</p> <p>The secret key. This may point at an external storage location, such as Amazon EC2. See <a href="../index.html#aws-settings">AWS external bookshelf settings</a> for more information on configuring external bookshelf. Default value: <strong>generated</strong>.</p> </dd> <dt><code>bookshelf['storage_type']</code></dt> <dd> <p>Determines where cookbooks are stored. Default value: <code>:filesystem</code>.</p> <p>In instances that require cookbooks to be stored within a SQL backend, such as in a high availability setup, you must set <code>storage_type</code> to <code>:sql</code>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">bookshelf<span style="color:#666">[</span><span style="color:#4070a0">'storage_type'</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#517918">:sql</span>
</code></pre></div>
</dd> <dt><code>bookshelf['stream_download']</code></dt> <dd> <p>Enable stream downloading of cookbooks. This setting (when <code>true</code>) typically results in improved cookbook download performance, especially with the memory usage of the <strong>bookshelf</strong> service and the behavior of load balancers and proxies in-between Chef Infra Client and the Chef Infra Server. Default value: <code>true</code>.</p> </dd> <dt><code>bookshelf['sql_connection_user']</code></dt> <dd> <p>The PostgreSQL user name in <code>'username@hostname'</code> format (e.g. <code>'bookshelf@my_postgresql.postgres.database.azure.com'</code>), where <code>username</code> would normally equal the value of <code>bookshelf['sql_user']</code> (default: <code>'bookshelf'</code>). This setting is <strong>required</strong> in an external Azure PostgreSQL database-as-a-service configuration. If set to <code>nil</code>, Chef Infra Server assumes that the database is not on Azure and the PostgreSQL connection will be made using the value specified in <code>bookshelf['sql_user']</code>. Default value: <code>nil</code>.</p> </dd> <dt><code>bookshelf['vip']</code></dt> <dd> <p>The virtual IP address. This may point at an external storage location, such as Amazon EC2. See <a href="../index.html#aws-settings">AWS external bookshelf settings</a> for more information on configuring external bookshelf. Default value: <code>127.0.0.1</code>.</p> </dd> </dl> <h3 id="bootstrap-13_2">bootstrap</h3> <p>This configuration file has the following settings for <code>bootstrap</code>:</p> <dl> <dt><code>bootstrap['enable']</code></dt> <dd> <p>Indicates whether an attempt to bootstrap the Chef Infra Server is made. Generally only enabled on systems that have bootstrap enabled via a <code>server</code> entry. Default value: <code>true</code>.</p> </dd> </dl> <h3 id="compliance-forwarding-13_2">compliance forwarding</h3> <p>The configuration file has the following settings for forwarding <code>compliance</code> requests using the chef server authentication system.</p> <dl> <dt><code>profiles['root_url']</code></dt> <dd> <p>If set, any properly signed requests arriving at <code>/organizations/ORGNAME/owners/OWNER/compliance</code> will be forwarded to this URL. This is expected to be a fully qualified resource, e.g. <code>http://compliance.example.org/owners/OWNER/compliance</code>.</p> </dd> </dl> <h3 id="dark_launch-13_2">dark_launch</h3> <p>This configuration file has the following settings for <code>dark_launch</code>:</p> <dl> <dt><code>dark_launch['actions']</code></dt> <dd> <p>Enable Chef actions. Default value: <code>true</code>.</p> </dd> <dt><code>dark_launch['add_type_and_bag_to_items']</code></dt> <dd> <p>Default value: <code>true</code>.</p> </dd> <dt><code>dark_launch['new_theme']</code></dt> <dd> <p>Default value: <code>true</code>.</p> </dd> <dt><code>dark_launch['private-chef']</code></dt> <dd> <p>Default value: <code>true</code>.</p> </dd> <dt><code>dark_launch['quick_start']</code></dt> <dd> <p>Default value: <code>false</code>.</p> </dd> <dt><code>dark_launch['reporting']</code></dt> <dd> <p>Enable Reporting, which performs data collection during a Chef Infra Client run. Default value: <code>true</code>.</p> </dd> <dt><code>dark_launch['sql_users']</code></dt> <dd> <p>Default value: <code>true</code>.</p> </dd> </dl> <h3 id="data_collector-13_2">data_collector</h3> <p>This configuration file has the following settings for <code>data_collector</code>:</p> <dl> <dt><code>data_collector['root_url']</code></dt> <dd> <p>The fully qualified URL to the data collector server API. When present, it will enable the data collector in <strong>opscode-erchef</strong>. This also enables Chef Infra Server authenticated forwarding any properly signed requests arriving at <code>/organizations/ORGNAME/data-collector</code> to this URL with the data collector token appended. This is also target for requests authenticated and forwarded by the <code>/organizations/ORGNAME/data-collector</code> endpoint. For the forwarding to work correctly the <code>data_collector['token']</code> field must also be set. For example, if the data collector in Chef Automate is being used, the URI would look like: <code>http://my_automate_server.example.org/data-collector/v0/</code>.</p> </dd> <dt><code>data_collector['proxy']</code></dt> <dd> <p>If set to <code>true</code>, Chef Infra Server will proxy all requests sent to <code>/data-collector</code> to the configured Chef Automate <code>data_collector['root_url']</code>. Note that <em>this route</em> does not check the request signature and add the right data_collector token, but just proxies the Automate endpoint <strong>as-is</strong>. Default value: <code>nil</code>.</p> </dd> <dt><code>data_collector['token']</code></dt> <dd> <p>Deprecated. Use <code>chef-server-ctl set-secret data_collector token</code> from the <a href="../ctl_chef_server/index.html#secrets-management">Secrets Management</a> commands.</p> <p>Legacy configuration for shared data collector security token. When configured, the token will be passed as an HTTP header named <code>x-data-collector-token</code> which the server can choose to accept or reject.</p> </dd> <dt><code>data_collector['timeout']</code></dt> <dd> <p>The amount of time (in milliseconds) before a request to the data collector API times out. Default value: <span class="title-ref">30000</span>.</p> </dd> <dt><code>data_collector['http_init_count']</code></dt> <dd> <p>The initial worker count for the HTTP connection pool that is used by the data collector. Default value: <span class="title-ref">25</span>.</p> </dd> <dt><code>data_collector['http_max_count']</code></dt> <dd> <p>The maximum worker count for the HTTP connection pool that is used by the data collector. Default value: <span class="title-ref">100</span>.</p> </dd> <dt><code>data_collector['http_max_age']</code></dt> <dd> <p>The maximum connection worker age (in seconds) for the HTTP connection pool that is used by the data collector. Default value: <span class="title-ref">"{70, sec}"</span>.</p> </dd> <dt><code>data_collector['http_cull_interval']</code></dt> <dd> <p>The maximum cull interval (in minutes) for the HTTP connection pool that is used by the data collector. Default value: <span class="title-ref">"{1, min}"</span>.</p> </dd> <dt><code>data_collector['http_max_connection_duration']</code></dt> <dd> <p>The maximum connection duration (in seconds) for the HTTP connection pool that is used by the data collector. Default value: <span class="title-ref">"{70, sec}"</span>.</p> </dd> <dt><code>data_collector['ibrowse_options']</code></dt> <dd> <p>An array of comma-separated key-value pairs of ibrowse options for the HTTP connection pool that is used by the data collector. Default value: <span class="title-ref">"[{connect_timeout, 10000}]"</span>.</p> </dd> <dt><code>data_collector['health_check']</code></dt> <dd> <p>A boolean that controls whether the data collector health is included in the overall health at the <code>_status</code> endpoint. When set to <code>true</code>, Chef Infra Server will report that healthy front end Chef HA cluster members have failed when the <span class="title-ref">data_collector[‘root_url’]</span><span class="title-ref"> cannot be reached. As a result, the load balancer will remove those members from the load balancer pool. Default value: </span><span class="title-ref">true</span>`.</p> </dd> </dl> <h3 id="estatsd-13_2">estatsd</h3> <p>This configuration file has the following settings for <code>estatsd</code>:</p> <dl> <dt><code>estatsd['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value: <code>'/var/opt/opscode/estatsd'</code>.</p> </dd> <dt><code>estatsd['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>estatsd['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value: <code>'/var/log/opscode/estatsd'</code>.</p> </dd> <dt><code>estatsd['port']</code></dt> <dd> <p>The port on which the service is to listen. Default value: <code>9466</code>.</p> </dd> <dt><code>estatsd['protocol']</code></dt> <dd> <p>Use to send application statistics with StatsD protocol formatting. Set this value to <code>statsd</code> to apply StatsD protocol formatting.</p> </dd> <dt><code>estatsd['vip']</code></dt> <dd> <p>The virtual IP address. Default value: <code>'127.0.0.1'</code>.</p> </dd> </dl> <h3 id="jetty-13_2">jetty</h3> <p>This configuration file has the following settings for <code>jetty</code>:</p> <dl> <dt><code>jetty['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>'false'</code>. This value should not be modified.</p> </dd> <dt><code>jetty['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#4070a0">'/var/opt/opscode/opscode-solr4/jetty/logs'</span>
</code></pre></div>
</dd> </dl> <h3 id="lb--lb_internal-13_2">lb / lb_internal</h3> <p>This configuration file has the following settings for <code>lb</code>:</p> <dl> <dt><code>lb['api_fqdn']</code></dt> <dd> <p>Default value: <code>node['fqdn']</code>.</p> </dd> <dt><code>lb['ban_refresh_interval']</code></dt> <dd> <p>Default value: <code>600</code>.</p> </dd> <dt><code>lb['bookshelf']</code></dt> <dd> <p>Default value: <code>127.0.0.1</code>.</p> </dd> <dt><code>lb['cache_cookbook_files']</code></dt> <dd> <p>Default value: <code>false</code>.</p> </dd> <dt><code>lb['chef_max_version']</code></dt> <dd> <p>The maximum version of Chef Infra Client that is allowed to access the Chef Infra Server via the Chef Infra Server API. Default value: <code>11</code>.</p> </dd> <dt><code>lb['chef_min_version']</code></dt> <dd> <p>The minimum version of Chef Infra Client that is allowed to access the Chef Infra Server via the Chef Infra Server API. Default value: <code>10</code>.</p> </dd> <dt><code>lb['chef_server_webui']</code></dt> <dd> <p>Default value: <code>127.0.0.1</code>.</p> </dd> <dt><code>lb['debug']</code></dt> <dd> <p>Default value: <code>false</code>.</p> </dd> <dt><code>lb['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>lb['erchef']</code></dt> <dd> <p>Default value: <code>127.0.0.1</code>.</p> </dd> <dt><code>lb['maint_refresh_interval']</code></dt> <dd> <p>Default value: <code>600</code>.</p> </dd> <dt><code>lb['redis_connection_pool_size']</code></dt> <dd> <p>Default value: <code>250</code>.</p> </dd> <dt><code>lb['redis_connection_timeout']</code></dt> <dd> <p>The amount of time (in milliseconds) to wait before timing out. Default value: <code>1000</code>.</p> </dd> <dt><code>lb['redis_keepalive_timeout']</code></dt> <dd> <p>The amount of time (in milliseconds) to wait before timing out. Default value: <code>2000</code>.</p> </dd> <dt><code>lb['upstream']['bookshelf']</code></dt> <dd> <p>The default value is the recommended value. Default value: <code>[ '127.0.0.1' ]</code>.</p> </dd> <dt><code>lb['upstream']['oc_bifrost']</code></dt> <dd> <p>The default value is the recommended value. Default value: <code>[ '127.0.0.1' ]</code>.</p> </dd> <dt><code>lb['upstream']['opscode_erchef']</code></dt> <dd> <p>The default value is the recommended value. Default value: <code>[ '127.0.0.1' ]</code>.</p> </dd> <dt><code>lb['upstream']['opscode_solr4']</code></dt> <dd> <p>The default value is the recommended value. Default value: <code>[ '127.0.0.1' ]</code>.</p> </dd> <dt><code>lb['vip']</code></dt> <dd> <p>The virtual IP address. Default value: <code>127.0.0.1</code>.</p> </dd> <dt><code>lb['web_ui_fqdn']</code></dt> <dd> <p>Default value: <code>node['fqdn']</code>.</p> </dd> <dt><code>lb['xdl_defaults']['503_mode']</code></dt> <dd> <p>The default value is the recommended value. Default value: <code>false</code>.</p> </dd> <dt><code>lb['xdl_defaults']['couchdb_acls']</code></dt> <dd> <p>The default value is the recommended value. Default value: <code>true</code>.</p> </dd> <dt><code>lb['xdl_defaults']['couchdb_association_requests']</code></dt> <dd> <p>The default value is the recommended value. Default value: <code>true</code>.</p> </dd> <dt><code>lb['xdl_defaults']['couchdb_associations']</code></dt> <dd> <p>The default value is the recommended value. Default value: <code>true</code>.</p> </dd> <dt><code>lb['xdl_defaults']['couchdb_containers']</code></dt> <dd> <p>The default value is the recommended value. Default value: <code>true</code>.</p> </dd> <dt><code>lb['xdl_defaults']['couchdb_groups']</code></dt> <dd> <p>The default value is the recommended value. Default value: <code>true</code>.</p> </dd> <dt><code>lb['xdl_defaults']['couchdb_organizations']</code></dt> <dd> <p>The default value is the recommended value. Default value: <code>true</code>.</p> </dd> </dl> <p>And for the internal load balancers:</p> <dl> <dt><code>lb_internal['account_port']</code></dt> <dd> <p>Default value: <code>9685</code>.</p> </dd> <dt><code>lb_internal['chef_port']</code></dt> <dd> <p>Default value: <code>9680</code>.</p> </dd> <dt><code>lb_internal['enable']</code></dt> <dd> <p>Default value: <code>true</code>.</p> </dd> <dt><code>lb_internal['oc_bifrost_port']</code></dt> <dd> <p>Default value: <code>9683</code>.</p> </dd> <dt><code>lb_internal['vip']</code></dt> <dd> <p>The virtual IP address. Default value: <code>'127.0.0.1'</code>.</p> </dd> </dl> <h3 id="ldap-13_2">ldap</h3>  <div class="admonition-warning"> <p class="admonition-warning-title">Warning</p> <div class="admonition-warning-text"> <p>The following settings <strong>MUST</strong> be in the config file for LDAP authentication to Active Directory to work:</p> <ul> <li><code>base_dn</code></li> <li><code>bind_dn</code></li> <li><code>group_dn</code></li> <li><code>host</code></li> </ul> <p>If those settings are missing, you will get authentication errors and be unable to proceed.</p> </div> </div> <p>This configuration file has the following settings for <code>ldap</code>:</p> <dl> <dt><code>ldap['base_dn']</code></dt> <dd> <p>The root LDAP node under which all other nodes exist in the directory structure. For Active Directory, this is typically <code>cn=users</code> and then the domain. For example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#4070a0">'OU=Employees,OU=Domain users,DC=example,DC=com'</span>
</code></pre></div>
<p>Default value: <code>nil</code>.</p> </dd> <dt><code>ldap['bind_dn']</code></dt> <dd> <p>The distinguished name used to bind to the LDAP server. The user the Chef Infra Server will use to perform LDAP searches. This is often the administrator or manager user. This user needs to have read access to all LDAP users that require authentication. The Chef Infra Server must do an LDAP search before any user can log in. Many Active Directory and LDAP systems do not allow an anonymous bind. If anonymous bind is allowed, leave the <code>bind_dn</code> and <code>bind_password</code> settings blank. If anonymous bind is not allowed, a user with <code>READ</code> access to the directory is required. This user must be specified as an LDAP distinguished name similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#4070a0">'CN=user,OU=Employees,OU=Domainuser,DC=example,DC=com'</span>
</code></pre></div>
<div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> <p>If you need to escape characters in a distinguished name, such as when using Active Directory, they must be <a href="https://social.technet.microsoft.com/wiki/contents/articles/5312.active-directory-characters-to-escape.aspx">escaped with a backslash escape character</a>.</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#4070a0">'CN=example\\user,OU=Employees,OU=Domainuser,DC=example,DC=com'</span>
</code></pre></div>
</div> </div> <p>Default value: <code>nil</code>.</p> </dd> <dt><code>ldap['bind_password']</code></dt> <dd> <p>Deprecated. Use <code>chef-server-ctl set-secret ldap bind_password</code> from the <a href="../../ctl_chef_server.html#ctl-chef-server-secrets-management">Secrets Management</a> commands.</p> <p>Legacy configuration for the password of the binding user. The password for the user specified by <code>ldap['bind_dn']</code>. Leave this value and <code>ldap['bind_dn']</code> unset if anonymous bind is sufficient. Default value: <code>nil</code>.</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef-server-ctl set-secret ldap bind_password
Enter ldap bind_password:    <span style="color:#666">(</span>no terminal output<span style="color:#666">)</span>
Re-enter ldap bind_password: <span style="color:#666">(</span>no terminal output<span style="color:#666">)</span>
</code></pre></div>
<p>Remove a set password via</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef-server-ctl remove-secret ldap bind_password
</code></pre></div>
</dd> <dt><code>ldap['group_dn']</code></dt> <dd> <p>The distinguished name for a group. When set to the distinguished name of a group, only members of that group can log in. This feature filters based on the <code>memberOf</code> attribute and only works with LDAP servers that provide such an attribute. In OpenLDAP, the <code>memberOf</code> overlay provides this attribute. For example, if the value of the <code>memberOf</code> attribute is <code>CN=abcxyz,OU=users,DC=company,DC=com</code>, then use:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">ldap<span style="color:#666">[</span><span style="color:#4070a0">'group_dn'</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#4070a0">'CN=abcxyz,OU=users,DC=company,DC=com'</span>
</code></pre></div>
</dd> <dt><code>ldap['host']</code></dt> <dd> <p>The name (or IP address) of the LDAP server. The hostname of the LDAP or Active Directory server. Be sure the Chef Infra Server is able to resolve any host names. Default value: <code>ldap-server-host</code>.</p> </dd> <dt><code>ldap['login_attribute']</code></dt> <dd> <p>The LDAP attribute that holds the user’s login name. Use to specify the Chef Infra Server user name for an LDAP user. Default value: <code>sAMAccountName</code>.</p> </dd> <dt><code>ldap['port']</code></dt> <dd> <p>An integer that specifies the port on which the LDAP server listens. The default value is an appropriate value for most configurations. Default value: <code>389</code> or <code>636</code> when <code>ldap['encryption']</code> is set to <code>:simple_tls</code>.</p> </dd> <dt><code>ldap['ssl_enabled']</code></dt> <dd> <p>Cause the Chef Infra Server to connect to the LDAP server using SSL. Default value: <code>false</code>. Must be <code>false</code> when <code>ldap['tls_enabled']</code> is <code>true</code>.</p> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> <p>It’s recommended that you enable SSL for Active Directory.</p> </div> </div> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> <p>Previous versions of the Chef Infra Server used the <code>ldap['ssl_enabled']</code> setting to first enable SSL, and then the <code>ldap['encryption']</code> setting to specify the encryption type. These settings are deprecated.</p> </div> </div> </dd> <dt><code>ldap['system_adjective']</code></dt> <dd> <p>A descriptive name for the login system that is displayed to users in the Chef Infra Server management console. If a value like “corporate” is used, then the Chef management console user interface will display strings like “the corporate login server”, “corporate login”, or “corporate password.” Default value: <code>AD/LDAP</code>.</p> <div class="admonition-warning"> <p class="admonition-warning-title">Warning</p> <div class="admonition-warning-text"> <p>This setting is <strong>not</strong> used by the Chef Infra Server. It is used only by the Chef management console.</p> </div> </div> </dd> <dt><code>ldap['timeout']</code></dt> <dd> <p>The amount of time (in seconds) to wait before timing out. Default value: <code>60000</code>.</p> </dd> <dt><code>ldap['tls_enabled']</code></dt> <dd> <p>Enable TLS. When enabled, communication with the LDAP server is done via a secure SSL connection on a dedicated port. When <code>true</code>, <code>ldap['port']</code> is also set to <code>636</code>. Default value: <code>false</code>. Must be <code>false</code> when <code>ldap['ssl_enabled']</code> is <code>true</code>.</p> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> <p>Previous versions of the Chef Infra Server used the <code>ldap['ssl_enabled']</code> setting to first enable SSL, and then the <code>ldap['encryption']</code> setting to specify the encryption type. These settings are deprecated.</p> </div> </div> </dd> </dl> <h3 id="nginx-13_2">nginx</h3> <p>This configuration file has the following settings for <code>nginx</code>:</p> <dl> <dt><code>nginx['cache_max_size']</code></dt> <dd> <p>The <code>max_size</code> parameter used by the Nginx cache manager, which is part of the <code>proxy_cache_path</code> directive. When the size of file storage exceeds this value, the Nginx cache manager removes the least recently used data. Default value: <code>5000m</code>.</p> </dd> <dt><code>nginx['client_max_body_size']</code></dt> <dd> <p>The maximum accepted body size for a client request, as indicated by the <code>Content-Length</code> request header. Default value: <code>250m</code>.</p> </dd> <dt><code>nginx['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value: <code>/var/opt/opscode/nginx</code>.</p> </dd> <dt><code>nginx['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>nginx['enable_ipv6']</code></dt> <dd> <p>Enable Internet Protocol version 6 (IPv6) addresses. Default value: <code>false</code>.</p> </dd> <dt><code>nginx['enable_non_ssl']</code></dt> <dd> <p>Allow port 80 redirects to port 443. When this value is set to <code>true</code>, load balancers on the front-end hardware are allowed to do SSL termination of the WebUI and API. Default value: <code>false</code>.</p> </dd> </dl> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> Chef Infra Server versions earlier than 14.5 configured with <code>nginx['enable_non_ssl'] = false</code> and <code>fips = true</code> require <code>export CSC_LB_URL=https://127.0.0.1</code> to run the command <code>chef-server-ctl reindex &lt;options&gt;</code> </div> </div> <dl> <dt><code>nginx['enable_stub_status']</code></dt> <dd> <p>Enables the Nginx <code>stub_status</code> module. See <code>nginx['stub_status']['allow_list']</code>, <code>nginx['stub_status']['listen_host']</code>, <code>nginx['stub_status']['listen_port']</code>, and <code>nginx['stub_status']['location']</code>. Default value: <code>true</code>.</p> </dd> <dt><code>nginx['gzip']</code></dt> <dd> <p>Enable gzip compression. Default value: <code>on</code>.</p> </dd> <dt><code>nginx['gzip_comp_level']</code></dt> <dd> <p>The compression level used with gzip, from least amount of compression (<code>1</code>, fastest) to the most (<code>2</code>, slowest). Default value: <code>2</code>.</p> </dd> <dt><code>nginx['gzip_http_version']</code></dt> <dd> <p>Enable gzip depending on the version of the HTTP request. Default value: <code>1.0</code>.</p> </dd> <dt><code>nginx['gzip_proxied']</code></dt> <dd> <p>The type of compression used based on the request and response. Default value: <code>any</code>.</p> </dd> <dt><code>nginx['gzip_types']</code></dt> <dd> <p>Enable compression for the specified MIME-types. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#666">[</span> <span style="color:#4070a0">'text/plain'</span>,
  <span style="color:#4070a0">'text/css'</span>,
  <span style="color:#4070a0">'application/x-javascript'</span>,
  <span style="color:#4070a0">'text/xml'</span>, <span style="color:#4070a0">'application/xml'</span>,
  <span style="color:#4070a0">'application/xml+rss'</span>,
  <span style="color:#4070a0">'text/javascript'</span>,
  <span style="color:#4070a0">'application/json'</span>
  <span style="color:#666">]</span>
</code></pre></div>
</dd> <dt><code>nginx['keepalive_timeout']</code></dt> <dd> <p>The amount of time (in seconds) to wait for requests on a HTTP keepalive connection. Default value: <code>65</code>.</p> </dd> <dt><code>nginx['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value: <code>/var/log/opscode/nginx</code>.</p> </dd> <dt><code>nginx['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value: <code>{ 'file_maxbytes' =&gt; 104857600, 'num_to_keep' =&gt; 10 }</code></p> </dd> <dt><code>nginx['log_x_forwarded_for']</code></dt> <dd> <p>Log $http_x_forwarded_for (“X-Forwarded-For”) instead of $remote_addr if <code>true</code>. Default value <code>false</code>.</p> </dd> <dt><code>nginx['non_ssl_port']</code></dt> <dd> <p>The port on which the WebUI and API are bound for non-SSL connections. Default value: <code>80</code>. Use <code>nginx['enable_non_ssl']</code> to enable or disable SSL redirects on this port number. Set to <code>false</code> to disable non-SSL connections.</p> </dd> <dt><code>nginx['sendfile']</code></dt> <dd> <p>Copy data between file descriptors when <code>sendfile()</code> is used. Default value: <code>on</code>.</p> </dd> <dt><code>nginx['server_name']</code></dt> <dd> <p>The FQDN for the server. Default value: <code>node['fqdn']</code>.</p> </dd> <dt><code>nginx['ssl_certificate']</code></dt> <dd> <p>The SSL certificate used to verify communication over HTTPS. Default value: <code>nil</code>.</p> </dd> <dt><code>nginx['ssl_certificate_key']</code></dt> <dd> <p>The certificate key used for SSL communication. Default value: <code>nil</code>.</p> </dd> <dt><code>nginx['ssl_ciphers']</code></dt> <dd> <p>The list of supported cipher suites that are used to establish a secure connection. To favor AES256 with ECDHE forward security, drop the <code>RC4-SHA:RC4-MD5:RC4:RSA</code> prefix. See <a href="https://www.openssl.org/docs/man1.0.2/man1/ciphers.html">this link</a> for more information. For example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">nginx<span style="color:#666">[</span><span style="color:#4070a0">'ssl_ciphers'</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#517918">HIGH</span>: <span style="color:#666">...</span> :<span style="color:#666">!</span><span style="color:#60add5">PSK</span>
</code></pre></div>
</dd> <dt><code>nginx['ssl_company_name']</code></dt> <dd> <p>The name of your company. Default value: <code>YouCorp</code>.</p> </dd> <dt><code>nginx['ssl_country_name']</code></dt> <dd> <p>The country in which your company is located. Default value: <code>US</code>.</p> </dd> <dt><code>nginx['ssl_email_address']</code></dt> <dd> <p>The default email address for your company. Default value: <code>you@example.com</code>.</p> </dd> <dt><code>nginx['ssl_locality_name']</code></dt> <dd> <p>The city in which your company is located. Default value: <code>Seattle</code>.</p> </dd> <dt><code>nginx['ssl_organizational_unit_name']</code></dt> <dd> <p>The organization or group within your company that is running the Chef Infra Server. Default value: <code>Operations</code>.</p> </dd> <dt><code>nginx['ssl_port']</code></dt> <dd> <p>Default value: <code>443</code>.</p> </dd> <dt><code>nginx['ssl_protocols']</code></dt> <dd> <p>The SSL protocol versions that are enabled. For enhanced security set this value to <code>'TLSv1.2'</code>. TLS 1.2 is supported on Chef Infra Client 10.16.4 and later on Linux, Unix, and macOS, and on Chef Infra Client 12.8 and later on Windows. If it is necessary to support these older end-of-life Chef Infra Client releases, set this value to <code>'TLSv1.1 TLSv1.2'</code>.</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">nginx<span style="color:#666">[</span><span style="color:#4070a0">'ssl_protocols'</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#4070a0">'TLSv1.2'</span>
</code></pre></div>
<p>Default value: <code>TLSv1 TLSv1.1 TLSv1.2</code>.</p> </dd> <dt><code>nginx['ssl_state_name']</code></dt> <dd> <p>The state, province, or region in which your company is located. Default value: <code>WA</code>.</p> </dd> <dt><code>nginx['strict_host_header']</code></dt> <dd> <p>Whether nginx should only respond to requests where the Host header matches one of the configured FQDNs. Default value: <code>false</code>.</p> </dd> <dt><code>nginx['stub_status']['allow_list']</code></dt> <dd> <p>The IP address on which accessing the <code>stub_status</code> endpoint is allowed. Default value: <code>["127.0.0.1"]</code>.</p> </dd> <dt><code>nginx['stub_status']['listen_host']</code></dt> <dd> <p>The host on which the Nginx <code>stub_status</code> module listens. Default value: <code>"127.0.0.1"</code>.</p> </dd> <dt><code>nginx['stub_status']['listen_port']</code></dt> <dd> <p>The port on which the Nginx <code>stub_status</code> module listens. Default value: <code>"9999"</code>.</p> </dd> <dt><code>nginx['stub_status']['location']</code></dt> <dd> <p>The name of the Nginx <code>stub_status</code> endpoint used to access data generated by the Nginx <code>stub_status</code> module. Default value: <code>"/nginx_status"</code>.</p> </dd> <dt><code>nginx['tcp_nodelay']</code></dt> <dd> <p>Enable the Nagle buffering algorithm. Default value: <code>on</code>.</p> </dd> <dt><code>nginx['tcp_nopush']</code></dt> <dd> <p>Enable TCP/IP transactions. Default value: <code>on</code>.</p> </dd> <dt><code>nginx['url']</code></dt> <dd> <p>Default value: <code>https://#{node['fqdn']}</code>.</p> </dd> <dt><code>nginx['use_implicit_hosts']</code></dt> <dd> <p>Automatically add <span class="title-ref">localhost</span> and any local IP addresses to the configured FQDNs. Useful in combination with <code>nginx['strict_host_header']</code>. Default value: <code>true</code>.</p> </dd> <dt><code>nginx['show_welcome_page']</code></dt> <dd> <p>Determines whether or not the default nginx welcome page is shown. Default value: <code>true</code>.</p> </dd> <dt><code>nginx['worker_connections']</code></dt> <dd> <p>The maximum number of simultaneous clients. Use with <code>nginx['worker_processes']</code> to determine the maximum number of allowed clients. Default value: <code>10240</code>.</p> </dd> <dt><code>nginx['worker_processes']</code></dt> <dd> <p>The number of allowed worker processes. Use with <code>nginx['worker_connections']</code> to determine the maximum number of allowed clients. Default value: <code>node['cpu']['total'].to_i</code>.</p> </dd> <dt><code>nginx['x_forwarded_proto']</code></dt> <dd> <p>The protocol used to connect to the server. Possible values: <code>http</code> and <code>https</code>. This is the protocol used to connect to the Chef Infra Server by a Chef Infra Client or a workstation. Default value: <code>'https'</code>.</p> </dd> </dl> <h3 id="oc_bifrost-13_2">oc_bifrost</h3> The <strong>oc_bifrost</strong> service ensures that every request to view or manage objects stored on the Chef Infra Server is authorized. <p>This configuration file has the following settings for <code>oc_bifrost</code>:</p> <dl> <dt><code>oc_bifrost['db_pool_size']</code></dt> <dd> <p>The number of open connections to PostgreSQL that are maintained by the service. This value should be increased if failures indicate that the <strong>oc_bifrost</strong> service ran out of connections. This value should be tuned in conjunction with the <code>postgresql['max_connections']</code> setting for PostgreSQL. Default value: <code>20</code>.</p> </dd> <dt><code>oc_bifrost['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value: <code>/var/opt/opscode/oc_bifrost</code>.</p> </dd> <dt><code>oc_bifrost['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>oc_bifrost['enable_request_logging']</code></dt> <dd> <p>Use to configure request logging for the <code>oc_bifrost</code> service. Default value: <code>true</code>.</p> </dd> <dt><code>oc_bifrost['extended_perf_log']</code></dt> <dd> <p>Default value: <code>true</code>.</p> </dd> <dt><code>oc_bifrost['listen']</code></dt> <dd> <p>The IP address on which the service is to listen. Default value: <code>'127.0.0.1'</code>.</p> </dd> <dt><code>oc_bifrost['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value: <code>/var/log/opscode/oc_bifrost</code>.</p> </dd> <dt><code>oc_bifrost['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">{ <span style="color:#4070a0">'file_maxbytes'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">104857600</span>, <span style="color:#4070a0">'num_to_keep'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">10</span> }
</code></pre></div>
</dd> <dt><code>oc_bifrost['port']</code></dt> <dd> <p>The port on which the service is to listen. Default value: <code>9463</code>.</p> </dd> <dt><code>oc_bifrost['sql_connection_user']</code></dt> <dd> <p>The PostgreSQL user name in <code>'username@hostname'</code> format (e.g. <code>'bifrost@my_postgresql.postgres.database.azure.com'</code>), where <code>username</code> would normally equal the value of <code>oc_bifrost['sql_user']</code> (default: <code>'bifrost'</code>). This setting is <strong>required</strong> in an external Azure PostgreSQL database-as-a-service configuration. If set to <code>nil</code>, Chef Infra Server assumes that the database is not on Azure and the PostgreSQL connection will be made using the value specified in <code>oc_bifrost['sql_user']</code>. Default value: <code>nil</code>.</p> </dd> <dt><code>oc_bifrost['sql_password']</code></dt> <dd> <p>The password for the <code>sql_user</code>. Default value: <strong>generated</strong>.</p> <p>To override the default value, use the <a href="../ctl_chef_server/index.html#secrets-management">Secrets Management</a> command: <code>chef-server-ctl set-secret oc_bifrost sql_password</code>.</p> </dd> <dt><code>oc_bifrost['sql_ro_password']</code></dt> <dd> <p>The password for the <code>sql_ro_user</code>. Default value: <strong>generated</strong>.</p> <p>To override the default value, use the <a href="../ctl_chef_server/index.html#secrets-management">Secrets Management</a> command: <code>chef-server-ctl set-secret oc_bifrost sql_ro_password</code>.</p> </dd> <dt><code>oc_bifrost['sql_ro_user']</code></dt> <dd> <p>Default value: <code>'bifrost_ro'</code>.</p> </dd> <dt><code>oc_bifrost['sql_user']</code></dt> <dd> <p>The user with permission to publish data. Default value: <code>'bifrost'</code>.</p> </dd> <dt><code>oc_bifrost['superuser_id']</code></dt> <dd> <p>Default value: <strong>generated</strong>.</p> </dd> <dt><code>oc_bifrost['vip']</code></dt> <dd> <p>The virtual IP address. Default value: <code>'127.0.0.1'</code>.</p> </dd> </dl> <h3 id="oc_chef_authz-13_2">oc_chef_authz</h3> <p>The <strong>opscode-authz</strong> service is used to handle authorization requests from oc_erchef to oc_bifrost in the Chef Infra Server.</p> <p>This configuration file has the following settings for <code>oc_chef_authz</code>:</p> <dl> <dt><code>oc_chef_authz['http_cull_interval']</code></dt> <dd> <p>Default value: <code>'{1, min}'</code>.</p> </dd> <dt><code>oc_chef_authz['http_init_count']</code></dt> <dd> <p>Default value: <code>25</code>.</p> </dd> <dt><code>oc_chef_authz['http_max_age']</code></dt> <dd> <p>Default value: <code>'{70, sec}'</code>.</p> </dd> <dt><code>oc_chef_authz['http_max_connection_duration']</code></dt> <dd> <p>Default value: <code>'{70, sec}'</code>.</p> </dd> <dt><code>oc_chef_authz['http_max_count']</code></dt> <dd> <p>Default value: <code>100</code>.</p> </dd> <dt><code>oc_chef_authz['ibrowse_options']</code></dt> <dd> <p>The amount of time (in milliseconds) to wait for a connection to be established. Default value: <code>'[{connect_timeout, 5000}]'</code>.</p> </dd> </dl> <h3 id="oc-chef-pedant-13_2">oc-chef-pedant</h3> <p>This configuration file has the following settings for <code>oc-chef-pedant</code>:</p> <dl> <dt><code>oc_chef_pedant['debug_org_creation']</code></dt> <dd> <p>Run tests with full output. Default value: <code>false</code>.</p> </dd> <dt><code>oc_chef_pedant['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#4070a0">'/var/opt/opscode/oc-chef-pedant'</span>
</code></pre></div>
</dd> <dt><code>oc_chef_pedant['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#4070a0">'/var/log/opscode/oc-chef-pedant'</span>
</code></pre></div>
</dd> <dt><code>oc_chef_pedant['log_http_requests']</code></dt> <dd> <p>Log HTTP requests in a file named <code>http-traffic.log</code> that is located in the path specified by <code>log_directory</code>. Default value: <code>true</code>.</p> </dd> <dt><code>oc_chef_pedant['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">{ <span style="color:#4070a0">'file_maxbytes'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">104857600</span>, <span style="color:#4070a0">'num_to_keep'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">10</span> }
</code></pre></div>
</dd> </dl> <h3 id="oc-id-13_2">oc-id</h3> The <strong>oc-id</strong> service enables OAuth 2.0 authentication to the Chef Infra Server by external applications, including Chef Supermarket. OAuth 2.0 uses token-based authentication, where external applications use tokens that are issued by the <strong>oc-id</strong> provider. No special credentials—<code>webui_priv.pem</code> or privileged keys—are stored on the external application. <p>This configuration file has the following settings for <code>oc-id</code>:</p> <dl> <dt><code>oc_id['administrators']</code></dt> <dd> <p>An array of Chef Infra Server user names who may add applications to the identity service. For example, <code>['user1', 'user2']</code>. Default value: <code>[ ]</code>.</p> </dd> <dt><code>oc_id['applications']</code></dt> <dd> <p>A Hash that contains OAuth 2 application information. Default value: <code>{ }</code>.</p> <p>To define OAuth 2 information for Chef Supermarket, create a Hash similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">oc_id<span style="color:#666">[</span><span style="color:#4070a0">'applications'</span><span style="color:#666">]</span> <span style="color:#666">||=</span> {}
oc_id<span style="color:#666">[</span><span style="color:#4070a0">'applications'</span><span style="color:#666">][</span><span style="color:#4070a0">'supermarket'</span><span style="color:#666">]</span> <span style="color:#666">=</span> {
  <span style="color:#4070a0">'redirect_uri'</span> <span style="color:#666">=&gt;</span> <span style="color:#4070a0">'https://supermarket.mycompany.com/auth/chef_oauth2/callback'</span>,
}
</code></pre></div> </dd> <dt><code>oc_id['db_pool_size']</code></dt> <dd> <p>The number of open connections to PostgreSQL that are maintained by the service. Default value: <code>'20'</code>.</p> </dd> <dt><code>oc_id['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value: none.</p> </dd> <dt><code>oc_id['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>oc_id['email_from_address']</code></dt> <dd> <p>Outbound email address. Defaults to the <code>'from_email'</code> value.</p> </dd> <dt><code>oc_id['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value: <code>'/var/opt/opscode/oc_id'</code>.</p> </dd> <dt><code>oc_id['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">{ <span style="color:#4070a0">'file_maxbytes'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">104857600</span>, <span style="color:#4070a0">'num_to_keep'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">10</span> }
</code></pre></div>
</dd> <dt><code>oc_id['origin']</code></dt> <dd> <p>The FQDN for the server that is sending outbound email. Defaults to the <code>'api_fqdn'</code> value, which is the FQDN for the Chef Infra Server.</p> </dd> <dt><code>oc_id['num_to_keep']</code></dt> <dd> <p>The number of log files to keep. Default value: <code>10</code>.</p> </dd> <dt><code>oc_id['port']</code></dt> <dd> <p>The port on which the service is to listen. Default value: <code>9090</code>.</p> </dd> <dt><code>oc_id['sql_connection_user']</code></dt> <dd> <p>The PostgreSQL user name in <code>'username@hostname'</code> format (e.g. <code>'oc_id@my_postgresql.postgres.database.azure.com'</code>), where <code>username</code> would normally equal the value of <code>oc_id['sql_user']</code> (default: <code>'od_id'</code>). This setting is <strong>required</strong> in an external Azure PostgreSQL database-as-a-service configuration. If set to <code>nil</code>, Chef Infra Server assumes that the database is not on Azure and the PostgreSQL connection will be made using the value specified in <code>oc_id['sql_user']</code>. Default value: <code>nil</code>.</p> </dd> <dt><code>oc_id['sql_database']</code></dt> <dd> <p>The name of the database. Default value: <code>oc_id</code>.</p> </dd> <dt><code>oc_id['sql_password']</code></dt> <dd> <p>The password for the <code>sql_user</code>. Default value: <strong>generated</strong>.</p> <p>To override the default value, use the <a href="../ctl_chef_server/index.html#secrets-management">Secrets Management</a> command: <code>chef-server-ctl set-secret oc_id sql_password</code>.</p> </dd> <dt><code>oc_id['sql_user']</code></dt> <dd> <p>The user with permission to write to <code>sql_database</code>. Default value: <code>oc_id</code>.</p> </dd> <dt><code>oc_id['vip']</code></dt> <dd> <p>The virtual IP address. Default value: <code>'127.0.0.1'</code>.</p> </dd> </dl> <h3 id="opscode-chef-mover-13_2">opscode-chef-mover</h3> <p>This configuration file has the following settings for <code>opscode-chef-mover</code>:</p> <dl> <dt><code>opscode_chef_mover['bulk_fetch_batch_size']</code></dt> <dd> <p>Default value: <code>'5'</code>.</p> </dd> <dt><code>opscode_chef_mover['cache_ttl']</code></dt> <dd> <p>Default value: <code>'3600'</code>.</p> </dd> <dt><code>opscode_chef_mover['db_pool_size']</code></dt> <dd> <p>The number of open connections to PostgreSQL that are maintained by the service. Default value: <code>'5'</code>.</p> </dd> <dt><code>opscode_chef_mover['data_dir']</code></dt> <dd> <p>The directory in which on-disk data is stored. The default value is the recommended value. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#4070a0">'/var/opt/opscode/opscode-chef-mover/data'</span>
</code></pre></div>
</dd> <dt><code>opscode_chef_mover['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#4070a0">'/var/opt/opscode/opscode-chef-mover'</span>
</code></pre></div>
</dd> <dt><code>opscode_chef_mover['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>opscode_chef_mover['ibrowse_max_pipeline_size']</code></dt> <dd> <p>Default value: <code>1</code>.</p> </dd> <dt><code>opscode_chef_mover['ibrowse_max_sessions']</code></dt> <dd> <p>Default value: <code>256</code>.</p> </dd> <dt><code>opscode_chef_mover['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#4070a0">'/var/log/opscode/opscode-chef-mover'</span>
</code></pre></div>
</dd> <dt><code>opscode_chef_mover['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">{ <span style="color:#4070a0">'file_maxbytes'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">104857600</span>, <span style="color:#4070a0">'num_to_keep'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">10</span> }
</code></pre></div>
</dd> <dt><code>opscode_chef_mover['max_cache_size']</code></dt> <dd> <p>Default value: <code>'10000'</code>.</p> </dd> <dt><code>opscode_chef_mover['solr_http_cull_interval']</code></dt> <dd> <p>Default value: <code>'{1, min}'</code>.</p> </dd> <dt><code>opscode_chef_mover['solr_http_init_count']</code></dt> <dd> <p>Default value: <code>25</code>.</p> </dd> <dt><code>opscode_chef_mover['solr_http_max_age']</code></dt> <dd> <p>Default value: <code>'{70, sec}'</code>.</p> </dd> <dt><code>opscode_chef_mover['solr_http_max_connection_duration']</code></dt> <dd> <p>Default value: <code>'{70, sec}'</code>.</p> </dd> <dt><code>opscode_chef_mover['solr_http_max_count']</code></dt> <dd> <p>Default value: <code>100</code>.</p> </dd> <dt><code>opscode_chef_mover['solr_ibrowse_options']</code></dt> <dd> <p>Default value: <code>'[{connect_timeout, 10000}]'</code>.</p> </dd> <dt><code>opscode_chef_mover['solr_timeout']</code></dt> <dd> <p>Default value: <code>30000</code>.</p> </dd> </dl> <h3 id="opscode-erchef-13_2">opscode-erchef</h3> <p>The <strong>opscode-erchef</strong> service is an Erlang-based service that is used to handle Chef Infra Server API requests to the following areas within the Chef Infra Server:</p> <ul> <li>Cookbooks</li> <li>Data bags</li> <li>Environments</li> <li>Nodes</li> <li>Roles</li> <li>Sandboxes</li> <li>Search</li> </ul> <p>This configuration file has the following settings for <code>opscode-erchef</code>:</p> <dl> <dt><code>opscode_erchef['auth_skew']</code></dt> <dd> <p>Default value: <code>900</code>.</p> </dd> <dt><code>opscode_erchef['authz_fanout']</code></dt> <dd> <p>Default value: <code>20</code>.</p> </dd> <dt><code>opscode_erchef['authz_timeout']</code></dt> <dd> <p>The amount of time (in seconds) before a request to the <strong>oc_bifrost</strong> service times out. Default value: <code>2000</code>.</p> </dd> <dt><code>opscode_erchef['base_resource_url']</code></dt> <dd> <p>The base URL to which the service is to return links to API resources. Use <code>:host_header</code> to ensure the URL is derived from the host header of the incoming HTTP request. Default value: <code>:host_header</code>.</p> </dd> <dt><code>opscode_erchef['bulk_fetch_batch_size']</code></dt> <dd> <p>The number of nodes that may be deserialized. Currently only applies to the <code>/search</code> endpoint in the Chef Infra Server API. The default value is the recommended value. Default value: <code>5</code>.</p> </dd> <dt><code>opscode_erchef['cache_ttl']</code></dt> <dd> <p>Default value: <code>3600</code>.</p> </dd> <dt><code>opscode_erchef['cleanup_batch_size']</code></dt> <dd> <p>Default value: <code>0</code>.</p> </dd> <dt><code>opscode_erchef['couchdb_max_conn']</code></dt> <dd> <p>Default value: <code>'100'</code>.</p> </dd> <dt><code>opscode_erchef['db_pool_size']</code></dt> <dd> <p>The number of open connections to PostgreSQL that are maintained by the service. Default value: <code>20</code>.</p> </dd> <dt><code>opscode_erchef['depsolver_timeout']</code></dt> <dd> <p>The amount of time (in milliseconds) to wait for cookbook dependency problems to be solved. Default value: <code>'5000'</code>.</p> </dd> <dt><code>opscode_erchef['depsolver_worker_count']</code></dt> <dd> <p>The number of Ruby processes for which cookbook dependency problems are unsolved. Use the <code>pgrep -fl depselector</code> command to verify the number of depsolver workers that are running. If you are seeing 503 service unavailable errors, increase this value. Default value: <code>'5'</code>.</p> </dd> <dt><code>opscode_erchef['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value: <code>/var/opt/opscode/opscode-erchef</code>.</p> </dd> <dt><code>opscode_erchef['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>opscode_erchef['enable_actionlog']</code></dt> <dd> <p>Use to enable Chef actions, a premium feature of the Chef Infra Server. Default value: <code>false</code>.</p> </dd> <dt><code>opscode_erchef['enable_request_logging']</code></dt> <dd> <p>Use to configure request logging for the <code>opscode_erchef</code> service. Default value: <code>true</code>.</p> </dd> <dt><code>opscode_erchef['ibrowse_max_pipeline_size']</code></dt> <dd> <p>Default value: <code>1</code>.</p> </dd> <dt><code>opscode_erchef['ibrowse_max_sessions']</code></dt> <dd> <p>Default value: <code>256</code>.</p> </dd> <dt><code>opscode_erchef['listen']</code></dt> <dd> <p>The IP address on which the service is to listen. Default value: <code>127.0.0.1</code>.</p> </dd> <dt><code>opscode_erchef['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value: <code>/var/log/opscode/opscode-erchef</code>.</p> </dd> <dt><code>opscode_erchef['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">{ <span style="color:#4070a0">'file_maxbytes'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">104857600</span>, <span style="color:#4070a0">'num_to_keep'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">10</span> }
</code></pre></div>
</dd> <dt><code>opscode_erchef['max_cache_size']</code></dt> <dd> <p>Default value: <code>10000</code>.</p> </dd> <dt><code>opscode_erchef['max_request_size']</code></dt> <dd> <p>When the request body size is greater than this value, a <code>413 Request Entity Too Large</code> error is returned. Default value: <code>2000000</code>.</p> </dd> <dt><code>opscode_erchef['nginx_bookshelf_caching']</code></dt> <dd> <p>Whether Nginx is used to cache cookbooks. When <code>:on</code>, Nginx serves up the cached content instead of forwarding the request. Default value: <code>:off</code>.</p> </dd> <dt><code>opscode_erchef['port']</code></dt> <dd> <p>The port on which the service is to listen. Default value: <code>8000</code>.</p> </dd> <dt><code>opscode_erchef['reindex_batch_size']</code></dt> <dd> <p>The number of items to fetch from the database and send to the search index at a time. Default value: <code>10</code>.</p> </dd> <dt><code>opscode_erchef['reindex_sleep_min_ms']</code></dt> <dd> <p>The minimum number of milliseconds to sleep before retrying a failed attempt to index an item. Retries are delayed a random number of miliseconds between <code>reindex_sleep_min_ms</code> and <code>reindex_sleep_max_ms</code>. Set both this and <code>reindex_sleep_max_ms</code> to 0 to retry without delay. Default value: <code>500</code></p> </dd> <dt><code>opscode_erchef['reindex_sleep_max_ms']</code></dt> <dd> <p>The maximum number of milliseconds to sleep before retrying a failed attempt to index an item. Retries are delayed a random number of miliseconds between <code>reindex_sleep_min_ms</code> and <code>reindex_sleep_max_ms</code>. Set both this and <code>reindex_sleep_min_ms</code> to 0 to retry without delay. Default value: <code>2000</code></p> </dd> <dt><code>opscode_erchef['reindex_item_retries']</code></dt> <dd> <p>The number of times to retry sending an object for indexing in the case of failure. Default value: <code>3</code></p> </dd> <dt><code>opscode_erchef['root_metric_key']</code></dt> <dd> <p>Default value: <code>chefAPI</code>.</p> </dd> <dt><code>opscode_erchef['s3_bucket']</code></dt> <dd> <p>The name of the Amazon Simple Storage Service (S3) bucket. This may point at external storage locations, such as Amazon EC2. See <a href="../index.html#aws-settings">AWS external bookshelf settings</a> for more information on configuring external bookshelf.</p> </dd> <dt><code>opscode_erchef['s3_parallel_ops_fanout']</code></dt> <dd> <p>Default value: <code>20</code>.</p> </dd> <dt><code>opscode_erchef['s3_parallel_ops_timeout']</code></dt> <dd> <p>Default value: <code>5000</code>.</p> </dd> <dt><code>opscode_erchef['s3_url_expiry_window_size']</code></dt> <dd> <p>The frequency at which unique URLs are generated. This value may be a specific amount of time, i.e. <code>15m</code> (fifteen minutes) or a percentage of the value of <code>s3_url_ttl</code>, i.e. <code>10%</code>. Default value: <code>:off</code>.</p> </dd> <dt><code>opscode_erchef['s3_url_ttl']</code></dt> <dd> <p>The amount of time (in seconds) before connections to the server expire. If node bootstraps are timing out, increase this setting. Default value: <code>28800</code>.</p> </dd> <dt><code>opscode_erchef['sql_connection_user']</code></dt> <dd> <p>The PostgreSQL user name in <code>'username@hostname'</code> format (e.g. <code>'opscode_chef@my_postgresql.postgres.database.azure.com'</code>), where <code>username</code> would normally equal the value of <code>opscode-erchef['sql_user']</code> (default: <code>'opscode_chef'</code>). This setting is <strong>required</strong> in an external Azure PostgreSQL database-as-a-service configuration. If set to <code>nil</code>, Chef Infra Server assumes that the database is not on Azure and the PostgreSQL connection will be made using the value specified in <code>opscode_erchef['sql_user']</code>.Default value: <code>nil</code>.</p> </dd> <dt><code>opscode_erchef['strict_search_result_acls']</code></dt> <dd> <p>Use to specify that search results only return objects to which an actor (user, client, etc.) has read access, as determined by ACL settings. This affects all searches. When <code>true</code>, the performance of the Chef management console may increase because it enables the Chef management console to skip redundant ACL checks. To ensure the Chef management console is configured properly, after this setting has been applied with a <code>chef-server-ctl reconfigure</code> run <code>chef-manage-ctl reconfigure</code> to ensure the Chef management console also picks up the setting. Default value: <code>false</code>.</p> <div class="admonition-warning"> <p class="admonition-warning-title">Warning</p> <div class="admonition-warning-text"> <p>When <code>true</code>, <code>opscode_erchef['strict_search_result_acls']</code> affects all search results and any actor (user, client, etc.) that does not have read access to a search result will not be able to view it. For example, this could affect search results returned during a Chef Infra Client runs if a Chef Infra Client does not have permission to read the information.</p> </div> </div> </dd> <dt><code>opscode_erchef['udp_socket_pool_size']</code></dt> <dd> <p>Default value: <code>20</code>.</p> </dd> <dt><code>opscode_erchef['umask']</code></dt> <dd> <p>Default value: <code>0022</code>.</p> </dd> <dt><code>opscode_erchef['validation_client_name']</code></dt> <dd> <p>Default value: <code>chef-validator</code>.</p> </dd> <dt><code>opscode_erchef['vip']</code></dt> <dd> <p>The virtual IP address. Default value: <code>127.0.0.1</code>.</p> </dd> </dl> <h3 id="opscode-expander-13_2">opscode-expander</h3> The <strong>opscode-expander</strong> service is used to process data (pulled from the <strong>rabbitmq</strong> service’s message queue) so that it can be properly indexed by the <strong>opscode-solr4</strong> service. <p>This configuration file has the following settings for <code>opscode-expander</code>:</p> <dl> <dt><code>opscode_expander['consumer_id']</code></dt> <dd> <p>The identity of the consumer to which messages are published. Default value: <code>default</code>.</p> </dd> <dt><code>opscode_expander['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#235388">/var/o</span>pt<span style="color:#666">/</span>opscode<span style="color:#666">/</span>opscode<span style="color:#666">-</span>expander
</code></pre></div>
</dd> <dt><code>opscode_expander['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>opscode_expander['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#235388">/var/</span>log<span style="color:#666">/</span>opscode<span style="color:#666">/</span>opscode<span style="color:#666">-</span>expander
</code></pre></div>
</dd> <dt><code>opscode_expander['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">{ <span style="color:#4070a0">'file_maxbytes'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">104857600</span>, <span style="color:#4070a0">'num_to_keep'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">10</span> }
</code></pre></div>
</dd> <dt><code>opscode_expander['nodes']</code></dt> <dd> <p>The number of allowed worker processes. Default value: <code>2</code>.</p> </dd> <dt><code>opscode_expander['reindexer_log_directory']</code></dt> <dd> <p>The directory in which <code>opscode-expander-reindexer</code> logs files are located. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#235388">/var/</span>log<span style="color:#666">/</span>opscode<span style="color:#666">/</span>opscode<span style="color:#666">-</span>expander<span style="color:#666">-</span>reindexer
</code></pre></div>
</dd> </dl> <h3 id="opscode-solr4-13_2">opscode-solr4</h3> The <strong>opscode-solr4</strong> service is used to create the search indexes used for searching objects like nodes, data bags, and cookbooks. (This service ensures timely search results via the Chef Infra Server API; data that is used by the Chef platform is stored in PostgreSQL.) <p>This configuration file has the following settings for <code>opscode-solr4</code>:</p> <dl> <dt><code>opscode_solr4['auto_soft_commit']</code></dt> <dd> <p>The maximum number of documents before a soft commit is triggered. Default value: <code>1000</code>.</p> </dd> <dt><code>opscode_solr4['commit_interval']</code></dt> <dd> <p>The frequency (in seconds) at which node objects are added to the Apache Solr search index. This value should be tuned carefully. When data is committed to the Apache Solr index, all incoming updates are blocked. If the duration between updates is too short, it is possible for the rate at which updates are asked to occur to be faster than the rate at which objects can be actually committed. Default value: <code>60000</code> (every 60 seconds).</p> </dd> <dt><code>opscode_solr4['data_dir']</code></dt> <dd> <p>The directory in which on-disk data is stored. The default value is the recommended value. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#235388">/var/o</span>pt<span style="color:#666">/</span>opscode<span style="color:#666">/</span>opscode<span style="color:#666">-</span>solr4<span style="color:#666">/</span>data
</code></pre></div>
</dd> <dt><code>opscode_solr4['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#235388">/var/o</span>pt<span style="color:#666">/</span>opscode<span style="color:#666">/</span>opscode<span style="color:#666">-</span>solr4
</code></pre></div>
</dd> <dt><code>opscode_solr4['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>opscode_solr4['heap_size']</code></dt> <dd> <p>The amount of memory (in MBs) available to Apache Solr. If there is not enough memory available, search queries made by nodes to Apache Solr may fail. The amount of memory that must be available also depends on the number of nodes in the organization, the frequency of search queries, and other characteristics that are unique to each organization. In general, as the number of nodes increases, so does the amount of memory. The default value should work for many organizations with fewer than 25 nodes. For an organization with several hundred nodes, the amount of memory that is required often exceeds 3GB. Default value: <code>nil</code>, which is equivalent to 25% of the system memory or 1024 (MB, but this setting is specified as an integer number of MB in EC11), whichever is smaller.</p> </dd> <dt><code>opscode_solr4['ip_address']</code></dt> <dd> <p>The IP address for the machine on which Apache Solr is running. Default value: <code>127.0.0.1</code>.</p> </dd> <dt><code>opscode_solr4['java_opts']</code></dt> <dd> <p>A Hash of <code>JAVA_OPTS</code> environment variables to be set. (<code>-XX:NewSize</code> is configured using the <code>new_size</code> setting.) Default value: <code>' '</code> (empty).</p> </dd> <dt><code>opscode_solr4['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#235388">/var/</span>log<span style="color:#666">/</span>opscode<span style="color:#666">/</span>opscode<span style="color:#666">-</span>solr4
</code></pre></div>
</dd> <dt><code>opscode_solr4['log_gc']</code></dt> <dd> <p>Enable or disable GC logging. Default is <code>true</code>.</p> </dd> <dt><code>opscode_solr4['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">{ <span style="color:#4070a0">'file_maxbytes'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">104857600</span>, <span style="color:#4070a0">'num_to_keep'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">10</span> }
</code></pre></div>
</dd> <dt><code>opscode_solr4['max_commit_docs']</code></dt> <dd> <p>The frequency (in documents) at which node objects are added to the Apache Solr search index. This value should be tuned carefully. When data is committed to the Apache Solr index, all incoming updates are blocked. If the duration between updates is too short, it is possible for the rate at which updates are asked to occur to be faster than the rate at which objects can be actually committed. Default value: <code>1000</code> (every 1000 documents).</p> </dd> <dt><code>opscode_solr4['max_field_length']</code></dt> <dd> <p>The maximum field length (in number of tokens/terms). If a field length exceeds this value, Apache Solr may not be able to complete building the index. Default value: <code>100000</code> (increased from the Apache Solr default value of <code>10000</code>).</p> </dd> <dt><code>opscode_solr4['max_merge_docs']</code></dt> <dd> <p>The maximum number of index segments allowed before they are merged into a single index. Default value: <code>2147483647</code>.</p> </dd> <dt><code>opscode_solr4['merge_factor']</code></dt> <dd> <p>The maximum number of document updates that can be stored in memory before being flushed and added to the current index segment. Default value: <code>15</code>.</p> </dd> <dt><code>opscode_solr4['new_size']</code></dt> <dd> <p>Configure the <code>-XX:NewSize</code> <code>JAVA_OPTS</code> environment variable. Default value: <code>nil</code>.</p> </dd> <dt><code>opscode_solr4['poll_seconds']</code></dt> <dd> <p>The frequency (in seconds) at which the secondary machine polls the primary. Default value: <code>20</code>.</p> </dd> <dt><code>opscode_solr4['port']</code></dt> <dd> <p>The port on which the service is to listen. Default value: <code>8983</code>.</p> </dd> <dt><code>opscode_solr4['ram_buffer_size']</code></dt> <dd> <p>The size (in megabytes) of the RAM buffer. When document updates exceed this amout, pending updates are flushed. Default value: <code>100</code>.</p> </dd> <dt><code>opscode_solr4['url']</code></dt> <dd> <p>Default value: <code>'http://localhost:8983/solr'</code>.</p> </dd> <dt><code>opscode_solr4['vip']</code></dt> <dd> <p>The virtual IP address. Default value: <code>127.0.0.1</code>.</p> </dd> </dl> <h3 id="postgresql-13_2">postgresql</h3> The <strong>postgresql</strong> service is used to store node, object, and user data. <p>This configuration file has the following settings for <code>postgresql</code>:</p> <dl> <dt><code>postgresql['checkpoint_completion_target']</code></dt> <dd> <p>A completion percentage that is used to determine how quickly a checkpoint should finish in relation to the completion status of the next checkpoint. For example, if the value is <code>0.5</code>, then a checkpoint attempts to finish before 50% of the next checkpoint is done. Default value: <code>0.5</code>.</p> </dd> <dt><code>postgresql['checkpoint_segments']</code></dt> <dd> <p>The maximum amount (in megabytes) between checkpoints in log file segments. Default value: <code>3</code>.</p> </dd> <dt><code>postgresql['checkpoint_timeout']</code></dt> <dd> <p>The amount of time (in minutes) between checkpoints. Default value: <code>5min</code>.</p> </dd> <dt><code>postgresql['checkpoint_warning']</code></dt> <dd> <p>The frequency (in seconds) at which messages are sent to the server log files if checkpoint segments are being filled faster than their currently configured values. Default value: <code>30s</code>.</p> </dd> <dt><code>postgresql['data_dir']</code></dt> <dd> <p>The directory in which on-disk data is stored. The default value is the recommended value. Default value: <code>/var/opt/opscode/postgresql/#{node['private_chef']['postgresql']['version']}/data</code>.</p> </dd> <dt><code>postgresql['db_connection_superuser']</code></dt> <dd> <p>The PostgreSQL superuser name in <code>'username@hostname'</code> format (e.g. <code>'opscode_pgsql@my_postgresql.postgres.database.azure.com'</code>), where <code>username</code> would normally equal the value of <code>postgresql['db_superuser']</code> with any dashes replaced by underscores. This setting is <strong>required</strong> in an external Azure PostgreSQL database-as-a-service configuration. If set to <code>nil</code>, Chef Infra Server assumes that the database is not on Azure and the PostgreSQL connection will be made using the value specified in <code>postgresql['db_superuser']</code>. Default value: <code>nil</code>.</p> </dd> <dt><code>postgresql['db_superuser']</code></dt> <dd> <p>Default value: <code>opscode-pgsql</code>. If <code>username</code> is set, set <code>db_superuser</code> to the same value.</p> </dd> <dt><code>postgresql['db_superuser_password']</code></dt> <dd> <p>Password for the DB superuser. Default value: <strong>generated</strong>.</p> <p>To override the default value, use the <a href="../ctl_chef_server/index.html#secrets-management">Secrets Management</a> command: <code>chef-server-ctl set-db-superuser-password</code>.</p> </dd> <dt><code>postgresql['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value: <code>/var/opt/opscode/postgresql/#{node['private_chef']['postgresql']['version']}</code>.</p> </dd> <dt><code>postgresql['effective_cache_size']</code></dt> <dd> <p>The size of the disk cache that is used for data files. Default value: 50% of available RAM.</p> </dd> <dt><code>postgresql['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>postgresql['home']</code></dt> <dd> <p>The home directory for PostgreSQL. Default value: <code>/var/opt/opscode/postgresql</code>.</p> </dd> <dt><code>postgresql['keepalives_count']</code></dt> <dd> <p>The maximum number of keepalive proves that should be sent before dropping a connection. Default value: <code>2</code>.</p> </dd> <dt><code>postgresql['keepalives_idle']</code></dt> <dd> <p>The amount of time (in seconds) a connection must remain idle before keepalive probes will resume. Default value: <code>60</code>.</p> </dd> <dt><code>postgresql['keepalives_interval']</code></dt> <dd> <p>The amount of time (in seconds) between probes. Default value: <code>15</code>.</p> </dd> <dt><code>postgresql['listen_address']</code></dt> <dd> <p>The connection source to which PostgreSQL is to respond. Default value: <code>localhost</code>.</p> </dd> <dt><code>postgresql['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value: <code>/var/log/opscode/postgresql/#{node['private_chef']['postgresql']['version']}</code>.</p> </dd> <dt><code>postgresql['log_min_duration_statement']</code></dt> <dd> <p>When to log a slow PostgreSQL query statement. Possible values: <code>-1</code> (disabled, do not log any statements), <code>0</code> (log every statement), or an integer greater than zero. When the integer is greater than zero, this value is the amount of time (in milliseconds) that a query statement must have run before it is logged. Default value: <code>-1</code>.</p> </dd> <dt><code>postgresql['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value: <code>{ 'file_maxbytes' =&gt; 104857600, 'num_to_keep' =&gt; 10 }</code></p> </dd> <dt><code>postgresql['max_connections']</code></dt> <dd> <p>The maximum number of allowed concurrent connections. Default value: <code>350</code>.</p> </dd> <dt><code>postgresql['md5_auth_cidr_addresses']</code></dt> <dd> <p>Use instead of <code>trust_auth_cidr_addresses</code> to encrypt passwords using MD5 hashes. Default value: <code>[ '127.0.0.1/32', '::1/128' ]</code>.</p> </dd> <dt><code>postgresql['port']</code></dt> <dd> <p>The port on which the service is to listen. Default value: <code>5432</code>.</p> </dd> <dt><code>postgresql['shared_buffers']</code></dt> <dd> <p>The amount of memory that is dedicated to PostgreSQL for data caching. Default value: <code>#{(node['memory']['total'].to_i / 4) / (1024)}MB</code>.</p> </dd> <dt><code>postgresql['shell']</code></dt> <dd> <p>Default value: <code>/bin/sh</code>.</p> </dd> <dt><code>postgresql['shmall']</code></dt> <dd> <p>The total amount of available shared memory. Default value: <code>4194304</code>.</p> </dd> <dt><code>postgresql['shmmax']</code></dt> <dd> <p>The maximum amount of shared memory. Default value: <code>17179869184</code>.</p> </dd> <dt><code>postgresql['sslmode']</code></dt> <dd> <p>SSL encryption mode between the Chef Infra Server and PostgreSQL. Valid settings are <code>'disable'</code> and <code>'require'</code>. Default value: <code>'disable'</code>.</p> </dd> <dt><code>postgresql['trust_auth_cidr_addresses']</code></dt> <dd> <p>Use for clear-text passwords. See <code>md5_auth_cidr_addresses</code>. Default value: <code>'127.0.0.1/32', '::1/128'</code>.</p> </dd> <dt><code>postgresql['user_path']</code></dt> <dd> <p>Default value: <code>/opt/opscode/embedded/bin:/opt/opscode/bin:$PATH</code>.</p> </dd> <dt><code>postgresql['username']</code></dt> <dd> <p>The PostgreSQL account user name. Default value: <code>opscode-pgsql</code>. If setting this value, must set <code>db_superuser</code> to the same value.</p> </dd> <dt><code>postgresql['version']</code></dt> <dd> <p>The (currently) hardcoded version of PostgreSQL. Default value: <code>'9.2'</code>.</p> </dd> <dt><code>postgresql['vip']</code></dt> <dd> <p>The virtual IP address. Default value: <code>127.0.0.1</code>.</p> </dd> <dt><code>postgresql['work_mem']</code></dt> <dd> <p>The size (in megabytes) of allowed in-memory sorting. Default value: <code>8MB</code>.</p> </dd> </dl> <h3 id="rabbitmq-13_2">rabbitmq</h3> The <strong>rabbitmq</strong> service is used to provide the message queue that is used by the Chef Infra Server to get search data to Apache Solr so that it can be indexed for search. <p>This configuration file has the following settings for <code>rabbitmq</code>:</p> <dl> <dt><code>rabbitmq['actions_exchange']</code></dt> <dd> <p>The name of the exchange to which Chef actions publishes actions data. Default value: <code>'actions'</code>.</p> </dd> <dt><code>rabbitmq['actions_password']</code></dt> <dd> <p>Legacy configuration setting for the password of the <code>actions_user</code>. Default value: <strong>generated</strong>.</p> <p>To override the default value, use the <a href="../ctl_chef_server/index.html#secrets-management">Secrets Management</a> command: <code>chef-server-ctl set-actions-password</code>.</p> </dd> <dt><code>rabbitmq['actions_user']</code></dt> <dd> <p>The user with permission to publish actions data. Default value: <code>'actions'</code>.</p> </dd> <dt><code>rabbitmq['actions_vhost']</code></dt> <dd> <p>The virtual host to which Chef actions publishes actions data. Default value: <code>'/analytics'</code>.</p> </dd> <dt><code>rabbitmq['analytics_max_length']</code></dt> <dd> <p>The maximum number of messages that can be queued before RabbitMQ automatically drops messages from the front of the queue to make room for new messages. Default value: <code>10000</code>.</p> </dd> <dt><code>rabbitmq['consumer_id']</code></dt> <dd> <p>The identity of the consumer to which messages are published. Default value: <code>'hotsauce'</code>.</p> </dd> <dt><code>rabbitmq['data_dir']</code></dt> <dd> <p>The directory in which on-disk data is stored. The default value is the recommended value. Default value: <code>'/var/opt/opscode/rabbitmq/db'</code>.</p> </dd> <dt><code>rabbitmq['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value: <code>'/var/opt/opscode/rabbitmq'</code>.</p> </dd> <dt><code>rabbitmq['drop_on_full_capacity']</code></dt> <dd> <p>Specify if messages will stop being sent to the RabbitMQ queue when it is at capacity. Default value: <code>true</code>.</p> </dd> <dt><code>rabbitmq['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>rabbitmq['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value: <code>'/var/log/opscode/rabbitmq'</code>.</p> </dd> <dt><code>rabbitmq['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">{ <span style="color:#4070a0">'file_maxbytes'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">104857600</span>, <span style="color:#4070a0">'num_to_keep'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">10</span> }
</code></pre></div>
</dd> <dt><code>rabbitmq['management_enabled']</code></dt> <dd> <p>Specify if the rabbitmq-management plugin is enabled. Default value: <code>true</code>.</p> </dd> <dt><code>rabbitmq['management_password']</code></dt> <dd> <p>Legacy configuration setting for rabbitmq-management plugin password. Default value: <strong>generated</strong>.</p> <p>To override the default value, use the <a href="../ctl_chef_server/index.html#secrets-management">Secrets Management</a> command: <code>chef-server-ctl set-secret rabbitmq management_password</code>.</p> </dd> <dt><code>rabbitmq['management_port']</code></dt> <dd> <p>The rabbitmq-management plugin port. Default value: <code>15672</code>.</p> </dd> <dt><code>rabbitmq['management_user']</code></dt> <dd> <p>The rabbitmq-management plugin user. Default value: <code>'rabbitmgmt'</code>.</p> </dd> <dt><code>rabbitmq['node_ip_address']</code></dt> <dd> <p>The bind IP address for RabbitMQ. Default value: <code>'127.0.0.1'</code>.</p> </dd> <dt><code>rabbitmq['node_port']</code></dt> <dd> <p>The port on which the service is to listen. Default value: <code>'5672'</code>.</p> </dd> <dt><code>rabbitmq['nodename']</code></dt> <dd> <p>The unique identifier of the node. Default value: <code>'rabbit@localhost'</code>.</p> </dd> <dt><code>rabbitmq['password']</code></dt> <dd> <p>Legacy configuration setting for the password for the RabbitMQ user. Default value: <strong>generated</strong>.</p> <p>To override the default value, use the <a href="../ctl_chef_server/index.html#secrets-management">Secrets Management</a> command: <code>chef-server-ctl set-secret rabbitmq password</code>.</p> </dd> <dt><code>rabbitmq['prevent_erchef_startup_on_full_capacity']</code></dt> <dd> <p>Specify if the Chef Infra Server will start when the monitored RabbitMQ queue is full. Default value: <code>false</code>.</p> </dd> <dt><code>rabbitmq['queue_at_capacity_affects_overall_status']</code></dt> <dd> <p>Specify if the <code>_status</code> endpoint in the Chef Infra Server API will fail if the monitored queue is at capacity. Default value: <code>false</code>.</p> </dd> <dt><code>rabbitmq['queue_length_monitor_enabled']</code></dt> <dd> <p>Specify if the queue length monitor is enabled. Default value: <code>true</code>.</p> </dd> <dt><code>rabbitmq['queue_length_monitor_millis']</code></dt> <dd> <p>The frequency (in milliseconds) at which the length of the RabbitMQ queue is checked. Default value: <code>30000</code>.</p> </dd> <dt><code>rabbitmq['queue_length_monitor_timeout_millis']</code></dt> <dd> <p>The timeout (in milliseconds) at which calls to the queue length monitor will stop if the Chef Infra Server is overloaded. Default value: <code>5000</code>.</p> </dd> <dt><code>rabbitmq['queue_length_monitor_queue']</code></dt> <dd> <p>The RabbitMQ queue that is observed by queue length monitor. Default value: <code>'alaska'</code>.</p> </dd> <dt><code>rabbitmq['queue_length_monitor_vhost']</code></dt> <dd> <p>The virtual host for the RabbitMQ queue that is observed by queue length monitor. Default value: <code>'/analytics'</code>.</p> </dd> <dt><code>rabbitmq['rabbit_mgmt_http_cull_interval']</code></dt> <dd> <p>The maximum cull interval (in seconds) for the HTTP connection pool that is used by the rabbitmq-management plugin. Default value: <code>60</code>.</p> </dd> <dt><code>rabbitmq['rabbit_mgmt_http_init_count']</code></dt> <dd> <p>The initial worker count for the HTTP connection pool that is used by the rabbitmq-management plugin. Default value: <code>25</code>.</p> </dd> <dt><code>rabbitmq['rabbit_mgmt_http_max_age']</code></dt> <dd> <p>The maximum connection worker age (in seconds) for the HTTP connection pool that is used by the rabbitmq-management plugin. Default value: <code>70</code>.</p> </dd> <dt><code>rabbitmq['rabbit_mgmt_http_max_connection_duration']</code></dt> <dd> <p>The maximum connection duration (in seconds) for the HTTP connection pool that is used by the rabbitmq-management plugin. Default value: <code>70</code>.</p> </dd> <dt><code>rabbitmq['rabbit_mgmt_http_max_count']</code></dt> <dd> <p>The maximum worker count for the HTTP connection pool that is used by the rabbitmq-management plugin. Default value: <code>100</code>.</p> </dd> <dt><code>rabbitmq['rabbit_mgmt_ibrowse_options']</code></dt> <dd> <p>An array of comma-separated key-value pairs of ibrowse options for the HTTP connection pool that is used by the rabbitmq-management plugin. Default value: <code>'{connect_timeout, 10000}'</code>.</p> </dd> <dt><code>rabbitmq['rabbit_mgmt_timeout']</code></dt> <dd> <p>The timeout for the HTTP connection pool that is used by the rabbitmq-management plugin. Default value: <code>30000</code>.</p> </dd> <dt><code>rabbitmq['reindexer_vhost']</code></dt> <dd> <p>Default value: <code>'/reindexer'</code>.</p> </dd> <dt><code>rabbitmq['ssl_versions']</code></dt> <dd> <p>The SSL versions used by the rabbitmq-management plugin. (See <a href="https://www.rabbitmq.com/ssl.html">RabbitMQ TLS support</a> for more information.) Default value: <code>['tlsv1.2', 'tlsv1.1']</code>.</p> </dd> <dt><code>rabbitmq['user']</code></dt> <dd> <p>Default value: <code>'chef'</code>.</p> </dd> <dt><code>rabbitmq['vhost']</code></dt> <dd> <p>Default value: <code>'/chef'</code>.</p> </dd> <dt><code>rabbitmq['vip']</code></dt> <dd> <p>The virtual IP address. Default value: <code>'127.0.0.1'</code>.</p> </dd> </dl> <h3 id="redis_lb-13_2">redis_lb</h3> Key-value store used in conjunction with Nginx to route requests and populate request data used by the Chef Infra Server. <p>This configuration file has the following settings for <code>redis_lb</code>:</p> <dl> <dt><code>redis_lb['activerehashing']</code></dt> <dd> <p>Enable active rehashing. Default value: <code>'no'</code>.</p> </dd> <dt><code>redis_lb['aof_rewrite_min_size']</code></dt> <dd> <p>The minimum size of the append-only file. Only files larger than this value are rewritten. Default value: <code>'16mb'</code>.</p> </dd> <dt><code>redis_lb['aof_rewrite_percent']</code></dt> <dd> <p>The size of the current append-only file, as compared to the base size. The append-only file is rewritten when the current file exceeds the base size by this value. Default value: <code>'50'</code>.</p> </dd> <dt><code>redis_lb['appendfsync']</code></dt> <dd> <p>The frequency at which the operating system writes data on-disk, instead of waiting for more data. Possible values: <code>no</code> (don’t fsync, let operating system flush data), <code>always</code> (fsync after every write to the append-only log file), and <code>everysec</code> (fsync only once time per second). Default value: <code>'always'</code>.</p> </dd> <dt><code>redis_lb['appendonly']</code></dt> <dd> <p>Dump data asynchronously on-disk or to an append-only log file. Set to <code>yes</code> to dump data to an append-only log file. Default value: <code>'no'</code>.</p> </dd> <dt><code>redis_lb['bind']</code></dt> <dd> <p>Bind Redis to the specified IP address. Default value: <code>'127.0.0.1'</code>.</p> </dd> <dt><code>redis_lb['data_dir']</code></dt> <dd> <p>The directory in which on-disk data is stored. The default value is the recommended value. Default value: <code>'/var/opt/opscode/redis_lb/data'</code>.</p> </dd> <dt><code>redis_lb['databases']</code></dt> <dd> <p>The number of databases. Default value: <code>'16'</code>.</p> </dd> <dt><code>redis_lb['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value: <code>'/var/opt/opscode/redis_lb'</code>.</p> </dd> <dt><code>redis_lb['enable']</code></dt> <dd> <p>Enable a service. Default value: <code>true</code>.</p> </dd> <dt><code>redis_lb['ha']</code></dt> <dd> <p>Run the Chef Infra Server in a high availability topology. When <code>topology</code> is set to <code>ha</code>, this setting defaults to <code>true</code>. Default value: <code>false</code>.</p> </dd> <dt><code>redis_lb['keepalive']</code></dt> <dd> <p>The amount of time (in seconds) to wait for requests on a connection. Default value: <code>'60'</code>.</p> </dd> <dt><code>redis_lb['log_directory']</code></dt> <dd> <p>The directory in which log data is stored. The default value is the recommended value. Default value: <code>'/var/log/opscode/redis_lb'</code>.</p> </dd> <dt><code>redis_lb['log_rotation']</code></dt> <dd> <p>The log rotation policy for this service. Log files are rotated when they exceed <code>file_maxbytes</code>. The maximum number of log files in the rotation is defined by <code>num_to_keep</code>. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">{ <span style="color:#4070a0">'file_maxbytes'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">104857600</span>, <span style="color:#4070a0">'num_to_keep'</span> <span style="color:#666">=&gt;</span> <span style="color:#40a070">10</span> }
</code></pre></div>
</dd> <dt><code>redis_lb['loglevel']</code></dt> <dd> <p>The level of logging to be stored in a log file.. Possible values: <code>debug</code>, <code>notice</code>, <code>verbose</code>, and <code>warning</code>. Default value: <code>'notice'</code>.</p> </dd> <dt><code>redis_lb['maxmemory']</code></dt> <dd> <p>The maximum amount of memory (in bytes). Default value: <code>'8m'</code>.</p> </dd> <dt><code>redis_lb['maxmemory_policy']</code></dt> <dd> <p>The policy applied when the maximum amount of memory is reached. Possible values: <code>allkeys-lru</code> (remove keys, starting with those used least frequently), <code>allkeys-random</code> (remove keys randomly), <code>noeviction</code> (don’t expire, return an error on write operation), <code>volatile-lru</code> (remove expired keys, starting with those used least frequently), <code>volatile-random</code> (remove expired keys randomly), and <code>volatile-ttl</code> (remove keys, starting with nearest expired time). Default value: <code>'noeviction'</code>.</p> </dd> <dt><code>redis_lb['port']</code></dt> <dd> <p>The port on which the service is to listen. Default value: <code>'16379'</code>.</p> </dd> <dt><code>redis_lb['save_frequency']</code></dt> <dd> <p>Set the save frequency. Pattern: <code>{ "seconds" =&gt; "keys", "seconds" =&gt; "keys", "seconds" =&gt; "keys" }</code>. Default value:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">{ <span style="color:#4070a0">'900'</span> <span style="color:#666">=&gt;</span> <span style="color:#4070a0">'1'</span>, <span style="color:#4070a0">'300'</span> <span style="color:#666">=&gt;</span> <span style="color:#4070a0">'10'</span>, <span style="color:#4070a0">'60'</span> <span style="color:#666">=&gt;</span> <span style="color:#4070a0">'1000'</span> }
</code></pre></div>
<p>Which saves the database every 15 minutes if at least one key changes, every 5 minutes if at least 10 keys change, and every 60 seconds if 10000 keys change.</p> </dd> <dt><code>redis_lb['timeout']</code></dt> <dd> <p>The amount of time (in seconds) a client may be idle before timeout. Default value: <code>'300'</code>.</p> </dd> <dt><code>redis_lb['vip']</code></dt> <dd> <p>The virtual IP address. Default value: <code>'127.0.0.1'</code>.</p> </dd> <dt><code>redis_lb['password']</code></dt> <dd> <p>Legacy configuration setting for the Redis password. Default value: <strong>generated</strong>.</p> <p>To override the default value, use the <a href="../ctl_chef_server/index.html#secrets-management">Secrets Management</a> command: <code>chef-server-ctl set-secret redis_lb password</code>.</p> </dd> </dl> <h3 id="upgrades-13_2">upgrades</h3> <p>This configuration file has the following settings for <code>upgrades</code>:</p> <dl> <dt><code>upgrades['dir']</code></dt> <dd> <p>The working directory. The default value is the recommended value. Default value: <code>'/var/opt/opscode/upgrades'</code>.</p> </dd> </dl> <h3 id="user-13_2">user</h3> <p>This configuration file has the following settings for <code>user</code>:</p> <dl> <dt><code>user['home']</code></dt> <dd> <p>The home directory for the user under which Chef Infra Server services run. Default value: <code>/opt/opscode/embedded</code>.</p> </dd> <dt><code>user['shell']</code></dt> <dd> <p>The shell for the user under which Chef Infra Server services run. Default value: <code>/bin/sh</code>.</p> </dd> <dt><code>user['username']</code></dt> <dd> <p>The user name under which Chef Infra Server services run. Default value: <code>opscode</code>.</p> </dd> </dl> <h3 id="required_recipe-13_2">required_recipe</h3> <p><code>required_recipe</code> is a feature that allows an administrator to specify a recipe that will be run by all Chef Infra Clients that connect to it, regardless of the node’s run list. This feature is targeted at expert level practitioners who are delivering isolated configuration changes to the target systems, such as self-contained agent software. Further explanation of the feature can be found in <a href="https://github.com/chef/chef/blob/main/docs/dev/design_documents/server_enforced_recipes.md">Chef Infra Client Development Docs</a>.</p> <p>This configuration file has the following settings for <code>required_recipe</code>:</p> <dl> <dt><code>required_recipe["enable"]</code></dt> <dd> <p>Whether the feature is enabled. Default value: <code>false</code>.</p> </dd> <dt><code>required_recipe["path"]</code></dt> <dd> <p>The location of the recipe to serve. The file must be owned by the root user and group, and may not be group or world-writeable. Default value: <code>nil</code>.</p> </dd> </dl> </div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/server/config_rb_server_optional_settings/" class="_attribution-link">https://docs.chef.io/server/config_rb_server_optional_settings/</a>
  </p>
</div>
