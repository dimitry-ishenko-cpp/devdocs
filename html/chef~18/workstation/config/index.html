<div id="col-content" data-swiftype-index="true"> <div id="configure-chef-workstation"><h1>Configure Chef Workstation</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/chef/chef-workstation/blob/main/docs-chef-io/content/workstation/config.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <h1 id="configuration">Configuration</h1> <p>Chef Workstation App and <code>chef-run</code> configuration is managed in <code>config.toml</code>. Chef Workstation will create <code>config.toml</code> the first time you use <code>chef-run</code>, if one does not already exist. To configure other tools, see their respective pages found in the toolbar under Chef Workstation Tools.</p> <h2 id="default-location">Default location</h2> <p>Chef Workstation looks for the <code>config.toml</code> in a default location.</p> <h3 id="windows">Windows</h3> <ul> <li>Powershell: <code>$env:USERPROFILE\.chef-workstation\config.toml</code>
</li> <li>cmd.exe: <code>%USERPROFILE%\.chef-workstation\config.toml</code>
</li> </ul> <h3 id="linux-and-mac">Linux and Mac</h3> <p><code>/home/$USER/.chef-workstation/config.toml</code></p> <h2 id="settings">Settings</h2> <h3 id="telemetry">Telemetry</h3> <p>Configure telemetry behaviors for Chef Workstation components.</p> <h4 id="example">Example</h4> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-toml" data-lang="toml">[telemetry]
enable = <span style="color:#007020;font-weight:700">true</span>
dev = <span style="color:#007020;font-weight:700">false</span>
</code></pre></div>
<h4 id="enable">enable</h4> <dl> <dt>Description</dt> <dd>When <code>true</code>, anonymous usage data and bug reports are sent to Chef. See Chef’s <a href="../privacy/index.html">Privacy Statement</a> for the type and usage of gathered data.</dd> <dt>Value</dt> <dd>
<code>true</code>, <code>false</code>
</dd> <dt>Default</dt> <dd><code>true</code></dd> <dt>Used by</dt> <dd><code>chef-run</code></dd> <dt><code>CHEF_TELEMETRY_OPT_OUT</code></dt> <dd>When set to any value, <code>chef-run</code> will not capture or send telemetry data.</dd> </dl> <h4 id="dev">dev</h4> <dl> <dt>Description</dt> <dd>When set to any value, <code>chef-run</code> will not capture or send telemetry data. Only set this if you have access to Chef’s internal QA environment - otherwise the telemetry data will not be successfully captured by Chef. If you have access to Chef’s internal QA environment, if <code>dev</code> and <code>enable</code> are both <code>true</code>, anonymous data is reported to Chef’s QA environment.</dd> <dt>Values</dt> <dd>
<code>true</code>, <code>false</code>
</dd> <dt>Default</dt> <dd><code>false</code></dd> <dt>Used by</dt> <dd>
<code>chef-run</code>, <code>Chef Workstation App</code>
</dd> </dl> <h3 id="log">Log</h3> <p>Control logging level and location.</p> <h4 id="example-1">Example</h4> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-toml" data-lang="toml">[log]
level = <span style="color:#4070a0">"debug"</span>
location = <span style="color:#4070a0">"C:\Users\username\chef-workstation.log"</span>
</code></pre></div>
<h4 id="level">level</h4> <dl> <dt>Description</dt> <dd>Determines what messages are logged from locally-run Chef Workstation commands to the to the local log file.</dd> <dt>Values</dt> <dd>
<code>"debug"</code>, <code>"warn"</code>, <code>"info"</code>, <code>"error"</code>, <code>"fatal"</code>
</dd> <dt>Default</dt> <dd><code>"warn"</code></dd> <dt>Used by</dt> <dd><code>chef-run</code></dd> </dl> <h4 id="location">location</h4> <dl> <dt>Description</dt> <dd>The location of the local Chef Workstation log file.</dd> <dt>Values</dt> <dd>Value must be a valid, writable file path.</dd> <dt>Default</dt> <dd>`"$USERHOME/.chef-workstation/logs/default.log"</dd> <dt>Used by</dt> <dd><code>chef-run</code></dd> </dl> <h3 id="cache">Cache</h3> <p>Configure caching options.</p> <h4 id="example-2">Example</h4> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-toml" data-lang="toml">[cache]
path = <span style="color:#4070a0">"/home/users/username/.cache/chef-workstation"</span>
</code></pre></div>
<h4 id="path">path</h4> <dl> <dt>Description</dt> <dd>The base path used to store cached cookbooks and downloads.</dd> <dt>Default</dt> <dd><code>$USERHOME/.chef-workstation/cache</code></dd> <dt>Values</dt> <dd>This must reference a valid, writable directory.</dd> <dt>Used by</dt> <dd><code>chef-run</code></dd> </dl> <h3 id="connection">Connection</h3> <p>Control default connection behaviors.</p> <h4 id="example-3">Example</h4> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-toml" data-lang="toml">[connection]
default_protocol = <span style="color:#4070a0">"winrm"</span>
default_user = <span style="color:#4070a0">"username"</span>
</code></pre></div>
<h4 id="default_protocol">default_protocol</h4> <dl> <dt>Description</dt> <dd>Default protocol for connecting to target hosts.</dd> <dt>Values</dt> <dd>
<code>"ssh"</code>, <code>"winrm"</code>
</dd> <dt>Default</dt> <dd><code>"ssh"</code></dd> <dt>Used by</dt> <dd><code>chef-run</code></dd> <dt>CLI flag</dt> <dd><code>--protocol PROTO</code></dd> </dl> <h4 id="default_user">default_user</h4> <dl> <dt>Description</dt> <dd>Default username for target host authentication.</dd> <dt>Values</dt> <dd>A username that exists on the target hosts.</dd> <dt>Default</dt> <dd>
<code>root</code> (Linux), <code>administrator</code> (Windows)</dd> <dt>Used by</dt> <dd><code>chef-run</code></dd> <dt>CLI flag</dt> <dd><code>--user USERNAME</code></dd> </dl> <h3 id="connectionwinrm">Connection.winrm</h3> <p>Control connection behaviors for the WinRM protocol.</p> <h4 id="example-4">Example</h4> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-toml" data-lang="toml">[connection.winrm]
ssl = <span style="color:#007020;font-weight:700">true</span>
ssl_verify = <span style="color:#007020;font-weight:700">false</span>
</code></pre></div>
<h4 id="ssl">ssl</h4> <dl> <dt>Description</dt> <dd>Enable SSL for WinRM session encryption</dd> <dt>Values</dt> <dd>
<code>true</code>, <code>false</code>
</dd> <dt>Default</dt> <dd><code>false</code></dd> <dt>Used by</dt> <dd><code>chef-run</code></dd> <dt>CLI flag</dt> <dd><code>--[no]-ssl</code></dd> </dl> <h4 id="ssl_verify">ssl_verify</h4> <p>Description :Intended for use in testing environments that use self-signed certificates on Windows nodes.</p> <dl> <dt>Default</dt> <dd><code>true</code></dd> <dt>Values</dt> <dd>
<code>true</code>, <code>false</code>
</dd> <dt>Used by</dt> <dd><code>chef-run</code></dd> <dt>CLI flag</dt> <dd>–ssl-[no]-verify</dd> </dl> <h3 id="chef">Chef</h3> <p>Configure remote Chef running on instances.</p> <h4 id="example-5">Example</h4> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-toml" data-lang="toml">[chef]
trusted_certs_dir = <span style="color:#4070a0">"/home/username/mytrustedcerts"</span>
cookbook_repo_paths = [
  <span style="color:#4070a0">"/home/username/cookbooks"</span>,
  <span style="color:#4070a0">"/var/chef/cookbooks"</span>
]
</code></pre></div>
<h4 id="trusted_certs_dir">trusted_certs_dir</h4> <dl> <dt>Description</dt> <dd>Describes where to find Chef’s trusted certificates. Used to ensure trusted certs are provided to the <code>chef-client</code> run on target nodes.</dd> <dt>Values</dt> <dd>A directory containing the trusted certificates for use in the Chef ecosystem.</dd> <dt>Default</dt> <dd>Look first for <code>.chef/config.rb</code> and use that value if provided; otherwise <code>"/opt/chef-workstation/embedded/ssl/certs/"</code>
</dd> <dt>Used by</dt> <dd><code>chef-run</code></dd> </dl> <h4 id="cookbook_repo_paths">cookbook_repo_paths</h4> <dl> <dt>Description</dt> <dd>Path or paths to use for cookbook resolution. When multiple cookbook paths are provided and a cookbook exists in more than one of them, the cookbook found in the last-most directory will be used. Considering the example, when resolving cookbook <code>mycb</code>: if <code>mycb</code> existed in both <code>/home/username/cookbooks</code> and <code>/var/chef/cookbooks</code>, <code>mycb</code> in <code>/var/chef/cookbooks</code> will be used.</dd> <dt>Values</dt> <dd>A string referencing a valid cookbook path, or an array of such strings. See example for syntax.</dd> <dt>Default</dt> <dd>
<code>cookbook_path</code> value from <code>.chef/config.rb</code>, otherwise not found</dd> <dt>Used by</dt> <dd><code>chef-run</code></dd> <dt>CLI flag</dt> <dd><code>--cookbook-repo-paths PATH1,PATH2,..PATHn</code></dd> </dl> <h3 id="updates">Updates</h3> <p>Control the behavior of automatic update checking for Chef Workstation.</p> <h4 id="example-6">Example</h4> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-toml" data-lang="toml">[updates]
enable = <span style="color:#007020;font-weight:700">true</span>
channel = <span style="color:#4070a0">"current"</span>
</code></pre></div>
<h4 id="enable-1">enable</h4> <dl> <dt>Description</dt> <dd>Enable update checking for Chef Workstation updates.</dd> <dt>Values</dt> <dd>
<code>true</code>, <code>false</code>
</dd> <dt>Default</dt> <dd><code>true</code></dd> <dt>Used by</dt> <dd>Chef Workstation App</dd> </dl> <h4 id="channel">channel</h4> <dl> <dt>Description</dt> <dd>Set the update channel to use when checking for Chef Workstation updates. <code>"stable"</code> is the recommended value. Switch to <code>"current"</code> is not guaranteed to be stable, and should only be used if you are comfortable with the risks associated.</dd> <dt>Values</dt> <dd>
<code>"stable"</code>, <code>"current"</code>
</dd> <dt>Default</dt> <dd><code>"stable"</code></dd> <dt>Used by</dt> <dd>Chef Workstation App</dd> </dl> <h3 id="data_collector">Data_collector</h3> <p>Configure reporting of <code>chef-client</code> runs triggered via <code>chef-run</code>.</p> <h4 id="example-7">Example</h4> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-toml" data-lang="toml">[data_collector]
url = <span style="color:#4070a0">"https://1.1.1.1/data-collector/v0/"</span>
token = <span style="color:#4070a0">"ABCDEF0123456789"</span>
</code></pre></div>
<h4 id="url">url</h4> <dl> <dt>Description</dt> <dd>URL of an Automate <a href="../../automate/data_collection/index.html">data collection</a> endpoint. This URL is provided to the target host, allowing them to report in to Automate when <code>chef-run</code> is used to converge the targets. A valid token generated by automate is required.</dd> <dt>Values</dt> <dd>A valid automate data collector endpoint.</dd> <dt>Default</dt> <dd>not set.</dd> <dt>Used by</dt> <dd><code>chef-run</code></dd> </dl> <h4 id="token">token</h4> <dl> <dt>Description</dt> <dd>An Automate <a href="../../automate/api_tokens/index.html#creating-api-tokens">API token</a>, used on target host to authenticate to the <code>url</code> provided.</dd> <dt>Values</dt> <dd>A valid token generated by Automate.</dd> <dt>Default</dt> <dd>not set.</dd> <dt>Used by</dt> <dd><code>chef-run</code></dd> </dl> <h3 id="dev-1">Dev</h3> <p>These options are intended for development and troubleshooting of Chef Workstation tools. Their usage is not supported and is subject to change.</p> <h4 id="example-8">Example</h4> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-toml" data-lang="toml">[dev]
spinner = <span style="color:#007020;font-weight:700">false</span>
</code></pre></div>
<h4 id="spinner">spinner</h4> <dl> <dt>Description</dt> <dd>Use animated spinners and progress indicators in the terminal output.</dd> <dt>Values</dt> <dd>
<code>true</code>, <code>false</code>
</dd> <dt>Default</dt> <dd><code>true</code></dd> <dt>Used by</dt> <dd><code>chef-run</code></dd> </dl> <h3 id="features">Features</h3> <p>Enable and disable experimental features for Chef Workstation.</p> <h4 id="example-9">Example</h4> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-toml" data-lang="toml">[features]
example = <span style="color:#007020;font-weight:700">true</span>
</code></pre></div>
<dl> <dt>Description</dt> <dd>List of experimental features. Boolean. Default: none. Enable the feature with <code>feature = true</code> and disable with <code>feature = false</code>. <code>example = true</code> enables one feature, which is the <code>example</code> feature. You can also enable or disable any feature from the command line using an environment variable. For example, setting <code>CHEF_FEAT_EXAMPLE=true</code> from the command line enables the <code>example</code> feature for the duration of your terminal session.</dd> <dt>Values</dt> <dd>
<code>name = true</code>, <code>name = false</code>
</dd> <dt>Used by</dt> <dd>The entire Chef Workstation ecosystem.</dd> </dl> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/workstation/config/" class="_attribution-link">https://docs.chef.io/workstation/config/</a>
  </p>
</div>
