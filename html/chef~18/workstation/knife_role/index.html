<div id="col-content" data-swiftype-index="true"> <div id="knife-role"><h1>knife role</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/chef/chef-workstation/blob/main/docs-chef-io/content/workstation/knife_role.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>A role is a way to define certain patterns and processes that exist across nodes in an organization as belonging to a single job function. Each role consists of zero (or more) attributes and a run-list. Each node can have zero (or more) roles assigned to it. When a role is run against a node, the configuration details of that node are compared against the attributes of the role, and then the contents of that role’s run-list are applied to the node’s configuration details. When a Chef Infra Client runs, it merges its own attributes and run-lists with those contained within each assigned role.</p> <p>Use the <code>knife role</code> subcommand to manage the roles that are associated with one or more nodes on a Chef Infra Server.</p> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> To add a role to a node and then build out the run-list for that node, use the <a href="../knife_node/index.html">knife node</a> subcommand and its <code>run_list add</code> argument. </div> </div> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> Review the list of <a href="../knife_options/index.html">common options</a> available to this (and all) knife subcommands and plugins. </div> </div> <h2 id="bulk-delete">bulk delete</h2> <p>Use the <code>bulk delete</code> argument to delete one or more roles that match a pattern defined by a regular expression. The regular expression must be within quotes and not be surrounded by forward slashes (/).</p> <h3 id="syntax">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife role bulk delete REGEX
</code></pre></div>
<h3 id="options">Options</h3> <p>This command does not have any specific options.</p> <h3 id="examples">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Bulk delete roles</strong></p> <p>Use a regular expression to define the pattern used to bulk delete roles:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife role bulk delete <span style="color:#4070a0">"^[0-9]{3}</span>$<span style="color:#4070a0">"</span>
</code></pre></div>
<h2 id="create">create</h2> <p>Use the <code>create</code> argument to add a role to the Chef Infra Server. Role data is saved as JSON on the Chef Infra Server.</p> <h3 id="syntax-1">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife role create ROLE_NAME <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options-1">Options</h3> <p>This argument has the following options:</p> <dl> <dt><code>--description DESCRIPTION</code></dt> <dd> <p>The description of the role. This value populates the description field for the role on the Chef Infra Server.</p> </dd> </dl> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> See <a href="../config_rb_optional_settings/index.html">config.rb</a> for more information about how to add certain knife options as settings in the config.rb file. </div> </div> <h3 id="examples-1">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Create a role</strong></p> <p>To add a role named <code>role1</code>, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife role create role1
</code></pre></div>
<p>In the $EDITOR enter the role data in JSON:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-javascript" data-lang="javascript">{
   <span style="color:#4070a0">"name"</span><span style="color:#666">:</span> <span style="color:#4070a0">"role1"</span>,
   <span style="color:#4070a0">"default_attributes"</span><span style="color:#666">:</span> {
   },
   <span style="color:#4070a0">"json_class"</span><span style="color:#666">:</span> <span style="color:#4070a0">"Chef::Role"</span>,
   <span style="color:#4070a0">"run_list"</span><span style="color:#666">:</span> [<span style="color:#4070a0">"recipe[cookbook_name::recipe_name]"</span>,
                 <span style="color:#4070a0">"role[role_name]"</span>
   ],
   <span style="color:#4070a0">"description"</span><span style="color:#666">:</span> <span style="color:#4070a0">""</span>,
   <span style="color:#4070a0">"chef_type"</span><span style="color:#666">:</span> <span style="color:#4070a0">"role"</span>,
   <span style="color:#4070a0">"override_attributes"</span><span style="color:#666">:</span> {
   }
}
</code></pre></div>
<p>When finished, save it.</p> <h2 id="delete">delete</h2> <p>Use the <code>delete</code> argument to delete a role from the Chef Infra Server.</p> <h3 id="syntax-2">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife role delete ROLE_NAME
</code></pre></div>
<h3 id="options-2">Options</h3> <p>This command does not have any specific options.</p> <h3 id="examples-2">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Delete a role</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife role delete devops
</code></pre></div>
<p>Type <code>Y</code> to confirm a deletion.</p> <h2 id="edit">edit</h2> <p>Use the <code>edit</code> argument to edit role details on the Chef Infra Server.</p> <h3 id="syntax-3">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife role edit ROLE_NAME
</code></pre></div>
<h3 id="options-3">Options</h3> <p>This command does not have any specific options.</p> <h3 id="examples-3">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Edit a role</strong></p> <p>To edit the data for a role named <code>role1</code>, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife role edit role1
</code></pre></div>
<p>Update the role data in JSON:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-javascript" data-lang="javascript">{
   <span style="color:#4070a0">"name"</span><span style="color:#666">:</span> <span style="color:#4070a0">"role1"</span>,
   <span style="color:#4070a0">"description"</span><span style="color:#666">:</span> <span style="color:#4070a0">"This is the description for the role1 role."</span>,
   <span style="color:#4070a0">"json_class"</span><span style="color:#666">:</span> <span style="color:#4070a0">"Chef::Role"</span>,
   <span style="color:#4070a0">"default_attributes"</span><span style="color:#666">:</span> {
   },
   <span style="color:#4070a0">"override_attributes"</span><span style="color:#666">:</span> {
   },
   <span style="color:#4070a0">"chef_type"</span><span style="color:#666">:</span> <span style="color:#4070a0">"role"</span>,
   <span style="color:#4070a0">"run_list"</span><span style="color:#666">:</span> [<span style="color:#4070a0">"recipe[cookbook_name::recipe_name]"</span>,
                <span style="color:#4070a0">"role[role_name]"</span>
   ],
   <span style="color:#4070a0">"env_run_lists"</span><span style="color:#666">:</span> {
   },
}
</code></pre></div>
<p>When finished, save it.</p> <h2 id="from-file">from file</h2> <p>Use the <code>from file</code> argument to create a role using existing JSON data as a template.</p> <h3 id="syntax-4">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife role from file FILE
</code></pre></div>
<h3 id="options-4">Options</h3> <p>This command does not have any specific options.</p> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> See <a href="../config_rb_optional_settings/index.html">config.rb</a> for more information about how to add certain knife options as settings in the config.rb file. </div> </div> <h3 id="examples-4">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Create a role using JSON data</strong></p> <p>To view role details based on the values contained in a JSON file:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife role from file <span style="color:#4070a0">"path to JSON file"</span>
</code></pre></div>
<h2 id="list">list</h2> <p>Use the <code>list</code> argument to view a list of roles that are currently available on the Chef Infra Server.</p> <h3 id="syntax-5">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife role list
</code></pre></div>
<h3 id="options-5">Options</h3> <p>This argument has the following options:</p> <dl> <dt>
<code>-w</code>, <code>--with-uri</code>
</dt> <dd> <p>Show the corresponding URIs.</p> </dd> </dl> <h3 id="examples-5">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>View a list of roles</strong></p> <p>To view a list of roles on the Chef Infra Server and display the URI for each role returned, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife role list -w
</code></pre></div>
<h2 id="show">show</h2> <p>Use the <code>show</code> argument to view the details of a role.</p> <h3 id="syntax-6">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife role show ROLE_NAME
</code></pre></div>
<h3 id="options-6">Options</h3> <p>This argument has the following options:</p> <dl> <dt>
<code>-a ATTR</code>, <code>--attribute ATTR</code>
</dt> <dd> <p>The attribute (or attributes) to show.</p> </dd> </dl> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> See <a href="../config_rb_optional_settings/index.html">config.rb</a> for more information about how to add certain knife options as settings in the config.rb file. </div> </div> <h3 id="examples-6">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Show as JSON data</strong></p> <p>To view information in JSON format, use the <code>-F</code> common option as part of the command like this:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife role show devops -F json
</code></pre></div>
<p>Other formats available include <code>text</code>, <code>yaml</code>, and <code>pp</code>.</p> <p><strong>Show as raw JSON data</strong></p> <p>To view node information in raw JSON, use the <code>-l</code> or <code>--long</code> option:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife role show -l -F json &lt;role_name&gt;
</code></pre></div>
<p>and/or:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife role show -l --format<span style="color:#666">=</span>json &lt;role_name&gt;
</code></pre></div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/workstation/knife_role/" class="_attribution-link">https://docs.chef.io/workstation/knife_role/</a>
  </p>
</div>
