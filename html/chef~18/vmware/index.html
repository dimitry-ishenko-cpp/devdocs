<div id="col-content" data-swiftype-index="true"> <div id="chef-and-vmware"><h1>Chef and VMware</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/chef/chef-web-docs/blob/main/content/vmware.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>VMware, Inc. is a subsidiary of Dell Technologies that provides cloud computing and platform virtualization software and services. This page outlines the different tools that can be used to integrate Chef with the VMware platform.</p> <p>For discussions on VMware and Chef, visit the <a href="https://code.vmware.com/web/code/join">VMware{code}</a> Slack team, located in the <strong>#chef</strong> channel.</p> <h2 id="knife">knife</h2> <p>There are multiple knife plugins that interact with the VMware stack in different ways. The following knife plugins are directly supported by Chef:</p> <h3 id="knife-vsphere">knife-vsphere</h3> <p><a href="https://github.com/chef-partners/knife-vsphere">[GitHub]</a></p> <ul> <li>Supports vCenter &gt; 5.0</li> <li>Most VMware compute use cases are covered</li> <li>The main starting point for Chef and VMware</li> </ul> <p>These are the necessary settings for your <code>config.rb</code> file:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">knife<span style="color:#666">[</span><span style="color:#517918">:vsphere_host</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#4070a0">'vcenter-hostname'</span>
knife<span style="color:#666">[</span><span style="color:#517918">:vsphere_user</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#4070a0">'privileged username'</span> <span style="color:#60a0b0;font-style:italic"># Domain logins may need to be "user@domain.com"</span>
knife<span style="color:#666">[</span><span style="color:#517918">:vsphere_pass</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#4070a0">'password'</span> <span style="color:#60a0b0;font-style:italic"># or %Q(mypasswordwithfunnycharacters)</span>
knife<span style="color:#666">[</span><span style="color:#517918">:vsphere_dc</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#4070a0">'your-datacenter'</span>
knife<span style="color:#666">[</span><span style="color:#517918">:vsphere_insecure</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#007020">true</span> <span style="color:#60a0b0;font-style:italic"># Set this if you have self signed certs</span>
</code></pre></div>
<h4 id="usage-examples">Usage Examples</h4> <p><strong>Clone from a VMware template and bootstrap Chef with generic DHCP options:</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife vsphere vm clone MACHINENAME --template TEMPLATENAME --bootstrap --cips dhcp
</code></pre></div>
<p><strong>Clone a virtual machine from a VMware template, use a customization template called “SPEC” to assist the bootstrapping process, and specify the SSH user and password:</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife vsphere vm clone MACHINENAME --template TEMPLATENAME --bootstrap --cips dhcp <span style="color:#4070a0;font-weight:700">\
</span>--cspec SPEC --connection-user USER --connection-password PASSWORD
</code></pre></div>
<div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> Add a <code>-f FOLDERNAME</code> if you put your <code>--template</code> in a directory other than the root folder. Use <code>--dest-folder FOLDERNAME</code> if you want your VM created in <code>FOLDERNAME</code> instead of the root folder. </div> </div> <p><strong>Clone from a folder into the “Datacenter Root” directory:</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife vsphere vm clone MACHINENAME --template TEMPLATENAME -f /path/to/template <span style="color:#4070a0;font-weight:700">\
</span>--bootstrap --start --cips dhcp --dest-folder /
</code></pre></div>
<p><strong>List the available VMware templates:</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife vsphere template list
Template Name: ubuntu16-template
knife vsphere template list -f FOLDERNAME
Template Name: centos7-template
</code></pre></div>
<p><strong>Delete a machine:</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife vsphere vm delete MACHINENAME
</code></pre></div>
<p>This command can be used with the <code>-P</code> option to remove the machine from the Chef Infra Server.</p> <h3 id="knife-vcenter">knife-vcenter</h3> <p><a href="https://github.com/chef/knife-vcenter">[GitHub]</a></p> <ul> <li>Supports vCenter &gt;= 6.5 REST API</li> <li>Supports the main use cases of knife: <code>bootstrap</code>, <code>create</code>, <code>destroy</code>, and <code>list</code>
</li> <li>If you have the <a href="https://docs.vmware.com/en/VMware-vSphere/6.5/com.vmware.vsphere.vcsa.doc/GUID-223C2821-BD98-4C7A-936B-7DBE96291BA4.html">VCSA</a> or are planning on upgrading to vCenter 6.5+, this is the plugin to use</li> </ul> <p>The main settings for your <code>config.rb</code>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">knife<span style="color:#666">[</span><span style="color:#517918">:vcenter_username</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#4070a0">'user'</span>
knife<span style="color:#666">[</span><span style="color:#517918">:vcenter_password</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#4070a0">'password'</span>
knife<span style="color:#666">[</span><span style="color:#517918">:vcenter_host</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#4070a0">'172.16.20.2'</span>
knife<span style="color:#666">[</span><span style="color:#517918">:vcenter_disable_ssl_verify</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#007020">true</span> <span style="color:#60a0b0;font-style:italic"># if you want to disable SSL checking</span>
</code></pre></div>
<h4 id="usage-examples-1">Usage Examples</h4> <p><strong>Clone a machine:</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife vcenter vm clone example-01 --targethost 172.16.20.3 --folder example --connection-password <span style="color:#4070a0;font-weight:700">\
</span>P@ssw0rd! --datacenter Datacenter --template ubuntu16-template -N example-01
Creating new machine
Waiting <span style="color:#007020;font-weight:700">for</span> network interfaces to become available...
ID: vm-183
Name: example-01
Power State: POWERED_ON
Bootstrapping the server by using bootstrap_protocol: ssh and image_os_type: linux

Waiting <span style="color:#007020;font-weight:700">for</span> sshd to host <span style="color:#666">(</span>10.0.0.167<span style="color:#666">)</span>
...
</code></pre></div>
<p><strong>Delete a machine:</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife vcenter vm delete example-01 -N example-01 --purge
Creating new machine
Waiting <span style="color:#007020;font-weight:700">for</span> network interfaces to become available...
ID: vm-183
Name: example-01
Power State: POWERED_ON
Bootstrapping the server by using bootstrap_protocol: ssh and image_os_type: linux

Waiting <span style="color:#007020;font-weight:700">for</span> sshd to host <span style="color:#666">(</span>10.0.0.167<span style="color:#666">)</span>
WARNING: Deleted node example-01
WARNING: Deleted client example-01
</code></pre></div>
<h3 id="knife-vrealize">knife-vrealize</h3> <p><a href="https://github.com/chef-partners/knife-vrealize">[GitHub]</a></p> <ul> <li>Supports both vRealize Automation and vRealize Orchestrator</li> <li>Supports vRealize Automation 7.0+</li> <li>If you have vRealize Automation &lt; 7.0, you will need to downgrade the <a href="https://github.com/chef-partners/vmware-vra-gem">vmware-vra-gem</a> to version <code>1.7.0</code>
</li> <li>Supports the main use cases of knife: <code>bootstrap</code>, <code>create</code>, <code>destroy</code>, and <code>list</code>
</li> <li>Directly integrates with vRA to call out predetermined blueprints or catalogs</li> <li>Can integrate directly with vRO to call out predetermined workflows</li> </ul> <p>The main settings for your <code>config.rb</code>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">knife<span style="color:#666">[</span><span style="color:#517918">:vra_username</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#4070a0">'user'</span>
knife<span style="color:#666">[</span><span style="color:#517918">:vra_password</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#4070a0">'password'</span>
knife<span style="color:#666">[</span><span style="color:#517918">:vra_base_url</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#4070a0">'https://vra.corp.local'</span>
knife<span style="color:#666">[</span><span style="color:#517918">:vra_tenant</span><span style="color:#666">]</span>   <span style="color:#666">=</span> <span style="color:#4070a0">'tenant'</span>
knife<span style="color:#666">[</span><span style="color:#517918">:vra_disable_ssl_verify</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#007020">true</span> <span style="color:#60a0b0;font-style:italic"># if you want to disable SSL checking.</span>
</code></pre></div>
<p>Additional <code>config.rb</code> settings are required to integrate with vRO:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">knife<span style="color:#666">[</span><span style="color:#517918">:vro_username</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#4070a0">'user'</span>
knife<span style="color:#666">[</span><span style="color:#517918">:vro_password</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#4070a0">'password'</span>
knife<span style="color:#666">[</span><span style="color:#517918">:vro_base_url</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#4070a0">'https://vra.corp.local:8281'</span>
</code></pre></div>
<p>A basic clone example for vRA is:</p> <p>Creates a server from a catalog blueprint. Find the catalog ID with the <code>knife vra catalog list</code> command. After the resource is created, knife will attempt to bootstrap it.</p> <p>Each blueprint may require different parameters to successfully complete provisioning. See your vRA administrator with questions. Knife will attempt to provide any helpful error messages from vRA if they’re available.</p> <p>Common parameters to specify are:</p> <ul> <li>
<code>--cpus</code>: number of CPUs</li> <li>
<code>--memory</code>: amount of RAM in MB</li> <li>
<code>--requested-for</code>: vRA login that should be listed as the owner</li> <li>
<code>--lease-days</code>: number of days for the resource lease</li> <li>
<code>--notes</code>: any optional notes you’d like to be logged with your request</li> <li>
<code>--subtenant-id</code>: all resources must be tied back to a Business Group, or “subtenant.” If your catalog item is tied to a specific Business Group, you do not need to specify this. However, if your catalog item is a global catalog item, then the subtenant ID is not available to knife; you will need to provide it. It usually looks like a UUID. See your vRA administrator for assistance in determining your subtenant ID.</li> <li>
<code>--connection-password</code>: for Linux hosts, the password to use during bootstrap</li> <li>
<code>--winrm-password</code>: for Windows hosts, the password to use during bootstrap</li> </ul> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife vra server create 5dcd1900-3b89-433d-8563-9606ae1249b8 --cpus <span style="color:#40a070">1</span> --memory <span style="color:#40a070">512</span> <span style="color:#4070a0;font-weight:700">\
</span>--requested-for devmgr@corp.local --connection-password my_password --lease-days <span style="color:#40a070">5</span>
Catalog request d282fde8-6fd2-406c-998e-328d1b659078 submitted.
Waiting <span style="color:#007020;font-weight:700">for</span> request to complete.
Current request status: PENDING_PRE_APPROVAL.
Current request status: IN_PROGRESS..
...
</code></pre></div>
<h4 id="usage-examples-2">Usage Examples</h4> <p><strong>Delete a server from vRA:</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife vra server delete 2e1f6632-1613-41d1-a07c-6137c9639609 --purge
Server ID: 2e1f6632-1613-41d1-a07c-6137c9639609
Server Name: hol-dev-43
IP Addresses: 192.168.110.203
Status: ACTIVE
Catalog Name: CentOS 6.6

Do you really want to delete this server? <span style="color:#666">(</span>Y/N<span style="color:#666">)</span> Y
Destroy request f2aa716b-ab24-4232-ac4a-07635a03b4d4 submitted.
Waiting <span style="color:#007020;font-weight:700">for</span> request to complete.
Current request status: PENDING_PRE_APPROVAL.
Current request status: IN_PROGRESS...
...
</code></pre></div>
<p>If you supply the <code>--purge</code> option, the server will also be removed from the Chef Infra Server</p> <p><strong>Execute a vRO workflow:</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife vro workflow execute <span style="color:#4070a0">"knife testing"</span> <span style="color:#bb60d5">key1</span><span style="color:#666">=</span>value1
Starting workflow execution...
Workflow execution 4028eece4effc046014f27da864d0187 started. Waiting <span style="color:#007020;font-weight:700">for</span> it to complete...
Workflow execution complete.

Output Parameters:
outkey1: some value <span style="color:#666">(</span>string<span style="color:#666">)</span>

Workflow Execution Log:
2015-08-13 09:17:57 -0700 info: cloudadmin: Workflow <span style="color:#4070a0">'Knife Testing'</span> has started
2015-08-13 09:17:58 -0700 info: cloudadmin: Workflow <span style="color:#4070a0">'Knife Testing'</span> has completed
</code></pre></div>
<p>This requires the workflow name. You may supply any input parameters, as well. If your workflow name is not unique in your vRO workflow list, you can specify a workflow to use with <code>--vro-workflow-id ID</code>. You can find the workflow ID from within the vRO UI. However, a workflow name is still required by the API.</p> <h2 id="test-kitchen">test-kitchen</h2> <p>The following test-kitchen drivers for VMware are directly supported by Chef:</p> <h3 id="kitchen-vsphere-chef-provisioning-vsphere">kitchen-vsphere (chef-provisioning-vsphere)</h3> <p><a href="https://github.com/chef-partners/chef-provisioning-vsphere">[GitHub]</a></p> <ul> <li>Built into the chef-provisioning-vsphere driver</li> <li>A community driven project, with Chef Partners maintaining the releases</li> <li>Leverages the typical test-kitchen workflow for vCenter &gt; 5.0+</li> <li>There is a <a href="https://rubygems.org/gems/kitchen-vsphere">kitchen-vsphere</a> gem, but it is not supported at this time</li> </ul> <h4 id="usage-examples-3">Usage Examples</h4> <p>There is an <a href="https://github.com/jjasghar/vsphere_testing">example cookbook</a> that attempts to capture everything required. The following is a basic <code>kitchen.yml</code> example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-yaml" data-lang="yaml"><span style="color:#0e84b5;font-weight:700">---</span><span style="color:#062873;font-weight:700">driver</span>:<span style="color:#062873;font-weight:700">name</span>:vsphere<span style="color:#062873;font-weight:700">driver_options</span>:<span style="color:#062873;font-weight:700">host</span>:FQDN or IP of vCenter<span style="color:#062873;font-weight:700">user</span>:<span style="color:#4070a0">'administrator@vsphere.local'</span><span style="color:#062873;font-weight:700">password</span>:<span style="color:#4070a0">'PASSWORD'</span><span style="color:#062873;font-weight:700">insecure</span>:<span style="color:#007020;font-weight:700">true</span><span style="color:#062873;font-weight:700">machine_options</span>:<span style="color:#062873;font-weight:700">start_timeout</span>:<span style="color:#40a070">600</span><span style="color:#062873;font-weight:700">create_timeout</span>:<span style="color:#40a070">600</span><span style="color:#062873;font-weight:700">ready_timeout</span>:<span style="color:#40a070">90</span><span style="color:#062873;font-weight:700">bootstrap_options</span>:<span style="color:#062873;font-weight:700">use_linked_clone</span>:<span style="color:#007020;font-weight:700">true</span><span style="color:#062873;font-weight:700">datacenter</span>:<span style="color:#4070a0">'Datacenter'</span><span style="color:#062873;font-weight:700">template_name</span>:<span style="color:#4070a0">'ubuntu16'</span><span style="color:#062873;font-weight:700">template_folder</span>:<span style="color:#4070a0">'Linux'</span><span style="color:#062873;font-weight:700">resource_pool</span>:<span style="color:#4070a0">'Cluster'</span><span style="color:#062873;font-weight:700">num_cpus</span>:<span style="color:#40a070">2</span><span style="color:#062873;font-weight:700">memory_mb</span>:<span style="color:#40a070">4096</span><span style="color:#062873;font-weight:700">ssh</span>:<span style="color:#062873;font-weight:700">user</span>:ubuntu<span style="color:#062873;font-weight:700">paranoid</span>:<span style="color:#007020;font-weight:700">false</span><span style="color:#062873;font-weight:700">password</span>:PASSWORD<span style="color:#062873;font-weight:700">port</span>:<span style="color:#40a070">22</span><span style="color:#062873;font-weight:700">provisioner</span>:<span style="color:#062873;font-weight:700">name</span>:chef_zero<span style="color:#062873;font-weight:700">sudo_command</span>:sudo<span style="color:#062873;font-weight:700">verifier</span>:<span style="color:#062873;font-weight:700">name</span>:inspec<span style="color:#062873;font-weight:700">transport</span>:<span style="color:#062873;font-weight:700">username</span>:root or ssh enabled user<span style="color:#062873;font-weight:700">password</span>:PASSWORD for root or user<span style="color:#062873;font-weight:700">platforms</span>:- <span style="color:#062873;font-weight:700">name</span>:ubuntu-18.04- <span style="color:#062873;font-weight:700">name</span>:centos-8<span style="color:#062873;font-weight:700">suites</span>:- <span style="color:#062873;font-weight:700">name</span>:default<span style="color:#062873;font-weight:700">run_list</span>:- recipe[COOKBOOK::default]<span style="color:#062873;font-weight:700">attributes</span>:</code></pre></div>
<h3 id="kitchen-vcenter">kitchen-vcenter</h3> <p><a href="https://github.com/chef/kitchen-vcenter">[GitHub]</a></p> <ul> <li>Supports vCenter &gt;= 6.5 REST API</li> <li>Leverages the typical test-kitchen workflow for vCenter &gt;= 6.5+</li> <li>If you have the <a href="https://docs.vmware.com/en/VMware-vSphere/6.5/com.vmware.vsphere.vcsa.doc/GUID-223C2821-BD98-4C7A-936B-7DBE96291BA4.html">VCSA</a> or are planning on upgrading to vCenter 6.5+, use this plugin</li> </ul> <h4 id="usage-examples-4">Usage Examples</h4> <p>The following is a basic <code>kitchen.yml</code> for vCenter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-yaml" data-lang="yaml"><span style="color:#062873;font-weight:700">driver</span>:<span style="color:#062873;font-weight:700">name</span>:vcenter<span style="color:#062873;font-weight:700">vcenter_username</span>:&lt;%= ENV['VCENTER_USER'] || "administrator@vsphere.local" %&gt;<span style="color:#062873;font-weight:700">vcenter_password</span>:&lt;%= ENV['VCENTER_PASSWORD'] || "password" %&gt;<span style="color:#062873;font-weight:700">vcenter_host</span>:vcenter.chef.io<span style="color:#062873;font-weight:700">vcenter_disable_ssl_verify</span>:<span style="color:#007020;font-weight:700">true</span><span style="color:#062873;font-weight:700">driver_config</span>:<span style="color:#062873;font-weight:700">targethost</span>:<span style="color:#40a070">172.16.20.41</span><span style="color:#062873;font-weight:700">datacenter</span>:<span style="color:#4070a0">"Datacenter"</span><span style="color:#062873;font-weight:700">platforms</span>:- <span style="color:#062873;font-weight:700">name</span>:ubuntu-2004<span style="color:#062873;font-weight:700">driver_config</span>:<span style="color:#062873;font-weight:700">template</span>:ubuntu16-template- <span style="color:#062873;font-weight:700">name</span>:centos-8<span style="color:#062873;font-weight:700">driver_config</span>:<span style="color:#062873;font-weight:700">template</span>:centos7-template</code></pre></div>
<h3 id="kitchen-vra">kitchen-vra</h3> <p><a href="https://github.com/chef-partners/kitchen-vra">[GitHub]</a></p> <ul> <li>An integration point with vRA and test-kitchen</li> <li>For companies required to use vRA this is a natural progression for Chef Development</li> </ul> <h4 id="usage-examples-5">Usage Examples</h4> <p>The following is a basic <code>kitchen.yml</code> example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-yaml" data-lang="yaml"><span style="color:#062873;font-weight:700">driver</span>:<span style="color:#062873;font-weight:700">name</span>:vra<span style="color:#062873;font-weight:700">username</span>:user@corp.local<span style="color:#062873;font-weight:700">password</span>:password<span style="color:#062873;font-weight:700">tenant</span>:tenant<span style="color:#062873;font-weight:700">base_url</span>:https://vra.corp.local<span style="color:#062873;font-weight:700">verify_ssl</span>:<span style="color:#007020;font-weight:700">true</span><span style="color:#062873;font-weight:700">platforms</span>:- <span style="color:#062873;font-weight:700">name</span>:centos6<span style="color:#062873;font-weight:700">driver</span>:<span style="color:#062873;font-weight:700">catalog_id</span>:e9db1084-d1c6-4c1f-8e3c-eb8f3dc574f9- <span style="color:#062873;font-weight:700">name</span>:centos7<span style="color:#062873;font-weight:700">driver</span>:<span style="color:#062873;font-weight:700">catalog_id</span>:c4211950-ab07-42b1-ba80-8f5d3f2c8251</code></pre></div>
<h3 id="kitchen-vro">kitchen-vro</h3> <p><a href="https://github.com/chef-partners/kitchen-vro">[GitHub]</a></p> <ul> <li>An integration point with vRO and test-kitchen</li> <li>Leverages specific Workflows in vRO if it’s required by VMware admins</li> </ul> <h4 id="usage-examples-6">Usage Examples</h4> <p>The following is a basic <code>kitchen.yml</code> example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-yaml" data-lang="yaml"><span style="color:#062873;font-weight:700">driver</span>:<span style="color:#062873;font-weight:700">name</span>:vro<span style="color:#062873;font-weight:700">vro_username</span>:user@domain.com<span style="color:#062873;font-weight:700">vro_password</span>:password<span style="color:#062873;font-weight:700">vro_base_url</span>:https://vra.corp.local:8281<span style="color:#062873;font-weight:700">create_workflow_name</span>:Create TK Server<span style="color:#062873;font-weight:700">destroy_workflow_name</span>:Destroy TK Server<span style="color:#062873;font-weight:700">platforms</span>:- <span style="color:#062873;font-weight:700">name</span>:centos<span style="color:#062873;font-weight:700">driver</span>:<span style="color:#062873;font-weight:700">create_workflow_parameters</span>:<span style="color:#062873;font-weight:700">os_name</span>:centos<span style="color:#062873;font-weight:700">os_version</span>:<span style="color:#40a070">6.7</span>- <span style="color:#062873;font-weight:700">name</span>:windows<span style="color:#062873;font-weight:700">driver</span>:<span style="color:#062873;font-weight:700">create_workflow_parameters</span>:<span style="color:#062873;font-weight:700">os_name</span>:windows<span style="color:#062873;font-weight:700">os_version</span>:server2012<span style="color:#062873;font-weight:700">cpus</span>:<span style="color:#40a070">4</span><span style="color:#062873;font-weight:700">memory</span>:<span style="color:#40a070">4096</span></code></pre></div>
<h2 id="chef-inspec">Chef InSpec</h2> <p>The Chef InSpec VMware plugin is used to verify the vCenter and ESXi VMware stack.</p> <h3 id="inspec-vmware">inspec-vmware</h3> <p><a href="https://github.com/chef/inspec-vmware">[GitHub]</a></p> <ul> <li>Supports vCenter &gt; 5.0</li> <li>11 resources available at the time of writing, with more planned</li> </ul> <h4 id="usage-examples-7">Usage Examples</h4> <p>An example demo control:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">control <span style="color:#4070a0">'vmware-1'</span> <span style="color:#007020;font-weight:700">do</span>
  impact <span style="color:#40a070">0</span><span style="color:#666">.</span><span style="color:#40a070">7</span>
  title <span style="color:#4070a0">'Checks that soft power off is disabled'</span>
  describe vmware_vm_advancedsetting({ <span style="color:#517918">datacenter</span>: <span style="color:#4070a0">'ha-datacenter'</span>, <span style="color:#517918">vm</span>: <span style="color:#4070a0">'testvm'</span> }) <span style="color:#007020;font-weight:700">do</span>
    its(<span style="color:#4070a0">'softPowerOff'</span>) { should cmp <span style="color:#4070a0">'false'</span> }
  <span style="color:#007020;font-weight:700">end</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<h2 id="chef-integrations-inside-of-the-vmware-suite">Chef integrations inside of the VMware Suite</h2> <h3 id="vra-example-blueprints">vRA Example Blueprints</h3> <ul> <li><a href="https://code.vmware.com/samples?id=1371">Linux</a></li> <li><a href="https://code.vmware.com/samples?id=1390">Windows</a></li> </ul> <h3 id="vro-plugin">vRO plugin</h3> <ul> <li>The <a href="https://solutionexchange.vmware.com/store/products/chef-plugin-for-vrealize-orchestrator">Chef plugin for vRealize Orchestrator</a> (vRO) is a VMware-supplied plugin</li> <li>If you use vRO this provides the majority of the necessary features</li> </ul> <p>For more information, see the plugin demo on <a href="https://www.youtube.com/watch?v=HlvoZ4Zdwc4">YouTube</a>.</p> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/vmware/" class="_attribution-link">https://docs.chef.io/vmware/</a>
  </p>
</div>
