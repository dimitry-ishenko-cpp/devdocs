<div id="col-content" data-swiftype-index="true"> <div id="scaffolding"><h1>Scaffolding</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/habitat-sh/habitat/tree/main/components/docs-chef-io/content/habitat/scaffolding.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>Chef Habitat scaffoldings are standardized plans for automated building and running your application. Each scaffolding is tuned to the way your application was built, which allows it to create the appropriate <a href="../application_lifecycle_hooks/index.html">application lifecycle hooks</a> and add in the correct runtime dependencies when building the package for your application. Scaffoldings also provide some default health check hooks where appropriate to ensure your application is functioning reliably. Customized Scaffolding can be created to facilitate re-usability of common patterns in your organization for developing, building, and running your applications.</p> <h2 id="automated-scaffolding">Automated Scaffolding</h2> <p>While we are targeting many platforms for automated scaffolding we currently support Ruby, Node.js and Gradle.</p> <ul> <li><a href="https://github.com/habitat-sh/core-plans/blob/main/scaffolding-ruby/doc/reference.md">core/scaffolding-ruby</a></li> <li><a href="https://github.com/habitat-sh/core-plans/tree/main/scaffolding-node">core/scaffolding-node</a></li> <li><a href="https://github.com/habitat-sh/core-plans/blob/main/scaffolding-gradle">core/scaffolding-gradle</a></li> </ul> <h2 id="variables">Variables</h2> <p>Scaffolding provides certain customizable variables for language-specific behavior. Please see the appropriate scaffolding documentation for details.</p> <h3 id="overriding-scaffolding-callbacks">Overriding Scaffolding Callbacks</h3> <p>If you want to override phases of a scaffold’s build in your plans, make sure to override the main <code>do_xxx</code> phase, not the callback directly. ex override <code>do_install()</code> instead of <code>do_default_install</code> or <code>do_node_install</code>.</p> <h3 id="scaffolding-internals">Scaffolding Internals</h3> <p>A language or framework scaffolding is shipped as a Chef Habitat package, which means that each scaffolding runtime dependency becomes a build dependency for the application being built.</p> <h2 id="libscaffoldingsh-file">lib/scaffolding.sh File</h2> <p>To create scaffolding, a package must contain a <code>lib/scaffolding.sh</code> file which gets sourced by the build program running Bash.</p> <h2 id="scaffolding_load-function">scaffolding_load() Function</h2> <p>A optional function named <code>scaffolding_load()</code> may be created in <code>lib/scaffolding.sh</code> which will be called early in the build program which allows a Scaffolding author to control and augment the <code>pkg_deps</code> and <code>pkg_build_deps</code> arrays. At this point, no other build or run dependencies have been resolved so the code in this function can only rely on what the build program provides or software pulled in via the Scaffolding’s Plan.</p> <h2 id="default-build-phases-implementations">Default Build Phases Implementations</h2> <p>The remainder of the <code>lib/scaffolding.sh</code> contains one or more default implementations for the build phases. These include, but are not limited to:</p> <ul> <li><code>do_default_prepare()</code></li> <li><code>do_default_build()</code></li> <li><code>do_default_install()</code></li> </ul> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/habitat/scaffolding/" class="_attribution-link">https://docs.chef.io/habitat/scaffolding/</a>
  </p>
</div>
