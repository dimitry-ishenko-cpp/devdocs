<div id="col-content" data-swiftype-index="true"> <div id="supervisor-cryptography"><h1>Supervisor Cryptography</h1></div> <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/habitat-sh/habitat/tree/main/components/docs-chef-io/content/habitat/sup_crypto.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>Chef Habitat implements cryptography using a Rust <a href="https://github.com/jedisct1/libsodium">implementation</a> of <a href="https://nacl.cr.yp.to/">NaCl</a> called <code>libsodium</code>. <code>libsodium</code> provides a fast, modern framework for encryption, decryption, signing, and verification.</p> <p>Chef Habitat uses both symmetric encryption (for wire encryption) and asymmetric encryption (for everything else). If you are not familiar with the difference between the two, please consult <a href="https://support.microsoft.com/kb/246071">this article</a>.</p> <h3 id="message-encryption">Message Encryption</h3> <p>When you have either wire encryption or service group encryption turned on, the messages use the Curve25519, Salsa20, and Poly1305 ciphers specified in <a href="https://nacl.cr.yp.to/valid.html">Cryptography in NaCl</a>.</p> <h3 id="package-signing">Package Signing</h3> <p>Chef Habitat packages are signed using <a href="https://blake2.net/">BLAKE2b</a> checksums. BLAKE2b is a cryptographic hash function faster than MD5, SHA-1, SHA-2 and SHA3, yet provides at least as much security as the latest standard SHA-3.</p> <p>You can examine the first four lines of a <code>.hart</code> file to extract the signature from it, because it is an <code>xz</code>-compressed tarball with a metadata header. The <code>hab pkg header</code> command will do this for you.</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">hab pkg header somefile.hart
</code></pre></div>
<p>outputs:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">Â» Reading package header <span style="color:#007020;font-weight:700">for</span> somefile.hart

Package        : somefile.hart
Format Version : HART-1
Key Name       : myorigin-19780608081445
Hash Type      : BLAKE2b
Raw Signature  : <span style="color:#bb60d5">a8yDoiA0Mv0CcW6xVyfkSOIZ0LW0beef4RPtvKL56MxemgG6dMVlKG1Ibplp7DUByr5az0kI5dmJKXgK6KURDzM1N2Y2MGMxYWJiMTNlYjQxMjliZTMzNGY0MWJlYTAzYmI4NDZlZzM2MDRhM2Y5M2VlMDkyNDFlYmVmZDk1Yzk</span><span style="color:#666">=</span>
</code></pre></div>
<p>The <code>.hart</code> file format is designed in this way to allow you to extract both the signature and the payload separately for inspection. To extract only the <code>xz</code>-compressed content, bypassing the signature, you could type this:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">tail -n +6 somefile.hart | xzcat | tar x
</code></pre></div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/habitat/sup_crypto/" class="_attribution-link">https://docs.chef.io/habitat/sup_crypto/</a>
  </p>
</div>
