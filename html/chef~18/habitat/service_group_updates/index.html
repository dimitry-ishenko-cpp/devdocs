<div id="col-content" data-swiftype-index="true"> <div id="service-group-updates"><h1>Service Group Updates</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/habitat-sh/habitat/tree/main/components/docs-chef-io/content/habitat/service_group_updates.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>The Chef Habitat Supervisor can be configured to leverage an optional <em>update strategy</em>, which describes how the Supervisor and its peers within a service group should respond when a new version of a package is available.</p> <p>To use an update strategy, configure the Supervisor to subscribe to Chef Habitat Builder, and more specifically, a channel for new versions.</p> <h2 id="configuring-an-update-strategy">Configuring an Update Strategy</h2> <p>Chef Habitat supports three update strategies: <code>none</code>, <code>rolling</code>, and <code>at-once</code>.</p> <p>To start a Supervisor with the auto-update strategy, pass the <code>--strategy</code> argument to a Supervisor run command, and optionally specify the depot URL:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">hab sup run --strategy rolling --url https://bldr.habitat.sh
hab svc load &lt;ORIGIN&gt;/&lt;NAME&gt;
</code></pre></div>
<h3 id="none-strategy">None Strategy</h3> <p>This strategy means your package will not automatically be updated when a newer version is available. By default, Supervisors start with their update strategy set to <code>none</code> unless explicitly set to one of the other two update strategies.</p> <h3 id="rolling-strategy">Rolling Strategy</h3> <p>This strategy requires Supervisors to update to a newer version of their package one at a time in their service group. An update leader is elected which all Supervisors within a service group will update around. All update followers will first ensure they are running the same version of a service that their leader is running, and then the leader will poll Builder for a newer version of the service’s package.</p> <p>Once the update leader finds a new version, it will update and wait until all other alive members in the service group have also been updated before once again attempting to find a newer version of software to update to. Updates will happen more or less one at a time until completion with the exception of a new node being introduced into the service group during the middle of an update.</p> <p>If your service group is also running with the <code>--topology leader</code> flag, the leader of that election will never become the update leader, so all followers within a leader topology will update first.</p> <p>It’s important to note that because we must perform a leader election to determine an update leader, <em>you must have at least 3 Supervisors running a service group to take advantage of the rolling update strategy</em>.</p> <h3 id="at-once-strategy">At-Once Strategy</h3> <p>This strategy does no peer coordination with other Supervisors in the service group; it merely updates the underlying Chef Habitat package whenever it detects that a new version has either been published to a depot or installed to the local Chef Habitat <code>pkg</code> cache. No coordination between Supervisors is done, each Supervisor will poll Builder on their own.</p> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/habitat/service_group_updates/" class="_attribution-link">https://docs.chef.io/habitat/service_group_updates/</a>
  </p>
</div>
