<div id="col-content" data-swiftype-index="true"> <div id="knife-supermarket"><h1>knife supermarket</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/chef/chef-workstation/blob/main/docs-chef-io/content/workstation/knife_supermarket.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>The <code>knife supermarket</code> subcommand is used to interact with cookbooks that are located in on the public Supermarket as well as private Chef Supermarket sites. A user account is required for any community actions that write data to the Chef Supermarket; however, the following arguments do not require a user account: <code>download</code>, <code>search</code>, <code>install</code>, and <code>list</code>.</p> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> Please consider managing community cookbooks using the version of Berkshelf that ships with Chef Workstation. For more information about Chef Workstation, see <a href="../workstation/index.html">About Chef Workstation</a>. </div> </div> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> Review the list of <a href="../workstation/knife_options/index.html">common options</a> available to this (and all) knife subcommands and plugins. </div> </div> <h2 id="download">download</h2> <p>Use the <code>download</code> argument to download a cookbook from Chef Supermarket. A cookbook will be downloaded as a tar.gz archive and placed in the current working directory. If a cookbook (or cookbook version) has been deprecated and the <code>--force</code> option is not used, knife will alert the user that the cookbook is deprecated and then will provide the name of the most recent non-deprecated version of that cookbook.</p> <h3 id="syntax">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife supermarket download COOKBOOK_NAME <span style="color:#666">[</span>COOKBOOK_VERSION<span style="color:#666">]</span> <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options">Options</h3> <p>This argument has the following options:</p> <dl> <dt><code>COOKBOOK_VERSION</code></dt> <dd> <p>The version of a cookbook to be downloaded. If a cookbook has only one version, this option does not need to be specified. If a cookbook has more than one version and this option is not specified, the most recent version of the cookbook is downloaded.</p> </dd> <dt>
<code>-f FILE</code>, <code>--file FILE</code>
</dt> <dd> <p>The file to which a cookbook download is written.</p> </dd> <dt><code>--force</code></dt> <dd> <p>Overwrite an existing directory.</p> </dd> <dt>
<code>-m</code>, <code>--supermarket-site</code>
</dt> <dd> <p>The URL at which the Chef Supermarket is located. Default value: <code>https://supermarket.chef.io</code>.</p> </dd> </dl> <h3 id="examples">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Download a cookbook</strong></p> <p>To download the cookbook <code>mysql</code>, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife supermarket download mysql
</code></pre></div>
<h2 id="install">install</h2> <p>Use the <code>install</code> argument to install a cookbook that has been downloaded from Chef Supermarket to a local git repository . This action uses the git version control system in conjunction with Chef Supermarket site to install community-contributed cookbooks to the local chef-repo. Using this argument does the following:</p> <ol> <li>A new “pristine copy” branch is created in git for tracking the upstream.</li> <li>All existing versions of a cookbook are removed from the branch.</li> <li>The cookbook is downloaded from Chef Supermarket in the tar.gz format.</li> <li>The downloaded cookbook is untarred and its contents are committed to git and a tag is created.</li> <li>The “pristine copy” branch is merged into the master branch.</li> </ol> <p>This process allows the upstream cookbook in the master branch to be modified while letting git maintain changes as a separate patch. When an updated upstream version becomes available, those changes can be merged while maintaining any local modifications.</p> <h3 id="syntax-1">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife supermarket install COOKBOOK_NAME <span style="color:#666">[</span>COOKBOOK_VERSION<span style="color:#666">]</span> <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options-1">Options</h3> <p>This argument has the following options:</p> <dl> <dt>
<code>-b</code>, <code>--use-current-branch</code>
</dt> <dd> <p>Ensure that the current branch is used.</p> </dd> <dt>
<code>-B BRANCH</code>, <code>--branch BRANCH</code>
</dt> <dd> <p>The name of the default branch. This defaults to the master branch.</p> </dd> <dt><code>COOKBOOK_VERSION</code></dt> <dd> <p>The version of the cookbook to be installed. If a version is not specified, the most recent version of the cookbook is installed.</p> </dd> <dt>
<code>-D</code>, <code>--skip-dependencies</code>
</dt> <dd> <p>Ensure that all cookbooks to which the installed cookbook has a dependency are not installed.</p> </dd> <dt>
<code>-m</code>, <code>--supermarket-site</code>
</dt> <dd> <p>The URL at which the Chef Supermarket is located. Default value: <code>https://supermarket.chef.io</code>.</p> </dd> <dt>
<code>-o PATH:PATH</code>, <code>--cookbook-path PATH:PATH</code>
</dt> <dd> <p>The directory in which cookbooks are created. This can be a colon-separated path.</p> </dd> </dl> <h3 id="examples-1">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Install a cookbook</strong></p> <p>To install the cookbook <code>mysql</code>, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife supermarket install mysql
</code></pre></div>
<h2 id="list">list</h2> <p>Use the <code>list</code> argument to view a list of cookbooks that are currently available at Chef Supermarket.</p> <h3 id="syntax-2">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife supermarket list <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options-2">Options</h3> <p>This argument has the following options:</p> <dl> <dt>
<code>-m</code>, <code>--supermarket-site</code>
</dt> <dd> <p>The URL at which the Chef Supermarket is located. Default value: <code>https://supermarket.chef.io</code>.</p> </dd> <dt>
<code>-w</code>, <code>--with-uri</code>
</dt> <dd> <p>Show the corresponding URIs.</p> </dd> </dl> <h3 id="examples-2">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>View a list of cookbooks</strong></p> <p>To view a list of cookbooks at the <a href="https://supermarket.chef.io/cookbooks">Chef Supermarket</a> server, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife supermarket list
</code></pre></div>
<p>to return a list similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">1password                            minecraft
<span style="color:#40a070">301</span>                                  mineos
7-zip                                minidlna
AWS_see_spots_run                    minitest
AmazonEC2Tag                         minitest-handler
Appfirst-Cookbook                    mirage
CVE-2014-3566-poodle                 mlocate
CVE-2015-0235                        mod_security
Obfsproxy                            mod_security2
R                                    modcloth-hubot
Rstats                               modcloth-nad
SysinternalsBginfo                   modman
VRTSralus                            modules
abiquo                               mogilefs
acadock                              mongodb
accel-ppp                            mongodb-10gen
accounts                             mongodb-agents
accumulator                          monit
...
</code></pre></div>
<h2 id="search">search</h2> <p>Use the <code>search</code> argument to search for a cookbooks located at Chef Supermarket. A search query is used to return a list of these cookbooks and uses the same syntax as the <code>knife search</code> subcommand.</p> <h3 id="syntax-3">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife supermarket search SEARCH_QUERY <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options-3">Options</h3> <p>This argument has the following options:</p> <dl> <dt>
<code>-m</code>, <code>--supermarket-site</code>
</dt> <dd> <p>The URL at which the Chef Supermarket is located. Default value: <code>https://supermarket.chef.io</code>.</p> </dd> </dl> <h3 id="examples-3">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Search for cookbooks</strong></p> <p>To search for a cookbook, use a command similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife supermarket search mysql
</code></pre></div>
<p>where <code>mysql</code> is the search term. This will return something similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">mysql:
  cookbook:             https://supermarket.chef.io/api/v1/cookbooks/mysql
  cookbook_description: Provides mysql_service, mysql_config, and mysql_client resources
  cookbook_maintainer:  chef
  cookbook_name:        mysql
mysql-apt-config:
  cookbook:             https://supermarket.chef.io/api/v1/cookbooks/mysql-apt-config
  cookbook_description: Installs/Configures mysql-apt-config
  cookbook_maintainer:  tata
  cookbook_name:        mysql-apt-config
mysql-multi:
  cookbook:             https://supermarket.chef.io/api/v1/cookbooks/mysql-multi
  cookbook_description: MySQL replication wrapper cookbook
  cookbook_maintainer:  rackops
  cookbook_name:        mysql-multi
</code></pre></div>
<h2 id="share">share</h2> <p>Use the <code>share</code> argument to add a cookbook to Chef Supermarket. This action will require a user account and a certificate for <a href="https://supermarket.chef.io/">Chef Supermarket</a>. By default, knife will use the user name and API key that is identified in the configuration file used during the upload; otherwise these values must be specified on the command line or in an alternate configuration file. If a cookbook already exists in Chef Supermarket, then only an owner or maintainer of that cookbook can make updates.</p> <h3 id="syntax-4">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife supermarket share COOKBOOK_NAME CATEGORY <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options-4">Options</h3> <p>This argument has the following options:</p> <dl> <dt><code>CATEGORY</code></dt> <dd> <p>The cookbook category: <code>"Databases"</code>, <code>"Web Servers"</code>, <code>"Process Management"</code>, <code>"Monitoring &amp; Trending"</code>, <code>"Programming Languages"</code>, <code>"Package Management"</code>, <code>"Applications"</code>, <code>"Networking"</code>, <code>"Operating Systems &amp; Virtualization"</code>, <code>"Utilities"</code>, or <code>"Other"</code>.</p> </dd> <dt>
<code>-m</code>, <code>--supermarket-site</code>
</dt> <dd> <p>The URL at which the Chef Supermarket is located. Default value: <code>https://supermarket.chef.io</code>.</p> </dd> <dt>
<code>-o PATH:PATH</code>, <code>--cookbook-path PATH:PATH</code>
</dt> <dd> <p>The directory in which cookbooks are created. This can be a colon-separated path.</p> </dd> </dl> <h3 id="examples-4">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Share a cookbook</strong></p> <p>To share a cookbook named <code>my_apache2_cookbook</code> and add it to the <code>Web Servers</code> category in Chef Supermarket:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife supermarket share <span style="color:#4070a0">"my_apache2_cookbook"</span> <span style="color:#4070a0">"Web Servers"</span>
</code></pre></div>
<h2 id="show">show</h2> <p>Use the <code>show</code> argument to view information about a cookbook located at Chef Supermarket.</p> <h3 id="syntax-5">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife supermarket show COOKBOOK_NAME <span style="color:#666">[</span>COOKBOOK_VERSION<span style="color:#666">]</span> <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options-5">Options</h3> <p>This argument has the following options:</p> <dl> <dt><code>COOKBOOK_VERSION</code></dt> <dd> <p>The version of a cookbook to be shown. If a cookbook has only one version, this option does not need to be specified. If a cookbook has more than one version and this option is not specified, a list of cookbook versions is returned.</p> </dd> <dt>
<code>-m</code>, <code>--supermarket-site</code>
</dt> <dd> <p>The URL at which the Chef Supermarket is located. Default value: <code>https://supermarket.chef.io</code>.</p> </dd> </dl> <h3 id="examples-5">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Show cookbook data</strong></p> <p>To show the details for a cookbook named <code>mysql</code>:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife supermarket show mysql
</code></pre></div>
<p>to return something similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">average_rating:
category:      Other
created_at:    2009-10-28T19:16:54.000Z
deprecated:    <span style="color:#007020">false</span>
description:   Provides mysql_service, mysql_config, and mysql_client resources
external_url:  https://github.com/chef-cookbooks/mysql
issues_url:    https://github.com/chef-cookbooks/mysql/issues
latest_version:  https://supermarket.chef.io/api/v1/cookbooks/mysql/versions/8.5.1
maintainer:    sous-chefs
metrics:
  collaborators: <span style="color:#40a070">2</span>
  downloads:
    total:  <span style="color:#40a070">128998032</span>
  versions:
    0.10.0: <span style="color:#40a070">927561</span>
    0.15.0: <span style="color:#40a070">927536</span>
    0.20.0: <span style="color:#40a070">927321</span>
    0.21.0: <span style="color:#40a070">927298</span>
    0.21.1: <span style="color:#40a070">927311</span>
    0.21.2: <span style="color:#40a070">927424</span>
    0.21.3: <span style="color:#40a070">927441</span>
    0.21.5: <span style="color:#40a070">927326</span>
    0.22.0: <span style="color:#40a070">927297</span>
    0.23.0: <span style="color:#40a070">927353</span>
    0.23.1: <span style="color:#40a070">927862</span>
    0.24.0: <span style="color:#40a070">927316</span>
</code></pre></div>
<p><strong>Show cookbook version data</strong></p> <p>To show the details for a cookbook version, run a command similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife supermarket show mysql 8.5.1
</code></pre></div>
<p>where <code>mysql</code> is the cookbook and <code>8.5.1</code> is the cookbook version. This will return something similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">average_rating:
cookbook:        https://supermarket.chef.io/api/v1/cookbooks/mysql
file:            https://supermarket.chef.io/api/v1/cookbooks/mysql/versions/8.5.1/download
license:         Apache-2.0
published_at:    2017-08-23T19:01:28Z
quality_metrics:
  failed: <span style="color:#007020">false</span>
  feedback: passed the No Binaries metric. Contains no obvious binaries.
  name:   No Binaries

  failed: <span style="color:#007020">false</span>
  feedback: mysql passed the publish metric
  name:   Publish

  failed: <span style="color:#007020">false</span>
  feedback: mysql supports at least one platform.
  name:   Supported Platforms

  failed: <span style="color:#007020">false</span>
  feedback: passed the Collaborators Metric with <span style="color:#40a070">2</span> collaborators.
  name:   Collaborator Number

  failed: <span style="color:#007020">false</span>
  feedback:
  Run with Foodcritic Version 14.0.0 with tags metadata,correctness ~FC031 ~FC045 and failure tags any
  name:   Foodcritic

  failed: <span style="color:#007020">false</span>
  feedback: passed the CONTRIBUTING.md file metric.
  name:   Contributing File

  failed: <span style="color:#007020">false</span>
  feedback: passed the version tag metric.
  name:   Version Tag

  failed: <span style="color:#007020">false</span>
  feedback: passed the TESTING.md file metric.
  name:   Testing File
supports:
  amazon:     &gt;<span style="color:#666">=</span> 0.0.0
  centos:     &gt;<span style="color:#666">=</span> 6.0
  debian:     &gt;<span style="color:#666">=</span> 7.0
  fedora:     &gt;<span style="color:#666">=</span> 0.0.0
  opensuseleap: &gt;<span style="color:#666">=</span> 0.0.0
  oracle:     &gt;<span style="color:#666">=</span> 6.0
  redhat:     &gt;<span style="color:#666">=</span> 6.0
  scientific: &gt;<span style="color:#666">=</span> 6.0
  suse:       &gt;<span style="color:#666">=</span> 12.0
  ubuntu:     &gt;<span style="color:#666">=</span> 12.04
tarball_file_size: <span style="color:#40a070">23763</span>
version:         8.5.1
</code></pre></div>
<h2 id="unshare">unshare</h2> <p>Use the <code>unshare</code> argument to stop the sharing of a cookbook located at Chef Supermarket. Only the maintainer of a cookbook may perform this action.</p> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> Unsharing a cookbook will break a cookbook that has set a dependency on that cookbook or cookbook version. </div> </div> <h3 id="syntax-6">Syntax</h3> <p>This argument has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife supermarket unshare COOKBOOK_NAME/versions/VERSION <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h3 id="options-6">Options</h3> <p>This argument has the following options:</p> <dl> <dt>
<code>-m</code>, <code>--supermarket-site</code>
</dt> <dd> <p>The URL at which the Chef Supermarket is located. Default value: <code>https://supermarket.chef.io</code>.</p> </dd> </dl> <h3 id="examples-6">Examples</h3> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Unshare a cookbook</strong></p> <p>To unshare a cookbook named <code>my_apache2_cookbook</code>, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife supermarket unshare <span style="color:#4070a0">"my_apache2_cookbook"</span> <span style="color:#4070a0">"Web Servers"</span>
</code></pre></div>
<p><strong>Unshare a cookbook version</strong></p> <p>To unshare cookbook version <code>0.10.0</code> for the <code>my_apache2_cookbook</code> cookbook, enter:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife supermarket unshare <span style="color:#4070a0">"my_apache2_cookbook/versions/0.10.0"</span>
</code></pre></div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/knife_supermarket/" class="_attribution-link">https://docs.chef.io/knife_supermarket/</a>
  </p>
</div>
