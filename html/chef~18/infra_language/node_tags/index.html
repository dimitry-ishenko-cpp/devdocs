<div id="col-content" data-swiftype-index="true"> <div id="chef-infra-language-node-tags"><h1>Chef Infra Language: Node Tags</h1></div> <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/chef/chef-web-docs/blob/main/content/infra_language/node_tags.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>A tag is a custom description that is applied to a node. A tag, once applied, can be helpful when managing nodes using knife or when building recipes by providing alternate methods of grouping similar types of information.</p> <p>Tags can be added and removed. Machines can be checked to see if they already have a specific tag. To use tags in your recipe simply add the following:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">tag(<span style="color:#4070a0">'mytag'</span>)
</code></pre></div>
<p>To test if a machine is tagged, add the following:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">tagged?(<span style="color:#4070a0">'mytag'</span>)
</code></pre></div>
<p>to return <code>true</code> or <code>false</code>. <code>tagged?</code> can also use an array as an argument.</p> <p>To remove a tag:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">untag(<span style="color:#4070a0">'mytag'</span>)
</code></pre></div>
<p>For example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">tag(<span style="color:#4070a0">'machine'</span>)

<span style="color:#007020;font-weight:700">if</span> tagged?(<span style="color:#4070a0">'machine'</span>)
  <span style="color:#60add5">Chef</span><span style="color:#666">::</span><span style="color:#60add5">Log</span><span style="color:#666">.</span>info(<span style="color:#4070a0">"Hey I'm </span><span style="color:#70a0d0;font-style:italic">#{</span>node<span style="color:#666">[</span><span style="color:#4070a0">'tags'</span><span style="color:#666">]</span><span style="color:#70a0d0;font-style:italic">}</span><span style="color:#4070a0">"</span>)
<span style="color:#007020;font-weight:700">end</span>

untag(<span style="color:#4070a0">'machine'</span>)

<span style="color:#007020;font-weight:700">unless</span> tagged?(<span style="color:#4070a0">'machine'</span>)
  <span style="color:#60add5">Chef</span><span style="color:#666">::</span><span style="color:#60add5">Log</span><span style="color:#666">.</span>info(<span style="color:#4070a0">'I am not tagged'</span>)
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<p>Will return something like this:</p> <pre tabindex="0" class="highlight" data-language="ruby"><code class="language-none" data-lang="none">[Thu, 22 Jul 2010 18:01:45 +0000] INFO: Hey I'm machine
[Thu, 22 Jul 2010 18:01:45 +0000] INFO: I has no tagz
</code></pre> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/infra_language/node_tags/" class="_attribution-link">https://docs.chef.io/infra_language/node_tags/</a>
  </p>
</div>
