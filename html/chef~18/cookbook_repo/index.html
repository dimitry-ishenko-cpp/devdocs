<div id="col-content" data-swiftype-index="true"> <div id="get-started"><h1>Get Started</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/chef/chef-web-docs/blob/main/content/cookbook_repo.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>The <code>cookbooks/</code> directory of your Chef Infra repository is used to store the cookbooks that Chef Infra Client uses in configuring the various systems in the organization.</p> <h2 id="chef-repository">Chef Repository</h2> <p>The the <code>\cookbook</code> directory is automatically generated as part of your Chef Infra repository.</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef generate repo REPO_NAME
</code></pre></div>
<h3 id="cookbook-directory-structure">Cookbook Directory Structure</h3> <p>The default structure of the cookbooks directory is:</p> <pre tabindex="0" class="highlight" data-language="ruby"><code>. chef-repo
  ├ cookbooks
    ├ example
    | ├ attributes
    | | └ default.rb
    | ├ recipes
    | | └ default.rb
    ├ metadata.rb
    └ README.rb
</code></pre>
<h2 id="cookbook-commands">Cookbook Commands</h2> <p>Use the following commands to create a cookbook, install a cookbook from Supermarket, and/or download cookbooks.</p> <h3 id="create">Create</h3> <p>Chef Workstation generates the <code>cookbooks</code> directory as part of your Chef Infra repository, the <code>chef-repo</code>.</p> <p>Generate a <code>chef-repo/cookbooks</code> directory with the command:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef generate template PATH_TO_COOKBOOKS COOKBOOK_NAME
</code></pre></div>
<p>For example, this command generates a <code>custom_web</code> cookbook:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">chef generate cookbook cookbooks/custom_web
</code></pre></div>
<p>The <code>custom_web</code> cookbook directory has the structure:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-text" data-lang="text">├ cookbooks
 ├ custom_web
 | ├ .delivery
 | | └ project.toml
 | ├ recipes
 | | └ default.rb
 | ├ test
 | | └ integration
 | | | └ default
 | | | | └ default_test.rb
 | ├ .gitignore
 | ├ CHANGELOG.md
 | ├ chefignore
 | ├ kitchen.yml
 | ├ LICENSE
 | ├ metadata.rb
 | ├ Policyfile.rb
 | └ README.md
</code></pre></div>
<p>Any unneeded directory components can be left unused or deleted, if preferred.</p> <h3 id="install">Install</h3> <p>To download a cookbook when git is used for version source control, run the following command:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife supermarket install COOKBOOK_NAME
</code></pre></div>
<p>where <code>COOKBOOK_NAME</code> is the name of a cookbook on <a href="https://supermarket.chef.io/">Chef Supermarket</a>. This will start a process that:</p> <ul> <li>downloads the cookbook from <a href="https://supermarket.chef.io/">Chef Supermarket</a> as a tar.gz archive</li> <li>ensures that its using the git master branch, and then checks out the cookbook from a vendor branch (creating a new vendor branch, if required)</li> <li>removes the old (existing) version</li> <li>expands the tar.gz archive and adds the expanded files to the git index and commits</li> <li>creates a tag for the version that was downloaded</li> <li>checks out the master branch</li> <li>merges the cookbook into the master (to ensure that any local changes or modifications are preserved)</li> </ul> <h3 id="download">Download</h3> <p>To download a cookbook when git is not used for version source control, run the following command:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife supermarket download COOKBOOK_NAME
</code></pre></div>
<p>where <code>COOKBOOK_NAME</code> is the name of a cookbook on <a href="https://supermarket.chef.io/">Chef Supermarket</a>. This will download the tar.gz file associated with the cookbook and will create a file named <code>COOKBOOK_NAME.tar.gz</code> in the current directory (<code>~/chef-repo</code>). Once downloaded, using a version source control system is recommended.</p> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/cookbook_repo/" class="_attribution-link">https://docs.chef.io/cookbook_repo/</a>
  </p>
</div>
