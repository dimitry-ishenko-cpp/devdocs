<div id="col-content" data-swiftype-index="true"> <div id="about-environments"><h1>About Environments</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/chef/chef-web-docs/blob/main/content/environments.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>An environment is a way to map an organization’s real-life workflow to what can be configured and managed when using Chef Infra. This mapping is accomplished by setting attributes and pinning cookbooks at the environment level. With environments, you can change cookbook configurations depending on the system’s designation. For example, by designating different staging and production environments, you can then define the correct URL of a database server for each environment. Environments also allow organizations to move new cookbook releases from staging to production with confidence by stepping releases through testing environments before entering production.</p> <h2 id="the-_default-environment">The _default Environment</h2> <p>Every Chef Infra Server organization must have at least one environment. Each organization starts out with a single <code>_default</code> environment. The <code>_default</code> environment cannot be modified in any way. Nodes, roles, run-lists, cookbooks (and cookbook versions), and attributes specific to an organization can only be associated with a custom environment. Additional environments can be created to reflect each organization’s patterns and workflow. For example, creating <code>production</code>, <code>staging</code>, <code>testing</code>, and <code>development</code> environments.</p> <h2 id="environment-attributes">Environment Attributes</h2> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> Attributes can be configured in cookbooks (attribute files and recipes), roles, and environments. In addition, Ohai collects attribute data about each node at the start of a Chef Infra Client run. See <a href="../attributes/index.html">Attributes</a> for more information about how all of these attributes fit together. </div> </div> <p>Attributes can be defined in an environment and then used to override the default attributes in a cookbook. When an environment is applied during a Chef Infra Client run, environment attributes are compared to the attributes that are already present on the node. When the environment attributes take precedence over the default attributes, Chef Infra Client applies those new settings and values during a Chef Infra Client run.</p> <p>Environment attributes can be set to either <code>default</code> attribute level or an <code>override</code> attribute level.</p> <h3 id="environment-attribute-types">Environment Attribute Types</h3> <p>There are two types of attributes that can be used with environments:</p> <table> <col style="width:40%"> <col style="width:60%"> <thead> <tr class="header"> <th>Attribute Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>default</code></td> <td> A <code>default</code> attribute is automatically reset at the start of every Chef Infra Client run and has the lowest attribute precedence. Use <code>default</code> attributes as often as possible in cookbooks. </td> </tr> <tr> <td><code>override</code></td> <td> An <code>override</code> attribute is automatically reset at the start of every Chef Infra Client run and has a higher attribute precedence than <code>default</code>, <code>force_default</code>, and <code>normal</code> attributes. An <code>override</code> attribute is most often specified in a recipe, but can be specified in an attribute file, for a role, and/or for an environment. A cookbook should be authored so that it uses <code>override</code> attributes only when required. </td> </tr> </tbody> </table> <h2 id="pinning-cookbooks-in-environments">Pinning Cookbooks in Environments</h2> <p>Cookbook versions can be pinned in each environment, which allows you to control the rollout of new cookbook releases through successive testing environments before releasing new cookbook versions into production environments. See the environment format examples below for the cookbook pinning syntax.</p> <h2 id="environment-formats">Environment Formats</h2> <p>Environments may be stored on disk (any in source control) in two formats:</p> <ul> <li>As Ruby (i.e. a file that ends with <code>.rb</code>); this format is not available when running Chef Infra Client in local mode</li> <li>As JSON (i.e. a file that ends with <code>.json</code>)</li> </ul> <h3 id="chef-language">Chef Language</h3> <p>Each environment is defined as a Ruby file (i.e. a file that ends with <code>.rb</code>). Each environment file should contain the following domain-specific attributes:</p> <table> <col style="width:20%"> <col style="width:80%"> <thead> <tr class="header"> <th>Setting</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><p><code>cookbook</code></p></td> <td>
<p>A version constraint for a single cookbook. For example:</p> <div class="sourceCode" id="cb1"><pre class="sourceCode ruby highlight" data-language="ruby"><code class="sourceCode ruby"><span id="cb1-1">cookbook <span class="st">'couchdb'</span>, <span class="st">'&lt; 11.0.0'</span></span></code></pre></div> <p>or:</p> <div class="sourceCode" id="cb2"><pre class="sourceCode ruby highlight" data-language="ruby"><code class="sourceCode ruby"><span id="cb2-1">cookbook <span class="st">'my_rails_app'</span>, <span class="st">'= 1.2.0'</span></span></code></pre></div> <p>or:</p> <div class="sourceCode" id="cb3"><pre class="sourceCode ruby highlight" data-language="ruby"><code class="sourceCode ruby"><span id="cb3-1">cookbook <span class="st">'gems'</span>, <span class="st">'~&gt; 1.4'</span></span></code></pre></div>
</td> </tr> <tr> <td><p><code>cookbook_versions</code></p></td> <td>
<p>A version constraint for a group of cookbooks. For example:</p> <div class="sourceCode" id="cb4"><pre class="sourceCode ruby highlight" data-language="ruby"><code class="sourceCode ruby"><span id="cb4-1">cookbook_versions(</span>
<span id="cb4-2">  <span class="st">'couchdb'</span> =&gt; <span class="st">'= 11.0.0'</span>,</span>
<span id="cb4-3">  <span class="st">'my_rails_app'</span> =&gt; <span class="st">'~&gt; 1.2.0'</span></span>
<span id="cb4-4">)</span></code></pre></div>
</td> </tr> <tr> <td><p><code>default_attributes</code></p></td> <td>
<p>Optional. A set of attributes to be applied to all nodes, assuming the node does not already have a value for the attribute. This is useful for setting global defaults that can then be overridden for specific nodes. If more than one role attempts to set a default value for the same attribute, the last role applied is the role to set the attribute value. When nested attributes are present, they are preserved. For example, to specify that a node that has the attribute <code>apache2</code> should listen on ports 80 and 443 (unless ports are already specified):</p> <div class="sourceCode" id="cb5"><pre class="sourceCode ruby highlight" data-language="ruby"><code class="sourceCode ruby"><span id="cb5-1">default_attributes <span class="st">'apache2'</span> =&gt; { <span class="st">'listen_ports'</span> =&gt;<span class="ot"> %w(</span><span class="st">80 443</span><span class="ot">)</span> }</span></code></pre></div>
</td> </tr> <tr> <td><p><code>description</code></p></td> <td>
<p>A description of the functionality that is covered. For example:</p> <div class="sourceCode" id="cb6"><pre class="sourceCode ruby highlight" data-language="ruby"><code class="sourceCode ruby"><span id="cb6-1">description <span class="st">'The development environment'</span></span></code></pre></div>
</td> </tr> <tr> <td><p><code>name</code></p></td> <td>
<p>A unique name within the organization. Each name must be made up of letters (upper- and lower-case), numbers, underscores, and hyphens: [A-Z][a-z][0-9] and [_-]. Spaces are not allowed. For example:</p> <div class="sourceCode" id="cb7"><pre class="sourceCode ruby highlight" data-language="ruby"><code class="sourceCode ruby"><span id="cb7-1">name <span class="st">'dev01-24'</span></span></code></pre></div>
</td> </tr> <tr> <td><p><code>override_attributes</code></p></td> <td>
<p>Optional. A set of attributes to be applied to all nodes, even if the node already has a value for an attribute. This is useful for ensuring that certain attributes always have specific values. If more than one role attempts to set an override value for the same attribute, the last role applied wins. When nested attributes are present, they are preserved. For example:</p> <div class="sourceCode" id="cb8"><pre class="sourceCode ruby highlight" data-language="ruby"><code class="sourceCode ruby"><span id="cb8-1">override_attributes <span class="st">'apache2'</span> =&gt; { <span class="st">'max_children'</span> =&gt; <span class="st">'50'</span> }</span></code></pre></div> <p>The parameters in a Ruby file are actually Ruby method calls, so parentheses can be used to provide clarity when specifying numerous or deeply-nested attributes. For example:</p> <div class="sourceCode" id="cb9"><pre class="sourceCode ruby highlight" data-language="ruby"><code class="sourceCode ruby"><span id="cb9-1">override_attributes(</span>
<span id="cb9-2">  <span class="st">apache2: </span>{</span>
<span id="cb9-3">    <span class="st">prefork: </span>{ <span class="st">min_spareservers: </span><span class="ch">'5'</span> },</span>
<span id="cb9-4">  }</span>
<span id="cb9-5">)</span></code></pre></div> <p>or:</p> <div class="sourceCode" id="cb10"><pre class="sourceCode ruby highlight" data-language="ruby"><code class="sourceCode ruby"><span id="cb10-1">override_attributes(</span>
<span id="cb10-2">  <span class="st">apache2: </span>{</span>
<span id="cb10-3">    <span class="st">prefork: </span>{ <span class="st">min_spareservers: </span><span class="ch">'5'</span> },</span>
<span id="cb10-4">  },</span>
<span id="cb10-5">  <span class="st">tomcat: </span>{</span>
<span id="cb10-6">    <span class="st">worker_threads: '100'</span>,</span>
<span id="cb10-7">  }</span>
<span id="cb10-8">)</span></code></pre></div>
</td> </tr> </tbody> </table> <p>A Ruby file for each non-default environment must exist in the <code>environments/</code> subdirectory of the chef-repo. (If the chef-repo does not have this subdirectory, then it should be created.) The complete environment has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#007020">name</span> <span style="color:#4070a0">'environment_name'</span>
description <span style="color:#4070a0">'environment_description'</span>
cookbook <span style="color:#60add5">OR</span> cookbook_versions  <span style="color:#4070a0">'cookbook'</span> <span style="color:#60add5">OR</span> <span style="color:#4070a0">'cookbook'</span> <span style="color:#666">=&gt;</span> <span style="color:#4070a0">'cookbook_version'</span>
default_attributes <span style="color:#4070a0">'node'</span> <span style="color:#666">=&gt;</span> { <span style="color:#4070a0">'attribute'</span> <span style="color:#666">=&gt;</span> <span style="color:#666">[</span> <span style="color:#4070a0">'value'</span>, <span style="color:#4070a0">'value'</span>, <span style="color:#4070a0">'etc.'</span> <span style="color:#666">]</span> }
override_attributes <span style="color:#4070a0">'node'</span> <span style="color:#666">=&gt;</span> { <span style="color:#4070a0">'attribute'</span> <span style="color:#666">=&gt;</span> <span style="color:#666">[</span> <span style="color:#4070a0">'value'</span>, <span style="color:#4070a0">'value'</span>, <span style="color:#4070a0">'etc.'</span> <span style="color:#666">]</span> }
</code></pre></div>
<p>where both default and override attributes are optional and either a cookbook or cookbook versions (one or more) are specified. For example, an environment named <code>dev</code> that uses the <code>couchdb</code> cookbook (version 11.0.0 or higher) that listens on ports 80 and 443:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#007020">name</span> <span style="color:#4070a0">'dev'</span>
description <span style="color:#4070a0">'The development environment'</span>
cookbook_versions  <span style="color:#4070a0">'couchdb'</span> <span style="color:#666">=&gt;</span> <span style="color:#4070a0">'= 11.0.0'</span>
default_attributes <span style="color:#4070a0">'apache2'</span> <span style="color:#666">=&gt;</span> { <span style="color:#4070a0">'listen_ports'</span> <span style="color:#666">=&gt;</span> <span style="color:#c65d09">%w(80 443)</span> }
</code></pre></div>
<p>Or (using the same scenario) to specify a version constraint for only one cookbook:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">cookbook <span style="color:#4070a0">'couchdb'</span>, <span style="color:#4070a0">'= 11.0.0'</span>
</code></pre></div>
<p>More than one cookbook version can be specified:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">cookbook_versions({
  <span style="color:#4070a0">'couchdb'</span> <span style="color:#666">=&gt;</span> <span style="color:#4070a0">'= 11.0.0'</span>,
  <span style="color:#4070a0">'my_rails_app'</span> <span style="color:#666">=&gt;</span> <span style="color:#4070a0">'~&gt; 1.2.0'</span>
})
</code></pre></div>
<p>Attributes are optional and can be set at the default and override levels. These will be processed according to attribute precedence. An environment attribute will be applied to all nodes within the environment, except in places where it is overridden by an attribute with higher precedence. For example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">default_attributes <span style="color:#4070a0">'apache2'</span> <span style="color:#666">=&gt;</span> { <span style="color:#4070a0">'listen_ports'</span> <span style="color:#666">=&gt;</span> <span style="color:#c65d09">%w(80 443)</span> }
</code></pre></div>
<p>will have all nodes in the environment (<code>node[:apache2][:listen_ports]</code>) set to <code>'80'</code> and <code>'443'</code> unless they were overridden by an attribute with higher precedence. For example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">override_attributes <span style="color:#4070a0">'apache2'</span> <span style="color:#666">=&gt;</span> { <span style="color:#4070a0">'listen_ports'</span> <span style="color:#666">=&gt;</span> <span style="color:#c65d09">%w(80 443)</span> }
</code></pre></div>
<h3 id="json">JSON</h3> <p>The JSON format for environments maps directly to the domain-specific Ruby format: the same settings, attributes, and values, and a similar structure and organization, just formatted as JSON. When an environment is defined as JSON the file that contains that data must be defined as a file that ends with <code>.json</code>. For example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#4070a0">"name"</span><span style="color:#666">:</span> <span style="color:#4070a0">"dev"</span>,
  <span style="color:#4070a0">"default_attributes"</span><span style="color:#666">:</span> {
    <span style="color:#4070a0">"apache2"</span><span style="color:#666">:</span> {
      <span style="color:#4070a0">"listen_ports"</span><span style="color:#666">:</span> [
        <span style="color:#4070a0">"80"</span>,
        <span style="color:#4070a0">"443"</span>
      ]
    }
  },
  <span style="color:#4070a0">"json_class"</span><span style="color:#666">:</span> <span style="color:#4070a0">"Chef::Environment"</span>,
  <span style="color:#4070a0">"description"</span><span style="color:#666">:</span> <span style="color:#4070a0">""</span>,
  <span style="color:#4070a0">"cookbook_versions"</span><span style="color:#666">:</span> {
    <span style="color:#4070a0">"couchdb"</span><span style="color:#666">:</span> <span style="color:#4070a0">"= 11.0.0"</span>
  },
  <span style="color:#4070a0">"chef_type"</span><span style="color:#666">:</span> <span style="color:#4070a0">"environment"</span>
}
</code></pre></div>
<p>The JSON format has two additional settings:</p> <table> <col style="width:40%"> <col style="width:60%"> <thead> <tr class="header"> <th>Setting</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>chef_type</code></td> <td>Always set this to <code>environment</code>. Use this setting for any custom process that consumes environment objects outside of Ruby.</td> </tr> <tr> <td><code>json_class</code></td> <td>Always set this to <code>Chef::Environment</code>. Chef Infra Client uses this setting to auto-inflate an environment object. If objects are being rebuilt outside of Ruby, ignore it.</td> </tr> </tbody> </table> <h2 id="create-environments">Create Environments</h2> <p>An environment can be created in four different ways:</p> <ul> <li>Creating a Ruby file in the environments sub-directory of the chef-repo and then pushing it to the Chef server</li> <li>Creating a JSON file directly in the chef-repo and then pushing it to the Chef server</li> <li>Using knife</li> <li>Using the Chef Infra Server REST API</li> </ul> <p>Once an environment exists on the Chef Infra Server, a node can be associated with that environment using the <code>chef_environment</code> method.</p> <h2 id="manage-environments">Manage Environments</h2> <p>Once created, an environment can be managed in several ways:</p> <ul> <li>By using knife and passing the <code>-E ENVIRONMENT_NAME</code> option with <code>knife cookbook upload</code>
</li> <li>By using Ruby or JSON files that are stored in a version source control system. These files are pushed to the Chef Infra Server using the <code>knife environment</code> subcommand and the <code>from file</code> argument. This approach allows environment data to be dynamically generated. This approach will not work unless these files are defined in the proper format—Ruby file end with <code>.rb</code>; JSON files end with <code>.json</code>.</li> </ul> <p>These workflows are mutually exclusive: only the most recent environment changes will be kept on the Chef Infra Server, regardless of the source of those changes. All previous changes are overwritten when environment data is updated.</p> <p>The settings for environments can be modified and environments can be integrated into the larger infrastructure by associating them with nodes and by using recipes to call specific environment settings.</p> <h3 id="find-environment-from-recipe">Find Environment from Recipe</h3> <p>Use the following syntax to find the current environment from a recipe:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">node<span style="color:#666">.</span>environment
</code></pre></div>
<p>or:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">node<span style="color:#666">.</span>chef_environment
</code></pre></div>
<h3 id="save-in-a-data-bag">Save in a Data Bag</h3> <p>Values that are stored in a data bag are global to the organization and are available to any environment. There are two main strategies that can be used to store per-environment data within a data bag: by using a top-level key that corresponds to the environment or by using separate items for each environment.</p> <p>A data bag that is storing a top-level key for an environment might look something like this:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#4070a0">"id"</span><span style="color:#666">:</span> <span style="color:#4070a0">"some_data_bag_item"</span>,
  <span style="color:#4070a0">"production"</span> <span style="color:#666">:</span> {
    <span style="color:#60a0b0;font-style:italic">// Hash with all your data here
</span>  },
  <span style="color:#4070a0">"testing"</span> <span style="color:#666">:</span> {
    <span style="color:#60a0b0;font-style:italic">// Hash with all your data here
</span>  }
}
</code></pre></div>
<p>When using the data bag in a recipe, that data can be accessed from a recipe using code similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">bag_item<span style="color:#666">[</span>node<span style="color:#666">.</span>chef_environment<span style="color:#666">][</span><span style="color:#4070a0">'some_other_key'</span><span style="color:#666">]</span>
</code></pre></div>
<p>The other approach is to use separate items for each environment. Depending on the amount of data, it may all fit nicely within a single item. If this is the case, then creating different items for each environment may be a simple approach to providing per-environment values within a data bag. However, this approach is more time-consuming and may not scale to very large environments or when the data must be stored in many data bag items.</p> <h3 id="override-attributes-in-roles">Override Attributes in Roles</h3> <p>Environment attributes that are used with roles can be overridden. Typically, this is done by using attribute precedence, but sometimes it may be necessary to ensure that specific attributes are used based on the presence of specific environments. This type of scenario is best addressed in using a recipe that relies on a top-level key that is stored in a data bag.</p> <p>For example, to retrieve a value from a data bag based on a specific environment:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">mything <span style="color:#666">=</span> data_bag_item(<span style="color:#4070a0">'things'</span>, <span style="color:#4070a0">'mything'</span>)
attribute_i_want <span style="color:#666">=</span> mything<span style="color:#666">[</span>node<span style="color:#666">.</span>chef_environment<span style="color:#666">]</span>
</code></pre></div>
<h3 id="set-for-a-node">Set for a Node</h3> <p>A node is considered to be associated with an environment when the <code>chef_environment</code> attribute is set. The <code>chef_environment</code> attribute cannot be set with normal or override attributes (i.e. in a role) because it is actually a method. An environment may be set explicitly using the following methods:</p> <ul> <li> <p>By using the <code>knife edit</code> and <code>knife exec</code> subcommands</p> </li> <li> <p>By editing the <code>environment</code> configuration details in the client.rb file, and then using <code>knife bootstrap -e environment_name</code> to bootstrap the changes to the specified environment</p> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> After the environment has been set via bootstrap, the environment is set in the client.rb file and may not be modified using the <code>edit</code> argument of the <code>knife node</code> subcommand. </div> </div> </li> <li> <p>By setting the <code>environment</code> configuration entry in the client.rb file ; when Chef Infra Client runs, it will pick up the value and then set the <code>chef_environment</code> attribute of the node</p> </li> </ul> <h3 id="move-nodes">Move Nodes</h3> <p>Use the <code>knife exec</code> subcommand to move nodes between environments, such as from a “dev” to a “production” environment. For example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife <span style="color:#007020">exec</span> -E <span style="color:#4070a0">'nodes.transform("chef_environment:dev") { |n| n.chef_environment("production") }'</span>
</code></pre></div>
<h3 id="search-environments">Search Environments</h3> <p>When searching, an environment is an attribute. This allows search results to be limited to a specified environment by using Boolean operators and extra search terms. For example, to use knife to search for all of the servers running CentOS in an environment named “QA”, enter the following:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife search node <span style="color:#4070a0">"chef_environment:QA AND platform:centos"</span>
</code></pre></div>
<p>Or, to include the same search in a recipe, use a code block similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">qa_nodes <span style="color:#666">=</span> search(<span style="color:#517918">:node</span>, <span style="color:#4070a0">'chef_environment:QA'</span>)
qa_nodes<span style="color:#666">.</span>each <span style="color:#007020;font-weight:700">do</span> <span style="color:#666">|</span>qa_node<span style="color:#666">|</span>
    <span style="color:#60a0b0;font-style:italic"># Do useful work specific to qa nodes only</span>
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<h2 id="environments-in-chef-solo">Environments in Chef Solo</h2> <p>An environment is defined using JSON or the Ruby DSL. chef-solo will look for environments in <code>/var/chef/environments</code>, but this location can be modified by changing the setting for <code>environment_path</code> in solo.rb. For example, the following setting in solo.rb:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">environment_path <span style="color:#4070a0">'/var/chef-solo/environments'</span>
</code></pre></div>
<p>Environment data looks like the following in JSON:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#4070a0">"name"</span><span style="color:#666">:</span> <span style="color:#4070a0">"dev"</span>,
  <span style="color:#4070a0">"default_attributes"</span><span style="color:#666">:</span> {
    <span style="color:#4070a0">"apache2"</span><span style="color:#666">:</span> {
      <span style="color:#4070a0">"listen_ports"</span><span style="color:#666">:</span> [
        <span style="color:#4070a0">"80"</span>,
        <span style="color:#4070a0">"443"</span>
      ]
    }
  },
  <span style="color:#4070a0">"json_class"</span><span style="color:#666">:</span> <span style="color:#4070a0">"Chef::Environment"</span>,
    <span style="color:#4070a0">"description"</span><span style="color:#666">:</span> <span style="color:#4070a0">""</span>,
    <span style="color:#4070a0">"cookbook_versions"</span><span style="color:#666">:</span> {
    <span style="color:#4070a0">"couchdb"</span><span style="color:#666">:</span> <span style="color:#4070a0">"= 11.0.0"</span>
  },
  <span style="color:#4070a0">"chef_type"</span><span style="color:#666">:</span> <span style="color:#4070a0">"environment"</span>
  }
</code></pre></div>
<p>and like the following in the Ruby DSL:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby"><span style="color:#007020">name</span> <span style="color:#4070a0">'environment_name'</span>
description <span style="color:#4070a0">'environment_description'</span>
cookbook <span style="color:#60add5">OR</span> cookbook_versions  <span style="color:#4070a0">'cookbook'</span> <span style="color:#60add5">OR</span> <span style="color:#4070a0">'cookbook'</span> <span style="color:#666">=&gt;</span> <span style="color:#4070a0">'cookbook_version'</span>
default_attributes <span style="color:#4070a0">'node'</span> <span style="color:#666">=&gt;</span> { <span style="color:#4070a0">'attribute'</span> <span style="color:#666">=&gt;</span> <span style="color:#c65d09">%w(value value etc.)</span> }
override_attributes <span style="color:#4070a0">'node'</span> <span style="color:#666">=&gt;</span> { <span style="color:#4070a0">'attribute'</span> <span style="color:#666">=&gt;</span> <span style="color:#c65d09">%w(value value etc.)</span> }
</code></pre></div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/environments/" class="_attribution-link">https://docs.chef.io/environments/</a>
  </p>
</div>
