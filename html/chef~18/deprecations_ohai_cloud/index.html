<div id="col-content" data-swiftype-index="true"> <div id="deprecation-cloud-plugin-replaced-by-the-cloud_v2-plugin-ohai-8"><h1>Deprecation: Cloud plugin replaced by the Cloud_V2 plugin (OHAI-8)</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/chef/chef-web-docs/blob/main/content/deprecations_ohai_cloud.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>In Ohai/Chef releases 13 we replaced the existing Cloud plugin with the Cloud_v2 plugin. This was done by having the Cloud_v2 plugin populate both <code>node['cloud']</code> and <code>node['cloud_v2']</code>. The Cloud_v2 plugin includes a different data format that resolves many of the longstanding bugs in the existing Cloud plugin.</p> <h2 id="remediation">Remediation</h2> <p>If you have a cookbook that relies on data from <code>node['cloud']</code> you will need to update the code to the new format in Chef Client 13. On a Chef Client 12 or earlier node you can compare the data formats by running <code>ohai cloud</code> and <code>ohai cloud_v2</code>.</p> <p>Here are examples of the old and new format of the cloud data:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#4070a0">"public_ips"</span><span style="color:#666">:</span> [
    <span style="color:#4070a0">"52.88.253.144"</span>
  ],
  <span style="color:#4070a0">"private_ips"</span><span style="color:#666">:</span> [
    <span style="color:#4070a0">"172.31.37.209"</span>
  ],
  <span style="color:#4070a0">"public_ipv4"</span><span style="color:#666">:</span> <span style="color:#4070a0">"52.88.253.144"</span>,
  <span style="color:#4070a0">"public_hostname"</span><span style="color:#666">:</span> <span style="color:#4070a0">"ec2-52-88-253-144.us-west-2.compute.amazonaws.com"</span>,
  <span style="color:#4070a0">"local_ipv4"</span><span style="color:#666">:</span> <span style="color:#4070a0">"172.31.37.209"</span>,
  <span style="color:#4070a0">"local_hostname"</span><span style="color:#666">:</span> <span style="color:#4070a0">"ip-172-31-37-209.us-west-2.compute.internal"</span>,
  <span style="color:#4070a0">"provider"</span><span style="color:#666">:</span> <span style="color:#4070a0">"ec2"</span>
}
</code></pre></div>
<div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#4070a0">"public_ipv4_addrs"</span><span style="color:#666">:</span> [
    <span style="color:#4070a0">"52.88.253.144"</span>
  ],
  <span style="color:#4070a0">"local_ipv4_addrs"</span><span style="color:#666">:</span> [
    <span style="color:#4070a0">"172.31.37.209"</span>
  ],
  <span style="color:#4070a0">"public_hostname"</span><span style="color:#666">:</span> <span style="color:#4070a0">"ec2-52-88-253-144.us-west-2.compute.amazonaws.com"</span>,
  <span style="color:#4070a0">"local_hostname"</span><span style="color:#666">:</span> <span style="color:#4070a0">"ip-172-31-37-209.us-west-2.compute.internal"</span>,
  <span style="color:#4070a0">"public_ipv4"</span><span style="color:#666">:</span> <span style="color:#4070a0">"52.88.253.144"</span>,
  <span style="color:#4070a0">"local_ipv4"</span><span style="color:#666">:</span> <span style="color:#4070a0">"172.31.37.209"</span>,
  <span style="color:#4070a0">"provider"</span><span style="color:#666">:</span> <span style="color:#4070a0">"ec2"</span>
}
</code></pre></div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/deprecations_ohai_cloud/" class="_attribution-link">https://docs.chef.io/deprecations_ohai_cloud/</a>
  </p>
</div>
