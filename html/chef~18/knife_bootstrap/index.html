<div id="col-content" data-swiftype-index="true"> <div id="knife-bootstrap"><h1>knife bootstrap</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/chef/chef-workstation/blob/main/docs-chef-io/content/workstation/knife_bootstrap.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>A node is any physical, virtual, or cloud device that is configured and maintained by an instance of Chef Infra Client. Bootstrapping installs Chef Infra Client on a target system so that it can run as a client and sets the node up to communicate with a Chef Infra Server. There are two ways to do this:</p> <ul> <li>Run the <code>knife bootstrap</code> command from a workstation.</li> <li>Perform an unattended install to bootstrap from the node itself, without requiring SSH or WinRM connectivity.</li> </ul> <p>Use the <code>knife bootstrap</code> subcommand to run a bootstrap operation that installs Chef Infra Client on the target system. The bootstrap operation must specify the IP address or FQDN of the target system.</p> <p><strong>Considerations:</strong></p> <ul> <li>Knife will copy the contents of the <code>~/.chef/client.d</code> directory on your local workstation to the <code>client.d</code> directory on the device being bootstrapped with the <code>knife bootstrap</code> command. You can also set the <code>client_d_dir</code> option in the <code>config.rb</code> file to point to an arbitrary directory instead of <code>~/.chef/client.d</code>, and the contents of that directory will be copied to the device being bootstrapped. All config files inside the <code>client.d</code> directory will get copied into the <code>/etc/chef/client.d</code> directory on the system being bootstrapped.</li> <li>SSL certificates from an on-premises Chef Infra Server can be copied to the <code>/trusted_certs_dir</code> directory on your local workstation automatically by running <a href="../workstation/knife_ssl_fetch/index.html">knife ssl fetch</a>. These certificates are used during <code>knife</code> operations to communicate with the Chef Infra Server.</li> <li>By default, <code>knife bootstrap</code> will attempt to use <code>ssh</code> to connect to the target node. Use the <code>-o</code> to specify a different protocol, such as <code>winrm</code> for windows nodes.</li> </ul> <h2 id="syntax">Syntax</h2> <p>This subcommand has the following syntax:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife bootstrap FQDN_or_IP_ADDRESS <span style="color:#666">(</span>options<span style="color:#666">)</span>
</code></pre></div>
<h2 id="options">Options</h2> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> Review the list of <a href="../workstation/knife_options/index.html">common options</a> available to this (and all) knife subcommands and plugins. </div> </div> <h3 id="general-connection-options">General Connection Options</h3> <dl> <dt>
<code>-U USERNAME</code>, <code>--connection-user USERNAME</code>
</dt> <dd> <p>Authenticate to the target host with this user account.</p> </dd> <dt>
<code>-P PASSWORD</code>, <code>--connection-password PASSWORD</code>
</dt> <dd> <p>Authenticate to the target host with this password."</p> </dd> <dt>
<code>-p PORT</code>, <code>--connection-port PORT</code>
</dt> <dd> <p>The port on the target node to connect to."</p> </dd> <dt>
<code>-o PROTOCOL</code>, <code>--connection-protocol PROTOCOL</code>
</dt> <dd> <p>The protocol to use to connect to the target node. Options are <code>ssh</code> or <code>winrm</code>. <code>ssh</code> is default.</p> </dd> <dt>
<code>-W SECONDS</code>, <code>--max-wait SECONDS</code>
</dt> <dd> <p>The maximum time to wait for the initial connection to be established.</p> </dd> <dt><code>--session-timeout SECONDS</code></dt> <dd> <p>The number of seconds to wait for each connection operation to be acknowledged while running bootstrap.</p> </dd> </dl> <h3 id="winrm-connection-options">WinRM Connection Options</h3> <dl> <dt><code>--winrm-ssl-peer-fingerprint FINGERPRINT</code></dt> <dd> <p>SSL certificate fingerprint expected from the target.</p> </dd> <dt>
<code>-f CA_TRUST_PATH</code>, <code>--ca-trust-file CA_TRUST_PATH</code>
</dt> <dd> <p>The Certificate Authority (CA) trust file used for SSL transport</p> </dd> <dt><code>--winrm-no-verify-cert</code></dt> <dd> <p>Do not verify the SSL certificate of the target node for WinRM.</p> </dd> <dt><code>--winrm-ssl</code></dt> <dd> <p>Use SSL in the WinRM connection.</p> </dd> <dt>
<code>-w AUTH-METHOD</code>, <code>--winrm-auth-method AUTH-METHOD</code>
</dt> <dd> <p>The WinRM authentication method to use.</p> </dd> <dt><code>--winrm-basic-auth-only</code></dt> <dd> <p>For WinRM basic authentication when using the ‘ssl’ auth method.</p> </dd> <dt>
<code>-R KERBEROS_REALM</code>, <code>--kerberos-realm KERBEROS_REALM</code>
</dt> <dd> <p>The Kerberos realm used for authentication.</p> </dd> <dt>
<code>-S KERBEROS_SERVICE</code>, <code>--kerberos-service KERBEROS_SERVICE</code>
</dt> <dd> <p>The Kerberos service used for authentication.</p> </dd> </dl> <h3 id="ssh-connection-options">SSH Connection Options</h3> <dl> <dt>
<code>-G GATEWAY</code>, <code>--ssh-gateway GATEWAY</code>
</dt> <dd> <p>The SSH tunnel or gateway that is used to run a bootstrap action on a machine that is not accessible from the workstation.</p> </dd> <dt><code>--ssh-gateway-identity SSH_GATEWAY_IDENTITY</code></dt> <dd> <p>The SSH identity file used for gateway authentication.</p> </dd> <dt>
<code>-A</code>, <code>--ssh-forward-agent</code>
</dt> <dd> <p>Enable SSH agent forwarding.</p> </dd> <dt>
<code>-i IDENTITY_FILE</code>, <code>--ssh-identity-file IDENTITY_FILE</code>
</dt> <dd> <p>The SSH identity file used for authentication. Key-based authentication is recommended.</p> </dd> <dt>
<code>ssh_verify_host_key</code>, <code>--ssh-verify-host-key VALUE</code>
</dt> <dd> <p>Verify host key. Default is ‘always’</p> </dd> </dl> <h3 id="chef-installation-options">Chef Installation Options</h3> <dl> <dt><code>--bootstrap-version VERSION</code></dt> <dd> <p>The version of Chef Infra Client to install.</p> </dd> <dt><code>--bootstrap-install-command COMMAND</code></dt> <dd> <p>Execute a custom installation command sequence for Chef Infra Client. This option may not be used in the same command with <code>--bootstrap-curl-options</code> or <code>--bootstrap-wget-options</code>.</p> </dd> <dt><code>--bootstrap-curl-options OPTIONS</code></dt> <dd> <p>Arbitrary options to be added to the bootstrap command when using cURL. This option may not be used in the same command with <code>--bootstrap-install-command</code>.</p> </dd> <dt><code>--bootstrap-wget-options OPTIONS</code></dt> <dd> <p>Arbitrary options to be added to the bootstrap command when using GNU Wget. This option may not be used in the same command with <code>--bootstrap-install-command</code>.</p> </dd> <dt><code>--bootstrap-preinstall-command COMMANDS</code></dt> <dd> <p>Custom commands to run before installing Chef Infra Client</p> </dd> <dt><code>--bootstrap-url URL</code></dt> <dd> <p>The URL to a custom installation script.</p> </dd> <dt>
<code>-m URL</code>, <code>--msi-url URL</code>
</dt> <dd> <p>Location of the Chef Infra Client MSI. The default templates will prefer to download from this location. The MSI will be downloaded from chef.io if not provided.</p> </dd> <dt><code>--sudo</code></dt> <dd> <p>Execute a bootstrap operation with sudo.</p> </dd> <dt><code>--sudo-preserve-home</code></dt> <dd> <p>Use to preserve the non-root user’s <code>HOME</code> environment.</p> </dd> <dt><code>--use-sudo-password</code></dt> <dd> <p>Perform a bootstrap operation with sudo; specify the password with the <code>-P</code> (or <code>--ssh-password</code>) option.</p> </dd> <dt>
<code>-t TEMPLATE</code>, <code>--bootstrap-template TEMPLATE</code>
</dt> <dd> <p>The bootstrap template to use. This may be the name of a bootstrap template—<code>chef-full</code> for example—or it may be the full path to an Embedded Ruby (ERB) template that defines a custom bootstrap. Default value: <code>chef-full</code>, which installs Chef Infra Client using the Chef Infra installer on all supported platforms.</p> </dd> </dl> <h3 id="proxy-options">Proxy Options</h3> <dl> <dt><code>--bootstrap-no-proxy NO_PROXY_URL_or_IP</code></dt> <dd> <p>A URL or IP address that specifies a location that should not be proxied during the bootstrap.</p> </dd> <dt><code>--bootstrap-proxy PROXY_URL</code></dt> <dd> <p>The proxy server for the node that is the target of a bootstrap operation.</p> </dd> <dt><code>--bootstrap-proxy-pass PROXY_PASS</code></dt> <dd> <p>The proxy authentication password for the node being bootstrapped.</p> </dd> <dt><code>--bootstrap-proxy-user PROXY_USER</code></dt> <dd> <p>The proxy authentication username for the node being bootstrapped.</p> </dd> </dl> <h3 id="node-options">Node Options</h3> <dl> <dt>
<code>-N NAME</code>, <code>--node-name NAME</code>
</dt> <dd> <p>The unique identifier of the node.</p> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> This option is required for a validatorless bootstrap. </div> </div> </dd> <dt>
<code>-E ENVIRONMENT</code>, <code>--environment ENVIRONMENT</code>
</dt> <dd> <p>The name of the environment to be applied.</p> </dd> <dt>
<code>-r RUN_LIST</code>, <code>--run-list RUN_LIST</code>
</dt> <dd> <p>A comma-separated list of roles and/or recipes to be applied.</p> </dd> <dt><code>--secret SECRET</code></dt> <dd> <p>The encryption key that is used for values contained within a data bag item.</p> </dd> <dt><code>--secret-file FILE</code></dt> <dd> <p>The path to the file that contains the encryption key.</p> </dd> <dt><code>--hint HINT_NAME[=HINT_FILE]</code></dt> <dd> <p>An Ohai hint to be set on the bootstrap target. See the <a href="../ohai/index.html#hints">Ohai</a> documentation for more information. <code>HINT_FILE</code> is the name of the JSON file. <code>HINT_NAME</code> is the name of a hint in a JSON file. Use multiple <code>--hint</code> options to specify multiple hints.</p> </dd> <dt>
<code>-j JSON_ATTRIBS</code>, <code>--json-attributes JSON_ATTRIBS</code>
</dt> <dd> <p>A JSON string that is added to the first run of a Chef Infra Client.</p> </dd> <dt><code>--json-attribute-file FILE</code></dt> <dd> <p>A JSON file to be added to the first run of Chef Infra Client.</p> </dd> <dt><code>--[no-]fips</code></dt> <dd> <p>Allows OpenSSL to enforce FIPS-validated security during Chef Infra Client runs.</p> </dd> <dt><code>--policy-group POLICY_GROUP</code></dt> <dd> <p>The name of a policy group that exists on the Chef Infra Server.</p> </dd> <dt><code>--policy-name POLICY_NAME</code></dt> <dd> <p>The name of a policy, as identified by the name setting in a Policyfile.rb file.</p> </dd> </dl> <h3 id="chef-vault-options">chef-vault Options</h3> <dl> <dt><code>--bootstrap-vault-file VAULT_FILE</code></dt> <dd> <p>The path to a JSON file that contains a list of vaults and items to be updated.</p> </dd> <dt><code>--bootstrap-vault-item VAULT_ITEM</code></dt> <dd> <p>A single vault and item to update as <code>vault:item</code>.</p> </dd> <dt><code>--bootstrap-vault-json VAULT_JSON</code></dt> <dd> <p>A JSON string that contains a list of vaults and items to be updated. –bootstrap-vault-json ‘{ “vault1”: [“item1”, “item2”], “vault2”: “item2” }’</p> </dd> </dl> <h3 id="key-verification-options">Key Verification Options</h3> <dl> <dt><code>--[no-]host-key-verify</code></dt> <dd> <p>Use <code>--no-host-key-verify</code> to disable host key verification. Default setting: <code>--host-key-verify</code>.</p> </dd> <dt><code>--[no-]node-verify-api-cert</code></dt> <dd> <p>Verify the SSL certificate on the Chef Infra Server. When <code>true</code>, Chef Infra Client always verifies the SSL certificate. When <code>false</code>, Chef Infra Client uses the value of <code>ssl_verify_mode</code> to determine if the SSL certificate requires verification. If this option is not specified, the setting for <code>verify_api_cert</code> in the configuration file is applied.</p> </dd> <dt><code>--node-ssl-verify-mode MODE</code></dt> <dd> <p>Set the verify mode for HTTPS requests. Options: <code>none</code> or <code>peer</code>.</p> <p>Use <code>none</code> to do no validation of SSL certificates.</p> <p>Use <code>peer</code> to do validation of all SSL certificates, including the Chef Infra Server connections, S3 connections, and any HTTPS <strong>remote_file</strong> resource URLs used in a Chef Infra Client run. This is the recommended setting.</p> </dd> </dl> <h3 id="debug-options">Debug Options</h3> <dl> <dt><code>-V -V</code></dt> <dd> <p>Run the initial Chef Infra Client run at the <code>debug</code> log-level (e.g. <code>chef-client -l debug</code>).</p> </dd> <dt><code>-V -V -V</code></dt> <dd> <p>Run the initial Chef Infra Client run at the <code>trace</code> log-level (e.g. <code>chef-client -l trace</code>).</p> </dd> </dl> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> See <a href="../workstation/config_rb_optional_settings/index.html">config.rb</a> for more information about how to add certain knife options as settings in the config.rb file. </div> </div> <h3 id="validatorless-bootstrap">Validatorless Bootstrap</h3> <p>The ORGANIZATION-validator.pem is typically added to the .chef directory on the workstation. When a node is bootstrapped from that workstation, the ORGANIZATION-validator.pem is used to authenticate the newly-created node to the Chef Infra Server during the initial Chef Infra Client run. It is possible to bootstrap a node using the USER.pem file instead of the ORGANIZATION-validator.pem file. This is known as a “validatorless bootstrap”.</p> <p>To create a node via the USER.pem file, simply delete the ORGANIZATION-validator.pem file on the workstation. For example:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">rm -f /home/lamont/.chef/myorg-validator.pem
</code></pre></div>
<p>and then make the following changes in the config.rb file:</p> <ul> <li>Remove the <code>validation_client_name</code> setting</li> <li>Edit the <code>validation_key</code> setting to be something that isn’t a path to an existent ORGANIZATION-validator.pem file. For example: <code>/nonexist</code>.</li> </ul> <p>As long as a USER.pem is also present on the workstation from which the validatorless bootstrap operation will be initiated, the bootstrap operation will run and will use the USER.pem file instead of the ORGANIZATION-validator.pem file.</p> <p>When running a validatorless <code>knife bootstrap</code> operation, the output is similar to:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">desktop% knife bootstrap 10.1.1.1 -N foo01.acme.org <span style="color:#4070a0;font-weight:700">\
</span>  -E dev -r <span style="color:#4070a0">'role[base]'</span> -j <span style="color:#4070a0">'{ "foo": "bar" }'</span> <span style="color:#4070a0;font-weight:700">\
</span>  --ssh-user vagrant --sudo
Node foo01.acme.org exists, overwrite it? <span style="color:#666">(</span>Y/N<span style="color:#666">)</span>
Client foo01.acme.org exists, overwrite it? <span style="color:#666">(</span>Y/N<span style="color:#666">)</span>
Creating new client <span style="color:#007020;font-weight:700">for</span> foo01.acme.org
Creating new node <span style="color:#007020;font-weight:700">for</span> foo01.acme.org
Connecting to 10.1.1.1
10.1.1.1 Starting first Chef Client run...
<span style="color:#666">[</span>....etc...<span style="color:#666">]</span>
</code></pre></div>
<div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> The <code>--node-name</code> option is required for a validatorless bootstrap. </div> </div> <h3 id="fips-mode">FIPS Mode</h3> <p>Federal Information Processing Standards (FIPS) is a United States government computer security standard that specifies security requirements for cryptography. The current version of the standard is FIPS 140-2. Chef Infra Client can be configured to allow OpenSSL to enforce FIPS-validated security during a Chef Infra Client run. This will disable cryptography that is explicitly disallowed in FIPS-validated software, including certain ciphers and hashing algorithms. Any attempt to use any disallowed cryptography will cause Chef Infra Client to throw an exception during a Chef Infra Client run.</p> <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> <p>Chef uses MD5 hashes to uniquely identify files that are stored on the Chef Infra Server. MD5 is used only to generate a unique hash identifier and is not used for any cryptographic purpose.</p> </div> </div> <p>Notes about FIPS:</p> <ul> <li>May be enabled for nodes running on Microsoft Windows and Enterprise Linux platforms</li> <li>Should only be enabled for environments that require FIPS 140-2 compliance</li> </ul> <p><strong>Bootstrap a node using FIPS</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife bootstrap 192.0.2.0 -P vanilla -x root -r <span style="color:#4070a0">'recipe[apt],recipe[xfs],recipe[vim]'</span> --fips
</code></pre></div>
<p>which shows something similar to:</p> <pre tabindex="0" class="highlight" data-language="ruby"><code class="language-none" data-lang="none">OpenSSL FIPS 140 mode enabled
...
192.0.2.0 Chef Infra Client finished, 12/12 resources updated in 78.942455583 seconds
</code></pre>
<h2 id="custom-templates">Custom Templates</h2> <p>The default <code>chef-full</code> template uses the Chef installer. For most bootstrap operations, regardless of the platform on which the target node is running, using the <code>chef-full</code> distribution is the best approach for installing Chef Infra Client on a target node. In some situations, a custom template may be required.</p> <p>For example, the default bootstrap operation relies on an Internet connection to get the distribution to the target node. If a target node cannot access the Internet, then a custom template can be used to define a specific location for the distribution so that the target node may access it during the bootstrap operation. The example below will show you how to create a bootstrap template that uses a custom artifact store for Chef packages and installation scripts, as well as a RubyGem mirror:</p> <ol> <li> <p>A custom bootstrap template file must be located in a <code>bootstrap/</code> directory, which is typically located within the <code>~/.chef/</code> directory on the local workstation. Navigate to the <code>.chef</code> directory, and create a <code>bootstrap</code> directory within it:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">mkdir bootstrap
</code></pre></div>
</li> <li> <p>Move to the <code>bootstrap</code> directory and create a blank template file; this example will use <code>template.erb</code> for the template name:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">touch template.erb
</code></pre></div>
</li> <li> <p>Still in the <code>bootstrap</code> directory, issue the following command to copy the <code>chef-full</code> configuration to your new template:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">find /opt/chef-workstation/embedded/lib/ruby -type f -name chef-full.erb -exec cat <span style="color:#666">{}</span> <span style="color:#4070a0;font-weight:700">\;</span> &gt; template.erb
</code></pre></div>
<p>This command searches for the <code>chef-full</code> template file under <code>/opt/chef-workstation/embedded/lib/ruby</code>, and then outputs the contents of the file to <code>template.erb</code>. If you used a different template file name, be sure to replace <code>template.erb</code> with the template file you created during the last step.</p> </li> <li> <p>Update <code>template.erb</code> to replace <code>omnitruck.chef.io</code> with the URL of an <code>install.sh</code> script on your artifact store:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">install_sh<span style="color:#666">=</span><span style="color:#4070a0">"&lt;%= knife_config[:bootstrap_url] ? knife_config[:bootstrap_url] : "</span><span style="color:#517918">http</span>:<span style="color:#235388">//</span>packages<span style="color:#666">.</span>example<span style="color:#666">.</span>com<span style="color:#666">/</span>install<span style="color:#666">.</span>sh<span style="color:#4070a0">" %&gt;"</span>
</code></pre></div>
</li> <li> <p>Still in your text editor, locate the following line near the bottom of your <code>template.erb</code> file:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">cat <span style="color:#666">&gt;</span> <span style="color:#235388">/etc/</span>chef<span style="color:#666">/</span>client<span style="color:#666">.</span>rb <span style="color:#4070a0">&lt;&lt;'EOP'
</span><span style="color:#666">&lt;%=</span> config_content <span style="color:#666">%&gt;</span>
<span style="color:#60add5">EOP</span>
</code></pre></div>
<p>Beneath it, add the following, replacing <code>gems.example.com</code> with the URL of your gem mirror:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">cat <span style="color:#666">&gt;&gt;</span> <span style="color:#235388">/etc/</span>chef<span style="color:#666">/</span>client<span style="color:#666">.</span>rb <span style="color:#4070a0">&lt;&lt;'EOP'
</span>rubygems_url <span style="color:#4070a0">"http://gems.example.com"</span>
<span style="color:#60add5">EOP</span>
</code></pre></div>
<p>This appends the appropriate <code>rubygems_url</code> setting to the <code>/etc/chef/client.rb</code> file that is created during bootstrap, which ensures that your nodes use your internal gem mirror.</p> </li> </ol> <h3 id="bootstrap-a-custom-template">Bootstrap a Custom Template</h3> <p>You can use the <code>--bootstrap-template</code> option with the <code>knife bootstrap</code> subcommand to specify the name of your bootstrap template file:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife bootstrap 123.456.7.8 -x username -P password --sudo --bootstrap-template <span style="color:#4070a0">"template"</span>
</code></pre></div>
<p>Alternatively, you can use the <code>knife[:bootstrap_template]</code> option within <code>config.rb</code> to specify the template that <code>knife bootstrap</code> will use by default when bootstrapping a node. It should point to your custom template within the <code>bootstrap</code> directory:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">knife<span style="color:#666">[</span><span style="color:#517918">:bootstrap_template</span><span style="color:#666">]</span> <span style="color:#666">=</span> <span style="color:#4070a0">"</span><span style="color:#70a0d0;font-style:italic">#{</span>current_dir<span style="color:#70a0d0;font-style:italic">}</span><span style="color:#4070a0">/bootstrap/template.erb"</span>
</code></pre></div>
<h2 id="examples">Examples</h2> <p>The following examples show how to use this knife subcommand:</p> <p><strong>Bootstrap a node</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife bootstrap 192.0.2.0 -P vanilla -x root -r <span style="color:#4070a0">'recipe[apt],recipe[xfs],recipe[vim]'</span>
</code></pre></div>
<p>which shows something similar to:</p> <pre tabindex="0" class="highlight" data-language="ruby"><code class="language-none" data-lang="none">...
192.0.2.0 Chef Infra Client finished, 12/12 resources updated in 78.942455583 seconds
</code></pre>
<p>Use <code>knife node show</code> to verify:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife node show debian-buster.int.domain.org
</code></pre></div>
<p>which returns something similar to:</p> <pre tabindex="0" class="highlight" data-language="ruby"><code class="language-none" data-lang="none">Node Name: debian-buster.int.domain.org
Environment: _default
FQDN:      debian-buster.int.domain.org
IP:        192.0.2.0
Run List:  recipe[apt], recipe[xfs], recipe[vim]
Roles:
Recipes:   apt, xfs, vim, apt::default, xfs::default, vim::default
Platform:  debian 10.0
Tags:
</code></pre>
<p><strong>Use an SSH password</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife bootstrap 192.0.2.0 -x username -P PASSWORD --sudo
</code></pre></div>
<p><strong>Use a file that contains a private key</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife bootstrap 192.0.2.0 -x username -i ~/.ssh/id_rsa --sudo
</code></pre></div>
<p><strong>Specify options when using cURL</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife bootstrap --bootstrap-curl-options <span style="color:#4070a0">"--proxy http://myproxy.com:8080"</span>
</code></pre></div>
<p><strong>Specify options when using GNU Wget</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife bootstrap --bootstrap-wget-options <span style="color:#4070a0">"-e use_proxy=yes -e http://myproxy.com:8080"</span>
</code></pre></div>
<p><strong>Specify a custom installation command sequence</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife bootstrap --bootstrap-install-command <span style="color:#4070a0">"curl -l http://mycustomserver.com/custom_install_chef_script.sh | sudo bash -s --"</span>
</code></pre></div>
<p><strong>Bootstrap a Windows node via WinRM using a run list and environment</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife bootstrap -o winrm 123.456.7.8 -U username -P <span style="color:#4070a0">'PASSWORD'</span> --node-name NODE_NAME --run-list <span style="color:#4070a0">'recipe[cookbook]'</span> -E ENV_NAME
</code></pre></div>
<p><strong>Bootstrap a Windows node via WinRM using a policyfile and policy group</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife bootstrap -o winrm 123.456.7.8 -U username -P <span style="color:#4070a0">'PASSWORD'</span> --node-name NODE_NAME --policy-name PF_NAME --policy-group PG_NAME
</code></pre></div>
<p><strong>Bootstrap Windows node with shorthand syntax</strong></p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">knife bootstrap winrm://username:PASSWORD@123.456.7.8 --run-list <span style="color:#4070a0">'recipe[cookbook]'</span> -E ENV_NAME
</code></pre></div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/knife_bootstrap/" class="_attribution-link">https://docs.chef.io/knife_bootstrap/</a>
  </p>
</div>
