<div id="col-content" data-swiftype-index="true"> <div id="omnitruck-api"><h1>Omnitruck API</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/chef/chef-web-docs/blob/main/content/api_omnitruck.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>Chef’s Omnitruck API powers the Chef Software install script as well as <a href="https://www.chef.io/downloads">Chef’s download</a> site. It can be used to query available versions of Chef Software products and to provide direct download URLs.</p> <h2 id="syntax">Syntax</h2> <p>The URL from which these downloads can be obtained has the following syntax:</p> <pre tabindex="0" class="highlight" data-language="ruby"><code class="language-none" data-lang="none">https://omnitruck.chef.io/&lt;CHANNEL&gt;/&lt;PRODUCT&gt;/download?p=$PLATFORM&amp;pv=$PLATFORM_VERSION&amp;m=$MACHINE_ARCH&amp;v=latest&amp;prerelease=false&amp;nightlies=false
</code></pre>
<p>or:</p> <pre tabindex="0" class="highlight" data-language="ruby"><code class="language-none" data-lang="none">https://omnitruck.chef.io/&lt;CHANNEL&gt;/&lt;PRODUCT&gt;/metadata?p=$PLATFORM&amp;pv=$PLATFORM_VERSION&amp;m=$MACHINE_ARCH&amp;v=latest&amp;prerelease=false&amp;nightlies=false
</code></pre>
<p>where the difference between these URLs is the <code>metadata</code> and <code>download</code> options. Use the <code>metadata</code> option to verify the build before downloading it. Use the <code>download</code> option to download the package in a single step.</p> <h2 id="downloads">Downloads</h2> <p>The <code>/metadata</code> and/or <code>/download</code> endpoints can be used to download packages for all products:</p> <pre tabindex="0" class="highlight" data-language="ruby"><code class="language-none" data-lang="none">https://omnitruck.chef.io/&lt;CHANNEL&gt;/&lt;PRODUCT&gt;/download?p=$PLATFORM&amp;pv=$PLATFORM_VERSION&amp;m=$MACHINE_ARCH&amp;v=latest
</code></pre>
<p>or:</p> <pre tabindex="0" class="highlight" data-language="ruby"><code class="language-none" data-lang="none">https://omnitruck.chef.io/&lt;CHANNEL&gt;/&lt;PRODUCT&gt;/metadata?p=$PLATFORM&amp;pv=$PLATFORM_VERSION&amp;m=$MACHINE_ARCH&amp;v=latest
</code></pre>
<p>where:</p> <ul> <li>
<code>&lt;CHANNEL&gt;</code> is the release channel to install from. See <a href="../packages/index.html">Chef Software Packages</a> for full details on the available channels.</li> <li>
<code>&lt;PRODUCT&gt;</code> is the Chef Software product to install. A list of valid product keys can be found at <a href="https://github.com/chef/mixlib-install/blob/main/PRODUCT_MATRIX.md">https://github.com/chef/mixlib-install/blob/main/PRODUCT_MATRIX.md</a>
</li> <li>
<code>p</code> is the platform. Possible values: <code>debian</code>, <code>el</code> (for RHEL derivatives), <code>freebsd</code>, <code>mac_os_x</code>, <code>solaris2</code>, <code>sles</code>, <code>suse</code>, <code>ubuntu</code> or <code>windows</code>.</li> <li>
<code>pv</code> is the platform version. Possible values depend on the platform. For example, Ubuntu: <code>18.04</code>, or <code>20.04</code> or for macOS: <code>10.15</code> or <code>11</code>.</li> <li>
<code>m</code> is the machine architecture for the machine on which the product will be installed. Possible values depend on the platform. For example, for Ubuntu or Debian: <code>i386</code> or <code>x86_64</code> or for macOS: <code>x86_64</code>.</li> <li>
<code>v</code> is the version of the product to be installed. A version always takes the form x.y.z, where x, y, and z are decimal numbers that are used to represent major (x), minor (y), and patch (z) versions. One-part (x) and two-part (x.y) versions are allowed. For more information about application versioning, see <a href="https://semver.org/">https://semver.org/</a>. Default value: <code>latest</code>.</li> </ul> <h3 id="platforms">Platforms</h3> <p>Omnitruck accepts the following platforms:</p> <table> <col style="width:25%"> <col style="width:12%"> <col style="width:23%"> <col style="width:50%"> <thead> <tr class="header"> <th>Platform</th> <th>p</th> <th>m</th> <th>pv</th> </tr> </thead> <tbody> <tr> <td>AIX</td> <td><code>aix</code></td> <td><code>powerpc</code></td> <td>
<code>6.1</code>, <code>7.1</code>, <code>7.2</code>
</td> </tr> <tr> <td>Amazon Linux</td> <td><code>amazon</code></td> <td>
<code>x86_64</code>,<code>aarch64</code>
</td> <td><code>201X, 2</code></td> </tr> <tr> <td>Debian</td> <td><code>debian</code></td> <td>
<code>i386</code>, <code>x86_64</code>, <code>aarch64</code>
</td> <td>
<code>6</code>, <code>7</code>, <code>8</code>, <code>9</code>, <code>10</code>, <code>11</code>
</td> </tr> <tr> <td>FreeBSD</td> <td><code>freebsd</code></td> <td><code>x86_64</code></td> <td>
<code>9</code>, <code>10</code>, <code>11</code>, <code>12</code>
</td> </tr> <tr> <td>macOS</td> <td><code>mac_os_x</code></td> <td>
<code>x86_64</code>, <code>aarch64</code>
</td> <td>
<code>10.6</code>, <code>10.7</code>, <code>10.8</code>, <code>10.9</code>, <code>10.10</code>, <code>10.11</code>, <code>10.12</code>, <code>10.13</code>, <code>10.14</code>, <code>10.15</code>, <code>11</code>, <code>12</code>
</td> </tr> <tr> <td>Solaris</td> <td><code>solaris2</code></td> <td>
<code>i386</code>, <code>sparc</code>
</td> <td>
<code>5.10</code>, <code>5.11</code>
</td> </tr> <tr> <td>SUSE Linux Enterprise Server</td> <td><code>sles</code></td> <td>
<code>x86_64</code>, <code>s390x</code>, <code>aarch64</code>
</td> <td>
<code>11</code>, <code>12</code>, <code>15</code>
</td> </tr> <tr> <td>Red Hat Enterprise Linux / CentOS / Oracle Linux</td> <td><code>el</code></td> <td>
<code>i386</code>, <code>x86_64</code>, <code>ppc64</code>, <code>ppc64le</code>, <code>aarch64</code>, <code>s390x</code>,</td> <td>
<code>5</code>, <code>6</code>, <code>7</code>, <code>8</code>
</td> </tr> <tr> <td>Ubuntu</td> <td><code>ubuntu</code></td> <td>
<code>i386</code>, <code>x86_64</code>, <code>aarch64</code>, <code>ppc64le</code>
</td> <td>
<code>10.04</code>, <code>10.10</code>, <code>11.04</code>, <code>11.10</code>, <code>12.04</code>, <code>12.10</code>, <code>13.04</code>, <code>13.10</code>, <code>14.04</code>, <code>14.10</code>, <code>16.04</code>, <code>16.10</code>, <code>17.04</code>, <code>17.10</code>, <code>18.04</code>, <code>18.10</code>, <code>19.04</code>, <code>20.04</code>, <code>20.10</code>, <code>21.04</code>, <code>21.10</code>
</td> </tr> <tr> <td>Microsoft Windows</td> <td><code>windows</code></td> <td>
<code>x86_64</code>, <code>i386</code>
</td> <td>
<code>7</code>, <code>8</code>, <code>10</code>, <span class="title-ref">2008r2</span>, <code>2012</code>, <code>2012r2</code>, <code>2016</code>, <code>2019</code>, <code>11</code>, <code>2022</code>
</td> </tr> </tbody> </table> <h3 id="examples">Examples</h3> <h4 id="get-the-latest-build">Get the Latest Build</h4> <p>To get the latest supported build for Ubuntu 20.04, enter the following:</p> <pre tabindex="0" class="highlight" data-language="ruby"><code class="language-none" data-lang="none">https://omnitruck.chef.io/stable/chef/metadata?p=ubuntu&amp;pv=20.04&amp;m=x86_64
</code></pre>
<p>to return something like:</p> <pre tabindex="0" class="highlight" data-language="ruby"><code class="language-none" data-lang="none">sha1 3fe8e8a2f443675f9b82e876cdac8200104451f2 
sha256 9f1c1a2c0b1f4e8494664386437bf32f0cb5cbfbd4cb9d23e327767fc65581dc 
url https://packages.chef.io/files/stable/chef/17.7.29/ubuntu/20.04/chef_17.7.29-1_amd64.deb 
version 17.7.29
</code></pre>
<h4 id="download-directly">Download Directly</h4> <p>To use cURL to download a package directly, enter the following:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">curl -LOJ <span style="color:#4070a0">'https://omnitruck.chef.io/&lt;CHANNEL&gt;/&lt;PRODUCT&gt;/download?p=debian&amp;pv=10&amp;m=x86_64'</span>
</code></pre></div>
<p>To use GNU Wget to download a package directly, enter the following:</p> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-bash" data-lang="bash">wget --content-disposition https://omnitruck.chef.io/&lt;CHANNEL&gt;/&lt;PRODUCT&gt;/download?p<span style="color:#666">=</span>debian&amp;<span style="color:#bb60d5">pv</span><span style="color:#666">=</span>10&amp;<span style="color:#bb60d5">m</span><span style="color:#666">=</span>x86_64
</code></pre></div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/api_omnitruck/" class="_attribution-link">https://docs.chef.io/api_omnitruck/</a>
  </p>
</div>
