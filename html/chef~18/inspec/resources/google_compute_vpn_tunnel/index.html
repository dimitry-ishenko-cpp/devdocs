<div id="col-content" data-swiftype-index="true"> <div id="google_compute_vpn_tunnel-resource"><h1>google_compute_vpn_tunnel resource</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/inspec/inspec/tree/main/docs-chef-io/content/inspec/resources/google_compute_vpn_tunnel.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <h2 id="syntax">Syntax</h2> <p>A <code>google_compute_vpn_tunnel</code> is used to test a Google VpnTunnel resource</p> <h2 id="beta-resource">Beta Resource</h2> <p>This resource has beta fields available. To retrieve these fields, include <code>beta: true</code> in the constructor for the resource</p> <h2 id="examples">Examples</h2> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">describe google_compute_vpn_tunnel(<span style="color:#517918">project</span>: <span style="color:#4070a0">'chef-gcp-inspec'</span>, <span style="color:#517918">region</span>: <span style="color:#4070a0">'europe-west2'</span>, <span style="color:#007020">name</span>: <span style="color:#4070a0">'inspec-vpn-tunnel'</span>) <span style="color:#007020;font-weight:700">do</span>
  it { should exist }
  its(<span style="color:#4070a0">'peer_ip'</span>) { should eq <span style="color:#4070a0">'15.0.0.120'</span> }
<span style="color:#007020;font-weight:700">end</span>

describe google_compute_vpn_tunnel(<span style="color:#517918">project</span>: <span style="color:#4070a0">'chef-gcp-inspec'</span>, <span style="color:#517918">region</span>: <span style="color:#4070a0">'europe-west2'</span>, <span style="color:#007020">name</span>: <span style="color:#4070a0">'nonexistent'</span>) <span style="color:#007020;font-weight:700">do</span>
  it { should_not exist }
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<h3 id="test-that-a-gcp-compute-vpn_tunnel-exists">Test that a GCP compute vpn_tunnel exists</h3> <pre class="highlight" data-language="ruby"><code>describe google_compute_vpn_tunnel(project: 'chef-inspec-gcp', region: 'europe-west2', name: 'gcp-inspec-vpn-tunnel') do
  it { should exist }
end
</code></pre> <h3 id="test-when-a-gcp-compute-vpn_tunnel-was-created">Test when a GCP compute vpn_tunnel was created</h3> <pre class="highlight" data-language="ruby"><code>describe google_compute_vpn_tunnel(project: 'chef-inspec-gcp', region: 'europe-west2', name: 'gcp-inspec-vpn-tunnel') do
  its('creation_timestamp_date') { should be &gt; Time.now - 365*60*60*24*10 }
end
</code></pre> <h3 id="test-for-an-expected-vpn_tunnel-identifier">Test for an expected vpn_tunnel identifier</h3> <pre class="highlight" data-language="ruby"><code>describe google_compute_vpn_tunnel(project: 'chef-inspec-gcp', region: 'europe-west2', name: 'gcp-inspec-vpn-tunnel') do
  its('id') { should eq 12345567789 }
end
</code></pre> <h3 id="test-that-a-vpn_tunnel-peer-address-is-as-expected">Test that a vpn_tunnel peer address is as expected</h3> <pre class="highlight" data-language="ruby"><code>describe google_compute_vpn_tunnel(project: 'chef-inspec-gcp', region: 'europe-west2', name: 'gcp-inspec-vpn-tunnel') do
  its('peer_ip') { should eq "123.123.123.123" }
end
</code></pre> <h3 id="test-that-a-vpn_tunnel-status-is-as-expected">Test that a vpn_tunnel status is as expected</h3> <pre class="highlight" data-language="ruby"><code>describe google_compute_vpn_tunnel(project: 'chef-inspec-gcp', region: 'europe-west2', name: 'gcp-inspec-vpn_tunnel') do
  its('status') { should eq "ESTABLISHED" }
end
</code></pre> <h2 id="properties">Properties</h2> <p>Properties that can be accessed from the <code>google_compute_vpn_tunnel</code> resource:</p> <dl> <dt><code>id</code></dt> <dd>The unique identifier for the resource. This identifier is defined by the server.</dd> <dt><code>creation_timestamp</code></dt> <dd>Creation timestamp in RFC3339 text format.</dd> <dt><code>name</code></dt> <dd>Name of the resource. The name must be 1-63 characters long, and comply with RFC1035. Specifically, the name must be 1-63 characters long and match the regular expression <code>[a-z]([-a-z0-9]*[a-z0-9])?</code> which means the first character must be a lowercase letter, and all following characters must be a dash, lowercase letter, or digit, except the last character, which cannot be a dash.</dd> <dt><code>description</code></dt> <dd>An optional description of this resource.</dd> <dt><code>target_vpn_gateway</code></dt> <dd>URL of the Target VPN gateway with which this VPN tunnel is associated.</dd> <dt><code>vpn_gateway</code></dt> <dd>(Beta only) URL of the VPN gateway with which this VPN tunnel is associated. This must be used if a High Availability VPN gateway resource is created.</dd> <dt><code>vpn_gateway_interface</code></dt> <dd>(Beta only) The interface ID of the VPN gateway with which this VPN tunnel is associated.</dd> <dt><code>peer_external_gateway</code></dt> <dd>(Beta only) URL of the peer side external VPN gateway to which this VPN tunnel is connected.</dd> <dt><code>peer_external_gateway_interface</code></dt> <dd>(Beta only) The interface ID of the external VPN gateway to which this VPN tunnel is connected.</dd> <dt><code>peer_gcp_gateway</code></dt> <dd>(Beta only) URL of the peer side HA GCP VPN gateway to which this VPN tunnel is connected. If provided, the VPN tunnel will automatically use the same vpn_gateway_interface ID in the peer GCP VPN gateway.</dd> <dt><code>router</code></dt> <dd>URL of router resource to be used for dynamic routing.</dd> <dt><code>peer_ip</code></dt> <dd>IP address of the peer VPN gateway. Only IPv4 is supported.</dd> <dt><code>shared_secret</code></dt> <dd>Shared secret used to set the secure session between the Cloud VPN gateway and the peer VPN gateway.</dd> <dt><code>shared_secret_hash</code></dt> <dd>Hash of the shared secret.</dd> <dt><code>ike_version</code></dt> <dd>IKE protocol version to use when establishing the VPN tunnel with peer VPN gateway. Acceptable IKE versions are 1 or 2. Default version is 2.</dd> <dt><code>local_traffic_selector</code></dt> <dd>Local traffic selector to use when establishing the VPN tunnel with peer VPN gateway. The value should be a CIDR formatted string, for example <code>192.168.0.0/16</code>. The ranges should be disjoint. Only IPv4 is supported.</dd> <dt><code>remote_traffic_selector</code></dt> <dd>Remote traffic selector to use when establishing the VPN tunnel with peer VPN gateway. The value should be a CIDR formatted string, for example <code>192.168.0.0/16</code>. The ranges should be disjoint. Only IPv4 is supported.</dd> <dt><code>labels</code></dt> <dd>(Beta only) Labels to apply to this VpnTunnel.</dd> <dt><code>label_fingerprint</code></dt> <dd>(Beta only) The fingerprint used for optimistic locking of this resource. Used internally during updates.</dd> <dt><code>region</code></dt> <dd>The region where the tunnel is located.</dd> </dl> <h2 id="gcp-permissions">GCP Permissions</h2> <p>Ensure the <a href="https://console.cloud.google.com/apis/library/compute.googleapis.com/">Compute Engine API</a> is enabled for the current project.</p> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/inspec/resources/google_compute_vpn_tunnel/" class="_attribution-link">https://docs.chef.io/inspec/resources/google_compute_vpn_tunnel/</a>
  </p>
</div>
