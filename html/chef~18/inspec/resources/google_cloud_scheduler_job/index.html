<div id="col-content" data-swiftype-index="true"> <div id="google_cloud_scheduler_job-resource"><h1>google_cloud_scheduler_job resource</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/inspec/inspec/tree/main/docs-chef-io/content/inspec/resources/google_cloud_scheduler_job.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <h2 id="syntax">Syntax</h2> <p>A <code>google_cloud_scheduler_job</code> is used to test a Google Job resource</p> <h2 id="examples">Examples</h2> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">describe google_cloud_scheduler_job(<span style="color:#517918">project</span>: <span style="color:#4070a0">'chef-gcp-inspec'</span>, <span style="color:#517918">region</span>: us<span style="color:#666">-</span>central1, <span style="color:#007020">name</span>: <span style="color:#4070a0">'job-name'</span>) <span style="color:#007020;font-weight:700">do</span>
  it { should exist }

  its(<span style="color:#4070a0">'description'</span>) { should cmp <span style="color:#4070a0">'A description'</span> }
  its(<span style="color:#4070a0">'schedule'</span>) { should cmp <span style="color:#4070a0">'*/8 * * * *'</span> }
  its(<span style="color:#4070a0">'time_zone'</span>) { should cmp <span style="color:#4070a0">'America/New_York'</span> }
  its(<span style="color:#4070a0">'http_target.http_method'</span>) { should cmp <span style="color:#4070a0">'POST'</span> }
  its(<span style="color:#4070a0">'http_target.uri'</span>) { should cmp <span style="color:#4070a0">'https://example.com/ping'</span> }
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<h2 id="properties">Properties</h2> <p>Properties that can be accessed from the <code>google_cloud_scheduler_job</code> resource:</p> <dl> <dt><code>name</code></dt> <dd>The name of the job.</dd> <dt><code>description</code></dt> <dd>A human-readable description for the job. This string must not contain more than 500 characters.</dd> <dt><code>schedule</code></dt> <dd>Describes the schedule on which the job will be executed.</dd> <dt><code>time_zone</code></dt> <dd>Specifies the time zone to be used in interpreting schedule. The value of this field must be a time zone name from the tz database.</dd> <dt><code>attempt_deadline</code></dt> <dd>The deadline for job attempts. If the request handler does not respond by this deadline then the request is cancelled and the attempt is marked as a DEADLINE_EXCEEDED failure. The failed attempt can be viewed in execution logs. Cloud Scheduler will retry the job according to the RetryConfig. The allowed duration for this deadline is: For HTTP targets, between 15 seconds and 30 minutes, for App Engine HTTP targets, between 15 seconds and 24 hours. A duration in seconds with up to nine fractional digits, terminated by ’s'. Example: “3.5s”</dd> <dt><code>retry_config</code></dt> <dd>By default, if a job does not complete successfully, meaning that an acknowledgement is not received from the handler, then it will be retried with exponential backoff according to the settings</dd> <dt><code>retry_count</code></dt> <dd>The number of attempts that the system will make to run a job using the exponential backoff procedure described by maxDoublings. Values greater than 5 and negative values are not allowed.</dd> <dt><code>max_retry_duration</code></dt> <dd>The time limit for retrying a failed job, measured from time when an execution was first attempted. If specified with retryCount, the job will be retried until both limits are reached. A duration in seconds with up to nine fractional digits, terminated by ’s'.</dd> <dt><code>min_backoff_duration</code></dt> <dd>The minimum amount of time to wait before retrying a job after it fails. A duration in seconds with up to nine fractional digits, terminated by ’s'.</dd> <dt><code>max_backoff_duration</code></dt> <dd>The maximum amount of time to wait before retrying a job after it fails. A duration in seconds with up to nine fractional digits, terminated by ’s'.</dd> <dt><code>max_doublings</code></dt> <dd>The time between retries will double maxDoublings times. A job’s retry interval starts at minBackoffDuration, then doubles maxDoublings times, then increases linearly, and finally retries retries at intervals of maxBackoffDuration up to retryCount times.</dd> <dt><code>pubsub_target</code></dt> <dd>Pub/Sub target If the job providers a Pub/Sub target the cron will publish a message to the provided topic</dd> <dt><code>topic_name</code></dt> <dd>The full resource name for the Cloud Pub/Sub topic to which messages will be published when a job is delivered. <div class="admonition-note"> <p class="admonition-note-title">Note</p> <div class="admonition-note-text"> The topic name must be in the same format as required by PubSub’s PublishRequest.name, e.g. <code>projects/my-project/topics/my-topic</code>. </div> </div> </dd> <dt><code>data</code></dt> <dd>The message payload for PubsubMessage. Pubsub message must contain either non-empty data, or at least one attribute.</dd> <dt><code>attributes</code></dt> <dd>Attributes for PubsubMessage. Pubsub message must contain either non-empty data, or at least one attribute.</dd> <dt><code>app_engine_http_target</code></dt> <dd>App Engine HTTP target. If the job providers a App Engine HTTP target the cron will send a request to the service instance</dd> <dt><code>http_method</code></dt> <dd>Which HTTP method to use for the request.</dd> <dt><code>app_engine_routing</code></dt> <dd>App Engine Routing setting for the job. <dl> <dt><code>service</code></dt> <dd>App service. By default, the job is sent to the service which is the default service when the job is attempted.</dd> <dt><code>version</code></dt> <dd>App version. By default, the job is sent to the version which is the default version when the job is attempted.</dd> <dt><code>instance</code></dt> <dd>App instance. By default, the job is sent to an instance which is available when the job is attempted.</dd> </dl> </dd> <dt><code>relative_uri</code></dt> <dd>The relative URI. The relative URL must begin with “/” and must be a valid HTTP relative URL. It can contain a path, query string arguments, and # fragments. If the relative URL is empty, then the root path “/” will be used. No spaces are allowed, and the maximum length allowed is 2083 characters</dd> <dt><code>body</code></dt> <dd>HTTP request body. A request body is allowed only if the HTTP method is POST or PUT. It will result in invalid argument error to set a body on a job with an incompatible HttpMethod.</dd> <dt><code>headers</code></dt> <dd>HTTP request headers. This map contains the header field names and values. Headers can be set when the job is created.</dd> <dt><code>http_target</code></dt> <dd>HTTP target. If the job providers a http_target the cron will send a request to the targeted url</dd> <dt><code>uri</code></dt> <dd>The full URI path that the request will be sent to.</dd> <dt><code>http_method</code></dt> <dd>Which HTTP method to use for the request.</dd> <dt><code>body</code></dt> <dd>HTTP request body. A request body is allowed only if the HTTP method is POST, PUT, or PATCH. It is an error to set body on a job with an incompatible HttpMethod.</dd> <dt><code>headers</code></dt> <dd>This map contains the header field names and values. Repeated headers are not supported, but a header value can contain commas.</dd> <dt><code>oauth_token</code></dt> <dd>Contains information needed for generating an OAuth token. This type of authorization should be used when sending requests to a GCP endpoint. <dl> <dt><code>service_account_email</code></dt> <dd>Service account email to be used for generating OAuth token. The service account must be within the same project as the job.</dd> <dt><code>scope</code></dt> <dd>OAuth scope to be used for generating OAuth access token. If not specified, “<a href="https://www.googleapis.com/auth/cloud-platform%22">https://www.googleapis.com/auth/cloud-platform"</a> will be used.</dd> </dl> </dd> <dt><code>oidc_token</code></dt> <dd>Contains information needed for generating an OpenID Connect token. This type of authorization should be used when sending requests to third party endpoints or Cloud Run.</dd> <dt><code>service_account_email</code></dt> <dd>Service account email to be used for generating OAuth token. The service account must be within the same project as the job. <dl> <dt><code>audience</code></dt> <dd>Audience to be used when generating OIDC token. If not specified, the URI specified in target will be used.</dd> </dl> </dd> <dt><code>region</code></dt> <dd>Region where the scheduler job resides</dd> </dl> <h2 id="gcp-permissions">GCP Permissions</h2> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/inspec/resources/google_cloud_scheduler_job/" class="_attribution-link">https://docs.chef.io/inspec/resources/google_cloud_scheduler_job/</a>
  </p>
</div>
