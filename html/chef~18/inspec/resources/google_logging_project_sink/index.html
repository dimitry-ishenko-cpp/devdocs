<div id="col-content" data-swiftype-index="true"> <div id="google_logging_project_sink-resource"><h1>google_logging_project_sink resource</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/inspec/inspec/tree/main/docs-chef-io/content/inspec/resources/google_logging_project_sink.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <h2 id="syntax">Syntax</h2> <p>A <code>google_logging_project_sink</code> is used to test a Google ProjectSink resource</p> <h2 id="examples">Examples</h2> <div class="highlight"><pre tabindex="0" class="highlight" data-language="ruby"><code class="language-ruby" data-lang="ruby">describe google_logging_project_sink(<span style="color:#517918">project</span>: <span style="color:#4070a0">'chef-gcp-inspec'</span>, <span style="color:#007020">name</span>: <span style="color:#4070a0">'inspec-gcp-org-sink'</span>) <span style="color:#007020;font-weight:700">do</span>
  it { should exist }
  its(<span style="color:#4070a0">'filter'</span>) { should cmp <span style="color:#4070a0">'resource.type = gce_instance AND severity = DEBUG'</span> }
<span style="color:#007020;font-weight:700">end</span>

describe google_logging_project_sink(<span style="color:#517918">project</span>: <span style="color:#4070a0">'chef-gcp-inspec'</span>, <span style="color:#007020">name</span>: <span style="color:#4070a0">'nonexistent'</span>) <span style="color:#007020;font-weight:700">do</span>
  it { should_not exist }
<span style="color:#007020;font-weight:700">end</span>
</code></pre></div>
<h3 id="test-that-a-gcp-project-logging-sink-destination-is-correct">Test that a GCP project logging sink destination is correct</h3> <pre class="highlight" data-language="ruby"><code>describe google_logging_project_sink(project: 'chef-inspec-gcp',  sink: 'sink-name-abcd') do
  its('destination') { should eq 'storage.googleapis.com/gcp-inspec-logging-bucket' }
end
</code></pre> <h3 id="test-that-a-gcp-project-logging-sink-filter-is-correct">Test that a GCP project logging sink filter is correct</h3> <pre class="highlight" data-language="ruby"><code>describe google_logging_project_sink(project: 'chef-inspec-gcp',  sink: 'sink-name-abcd') do
  its('filter') { should eq "resource.type = gce_instance AND resource.labels.instance_id = \"12345678910123123\"" }
end
</code></pre> <h3 id="test-a-gcp-project-logging-sink-output-version-format">Test a GCP project logging sink output version format</h3> <pre class="highlight" data-language="ruby"><code>describe google_logging_project_sink(project: 'chef-inspec-gcp',  sink: 'sink-name-abcd') do
  its('output_version_format') { should eq "V2" }
end
</code></pre> <h3 id="test-a-gcp-project-logging-sink-writer-identity-is-as-expected">Test a GCP project logging sink writer identity is as expected</h3> <pre class="highlight" data-language="ruby"><code>describe google_logging_project_sink(project: 'chef-inspec-gcp',  sink: 'sink-name-abcd') do
  its('writer_identity') { should eq "serviceAccount:my-logging-service-account.iam.gserviceaccount.com" }
end
</code></pre> <h2 id="properties">Properties</h2> <p>Properties that can be accessed from the <code>google_logging_project_sink</code> resource:</p> <dl> <dt><code>project</code></dt> <dd>Id of the project that this sink belongs to.</dd> <dt><code>name</code></dt> <dd>Name of the log sink.</dd> <dt><code>filter</code></dt> <dd>An advanced logs filter. The only exported log entries are those that are in the resource owning the sink and that match the filter.</dd> <dt><code>destination</code></dt> <dd>The export destination.</dd> <dt><code>writer_identity</code></dt> <dd>An IAM identity—a service account or group—under which Logging writes the exported log entries to the sink’s destination. This field is set by sinks.create and sinks.update based on the value of uniqueWriterIdentity in those methods.</dd> <dt><code>include_children</code></dt> <dd>If the field is false, the default, only the logs owned by the sink’s parent resource are available for export. If the field is true, then logs from all the projects, folders, and billing accounts contained in the sink’s parent resource are also available for export. Whether a particular log entry from the children is exported depends on the sink’s filter expression.</dd> </dl> <h2 id="gcp-permissions">GCP Permissions</h2> <p>Ensure the <a href="https://console.cloud.google.com/apis/library/logging.googleapis.com/">Stackdriver Logging API</a> is enabled for the current project.</p> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/inspec/resources/google_logging_project_sink/" class="_attribution-link">https://docs.chef.io/inspec/resources/google_logging_project_sink/</a>
  </p>
</div>
