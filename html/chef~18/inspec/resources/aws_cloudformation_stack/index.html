<div id="col-content" data-swiftype-index="true"> <div id="aws_cloudformation_stack-resource"><h1>aws_cloudformation_stack resource</h1></div>  <div class="prose"> <p data-swiftype-index="false"> <a href="https://github.com/inspec/inspec/tree/main/docs-chef-io/content/inspec/resources/aws_cloudformation_stack.md" alt="Link to page on GitHub repository">[edit on GitHub]</a> </p> <p>Use the <code>aws_cloudformation_stack</code> InSpec audit resource to test properties of a single AWS Cloud Formation Stack.</p> <h2 id="syntax">Syntax</h2> <p>Ensure that an <code>aws_cloudformation_stack</code> exists</p> <pre class="highlight" data-language="ruby"><code>describe aws_cloudformation_stack('stack-name') do
  it { should exist }
end

describe aws_cloudformation_stack(stack_name: 'stack-name') do
  it { should exist }
end
</code></pre> <h2 id="parameters">Parameters</h2> <h3 id="stack_name-_required_">stack_name <em>(required)</em>
</h3> <p>This resource accepts a single parameter, the CloudFormation Stack name which uniquely identifies the stack. This can be passed either as a string or as a <code>stack_name: 'value'</code> key-value entry in a hash.</p> <p>See also the <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/Welcome.html">AWS documentation on Cloud Formation</a>.</p> <h2 id="properties">Properties</h2> <table> <thead> <tr> <th>Property</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>stack_id</td> <td>Unique identifier of the stack.</td> </tr> <tr> <td>stack_name</td> <td>The name associated with the stack.</td> </tr> <tr> <td>change_set_id</td> <td>The unique ID of the change set.</td> </tr> <tr> <td>description</td> <td>A user-defined description associated with the stack.</td> </tr> <tr> <td>parameters</td> <td>A list of Parameter structures.</td> </tr> <tr> <td>creation_time</td> <td>The time at which the stack was created.</td> </tr> <tr> <td>deletion_time</td> <td>The time the stack was deleted.</td> </tr> <tr> <td>last_updated_time</td> <td>The time the stack was last updated.</td> </tr> <tr> <td>rollback_configuration</td> <td>The rollback triggers for AWS CloudFormation to monitor during stack creation and updating operations, and for the specified monitoring period afterwards.</td> </tr> <tr> <td>stack_status</td> <td>Current status of the stack.</td> </tr> <tr> <td>stack_status_reason</td> <td>Success/failure message associated with the stack status.</td> </tr> <tr> <td>drift_information</td> <td>Information on whether a stack’s actual configuration differs, or has drifted, from it’s expected configuration, as defined in the stack template and any values specified as template parameters.</td> </tr> <tr> <td>disable_rollback</td> <td>Boolean to enable or disable rollback on stack creation failures:</td> </tr> <tr> <td>notification_arns</td> <td>SNS topic ARNs to which stack related events are published.</td> </tr> <tr> <td>timeout_in_minutes</td> <td>The amount of time within which stack creation should complete.</td> </tr> <tr> <td>capabilities</td> <td>The capabilities allowed in the stack.</td> </tr> <tr> <td>outputs</td> <td>A list of output structures.</td> </tr> <tr> <td>role_arn</td> <td>The Amazon Resource Name (ARN) of an AWS Identity and Access Management (IAM) role that is associated with the stack.</td> </tr> <tr> <td>tags</td> <td>A list of Tags that specify information about the stack.</td> </tr> <tr> <td>enable_termination_protection</td> <td>Whether termination protection is enabled for the stack.</td> </tr> <tr> <td>parent_id</td> <td>For nested stacks–stacks created as resources for another stack–the stack ID of the direct parent of this stack.</td> </tr> <tr> <td>root_id</td> <td>For nested stacks–stacks created as resources for another stack–the stack ID of the the top-level stack to which the nested stack ultimately belongs.</td> </tr> </tbody> </table> <h2 id="examples">Examples</h2> <h3 id="test-that-a-cloudformation-stack-has-its-stack_status-configured-correctly">Test that a CloudFormation Stack has its stack_status configured correctly</h3> <pre class="highlight" data-language="ruby"><code>describe aws_cloudformation_stack('stack_name') do
its ('stack_status')  { should eq 'CREATE_COMPLETE' }
end
</code></pre> <h2 id="matchers">Matchers</h2> <p>This InSpec audit resource has no special matchers. For a full list of available matchers, please visit our <a href="../../matchers/index.html">Universal Matchers page</a>.</p> <h3 id="exist">exist</h3> <p>The control will pass if the describe returns at least one result.</p> <p>Use <code>should_not</code> to test the entity should not exist.</p> <pre class="highlight" data-language="ruby"><code>describe aws_cloudformation_stack('AnExistingStack') do
  it { should exist }
end

describe aws_cloudformation_stack('ANonExistentStack') do
  it { should_not exist }
end
</code></pre> <h2 id="aws-permissions">AWS Permissions</h2> <p>Your <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/intro-structure.html#intro-structure-principal">Principal</a> will need the <code>cloudformation:DescribeStacks</code> action set to Allow.</p> <p>You can find detailed documentation at <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/Welcome.html">Authentication and Access Control for CloudFormation</a></p> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Chef Software, Inc.<br>Licensed under the Creative Commons Attribution 3.0 Unported License.<br>The Chef&trade; Mark and Chef Logo are either registered trademarks/service marks or trademarks/servicemarks of Chef, in the United States and other countries and are used with Chef Inc's permission.<br>We are not affiliated with, endorsed or sponsored by Chef Inc.<br>
    <a href="https://docs.chef.io/inspec/resources/aws_cloudformation_stack/" class="_attribution-link">https://docs.chef.io/inspec/resources/aws_cloudformation_stack/</a>
  </p>
</div>
