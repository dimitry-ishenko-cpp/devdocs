<h1 class="title">Java ReQL command reference</h1>  <blockquote class="infobox infobox-info"> <p> <strong>Looking for documentation for a community driver?</strong><br> <a href="../../docs/install-drivers/index.html">Find the project page</a> for your driver for specific ReQL documentation. </p> </blockquote> <section class="api-sections"> <div class="alg-content">
<section class="api-section"><h2 data-alt="Accessing ReQL ">Accessing ReQL </h2>
<h3 id="r"><a href="r/index.html">r</a></h3> <pre class="command-syntax" data-language="java">r → RethinkDB
</pre> <p>The top-level ReQL namespace.</p> <p><strong>Example:</strong> Set up your top-level namespace.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">import com.rethinkdb.RethinkDB;
import com.rethinkdb.gen.exc.ReqlError;
import com.rethinkdb.gen.exc.ReqlQueryLogicError;
import com.rethinkdb.model.MapObject;
import com.rethinkdb.net.Connection;

public static final RethinkDB r = RethinkDB.r;
</pre></div></div> <p><a href="r/index.html">Read more about this command →</a></p> <h3 id="connection"><a href="connect/index.html">connection</a></h3> <pre class="command-syntax" data-language="java">r.connection() → Connection.Builder
</pre> <p>Create a new connection to the database server. <code class="language-plaintext highlighter-rouge">connection</code> returns a connection builder with the following methods:</p> <ul> <li>
<code class="language-plaintext highlighter-rouge">hostname(String)</code>: the host to connect to (default <code class="language-plaintext highlighter-rouge">localhost</code>).</li> <li>
<code class="language-plaintext highlighter-rouge">port(Integer)</code>: the port to connect on (default <code class="language-plaintext highlighter-rouge">28015</code>).</li> <li>
<code class="language-plaintext highlighter-rouge">db(String)</code>: the default database (default <code class="language-plaintext highlighter-rouge">test</code>).</li> <li>
<code class="language-plaintext highlighter-rouge">user(String, String)</code>: the user account and password to connect as (default <code class="language-plaintext highlighter-rouge">"admin", ""</code>).</li> <li>
<code class="language-plaintext highlighter-rouge">authKey(String)</code>: the auth key to connect with (default <code class="language-plaintext highlighter-rouge">null</code>).</li> <li>
<code class="language-plaintext highlighter-rouge">sslContext(SSLContext)</code>: an instance of an <a href="https://docs.oracle.com/javase/8/docs/api/javax/net/ssl/SSLContext.html">SSLContext</a> class to use for SSL connections.</li> <li>
<code class="language-plaintext highlighter-rouge">certFile(InputStream)</code>: an <a href="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html">InputStream</a>, which will be read and converted into an <a href="https://docs.oracle.com/javase/8/docs/api/javax/net/ssl/SSLContext.html">SSLContext</a>.</li> <li>
<code class="language-plaintext highlighter-rouge">timeout(Long)</code>: timeout period in milliseconds for the connection to be opened (default <code class="language-plaintext highlighter-rouge">null</code>).</li> <li>
<code class="language-plaintext highlighter-rouge">socketFactory(ConnectionSocket.Factory)</code>: A factory to override the default connection socket (default <code class="language-plaintext highlighter-rouge">null</code>, which uses the default factory).</li> <li>
<code class="language-plaintext highlighter-rouge">pumpFactory(ResponsePump.Factory)</code>: A factory to override the default response pump (default <code class="language-plaintext highlighter-rouge">null</code>, which uses the default factory).</li> <li>
<code class="language-plaintext highlighter-rouge">unwrapLists(boolean)</code>: If enabled, will unwrap atom responses which are lists for convenience (default <code class="language-plaintext highlighter-rouge">false</code>).</li> <li>
<code class="language-plaintext highlighter-rouge">defaultFetchMode(Result.FetchMode)</code>: Overrides the connection’s fetch mode regarding partial sequences (default <code class="language-plaintext highlighter-rouge">Result.FetchMode.LAZY</code>).</li> </ul> <p>Either <code class="language-plaintext highlighter-rouge">certFile</code> or <code class="language-plaintext highlighter-rouge">sslContext</code> must be supplied to make an SSL connection to the RethinkDB server. Only one should be used.</p> <p>If the connection cannot be established, a <code class="language-plaintext highlighter-rouge">ReqlDriverError</code> will be thrown.</p> <p><strong>Example:</strong> Open a connection using the default host and port, specifying the default database.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">Connection conn = r.connection().connect();
</pre></div></div> <p><a href="connect/index.html">Read more about this command →</a></p> <h3 id="close"><a href="close/index.html">close</a></h3> <pre class="command-syntax" data-language="java">conn.close([boolean])
</pre> <p>Close an open connection.</p> <p><strong>Example:</strong> Close an open connection, waiting for noreply writes to finish.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">conn.close();
</pre></div></div> <p><a href="close/index.html">Read more about this command →</a></p> <h3 id="reconnect"><a href="reconnect/index.html">reconnect</a></h3> <pre class="command-syntax" data-language="java">conn.reconnect([boolean])
</pre> <p>Close and reopen a connection. If the parameter is true, wait for noreply writes to finish before closing (default <code class="language-plaintext highlighter-rouge">false</code>).</p> <p><strong>Example:</strong> Cancel outstanding requests/queries that are no longer needed.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">conn.reconnect();
</pre></div></div> <p><a href="reconnect/index.html">Read more about this command →</a></p> <h3 id="use"><a href="use/index.html">use</a></h3> <pre class="command-syntax" data-language="java">conn.use(dbName)
</pre> <p>Change the default database on this connection.</p> <p><strong>Example:</strong> Change the default database so that we don’t need to specify the database when referencing a table.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">conn.use("marvel");
r.table("heroes").run(conn);  // refers to r.db("marvel").table("heroes")
</pre></div></div> <p><a href="use/index.html">Read more about this command →</a></p> <h3 id="run"><a href="run/index.html">run</a></h3> <pre class="command-syntax" data-language="java">query.run(conn[, optArgs, fetchMode, typeRef]) → Result
query.runAsync(conn[, optArgs, fetchMode, typeRef]) → CompletableFuture&lt;Result&gt;
</pre> <p>Run a query on a connection, returning a result object.</p> <p><strong>Example:</strong> If you are OK with potentially out of date data from all the tables involved in this query and want potentially faster reads, pass a flag allowing out of date data in an options object. Settings for individual tables will supercede this global setting for all tables in the query.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">import com.rethinkdb.model.OptArgs;

r.table("marvel").run(conn, OptArgs.of("read_mode", "outdated"));
</pre></div></div> <p><a href="run/index.html">Read more about this command →</a></p> <h3 id="runnoreply"><a href="run_noreply/index.html">runNoReply</a></h3> <pre class="command-syntax" data-language="java">query.runNoReply(conn[, optArgs])
</pre> <p>Run a query on a connection and immediately return, without waiting for any result data to be returned by the server.</p> <p><strong>Example:</strong> Send a write and return immediately.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").insert(document).runNoReply(conn);
</pre></div></div> <p><a href="run_noreply/index.html">Read more about this command →</a></p> <h3 id="changes"><a href="changes/index.html">changes</a></h3> <pre class="command-syntax" data-language="java">stream.changes() → stream
singleSelection.changes() → stream
</pre> <p>Turn a query into a changefeed, an infinite stream of objects representing changes to the query’s results as they occur. A changefeed may return changes to a table or an individual document (a “point” changefeed). Commands such as <code class="language-plaintext highlighter-rouge">filter</code> or <code class="language-plaintext highlighter-rouge">map</code> may be used before the <code class="language-plaintext highlighter-rouge">changes</code> command to transform or filter the output, and many commands that operate on sequences can be chained after <code class="language-plaintext highlighter-rouge">changes</code>.</p> <p><strong>Example:</strong> Subscribe to the changes on a table.</p> <p>Start monitoring the changefeed in one client:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">Result&lt;Object&gt; changes = r.table("games").changes().run(conn);
for (Object change : changes) {
    System.out.println(change);
}
</pre></div></div> <p>As these queries are performed in a second client, the first client would receive and print the following objects:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("games").insert(r.hashMap("id", 1)).run(conn);
</pre></div></div> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">{"old_val": null, "new_val": {"id": 1}}
</pre></div></div> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("games").get(1).update(r.hashMap("player1", "Bob")).run(conn);
</pre></div></div> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">{"old_val": {"id": 1}, "new_val": {"id": 1, "player1": "Bob"}}
</pre></div></div> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("games").get(1).replace(
    r.hashMap("id", 1).with("player1", "Bob").with("player2", "Alice")
).run(conn);
</pre></div></div> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">{"old_val": {"id": 1, "player1": "Bob"},
 "new_val": {"id": 1, "player1": "Bob", "player2": "Alice"}}
</pre></div></div> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("games").get(1).delete().run(conn);
</pre></div></div> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">{"old_val": {"id": 1, "player1": "Bob", "player2": "Alice"}, "new_val": null}
</pre></div></div> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.tableDrop("games").run(conn);
</pre></div></div> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">ReqlRuntimeError: Changefeed aborted (table unavailable)
</pre></div></div> <p><a href="changes/index.html">Read more about this command →</a></p> <h3 id="noreplywait"><a href="noreply_wait/index.html">noreplyWait</a></h3> <pre class="command-syntax" data-language="java">conn.noreplyWait()
conn.noreplyWaitAsync() → CompletableFuture
</pre> <p>Ensure that previous queries executed with <a href="run_noreply/index.html">runNoReply</a> have been processed by the server. Note that this guarantee only apples to queries run on the same connection.</p> <p><strong>Example:</strong> We have previously executed queries with <code class="language-plaintext highlighter-rouge">runNoReply</code>. Now wait until the server has processed them.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">conn.noreplyWait();
</pre></div></div> <p><a href="noreply_wait/index.html">Read more about this command →</a></p> <h3 id="server"><a href="server/index.html">server</a></h3> <pre class="command-syntax" data-language="java">conn.server()
</pre> <p>Return information about the server being used by a connection.</p> <p><strong>Example:</strong> Return server information.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">conn.server();
</pre></div></div> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">{
    "id": "404bef53-4b2c-433f-9184-bc3f7bda4a15",
    "name": "amadeus",
    "proxy": false
}
</pre></div></div> <p><a href="server/index.html">Read more about this command →</a></p> <h3 id="optarg"><a href="optarg/index.html">optArg</a></h3> <pre class="command-syntax" data-language="java">term.optArg(option, value)
</pre> <p>Specify an optional argument to a Java ReQL term.</p> <p><strong>Example:</strong> Pass the <code class="language-plaintext highlighter-rouge">right_bound</code> optional argument to <a href="between/index.html">between</a>.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").between(10, 20).optArg("right_bound", "closed").run(conn);
</pre></div></div> <p>To pass more than one optional argument, chain <code class="language-plaintext highlighter-rouge">optArg</code> once for each argument.</p> <p><a href="optarg/index.html">Read more about this command →</a></p> </section> <section class="api-section"><h2 data-alt="Results ">Results </h2>
<h3 id="next"><a href="next/index.html">next</a></h3> <pre class="command-syntax" data-language="java">result.next([timeout, unit])
</pre> <p>Get the next element of the result.</p> <p><strong>Example:</strong> Retrieve the next element.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">try (Result&lt;Object&gt; result = r.table("superheroes").run(conn)) {
    Object doc = result.next();
}
</pre></div></div> <p><a href="next/index.html">Read more about this command →</a></p> <h3 id="foreach"><a href="each/index.html">forEach</a></h3> <pre class="command-syntax" data-language="java">result.forEach(doc -&gt; { ... })
</pre> <p>Lazily iterate over a result set one element at a time.</p> <p><strong>Example:</strong> Let’s process all the elements!</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">
try (Result&lt;Object&gt; result = r.table("users").run(conn)) {
    result.forEach(doc -&gt; { System.out.println(doc); });
}
</pre></div></div> <p><a href="each/index.html">Read more about this command →</a></p> <h3 id="tolist"><a href="to_array/index.html">toList</a></h3> <pre class="command-syntax" data-language="java">result.toList()
</pre> <p>Retrieve all results from a result as a list.</p> <p><strong>Example:</strong> For small result sets it may be more convenient to process them at once as a list.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">try (Result&lt;Object&gt; result = r.table("users").run(conn)) {
    processResults(result.toList());
}
</pre></div></div> <p><a href="to_array/index.html">Read more about this command →</a></p> <h3 id="close"><a href="close-cursor/index.html">close</a></h3> <pre class="command-syntax" data-language="java">result.close()
</pre> <p>Close a result. Closing a result cancels the corresponding query and frees the memory associated with the open request.</p> <p><strong>Example:</strong> Close a result.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">result.close();
</pre></div></div> <p><a href="close-cursor/index.html">Read more about this command →</a></p> </section> <section class="api-section"><h2 data-alt="Manipulating databases ">Manipulating databases </h2>
<h3 id="dbcreate"><a href="db_create/index.html">dbCreate</a></h3> <pre class="command-syntax" data-language="java">r.dbCreate(dbName) → object
</pre> <p>Create a database. A RethinkDB database is a collection of tables, similar to relational databases.</p> <p><strong>Example:</strong> Create a database named ‘superheroes’.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.dbCreate("superheroes").run(conn);
</pre></div></div> <p>Return:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">{
    "config_changes": [
        {
            "new_val": {
                "id": "e4689cfc-e903-4532-a0e6-2d6797a43f07",
                "name": "superheroes"
            },
            "old_val": null
        }
    ],
    "dbs_created": 1
}
</pre></div></div> <p><a href="db_create/index.html">Read more about this command →</a></p> <h3 id="dbdrop"><a href="db_drop/index.html">dbDrop</a></h3> <pre class="command-syntax" data-language="java">r.dbDrop(dbName) → object
</pre> <p>Drop a database. The database, all its tables, and corresponding data will be deleted.</p> <p><strong>Example:</strong> Drop a database named ‘superheroes’.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.dbDrop("superheroes").run(conn);
</pre></div></div> <p>Return:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">{
    "config_changes": [
        {
            "old_val": {
                "id": "e4689cfc-e903-4532-a0e6-2d6797a43f07",
                "name": "superheroes"
            },
            "new_val": null
        }
    ],
    "tables_dropped": 3,
    "dbs_dropped": 1
}
</pre></div></div> <p><a href="db_drop/index.html">Read more about this command →</a></p> <h3 id="dblist"><a href="db_list/index.html">dbList</a></h3> <pre class="command-syntax" data-language="java">r.dbList() → array
</pre> <p>List all database names in the cluster. The result is a list of strings.</p> <p><strong>Example:</strong> List all databases.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.dbList().run(conn);
</pre></div></div> <p><a href="db_list/index.html">Read more about this command →</a></p> </section> <section class="api-section"><h2 data-alt="Manipulating tables ">Manipulating tables </h2>
<h3 id="tablecreate"><a href="table_create/index.html">tableCreate</a></h3> <pre class="command-syntax" data-language="java">db.tableCreate(tableName) → object
r.tableCreate(tableName) → object
</pre> <p>Create a table. A RethinkDB table is a collection of JSON documents.</p> <p><strong>Example:</strong> Create a table named ‘dc_universe’ with the default settings.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.db("heroes").tableCreate("dc_universe").run(conn);
</pre></div></div> <p>Result:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">{
    "config_changes": [
        {
            "new_val": {
                "db": "test",
                "durability":  "hard",
                "id": "20ea60d4-3b76-4817-8828-98a236df0297",
                "name": "dc_universe",
                "primary_key": "id",
                "shards": [
                    {
                        "primary_replica": "rethinkdb_srv1",
                        "replicas": [
                            "rethinkdb_srv1",
                            "rethinkdb_srv2"
                        ]
                    }
                ],
                "write_acks": "majority"
            },
            "old_val": null
        }
    ],
    "tables_created": 1
}
</pre></div></div> <p><a href="table_create/index.html">Read more about this command →</a></p> <h3 id="tabledrop"><a href="table_drop/index.html">tableDrop</a></h3> <pre class="command-syntax" data-language="java">db.tableDrop(tableName) → object
</pre> <p>Drop a table from a database. The table and all its data will be deleted.</p> <p><strong>Example:</strong> Drop a table named “dc_universe”.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.db("test").tableDrop("dc_universe").run(conn);
</pre></div></div> <p>Result:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">{
    "config_changes": [
        {
            "old_val": {
                "db": "test",
                "durability":  "hard",
                "id": "20ea60d4-3b76-4817-8828-98a236df0297",
                "name": "dc_universe",
                "primary_key": "id",
                "shards": [
                    {
                        "primary_replica": "rethinkdb_srv1",
                        "replicas": [
                            "rethinkdb_srv1",
                            "rethinkdb_srv2"
                        ]
                    }
                ],
                "write_acks": "majority"
            },
            "new_val": null
        }
    ],
    "tables_dropped": 1
}
</pre></div></div> <p><a href="table_drop/index.html">Read more about this command →</a></p> <h3 id="tablelist"><a href="table_list/index.html">tableList</a></h3> <pre class="command-syntax" data-language="java">db.tableList() → array
</pre> <p>List all table names in a database. The result is a list of strings.</p> <p><strong>Example:</strong> List all tables of the ‘test’ database.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.db("test").tableList().run(conn);
</pre></div></div> <p><a href="table_list/index.html">Read more about this command →</a></p> <h3 id="indexcreate"><a href="index_create/index.html">indexCreate</a></h3> <pre class="command-syntax" data-language="java">table.indexCreate(indexName[, indexFunction]) → object
</pre> <p>Create a new secondary index on a table. Secondary indexes improve the speed of many read queries at the slight cost of increased storage space and decreased write performance. For more information about secondary indexes, read the article “<a href="../../docs/secondary-indexes/java/index.html">Using secondary indexes in RethinkDB</a>.”</p> <p><strong>Example:</strong> Create a simple index based on the field <code class="language-plaintext highlighter-rouge">postId</code>.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("comments").indexCreate("postId").run(conn);
</pre></div></div> <p><a href="index_create/index.html">Read more about this command →</a></p> <h3 id="indexdrop"><a href="index_drop/index.html">indexDrop</a></h3> <pre class="command-syntax" data-language="java">table.indexDrop(indexName) → object
</pre> <p>Delete a previously created secondary index of this table.</p> <p><strong>Example:</strong> Drop a secondary index named ‘code_name’.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("dc").indexDrop("code_name").run(conn);
</pre></div></div> <p><a href="index_drop/index.html">Read more about this command →</a></p> <h3 id="indexlist"><a href="index_list/index.html">indexList</a></h3> <pre class="command-syntax" data-language="java">table.indexList() → array
</pre> <p>List all the secondary indexes of this table.</p> <p><strong>Example:</strong> List the available secondary indexes for this table.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table('marvel').indexList().run(conn);
</pre></div></div> <p><a href="index_list/index.html">Read more about this command →</a></p> <h3 id="indexrename"><a href="index_rename/index.html">indexRename</a></h3> <pre class="command-syntax" data-language="java">table.indexRename(oldIndexName, newIndexName) → object
</pre> <p>Rename an existing secondary index on a table. If the <a href="optarg/index.html">optArg</a> <code class="language-plaintext highlighter-rouge">overwrite</code> is specified as <code class="language-plaintext highlighter-rouge">true</code>, a previously existing index with the new name will be deleted and the index will be renamed. If <code class="language-plaintext highlighter-rouge">overwrite</code> is <code class="language-plaintext highlighter-rouge">false</code> (the default) an error will be raised if the new index name already exists.</p> <p><strong>Example:</strong> Rename an index on the comments table.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("comments").indexRename("postId", "messageId").run(conn);
</pre></div></div> <p><a href="index_rename/index.html">Read more about this command →</a></p> <h3 id="indexstatus"><a href="index_status/index.html">indexStatus</a></h3> <pre class="command-syntax" data-language="java">table.indexStatus([, index...]) → array
</pre> <p>Get the status of the specified indexes on this table, or the status of all indexes on this table if no indexes are specified.</p> <p><strong>Example:</strong> Get the status of all the indexes on <code class="language-plaintext highlighter-rouge">test</code>:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("test").indexStatus().run(conn);
</pre></div></div> <p><a href="index_status/index.html">Read more about this command →</a></p> <h3 id="indexwait"><a href="index_wait/index.html">indexWait</a></h3> <pre class="command-syntax" data-language="java">table.indexWait([, index...]) → array
</pre> <p>Wait for the specified indexes on this table to be ready, or for all indexes on this table to be ready if no indexes are specified.</p> <p><strong>Example:</strong> Wait for all indexes on the table <code class="language-plaintext highlighter-rouge">test</code> to be ready:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("test").indexWait().run(conn);
</pre></div></div> <p><a href="index_wait/index.html">Read more about this command →</a></p> <h3 id="setwritehook"><a href="set_write_hook/index.html">setWriteHook</a></h3> <pre class="command-syntax" data-language="java">table.setWriteHook(function | binary | null) → object
</pre> <p>Sets the write hook on a table or overwrites it if one already exists.</p> <p>The <code class="language-plaintext highlighter-rouge">function</code> can be an anonymous function with the signature <code class="language-plaintext highlighter-rouge">(context: object, oldVal: object, newVal: object) -&gt; object</code> or a binary representation obtained from the <code class="language-plaintext highlighter-rouge">function</code> field of <a href="get_write_hook/index.html">getWriteHook</a>. The function must be deterministic, and so cannot use a subquery or the <code class="language-plaintext highlighter-rouge">r.js</code> command.</p> <p><a href="set_write_hook/index.html">Read more about this command →</a></p> <h3 id="getwritehook"><a href="get_write_hook/index.html">getWriteHook</a></h3> <pre class="command-syntax" data-language="java">table.getWriteHook() → null/object
</pre> <p>Gets the write hook of this table. If a write hook exists, the result is an object of the following form:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">{
  "function": &lt;binary&gt;,
  "query": "setWriteHook(function(_var1, _var2, _var3) { return ...; })",
}
</pre></div></div> <p><a href="get_write_hook/index.html">Read more about this command →</a></p> </section> <section class="api-section"><h2 data-alt="Writing data ">Writing data </h2>
<h3 id="insert"><a href="insert/index.html">insert</a></h3> <pre class="command-syntax" data-language="java">table.insert(object | [object1, object2, ...]) → object
</pre> <p>You can pass the following options using <a href="optarg/index.html">optArg</a>:</p> <p><strong>Example:</strong> Insert a document into the table <code class="language-plaintext highlighter-rouge">posts</code>.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("posts").insert(
    r.hashMap("id", 1)
     .with("title", "Lorem ipsum")
     .with("content", "Dolor sit amet")
).run(conn);
</pre></div></div> <p><a href="insert/index.html">Read more about this command →</a></p> <h3 id="update"><a href="update/index.html">update</a></h3> <pre class="command-syntax" data-language="java">table.update(object | function) → object
selection.update(object | function) → object
singleSelection.update(object | function) → object
</pre> <p>Update JSON documents in a table. Accepts a JSON document, a ReQL expression, or a combination of the two.</p> <p><strong>Example:</strong> Update the status of the post with <code class="language-plaintext highlighter-rouge">id</code> of <code class="language-plaintext highlighter-rouge">1</code> to <code class="language-plaintext highlighter-rouge">published</code>.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("posts").get(1).update(r.hashMap("status", "published")).run(conn);
</pre></div></div> <p><a href="update/index.html">Read more about this command →</a></p> <h3 id="replace"><a href="replace/index.html">replace</a></h3> <pre class="command-syntax" data-language="java">table.replace(object | function) → object
selection.replace(object | function) → object
singleSelection.replace(object | function) → object
</pre> <p>Replace documents in a table. Accepts a JSON document or a ReQL expression, and replaces the original document with the new one. The new document must have the same primary key as the original document.</p> <p><strong>Example:</strong> Replace the document with the primary key <code class="language-plaintext highlighter-rouge">1</code>.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("posts").get(1).replace(
    r.hashMap("id", 1).with("title", "Lorem ipsum")
     .with("content", "Aleas jacta est")
     .with("status", "draft")
).run(conn);
</pre></div></div> <p><a href="replace/index.html">Read more about this command →</a></p> <h3 id="delete"><a href="delete/index.html">delete</a></h3> <pre class="command-syntax" data-language="java">table.delete() → object
selection.delete() → object
singleSelection.delete() → object
</pre> <p>Delete one or more documents from a table.</p> <p><strong>Example:</strong> Delete a single document from the table <code class="language-plaintext highlighter-rouge">comments</code>.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("comments").get("7eab9e63-73f1-4f33-8ce4-95cbea626f59").delete().run(conn);
</pre></div></div> <p><a href="delete/index.html">Read more about this command →</a></p> <h3 id="sync"><a href="sync/index.html">sync</a></h3> <pre class="command-syntax" data-language="java">table.sync() → object
</pre> <p>Ensure that writes on a given table are written to permanent storage. Queries that specify soft durability do not wait for writes to be committed to disk; a call to <code class="language-plaintext highlighter-rouge">sync</code> on a table will not return until all previous writes to the table are completed, guaranteeing the data’s persistence.</p> <p><strong>Example:</strong> After having updated multiple heroes with soft durability, we now want to wait until these changes are persisted.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").sync().run(conn);
</pre></div></div> <p><a href="sync/index.html">Read more about this command →</a></p> </section> <section class="api-section"><h2 data-alt="Selecting data ">Selecting data </h2>
<h3 id="db"><a href="db/index.html">db</a></h3> <pre class="command-syntax" data-language="java">r.db(dbName) → db
</pre> <p>Reference a database.</p> <p><strong>Example:</strong> Explicitly specify a database for a query.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.db("heroes").table("marvel").run(conn);
</pre></div></div> <p><a href="db/index.html">Read more about this command →</a></p> <h3 id="table"><a href="table/index.html">table</a></h3> <pre class="command-syntax" data-language="java">db.table(name) → table
</pre> <p>Return all documents in a table. Other commands may be chained after <code class="language-plaintext highlighter-rouge">table</code> to return a subset of documents (such as <a href="get/index.html">get</a> and <a href="filter/index.html">filter</a>) or perform further processing.</p> <p><strong>Example:</strong> Return all documents in the table ‘marvel’ of the default database.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").run(conn);
</pre></div></div> <p><a href="table/index.html">Read more about this command →</a></p> <h3 id="get"><a href="get/index.html">get</a></h3> <pre class="command-syntax" data-language="java">table.get(key) → singleRowSelection
</pre> <p>Get a document by primary key.</p> <p><strong>Example:</strong> Find a document by UUID.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("posts").get("a9849eef-7176-4411-935b-79a6e3c56a74").run(conn);
</pre></div></div> <p><a href="get/index.html">Read more about this command →</a></p> <h3 id="getall"><a href="get_all/index.html">getAll</a></h3> <pre class="command-syntax" data-language="java">table.getAll([key, key2...]) → selection
</pre> <p>Get all documents where the given value matches the value of the requested index.</p> <p><strong>Example:</strong> Secondary index keys are not guaranteed to be unique so we cannot query via <a href="get/index.html">get</a> when using a secondary index.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").getAll("man_of_steel").optArg("index", "code_name").run(conn);
</pre></div></div> <p><a href="get_all/index.html">Read more about this command →</a></p> <h3 id="between"><a href="between/index.html">between</a></h3> <pre class="command-syntax" data-language="java">table.between(lowerKey, upperKey) → selection
</pre> <p>Get all documents between two keys. Accepts three <a href="optarg/index.html">optArgs</a>: <code class="language-plaintext highlighter-rouge">index</code>, <code class="language-plaintext highlighter-rouge">left_bound</code>, and <code class="language-plaintext highlighter-rouge">right_bound</code>. If <code class="language-plaintext highlighter-rouge">index</code> is set to the name of a secondary index, <code class="language-plaintext highlighter-rouge">between</code> will return all documents where that index’s value is in the specified range (it uses the primary key by default). <code class="language-plaintext highlighter-rouge">left_bound</code> or <code class="language-plaintext highlighter-rouge">right_bound</code> may be set to <code class="language-plaintext highlighter-rouge">open</code> or <code class="language-plaintext highlighter-rouge">closed</code> to indicate whether or not to include that endpoint of the range (by default, <code class="language-plaintext highlighter-rouge">left_bound</code> is closed and <code class="language-plaintext highlighter-rouge">right_bound</code> is open).</p> <p><strong>Example:</strong> Find all users with primary key &gt;= 10 and &lt; 20 (a normal half-open interval).</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").between(10, 20).run(conn);
</pre></div></div> <p><a href="between/index.html">Read more about this command →</a></p> <h3 id="filter"><a href="filter/index.html">filter</a></h3> <pre class="command-syntax" data-language="java">selection.filter(predicate_function) → selection
stream.filter(predicate_function) → stream
array.filter(predicate_function) → array
</pre> <p>Return all the elements in a sequence for which the given predicate is true. The return value of <code class="language-plaintext highlighter-rouge">filter</code> will be the same as the input (sequence, stream, or array). Documents can be filtered in a variety of ways—ranges, nested values, boolean conditions, and the results of anonymous functions.</p> <p><strong>Example:</strong> Get all users who are 30 years old.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("users").filter(r.hashMap(age, 30)).run(conn);
</pre></div></div> <p>The predicate <code class="language-plaintext highlighter-rouge">r.hashMap(age, 30)</code> selects documents in the <code class="language-plaintext highlighter-rouge">users</code> table with an <code class="language-plaintext highlighter-rouge">age</code> field whose value is <code class="language-plaintext highlighter-rouge">30</code>. Documents with an <code class="language-plaintext highlighter-rouge">age</code> field set to any other value <em>or</em> with no <code class="language-plaintext highlighter-rouge">age</code> field present are skipped.</p> <p><a href="filter/index.html">Read more about this command →</a></p> </section> <section class="api-section"><h2 data-alt="Joins ">Joins </h2>
<h3 id="innerjoin"><a href="inner_join/index.html">innerJoin</a></h3> <pre class="command-syntax" data-language="java">sequence.innerJoin(otherSequence, predicate_function) → stream
array.innerJoin(otherSequence, predicate_function) → array
</pre> <p>Returns an inner join of two sequences.</p> <p><strong>Example:</strong> Return a list of all matchups between Marvel and DC heroes in which the DC hero could beat the Marvel hero in a fight.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").innerJoin(r.table("dc"),
    (marvel_row, dc_row) -&gt; marvel_row.g("strength").lt(dc_row.g("strength"))
).zip().run(conn);
</pre></div></div> <p><a href="inner_join/index.html">Read more about this command →</a></p> <h3 id="outerjoin"><a href="outer_join/index.html">outerJoin</a></h3> <pre class="command-syntax" data-language="java">sequence.outerJoin(otherSequence, predicate_function) → stream
array.outerJoin(otherSequence, predicate_function) → array
</pre> <p>Returns a left outer join of two sequences. The returned sequence represents a union of the left-hand sequence and the right-hand sequence: all documents in the left-hand sequence will be returned, each matched with a document in the right-hand sequence if one satisfies the predicate condition. In most cases, you will want to follow the join with <a href="zip/index.html">zip</a> to combine the left and right results.</p> <p><strong>Example:</strong> Return a list of all Marvel heroes, paired with any DC heroes who could beat them in a fight.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").outerJoin(r.table("dc"),
    (marvel_row, dc_row) -&gt; marvel_row.g("strength").lt(dc_row.g("strength"))
).zip().run(conn);
</pre></div></div> <p>(Compare this to an <a href="inner_join/index.html">innerJoin</a> with the same inputs and predicate, which would return a list only of the matchups in which the DC hero has the higher strength.)</p> <p><a href="outer_join/index.html">Read more about this command →</a></p> <h3 id="eqjoin"><a href="eq_join/index.html">eqJoin</a></h3> <pre class="command-syntax" data-language="java">sequence.eqJoin(leftField, rightTable) → sequence
sequence.eqJoin(function, rightTable) → sequence
</pre> <p>Join tables using a field or function on the left-hand sequence matching primary keys or secondary indexes on the right-hand table. <code class="language-plaintext highlighter-rouge">eqJoin</code> is more efficient than other ReQL join types, and operates much faster. Documents in the result set consist of pairs of left-hand and right-hand documents, matched when the field on the left-hand side exists and is non-null and an entry with that field’s value exists in the specified index on the right-hand side.</p> <p><strong>Example:</strong> Match players with the games they’ve played against one another.</p> <p>Join these tables using <code class="language-plaintext highlighter-rouge">gameId</code> on the player table and <code class="language-plaintext highlighter-rouge">id</code> on the games table:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("players").eqJoin("gameId", r.table("games")).run(conn);
</pre></div></div> <p>This will return a result set such as the following:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">[
    {
        "left" : { "gameId" : 3, "id" : 2, "player" : "Agatha" },
        "right" : { "id" : 3, "field" : "Bucklebury" }
    },
    {
        "left" : { "gameId" : 2, "id" : 3, "player" : "Fred" },
        "right" : { "id" : 2, "field" : "Rushock Bog" }
    },
    ...
]
</pre></div></div> <p><a href="eq_join/index.html">Read more about this command →</a></p> <h3 id="zip"><a href="zip/index.html">zip</a></h3> <pre class="command-syntax" data-language="java">stream.zip() → stream
array.zip() → array
</pre> <p>Used to ‘zip’ up the result of a join by merging the ‘right’ fields into ‘left’ fields of each member of the sequence.</p> <p><strong>Example:</strong> ‘zips up’ the sequence by merging the left and right fields produced by a join.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").eqJoin("main_dc_collaborator", r.table("dc")).zip().run(conn);
</pre></div></div> <p><a href="zip/index.html">Read more about this command →</a></p> </section> <section class="api-section"><h2 data-alt="Transformations ">Transformations </h2>
<h3 id="map"><a href="map/index.html">map</a></h3> <pre class="command-syntax" data-language="java">sequence1.map([sequence2, ...], function) → stream
array1.map([array2, ...], function) → array
r.map(sequence1[, sequence2, ...], function) → stream
r.map(array1[, array2, ...], function) → array
</pre> <p>Transform each element of one or more sequences by applying a mapping function to them. If <code class="language-plaintext highlighter-rouge">map</code> is run with two or more sequences, it will iterate for as many items as there are in the shortest sequence.</p> <p><strong>Example:</strong> Return the first five squares.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr(r.array(1, 2, 3, 4, 5)).map(val -&gt; r.mul(val, val)).run(conn);

// Result:
[1, 4, 9, 16, 25]
</pre></div></div> <p><a href="map/index.html">Read more about this command →</a></p> <h3 id="withfields"><a href="with_fields/index.html">withFields</a></h3> <pre class="command-syntax" data-language="java">sequence.withFields([selector1, selector2...]) → stream
array.withFields([selector1, selector2...]) → array
</pre> <p>Plucks one or more attributes from a sequence of objects, filtering out any objects in the sequence that do not have the specified fields. Functionally, this is identical to <a href="has_fields/index.html">hasFields</a> followed by <a href="pluck/index.html">pluck</a> on a sequence.</p> <p><strong>Example:</strong> Get a list of users and their posts, excluding any users who have not made any posts.</p> <p>Existing table structure:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">[
    { "id": 1, "user": "bob", "email": "bob@foo.com", "posts": [ 1, 4, 5 ] },
    { "id": 2, "user": "george", "email": "george@foo.com" },
    { "id": 3, "user": "jane", "email": "jane@foo.com", "posts": [ 2, 3, 6 ] }
]
</pre></div></div> <p>Command and output:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("users").withFields("id", "user", "posts").run(conn);

// Result passed to callback
[
    { "id": 1, "user": "bob", "posts": [ 1, 4, 5 ] },
    { "id": 3, "user": "jane", "posts": [ 2, 3, 6 ] }
]
</pre></div></div> <p><a href="with_fields/index.html">Read more about this command →</a></p> <h3 id="concatmap"><a href="concat_map/index.html">concatMap</a></h3> <pre class="command-syntax" data-language="java">stream.concatMap(function) → stream
array.concatMap(function) → array
</pre> <p>Concatenate one or more elements into a single sequence using a mapping function.</p> <p><strong>Example:</strong> Construct a sequence of all monsters defeated by Marvel heroes. The field “defeatedMonsters” is an array of one or more monster names.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").concatMap(hero -&gt; hero.g("defeatedMonsters")).run(conn);
</pre></div></div> <p><a href="concat_map/index.html">Read more about this command →</a></p> <h3 id="orderby"><a href="order_by/index.html">orderBy</a></h3> <pre class="command-syntax" data-language="java">table.orderBy([key | function]).optArg("index", index) → selection&lt;stream&gt;
selection.orderBy(key | function[, ...]) → selection&lt;array&gt;
sequence.orderBy(key | function[, ...]) → array
</pre> <p>Sort the sequence by document values of the given key(s). To specify the ordering, wrap the attribute with either <code class="language-plaintext highlighter-rouge">r.asc</code> or <code class="language-plaintext highlighter-rouge">r.desc</code> (defaults to ascending).</p> <p><strong>Example:</strong> Order all the posts using the index <code class="language-plaintext highlighter-rouge">date</code>.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("posts").orderBy().optArg("index", "date").run(conn);
</pre></div></div> <p><a href="order_by/index.html">Read more about this command →</a></p> <h3 id="skip"><a href="skip/index.html">skip</a></h3> <pre class="command-syntax" data-language="java">sequence.skip(n) → stream
array.skip(n) → array
</pre> <p>Skip a number of elements from the head of the sequence.</p> <p><strong>Example:</strong> Here in conjunction with <a href="order_by/index.html">orderBy</a> we choose to ignore the most successful heroes.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").orderBy("successMetric").skip(10).run(conn);
</pre></div></div> <p><a href="skip/index.html">Read more about this command →</a></p> <h3 id="limit"><a href="limit/index.html">limit</a></h3> <pre class="command-syntax" data-language="java">sequence.limit(n) → stream
array.limit(n) → array
</pre> <p>End the sequence after the given number of elements.</p> <p><strong>Example:</strong> Only so many can fit in our Pantheon of heroes.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").orderBy("belovedness").limit(10).run(conn);
</pre></div></div> <p><a href="limit/index.html">Read more about this command →</a></p> <h3 id="slice"><a href="slice/index.html">slice</a></h3> <pre class="command-syntax" data-language="java">selection.slice(startOffset[, endOffset]) → selection
stream.slice(startOffset[, endOffset]) → stream
array.slice(startOffset[, endOffset]) → array
binary.slice(startOffset[, endOffset]) → binary
string.slice(startOffset[, endOffset]) → string
</pre> <p>Return the elements of a sequence within the specified range.</p> <p><strong>Example:</strong> Return the fourth, fifth and sixth youngest players. (The youngest player is at index 0, so those are elements 3–5.)</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("players").orderBy().optArg("index", "age").slice(3, 6).run(conn);
</pre></div></div> <p><a href="slice/index.html">Read more about this command →</a></p> <h3 id="nth"><a href="nth/index.html">nth</a></h3> <pre class="command-syntax" data-language="java">sequence.nth(index) → object
selection.nth(index) → selection&lt;object&gt;
</pre> <p>Get the <em>nth</em> element of a sequence, counting from zero. If the argument is negative, count from the last element.</p> <p><strong>Example:</strong> Select the second element in the array.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr(r.array(1,2,3)).nth(1).run(conn);
</pre></div></div> <p><a href="nth/index.html">Read more about this command →</a></p> <h3 id="offsetsof"><a href="offsets_of/index.html">offsetsOf</a></h3> <pre class="command-syntax" data-language="java">sequence.offsetsOf(datum | predicate_function) → array
</pre> <p>Get the indexes of an element in a sequence. If the argument is a predicate, get the indexes of all elements matching it.</p> <p><strong>Example:</strong> Find the position of the letter ‘c’.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr(r.array("a", "b", "c")).offsetsOf("c").run(conn);
</pre></div></div> <p><a href="offsets_of/index.html">Read more about this command →</a></p> <h3 id="isempty"><a href="is_empty/index.html">isEmpty</a></h3> <pre class="command-syntax" data-language="java">sequence.isEmpty() → bool
</pre> <p>Test if a sequence is empty.</p> <p><strong>Example:</strong> Are there any documents in the marvel table?</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").isEmpty().run(conn);
</pre></div></div> <p><a href="is_empty/index.html">Read more about this command →</a></p> <h3 id="union"><a href="union/index.html">union</a></h3> <pre class="command-syntax" data-language="java">stream.union(sequence[, sequence, ...]) → stream
array.union(sequence[, sequence, ...]) → array
r.union(stream, sequence[, sequence, ...]) → stream
r.union(array, sequence[, sequence, ...]) → array
</pre> <p>Merge two or more sequences.</p> <p><strong>Example:</strong> Construct a stream of all heroes.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").union(r.table("dc")).run(conn);
</pre></div></div> <p><a href="union/index.html">Read more about this command →</a></p> <h3 id="sample"><a href="sample/index.html">sample</a></h3> <pre class="command-syntax" data-language="java">sequence.sample(number) → selection
stream.sample(number) → array
array.sample(number) → array
</pre> <p>Select a given number of elements from a sequence with uniform random distribution. Selection is done without replacement.</p> <p><strong>Example:</strong> Select 3 random heroes.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").sample(3).run(conn);
</pre></div></div> <p><a href="sample/index.html">Read more about this command →</a></p> </section> <section class="api-section"><h2 data-alt="Aggregation ">Aggregation </h2>
<h3 id="group"><a href="group/index.html">group</a></h3> <pre class="command-syntax" data-language="java">sequence.group([field | function...,]) → grouped_stream
r.group(sequence, [field | function...,]) → grouped_stream
</pre> <p>Takes a stream and partitions it into multiple groups based on the fields or functions provided.</p> <p><strong>Example:</strong> Group games by player.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("games").group("player").run(conn);
</pre></div></div> <p>To show the returned data, we’ll use JSON representation again, with <code class="language-plaintext highlighter-rouge">group</code> and <code class="language-plaintext highlighter-rouge">values</code> as the fields corresponding to the elements in each <code class="language-plaintext highlighter-rouge">GroupedResult</code>.</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">[
    {
        "group": "Alice",
        "values": [
            {"id": 5, "player": "Alice", "points": 7, "type": "free"},
            {"id": 12, "player": "Alice", "points": 2, "type": "free"}
        ]
    },
    {
        "group": "Bob",
        "values": [
            {"id": 2, "player": "Bob", "points": 15, "type": "ranked"},
            {"id": 11, "player": "Bob", "points": 10, "type": "free"}
        ]
    }
]
</pre></div></div> <p><a href="group/index.html">Read more about this command →</a></p> <h3 id="ungroup"><a href="ungroup/index.html">ungroup</a></h3> <pre class="command-syntax" data-language="java">grouped_stream.ungroup() → array
grouped_data.ungroup() → array
</pre> <p>Takes a grouped stream or grouped data and turns it into an array of objects representing the groups. Any commands chained after <code class="language-plaintext highlighter-rouge">ungroup</code> will operate on this array, rather than operating on each group individually. This is useful if you want to e.g. order the groups by the value of their reduction.</p> <p><strong>Example:</strong> What is the maximum number of points scored by each player, with the highest scorers first?</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("games").group("player").max("points").g("points").ungroup()
 .orderBy(r.desc("reduction")).run(conn);
</pre></div></div> <p><a href="ungroup/index.html">Read more about this command →</a></p> <h3 id="reduce"><a href="reduce/index.html">reduce</a></h3> <pre class="command-syntax" data-language="java">sequence.reduce(function) → value
r.reduce(sequence, function) → value
</pre> <p>Produce a single value from a sequence through repeated application of a reduction function.</p> <p><strong>Example:</strong> Return the number of documents in the table <code class="language-plaintext highlighter-rouge">posts</code>.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("posts").map(doc -&gt; 1).reduce(
    (left, right) -&gt; left.add(right)
).default_(0).run(conn);
</pre></div></div> <p>A shorter way to execute this query is to use <a href="count/index.html">count</a>.</p> <p><a href="reduce/index.html">Read more about this command →</a></p> <h3 id="fold"><a href="fold/index.html">fold</a></h3> <pre class="command-syntax" data-language="java">sequence.fold(base, function) → value
sequence.fold(base, function).optArg("emit", function)[.optArg("final_emit", function)] → sequence
</pre> <p>Apply a function to a sequence in order, maintaining state via an accumulator. The <code class="language-plaintext highlighter-rouge">fold</code> command returns either a single value or a new sequence.</p> <p><strong>Example:</strong> Concatenate words from a list.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("words").orderBy("id").fold("",
    (acc, word) -&gt; acc.add(r.branch(r.eq(acc, ""), "", ", ")).add(word)
).run(conn);
</pre></div></div> <p>(This example could be implemented with <code class="language-plaintext highlighter-rouge">reduce</code>, but <code class="language-plaintext highlighter-rouge">fold</code> will preserve the order when <code class="language-plaintext highlighter-rouge">words</code> is a RethinkDB table or other stream, which is not guaranteed with <code class="language-plaintext highlighter-rouge">reduce</code>.)</p> <p><a href="fold/index.html">Read more about this command →</a></p> <h3 id="count"><a href="count/index.html">count</a></h3> <pre class="command-syntax" data-language="java">sequence.count([value | predicate_function]) → number
binary.count() → number
string.count() → number
object.count() → number
r.count(sequence | binary | string | object[, predicate_function]) → number
</pre> <p>Counts the number of elements in a sequence or key/value pairs in an object, or returns the size of a string or binary object.</p> <p><strong>Example:</strong> Count the number of users.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("users").count().run(conn);
</pre></div></div> <p><a href="count/index.html">Read more about this command →</a></p> <h3 id="sum"><a href="sum/index.html">sum</a></h3> <pre class="command-syntax" data-language="java">sequence.sum([field | function]) → number
r.sum(sequence, [field | function]) → number
</pre> <p>Sums all the elements of a sequence. If called with a field name, sums all the values of that field in the sequence, skipping elements of the sequence that lack that field. If called with a function, calls that function on every element of the sequence and sums the results, skipping elements of the sequence where that function returns <code class="language-plaintext highlighter-rouge">null</code> or a non-existence error.</p> <p><strong>Example:</strong> What’s 3 + 5 + 7?</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr(r.array(3, 5, 7)).sum().run(conn);
</pre></div></div> <p><a href="sum/index.html">Read more about this command →</a></p> <h3 id="avg"><a href="avg/index.html">avg</a></h3> <pre class="command-syntax" data-language="java">sequence.avg([field | function]) → number
r.avg(sequence, [field | function]) → number
</pre> <p>Averages all the elements of a sequence. If called with a field name, averages all the values of that field in the sequence, skipping elements of the sequence that lack that field. If called with a function, calls that function on every element of the sequence and averages the results, skipping elements of the sequence where that function returns <code class="language-plaintext highlighter-rouge">null</code> or a non-existence error.</p> <p><strong>Example:</strong> What’s the average of 3, 5, and 7?</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr(r.array(3, 5, 7)).avg().run(conn);
</pre></div></div> <p><a href="avg/index.html">Read more about this command →</a></p> <h3 id="min"><a href="min/index.html">min</a></h3> <pre class="command-syntax" data-language="java">sequence.min([field | function]) → element
r.min(sequence, [field | function]) → element
</pre> <p>Finds the minimum element of a sequence.</p> <p><strong>Example:</strong> Return the minimum value in the list <code class="language-plaintext highlighter-rouge">[3, 5, 7]</code>.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr(r.array(3, 5, 7)).min().run(conn);
</pre></div></div> <p><a href="min/index.html">Read more about this command →</a></p> <h3 id="max"><a href="max/index.html">max</a></h3> <pre class="command-syntax" data-language="java">sequence.max([field | function]) → element
r.max(sequence, [field | function]) → element
</pre> <p>Finds the maximum element of a sequence.</p> <p><strong>Example:</strong> Return the maximum value in the list <code class="language-plaintext highlighter-rouge">[3, 5, 7]</code>.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr(r.array(3, 5, 7)).max().run(conn);
</pre></div></div> <p><a href="max/index.html">Read more about this command →</a></p> <h3 id="distinct"><a href="distinct/index.html">distinct</a></h3> <pre class="command-syntax" data-language="java">sequence.distinct() → array
table.distinct() → stream
r.distinct(sequence) → array
r.distinct(table) → stream
</pre> <p>Removes duplicates from elements in a sequence.</p> <p><strong>Example:</strong> Which unique villains have been vanquished by Marvel heroes?</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").concatMap(
    hero -&gt; hero.g("villain_list")
).distinct().run(conn);
</pre></div></div> <p><a href="distinct/index.html">Read more about this command →</a></p> <h3 id="contains"><a href="contains/index.html">contains</a></h3> <pre class="command-syntax" data-language="java">sequence.contains([value | predicate_function, ...]) → bool
r.contains(sequence, [value | predicate_function, ...]) → bool
</pre> <p>When called with values, returns <code class="language-plaintext highlighter-rouge">true</code> if a sequence contains all the specified values. When called with predicate functions, returns <code class="language-plaintext highlighter-rouge">true</code> if for each predicate there exists at least one element of the stream where that predicate returns <code class="language-plaintext highlighter-rouge">true</code>.</p> <p><strong>Example:</strong> Has Iron Man ever fought Superman?</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").get("ironman").g("opponents").contains("superman").run(conn);
</pre></div></div> <p><a href="contains/index.html">Read more about this command →</a></p> </section> <section class="api-section"><h2 data-alt="Document manipulation ">Document manipulation </h2> <h3 id="pluck"><a href="pluck/index.html">pluck</a></h3> <pre class="command-syntax" data-language="java">sequence.pluck([selector1, selector2...]) → stream
array.pluck([selector1, selector2...]) → array
object.pluck([selector1, selector2...]) → object
singleSelection.pluck([selector1, selector2...]) → object
</pre> <p>Plucks out one or more attributes from either an object or a sequence of objects (projection).</p> <p><strong>Example:</strong> We just need information about IronMan’s reactor and not the rest of the document.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").get("IronMan").pluck("reactorState", "reactorPower").run(conn);
</pre></div></div> <p><a href="pluck/index.html">Read more about this command →</a></p> <h3 id="without"><a href="without/index.html">without</a></h3> <pre class="command-syntax" data-language="java">sequence.without([selector1, selector2...]) → stream
array.without([selector1, selector2...]) → array
singleSelection.without([selector1, selector2...]) → object
object.without([selector1, selector2...]) → object
</pre> <p>The opposite of pluck; takes an object or a sequence of objects, and returns them with the specified fields or paths removed.</p> <p><strong>Example:</strong> Since we don’t need it for this computation we’ll save bandwidth and leave out the list of IronMan’s romantic conquests.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").get("IronMan").without("personalVictoriesList").run(conn);
</pre></div></div> <p><a href="without/index.html">Read more about this command →</a></p> <h3 id="merge"><a href="merge/index.html">merge</a></h3> <pre class="command-syntax" data-language="java">singleSelection.merge([object | function, object | function, ...]) → object
object.merge([object | function, object | function, ...]) → object
sequence.merge([object | function, object | function, ...]) → stream
array.merge([object | function, object | function, ...]) → array
</pre> <p>Merge two or more objects together to construct a new object with properties from all. When there is a conflict between field names, preference is given to fields in the rightmost object in the argument list. <code class="language-plaintext highlighter-rouge">merge</code> also accepts a function that returns an object, which will be used similarly to a <a href="map/index.html">map</a> function.</p> <p><strong>Example:</strong> Equip Thor for battle.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").get("thor")
 .merge(r.table("equipment").get("hammer"),
        r.table("equipment").get("pimento_sandwich"))
 .run(conn);
</pre></div></div> <p><a href="merge/index.html">Read more about this command →</a></p> <h3 id="append"><a href="append/index.html">append</a></h3> <pre class="command-syntax" data-language="java">array.append(value) → array
</pre> <p>Append a value to an array.</p> <p><strong>Example:</strong> Retrieve Iron Man’s equipment list with the addition of some new boots.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").get("IronMan").g("equipment").append("newBoots").run(conn);
</pre></div></div> <p><a href="append/index.html">Read more about this command →</a></p> <h3 id="prepend"><a href="prepend/index.html">prepend</a></h3> <pre class="command-syntax" data-language="java">array.prepend(value) → array
</pre> <p>Prepend a value to an array.</p> <p><strong>Example:</strong> Retrieve Iron Man’s equipment list with the addition of some new boots.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").get("IronMan").g("equipment").prepend("newBoots").run(conn);
</pre></div></div> <p><a href="prepend/index.html">Read more about this command →</a></p> <h3 id="difference"><a href="difference/index.html">difference</a></h3> <pre class="command-syntax" data-language="java">array.difference(array) → array
</pre> <p>Remove the elements of one array from another array.</p> <p><strong>Example:</strong> Retrieve Iron Man’s equipment list without boots.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").get("IronMan").g("equipment").difference(r.array("Boots"))
 .run(conn);
</pre></div></div> <p><a href="difference/index.html">Read more about this command →</a></p> <h3 id="setinsert"><a href="set_insert/index.html">setInsert</a></h3> <pre class="command-syntax" data-language="java">array.setInsert(value) → array
</pre> <p>Add a value to an array and return it as a set (an array with distinct values).</p> <p><strong>Example:</strong> Retrieve Iron Man’s equipment list with the addition of some new boots.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").get("IronMan").g("equipment").setInsert("newBoots").run(conn);
</pre></div></div> <p><a href="set_insert/index.html">Read more about this command →</a></p> <h3 id="setunion"><a href="set_union/index.html">setUnion</a></h3> <pre class="command-syntax" data-language="java">array.setUnion(array) → array
</pre> <p>Perform a set intersection of two arrays, returning an array with all unique items from both.</p> <p><strong>Example:</strong> Retrieve Iron Man’s equipment list with the addition of some new boots and an arc reactor.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").get("IronMan").g("equipment")
 .setUnion(r.array("newBoots", "arc_reactor")).run(conn);
</pre></div></div> <p><a href="set_union/index.html">Read more about this command →</a></p> <h3 id="setintersection"><a href="set_intersection/index.html">setIntersection</a></h3> <pre class="command-syntax" data-language="java">array.setIntersection(array) → array
</pre> <p>Intersect two arrays returning values that occur in both of them as a set (an array with distinct values).</p> <p><strong>Example:</strong> Check which pieces of equipment Iron Man has from a fixed list.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").get("IronMan").g("equipment")
 .setIntersection(r.array("newBoots", "arc_reactor")).run(conn);
</pre></div></div> <p><a href="set_intersection/index.html">Read more about this command →</a></p> <h3 id="setdifference"><a href="set_difference/index.html">setDifference</a></h3> <pre class="command-syntax" data-language="java">array.setDifference(array) → array
</pre> <p>Remove the elements of one array from another and return them as a set (an array with distinct values).</p> <p><strong>Example:</strong> Check which pieces of equipment Iron Man has, excluding a fixed list.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").get("IronMan").g("equipment")
 .setDifference(r.array("newBoots", "arc_reactor")).run(conn);
</pre></div></div> <p><a href="set_difference/index.html">Read more about this command →</a></p> <h3 id="bracket"><a href="bracket/index.html">bracket</a></h3> <pre class="command-syntax" data-language="java">sequence.bracket(attr) → sequence
singleSelection.bracket(attr) → value
object.bracket(attr) → value
array.bracket(index) → value
</pre> <p>Get a single field from an object. If called on a sequence, gets that field from every object in the sequence, skipping objects that lack it.</p> <p><strong>Example:</strong> What was Iron Man’s first appearance in a comic?</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").get("IronMan").bracket("firstAppearance").run(conn);
// more idiomatically:
r.table("marvel").get("IronMan").g("firstAppearance").run(conn);
</pre></div></div> <p><a href="bracket/index.html">Read more about this command →</a></p> <h3 id="getfield-g"><a href="get_field/index.html">getField, g</a></h3> <pre class="command-syntax" data-language="java">sequence.g(attr) → sequence
singleSelection.g(attr) → value
object.g(attr) → value
</pre> <p>Get a single field from an object. If called on a sequence, gets that field from every object in the sequence, skipping objects that lack it.</p> <p><strong>Example:</strong> What was Iron Man’s first appearance in a comic?</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").get("IronMan").g("firstAppearance").run(conn);
</pre></div></div> <p><a href="get_field/index.html">Read more about this command →</a></p> <h3 id="hasfields"><a href="has_fields/index.html">hasFields</a></h3> <pre class="command-syntax" data-language="java">sequence.hasFields([selector1, selector2...]) → stream
array.hasFields([selector1, selector2...]) → array
object.hasFields([selector1, selector2...]) → boolean
</pre> <p>Test if an object has one or more fields. An object has a field if it has that key and the key has a non-null value. For instance, the object <code class="language-plaintext highlighter-rouge">{'a': 1,'b': 2,'c': null}</code> has the fields <code class="language-plaintext highlighter-rouge">a</code> and <code class="language-plaintext highlighter-rouge">b</code>.</p> <p><strong>Example:</strong> Return the players who have won games.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("players").hasFields("games_won").run(conn);
</pre></div></div> <p><a href="has_fields/index.html">Read more about this command →</a></p> <h3 id="insertat"><a href="insert_at/index.html">insertAt</a></h3> <pre class="command-syntax" data-language="java">array.insertAt(offset, value) → array
</pre> <p>Insert a value in to an array at a given index. Returns the modified array.</p> <p><strong>Example:</strong> Hulk decides to join the avengers.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr(r.array("Iron Man", "Spider-Man")).insertAt(1, "Hulk").run(conn);
</pre></div></div> <p><a href="insert_at/index.html">Read more about this command →</a></p> <h3 id="spliceat"><a href="splice_at/index.html">spliceAt</a></h3> <pre class="command-syntax" data-language="java">array.spliceAt(offset, array) → array
</pre> <p>Insert several values into an array at the given index. Returns the modified array.</p> <p><strong>Example:</strong> Hulk and Thor decide to join the Avengers.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr(r.array("Iron Man", "Spider-Man"))
 .spliceAt(1, r.array("Hulk", "Thor")).run(conn);
</pre></div></div> <p><a href="splice_at/index.html">Read more about this command →</a></p> <h3 id="deleteat"><a href="delete_at/index.html">deleteAt</a></h3> <pre class="command-syntax" data-language="java">array.deleteAt(offset [,endOffset]) → array
</pre> <p>Remove one or more elements from an array at a given index. Returns the modified array. (Note: <code class="language-plaintext highlighter-rouge">deleteAt</code> operates on arrays, not documents; to delete documents, see the <a href="delete/index.html">delete</a> command.)</p> <p><strong>Example:</strong> Delete the second element of an array.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr(r.array("a", "b", "c", "d", "e", "f")).deleteAt(1).run(conn);

// Result:
["a", "c", "d", "e", "f"]
</pre></div></div> <p><a href="delete_at/index.html">Read more about this command →</a></p> <h3 id="changeat"><a href="change_at/index.html">changeAt</a></h3> <pre class="command-syntax" data-language="java">array.changeAt(offset, value) → array
</pre> <p>Change a value in an array at a given index. Returns the modified array.</p> <p><strong>Example:</strong> Bruce Banner hulks out.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr(r.array("Iron Man", "Bruce", "Spider-Man")).changeAt(1, "Hulk")
 .run(conn);
</pre></div></div> <p><a href="change_at/index.html">Read more about this command →</a></p> <h3 id="keys"><a href="keys/index.html">keys</a></h3> <pre class="command-syntax" data-language="java">singleSelection.keys() → array
object.keys() → array
</pre> <p>Return an array containing all of an object’s keys. Note that the keys will be sorted as described in <a href="../../docs/data-types/index.html#sorting-order">ReQL data types</a> (for strings, lexicographically).</p> <p><strong>Example:</strong> Get all the keys from a table row.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">// row: { "id": 1, "mail": "fred@example.com", "name": "fred" }

r.table("users").get(1).keys().run(conn);

// Result:
[ "id", "mail", "name" ]
</pre></div></div> <p><a href="keys/index.html">Read more about this command →</a></p> <h3 id="values"><a href="values/index.html">values</a></h3> <pre class="command-syntax" data-language="java">singleSelection.values() → array
object.values() → array
</pre> <p>Return an array containing all of an object’s values. <code class="language-plaintext highlighter-rouge">values()</code> guarantees the values will come out in the same order as <a href="keys/index.html">keys</a>.</p> <p><strong>Example:</strong> Get all of the values from a table row.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">// row: { "id": 1, "mail": "fred@example.com", "name": "fred" }

r.table("users").get(1).values().run(conn);

// Result:
[ 1, "fred@example.com", "fred" ]
</pre></div></div> <p><a href="values/index.html">Read more about this command →</a></p> <h3 id="literal"><a href="literal/index.html">literal</a></h3> <pre class="command-syntax" data-language="java">r.literal(object) → special
</pre> <p>Replace an object in a field instead of merging it with an existing object in a <code class="language-plaintext highlighter-rouge">merge</code> or <code class="language-plaintext highlighter-rouge">update</code> operation. Using <code class="language-plaintext highlighter-rouge">literal</code> with no arguments in a <code class="language-plaintext highlighter-rouge">merge</code> or <code class="language-plaintext highlighter-rouge">update</code> operation will remove the corresponding field.</p> <p><strong>Example:</strong> Replace one nested document with another rather than merging the fields.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("users").get(1)
 .update(r.hashMap("data", r.literal(r.hashMap("age", 19).with("job", "Engineer"))))
 .run(conn);

// Result:
{
    "id": 1,
    "name": "Alice",
    "data": {
        "age": 19,
        "job": "Engineer"
    }
}
</pre></div></div> <p><a href="literal/index.html">Read more about this command →</a></p> <h3 id="object"><a href="object/index.html">object</a></h3> <pre class="command-syntax" data-language="java">r.object([key, value,]...) → object
</pre> <p>Creates an object from a list of key-value pairs, where the keys must be strings. <code class="language-plaintext highlighter-rouge">r.object(A, B, C, D)</code> is equivalent to <code class="language-plaintext highlighter-rouge">r.expr([[A, B], [C, D]]).coerce_to('OBJECT')</code>.</p> <p><strong>Example:</strong> Create a simple object.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.object("id", 5, "data", r.array("foo", "bar")).run(conn);

// Result:
{ "data": ["foo", "bar"], "id": 5}
</pre></div></div> <p><a href="object/index.html">Read more about this command →</a></p> </section> <section class="api-section"><h2 data-alt="String manipulation ">String manipulation </h2>
<h3 id="match"><a href="match/index.html">match</a></h3> <pre class="command-syntax" data-language="java">string.match(regexp) → null/object
</pre> <p>Match a string against a regular expression. If there is a match, returns an object with the fields:</p> <ul> <li>
<code class="language-plaintext highlighter-rouge">str</code>: The matched string</li> <li>
<code class="language-plaintext highlighter-rouge">start</code>: The matched string’s start</li> <li>
<code class="language-plaintext highlighter-rouge">end</code>: The matched string’s end</li> <li>
<code class="language-plaintext highlighter-rouge">groups</code>: The capture groups defined with parentheses</li> </ul> <p>If no match is found, returns <code class="language-plaintext highlighter-rouge">null</code>.</p> <p><strong>Example:</strong> Get all users whose name starts with “A”. Because <code class="language-plaintext highlighter-rouge">null</code> evaluates to <code class="language-plaintext highlighter-rouge">false</code> in <a href="filter/index.html">filter</a>, you can use the result of <code class="language-plaintext highlighter-rouge">match</code> for the predicate.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("users").filter(doc -&gt; doc.g("name").match("^A")).run(conn);
</pre></div></div> <p><a href="match/index.html">Read more about this command →</a></p> <h3 id="split"><a href="split/index.html">split</a></h3> <pre class="command-syntax" data-language="java">string.split([separator, [max_splits]]) → array
</pre> <p>Split a string into substrings. With no arguments, will split on whitespace; when called with a string as the first argument, will split using that string as a separator. A maximum number of splits can also be specified. (To specify <code class="language-plaintext highlighter-rouge">max_splits</code> while still splitting on whitespace, use <code class="language-plaintext highlighter-rouge">null</code> as the separator argument.)</p> <p><strong>Example:</strong> Split on whitespace.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr("foo  bar bax").split().run(conn);
</pre></div></div> <p>Result:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">["foo", "bar", "bax"]
</pre></div></div> <p><a href="split/index.html">Read more about this command →</a></p> <h3 id="upcase"><a href="upcase/index.html">upcase</a></h3> <pre class="command-syntax" data-language="java">string.upcase() → string
</pre> <p>Uppercases a string.</p> <p><strong>Example:</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr("Sentence about LaTeX.").upcase().run(conn);
</pre></div></div> <p>Result:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">"SENTENCE ABOUT LATEX."
</pre></div></div> <p><strong>Note:</strong> <code class="language-plaintext highlighter-rouge">upcase</code> and <code class="language-plaintext highlighter-rouge">downcase</code> only affect ASCII characters.</p> <p><a href="upcase/index.html">Read more about this command →</a></p> <h3 id="downcase"><a href="downcase/index.html">downcase</a></h3> <pre class="command-syntax" data-language="java">string.downcase() → string
</pre> <p>Lowercase a string.</p> <p><strong>Example:</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr("Sentence about LaTeX.").downcase().run(conn);
</pre></div></div> <p>Result:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">"sentence about latex."
</pre></div></div> <p><strong>Note:</strong> <code class="language-plaintext highlighter-rouge">upcase</code> and <code class="language-plaintext highlighter-rouge">downcase</code> only affect ASCII characters.</p> <p><a href="downcase/index.html">Read more about this command →</a></p> </section> <section class="api-section"><h2 data-alt="Math and logic ">Math and logic </h2>
<h3 id="add"><a href="add/index.html">add</a></h3> <pre class="command-syntax" data-language="java">value.add(value[, value, ...]) → value
time.add(number[, number, ...]) → time
</pre> <p>Sum two or more numbers, or concatenate two or more strings or arrays.</p> <p><strong>Example:</strong> It’s as easy as 2 + 2 = 4.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr(2).add(2).run(conn);

// Result:
4
</pre></div></div> <p><a href="add/index.html">Read more about this command →</a></p> <h3 id="sub"><a href="sub/index.html">sub</a></h3> <pre class="command-syntax" data-language="java">number.sub(number[, number, ...]) → number
time.sub(number[, number, ...]) → time
time.sub(time) → number
</pre> <p>Subtract two numbers.</p> <p><strong>Example:</strong> It’s as easy as 2 - 2 = 0.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr(2).sub(2).run(conn);
</pre></div></div> <p><a href="sub/index.html">Read more about this command →</a></p> <h3 id="mul"><a href="mul/index.html">mul</a></h3> <pre class="command-syntax" data-language="java">number.mul(number[, number, ...]) → number
array.mul(number[, number, ...]) → array
</pre> <p>Multiply two numbers, or make a periodic array.</p> <p><strong>Example:</strong> It’s as easy as 2 * 2 = 4.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr(2).mul(2).run(conn);
</pre></div></div> <p><a href="mul/index.html">Read more about this command →</a></p> <h3 id="div"><a href="div/index.html">div</a></h3> <pre class="command-syntax" data-language="java">number.div(number[, number ...]) → number
</pre> <p>Divide two numbers.</p> <p><strong>Example:</strong> It’s as easy as 2 / 2 = 1.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr(2).div(2).run(conn);
</pre></div></div> <p><a href="div/index.html">Read more about this command →</a></p> <h3 id="mod"><a href="mod/index.html">mod</a></h3> <pre class="command-syntax" data-language="java">number.mod(number) → number
</pre> <p><strong>Example:</strong> It’s as easy as 2 % 2 = 0.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr(2).mod(2).run(conn);
</pre></div></div> <p><a href="mod/index.html">Read more about this command →</a></p> <h3 id="and"><a href="and/index.html">and</a></h3> <pre class="command-syntax" data-language="java">bool.and([bool, bool, ...]) → bool
r.and([bool, bool, ...]) → bool
</pre> <p>Compute the logical “and” of one or more values.</p> <p><strong>Example:</strong> Return whether both <code class="language-plaintext highlighter-rouge">a</code> and <code class="language-plaintext highlighter-rouge">b</code> evaluate to true.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">boolean a = true;
boolean b = false;
r.expr(a).and(b).run(conn);

// Result:
false
</pre></div></div> <p><a href="and/index.html">Read more about this command →</a></p> <h3 id="or"><a href="or/index.html">or</a></h3> <pre class="command-syntax" data-language="java">bool.or([bool, bool, ...]) → bool
r.or([bool, bool, ...]) → bool
</pre> <p>Compute the logical “or” of one or more values.</p> <p><strong>Example:</strong> Return whether either <code class="language-plaintext highlighter-rouge">a</code> or <code class="language-plaintext highlighter-rouge">b</code> evaluate to true.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">boolean a = true;
boolean b = false;
r.expr(a).or(b).run(conn);

// Result:
true
</pre></div></div> <p><a href="or/index.html">Read more about this command →</a></p> <h3 id="eq"><a href="eq/index.html">eq</a></h3> <pre class="command-syntax" data-language="java">value.eq(value[, value, ...]) → bool
</pre> <p>Test if two or more values are equal.</p> <p><strong>Example:</strong> See if a user’s <code class="language-plaintext highlighter-rouge">role</code> field is set to <code class="language-plaintext highlighter-rouge">administrator</code>.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("users").get(1).g("role").eq("administrator").run(conn);
</pre></div></div> <p><a href="eq/index.html">Read more about this command →</a></p> <h3 id="ne"><a href="ne/index.html">ne</a></h3> <pre class="command-syntax" data-language="java">value.ne(value[, value, ...]) → bool
</pre> <p>Test if two or more values are not equal.</p> <p><strong>Example:</strong> See if a user’s <code class="language-plaintext highlighter-rouge">role</code> field is not set to <code class="language-plaintext highlighter-rouge">administrator</code>.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("users").get(1).g("role").ne("administrator").run(conn);
</pre></div></div> <p><a href="ne/index.html">Read more about this command →</a></p> <h3 id="gt"><a href="gt/index.html">gt</a></h3> <pre class="command-syntax" data-language="java">value.gt(value[, value, ...]) → bool
</pre> <p>Compare values, testing if the left-hand value is greater than the right-hand.</p> <p><strong>Example:</strong> Test if a player has scored more than 10 points.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("players").get(1).g("score").gt(10).run(conn);
</pre></div></div> <p><a href="gt/index.html">Read more about this command →</a></p> <h3 id="ge"><a href="ge/index.html">ge</a></h3> <pre class="command-syntax" data-language="java">value.ge(value[, value, ...]) → bool
</pre> <p>Compare values, testing if the left-hand value is greater than or equal to the right-hand.</p> <p><strong>Example:</strong> Test if a player has scored 10 points or more.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("players").get(1).g("score").ge(10).run(conn);
</pre></div></div> <p><a href="ge/index.html">Read more about this command →</a></p> <h3 id="lt"><a href="lt/index.html">lt</a></h3> <pre class="command-syntax" data-language="java">value.lt(value[, value, ...]) → bool
</pre> <p>Compare values, testing if the left-hand value is less than the right-hand.</p> <p><strong>Example:</strong> Test if a player has scored less than 10 points.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("players").get(1).g("score").lt(10).run(conn);
</pre></div></div> <p><a href="lt/index.html">Read more about this command →</a></p> <h3 id="le"><a href="le/index.html">le</a></h3> <pre class="command-syntax" data-language="java">value.le(value[, value, ...]) → bool
</pre> <p>Compare values, testing if the left-hand value is less than or equal to the right-hand.</p> <p><strong>Example:</strong> Test if a player has scored 10 points or less.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("players").get(1).g("score").le(10).run(conn);
</pre></div></div> <p><a href="le/index.html">Read more about this command →</a></p> <h3 id="not"><a href="not/index.html">not</a></h3> <pre class="command-syntax" data-language="java">bool.not() → bool
r.not(bool) → bool
</pre> <p>Compute the logical inverse (not) of an expression.</p> <p><strong>Example:</strong> Not true is false.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r(true).not().run(conn);
r.not(true).run(conn);
</pre></div></div> <p>These evaluate to <code class="language-plaintext highlighter-rouge">false</code>.</p> <p><a href="not/index.html">Read more about this command →</a></p> <h3 id="bitand"><a href="bit_and/index.html">bitAnd</a></h3> <pre class="command-syntax" data-language="java">r.bitAnd(number) → number
r.bitAnd(number[, number, ...]) → number
</pre> <p>Compute the arithmetic “and” of one or more values. <code class="language-plaintext highlighter-rouge">bitAnd</code> takes one or more arguments.</p> <p><strong>Example:</strong> Compute the arithmetic “and” of <code class="language-plaintext highlighter-rouge">6</code> and <code class="language-plaintext highlighter-rouge">4</code></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr(6).bitAnd(4).run(conn)
</pre></div></div> <p><a href="bit_and/index.html">Read more about this command →</a></p> <h3 id="bitor"><a href="bit_or/index.html">bitOr</a></h3> <pre class="command-syntax" data-language="java">r.bitOr(number) → number
r.bitOr(number[, number, ...]) → number
</pre> <p>Compute the arithmetic “or” of one or more values. <code class="language-plaintext highlighter-rouge">bitOr</code> takes one or more arguments.</p> <p><strong>Example:</strong> Compute the arithmetic “or” of <code class="language-plaintext highlighter-rouge">6</code> and <code class="language-plaintext highlighter-rouge">4</code></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr(6).bitOr(4).run(conn)
</pre></div></div> <p><a href="bit_or/index.html">Read more about this command →</a></p> <h3 id="bitxor"><a href="bit_xor/index.html">bitXor</a></h3> <pre class="command-syntax" data-language="java">r.bitXor(number) → number
r.bitXor(number[, number, ...]) → number
</pre> <p>Compute the arithmetic “and” of one or more values. <code class="language-plaintext highlighter-rouge">bitXor</code> takes one or more arguments.</p> <p><strong>Example:</strong> Compute the arithmetic “and” of <code class="language-plaintext highlighter-rouge">6</code> and <code class="language-plaintext highlighter-rouge">4</code></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr(6).bitXor(4).run(conn)
</pre></div></div> <p><a href="bit_xor/index.html">Read more about this command →</a></p> <h3 id="bitnot"><a href="bit_not/index.html">bitNot</a></h3> <pre class="command-syntax" data-language="java">r.bitNot() → number
</pre> <p>Compute the arithmetic inverse (not) of an expression. <code class="language-plaintext highlighter-rouge">bitNot</code> takes no arguments.</p> <p><strong>Example:</strong> Negate the arithmetice expression</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr(15).bitNot().run(conn)
</pre></div></div> <p><a href="bit_not/index.html">Read more about this command →</a></p> <h3 id="bitsal"><a href="bit_sal/index.html">bitSal</a></h3> <pre class="command-syntax" data-language="java">r.bitSal(number) → number
r.bitSal(number[, number, ...]) → number
</pre> <p>Compute the left arithmetic shift (left logical shift) of one or more values. <code class="language-plaintext highlighter-rouge">bitSal</code> takes one or more arguments.</p> <p><strong>Example:</strong> Compute the left arithmetic shift of <code class="language-plaintext highlighter-rouge">5</code> and <code class="language-plaintext highlighter-rouge">4</code></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr(5).bitSal(4).run(conn)
</pre></div></div> <p><a href="bit_sal/index.html">Read more about this command →</a></p> <h3 id="bitsar"><a href="bit_sar/index.html">bitSar</a></h3> <pre class="command-syntax" data-language="java">r.bitSar(number) → number
r.bitSar(number[, number, ...]) → number
</pre> <p>Compute the right arithmetic shift of one or more values. <code class="language-plaintext highlighter-rouge">bitSar</code> takes one or more arguments.</p> <p><strong>Example:</strong> Compute the right arithmetic shift of <code class="language-plaintext highlighter-rouge">32</code> and <code class="language-plaintext highlighter-rouge">3</code></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr(32).bitSar(3).run(conn)
</pre></div></div> <p><a href="bit_sar/index.html">Read more about this command →</a></p> <h3 id="random"><a href="random/index.html">random</a></h3> <pre class="command-syntax" data-language="java">r.random() → number
r.random(number[, number]) → number
r.random(integer[, integer]) → integer
</pre> <p>Generate a random number between given (or implied) bounds. <code class="language-plaintext highlighter-rouge">random</code> takes zero, one or two arguments, and can also take an <a href="optarg/index.html">optArg</a> of <code class="language-plaintext highlighter-rouge">float</code>.</p> <p><strong>Example:</strong> Generate a random number in the range <code class="language-plaintext highlighter-rouge">[0,1)</code></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.random().run(conn);
</pre></div></div> <p><a href="random/index.html">Read more about this command →</a></p> <h3 id="round"><a href="round/index.html">round</a></h3> <pre class="command-syntax" data-language="java">r.round(number) → number
number.round() → number
</pre> <p>Rounds the given value to the nearest whole integer.</p> <p><strong>Example:</strong> Round 12.345 to the nearest integer.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.round(12.345).run(conn);

// Result:
12.0
</pre></div></div> <p>The <code class="language-plaintext highlighter-rouge">round</code> command can also be chained after an expression.</p> <p><a href="round/index.html">Read more about this command →</a></p> <h3 id="ceil"><a href="ceil/index.html">ceil</a></h3> <pre class="command-syntax" data-language="java">r.ceil(number) → number
number.ceil() → number
</pre> <p>Rounds the given value up, returning the smallest integer greater than or equal to the given value (the value’s ceiling).</p> <p><strong>Example:</strong> Return the ceiling of 12.345.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.ceil(12.345).run(conn);

// Result:
13.0
</pre></div></div> <p>The <code class="language-plaintext highlighter-rouge">ceil</code> command can also be chained after an expression.</p> <p><a href="ceil/index.html">Read more about this command →</a></p> <h3 id="floor"><a href="floor/index.html">floor</a></h3> <pre class="command-syntax" data-language="java">r.floor(number) → number
number.floor() → number
</pre> <p>Rounds the given value down, returning the largest integer value less than or equal to the given value (the value’s floor).</p> <p><strong>Example:</strong> Return the floor of 12.345.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.floor(12.345).run(conn);

// Result:
12.0
</pre></div></div> <p>The <code class="language-plaintext highlighter-rouge">floor</code> command can also be chained after an expression.</p> <p><a href="floor/index.html">Read more about this command →</a></p> </section> <section class="api-section"><h2 data-alt="Dates and times ">Dates and times </h2>
<h3 id="now"><a href="now/index.html">now</a></h3> <pre class="command-syntax" data-language="java">r.now() → time
</pre> <p>Return a time object representing the current time in UTC. The command now() is computed once when the server receives the query, so multiple instances of r.now() will always return the same time inside a query.</p> <p><strong>Example:</strong> Add a new user with the time at which he subscribed.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("users").insert(
    r.hashMap("name", "John")
     .with("subscription_date", r.now())
).run(conn);
</pre></div></div> <p><a href="now/index.html">Read more about this command →</a></p> <h3 id="time"><a href="time/index.html">time</a></h3> <pre class="command-syntax" data-language="java">r.time(year, month, day[, hour, minute, second], timezone) → time
</pre> <p>Create a time object for a specific time.</p> <p><strong>Example:</strong> Update the birthdate of the user “John” to November 3rd, 1986 UTC.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("user").get("John").update(
    r.hashMap("birthdate", r.time(1986, 11, 3, 'Z'))
).run(conn);
</pre></div></div> <p><a href="time/index.html">Read more about this command →</a></p> <h3 id="epochtime"><a href="epoch_time/index.html">epochTime</a></h3> <pre class="command-syntax" data-language="java">r.epochTime(number) → time
</pre> <p>Create a time object based on seconds since epoch. The first argument is a double and will be rounded to three decimal places (millisecond-precision).</p> <p><strong>Example:</strong> Update the birthdate of the user “John” to November 3rd, 1986.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("user").get("John").update(
    r.hashMap(birthdate, r.epochTime(531360000))
).run(conn);
</pre></div></div> <p><a href="epoch_time/index.html">Read more about this command →</a></p> <h3 id="iso8601"><a href="iso8601/index.html">iso8601</a></h3> <pre class="command-syntax" data-language="java">r.iso8601(string) → time
</pre> <p>Create a time object based on an ISO 8601 date-time string (e.g. ‘2013-01-01T01:01:01+00:00’). RethinkDB supports all valid ISO 8601 formats except for week dates. Read more about the ISO 8601 format at <a href="http://en.wikipedia.org/wiki/ISO_8601">Wikipedia</a>.</p> <p><strong>Example:</strong> Update the time of John’s birth.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("user").get("John").update(
    r.hashMap("birth", r.iso8601("1986-11-03T08:30:00-07:00"))
).run(conn);
</pre></div></div> <p><a href="iso8601/index.html">Read more about this command →</a></p> <h3 id="intimezone"><a href="in_timezone/index.html">inTimezone</a></h3> <pre class="command-syntax" data-language="java">time.inTimezone(timezone) → time
</pre> <p>Return a new time object with a different timezone. While the time stays the same, the results returned by methods such as hours() will change since they take the timezone into account. The timezone argument has to be of the ISO 8601 format.</p> <p><strong>Example:</strong> Hour of the day in San Francisco (UTC/GMT -8, without daylight saving time).</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.now().inTimezone("-08:00").hours().run(conn);
</pre></div></div> <p><a href="in_timezone/index.html">Read more about this command →</a></p> <h3 id="timezone"><a href="timezone/index.html">timezone</a></h3> <pre class="command-syntax" data-language="java">time.timezone() → string
</pre> <p>Return the timezone of the time object.</p> <p><strong>Example:</strong> Return all the users in the “-07:00” timezone.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("users").filter(
    user -&gt; user.g("subscriptionDate").timezone().eq("-07:00")
).run(conn);
</pre></div></div> <p><a href="timezone/index.html">Read more about this command →</a></p> <h3 id="during"><a href="during/index.html">during</a></h3> <pre class="command-syntax" data-language="java">time.during(startTime, endTime) → bool
</pre> <p>Return whether a time is between two other times.</p> <p><strong>Example:</strong> Retrieve all the posts that were posted between December 1st, 2013 (inclusive) and December 10th, 2013 (exclusive).</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("posts").filter(
    row -&gt; row.g("date").during(r.time(2013, 12, 1, "Z"), r.time(2013, 12, 10, "Z"))
).run(conn);
</pre></div></div> <p><a href="during/index.html">Read more about this command →</a></p> <h3 id="date"><a href="date/index.html">date</a></h3> <pre class="command-syntax" data-language="java">time.date() → time
</pre> <p>Return a new [OffsetDateTime][odt] object only based on the day, month and year (ie. the same day at 00:00).</p> <p><strong>Example:</strong> Retrieve all the users whose birthday is today.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("users").filter(
    user -&gt; user.g("birthdate").date().eq(r.now().date())
).run(conn);
</pre></div></div> <p><a href="date/index.html">Read more about this command →</a></p> <h3 id="timeofday"><a href="time_of_day/index.html">timeOfDay</a></h3> <pre class="command-syntax" data-language="java">time.timeOfDay() → number
</pre> <p>Return the number of seconds elapsed since the beginning of the day stored in the time object.</p> <p><strong>Example:</strong> Retrieve posts that were submitted before noon.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("posts").filter(
    post -&gt; post.g("date").timeOfDay().le(12*60*60)
).run(conn);
</pre></div></div> <p><a href="time_of_day/index.html">Read more about this command →</a></p> <h3 id="year"><a href="year/index.html">year</a></h3> <pre class="command-syntax" data-language="java">time.year() → number
</pre> <p>Return the year of a time object.</p> <p><strong>Example:</strong> Retrieve all the users born in 1986.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("users").filter(
    user -&gt; user.g("birthdate").year().eq(1986)
}).run(conn);
</pre></div></div> <p><a href="year/index.html">Read more about this command →</a></p> <h3 id="month"><a href="month/index.html">month</a></h3> <pre class="command-syntax" data-language="java">time.month() → number
</pre> <p>Return the month of a time object as a number between 1 and 12. For your convenience, the terms <code class="language-plaintext highlighter-rouge">r.january</code>, <code class="language-plaintext highlighter-rouge">r.february</code>, etc. are defined and map to the appropriate integer.</p> <p><strong>Example:</strong> Retrieve all the users who were born in November.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("users").filter(row -&gt; row.g("birthdate").month().eq(11)).run(conn);
</pre></div></div> <p><a href="month/index.html">Read more about this command →</a></p> <h3 id="day"><a href="day/index.html">day</a></h3> <pre class="command-syntax" data-language="java">time.day() → number
</pre> <p>Return the day of a time object as a number between 1 and 31.</p> <p><strong>Example:</strong> Return the users born on the 24th of any month.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("users").filter(
    row -&gt; row.g("birthdate").day().eq(24)
).run(conn);
</pre></div></div> <p><a href="day/index.html">Read more about this command →</a></p> <h3 id="dayofweek"><a href="day_of_week/index.html">dayOfWeek</a></h3> <pre class="command-syntax" data-language="java">time.dayOfWeek() → number
</pre> <p>Return the day of week of a time object as a number between 1 and 7 (following ISO 8601 standard). For your convenience, the terms r.monday, r.tuesday, etc. are defined and map to the appropriate integer.</p> <p><strong>Example:</strong> Return today’s day of week.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.now().dayOfWeek().run(conn);
</pre></div></div> <p><a href="day_of_week/index.html">Read more about this command →</a></p> <h3 id="dayofyear"><a href="day_of_year/index.html">dayOfYear</a></h3> <pre class="command-syntax" data-language="java">time.dayOfYear() → number
</pre> <p>Return the day of the year of a time object as a number between 1 and 366 (following ISO 8601 standard).</p> <p><strong>Example:</strong> Retrieve all the users who were born the first day of a year.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("users").filter(
    row -&gt; row.g("birthdate").dayOfYear().eq(1)
).run(conn);
</pre></div></div> <p><a href="day_of_year/index.html">Read more about this command →</a></p> <h3 id="hours"><a href="hours/index.html">hours</a></h3> <pre class="command-syntax" data-language="java">time.hours() → number
</pre> <p>Return the hour in a time object as a number between 0 and 23.</p> <p><strong>Example:</strong> Return all the posts submitted after midnight and before 4am.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("posts").filter(post -&gt; post.g("date").hours().lt(4)).run(conn);
</pre></div></div> <p><a href="hours/index.html">Read more about this command →</a></p> <h3 id="minutes"><a href="minutes/index.html">minutes</a></h3> <pre class="command-syntax" data-language="java">time.minutes() → number
</pre> <p>Return the minute in a time object as a number between 0 and 59.</p> <p><strong>Example:</strong> Return all the posts submitted during the first 10 minutes of every hour.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("posts").filter(post -&gt; post.g("date").minutes().lt(10)).run(conn);
</pre></div></div> <p><a href="minutes/index.html">Read more about this command →</a></p> <h3 id="seconds"><a href="seconds/index.html">seconds</a></h3> <pre class="command-syntax" data-language="java">time.seconds() → number
</pre> <p>Return the seconds in a time object as a number between 0 and 59.999 (double precision).</p> <p><strong>Example:</strong> Return the post submitted during the first 30 seconds of every minute.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("posts").filter(post -&gt; post.g("date").seconds().lt(30)).run(conn);
</pre></div></div> <p><a href="seconds/index.html">Read more about this command →</a></p> <h3 id="toiso8601"><a href="to_iso8601/index.html">toIso8601</a></h3> <pre class="command-syntax" data-language="java">time.toIso8601() → string
</pre> <p>Convert a time object to a string in ISO 8601 format.</p> <p><strong>Example:</strong> Return the current ISO 8601 time.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.now().toIso8601().run(conn);

// Result:
"2015-04-20T18:37:52.690+00:00"
</pre></div></div> <p><a href="to_iso8601/index.html">Read more about this command →</a></p> <h3 id="toepochtime"><a href="to_epoch_time/index.html">toEpochTime</a></h3> <pre class="command-syntax" data-language="java">time.toEpochTime() → number
</pre> <p>Convert a time object to its epoch time.</p> <p><strong>Example:</strong> Return the current time in seconds since the Unix Epoch with millisecond-precision.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.now().toEpochTime().run(conn);
</pre></div></div> <p><a href="to_epoch_time/index.html">Read more about this command →</a></p> </section> <section class="api-section"><h2 data-alt="Control structures ">Control structures </h2>
<h3 id="array"><a href="array/index.html">array</a></h3> <pre class="command-syntax" data-language="java">r.array(value[, value...]) → array
</pre> <p>Take one or more values as arguments and return an array. (Technically, return a [List][] object.)</p> <p><strong>Example:</strong> Create an array.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr(r.array(10, 20, 30)).run(conn);
</pre></div></div> <p>This is a ReQL equivalent to:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">List&lt;Integer&gt; myArray = Arrays.asList(10, 20, 30);
</pre></div></div> <p><a href="array/index.html">Read more about this command →</a></p> <h3 id="hashmap"><a href="hashmap/index.html">hashMap</a></h3> <pre class="command-syntax" data-language="java">r.hashMap(key, value)[.with(key, value) ...] → object
</pre> <p>Take a key/value pair, with extra key/value pairs optionally specified by chaining one or more <code class="language-plaintext highlighter-rouge">with(key, value)</code> terms after <code class="language-plaintext highlighter-rouge">hashMap</code>, and return an object.</p> <p><strong>Example:</strong> Create a hashmap.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">import com.rethinkdb.model.MapObject;

MapObject newData = r.hashMap("user", "fred")
    .with("email", "fred@example.com")
    .with("id", 101)
    .with("admin", true);
</pre></div></div> <p>This creates the object (in JSON):</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">{
    "admin": true,
    "email": "fred@example.com",
    "id": 101,
    "user": "fred"
}
</pre></div></div> <p><a href="hashmap/index.html">Read more about this command →</a></p> <h3 id="args"><a href="args/index.html">args</a></h3> <pre class="command-syntax" data-language="java">r.args(array) → special
</pre> <p><code class="language-plaintext highlighter-rouge">r.args</code> is a special term that’s used to splice an array of arguments into another term. This is useful when you want to call a variadic term such as <a href="get_all/index.html">getAll</a> with a set of arguments produced at runtime.</p> <p><strong>Example:</strong> Get Alice and Bob from the table <code class="language-plaintext highlighter-rouge">people</code>.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("people").getAll("Alice", "Bob").run(conn);
// or
r.table("people").getAll(r.args(r.array("Alice", "Bob"))).run(conn);
</pre></div></div> <p><a href="args/index.html">Read more about this command →</a></p> <h3 id="binary"><a href="binary/index.html">binary</a></h3> <pre class="command-syntax" data-language="java">r.binary(data) → binary
</pre> <p>Encapsulate binary data within a query.</p> <p><strong>Example:</strong> Save an avatar image to a existing user record.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">import java.nio.file.*;

Path path = Paths.get("./defaultAvatar.png");
byte[] avatarImage = Files.readAllBytes(path);
r.table("users").get(100).update(r.hashMap("avatar", avatarImage));
</pre></div></div> <p><a href="binary/index.html">Read more about this command →</a></p> <h3 id="do_"><a href="do/index.html">do_</a></h3> <pre class="command-syntax" data-language="java">any.do_(function) → any
r.do_([args]*, function) → any
any.do_(expr) → any
r.do_([args]*, expr) → any
</pre> <p>Call an anonymous function using return values from other ReQL commands or queries as arguments.</p> <p><strong>Example:</strong> Compute a golfer’s net score for a game.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("players").get("86be93eb-a112-48f5-a829-15b2cb49de1d").do_(
    player -&gt; player.g("gross_score").sub(player.g("course_handicap"))
).run(conn);
</pre></div></div> <p><a href="do/index.html">Read more about this command →</a></p> <h3 id="branch"><a href="branch/index.html">branch</a></h3> <pre class="command-syntax" data-language="java">r.branch(test, true_action[, test2, test2_action, ...], false_action) → any
test.branch(true_action[, test2, test2_action, ...], false_action) → any
</pre> <p>Perform a branching conditional equivalent to <code class="language-plaintext highlighter-rouge">if-then-else</code>.</p> <p>The <code class="language-plaintext highlighter-rouge">branch</code> command takes 2n+1 arguments: pairs of conditional expressions and commands to be executed if the conditionals return any value but <code class="language-plaintext highlighter-rouge">false</code> or <code class="language-plaintext highlighter-rouge">null</code> (i.e., “truthy” values), with a final “else” command to be evaluated if all of the conditionals are <code class="language-plaintext highlighter-rouge">false</code> or <code class="language-plaintext highlighter-rouge">null</code>.</p> <p><strong>Example:</strong> Test the value of x.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">int x = 10;
r.branch(r.expr(x).gt(5), "big", "small").run(conn);

// Result:
"big"
</pre></div></div> <p><a href="branch/index.html">Read more about this command →</a></p> <h3 id="foreach"><a href="for_each/index.html">forEach</a></h3> <pre class="command-syntax" data-language="java">sequence.forEach(write_function) → object
</pre> <p>Loop over a sequence, evaluating the given write query for each element.</p> <p><strong>Example:</strong> Now that our heroes have defeated their villains, we can safely remove them from the villain table.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").forEach(
    hero -&gt; r.table("villains").get(hero.g("villainDefeated")).delete()
).run(conn);
</pre></div></div> <p><a href="for_each/index.html">Read more about this command →</a></p> <h3 id="range"><a href="range/index.html">range</a></h3> <pre class="command-syntax" data-language="java">r.range() → stream
r.range([startValue, ]endValue) → stream
</pre> <p>Generate a stream of sequential integers in a specified range.</p> <p><strong>Example:</strong> Return a four-element range of <code class="language-plaintext highlighter-rouge">[0, 1, 2, 3]</code>.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.range(4).run(conn);
</pre></div></div> <p>Result (shown as JSON):</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">[0, 1, 2, 3]
</pre></div></div> <p><a href="range/index.html">Read more about this command →</a></p> <h3 id="error"><a href="error/index.html">error</a></h3> <pre class="command-syntax" data-language="java">r.error(message) → error
</pre> <p>Throw a runtime error. If called with no arguments inside the second argument to <code class="language-plaintext highlighter-rouge">default</code>, re-throw the current error.</p> <p><strong>Example:</strong> Iron Man can’t possibly have lost a battle:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").get("IronMan").do_(
    ironman -&gt; r.branch(
        ironman.g("victories").lt(ironman.g("battles")),
        r.error("impossible code path"),
        ironman
    )
).run(conn);
</pre></div></div> <p><a href="error/index.html">Read more about this command →</a></p> <h3 id="default"><a href="default/index.html">default</a></h3> <pre class="command-syntax" data-language="java">value.default(default_value) → any
sequence.default(default_value) → any
</pre> <p>Provide a default value in case of non-existence errors. The <code class="language-plaintext highlighter-rouge">default</code> command evaluates its first argument (the value it’s chained to). If that argument returns <code class="language-plaintext highlighter-rouge">null</code> or a non-existence error is thrown in evaluation, then <code class="language-plaintext highlighter-rouge">default</code> returns its second argument. The second argument is usually a default value, but it can be a function that returns a value.</p> <p><strong>Example:</strong> Suppose we want to retrieve the titles and authors of the table <code class="language-plaintext highlighter-rouge">posts</code>. In the case where the author field is missing or <code class="language-plaintext highlighter-rouge">null</code>, we want to retrieve the string <code class="language-plaintext highlighter-rouge">Anonymous</code>.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("posts").map(post -&gt;
    r.hashMap("title", post.g("title"))
        .with("author", post.g("author").default_("Anonymous"))
).run(conn);
</pre></div></div> <p><a href="default/index.html">Read more about this command →</a></p> <h3 id="expr"><a href="expr/index.html">expr</a></h3> <pre class="command-syntax" data-language="java">r.expr(value) → value
</pre> <p>Construct a ReQL JSON object from a native object.</p> <p><strong>Example:</strong> Objects wrapped with <code class="language-plaintext highlighter-rouge">expr</code> can then be manipulated by ReQL API functions.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">import com.rethinkdb.model.MapObject;

// Create object { "a": "b" }
MapObject newData = r.hashMap("a", "b");

// merge with { "b": [1, 2, 3] }
r.expr(newData).merge(r.hashMap("b", r.array(1, 2, 3))).run(conn);
</pre></div></div> <p><a href="expr/index.html">Read more about this command →</a></p> <h3 id="js"><a href="js/index.html">js</a></h3> <pre class="command-syntax" data-language="java">r.js(jsString) → value
</pre> <p>Create a JavaScript expression.</p> <p><strong>Example:</strong> Concatenate two strings using JavaScript.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.js("'str1' + 'str2'").run(conn);
</pre></div></div> <p><a href="js/index.html">Read more about this command →</a></p> <h3 id="coerceto"><a href="coerce_to/index.html">coerceTo</a></h3> <pre class="command-syntax" data-language="java">sequence.coerceTo("array") → array
value.coerceTo("string") → string
string.coerceTo("number") → number
array.coerceTo("object") → object
sequence.coerceTo("object") → object
object.coerceTo("array") → array
binary.coerceTo("string") → string
string.coerceTo("binary") → binary
</pre> <p>Convert a value of one type into another.</p> <p><strong>Example:</strong> Coerce a stream to an array to store its output in a field. (A stream cannot be stored in a field directly.)</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("posts").map(post -&gt; post.merge(
    r.hashMap("comments",
              r.table("comments").getAll(post.g("id")).optArg("index", "post_id")
              .coerceTo("array"))
)).run(conn);
</pre></div></div> <p><a href="coerce_to/index.html">Read more about this command →</a></p> <h3 id="typeof"><a href="type_of/index.html">typeOf</a></h3> <pre class="command-syntax" data-language="java">any.typeOf() → string
</pre> <p>Gets the type of a ReQL query’s return value.</p> <p><strong>Example:</strong> Get the type of a string.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.expr("foo").typeOf().run(conn);
// result: "STRING"
</pre></div></div> <p><a href="type_of/index.html">Read more about this command →</a></p> <h3 id="info"><a href="info/index.html">info</a></h3> <pre class="command-syntax" data-language="java">any.info() → object
r.info(any) → object
</pre> <p>Get information about a ReQL value.</p> <p><strong>Example:</strong> Get information about a table such as primary key, or cache size.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("marvel").info().run(conn);
</pre></div></div> <p><a href="info/index.html">Read more about this command →</a></p> <h3 id="json"><a href="json/index.html">json</a></h3> <pre class="command-syntax" data-language="java">r.json(json_string) → value
</pre> <p>Parse a JSON string on the server.</p> <p><strong>Example:</strong> Send an array to the server.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.json("[1,2,3]").run(conn);
</pre></div></div> <p><a href="json/index.html">Read more about this command →</a></p> <h3 id="tojsonstring-tojson"><a href="to_json_string/index.html">toJsonString, toJson</a></h3> <pre class="command-syntax" data-language="java">value.toJsonString() → string
value.toJson() → string
</pre> <p>Convert a ReQL value or object to a JSON string. You may use either <code class="language-plaintext highlighter-rouge">toJsonString</code> or <code class="language-plaintext highlighter-rouge">toJson</code>.</p> <p><strong>Example:</strong> Get a ReQL document as a JSON string.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("hero").get(1).toJson().run(conn)
</pre></div></div> <p>Returned data:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">'{"id": 1, "name": "Batman", "city": "Gotham", "powers": ["martial arts", "cinematic entrances"]}'
</pre></div></div> <p><a href="to_json_string/index.html">Read more about this command →</a></p> <h3 id="http"><a href="http/index">http</a></h3> <pre class="command-syntax" data-language="java">r.http(url[, options]) → value
r.http(url[, options]) → stream
</pre> <p>Retrieve data from the specified URL over HTTP. The return type depends on the <code class="language-plaintext highlighter-rouge">resultFormat</code> option, which checks the <code class="language-plaintext highlighter-rouge">Content-Type</code> of the response by default.</p> <p><strong>Example:</strong> Perform an HTTP <code class="language-plaintext highlighter-rouge">GET</code> and store the result in a table.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("posts").insert(r.http("http://httpbin.org/get")).run(conn);
</pre></div></div> <p><a href="http/index">Read more about this command →</a></p> <h3 id="uuid"><a href="uuid/index.html">uuid</a></h3> <pre class="command-syntax" data-language="java">r.uuid([string]) → string
</pre> <p>Return a UUID (universally unique identifier), a string that can be used as a unique ID. If a string is passed to <code class="language-plaintext highlighter-rouge">uuid</code> as an argument, the UUID will be deterministic, derived from the string’s SHA-1 hash.</p> <p><strong>Example:</strong> Generate a UUID.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.uuid().run(conn);
// returns "27961a0e-f4e8-4eb3-bf95-c5203e1d87b9"
</pre></div></div> <p><a href="uuid/index.html">Read more about this command →</a></p> </section> <section class="api-section"><h2 data-alt="Geospatial commands ">Geospatial commands </h2>
<h3 id="circle"><a href="circle/index.html">circle</a></h3> <pre class="command-syntax" data-language="java">r.circle(r.array(longitude, latitude), radius) → geometry
r.circle(point, radius) → geometry
</pre> <p>Construct a circular line or polygon. A circle in RethinkDB is a polygon or line <em>approximating</em> a circle of a given radius around a given center, consisting of a specified number of vertices (default 32).</p> <p><strong>Example:</strong> Define a circle.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("geo").insert(
    r.hashMap("id", 300)
     .with("name", "Hayes Valley")
     .with("neighborhood", r.circle(r.array(-122.423246, 37.779388), 1000))
).run(conn);
</pre></div></div> <p><a href="circle/index.html">Read more about this command →</a></p> <h3 id="distance"><a href="distance/index.html">distance</a></h3> <pre class="command-syntax" data-language="java">geometry.distance(geometry) → number
r.distance(geometry, geometry) → number
</pre> <p>Compute the distance between a point and another geometry object. At least one of the geometry objects specified must be a point.</p> <p><strong>Example:</strong> Compute the distance between two points on the Earth in kilometers.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.distance(
    r.point(-122.423246,37.779388),
    r.point(-117.220406,32.719464)
).optArg("unit", "km").run(conn);

// Result:
734.1252496021841
</pre></div></div> <p><a href="distance/index.html">Read more about this command →</a></p> <h3 id="fill"><a href="fill/index.html">fill</a></h3> <pre class="command-syntax" data-language="java">line.fill() → polygon
</pre> <p>Convert a Line object into a Polygon object. If the last point does not specify the same coordinates as the first point, <code class="language-plaintext highlighter-rouge">polygon</code> will close the polygon by connecting them.</p> <p><strong>Example:</strong> Create a line object and then convert it to a polygon.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("geo").insert(
    r.hashMap("id", 201)
     .with("rectangle", r.line(
        r.array(-122.423246,37.779388),
        r.array(-122.423246,37.329898),
        r.array(-121.886420,37.329898),
        r.array(-121.886420,37.779388)))
).run(conn);

r.table("geo").get(201).update(
    r.hashMap("rectangle", row -&gt; row.g("rectangle").fill())
).optArg("non_atomic", true).run(conn);
</pre></div></div> <p><a href="fill/index.html">Read more about this command →</a></p> <h3 id="geojson"><a href="geojson/index.html">geojson</a></h3> <pre class="command-syntax" data-language="java">r.geojson(geojson) → geometry
</pre> <p>Convert a <a href="http://geojson.org">GeoJSON</a> object to a ReQL geometry object.</p> <p><strong>Example:</strong> Convert a GeoJSON object to a ReQL geometry object.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">import com.rethinkdb.model.Geojson;

// GeoJSON object:
//      {
//          "type": "Point",
//          "coordinates": [ -122.423246, 37.779388 ]
//      }
Geojson geo = r.hashMap("type, "Point")
               .with("coordinates", r.array(-122.423246, 37.779388));

r.table("geo").insert(
    r.hashMap("id", "sfo")
     .with("name", "San Francisco")
     .with("location", r.geojson(geo))
).run(conn);
</pre></div></div> <p><a href="geojson/index.html">Read more about this command →</a></p> <h3 id="togeojson"><a href="to_geojson/index.html">toGeojson</a></h3> <pre class="command-syntax" data-language="java">geometry.toGeojson() → object
</pre> <p>Convert a ReQL geometry object to a <a href="http://geojson.org">GeoJSON</a> object.</p> <p><strong>Example:</strong> Convert a ReQL geometry object to a GeoJSON object.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("geo").get("sfo")("location").toGeojson().run(conn);

// Result:
{
    "type": "Point",
    "coordinates": [ -122.423246, 37.779388 ]
}
</pre></div></div> <p><a href="to_geojson/index.html">Read more about this command →</a></p> <h3 id="getintersecting"><a href="get_intersecting/index.html">getIntersecting</a></h3> <pre class="command-syntax" data-language="java">table.getIntersecting(geometry).optArg("index", index) → selection&lt;stream&gt;
</pre> <p>Get all documents where the given geometry object intersects the geometry object of the requested geospatial index.</p> <p><strong>Example:</strong> Which of the locations in a list of parks intersect <code class="language-plaintext highlighter-rouge">circle1</code>?</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">import com.rethinkdb.gen.ast.Circle;

Circle circle1 = r.circle(r.array(-117.220406, 32.719464), 10)
                  .optArg("unit", "mi");

r.table("parks").getIntersecting(circle1).optArg("index", "area").run(conn);
</pre></div></div> <p><a href="get_intersecting/index.html">Read more about this command →</a></p> <h3 id="getnearest"><a href="get_nearest/index.html">getNearest</a></h3> <pre class="command-syntax" data-language="java">table.getNearest(point).optArg("index", index) → array
</pre> <p>Return a list of documents closest to a specified point based on a geospatial index, sorted in order of increasing distance.</p> <p><strong>Example:</strong> Return a list of the closest 25 enemy hideouts to the secret base.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">import com.rethinkdb.gen.ast.Point;

Point secretBase = r.point(-122.422876,37.777128);

r.table("hideouts")
 .getNearest(secretBase)
 .optArg("index", "location")
 .optArg("max_results", 25)
 .run(conn);
</pre></div></div> <p><a href="get_nearest/index.html">Read more about this command →</a></p> <h3 id="includes"><a href="includes/index.html">includes</a></h3> <pre class="command-syntax" data-language="java">sequence.includes(geometry) → sequence
geometry.includes(geometry) → bool
</pre> <p>Tests whether a geometry object is completely contained within another. When applied to a sequence of geometry objects, <code class="language-plaintext highlighter-rouge">includes</code> acts as a <a href="filter/index.html">filter</a>, returning a sequence of objects from the sequence that include the argument.</p> <p><strong>Example:</strong> Is a point included within a 2000-meter circle?</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">Object point1 = r.point(-117.220406,32.719464);
Object point2 = r.point(-117.206201,32.725186);

r.circle(point1, 2000).includes(point2).run(conn);

// Result:
true
</pre></div></div> <p><a href="includes/index.html">Read more about this command →</a></p> <h3 id="intersects"><a href="intersects/index.html">intersects</a></h3> <pre class="command-syntax" data-language="java">sequence.intersects(geometry) → sequence
geometry.intersects(geometry) → bool
r.intersects(sequence, geometry) → sequence
r.intersects(geometry, geometry) → bool
</pre> <p>Tests whether two geometry objects intersect with one another. When applied to a sequence of geometry objects, <code class="language-plaintext highlighter-rouge">intersects</code> acts as a <a href="filter/index.html">filter</a>, returning a sequence of objects from the sequence that intersect with the argument.</p> <p><strong>Example:</strong> Is <code class="language-plaintext highlighter-rouge">point2</code> within a 2000-meter circle around <code class="language-plaintext highlighter-rouge">point1</code>?</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">import com.rethinkdb.gen.ast.Point;

Point point1 = r.point(-117.220406,32.719464);
Point point2 = r.point(-117.206201,32.725186);

r.circle(point1, 2000).intersects(point2).run(conn);

// Result:
true
</pre></div></div> <p><a href="intersects/index.html">Read more about this command →</a></p> <h3 id="line"><a href="line/index.html">line</a></h3> <pre class="command-syntax" data-language="java">r.line([lon1, lat1], [lon2, lat2], ...) → line
r.line(point1, point2, ...) → line
</pre> <p>Construct a geometry object of type Line. The line can be specified in one of two ways:</p> <ul> <li>Two or more two-item arrays, specifying latitude and longitude numbers of the line’s vertices;</li> <li>Two or more <a href="point/index.html">Point</a> objects specifying the line’s vertices.</li> </ul> <p><strong>Example:</strong> Define a line.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("geo").insert(
    r.hashMap("id", 101)
     .with("route", r.line(r.array(-122.423246, 37.779388),
                           r.array(-121.88642, 37.329898)))
).run(conn);
</pre></div></div> <p><a href="line/index.html">Read more about this command →</a></p> <h3 id="point"><a href="point/index.html">point</a></h3> <pre class="command-syntax" data-language="java">r.point(longitude, latitude) → point
</pre> <p>Construct a geometry object of type Point. The point is specified by two floating point numbers, the longitude (−180 to 180) and latitude (−90 to 90) of the point on a perfect sphere. See <a href="../../docs/geo-support/java/index.html">Geospatial support</a> for more information on ReQL’s coordinate system.</p> <p><strong>Example:</strong> Define a point.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("geo").insert(
    r.hashMap("id", 1)
     .with("name", "San Francisco")
     .with("location", r.point(-122.423246, 37.779388))
).run(conn);
</pre></div></div> <p><a href="point/index.html">Read more about this command →</a></p> <h3 id="polygon"><a href="polygon/index.html">polygon</a></h3> <pre class="command-syntax" data-language="java">r.polygon([lon1, lat1], [lon2, lat2], [lon3, lat3], ...) → polygon
r.polygon(point1, point2, point3, ...) → polygon
</pre> <p>Construct a geometry object of type Polygon. The Polygon can be specified in one of two ways:</p> <ul> <li>Three or more two-item arrays, specifying latitude and longitude numbers of the polygon’s vertices;</li> <li>Three or more <a href="point/index.html">Point</a> objects specifying the polygon’s vertices.</li> </ul> <p><strong>Example:</strong> Define a polygon.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("geo").insert(
    r.hashMap("id", 101)
     .with("rectangle", r.polygon(
        r.array(-122.423246, 37.779388),
        r.array(-122.423246, 37.329898),
        r.array(-121.88642, 37.329898),
        r.array(-121.88642, 37.779388))
    )
).run(conn);
</pre></div></div> <p><a href="polygon/index.html">Read more about this command →</a></p> <h3 id="polygonsub"><a href="polygon_sub/index.html">polygonSub</a></h3> <pre class="command-syntax" data-language="java">polygon1.polygonSub(polygon2) → polygon
</pre> <p>Use <code class="language-plaintext highlighter-rouge">polygon2</code> to “punch out” a hole in <code class="language-plaintext highlighter-rouge">polygon1</code>. <code class="language-plaintext highlighter-rouge">polygon2</code> must be completely contained within <code class="language-plaintext highlighter-rouge">polygon1</code> and must have no holes itself (it must not be the output of <code class="language-plaintext highlighter-rouge">polygonSub</code> itself).</p> <p><strong>Example:</strong> Define a polygon with a hole punched in it.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">import com.rethinkdb.gen.ast.Polygon;

Polygon outerPolygon = r.polygon(
    [-122.4,37.7],
    [-122.4,37.3],
    [-121.8,37.3],
    [-121.8,37.7]
);
Polygon innerPolygon = r.polygon(
    [-122.3,37.4],
    [-122.3,37.6],
    [-122.0,37.6],
    [-122.0,37.4]
);
outerPolygon.polygonSub(inner_polygon).run(conn);
</pre></div></div> <p><a href="polygon_sub/index.html">Read more about this command →</a></p> </section> <section class="api-section"><h2 data-alt="Administration ">Administration </h2>
<h3 id="grant"><a href="grant/index.html">grant</a></h3> <pre class="command-syntax" data-language="java">r.grant("username", r.hashMap("permission", bool[, ...])) → object
db.grant("username", r.hashMap("permission", bool[, ...])) → object
table.grant("username", r.hashMap("permission", bool[, ...])) → object
</pre> <p>Grant or deny access permissions for a user account, globally or on a per-database or per-table basis.</p> <p><strong>Example:</strong> Grant the <code class="language-plaintext highlighter-rouge">chatapp</code> user account read and write permissions on the <code class="language-plaintext highlighter-rouge">users</code> database.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.db("users").grant("chatapp", r.hashMap("read", true).with("write", true)).run(conn);
</pre></div></div> <p>Return:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">{
    "granted": 1,
    "permissions_changes": [
        {
            "new_val": { "read": true, "write": true },
            "old_val": { null }
        }
    ]
</pre></div></div> <p><a href="grant/index.html">Read more about this command →</a></p> <h3 id="config"><a href="config/index.html">config</a></h3> <pre class="command-syntax" data-language="java">table.config() → selection&lt;object&gt;
database.config() → selection&lt;object&gt;
</pre> <p>Query (read and/or update) the configurations for individual tables or databases.</p> <p><strong>Example:</strong> Get the configuration for the <code class="language-plaintext highlighter-rouge">users</code> table.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("users").config().run(conn);
</pre></div></div> <p><a href="config/index.html">Read more about this command →</a></p> <h3 id="rebalance"><a href="rebalance/index.html">rebalance</a></h3> <pre class="command-syntax" data-language="java">table.rebalance() → object
database.rebalance() → object
</pre> <p>Rebalances the shards of a table. When called on a database, all the tables in that database will be rebalanced.</p> <p><strong>Example:</strong> Rebalance a table.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">&gt; r.table("superheroes").rebalance().run(conn);
</pre></div></div> <p><a href="rebalance/index.html">Read more about this command →</a></p> <h3 id="reconfigure"><a href="reconfigure/index.html">reconfigure</a></h3> <pre class="command-syntax" data-language="java">table.reconfigure() → object
database.reconfigure() → object
</pre> <p>Reconfigure a table’s sharding and replication. Pass the following options using <a href="optarg/index.html">optArg</a>:</p> <p><strong>Example:</strong> Reconfigure a table.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("superheroes").reconfigure().optArg("shards", 2).optArg("replicas", 1).run(conn);
</pre></div></div> <p><a href="reconfigure/index.html">Read more about this command →</a></p> <h3 id="status"><a href="status/index.html">status</a></h3> <pre class="command-syntax" data-language="java">table.status() → selection&lt;object&gt;
</pre> <p>Return the status of a table.</p> <p><strong>Example:</strong> Get a table’s status.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("superheroes").status().run(conn);
</pre></div></div> <p><a href="status/index.html">Read more about this command →</a></p> <h3 id="wait"><a href="wait/index.html">wait</a></h3> <pre class="command-syntax" data-language="java">table.wait() → object
database.wait() → object
r.wait(table | database) → object
</pre> <p>Wait for a table or all the tables in a database to be ready. A table may be temporarily unavailable after creation, rebalancing or reconfiguring. The <code class="language-plaintext highlighter-rouge">wait</code> command blocks until the given table (or database) is fully up to date.</p> <p><strong>Example:</strong> Wait on a table to be ready.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">r.table("superheroes").wait().run(conn);
</pre></div></div> <p>Result:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight" data-language="java">{ "ready": 1 }
</pre></div></div> <p><a href="wait/index.html">Read more about this command →</a></p> </section> </div> </section> <section class="api-footer"> <h3>Improve this doc</h3> <p>Help us improve this document.</p> <ul> <li class="github">
<strong>Help us</strong> improve the docs <a href="https://github.com/rethinkdb/docs/blob/master/api/java/index.md">by editing</a> this document</li> <li class="github">
<strong>Post an issue</strong> on the docs <a href="https://github.com/rethinkdb/docs/issues">issue tracker</a> on GitHub</li> </ul> <h3>Get more help</h3> <p>We always welcome suggestions on how to improve our documentation, or specific ReQL questions.</p> <ul> <li class="stack-overflow">
<strong>Ask a question</strong> on <a href="http://stackoverflow.com/questions/tagged/rethinkdb">Stack Overflow</a>
</li> <li class="slack">
<strong>Chat with us</strong> and our community on <a href="https://join.slack.com/t/rethinkdb/shared_invite/enQtNzAxOTUzNTk1NzMzLWY5ZTA0OTNmMWJiOWFmOGVhNTUxZjQzODQyZjIzNjgzZjdjZDFjNDg1NDY3MjFhYmNhOTY1MDVkNDgzMWZiZWM">Slack</a>
</li> <li class="irc">
<strong>Talk to the team</strong> on <a href="irc://freenode.net/.html#rethinkdb">#rethinkdb@freenode.net</a> — via <a href="http://webchat.freenode.net/?channels=#rethinkdb">Webchat</a>
</li> <li class="github">
<strong>Post an issue</strong> on our <a href="https://github.com/rethinkdb/rethinkdb/issues">issue tracker</a> on GitHub</li> <li class="twitter">
<strong>Follow</strong> <a href="http://twitter.com/rethinkdb">@rethinkdb</a> on Twitter</li> </ul> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; RethinkDB contributors<br>Licensed under the Creative Commons Attribution-ShareAlike 3.0 Unported License.<br>
    <a href="https://rethinkdb.com/api/java/" class="_attribution-link">https://rethinkdb.com/api/java/</a>
  </p>
</div>
