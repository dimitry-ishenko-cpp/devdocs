<header><h1>AudioContext: createMediaStreamTrackSource() method</h1></header><div class="section-content">
<p> The <code>createMediaStreamTrackSource()</code> method of the <a href="../audiocontext.html"><code>AudioContext</code></a> interface creates and returns a <a href="../mediastreamtrackaudiosourcenode.html"><code>MediaStreamTrackAudioSourceNode</code></a> which represents an audio source whose data comes from the specified <a href="../mediastreamtrack.html"><code>MediaStreamTrack</code></a>. </p> <p> This differs from <a href="createmediastreamsource.html"><code>createMediaStreamSource()</code></a>, which creates a <a href="../mediastreamaudiosourcenode.html"><code>MediaStreamAudioSourceNode</code></a> whose audio comes from the audio track in a specified <a href="../mediastream.html"><code>MediaStream</code></a> whose <a href="../mediastreamtrack/id.html"><code>id</code></a> is first, lexicographically (alphabetically). </p>
</div>
<h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="QWuD4zB/pq6crZdpLr+ImTrB+hBbZCHgBpIqTAfZdRI=" data-language="js"><span class="token function">createMediaStreamTrackSource</span><span class="token punctuation">(</span>track<span class="token punctuation">)</span>
</pre>
</div></div>
<h3 id="parameters">Parameters</h3>
<div class="section-content"><dl> <dt id="track"><a href="#track"><code>track</code></a></dt> <dd> <p> The <a href="../mediastreamtrack.html"><code>MediaStreamTrack</code></a> to use as the source of all audio data for the new node. </p> </dd> </dl></div>
<h3 id="return_value">Return value</h3>
<div class="section-content"><p> A <a href="../mediastreamtrackaudiosourcenode.html"><code>MediaStreamTrackAudioSourceNode</code></a> object which acts as a source for audio data found in the specified audio track. </p></div>
<h2 id="examples">Examples</h2>
<div class="section-content">
<p> In this example, <a href="../mediadevices/getusermedia.html"><code>getUserMedia()</code></a> is used to request access to the user's microphone. Once that access is attained, an audio context is established and a <a href="../mediastreamtrackaudiosourcenode.html"><code>MediaStreamTrackAudioSourceNode</code></a> is created using <code>createMediaStreamTrackSource()</code>, taking its audio from the first audio track in the stream returned by <code>getUserMedia()</code>. </p> <p> Then a <a href="../biquadfilternode.html"><code>BiquadFilterNode</code></a> is created using <a href="../baseaudiocontext/createbiquadfilter.html"><code>createBiquadFilter()</code></a>, and it's configured as desired to perform a lowshelf filter on the audio coming from the source. The output from the microphone is then routed into the new biquad filter, and the filter's output is in turn routed to the audio context's <a href="../baseaudiocontext/destination.html"><code>destination</code></a>. </p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="VjeYbJXQlM/jWj/kNM/sgVzuqBh0g5moL4Jn9e5W74o=" data-language="js">navigator<span class="token punctuation">.</span>mediaDevices
  <span class="token punctuation">.</span><span class="token function">getUserMedia</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">audio</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">video</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">stream</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    audio<span class="token punctuation">.</span>srcObject <span class="token operator">=</span> stream<span class="token punctuation">;</span>
    audio<span class="token punctuation">.</span><span class="token function-variable function">onloadedmetadata</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      audio<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      audio<span class="token punctuation">.</span>muted <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> audioCtx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AudioContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> audioTracks <span class="token operator">=</span> stream<span class="token punctuation">.</span><span class="token function">getAudioTracks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> source <span class="token operator">=</span> audioCtx<span class="token punctuation">.</span><span class="token function">createMediaStreamTrackSource</span><span class="token punctuation">(</span>audioTracks<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> biquadFilter <span class="token operator">=</span> audioCtx<span class="token punctuation">.</span><span class="token function">createBiquadFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    biquadFilter<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"lowshelf"</span><span class="token punctuation">;</span>
    biquadFilter<span class="token punctuation">.</span>frequency<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">3000</span><span class="token punctuation">;</span>
    biquadFilter<span class="token punctuation">.</span>gain<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>

    source<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>biquadFilter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    biquadFilter<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>audioCtx<span class="token punctuation">.</span>destination<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Handle getUserMedia() error</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://webaudio.github.io/web-audio-api/#dom-audiocontext-createmediastreamtracksource">Web Audio API <br><small># dom-audiocontext-createmediastreamtracksource</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>createMediaStreamTrackSource</code></th>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes"><details><summary>68</summary>Firefox 68 implements the updated standard's definition of the "first" audio track; now the first track is the one whose ID comes first lexicographically.</details></td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes"><details><summary>68</summary>Firefox 68 implements the updated standard's definition of the "first" audio track; now the first track is the one whose ID comes first lexicographically.</details></td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
</tr></tbody>
</table></div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li>Web Audio API</li> <li><a href="../web_audio_api/using_web_audio_api.html">Using the Web Audio API</a></li> <li><a href="../mediastreamtrackaudiosourcenode.html"><code>MediaStreamTrackAudioSourceNode</code></a></li> </ul></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioContext/createMediaStreamTrackSource" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/AudioContext/createMediaStreamTrackSource</a>
  </p>
</div>
