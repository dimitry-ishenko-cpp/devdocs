<header><h1>ViewTransition: ready property</h1></header><div class="section-content">
<div class="notecard experimental" id="sect1"><p><strong>Experimental:</strong> <strong>This is an <a href="https://developer.mozilla.org/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental">experimental technology</a></strong><br>Check the <a href="#browser_compatibility">Browser compatibility table</a> carefully before using this in production.</p></div> <p> The <code>ready</code> read-only property of the <a href="../viewtransition.html"><code>ViewTransition</code></a> interface is a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that fulfills once the pseudo-element tree is created and the transition animation is about to start. </p> <p><code>ready</code> will reject if the transition cannot begin. This can be due to misconfiguration, for example duplicate <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/view-transition-name"><code>view-transition-name</code></a>s, or if the callback passed to <a href="../document/startviewtransition.html"><code>Document.startViewTransition()</code></a> throws or returns a promise that rejects.</p>
</div>
<h2 id="value">Value</h2>
<div class="section-content"><p>A promise.</p></div>
<h2 id="examples">Examples</h2>
<div class="section-content">
<p>In the following example, <code>ready</code> is used to trigger a custom circular reveal view transition emanating from the position of the user's cursor on click, with animation provided by the <a href="../web_animations_api.html">Web Animations API</a>.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="dhXZEOMZQ4W7hU6TIoqtFDObz0OyDD0Zo0Jvf34Ario=" data-language="js"><span class="token comment">// Store the last click event</span>
<span class="token keyword">let</span> lastClick<span class="token punctuation">;</span>
<span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>lastClick <span class="token operator">=</span> event<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">spaNavigate</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Fallback for browsers that don’t support this API:</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>document<span class="token punctuation">.</span>startViewTransition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">updateTheDOMSomehow</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Get the click position, or fallback to the middle of the screen</span>
  <span class="token keyword">const</span> x <span class="token operator">=</span> lastClick<span class="token operator">?.</span>clientX <span class="token operator">??</span> innerWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> y <span class="token operator">=</span> lastClick<span class="token operator">?.</span>clientY <span class="token operator">??</span> innerHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token comment">// Get the distance to the furthest corner</span>
  <span class="token keyword">const</span> endRadius <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">hypot</span><span class="token punctuation">(</span>
    Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> innerWidth <span class="token operator">-</span> x<span class="token punctuation">)</span><span class="token punctuation">,</span>
    Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> innerHeight <span class="token operator">-</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Create a transition:</span>
  <span class="token keyword">const</span> transition <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">startViewTransition</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">updateTheDOMSomehow</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Wait for the pseudo-elements to be created:</span>
  transition<span class="token punctuation">.</span>ready<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Animate the root’s new view</span>
    document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">clipPath</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">circle(0 at </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>y<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">circle(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>endRadius<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px at </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>y<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
        <span class="token literal-property property">easing</span><span class="token operator">:</span> <span class="token string">"ease-in"</span><span class="token punctuation">,</span>
        <span class="token comment">// Specify which pseudo-element to animate</span>
        <span class="token literal-property property">pseudoElement</span><span class="token operator">:</span> <span class="token string">"::view-transition-new(root)"</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div> <p>This animation also requires the following CSS, to turn off the default CSS animation and stop the old and new view states from blending in any way (the new state "wipes" right over the top of the old state, rather than transitioning in):</p> <div class="code-example">
<p class="example-header"><span class="language-name">css</span></p>
<pre data-signature="wsD842ryyKAk4W85Ye5B8yehOImo0pMKntVxI5FryCE=" data-language="css"><span class="token selector">::view-transition-image-pair(root)</span> <span class="token punctuation">{</span>
  <span class="token property">isolation</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">::view-transition-old(root),
::view-transition-new(root)</span> <span class="token punctuation">{</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">mix-blend-mode</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://drafts.csswg.org/css-view-transitions/#dom-viewtransition-ready">CSS View Transitions Module Level 1 <br><small># dom-viewtransition-ready</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>ready</code></th>
<td class="bc-supports-yes">111</td>
<td class="bc-supports-yes">111</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">111</td>
<td class="bc-supports-yes">111</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">22.0</td>
</tr></tbody>
</table></div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="https://developer.chrome.com/docs/web-platform/view-transitions/" target="_blank">Smooth and simple transitions with the View Transitions API</a></li> </ul></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/ViewTransition/ready" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/ViewTransition/ready</a>
  </p>
</div>
