<header><h1>IDBDatabase: transaction() method</h1></header><div class="section-content">
<div class="notecard note" id="sect1"> <p><strong>Note:</strong> This feature is available in <a href="../web_workers_api.html">Web Workers</a>.</p> </div> <p>The <code>transaction</code> method of the <a href="../idbdatabase.html"><code>IDBDatabase</code></a> interface immediately returns a transaction object (<a href="../idbtransaction.html"><code>IDBTransaction</code></a>) containing the <a href="../idbtransaction/objectstore.html"><code>IDBTransaction.objectStore</code></a> method, which you can use to access your object store.</p>
</div>
<h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="66DJ5VHYKR5X7UNcX0P5aTqRXhHf0V9AQbLFfq2D6wg=" data-language="js"><span class="token function">transaction</span><span class="token punctuation">(</span>storeNames<span class="token punctuation">)</span>
<span class="token function">transaction</span><span class="token punctuation">(</span>storeNames<span class="token punctuation">,</span> mode<span class="token punctuation">)</span>
<span class="token function">transaction</span><span class="token punctuation">(</span>storeNames<span class="token punctuation">,</span> mode<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</pre>
</div></div>
<h3 id="parameters">Parameters</h3>
<div class="section-content"><dl> <dt id="storenames"><a href="#storenames"><code>storeNames</code></a></dt> <dd> <p> The names of object stores that are in the scope of the new transaction, declared as an array of strings. Specify only the object stores that you need to access. If you need to access only one object store, you can specify its name as a string. Therefore the following lines are equivalent: </p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="JeysDaBnHumOt0KOtneJ9VVbI06pt5tO/AuTD/sA2hQ=" data-language="js">db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"my-store-name"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token string">"my-store-name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p>If you need to access all object stores in the database, you can use the property <a href="objectstorenames.html"><code>IDBDatabase.objectStoreNames</code></a>:</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="3/w19EJt7m0/ryq86p+Xl1lsFl6AAVsfkhD/TnOPmko=" data-language="js"><span class="token keyword">const</span> transaction <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span>db<span class="token punctuation">.</span>objectStoreNames<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p>Passing an empty array will throw an exception.</p> </dd> <dt id="mode">
<a href="#mode"><code>mode</code></a> <span class="badge inline optional">Optional</span>
</dt> <dd> <p> The types of access that can be performed in the transaction. Transactions are opened in one of three modes: </p> <dl> <dt id="readonly"><a href="#readonly"><code>readonly</code></a></dt> <dd> <p>Open a transaction for reading from an object store. This is the default mode.</p> </dd> <dt id="readwrite"><a href="#readwrite"><code>readwrite</code></a></dt> <dd> <p> Open a transaction for both reading and writing from an object store. This should only be used if need to write into the database. </p> </dd> <dt id="readwriteflush">
<a href="#readwriteflush"><code>readwriteflush</code></a> <abbr class="icon icon-nonstandard" title="Non-standard. Check cross-browser support before using."> <span class="visually-hidden">Non-standard</span> </abbr> <abbr class="icon icon-experimental" title="Experimental. Expect behavior to change in the future."> <span class="visually-hidden">Experimental</span> </abbr>
</dt> <dd> <p> Force a transaction to flush to disk before delivering the <code>complete</code> event. This might be used for storing critical data that cannot be recomputed later. </p> </dd> </dl> </dd> <dt id="options">
<a href="#options"><code>options</code></a> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>Object defining additional options, including:</p> <dl> <dt id="durability"><a href="#durability"><code>durability</code></a></dt> <dd> <p>One of the three string-literal values below:</p> <dl> <dt id="strict"><a href="#strict"><code>"strict"</code></a></dt> <dd> <p> The user agent may consider that the transaction has successfully committed only after verifying that all outstanding changes have been successfully written to a persistent storage medium. This is recommended where the risk of data loss outweighs the impact of its use on performance and power (compared to <code>relaxed</code>). </p> </dd> <dt id="relaxed"><a href="#relaxed"><code>"relaxed"</code></a></dt> <dd> <p> The user agent may consider that the transaction has successfully committed as soon as all outstanding changes have been written to the operating system, without subsequent verification. This offers better performance than <code>strict</code>, and is recommended for ephemeral data such as caches or quickly changing records. </p> </dd> <dt id="default"><a href="#default"><code>"default"</code></a></dt> <dd> <p> The user agent should use its default durability behavior for the storage bucket. This is the default for transactions if not otherwise specified. </p> </dd> </dl> </dd> </dl> </dd> </dl></div>
<h3 id="return_value">Return value</h3>
<div class="section-content"><p>An <a href="../idbtransaction.html"><code>IDBTransaction</code></a> object.</p></div>
<h3 id="exceptions">Exceptions</h3>
<div class="section-content"><dl> <dt id="invalidstateerror">
<a href="#invalidstateerror"><code>InvalidStateError</code></a> <a href="../domexception.html"><code>DOMException</code></a>
</dt> <dd> <p>Thrown if the <a href="close.html"><code>close()</code></a> method has previously been called on this <a href="../idbdatabase.html"><code>IDBDatabase</code></a> instance.</p> </dd> <dt id="notfounderror">
<a href="#notfounderror"><code>NotFoundError</code></a> <a href="../domexception.html"><code>DOMException</code></a>
</dt> <dd> <p>Thrown if an object store specified in the 'storeNames' parameter has been deleted or removed.</p> </dd> <dt id="typeerror"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError"><code>TypeError</code></a></dt> <dd> <p>Thrown if the value for the <code>mode</code> parameter is invalid.</p> </dd> <dt id="invalidaccesserror">
<a href="#invalidaccesserror"><code>InvalidAccessError</code></a> <a href="../domexception.html"><code>DOMException</code></a>
</dt> <dd> <p>Thrown if the function was called with an empty list of store names.</p> </dd> </dl></div>
<h2 id="examples">Examples</h2>
<div class="section-content">
<p> In this example we open a database connection, then use transaction() to open a transaction on the database. For a complete example, see our <a href="https://github.com/mdn/dom-examples/tree/main/to-do-notifications" target="_blank">To-do Notifications</a> app (<a href="https://mdn.github.io/dom-examples/to-do-notifications/" target="_blank">view example live</a>). </p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="A115j8lSGb4plZLY4lZDWtlZu+FBV+q7gX0kNJMxmJY=" data-language="js"><span class="token keyword">let</span> db<span class="token punctuation">;</span>

<span class="token comment">// Let us open our database</span>
<span class="token keyword">const</span> DBOpenRequest <span class="token operator">=</span> window<span class="token punctuation">.</span>indexedDB<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"toDoList"</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

DBOpenRequest<span class="token punctuation">.</span><span class="token function-variable function">onsuccess</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  note<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"li"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent <span class="token operator">=</span>
    <span class="token string">"Database initialized."</span><span class="token punctuation">;</span>

  <span class="token comment">// store the result of opening the database in the db variable.</span>
  <span class="token comment">// This is used a lot below</span>
  db <span class="token operator">=</span> DBOpenRequest<span class="token punctuation">.</span>result<span class="token punctuation">;</span>

  <span class="token comment">// Run the displayData() function to populate the task list with</span>
  <span class="token comment">// all the to-do list data already in the IDB</span>
  <span class="token function">displayData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// open a read/write db transaction, ready for adding the data</span>
<span class="token keyword">const</span> transaction <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"toDoList"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"readwrite"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// report on the success of opening the transaction</span>
transaction<span class="token punctuation">.</span><span class="token function-variable function">oncomplete</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  note<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"li"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent <span class="token operator">=</span>
    <span class="token string">"Transaction completed: database modification finished."</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

transaction<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  note<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"li"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent <span class="token operator">=</span>
    <span class="token string">"Transaction not opened due to error. Duplicate items not allowed."</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// you would then go on to do something to this database</span>
<span class="token comment">// via an object store</span>
<span class="token keyword">const</span> objectStore <span class="token operator">=</span> transaction<span class="token punctuation">.</span><span class="token function">objectStore</span><span class="token punctuation">(</span><span class="token string">"toDoList"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// etc.</span>
</pre>
</div>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="#">Indexed Database API 3.0 <br><small># ref-for-dom-idbdatabase-transaction③</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Opera</th>
<th>Safari</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
<th>WebView Android</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>transaction</code></th>
<td class="bc-supports-yes">23</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">10</td>
<td class="bc-supports-yes">15</td>
<td class="bc-supports-yes">8</td>
<td class="bc-supports-yes">25</td>
<td class="bc-supports-yes">22</td>
<td class="bc-supports-yes">14</td>
<td class="bc-supports-yes">8</td>
<td class="bc-supports-yes">1.5</td>
<td class="bc-supports-yes">4.4</td>
</tr>
<tr>
<th><code>option_durability_parameter_readwriteflush</code></th>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">40</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
</tr>
</tbody>
</table></div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="../indexeddb_api/using_indexeddb.html">Using IndexedDB</a></li> <li>Starting transactions: <a href="../idbdatabase.html"><code>IDBDatabase</code></a>
</li> <li>Using transactions: <a href="../idbtransaction.html"><code>IDBTransaction</code></a>
</li> <li>Setting a range of keys: <a href="../idbkeyrange.html"><code>IDBKeyRange</code></a>
</li> <li>Retrieving and making changes to your data: <a href="../idbobjectstore.html"><code>IDBObjectStore</code></a>
</li> <li>Using cursors: <a href="../idbcursor.html"><code>IDBCursor</code></a>
</li> <li>Reference example: <a href="https://github.com/mdn/dom-examples/tree/main/to-do-notifications" target="_blank">To-do Notifications</a> (<a href="https://mdn.github.io/dom-examples/to-do-notifications/" target="_blank">View the example live</a>).</li> </ul></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/IDBDatabase/transaction" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/IDBDatabase/transaction</a>
  </p>
</div>
