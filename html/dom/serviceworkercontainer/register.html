<header><h1>ServiceWorkerContainer: register() method</h1></header><div class="section-content">
<p> The <code>register()</code> method of the <a href="../serviceworkercontainer.html"><code>ServiceWorkerContainer</code></a> interface creates or updates a <a href="../serviceworkerregistration.html"><code>ServiceWorkerRegistration</code></a> for the given <code>scriptURL</code>. </p> <p> If successful, a service worker registration ties the provided script URL to a <em>scope</em>, which is subsequently used for navigation matching. You can call this method unconditionally from the controlled page. I.e., you don't need to first check whether there's an active registration. </p> <p> There is frequent confusion surrounding the meaning and use of <em>scope</em>. Since a service worker can't have a scope broader than its own location, only use the <code>scope</code> option when you need a scope that is narrower than the default. </p>
</div>
<h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="UkRsXMdcoNIwYzRdanjW82m9/etaW69yBt/QeCCF5EQ=" data-language="js"><span class="token function">register</span><span class="token punctuation">(</span>scriptURL<span class="token punctuation">)</span>
<span class="token function">register</span><span class="token punctuation">(</span>scriptURL<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</pre>
</div></div>
<h3 id="parameters">Parameters</h3>
<div class="section-content"><dl> <dt id="scripturl"><a href="#scripturl"><code>scriptURL</code></a></dt> <dd> <p> The URL of the service worker script. The registered service worker file needs to have a valid <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types#textjavascript">JavaScript MIME type</a>. </p> </dd> <dt id="options">
<a href="#options"><code>options</code></a> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An object containing registration options. Currently available options are:</p> <dl> <dt id="scope"><a href="#scope"><code>scope</code></a></dt> <dd> <p> A string representing a URL that defines a service worker's registration scope; that is, what range of URLs a service worker can control. This is usually a relative URL. It is relative to the base URL of the application. By default, the <code>scope</code> value for a service worker registration is set to the directory where the service worker script is located. See the <a href="#examples">Examples</a> section for more information on how it works. </p> </dd> <dt id="type"><a href="#type"><code>type</code></a></dt> <dd> <p> A string specifying the type of worker to create. Valid values are: </p> <dl> <dt id="classic"><a href="#classic"><code>'classic'</code></a></dt> <dd> <p>The loaded service worker is in a standard script. This is the default.</p> </dd> <dt id="module"><a href="#module"><code>'module'</code></a></dt> <dd> <p> The loaded service worker is in an <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules">ES module</a> and the import statement is available on worker contexts. </p> </dd> </dl> </dd> <dt id="updateviacache"><a href="#updateviacache"><code>updateViaCache</code></a></dt> <dd> <p>A string indicating how the HTTP cache is used for service worker scripts resources during updates. Note: This only refers to the service worker script and its imports, not other resources fetched by these scripts.</p> <dl> <dt id="all"><a href="#all"><code>'all'</code></a></dt> <dd> <p>The HTTP cache will be queried for the main script, and all imported scripts. If no fresh entry is found in the HTTP cache, then the scripts are fetched from the network.</p> </dd> <dt id="imports"><a href="#imports"><code>'imports'</code></a></dt> <dd> <p>The HTTP cache will be queried for imports, but the main script will always be updated from the network. If no fresh entry is found in the HTTP cache for the imports, they're fetched from the network.</p> </dd> <dt id="none"><a href="#none"><code>'none'</code></a></dt> <dd> <p>The HTTP cache will not be used for the main script or its imports. All service worker script resources will be updated from the network.</p> </dd> </dl> </dd> </dl> </dd> </dl></div>
<h3 id="return_value">Return value</h3>
<div class="section-content"><p> A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that resolves with a <a href="../serviceworkerregistration.html"><code>ServiceWorkerRegistration</code></a> object. </p></div>
<h2 id="examples">Examples</h2>
<div class="section-content">
<p> The examples described here should be taken together to get a better understanding of how service workers scope applies to a page. </p> <p> The following example uses the default value of <code>scope</code> (by omitting it). The service worker code in this case, if included in <code>example.com/index.html</code>, will control <code>example.com/index.html</code>, as well as pages underneath it, like <code>example.com/product/description.html</code>. </p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="HBc5Q5JrLlDGj11jAlihHcB4Fv1ZutsFv3q41+TGEag=" data-language="js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"serviceWorker"</span> <span class="token keyword">in</span> navigator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Register a service worker hosted at the root of the</span>
  <span class="token comment">// site using the default scope.</span>
  navigator<span class="token punctuation">.</span>serviceWorker<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">"/sw.js"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">registration</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Service worker registration succeeded:"</span><span class="token punctuation">,</span> registration<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Service worker registration failed: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Service workers are not supported."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div> <p> The following code, if included in <code>example.com/index.html</code>, at the root of a site, would apply to exactly the same pages as the example above. Remember the scope, when included, uses the page's location as its base. </p> <p> Alternatively, if this code were included in a page at <code>example.com/product/description.html</code>, with the JavaScript file residing at <code>example.com/product/sw.js</code>, then the service worker would only apply to resources under <code>example.com/product</code>. </p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="iAQ9MJyM+s4Nbkj75ZU82ch8WvOQVFmaV346Jn52CnY=" data-language="js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"serviceWorker"</span> <span class="token keyword">in</span> navigator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// declaring scope manually</span>
  navigator<span class="token punctuation">.</span>serviceWorker<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">"/sw.js"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">scope</span><span class="token operator">:</span> <span class="token string">"./"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">registration</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Service worker registration succeeded:"</span><span class="token punctuation">,</span> registration<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Service worker registration failed: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Service workers are not supported."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div> <p> There is frequent confusion surrounding the meaning and use of <em>scope</em>. Since a service worker can't have a scope broader than its own location, only use the <code>scope</code> option when you need a scope that is narrower than the default. </p> <p> The following code, if included in <code>example.com/index.html</code>, at the root of a site, would only apply to resources under <code>example.com/product</code>. </p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="t7+V16GkF6Z0wIGbO2w67v7kQuEDRTj8urqPEXPjQow=" data-language="js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"serviceWorker"</span> <span class="token keyword">in</span> navigator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// declaring scope manually</span>
  navigator<span class="token punctuation">.</span>serviceWorker<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">"/sw.js"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">scope</span><span class="token operator">:</span> <span class="token string">"/product/"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">registration</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Service worker registration succeeded:"</span><span class="token punctuation">,</span> registration<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Service worker registration failed: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Service workers are not supported."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div> <p> However, servers can remove this restriction by setting a <a href="https://w3c.github.io/ServiceWorker/#service-worker-allowed" target="_blank">Service-Worker-Allowed</a> header on the service worker script, and then you can specify a max scope for that service worker above the service worker's location. </p>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://w3c.github.io/ServiceWorker/#navigator-service-worker-register">Service Workers <br><small># navigator-service-worker-register</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>register</code></th>
<td class="bc-supports-yes">40</td>
<td class="bc-supports-yes">17</td>
<td class="bc-supports-yes">44</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">27</td>
<td class="bc-supports-yes">11.1</td>
<td class="bc-supports-yes">40</td>
<td class="bc-supports-yes">40</td>
<td class="bc-supports-yes">44</td>
<td class="bc-supports-yes">27</td>
<td class="bc-supports-yes">11.3</td>
<td class="bc-supports-yes">4.0</td>
</tr></tbody>
</table></div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="../serviceworkerregistration/unregister.html">ServiceWorkerRegistration: <code>unregister()</code> method</a></li> <li><a href="../service_worker_api.html">Service worker API</a></li> <li><a href="../service_worker_api/using_service_workers.html">Using service workers</a></li> </ul></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register</a>
  </p>
</div>
