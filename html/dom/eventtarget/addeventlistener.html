<header><h1>EventTarget: addEventListener() method</h1></header><div class="section-content">
<div class="notecard note" id="sect1"> <p><strong>Note:</strong> This feature is available in <a href="../web_workers_api.html">Web Workers</a>.</p> </div> <p> The <code>addEventListener()</code> method of the <a href="../eventtarget.html"><code>EventTarget</code></a> interface sets up a function that will be called whenever the specified event is delivered to the target. </p> <p> Common targets are <a href="../element.html"><code>Element</code></a>, or its children, <a href="../document.html"><code>Document</code></a>, and <a href="../window.html"><code>Window</code></a>, but the target may be any object that supports events (such as <a href="../idbrequest.html"><code>IDBRequest</code></a>). </p> <div class="notecard note" id="sect2"> <p><strong>Note:</strong> The <code>addEventListener()</code> method is the <em>recommended</em> way to register an event listener. The benefits are as follows:</p> <ul> <li> It allows adding more than one handler for an event. This is particularly useful for libraries, JavaScript modules, or any other kind of code that needs to work well with other libraries or extensions. </li> <li>In contrast to using an <code>onXYZ</code> property, it gives you finer-grained control of the phase when the listener is activated (capturing vs. bubbling).</li> <li>It works on any event target, not just HTML or SVG elements.</li> </ul> </div> <p> The method <code>addEventListener()</code> works by adding a function, or an object that implements a <code>handleEvent()</code> function, to the list of event listeners for the specified event type on the <a href="../eventtarget.html"><code>EventTarget</code></a> on which it's called. If the function or object is already in the list of event listeners for this target, the function or object is not added a second time. </p> <div class="notecard note" id="sect3"> <p><strong>Note:</strong> If a particular anonymous function is in the list of event listeners registered for a certain target, and then later in the code, an identical anonymous function is given in an <code>addEventListener</code> call, the second function will <em>also</em> be added to the list of event listeners for that target.</p> <p> Indeed, anonymous functions are not identical even if defined using the <em>same</em> unchanging source-code called repeatedly, <strong>even if in a loop</strong>. </p> <p> Repeatedly defining the same unnamed function in such cases can be problematic. (See <a href="#memory_issues">Memory issues</a>, below.) </p> </div> <p> If an event listener is added to an <a href="../eventtarget.html"><code>EventTarget</code></a> from inside another listener — that is, during the processing of the event — that event will not trigger the new listener. However, the new listener may be triggered during a later stage of event flow, such as during the bubbling phase. </p>
</div>
<h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="QXs0jNXVxOgZnr8NjkQagDCH0I1F3l+DY5nFcdBXJd8=" data-language="js"><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> listener<span class="token punctuation">)</span>
<span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> listener<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
<span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> listener<span class="token punctuation">,</span> useCapture<span class="token punctuation">)</span>
</pre>
</div></div>
<h3 id="parameters">Parameters</h3>
<div class="section-content"><dl> <dt id="type"><a href="#type"><code>type</code></a></dt> <dd> <p>A case-sensitive string representing the <a href="https://developer.mozilla.org/en-US/docs/Web/Events">event type</a> to listen for.</p> </dd> <dt id="listener"><a href="#listener"><code>listener</code></a></dt> <dd> <p> The object that receives a notification (an object that implements the <a href="../event.html"><code>Event</code></a> interface) when an event of the specified type occurs. This must be <code>null</code>, an object with a <code>handleEvent()</code> method, or a JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Functions">function</a>. See <a href="#the_event_listener_callback">The event listener callback</a> for details on the callback itself. </p> </dd> <dt id="options">
<a href="#options"><code>options</code></a> <span class="badge inline optional">Optional</span>
</dt> <dd> <p> An object that specifies characteristics about the event listener. The available options are: </p> <dl> <dt id="capture">
<a href="#capture"><code>capture</code></a> <span class="badge inline optional">Optional</span>
</dt> <dd> <p> A boolean value indicating that events of this type will be dispatched to the registered <code>listener</code> before being dispatched to any <code>EventTarget</code> beneath it in the DOM tree. If not specified, defaults to <code>false</code>. </p> </dd> <dt id="once">
<a href="#once"><code>once</code></a> <span class="badge inline optional">Optional</span>
</dt> <dd> <p> A boolean value indicating that the <code>listener</code> should be invoked at most once after being added. If <code>true</code>, the <code>listener</code> would be automatically removed when invoked. If not specified, defaults to <code>false</code>. </p> </dd> <dt id="passive">
<a href="#passive"><code>passive</code></a> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A boolean value that, if <code>true</code>, indicates that the function specified by <code>listener</code> will never call <a href="../event/preventdefault.html"><code>preventDefault()</code></a>. If a passive listener does call <code>preventDefault()</code>, the user agent will do nothing other than generate a console warning.</p> <p>If this option is not specified it defaults to <code>false</code> – except that in browsers other than Safari, it defaults to <code>true</code> for <a href="../element/wheel_event.html"><code>wheel</code></a>, <a href="../element/mousewheel_event.html"><code>mousewheel</code></a>, <a href="../element/touchstart_event.html"><code>touchstart</code></a> and <a href="../element/touchmove_event.html"><code>touchmove</code></a> events. See <a href="#using_passive_listeners">Using passive listeners</a> to learn more.</p> </dd> <dt id="signal">
<a href="#signal"><code>signal</code></a> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An <a href="../abortsignal.html"><code>AbortSignal</code></a>. The listener will be removed when the given <code>AbortSignal</code> object's <a href="../abortcontroller/abort.html"><code>abort()</code></a> method is called. If not specified, no <code>AbortSignal</code> is associated with the listener.</p> </dd> </dl> </dd> <dt id="usecapture">
<a href="#usecapture"><code>useCapture</code></a> <span class="badge inline optional">Optional</span>
</dt> <dd> <p> A boolean value indicating whether events of this type will be dispatched to the registered <code>listener</code> <em>before</em> being dispatched to any <code>EventTarget</code> beneath it in the DOM tree. Events that are bubbling upward through the tree will not trigger a listener designated to use capture. Event bubbling and capturing are two ways of propagating events that occur in an element that is nested within another element, when both elements have registered a handle for that event. The event propagation mode determines the order in which elements receive the event. See <a href="https://www.w3.org/TR/DOM-Level-3-Events/#event-flow" target="_blank">DOM Level 3 Events</a> and <a href="https://www.quirksmode.org/js/events_order.html#link4" target="_blank">JavaScript Event order</a> for a detailed explanation. If not specified, <code>useCapture</code> defaults to <code>false</code>. </p> <div class="notecard note" id="sect4"> <p> <strong>Note:</strong> For event listeners attached to the event target, the event is in the target phase, rather than the capturing and bubbling phases. Event listeners in the <em>capturing</em> phase are called before event listeners in any non-capturing phases. </p> </div> </dd> <dt id="wantsuntrusted">
<a href="#wantsuntrusted"><code>wantsUntrusted</code></a> <span class="badge inline optional">Optional</span> <abbr class="icon icon-nonstandard" title="Non-standard. Check cross-browser support before using."> <span class="visually-hidden">Non-standard</span> </abbr>
</dt> <dd> <p> A Firefox (Gecko)-specific parameter. If <code>true</code>, the listener receives synthetic events dispatched by web content (the default is <code>false</code> for browser <a href="https://developer.mozilla.org/en-US/docs/Glossary/Chrome">chrome</a> and <code>true</code> for regular web pages). This parameter is useful for code found in add-ons, as well as the browser itself. </p> </dd> </dl></div>
<h3 id="return_value">Return value</h3>
<div class="section-content"><p>None (<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a>).</p></div>
<h2 id="usage_notes">Usage notes</h2>

<h3 id="the_event_listener_callback">The event listener callback</h3>
<div class="section-content">
<p> The event listener can be specified as either a callback function or an object whose <code>handleEvent()</code> method serves as the callback function. </p> <p> The callback function itself has the same parameters and return value as the <code>handleEvent()</code> method; that is, the callback accepts a single parameter: an object based on <a href="../event.html"><code>Event</code></a> describing the event that has occurred, and it returns nothing. </p> <p> For example, an event handler callback that can be used to handle both <a href="../element/fullscreenchange_event.html"><code>fullscreenchange</code></a> and <a href="../element/fullscreenerror_event.html"><code>fullscreenerror</code></a> might look like this: </p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="NW5p5bdDuOtQb005S4mPfpvbmSQdkxx2ZVFCuSKLFM0=" data-language="js"><span class="token keyword">function</span> <span class="token function">handleEvent</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">"fullscreenchange"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* handle a full screen toggle */</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">/* handle a full screen toggle error */</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
</div>
</div>
<h3 id="safely_detecting_option_support">Safely detecting option support</h3>
<div class="section-content">
<p> In older versions of the DOM specification, the third parameter of <code>addEventListener()</code> was a Boolean value indicating whether or not to use capture. Over time, it became clear that more options were needed. Rather than adding more parameters to the function (complicating things enormously when dealing with optional values), the third parameter was changed to an object that can contain various properties defining the values of options to configure the process of removing the event listener. </p> <p> Because older browsers (as well as some not-too-old browsers) still assume the third parameter is a Boolean, you need to build your code to handle this scenario intelligently. You can do this by using feature detection for each of the options you're interested in. </p> <p>For example, if you want to check for the <code>passive</code> option:</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="c11OEjSSPJXdEkSWtdaLaNovchIfl4nqK+PSGRjOHnA=" data-language="js"><span class="token keyword">let</span> passiveSupported <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">get</span> <span class="token function">passive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// This function will be called when the browser</span>
      <span class="token comment">// attempts to access the passive property.</span>
      passiveSupported <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
  window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  passiveSupported <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div> <p> This creates an <code>options</code> object with a getter function for the <code>passive</code> property; the getter sets a flag, <code>passiveSupported</code>, to <code>true</code> if it gets called. That means that if the browser checks the value of the <code>passive</code> property on the <code>options</code> object, <code>passiveSupported</code> will be set to <code>true</code>; otherwise, it will remain <code>false</code>. We then call <code>addEventListener()</code> to set up a fake event handler, specifying those options, so that the options will be checked if the browser recognizes an object as the third parameter. Then, we call <a href="removeeventlistener.html"><code>removeEventListener()</code></a> to clean up after ourselves. (Note that <code>handleEvent()</code> is ignored on event listeners that aren't called.) </p> <p> You can check whether any option is supported this way. Just add a getter for that option using code similar to what is shown above. </p> <p> Then, when you want to create an actual event listener that uses the options in question, you can do something like this: </p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="/XRx+CFHpmgOqiH5Qst54W/uBkmRtKArk7iPU5G1+18=" data-language="js">someElement<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">"mouseup"</span><span class="token punctuation">,</span>
  handleMouseUp<span class="token punctuation">,</span>
  passiveSupported <span class="token operator">?</span> <span class="token punctuation">{</span> <span class="token literal-property property">passive</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p> Here we're adding a listener for the <a href="../element/mouseup_event.html"><code>mouseup</code></a> event on the element <code>someElement</code>. For the third parameter, if <code>passiveSupported</code> is <code>true</code>, we're specifying an <code>options</code> object with <code>passive</code> set to <code>true</code>; otherwise, we know that we need to pass a Boolean, and we pass <code>false</code> as the value of the <code>useCapture</code> parameter. </p> <p> You can learn more in the <a href="https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Cross_browser_testing/Feature_detection">Implementing feature detection</a> documentation and the explainer about <a href="https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md#feature-detection" target="_blank"><code>EventListenerOptions</code></a> from the <a href="https://wicg.github.io/admin/charter.html" target="_blank">Web Incubator Community Group</a>. </p>
</div>
<h3 id="the_value_of_this_within_the_handler">The value of "this" within the handler</h3>
<div class="section-content">
<p> It is often desirable to reference the element on which the event handler was fired, such as when using a generic handler for a set of similar elements. </p> <p> When attaching a handler function to an element using <code>addEventListener()</code>, the value of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this"><code>this</code></a> inside the handler will be a reference to the element. It will be the same as the value of the <code>currentTarget</code> property of the event argument that is passed to the handler. </p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="0xsRUy00s6T+7TWF4GtJeMSs6H9D9r8gMBToR0DLxKA=" data-language="js">my_element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs the className of my_element</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>currentTarget <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs `true`</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p>As a reminder, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions#cannot_be_used_as_methods">arrow functions do not have their own <code>this</code> context</a>.</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="iJX1nhp9Qgc/BWdbvmJ5qM9U3bhh2LG/v8Leskiro14=" data-language="js">my_element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// WARNING: `this` is not `my_element`</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>currentTarget <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// logs `false`</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p>If an event handler (for example, <a href="../element/click_event.html"><code>onclick</code></a>) is specified on an element in the HTML source, the JavaScript code in the attribute value is effectively wrapped in a handler function that binds the value of <code>this</code> in a manner consistent with the <code>addEventListener()</code>; an occurrence of <code>this</code> within the code represents a reference to the element.</p> <div class="code-example">
<div class="example-header"><span class="language-name">html</span></div>
<pre data-signature="A/M/T3CMn86M6VHE2ktSLhpsoNOsq4tSPjTgbC5dA6U=" data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my_table<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- `this` refers to the table; logs 'my_table' --&gt;</span>
  …
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
</pre>
</div> <p> Note that the value of <code>this</code> inside a function, <em>called by</em> the code in the attribute value, behaves as per <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this">standard rules</a>. This is shown in the following example: </p> <div class="code-example">
<div class="example-header"><span class="language-name">html</span></div>
<pre data-signature="y6w0eLB8FiL53/9HZMXO+EUIJg1vOg1mBRh6HIG2tyI=" data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">function</span> <span class="token function">logID</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my_table<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">logID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- when called, `this` will refer to the global object --&gt;</span>
  …
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
</pre>
</div> <p> The value of <code>this</code> within <code>logID()</code> is a reference to the global object <a href="../window.html"><code>Window</code></a> (or <code>undefined</code> in the case of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode">strict mode</a>. </p> <h4 id="specifying_this_using_bind">Specifying "this" using bind()</h4> <p> The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind"><code>Function.prototype.bind()</code></a> method lets you establish a fixed <code>this</code> context for all subsequent calls — bypassing problems where it's unclear what <code>this</code> will be, depending on the context from which your function was called. Note, however, that you'll need to keep a reference to the listener around so you can remove it later. </p> <p>This is an example with and without <code>bind()</code>:</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="D0tZP5xFd9vaQDW+3uYYkr7tag7Uxx738wTm5VgLYok=" data-language="js"><span class="token keyword">class</span> <span class="token class-name">Something</span> <span class="token punctuation">{</span>
  name <span class="token operator">=</span> <span class="token string">"Something Good"</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// bind causes a fixed `this` context to be assigned to `onclick2`</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>onclick2 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onclick2</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onclick1<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onclick2<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Trick</span>
  <span class="token punctuation">}</span>
  <span class="token function">onclick1</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined, as `this` is the element</span>
  <span class="token punctuation">}</span>
  <span class="token function">onclick2</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'Something Good', as `this` is bound to the Something instance</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Something</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p> Another solution is using a special function called <code>handleEvent()</code> to catch any events: </p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="RaGTcVaK+UMyzY7ESF+ZWwKvV9FPqfKBAMLeE3OXBew=" data-language="js"><span class="token keyword">class</span> <span class="token class-name">Something</span> <span class="token punctuation">{</span>
  name <span class="token operator">=</span> <span class="token string">"Something Good"</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Note that the listeners in this case are `this`, not this.handleEvent</span>
    element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"dblclick"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">handleEvent</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'Something Good', as this is bound to newly created object</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">"click"</span><span class="token operator">:</span>
        <span class="token comment">// some code here…</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">"dblclick"</span><span class="token operator">:</span>
        <span class="token comment">// some code here…</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Something</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p>Another way of handling the reference to <code>this</code> is to use an arrow function, which doesn't create a separate <code>this</code> context.</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="onEdk6jCezNMZB5LVuFO4m3zabbNrGrHyWaU7AOpfNE=" data-language="js"><span class="token keyword">class</span> <span class="token class-name">SomeClass</span> <span class="token punctuation">{</span>
  name <span class="token operator">=</span> <span class="token string">"Something Good"</span><span class="token punctuation">;</span>

  <span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"keydown"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">someMethod</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>code<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">"ArrowUp"</span><span class="token operator">:</span>
        <span class="token comment">// some code here…</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">"ArrowDown"</span><span class="token operator">:</span>
        <span class="token comment">// some code here…</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> myObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SomeClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myObject<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div>
</div>
<h3 id="getting_data_into_and_out_of_an_event_listener">Getting data into and out of an event listener</h3>
<div class="section-content">
<p> Event listeners only take one argument, an <a href="../event.html"><code>Event</code></a> or a subclass of <code>Event</code>, which is automatically passed to the listener, and the return value is ignored. Therefore, to get data into and out of an event listener, instead of passing the data through parameters and return values, you need to create <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures">closures</a> instead. </p> <p>The functions passed as event listeners have access to all variables declared in the outer scopes that contain the function.</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="7OL+lXY0zyK4TqdlD+ydtuGzYJ3QuvW3KXvbUgW1gkM=" data-language="js"><span class="token keyword">const</span> myButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"my-button-id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> someString <span class="token operator">=</span> <span class="token string">"Data"</span><span class="token punctuation">;</span>

myButton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someString<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 'Data' on first click,</span>
  <span class="token comment">// 'Data Again' on second click</span>

  someString <span class="token operator">=</span> <span class="token string">"Data Again"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>someString<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Expected Value: 'Data' (will never output 'Data Again')</span>
</pre>
</div> <p>Read <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Functions#function_scope">the function guide</a> for more information about function scopes.</p>
</div>
<h3 id="memory_issues">Memory issues</h3>
<div class="section-content">
<div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="9wRmtNDBOxnv3l75FOqV5CW675WyoPgtNXH6OB9FKfI=" data-language="js"><span class="token keyword">const</span> elts <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Case 1</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> elt <span class="token keyword">of</span> elts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  elt<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
    <span class="token string">"click"</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// Do something</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Case 2</span>
<span class="token keyword">function</span> <span class="token function">processEvent</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Do something</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> elt <span class="token keyword">of</span> elts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  elt<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> processEvent<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div> <p> In the first case above, a new (anonymous) handler function is created with each iteration of the loop. In the second case, the same previously declared function is used as an event handler, which results in smaller memory consumption because there is only one handler function created. Moreover, in the first case, it is not possible to call <a href="removeeventlistener.html"><code>removeEventListener()</code></a> because no reference to the anonymous function is kept (or here, not kept to any of the multiple anonymous functions the loop might create.) In the second case, it's possible to do <code>myElement.removeEventListener("click", processEvent, false)</code> because <code>processEvent</code> is the function reference. </p> <p> Actually, regarding memory consumption, the lack of keeping a function reference is not the real issue; rather it is the lack of keeping a <em>static</em> function reference. </p>
</div>
<h3 id="using_passive_listeners">Using passive listeners</h3>
<div class="section-content">
<p>If an event has a default action — for example, a <a href="../element/wheel_event.html"><code>wheel</code></a> event that scrolls the container by default — the browser is in general unable to start the default action until the event listener has finished, because it doesn't know in advance whether the event listener might cancel the default action by calling <a href="../event/preventdefault.html"><code>Event.preventDefault()</code></a>. If the event listener takes too long to execute, this can cause a noticeable delay, also known as <a href="https://developer.mozilla.org/en-US/docs/Glossary/Jank">jank</a>, before the default action can be executed.</p> <p>By setting the <code>passive</code> option to <code>true</code>, an event listener declares that it will not cancel the default action, so the browser can start the default action immediately, without waiting for the listener to finish. If the listener does then call <a href="../event/preventdefault.html"><code>Event.preventDefault()</code></a>, this will have no effect.</p> <p>The specification for <code>addEventListener()</code> defines the default value for the <code>passive</code> option as always being <code>false</code>. However, to realize the scroll performance benefits of passive listeners in legacy code, modern browsers have changed the default value of the <code>passive</code> option to <code>true</code> for the <a href="../element/wheel_event.html"><code>wheel</code></a>, <a href="../element/mousewheel_event.html"><code>mousewheel</code></a>, <a href="../element/touchstart_event.html"><code>touchstart</code></a> and <a href="../element/touchmove_event.html"><code>touchmove</code></a> events on the document-level nodes <a href="../window.html"><code>Window</code></a>, <a href="../document.html"><code>Document</code></a>, and <a href="../document/body.html"><code>Document.body</code></a>. That prevents the event listener from <a href="../event/preventdefault.html">canceling the event</a>, so it can't block page rendering while the user is scrolling.</p> <p>Because of that, when you want to override that behavior and ensure the <code>passive</code> option is <code>false</code>, you must explicitly set the option to <code>false</code> (rather than relying on the default).</p> <p> You don't need to worry about the value of <code>passive</code> for the basic <a href="../element/scroll_event.html"><code>scroll</code></a> event. Since it can't be canceled, event listeners can't block page rendering anyway. </p> <p>See <a href="#improving_scroll_performance_using_passive_listeners">Improving scroll performance using passive listeners</a> for an example showing the effect of passive listeners.</p>
</div>
<h3 id="older_browsers">Older browsers</h3>
<div class="section-content"><p> In older browsers that don't support the <code>options</code> parameter to <code>addEventListener()</code>, attempting to use it prevents the use of the <code>useCapture</code> argument without proper use of <a href="#safely_detecting_option_support">feature detection</a>. </p></div>
<h2 id="examples">Examples</h2>

<h3 id="add_a_simple_listener">Add a simple listener</h3>
<div class="section-content">
<p> This example demonstrates how to use <code>addEventListener()</code> to watch for mouse clicks on an element. </p> <h4 id="html">HTML</h4> <div class="code-example">
<div class="example-header"><span class="language-name">html</span></div>
<pre data-signature="Q/gEg4wSfaSDUlN2FsYMPpqsLt/wpuC9uKvQl0K3520=" data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>outside<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>t1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>one<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>t2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>two<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
</pre>
</div> <h4 id="javascript">JavaScript</h4> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="rcZ4EEmNHCNSZkUkHcEZpowIBTevXFWiXTFw3Jt3wcI=" data-language="js"><span class="token comment">// Function to change the content of t2</span>
<span class="token keyword">function</span> <span class="token function">modifyText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> t2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"t2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> isNodeThree <span class="token operator">=</span> t2<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>nodeValue <span class="token operator">===</span> <span class="token string">"three"</span><span class="token punctuation">;</span>
  t2<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>nodeValue <span class="token operator">=</span> isNodeThree <span class="token operator">?</span> <span class="token string">"two"</span> <span class="token operator">:</span> <span class="token string">"three"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Add event listener to table</span>
<span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"outside"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> modifyText<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p> In this code, <code>modifyText()</code> is a listener for <code>click</code> events registered using <code>addEventListener()</code>. A click anywhere in the table bubbles up to the handler and runs <code>modifyText()</code>. </p> <h4 id="result">Result</h4>
<div class="code-example" id="sect5">

<iframe class="sample-code-frame" title="Add a simple listener sample" id="frame_add_a_simple_listener" src="https://live.mdnplay.dev/en-US/docs/Web/API/EventTarget/addEventListener/runner.html?id=add_a_simple_listener" sandbox="allow-same-origin allow-scripts" loading="lazy"></iframe>
</div>
</div>
<h3 id="add_an_abortable_listener">Add an abortable listener</h3>
<div class="section-content">
<p>This example demonstrates how to add an <code>addEventListener()</code> that can be aborted with an <a href="../abortsignal.html"><code>AbortSignal</code></a>.</p> <h4 id="html_2">HTML</h4> <div class="code-example">
<div class="example-header"><span class="language-name">html</span></div>
<pre data-signature="Q/gEg4wSfaSDUlN2FsYMPpqsLt/wpuC9uKvQl0K3520=" data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>outside<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>t1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>one<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>t2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>two<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
</pre>
</div> <h4 id="javascript_2">JavaScript</h4> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="dGLhdnwBbrkZd9Vt8QZpZajaFMCMJXYjtQD/zwD6zcA=" data-language="js"><span class="token comment">// Add an abortable event listener to table</span>
<span class="token keyword">const</span> controller <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AbortController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"outside"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> modifyText<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">signal</span><span class="token operator">:</span> controller<span class="token punctuation">.</span>signal <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Function to change the content of t2</span>
<span class="token keyword">function</span> <span class="token function">modifyText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> t2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"t2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>t2<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>nodeValue <span class="token operator">===</span> <span class="token string">"three"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    t2<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>nodeValue <span class="token operator">=</span> <span class="token string">"two"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    t2<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>nodeValue <span class="token operator">=</span> <span class="token string">"three"</span><span class="token punctuation">;</span>
    controller<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// remove listener after value reaches "three"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
</div> <p>In the example above, we modify the code in the previous example such that after the second row's content changes to "three", we call <code>abort()</code> from the <a href="../abortcontroller.html"><code>AbortController</code></a> we passed to the <code>addEventListener()</code> call. That results in the value remaining as "three" forever because we no longer have any code listening for a click event.</p> <h4 id="result_2">Result</h4>
<div class="code-example" id="sect7">

<iframe class="sample-code-frame" title="Add an abortable listener sample" id="frame_add_an_abortable_listener" src="https://live.mdnplay.dev/en-US/docs/Web/API/EventTarget/addEventListener/runner.html?id=add_an_abortable_listener" sandbox="allow-same-origin allow-scripts" loading="lazy"></iframe>
</div>
</div>
<h3 id="event_listener_with_anonymous_function">Event listener with anonymous function</h3>
<div class="section-content">
<p> Here, we'll take a look at how to use an anonymous function to pass parameters into the event listener. </p> <h4 id="html_3">HTML</h4> <div class="code-example">
<div class="example-header"><span class="language-name">html</span></div>
<pre data-signature="Q/gEg4wSfaSDUlN2FsYMPpqsLt/wpuC9uKvQl0K3520=" data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>outside<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>t1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>one<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>t2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>two<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
</pre>
</div> <h4 id="javascript_3">JavaScript</h4> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="AtMkeN26la6BIQJsFWdRrrBazSJGssLsuknNfH5QHnU=" data-language="js"><span class="token comment">// Function to change the content of t2</span>
<span class="token keyword">function</span> <span class="token function">modifyText</span><span class="token punctuation">(</span><span class="token parameter">new_text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> t2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"t2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  t2<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>nodeValue <span class="token operator">=</span> new_text<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Function to add event listener to table</span>
<span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"outside"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">"click"</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">modifyText</span><span class="token punctuation">(</span><span class="token string">"four"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p> Notice that the listener is an anonymous function that encapsulates code that is then, in turn, able to send parameters to the <code>modifyText()</code> function, which is responsible for actually responding to the event. </p> <h4 id="result_3">Result</h4>
<div class="code-example" id="sect9">

<iframe class="sample-code-frame" title="Event listener with anonymous function sample" id="frame_event_listener_with_anonymous_function" src="https://live.mdnplay.dev/en-US/docs/Web/API/EventTarget/addEventListener/runner.html?id=event_listener_with_anonymous_function" sandbox="allow-same-origin allow-scripts" loading="lazy"></iframe>
</div>
</div>
<h3 id="event_listener_with_an_arrow_function">Event listener with an arrow function</h3>
<div class="section-content">
<p> This example demonstrates a simple event listener implemented using arrow function notation. </p> <h4 id="html_4">HTML</h4> <div class="code-example">
<div class="example-header"><span class="language-name">html</span></div>
<pre data-signature="Q/gEg4wSfaSDUlN2FsYMPpqsLt/wpuC9uKvQl0K3520=" data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>outside<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>t1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>one<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>t2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>two<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
</pre>
</div> <h4 id="javascript_4">JavaScript</h4> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="D6KHNGddz/lVlAxPnhvVQItCDgN6WSFmHjRiaXwDvUc=" data-language="js"><span class="token comment">// Function to change the content of t2</span>
<span class="token keyword">function</span> <span class="token function">modifyText</span><span class="token punctuation">(</span><span class="token parameter">new_text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> t2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"t2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  t2<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>nodeValue <span class="token operator">=</span> new_text<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Add event listener to table with an arrow function</span>
<span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"outside"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">"click"</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">modifyText</span><span class="token punctuation">(</span><span class="token string">"four"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <h4 id="result_4">Result</h4>
<div class="code-example" id="sect11">

<iframe class="sample-code-frame" title="Event listener with an arrow function sample" id="frame_event_listener_with_an_arrow_function" src="https://live.mdnplay.dev/en-US/docs/Web/API/EventTarget/addEventListener/runner.html?id=event_listener_with_an_arrow_function" sandbox="allow-same-origin allow-scripts" loading="lazy"></iframe>
</div> <p> Please note that while anonymous and arrow functions are similar, they have different <code>this</code> bindings. While anonymous (and all traditional JavaScript functions) create their own <code>this</code> bindings, arrow functions inherit the <code>this</code> binding of the containing function. </p> <p> That means that the variables and constants available to the containing function are also available to the event handler when using an arrow function. </p>
</div>
<h3 id="example_of_options_usage">Example of options usage</h3>
<div class="section-content">
<h4 id="html_5">HTML</h4> <div class="code-example">
<div class="example-header"><span class="language-name">html</span></div>
<pre data-signature="VtfJt9IOYWmPD0edEXm3nqHfu2+fM7+aslZjbmX80a4=" data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>outer<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  outer, once &amp; none-once
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>middle<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    middle, capture &amp; none-capture
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>inner1<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.mozilla.org<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      inner1, passive &amp; preventDefault(which is not allowed)
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>inner2<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://developer.mozilla.org/<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      inner2, none-passive &amp; preventDefault(not open new page)
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clear-button<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Clear logs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>demo-logs<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
</pre>
</div> <h4 id="css">CSS</h4> <div class="code-example">
<div class="example-header"><span class="language-name">css</span></div>
<pre data-signature="qpIMYFzQVF3I92FPRm5W9ebotTdX5toQ0Uyvw5zXv1E=" data-language="css"><span class="token selector">.outer,
.middle,
.inner1,
.inner2</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 520px<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
  <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.outer</span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid red<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.middle</span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid green<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 460px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.inner1,
.inner2</span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid purple<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> purple<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div>  <h4 id="javascript_5">JavaScript</h4>  <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="sDRjbwh3YSpEdYqEM4lGQXy9YElz+CHYx1xzRl8QyX8=" data-language="js"><span class="token keyword">const</span> outer <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".outer"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> middle <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".middle"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> inner1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".inner1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> inner2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".inner2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> capture <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">capture</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> noneCapture <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">capture</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> once <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">once</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> noneOnce <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">once</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> passive <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">passive</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> nonePassive <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">passive</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

outer<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> onceHandler<span class="token punctuation">,</span> once<span class="token punctuation">)</span><span class="token punctuation">;</span>
outer<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> noneOnceHandler<span class="token punctuation">,</span> noneOnce<span class="token punctuation">)</span><span class="token punctuation">;</span>
middle<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> captureHandler<span class="token punctuation">,</span> capture<span class="token punctuation">)</span><span class="token punctuation">;</span>
middle<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> noneCaptureHandler<span class="token punctuation">,</span> noneCapture<span class="token punctuation">)</span><span class="token punctuation">;</span>
inner1<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> passiveHandler<span class="token punctuation">,</span> passive<span class="token punctuation">)</span><span class="token punctuation">;</span>
inner2<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> nonePassiveHandler<span class="token punctuation">,</span> nonePassive<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">onceHandler</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"outer, once"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">noneOnceHandler</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"outer, none-once, default\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">captureHandler</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//event.stopImmediatePropagation();</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"middle, capture"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">noneCaptureHandler</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"middle, none-capture, default"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">passiveHandler</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Unable to preventDefault inside passive event listener invocation.</span>
  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"inner1, passive, open new page"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">nonePassiveHandler</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//event.stopPropagation();</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"inner2, none-passive, default, not open new page"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div> <h4 id="result_5">Result</h4> <p>Click the outer, middle, inner containers respectively to see how the options work.</p>
<div class="code-example" id="sect13">

<iframe class="sample-code-frame" title="Example of options usage sample" id="frame_example_of_options_usage" width="600" height="630" src="https://live.mdnplay.dev/en-US/docs/Web/API/EventTarget/addEventListener/runner.html?id=example_of_options_usage" sandbox="allow-same-origin allow-scripts" loading="lazy"></iframe>
</div> <p> Before using a particular value in the <code>options</code> object, it's a good idea to ensure that the user's browser supports it, since these are an addition that not all browsers have supported historically. See <a href="#safely_detecting_option_support">Safely detecting option support</a> for details. </p>
</div>
<h3 id="event_listener_with_multiple_options">Event listener with multiple options</h3>
<div class="section-content">
<p>You can set more than one of the options in the <code>options</code> parameter. In the following example we are setting two options:</p> <ul> <li>
<code>passive</code>, to assert that the handler will not call <a href="../event/preventdefault.html"><code>preventDefault()</code></a>
</li> <li>
<code>once</code>, to ensure that the event handler will only be called once.</li> </ul> <h4 id="html_6">HTML</h4> <div class="code-example">
<div class="example-header"><span class="language-name">html</span></div>
<pre data-signature="oTOZqTc3mQYcOvFHLzNdNDHyDHzFbvCrKSlVcI69ijA=" data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>example-button<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>You have not clicked this button.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>reset-button<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Click this button to reset the first button.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</pre>
</div> <h4 id="javascript_6">JavaScript</h4> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="k7xCdXHeLClqzkfUBoX4QLF43u8ZtyvW52F+waDLDWc=" data-language="js"><span class="token keyword">const</span> buttonToBeClicked <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"example-button"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> resetButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"reset-button"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// the text that the button is initialized with</span>
<span class="token keyword">const</span> initialText <span class="token operator">=</span> buttonToBeClicked<span class="token punctuation">.</span>textContent<span class="token punctuation">;</span>

<span class="token comment">// the text that the button contains after being clicked</span>
<span class="token keyword">const</span> clickedText <span class="token operator">=</span> <span class="token string">"You have clicked this button."</span><span class="token punctuation">;</span>

<span class="token comment">// we hoist the event listener callback function</span>
<span class="token comment">// to prevent having duplicate listeners attached</span>
<span class="token keyword">function</span> <span class="token function">eventListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  buttonToBeClicked<span class="token punctuation">.</span>textContent <span class="token operator">=</span> clickedText<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  buttonToBeClicked<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> eventListener<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">passive</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">once</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// when the reset button is clicked, the example button is reset,</span>
<span class="token comment">// and allowed to have its state updated again</span>
resetButton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  buttonToBeClicked<span class="token punctuation">.</span>textContent <span class="token operator">=</span> initialText<span class="token punctuation">;</span>
  <span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <h4 id="result_6">Result</h4>
<div class="code-example" id="sect15">

<iframe class="sample-code-frame" title="Event listener with multiple options sample" id="frame_event_listener_with_multiple_options" src="https://live.mdnplay.dev/en-US/docs/Web/API/EventTarget/addEventListener/runner.html?id=event_listener_with_multiple_options" sandbox="allow-same-origin allow-scripts" loading="lazy"></iframe>
</div>
</div>
<h3 id="improving_scroll_performance_using_passive_listeners">Improving scroll performance using passive listeners</h3>
<div class="section-content">
<p>The following example shows the effect of setting <code>passive</code>. It includes a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/div"><code>&lt;div&gt;</code></a> that contains some text, and a check box.</p> <h4 id="html_7">HTML</h4> <div class="code-example">
<div class="example-header"><span class="language-name">html</span></div>
<pre data-signature="LmRRkEvdp+E/d7CM7fA8VJMM31QXxfAA9+mmWOcoYyk=" data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
    But down there it would be dark now, and not the lovely lighted aquarium she
    imagined it to be during the daylight hours, eddying with schools of tiny,
    delicate animals floating and dancing slowly to their own serene currents
    and creating the look of a living painting. That was wrong, in any case. The
    ocean was different from an aquarium, which was an artificial environment.
    The ocean was a world. And a world is not art. Dorothy thought about the
    living things that moved in that world: large, ruthless and hungry. Like us
    up here.
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>passive<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>passive<span class="token punctuation">"</span></span> <span class="token attr-name">checked</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>passive<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>passive<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</pre>
</div>  <h4 id="javascript_7">JavaScript</h4> <p>The code adds a listener to the container's <a href="../element/wheel_event.html"><code>wheel</code></a> event, which by default scrolls the container. The listener runs a long-running operation. Initially the listener is added with the <code>passive</code> option, and whenever the checkbox is toggled, the code toggles the <code>passive</code> option.</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="tYYejH+xaY+iYQlYS2+giASDE6TDfIkx2KQ+bzZsQLU=" data-language="js"><span class="token keyword">const</span> passive <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#passive"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
passive<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"change"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  container<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">"wheel"</span><span class="token punctuation">,</span> wheelHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
  container<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"wheel"</span><span class="token punctuation">,</span> wheelHandler<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">passive</span><span class="token operator">:</span> passive<span class="token punctuation">.</span>checked<span class="token punctuation">,</span>
    <span class="token literal-property property">once</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#container"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
container<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"wheel"</span><span class="token punctuation">,</span> wheelHandler<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">passive</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">once</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">wheelHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">isPrime</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> c <span class="token operator">&lt;=</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">%</span> c <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> quota <span class="token operator">=</span> <span class="token number">1000000</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> primes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> maximum <span class="token operator">=</span> <span class="token number">1000000</span><span class="token punctuation">;</span>

  <span class="token keyword">while</span> <span class="token punctuation">(</span>primes<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> quota<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> candidate <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>maximum <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isPrime</span><span class="token punctuation">(</span>candidate<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      primes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>candidate<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>primes<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div> <h4 id="result_7">Result</h4> <p>The effect is that:</p> <ul> <li>Initially, the listener is passive, so trying to scroll the container with the wheel is immediate.</li> <li>If you uncheck "passive" and try to scroll the container using the wheel, then there is a noticeable delay before the container scrolls, because the browser has to wait for the long-running listener to finish.</li> </ul>
<div class="code-example" id="sect17">

<iframe class="sample-code-frame" title="Improving scroll performance using passive listeners sample" id="frame_improving_scroll_performance_using_passive_listeners" width="100" height="300" src="https://live.mdnplay.dev/en-US/docs/Web/API/EventTarget/addEventListener/runner.html?id=improving_scroll_performance_using_passive_listeners" sandbox="allow-same-origin allow-scripts" loading="lazy"></iframe>
</div>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="#">DOM Standard <br><small># ref-for-dom-eventtarget-addeventlistener③</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Opera</th>
<th>Safari</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
<th>WebView Android</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>addEventListener</code></th>
<td class="bc-supports-yes"><details><summary>1</summary>Before Chrome 49, the <code>type</code> and <code>listener</code> parameters were optional.</details></td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">1</td>
<td class="bc-supports-yes">7</td>
<td class="bc-supports-yes">1</td>
<td class="bc-supports-yes"><details><summary>18</summary>Before Chrome 49, the <code>type</code> and <code>listener</code> parameters were optional.</details></td>
<td class="bc-supports-yes">4</td>
<td class="bc-supports-yes">10.1</td>
<td class="bc-supports-yes">1</td>
<td class="bc-supports-yes"><details><summary>1.0</summary>Before Samsung Internet 5.0, the <code>type</code> and <code>listener</code> parameters were optional.</details></td>
<td class="bc-supports-yes"><details><summary>1</summary>Before Chrome 49, the <code>type</code> and <code>listener</code> parameters were optional.</details></td>
</tr>
<tr>
<th><code>options_parameter</code></th>
<td class="bc-supports-yes">49</td>
<td class="bc-supports-yes">≤18</td>
<td class="bc-supports-yes">49</td>
<td class="bc-supports-yes">36</td>
<td class="bc-supports-yes">10</td>
<td class="bc-supports-yes">49</td>
<td class="bc-supports-yes">49</td>
<td class="bc-supports-yes">36</td>
<td class="bc-supports-yes">10</td>
<td class="bc-supports-yes">5.0</td>
<td class="bc-supports-yes">49</td>
</tr>
<tr>
<th><code>useCapture_parameter_optional</code></th>
<td class="bc-supports-yes">1</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">6</td>
<td class="bc-supports-yes">11.6</td>
<td class="bc-supports-yes">1</td>
<td class="bc-supports-yes">18</td>
<td class="bc-supports-yes">6</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">1</td>
<td class="bc-supports-yes">1.0</td>
<td class="bc-supports-yes">4.4</td>
</tr>
</tbody>
</table></div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="removeeventlistener.html"><code>EventTarget.removeEventListener()</code></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/Events/Creating_and_triggering_events">Creating and triggering custom events</a></li> <li><a href="https://www.quirksmode.org/js/this.html" target="_blank">More details on the use of <code>this</code> in event handlers</a></li> </ul></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener</a>
  </p>
</div>
