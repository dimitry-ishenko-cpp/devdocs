<header><h1>PushManager: supportedContentEncodings static property</h1>
<details class="baseline-indicator low"><summary><div class="status-title">Baseline <span class="not-bold">2023</span>
</div>
<div class="pill">Newly available</div>

</summary><div class="extra">
<p>Since March 2023, this feature works across the latest devices and browser versions. This feature might not work in older devices or browsers.</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Baseline/Compatibility" data-glean="baseline_link_learn_more" target="_blank" class="learn-more">Learn more</a></li>
<li><a href="#browser_compatibility" data-glean="baseline_link_bcd_table">See full compatibility</a></li>
<li><a href="https://survey.alchemer.com/s3/7634825/MDN-baseline-feedback?page=%2Fen-US%2Fdocs%2FWeb%2FAPI%2FPushManager%2FsupportedContentEncodings_static&amp;level=low" data-glean="baseline_link_feedback" class="feedback-link" target="_blank" rel="noreferrer">Report feedback</a></li>
</ul>
</div></details></header><div class="section-content">
<div class="notecard secure"><p><strong>Secure context:</strong> This feature is available only in <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts">secure contexts</a> (HTTPS), in some or all <a href="#browser_compatibility">supporting browsers</a>.</p></div> <div class="notecard note"><p><strong>Note:</strong> This feature is available in <a href="../web_workers_api.html">Web Workers</a>.</p></div> <p>The <code>supportedContentEncodings</code> read-only static property of the <a href="../pushmanager.html"><code>PushManager</code></a> interface returns an array of supported content codings that can be used to encrypt the payload of a push message.</p> <p>User agents must support the <code>aes128gcm</code> content coding defined in <a href="https://datatracker.ietf.org/doc/html/rfc8291" target="_blank">RFC 8291</a>, and may also support content codings defined from previous versions of the specification. The returned array is frozen, and may not be modified by the recipient.</p> <p>The application server requires this coding in order to encrypt push messages for sending to the push server. The coding used for encryption is also included by the app server in the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Encoding"><code>Content-Encoding</code></a> HTTP header field of each push message.</p> <p>The specification does not define how the client code should send the application server the supported codings, or the information in the <a href="../pushsubscription.html"><code>PushSubscription</code></a> that it also needs in order to encrypt and send a push message. One approach is shown in the examples section below.</p>
</div>
<h2 id="value">Value</h2>
<div class="section-content"><p>An array of strings. This usually contains just one value: <code>"aes128gcm"</code>.</p></div>
<h2 id="exceptions">Exceptions</h2>
<div class="section-content"><dl> <dt id="typeerror"><a href="#typeerror"><code>TypeError</code></a></dt> <dd> <p>This is thrown when attempting to set a value in the returned array.</p> </dd> </dl></div>
<h2 id="examples">Examples</h2>

<h3 id="sending_coding_information_to_the_server">Sending coding information to the server</h3>
<div class="section-content">
<p>Push messages are encrypted on the application server for sending to the push server, and decrypted by the browser before being passed to the application service worker. The public and private keys used are generated by the browser, and only the public key and an associated secret are shared with the web app, and hence the application server. This ensures that push messages remain private as they pass through the push server infrastructure.</p> <p>The <a href="../pushsubscription/getkey.html#p256dh"><code>p256dh</code></a> public key and <a href="../pushsubscription/getkey.html#auth"><code>auth</code></a> secret used for encrypting the message are provided to the service worker via its push subscription, using the <a href="../pushsubscription/getkey.html"><code>PushSubscription.getKey()</code></a> method, along with the target endpoint for sending push messages in <a href="../pushsubscription/endpoint.html"><code>PushSubscription.endpoint</code></a>. The coding that should be used for encryption is provided by <code>supportedContentEncodings</code>.</p> <p>This information may be sent to the application server using any mechanism. One approach is to put the needed information from <a href="../pushsubscription.html"><code>PushSubscription</code></a> and <code>supportedContentEncodings</code> into a JSON object, serialize it using <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify"><code>JSON.stringify()</code></a> and post the result to the application server.</p> <div class="code-example"><pre data-language="js">// Get a PushSubscription object
const pushSubscription = await serviceWorkerRegistration.pushManager.subscribe();

// Create an object containing the information needed by the app server
const subscriptionObject = {
  endpoint: pushSubscription.endpoint,
  keys: {
    p256dh: pushSubscription.getKeys('p256dh'),
    auth: pushSubscription.getKeys('auth'),
  },
  encoding: PushManager.supportedContentEncodings,
  /* other app-specific data, such as user identity */
};

// Stringify the object an post to the app server
fetch(`https://example.com/push/`, {
  method: "post",
  body: JSON.stringify(pushSubscription);
});
</pre></div>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://w3c.github.io/push-api/#dom-pushmanager-supportedcontentencodings">Push API <br><small># dom-pushmanager-supportedcontentencodings</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="5">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Opera</th>
<th>Safari</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
<th>WebView Android</th>
</tr>
</thead>
<tbody><tr>
<th><code>supportedContentEncodings_static</code></th>
<td class="bc-supports-yes">60</td>
<td class="bc-supports-yes">17</td>
<td class="bc-supports-yes">134</td>
<td class="bc-supports-yes">47</td>
<td class="bc-supports-yes"><details><summary>16</summary>Notifications are supported on macOS Ventura and later.</details></td>
<td class="bc-supports-yes">60</td>
<td class="bc-supports-yes">134</td>
<td class="bc-supports-yes">44</td>
<td class="bc-supports-yes"><details><summary>16.4</summary>Notifications are supported in web apps saved to the home screen.</details></td>
<td class="bc-supports-yes">4.0</td>
<td class="bc-supports-no">No</td>
</tr></tbody>
</table></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2024 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/PushManager/supportedContentEncodings_static" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/PushManager/supportedContentEncodings_static</a>
  </p>
</div>
