<header><h1>InstallEvent</h1></header><div class="section-content">
<div class="notecard deprecated" id="sect1"><p><strong>Deprecated:</strong> This feature is no longer recommended. Though some browsers might still support it, it may have already been removed from the relevant web standards, may be in the process of being dropped, or may only be kept for compatibility purposes. Avoid using it, and update existing code if possible; see the <a href="#browser_compatibility">compatibility table</a> at the bottom of this page to guide your decision. Be aware that this feature may cease to work at any time.</p></div>
<div class="notecard nonstandard" id="sect2"><p><strong>Non-standard:</strong> This feature is non-standard and is not on a standards track. Do not use it on production sites facing the Web: it will not work for every user. There may also be large incompatibilities between implementations and the behavior may change in the future.</p></div> <p>The parameter passed into the <a href="serviceworkerglobalscope/install_event.html"><code>oninstall</code></a> handler, the <code>InstallEvent</code> interface represents an install action that is dispatched on the <a href="serviceworkerglobalscope.html"><code>ServiceWorkerGlobalScope</code></a> of a <a href="serviceworker.html"><code>ServiceWorker</code></a>. As a child of <a href="extendableevent.html"><code>ExtendableEvent</code></a>, it ensures that functional events such as <a href="fetchevent.html"><code>FetchEvent</code></a> are not dispatched during installation.</p> <p>This interface inherits from the <a href="extendableevent.html"><code>ExtendableEvent</code></a> interface.</p> <div class="notecard note" id="sect3"> <p><strong>Note:</strong> Instead of using the deprecated <code>ServiceWorkerGlobalScope.oninstall()</code> handler to catch events of this type, instead handle the (non-deprecated) <a href="serviceworkerglobalscope/install_event.html"><code>install</code></a> using a listener added with <a href="eventtarget/addeventlistener.html"><code>addEventListener()</code></a>.</p> </div>
</div>
<h2 id="constructor">Constructor</h2>
<div class="section-content"><dl> <dt id="sect4">
<a href="installevent/installevent.html"><code>InstallEvent()</code></a> <abbr class="icon icon-deprecated" title="Deprecated. Not for use in new websites."> <span class="visually-hidden">Deprecated</span> </abbr> <abbr class="icon icon-nonstandard" title="Non-standard. Check cross-browser support before using."> <span class="visually-hidden">Non-standard</span> </abbr>
</dt> <dd> <p>Creates a new <code>InstallEvent</code> object.</p> </dd> </dl></div>
<h2 id="instance_properties">Instance properties</h2>
<div class="section-content"><p><em>Inherits properties from its ancestor, <a href="event.html"><code>Event</code></a></em>.</p></div>
<h2 id="instance_methods">Instance methods</h2>
<div class="section-content"><p><em>Inherits methods from its parent, <a href="extendableevent.html"><code>ExtendableEvent</code></a></em>.</p></div>
<h2 id="examples">Examples</h2>
<div class="section-content">
<p>This code snippet is from the <a href="https://github.com/GoogleChrome/samples/blob/gh-pages/service-worker/prefetch/service-worker.js" target="_blank">service worker prefetch sample</a> (see <a href="https://googlechrome.github.io/samples/service-worker/prefetch/" target="_blank">prefetch running live</a>.) The code calls <a href="extendableevent/waituntil.html"><code>ExtendableEvent.waitUntil()</code></a> in <a href="serviceworkerglobalscope/install_event.html"><code>ServiceWorkerGlobalScope.oninstall</code></a> and delays treating the <a href="serviceworkerregistration/installing.html"><code>ServiceWorkerRegistration.installing</code></a> worker as installed until the passed promise resolves successfully. The promise resolves when all resources have been fetched and cached, or when any exception occurs.</p> <p>The code snippet also shows a best practice for versioning caches used by the service worker. Although this example has only one cache, you can use this approach for multiple caches. The code maps a shorthand identifier for a cache to a specific, versioned cache name.</p> <div class="notecard note" id="sect5"> <p><strong>Note:</strong> Logging statements are visible in Google Chrome via the "Inspect" interface for the relevant service worker accessed via chrome://serviceworker-internals.</p> </div> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="n/B6hvpA2fn1LJ3lmEykui1Epr+wlAuLwAM8mMM50to=" data-language="js"><span class="token keyword">const</span> <span class="token constant">CACHE_VERSION</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">CURRENT_CACHES</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">prefetch</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">prefetch-cache-v</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">CACHE_VERSION</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"install"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> urlsToPrefetch <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">"./static/pre_fetched.txt"</span><span class="token punctuation">,</span>
    <span class="token string">"./static/pre_fetched.html"</span><span class="token punctuation">,</span>
    <span class="token string">"https://www.chromium.org/_/rsrc/1302286216006/config/customLogo.gif"</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token string">"Handling install event. Resources to pre-fetch:"</span><span class="token punctuation">,</span>
    urlsToPrefetch<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  event<span class="token punctuation">.</span><span class="token function">waitUntil</span><span class="token punctuation">(</span>
    caches
      <span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token constant">CURRENT_CACHES</span><span class="token punctuation">[</span><span class="token string">"prefetch"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">cache</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> cache
          <span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>
            urlsToPrefetch<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">urlToPrefetch</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Request</span><span class="token punctuation">(</span>urlToPrefetch<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">"no-cors"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"All resources have been fetched and cached."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Pre-fetching failed:"</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div>
</div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>InstallEvent</code></th>
<td class="bc-supports-yes">40</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">27</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">40</td>
<td class="bc-supports-yes">40</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">27</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">4.0</td>
</tr>
<tr>
<th><code>InstallEvent</code></th>
<td class="bc-supports-yes">40</td>
<td class="bc-supports-yes">17</td>
<td class="bc-supports-yes">44</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">27</td>
<td class="bc-supports-yes">11.1</td>
<td class="bc-supports-yes">40</td>
<td class="bc-supports-yes">40</td>
<td class="bc-supports-yes">44</td>
<td class="bc-supports-yes">27</td>
<td class="bc-supports-yes">11.3</td>
<td class="bc-supports-yes">4.0</td>
</tr>
</tbody>
</table></div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="serviceworkerglobalscope/install_event.html"><code>install</code> event</a></li> <li><a href="notificationevent.html"><code>NotificationEvent</code></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a></li> <li><a href="fetch_api.html">Fetch API</a></li> </ul></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/InstallEvent" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/InstallEvent</a>
  </p>
</div>
