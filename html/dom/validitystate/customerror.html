<header><h1>ValidityState: customError property</h1>
<details class="baseline-indicator high"><summary><h2>Baseline <span class="not-bold">Widely available</span>
</h2>

</summary><div class="extra">
<p>This feature is well established and works across many devices and browser versions. It’s been available across browsers since December 2018.</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Baseline/Compatibility" data-glean="baseline_link_learn_more" target="_blank" class="learn-more">Learn more</a></li>
<li><a href="#browser_compatibility" data-glean="baseline_link_bcd_table">See full compatibility</a></li>
<li><a href="https://survey.alchemer.com/s3/7634825/MDN-baseline-feedback?page=%2Fen-US%2Fdocs%2FWeb%2FAPI%2FValidityState%2FcustomError&amp;level=high" data-glean="baseline_link_feedback" class="feedback-link" target="_blank" rel="noreferrer">Report feedback</a></li>
</ul>
</div></details></header><div class="section-content"><p>The read-only <code>customError</code> property of the <a href="../validitystate.html"><code>ValidityState</code></a> interface returns <code>true</code> if an element doesn't meet the validation required in the custom validity set by the element's <a href="../htmlobjectelement/setcustomvalidity.html"><code>setCustomValidity()</code></a> method.</p></div>
<h2 id="value">Value</h2>
<div class="section-content"><p>A boolean that is <code>true</code> if a custom error message has been set to a non-empty string.</p></div>
<h2 id="examples">Examples</h2>

<h3 id="detecting_a_custom_error">Detecting a custom error</h3>
<div class="section-content">
<p> In this example, <a href="../htmlobjectelement/setcustomvalidity.html"><code>setCustomValidity()</code></a> sets a custom error message when a form submission contains user input that's considered invalid. The "Validate input" button calls <a href="../htmlformelement/reportvalidity.html"><code>reportValidity()</code></a>, which displays a validation message under the element if a user enters values that do not match the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Constraint_validation#constraint_validation_process">form's constraints</a>. </p> <p> If you enter the text "good" or "fine" and try to validate the input, the field is marked invalid until the custom error message is cleared (set to an empty string). For comparison, there is a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/minlength"><code>minlength</code></a> attribute on the input element that allows us to demonstrate the <a href="tooshort.html"><code>tooShort</code> validity state</a> when the user enters less than two characters. When the value in the form control is invalid, even if there is no custom error, the input will have a red outline. </p> <h4 id="html">HTML</h4> <div class="code-example">
<div class="example-header"><span class="language-name">html</span></div>
<pre data-signature="K+3JyINnzJqlTwqWEr+adpd0LpMVMKfwWduTh/fUkfI=" data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>log<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Validation failures logged here...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
  <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span>
  <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userInput<span class="token punctuation">"</span></span>
  <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>How do you feel?<span class="token punctuation">"</span></span>
  <span class="token attr-name">minlength</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkButton<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Validate input<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</pre>
</div> <h4 id="css">CSS</h4> <div class="code-example">
<div class="example-header"><span class="language-name">css</span></div>
<pre data-signature="wBpzHvL3Pu7mzdO6qRM7EYa0KIfeehgEAeIrvwIRltw=" data-language="css"><span class="token selector">input:invalid</span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> red solid 3px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div>  <h4 id="javascript">JavaScript</h4> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="8IYO7hLnCCvG+UhtN45tIMiY4iP2ovSO3JR9dbECqcc=" data-language="js"><span class="token keyword">const</span> userInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"userInput"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> checkButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"checkButton"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> logElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"log"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  logElement<span class="token punctuation">.</span>innerText <span class="token operator">=</span> text<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">check</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">input</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Handle cases where input is too vague</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>input<span class="token punctuation">.</span>value <span class="token operator">==</span> <span class="token string">"good"</span> <span class="token operator">||</span> input<span class="token punctuation">.</span>value <span class="token operator">==</span> <span class="token string">"fine"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    input<span class="token punctuation">.</span><span class="token function">setCustomValidity</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>input<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" is not a feeling.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// An empty string resets the custom validity state</span>
    input<span class="token punctuation">.</span><span class="token function">setCustomValidity</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

userInput<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">check</span><span class="token punctuation">(</span>userInput<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">validateInput</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  userInput<span class="token punctuation">.</span><span class="token function">reportValidity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>userInput<span class="token punctuation">.</span>validity<span class="token punctuation">.</span>customError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// We can handle custom validity states here</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Custom validity error: "</span> <span class="token operator">+</span> userInput<span class="token punctuation">.</span>validationMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span>userInput<span class="token punctuation">.</span>validationMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

checkButton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> validateInput<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <h4 id="result">Result</h4>
<div class="code-example" id="sect1">

<iframe class="sample-code-frame" title="detecting a custom error sample" id="frame_detecting_a_custom_error" width="100%" height="140" src="https://live.mdnplay.dev/en-US/docs/Web/API/ValidityState/customError/runner.html?id=detecting_a_custom_error" sandbox="allow-same-origin allow-scripts" loading="lazy"></iframe>
</div>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#dom-validitystate-customerror-dev">HTML Standard <br><small># dom-validitystate-customerror-dev</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Opera</th>
<th>Safari</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
<th>WebView Android</th>
</tr>
</thead>
<tbody><tr>
<th><code>customError</code></th>
<td class="bc-supports-yes">4</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">4</td>
<td class="bc-supports-yes">12.1</td>
<td class="bc-supports-yes">5</td>
<td class="bc-supports-yes">18</td>
<td class="bc-supports-yes">4</td>
<td class="bc-supports-yes">12.1</td>
<td class="bc-supports-yes">5</td>
<td class="bc-supports-yes">1.0</td>
<td class="bc-supports-yes">≤37</td>
</tr></tbody>
</table></div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li>ValidityState <a href="badinput.html">badInput</a>, <a href="valid.html">valid</a> properties.</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Constraint_validation">Constraint validation</a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Learn/Forms/Form_validation">Forms: Data form validation</a></li> </ul></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/ValidityState/customError" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/ValidityState/customError</a>
  </p>
</div>
