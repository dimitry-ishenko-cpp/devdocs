<header><h1>FileSystemFileHandle: createSyncAccessHandle() method</h1>
<details class="baseline-indicator low"><summary><h2>Baseline <span class="not-bold">2023</span>
</h2>
<div class="pill">Newly available</div>

</summary><div class="extra">
<p>Since March 2023, this feature works across the latest devices and browser versions. This feature might not work in older devices or browsers.</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Baseline/Compatibility" data-glean="baseline_link_learn_more" target="_blank" class="learn-more">Learn more</a></li>
<li><a href="#browser_compatibility" data-glean="baseline_link_bcd_table">See full compatibility</a></li>
<li><a href="https://survey.alchemer.com/s3/7634825/MDN-baseline-feedback?page=%2Fen-US%2Fdocs%2FWeb%2FAPI%2FFileSystemFileHandle%2FcreateSyncAccessHandle&amp;level=low" data-glean="baseline_link_feedback" class="feedback-link" target="_blank" rel="noreferrer">Report feedback</a></li>
</ul>
</div></details></header><div class="section-content">
<div class="notecard secure" id="sect1"><p><strong>Secure context:</strong> This feature is available only in <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts">secure contexts</a> (HTTPS), in some or all <a href="#browser_compatibility">supporting browsers</a>.</p></div>
<div class="notecard note" id="sect2"> <p><strong>Note:</strong> This feature is only available in <a href="../dedicatedworkerglobalscope.html">Dedicated Web Workers</a>.</p> </div> <p> The <code>createSyncAccessHandle()</code> method of the <a href="../filesystemfilehandle.html"><code>FileSystemFileHandle</code></a> interface returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> which resolves to a <a href="../filesystemsyncaccesshandle.html"><code>FileSystemSyncAccessHandle</code></a> object that can be used to synchronously read from and write to a file. The synchronous nature of this method brings performance advantages, but it is only usable inside dedicated <a href="../web_workers_api.html">Web Workers</a> for files within the <a href="../file_system_api/origin_private_file_system.html">origin private file system</a>. </p> <p>Creating a <a href="../filesystemsyncaccesshandle.html"><code>FileSystemSyncAccessHandle</code></a> takes an exclusive lock on the file associated with the file handle. This prevents the creation of further <a href="../filesystemsyncaccesshandle.html"><code>FileSystemSyncAccessHandle</code></a>s or <a href="../filesystemwritablefilestream.html"><code>FileSystemWritableFileStream</code></a>s for the file until the existing access handle is closed.</p>
</div>
<h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="81kxBCA+hmBavev2xxwjYGOw9kLutelIuRgX2FuDgzQ=" data-language="js"><span class="token function">createSyncAccessHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">createSyncAccessHandle</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
</pre>
</div></div>
<h3 id="parameters">Parameters</h3>
<div class="section-content"><dl> <dt id="options">
<a href="#options"><code>options</code></a> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An object with the following properties:</p> <dl> <dt id="mode">
<a href="#mode"><code>mode</code></a> <span class="badge inline optional">Optional</span> <abbr class="icon icon-nonstandard" title="Non-standard. Check cross-browser support before using."> <span class="visually-hidden">Non-standard</span> </abbr>
</dt> <dd> <p> A string specifying the locking mode for the access handle. The default value is <code>"readwrite"</code>. Possible values are: </p> <dl> <dt id="read-only"><a href="#read-only"><code>"read-only"</code></a></dt> <dd> <p>Multiple <code>FileSystemSyncAccessHandle</code> objects can be opened simultaneously on a file (for example when using the same app in multiple tabs), provided they are all opened in <code>"read-only"</code> mode. Once opened, read-like methods can be called on the handles — <a href="../filesystemsyncaccesshandle/read.html"><code>read()</code></a>, <a href="../filesystemsyncaccesshandle/getsize.html"><code>getSize()</code></a>, and <a href="../filesystemsyncaccesshandle/close.html"><code>close()</code></a>.</p> </dd> <dt id="readwrite"><a href="#readwrite"><code>"readwrite"</code></a></dt> <dd> <p>Only one <code>FileSystemSyncAccessHandle</code> object can be opened on a file. Attempting to open subsequent handles before the first handle is closed results in a <code>NoModificationAllowedError</code> exception being thrown. Once opened, any available method can be called on the handle.</p> </dd> <dt id="readwrite-unsafe"><a href="#readwrite-unsafe"><code>"readwrite-unsafe"</code></a></dt> <dd> <p>Multiple <code>FileSystemSyncAccessHandle</code> objects can be opened simultaneously on a file, provided they are all opened in <code>"readwrite-unsafe"</code> mode. Once opened, any available method can be called on the handles.</p> </dd> </dl> </dd> </dl> </dd> </dl></div>
<h3 id="return_value">Return value</h3>
<div class="section-content"><p>A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> which resolves to a <a href="../filesystemsyncaccesshandle.html"><code>FileSystemSyncAccessHandle</code></a> object.</p></div>
<h3 id="exceptions">Exceptions</h3>
<div class="section-content"><dl> <dt id="notallowederror">
<a href="#notallowederror"><code>NotAllowedError</code></a> <a href="../domexception.html"><code>DOMException</code></a>
</dt> <dd> <p>Thrown if the <a href="../permissionstatus/state.html"><code>PermissionStatus.state</code></a> for the handle is not <code>granted</code> in <code>readwrite</code> mode.</p> </dd> <dt id="invalidstateerror">
<a href="#invalidstateerror"><code>InvalidStateError</code></a> <a href="../domexception.html"><code>DOMException</code></a>
</dt> <dd> <p>Thrown if the <a href="../filesystemsyncaccesshandle.html"><code>FileSystemSyncAccessHandle</code></a> object does not represent a file in the <a href="../file_system_api/origin_private_file_system.html">origin private file system</a>.</p> </dd> <dt id="notfounderror">
<a href="#notfounderror"><code>NotFoundError</code></a> <a href="../domexception.html"><code>DOMException</code></a>
</dt> <dd> <p>Thrown if current entry is not found.</p> </dd> <dt id="nomodificationallowederror">
<a href="#nomodificationallowederror"><code>NoModificationAllowedError</code></a> <a href="../domexception.html"><code>DOMException</code></a>
</dt> <dd> <p>Thrown if the browser is not able to acquire a lock on the file associated with the file handle. This could be because <code>mode</code> is set to <code>readwrite</code> and an attempt is made to open multiple handles simultaneously.</p> </dd> </dl></div>
<h2 id="examples">Examples</h2>

<h3 id="basic_usage">Basic usage</h3>
<div class="section-content">
<p>The following asynchronous event handler function is contained inside a Web Worker. The snippet inside it creates a synchronous file access handle.</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="VHhWOgZ3tLmVcmkQOi1mvoZVFE5fd6IA+dsn7MzKZuw=" data-language="js"><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Retrieve message sent to work from main script</span>
  <span class="token keyword">const</span> message <span class="token operator">=</span> e<span class="token punctuation">.</span>data<span class="token punctuation">;</span>

  <span class="token comment">// Get handle to draft file</span>
  <span class="token keyword">const</span> root <span class="token operator">=</span> <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>storage<span class="token punctuation">.</span><span class="token function">getDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> draftHandle <span class="token operator">=</span> <span class="token keyword">await</span> root<span class="token punctuation">.</span><span class="token function">getFileHandle</span><span class="token punctuation">(</span><span class="token string">"draft.txt"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">create</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Get sync access handle</span>
  <span class="token keyword">const</span> accessHandle <span class="token operator">=</span> <span class="token keyword">await</span> draftHandle<span class="token punctuation">.</span><span class="token function">createSyncAccessHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// …</span>

  <span class="token comment">// Always close FileSystemSyncAccessHandle if done.</span>
  accessHandle<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre>
</div>
</div>
<h3 id="complete_example_with_mode_option">Complete example with <code>mode</code> option</h3>
<div class="section-content">
<p>Our <a href="https://createsyncaccesshandle-mode-test.glitch.me/" target="_blank"><code>createSyncAccessHandle()</code> mode test</a> example provides an <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input"><code>&lt;input&gt;</code></a> field to enter text into, and two buttons — one to write entered text to the end of a file in the origin private file system, and one to empty the file when it becomes too full.</p> <p>Try exploring the demo above, with the browser developer console open so you can see what is happening. If you try opening the demo in multiple browser tabs, you will find that multiple handles can be opened at once to write to the file at the same time. This is because <code>mode: "readwrite-unsafe"</code> is set on the <code>createSyncAccessHandle()</code> calls.</p> <p>Below we'll explore the code.</p> <h4 id="html">HTML</h4> <p>The two <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button"><code>&lt;button&gt;</code></a> elements and text <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input"><code>&lt;input&gt;</code></a> field look like this:</p> <div class="code-example">
<div class="example-header"><span class="language-name">html</span></div>
<pre data-signature="YcCl0Rhd+gXKbhtGmYgiQkob6+etDrDRwpbmJcVO9Cw=" data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>filetext<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Enter text to write to the file:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>filetext<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>filetext<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
    Write your text to the file: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>write<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Write text<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
    Empty the file if it gets too full:
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>empty<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Empty file<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">&gt;</span></span>
</pre>
</div> <h4 id="main_javascript">Main JavaScript</h4> <p>The main thread JavaScript inside the HTML file is shown below. We grab references to the write text button, empty file button, and text input field, then we create a new web worker using the <a href="../worker/worker.html"><code>Worker()</code></a> constructor. We then define two functions and set them as event handlers on the buttons:</p> <ul> <li>
<code>writeToOPFS()</code> is run when the write text button is clicked. This function posts the entered value of the text field to the worker inside an object using the <a href="../worker/postmessage.html"><code>Worker.postMessage()</code></a> method, then empties the text field, ready for the next addition. Note how the passed object also includes a <code>command: "write"</code> property to specify that we want to trigger a write action with this message.</li> <li>
<code>emptyOPFS()</code> is run when the empty file button is clicked. This posts an object containing a <code>command: "empty"</code> property to the worker specifying that the file is to be emptied.</li> </ul> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="g9PetF9f/O2O+N5YJSDmNmja0JoDSSUugKYX8Jb6GGk=" data-language="js"><span class="token keyword">const</span> writeBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".write"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> emptyBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".empty"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fileText <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#filetext"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> opfsWorker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">"worker.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">writeToOPFS</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  opfsWorker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">command</span><span class="token operator">:</span> <span class="token string">"write"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">content</span><span class="token operator">:</span> fileText<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Main script: Text posted to worker"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  fileText<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">emptyOPFS</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  opfsWorker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">command</span><span class="token operator">:</span> <span class="token string">"empty"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

writeBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> writeToOPFS<span class="token punctuation">)</span><span class="token punctuation">;</span>
emptyBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> emptyOPFS<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <h4 id="worker_javascript">Worker JavaScript</h4> <p>The worker JavaScript is shown below.</p> <p>First, we run a function called <code>initOPFS()</code> that gets a reference to the OPFS root using <a href="../storagemanager/getdirectory.html"><code>StorageManager.getDirectory()</code></a>, creates a file and returns its handle using <a href="../filesystemdirectoryhandle/getfilehandle.html"><code>FileSystemDirectoryHandle.getFileHandle()</code></a>, and then returns a <a href="../filesystemsyncaccesshandle.html"><code>FileSystemSyncAccessHandle</code></a> using <code>createSyncAccessHandle()</code>. This call includes the <code>mode: "readwrite-unsafe"</code> property, allowing multiple handles to access the same file simultaneously.</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="Iuh+AoXaqlwKDfkVKa0OrC44eXplOBqDBJFgO6pdNJQ=" data-language="js"><span class="token keyword">let</span> accessHandle<span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">initOPFS</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> opfsRoot <span class="token operator">=</span> <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>storage<span class="token punctuation">.</span><span class="token function">getDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> fileHandle <span class="token operator">=</span> <span class="token keyword">await</span> opfsRoot<span class="token punctuation">.</span><span class="token function">getFileHandle</span><span class="token punctuation">(</span><span class="token string">"file.txt"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">create</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  accessHandle <span class="token operator">=</span> <span class="token keyword">await</span> fileHandle<span class="token punctuation">.</span><span class="token function">createSyncAccessHandle</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">"readwrite-unsafe"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">initOPFS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p>Inside the worker's <a href="../worker/message_event.html">message event</a> handler function, we first get the size of the file using <a href="../filesystemsyncaccesshandle/getsize.html"><code>getSize()</code></a>. We then check to see whether the data sent in the message includes a <code>command</code> property value of <code>"empty"</code>. If so, we empty the file using <a href="../filesystemsyncaccesshandle/truncate.html"><code>truncate()</code></a> with a value of <code>0</code>, and update the file size contained in the <code>size</code> variable.</p> <p>If the message data is something else, we:</p> <ul> <li>Create a new <a href="../textencoder.html"><code>TextEncoder</code></a> and <a href="../textdecoder.html"><code>TextDecoder</code></a> to handle encoding and decoding the text content later on.</li> <li>Encode the message data and write the result to the end of the file using <a href="../filesystemsyncaccesshandle/write.html"><code>write()</code></a>, then update the file size contained in the <code>size</code> variable.</li> <li>Create a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView"><code>DataView</code></a> to contain the file contents, and read the content into it using <a href="../filesystemsyncaccesshandle/read.html"><code>read()</code></a>.</li> <li>Decode the <code>DataView</code> contents and log it to the console.</li> </ul> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="q4jEFFEMqWldz0Hg1p4G5AbR4KQxnmHlhxm/A4nERwc=" data-language="js"><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Worker: Message received from main script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Get the current size of the file</span>
  <span class="token keyword">let</span> size <span class="token operator">=</span> accessHandle<span class="token punctuation">.</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">.</span>command <span class="token operator">===</span> <span class="token string">"empty"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Truncate the file to 0 bytes</span>
    accessHandle<span class="token punctuation">.</span><span class="token function">truncate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Get the current size of the file</span>
    size <span class="token operator">=</span> accessHandle<span class="token punctuation">.</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> textEncoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> textDecoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextDecoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Encode content to write to the file</span>
    <span class="token keyword">const</span> content <span class="token operator">=</span> textEncoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Write the content at the end of the file</span>
    accessHandle<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">at</span><span class="token operator">:</span> size <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Get the current size of the file</span>
    size <span class="token operator">=</span> accessHandle<span class="token punctuation">.</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Prepare a data view of the length of the file</span>
    <span class="token keyword">const</span> dataView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataView</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayBuffer</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Read the entire file into the data view</span>
    accessHandle<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>dataView<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">at</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Log the current file contents to the console</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"File contents: "</span> <span class="token operator">+</span> textDecoder<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>dataView<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Flush the changes</span>
    accessHandle<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Log the size of the file to the console</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Size: "</span> <span class="token operator">+</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre>
</div>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://fs.spec.whatwg.org/#api-filesystemfilehandle-createsyncaccesshandle">File System Standard <br><small># api-filesystemfilehandle-createsyncaccesshandle</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Opera</th>
<th>Safari</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
<th>WebView Android</th>
</tr>
</thead>
<tbody><tr>
<th><code>createSyncAccessHandle</code></th>
<td class="bc-supports-yes">102</td>
<td class="bc-supports-yes">102</td>
<td class="bc-supports-yes">111</td>
<td class="bc-supports-yes">88</td>
<td class="bc-supports-yes">15.2</td>
<td class="bc-supports-yes">109</td>
<td class="bc-supports-yes">111</td>
<td class="bc-supports-yes">74</td>
<td class="bc-supports-yes">15.2</td>
<td class="bc-supports-yes">21.0</td>
<td class="bc-supports-yes">109</td>
</tr></tbody>
</table></div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="../file_system_api.html">File System API</a></li> <li><a href="https://developer.chrome.com/docs/capabilities/web-apis/file-system-access" target="_blank">The File System Access API: simplifying access to local files</a></li> </ul></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/FileSystemFileHandle/createSyncAccessHandle" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/FileSystemFileHandle/createSyncAccessHandle</a>
  </p>
</div>
