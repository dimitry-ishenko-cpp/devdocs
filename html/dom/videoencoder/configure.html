<header><h1>VideoEncoder: configure() method</h1>
<details class="baseline-indicator not"><summary><h2><span class="not-bold">Limited availability</span></h2>

</summary><div class="extra">
<p>This feature is not Baseline because it does not work in some of the most widely-used browsers.</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Baseline/Compatibility" data-glean="baseline_link_learn_more" target="_blank" class="learn-more">Learn more</a></li>
<li><a href="#browser_compatibility" data-glean="baseline_link_bcd_table">See full compatibility</a></li>
<li><a href="https://survey.alchemer.com/s3/7634825/MDN-baseline-feedback?page=%2Fen-US%2Fdocs%2FWeb%2FAPI%2FVideoEncoder%2Fconfigure&amp;level=not" data-glean="baseline_link_feedback" class="feedback-link" target="_blank" rel="noreferrer">Report feedback</a></li>
</ul>
</div></details></header><div class="section-content">
<div class="notecard secure" id="sect1"><p><strong>Secure context:</strong> This feature is available only in <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts">secure contexts</a> (HTTPS), in some or all <a href="#browser_compatibility">supporting browsers</a>.</p></div>
<div class="notecard note" id="sect2"> <p><strong>Note:</strong> This feature is available in <a href="../dedicatedworkerglobalscope.html">Dedicated Web Workers</a>.</p> </div> <p>The <code>configure()</code> method of the <a href="../videoencoder.html"><code>VideoEncoder</code></a> interface changes the <a href="state.html"><code>state</code></a> of the encoder to "configured" and asynchronously prepares the encoder to accept <a href="../videoencoder.html"><code>VideoEncoder</code></a>s for encoding with the specified parameters. If the encoder doesn't support the specified parameters or can't be initialized for other reasons an error will be reported via the error callback provided to the <a href="../videoencoder.html"><code>VideoEncoder</code></a> constructor.</p> <p>If the <a href="../videoencoder.html"><code>VideoEncoder</code></a> has been previously configured, the new configuration will not be applied until all previous tasks have completed.</p>
</div>
<h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="t4xiMT65wr1v5RNdzPfnKeKaYKJb0ZEa2dcHl3r8y8M=" data-language="js"><span class="token function">configure</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>
</pre>
</div></div>
<h3 id="parameters">Parameters</h3>
<div class="section-content"><dl> <dt id="config"><a href="#config"><code>config</code></a></dt> <dd> <p>A dictionary object containing the following members:</p> <dl> <dt id="codec"><a href="#codec"><code>codec</code></a></dt> <dd> <p>A string containing a <a href="https://www.w3.org/TR/webcodecs-codec-registry/#audio-codec-registry" target="_blank">valid codec string</a>. See <a href="https://developer.mozilla.org/en-US/docs/Web/Media/Formats/codecs_parameter#codec_options_by_container">"codecs" parameter</a> for details on codec string construction.</p> </dd> <dt id="width">
<a href="#width"><code>width</code></a> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An integer representing the width of each output <a href="../encodedvideochunk.html"><code>EncodedVideoChunk</code></a> in pixels, before any ratio adjustments.</p> </dd> <dt id="height">
<a href="#height"><code>height</code></a> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An integer representing the height of each output <a href="../encodedvideochunk.html"><code>EncodedVideoChunk</code></a> in pixels, before any ratio adjustments.</p> </dd> <dt id="displaywidth">
<a href="#displaywidth"><code>displayWidth</code></a> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An integer representing the intended display width of each output <a href="../encodedvideochunk.html"><code>EncodedVideoChunk</code></a> in pixels when displayed.</p> </dd> <dt id="displayheight">
<a href="#displayheight"><code>displayHeight</code></a> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An integer representing the vertical dimension of each output <a href="../encodedvideochunk.html"><code>EncodedVideoChunk</code></a> in pixels when displayed.</p> </dd> <dt id="hardwareacceleration"><a href="#hardwareacceleration"><code>hardwareAcceleration</code></a></dt> <dd> <p>A hint that configures the hardware acceleration method of this codec. One of:</p> <ul> <li><code>"no-preference"</code></li> <li><code>"prefer-hardware"</code></li> <li><code>"prefer-software"</code></li> </ul> </dd> <dt id="bitrate"><a href="#bitrate"><code>bitrate</code></a></dt> <dd> <p>An integer containing the average bitrate of the encoded video in units of bits per second.</p> </dd> <dt id="framerate"><a href="#framerate"><code>framerate</code></a></dt> <dd> <p>An integer containing the expected frame rate in frames per second.</p> </dd> <dt id="alpha"><a href="#alpha"><code>alpha</code></a></dt> <dd> <p>A string indicating whether the alpha component of the <code>VideoFrame</code> inputs should be kept or discarded prior to encoding. One of:</p> <ul> <li>
<code>"discard"</code> (default)</li> <li><code>"keep"</code></li> </ul> </dd> <dt id="scalabilitymode"><a href="#scalabilitymode"><code>scalabilityMode</code></a></dt> <dd> <p>A string containing an encoding scalability mode identifier as defined in <a href="https://w3c.github.io/webrtc-svc/#scalabilitymodes*" target="_blank">WebRTC</a>.</p> </dd> <dt id="bitratemode">
<a href="#bitratemode"><code>bitrateMode</code></a> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A string containing a bitrate mode. One of:</p> <dl> <dt id="constant"><a href="#constant"><code>"constant"</code></a></dt> <dd> <p>The encoder will target constant bitrate.</p> </dd> <dt id="variable">
<a href="#variable"><code>"variable"</code></a> (default)</dt> <dd> <p>The encoder will target a variable bitrate, allowing more space to be used for complex signals and less space for less complex signals.</p> </dd> <dt id="quantizer"><a href="#quantizer"><code>"quantizer"</code></a></dt> <dd> <p>The encoder will disregard the <code>bitrate</code> option and instead it will use codec-specific quantizer values specified for each frame in the <code>options</code> parameter to <a href="encode.html"><code>VideoEncoder.encode()</code></a>.</p> </dd> </dl> </dd> <dt id="latencymode">
<a href="#latencymode"><code>latencyMode</code></a> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>A string containing a value that configures the latency behavior of this codec. One of:</p> <dl> <dt id="quality">
<a href="#quality"><code>"quality"</code></a> (default)</dt> <dd> <p>The encoder should optimize for encoding quality.</p> </dd> <dt id="realtime"><a href="#realtime"><code>"realtime"</code></a></dt> <dd> <p>The encoder should optimize for low latency and may even drop frames to honor <code>framerate</code>.</p> </dd> </dl> </dd> </dl> </dd> </dl></div>
<h3 id="return_value">Return value</h3>
<div class="section-content"><p>None (<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a>).</p></div>
<h3 id="exceptions">Exceptions</h3>
<div class="section-content"><dl> <dt id="typeerror"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError"><code>TypeError</code></a></dt> <dd> <p>Thrown if the provided <code>config</code> is invalid.</p> </dd> <dt id="invalidstateerror">
<a href="#invalidstateerror"><code>InvalidStateError</code></a> <a href="../domexception.html"><code>DOMException</code></a>
</dt> <dd> <p>Thrown if the <a href="state.html"><code>state</code></a> is <code>"closed"</code>.</p> </dd> <dt id="notsupportederror">
<a href="#notsupportederror"><code>NotSupportedError</code></a> <a href="../domexception.html"><code>DOMException</code></a>
</dt> <dd> <p>Thrown if the provided <code>config</code> is valid but the user agent cannot provide a codec that can decode this profile.</p> </dd> </dl></div>
<h2 id="examples">Examples</h2>
<div class="section-content">
<p>The following example creates a new <a href="../videoencoder.html"><code>VideoEncoder</code></a> and configures it with some of the available options.</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="CB30JLyh/Z0vaCXeVv5ZiErK1sRzbYIJte/2K3RQf+Q=" data-language="js"><span class="token keyword">const</span> init <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> handleChunk<span class="token punctuation">,</span>
  <span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">codec</span><span class="token operator">:</span> <span class="token string">"vp8"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">640</span><span class="token punctuation">,</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">480</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bitrate</span><span class="token operator">:</span> <span class="token number">2_000_000</span><span class="token punctuation">,</span> <span class="token comment">// 2 Mbps</span>
  <span class="token literal-property property">framerate</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> encoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VideoEncoder</span><span class="token punctuation">(</span>init<span class="token punctuation">)</span><span class="token punctuation">;</span>
encoder<span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://w3c.github.io/webcodecs/#dom-videoencoder-configure">WebCodecs <br><small># dom-videoencoder-configure</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Opera</th>
<th>Safari</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
<th>WebView Android</th>
</tr>
</thead>
<tbody><tr>
<th><code>configure</code></th>
<td class="bc-supports-yes">94</td>
<td class="bc-supports-yes">94</td>
<td class="bc-supports-yes"><details><summary>preview</summary>Only supported on Linux, see <a href="https://bugzil.la/1749047">bug 1749047</a>.</details></td>
<td class="bc-supports-yes">80</td>
<td class="bc-supports-yes">16.4</td>
<td class="bc-supports-yes">94</td>
<td class="bc-supports-no"><details><summary>No</summary>Only supported on Linux, see <a href="https://bugzil.la/1749047">bug 1749047</a>.</details></td>
<td class="bc-supports-yes">66</td>
<td class="bc-supports-yes">16.4</td>
<td class="bc-supports-yes">17.0</td>
<td class="bc-supports-yes">94</td>
</tr></tbody>
</table></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/VideoEncoder/configure" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/VideoEncoder/configure</a>
  </p>
</div>
