<header><h1>Local Font Access API</h1></header><div class="section-content">
<div class="notecard experimental" id="sect1"><p><strong>Experimental:</strong> <strong>This is an <a href="https://developer.mozilla.org/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental">experimental technology</a></strong><br>Check the <a href="#browser_compatibility">Browser compatibility table</a> carefully before using this in production.</p></div> <p>The <strong>Local Font Access API</strong> provides a mechanism to access the user's locally installed font data — this includes higher-level details such as names, styles, and families, as well as the raw bytes of the underlying font files.</p>
</div>
<h2 id="concepts_and_usage">Concepts and usage</h2>
<div class="section-content">
<p><a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Styling_text/Web_fonts">Web fonts</a> were revolutionary in enabling typography on the web by allowing web designers to provide custom fonts to use on a web document. Specified via the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face"><code>@font-face</code></a> at-rule, a web font can be loaded from a URL provided in the <code>url()</code> function.</p> <p><code>@font-face</code> has several other useful features available. In particular, you can also specify the font's full or Postscript name inside the <code>local()</code> function to tell the browser to use a local copy if the user has the font installed on their computer. This is not without its problems — <code>local()</code> has become notorious as a <a href="https://developer.chrome.com/articles/local-fonts/#local-fonts-as-fingerprint-vector" target="_blank">fingerprinting vector</a>.</p> <p>In addition, high-end design tools have historically been difficult to deliver on the web, due to challenges in accurate font enumeration and accessing low-level font data (for example, to apply filters and transformations). Current apps often rely on workarounds such as asking users to upload their fonts to a server where they are processed to get raw byte data, or installing a separate local program to provide additional capabilities.</p> <p>The Local Font Access API has been created to address these problems.</p> <p>The <a href="window/querylocalfonts.html"><code>Window.queryLocalFonts()</code></a> method provides access to an array of locally-installed fonts, each represented by a <a href="fontdata.html"><code>FontData</code></a> object instance. <a href="fontdata.html"><code>FontData</code></a> has several properties providing access to names, styles, and families, and it also has a <a href="fontdata/blob.html"><code>blob()</code></a> method providing access to a <a href="blob.html"><code>Blob</code></a> containing the raw bytes of the underlying font file.</p> <p>In terms of privacy and security:</p> <ul> <li>The Local Font Access API is designed to only provide access to the data required to solve the above problems. There is also no requirement for browsers to provide the full list of available local fonts, nor to provide the data in the same order as it appears on disk.</li> <li>When <a href="window/querylocalfonts.html"><code>Window.queryLocalFonts()</code></a> is invoked, the user is asked for permission to access their local fonts. The status of this permission can be queried via the <a href="permissions_api.html"><code>Permissions API</code></a> (the <code>local-fonts</code> permission).</li> <li>You can control access to this feature using a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Permissions-Policy/local-fonts"><code>local-fonts</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Permissions_Policy">Permissions Policy</a>.</li> </ul>
</div>
<h2 id="interfaces">Interfaces</h2>
<div class="section-content"><dl> <dt id="sect2"><a href="fontdata.html"><code>FontData</code></a></dt> <dd> <p>Represents a single local font face.</p> </dd> </dl></div>
<h2 id="extensions_to_other_interfaces">Extensions to other interfaces</h2>
<div class="section-content"><dl> <dt id="sect3"><a href="window/querylocalfonts.html"><code>Window.queryLocalFonts()</code></a></dt> <dd> <p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that fulfills with an array of <a href="fontdata.html"><code>FontData</code></a> objects representing the font faces available locally.</p> </dd> </dl></div>
<h2 id="examples">Examples</h2>
<div class="section-content"><p>For a working live demo, see <a href="https://local-font-access.glitch.me/demo/" target="_blank">Font Select Demo</a>.</p></div>
<h3 id="feature_detection">Feature detection</h3>
<div class="section-content"><div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="Ih6xF0jR5D+L0DoKs+Hie7HrID5YAz7l6cBt/ipcvZI=" data-language="js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"queryLocalFonts"</span> <span class="token keyword">in</span> window<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// The Local Font Access API is supported</span>
<span class="token punctuation">}</span>
</pre>
</div></div>
<h3 id="font_enumeration">Font enumeration</h3>
<div class="section-content">
<p>The following snippet will query for all available fonts, and log metadata. This could be used, for example, to populate a font-picker control.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="EFigaD81XSYC75YnXq2g4HU2mcOpUOQaD0a1WuSV47A=" data-language="js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">logFontData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> availableFonts <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span><span class="token function">queryLocalFonts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> fontData <span class="token keyword">of</span> availableFonts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fontData<span class="token punctuation">.</span>postscriptName<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fontData<span class="token punctuation">.</span>fullName<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fontData<span class="token punctuation">.</span>family<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fontData<span class="token punctuation">.</span>style<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>name<span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
</div>
</div>
<h3 id="accessing_low-level_data">Accessing low-level data</h3>
<div class="section-content">
<p>The <a href="fontdata/blob.html"><code>blob()</code></a> method provides access to low-level <a href="https://en.wikipedia.org/wiki/SFNT" target="_blank">SFNT</a> data — this is a font file format that can contain other font formats, such as PostScript, TrueType, OpenType, or Web Open Font Format (WOFF).</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="YZXAyL40O8VXusNqy++Su0hsjMt4MfV8bDrXPLUY6rM=" data-language="js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">computeOutlineFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> availableFonts <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span><span class="token function">queryLocalFonts</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">postscriptNames</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"ComicSansMS"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> fontData <span class="token keyword">of</span> availableFonts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// `blob()` returns a Blob containing valid and complete</span>
      <span class="token comment">// SFNT-wrapped font data.</span>
      <span class="token keyword">const</span> sfnt <span class="token operator">=</span> <span class="token keyword">await</span> fontData<span class="token punctuation">.</span><span class="token function">blob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// Slice out only the bytes we need: the first 4 bytes are the SFNT</span>
      <span class="token comment">// version info.</span>
      <span class="token comment">// Spec: https://docs.microsoft.com/en-us/typography/opentype/spec/otff#organization-of-an-opentype-font</span>
      <span class="token keyword">const</span> sfntVersion <span class="token operator">=</span> <span class="token keyword">await</span> sfnt<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">let</span> outlineFormat <span class="token operator">=</span> <span class="token string">"UNKNOWN"</span><span class="token punctuation">;</span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>sfntVersion<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">"\x00\x01\x00\x00"</span><span class="token operator">:</span>
        <span class="token keyword">case</span> <span class="token string">"true"</span><span class="token operator">:</span>
        <span class="token keyword">case</span> <span class="token string">"typ1"</span><span class="token operator">:</span>
          outlineFormat <span class="token operator">=</span> <span class="token string">"truetype"</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">"OTTO"</span><span class="token operator">:</span>
          outlineFormat <span class="token operator">=</span> <span class="token string">"cff"</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Outline format:"</span><span class="token punctuation">,</span> outlineFormat<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>name<span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
</div>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://wicg.github.io/local-font-access/#dom-window-querylocalfonts">Local Font Access <br><small># dom-window-querylocalfonts</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>Local_Font_Access_API</code></th>
<td class="bc-supports-yes">103</td>
<td class="bc-supports-yes">103</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
</tr></tbody>
</table></div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="https://developer.chrome.com/articles/local-fonts/" target="_blank">Use advanced typography with local fonts</a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face"><code>@font-face</code></a></li> <li>The <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Permissions-Policy/local-fonts"><code>local-fonts</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Permissions_Policy">Permissions Policy</a> directive</li> </ul></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Local_Font_Access_API" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/Local_Font_Access_API</a>
  </p>
</div>
