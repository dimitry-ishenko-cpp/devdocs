<header><h1>Document: caretPositionFromPoint() method</h1>
<details class="baseline-indicator not"><summary><h2><span class="not-bold">Limited availability</span></h2>

</summary><div class="extra">
<p>This feature is not Baseline because it does not work in some of the most widely-used browsers.</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Baseline/Compatibility" data-glean="baseline_link_learn_more" target="_blank" class="learn-more">Learn more</a></li>
<li><a href="#browser_compatibility" data-glean="baseline_link_bcd_table">See full compatibility</a></li>
<li><a href="https://survey.alchemer.com/s3/7634825/MDN-baseline-feedback?page=%2Fen-US%2Fdocs%2FWeb%2FAPI%2FDocument%2FcaretPositionFromPoint&amp;level=not" data-glean="baseline_link_feedback" class="feedback-link" target="_blank" rel="noreferrer">Report feedback</a></li>
</ul>
</div></details></header><div class="section-content"><p> The <code>caretPositionFromPoint()</code> method of the <a href="../document.html"><code>Document</code></a> interface returns a <a href="../caretposition.html"><code>CaretPosition</code></a> object, containing the DOM node, along with the caret and caret's character offset within that node. </p></div>
<h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="r7gyOVNypqxDOfQMAoNwgfZgrPbEbKSh/UQoDcVOGXA=" data-language="js"><span class="token function">caretPositionFromPoint</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
</pre>
</div></div>
<h3 id="parameters">Parameters</h3>
<div class="section-content"><dl> <dt id="x"><a href="#x"><code>x</code></a></dt> <dd> <p>The horizontal coordinate of a point.</p> </dd> <dt id="y"><a href="#y"><code>y</code></a></dt> <dd> <p>The vertical coordinate of a point.</p> </dd> </dl></div>
<h3 id="return_value">Return value</h3>
<div class="section-content"><p>A <a href="../caretposition.html"><code>CaretPosition</code></a> object.</p></div>
<h2 id="examples">Examples</h2>
<div class="section-content"><p>Click anywhere in the <strong>Demo</strong> paragraph below to insert a line break at the point where you click. The code for it is below the demo.</p></div>
<h3 id="demo">Demo</h3>
<div class="section-content">
<div class="code-example" id="sect1">

<iframe class="sample-code-frame" title="Examples sample" id="frame_examples" src="https://live.mdnplay.dev/en-US/docs/Web/API/Document/caretPositionFromPoint/runner.html?id=examples" sandbox="allow-same-origin allow-scripts" loading="lazy"></iframe>
</div> <p>The code below first checks for <code>document.caretPositionFromPoint</code> support, but if the browser doesn't support that, the code then checks for <a href="caretrangefrompoint.html"><code>document.caretRangeFromPoint</code></a>, and uses that instead.</p>
</div>
<h3 id="javascript">JavaScript</h3>
<div class="section-content">
<div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="L45vub3mu7Cy+ZWzIUAfJEwKy9koUOB0XedPo6yMX5c=" data-language="js"><span class="token keyword">function</span> <span class="token function">insertBreakAtPoint</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> range<span class="token punctuation">;</span>
  <span class="token keyword">let</span> textNode<span class="token punctuation">;</span>
  <span class="token keyword">let</span> offset<span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>caretPositionFromPoint<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    range <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">caretPositionFromPoint</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    textNode <span class="token operator">=</span> range<span class="token punctuation">.</span>offsetNode<span class="token punctuation">;</span>
    offset <span class="token operator">=</span> range<span class="token punctuation">.</span>offset<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>caretRangeFromPoint<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Use WebKit-proprietary fallback method</span>
    range <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">caretRangeFromPoint</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    textNode <span class="token operator">=</span> range<span class="token punctuation">.</span>startContainer<span class="token punctuation">;</span>
    offset <span class="token operator">=</span> range<span class="token punctuation">.</span>startOffset<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// Neither method is supported, do nothing</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Only split TEXT_NODEs</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>textNode<span class="token operator">?.</span>nodeType <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> replacement <span class="token operator">=</span> textNode<span class="token punctuation">.</span><span class="token function">splitText</span><span class="token punctuation">(</span>offset<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> br <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"br"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    textNode<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>br<span class="token punctuation">,</span> replacement<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> paragraphs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> paragraph <span class="token keyword">of</span> paragraphs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  paragraph<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> insertBreakAtPoint<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div> 
</div>
<h3 id="html">HTML</h3>
<div class="section-content">
 <div class="code-example">
<div class="example-header"><span class="language-name">html</span></div>
<pre data-signature="+L7d3yTMvp/oCwGdux0pR4sqYyXQPL2VSbYO2C86Atg=" data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
  Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy
  eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam
  voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita
  kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</pre>
</div> 
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://drafts.csswg.org/cssom-view/#dom-document-caretpositionfrompoint">CSSOM View Module <br><small># dom-document-caretpositionfrompoint</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Opera</th>
<th>Safari</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
<th>WebView Android</th>
</tr>
</thead>
<tbody><tr>
<th><code>caretPositionFromPoint</code></th>
<td class="bc-supports-yes">128</td>
<td class="bc-supports-yes">128</td>
<td class="bc-supports-yes">20</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">128</td>
<td class="bc-supports-yes">20</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">128</td>
</tr></tbody>
</table></div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="../caretposition.html"><code>CaretPosition</code></a></li> </ul></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/caretPositionFromPoint" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/Document/caretPositionFromPoint</a>
  </p>
</div>
