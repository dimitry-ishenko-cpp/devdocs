<header><h1>PerformanceResourceTiming: encodedBodySize property</h1></header><div class="section-content"><p> The <code>encodedBodySize</code> read-only property represents the size (in octets) received from the fetch (HTTP or cache) of the payload body before removing any applied content encodings (like gzip or Brotli). If the resource is retrieved from an application cache or a local resource, it must return the size of the payload body before removing any applied content encoding. </p></div>
<h2 id="value">Value</h2>
<div class="section-content">
<p>The <code>encodedBodySize</code> property can have the following values:</p> <ul> <li>A number representing the size (in octets) received from the fetch (HTTP or cache), of the payload body, before removing any applied content encoding.</li> <li>
<code>0</code> if the resource is a cross-origin request and no <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Timing-Allow-Origin"><code>Timing-Allow-Origin</code></a> HTTP response header is used.</li> </ul>
</div>
<h2 id="examples">Examples</h2>

<h3 id="checking_if_content_was_compressed">Checking if content was compressed</h3>
<div class="section-content">
<p>If the <code>encodedBodySize</code> and <a href="decodedbodysize.html"><code>decodedBodySize</code></a> properties are non-null and differ, the content was compressed (for example, gzip or Brotli).</p> <p>Example using a <a href="../performanceobserver.html"><code>PerformanceObserver</code></a>, which notifies of new <code>resource</code> performance entries as they are recorded in the browser's performance timeline. Use the <code>buffered</code> option to access entries from before the observer creation.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="Ttfm6FZ0lxXsit/ElWH98gP4otgt/rjMtpMDB0TBYmk=" data-language="js"><span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PerformanceObserver</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  list<span class="token punctuation">.</span><span class="token function">getEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">entry</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> uncompressed <span class="token operator">=</span>
      entry<span class="token punctuation">.</span>decodedBodySize <span class="token operator">&amp;&amp;</span> entry<span class="token punctuation">.</span>decodedBodySize <span class="token operator">===</span> entry<span class="token punctuation">.</span>encodedBodySize<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>uncompressed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>entry<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> was not compressed!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"resource"</span><span class="token punctuation">,</span> <span class="token literal-property property">buffered</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p>Example using <a href="../performance/getentriesbytype.html"><code>Performance.getEntriesByType()</code></a>, which only shows <code>resource</code> performance entries present in the browser's performance timeline at the time you call this method:</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="0rOfDPS/kYNxh8SxZT29pPCPA+/JcZBcaA+rCpyslKo=" data-language="js"><span class="token keyword">const</span> resources <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">getEntriesByType</span><span class="token punctuation">(</span><span class="token string">"resource"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
resources<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">entry</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> uncompressed <span class="token operator">=</span>
    entry<span class="token punctuation">.</span>decodedBodySize <span class="token operator">&amp;&amp;</span> entry<span class="token punctuation">.</span>decodedBodySize <span class="token operator">===</span> entry<span class="token punctuation">.</span>encodedBodySize<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>uncompressed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>entry<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> was not compressed!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div>
</div>
<h3 id="cross-origin_content_size_information">Cross-origin content size information</h3>
<div class="section-content">
<p>If the value of the <code>encodedBodySize</code> property is <code>0</code>, the resource might be a cross-origin request. To expose cross-origin content size information, the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Timing-Allow-Origin"><code>Timing-Allow-Origin</code></a> HTTP response header needs to be set.</p> <p>For example, to allow <code>https://developer.mozilla.org</code> to see content sizes, the cross-origin resource should send:</p> <div class="code-example">
<p class="example-header"><span class="language-name">http</span></p>
<pre data-signature="XmXtiJrbKuPHKdV27fcR2RixWwa+L3l/ym1GLRNMBjw=" data-language="http"><span class="token header"><span class="token header-name keyword">Timing-Allow-Origin</span><span class="token punctuation">:</span> <span class="token header-value">https://developer.mozilla.org</span></span>
</pre>
</div>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://w3c.github.io/resource-timing/#dom-performanceresourcetiming-encodedbodysize">Resource Timing <br><small># dom-performanceresourcetiming-encodedbodysize</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>encodedBodySize</code></th>
<td class="bc-supports-yes">54</td>
<td class="bc-supports-yes">17</td>
<td class="bc-supports-yes">45</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">41</td>
<td class="bc-supports-yes">16.4</td>
<td class="bc-supports-yes">54</td>
<td class="bc-supports-yes">54</td>
<td class="bc-supports-yes">45</td>
<td class="bc-supports-yes">41</td>
<td class="bc-supports-yes">16.4</td>
<td class="bc-supports-yes">6.0</td>
</tr></tbody>
</table></div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Timing-Allow-Origin"><code>Timing-Allow-Origin</code></a></li> </ul></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/PerformanceResourceTiming/encodedBodySize" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/PerformanceResourceTiming/encodedBodySize</a>
  </p>
</div>
