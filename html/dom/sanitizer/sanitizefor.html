<header><h1>Sanitizer: sanitizeFor() method</h1></header><div class="section-content">
<div class="notecard experimental" id="sect1"><p><strong>Experimental:</strong> <strong>This is an <a href="https://developer.mozilla.org/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental">experimental technology</a></strong><br>Check the <a href="#browser_compatibility">Browser compatibility table</a> carefully before using this in production.</p></div>
<div class="notecard secure" id="sect2"><p><strong>Secure context:</strong> This feature is available only in <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts">secure contexts</a> (HTTPS), in some or all <a href="#browser_compatibility">supporting browsers</a>.</p></div> <p>The <code>sanitizeFor()</code> method of the <a href="../sanitizer.html"><code>Sanitizer</code></a> interface is used to parse and sanitize a string of HTML for insertion into the DOM at some later point.</p> <p> The method accepts the tag name of the eventual destination HTML element as a parameter, and returns an HTML element object (of that type) that contains the sanitized subtree as its child. This context is needed because the result of parsing an HTML string depends on where it is used. For example, <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/td"><code>&lt;td&gt;</code></a> elements are valid nodes when inserted into a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/table"><code>&lt;table&gt;</code></a> but will be skipped/ignored when parsed into a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/div"><code>&lt;div&gt;</code></a>. </p> <p> The subtree <strong>must</strong> be inserted into an element of the same type as the returned object (and the original <code>element</code> parameter). If the caller extracts the sanitized subtree from the object, for example by using <code>innerHTML</code>, it is their responsibility to ensure the correct context is used when it is inserted in the DOM. </p> <p> The default <code>Sanitizer()</code> configuration strips out XSS-relevant input by default, including <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script"><code>&lt;script&gt;</code></a> tags, custom elements, and comments. The sanitizer configuration may be customized using <a href="sanitizer.html"><code>Sanitizer()</code></a> constructor options. </p> <div class="notecard note" id="sect3"> <p><strong>Note:</strong> Use <a href="../element/sethtml.html"><code>Element.setHTML()</code></a> instead of this method if the target element is available for immediate update.</p> </div>
</div>
<h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="dhp0I/hU+elFhteaziQzcx7P0BTCVaV8ZyZNUAAfhoI=" data-language="js"><span class="token function">sanitizeFor</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> input<span class="token punctuation">)</span>
</pre>
</div></div>
<h3 id="parameters">Parameters</h3>
<div class="section-content"><dl> <dt id="element"><a href="#element"><code>element</code></a></dt> <dd> <p> A string indicating the HTML tag of the element into which the <code>input</code> is to be inserted. For example <code>"div"</code>, <code>"table"</code>, <code>"p"</code>, and so on. </p> </dd> <dt id="input"><a href="#input"><code>input</code></a></dt> <dd> <p>A string of HTML to be sanitized.</p> </dd> </dl></div>
<h3 id="return_value">Return value</h3>
<div class="section-content">
<p>An HTML element corresponding to the tag specified in the <code>element</code> parameter, containing the parsed and sanitized <code>input</code> string as a DOM subtree.</p> <p>For example, if the <code>input</code> was <code>"div"</code> then the return value would be a <a href="../htmldivelement.html"><code>HTMLDivElement</code></a>.</p>
</div>
<h3 id="exceptions">Exceptions</h3>
<div class="section-content"><p>None.</p></div>
<h2 id="examples">Examples</h2>
<div class="section-content">
<p>The code below demonstrates how to sanitize a string of HTML into a <code>div</code> element.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="gotyLcEnwhgbMt3dUAIDKNhz8Gm1joXfHjiipLiAztQ=" data-language="js"><span class="token keyword">const</span> unsanitized_string <span class="token operator">=</span> <span class="token string">"abc &lt;script&gt;alert(1)&lt;"</span> <span class="token operator">+</span> <span class="token string">"/script&gt; def"</span><span class="token punctuation">;</span> <span class="token comment">// Unsanitized string of HTML</span>
<span class="token keyword">const</span> sanitizer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sanitizer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Default sanitizer;</span>

<span class="token comment">// Sanitize the string</span>
<span class="token keyword">const</span> sanitizedDiv <span class="token operator">=</span> sanitizer<span class="token punctuation">.</span><span class="token function">sanitizeFor</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">,</span> unsanitized_string<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//We can verify the returned element type, and view sanitized HTML in string form:</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sanitizedDiv <span class="token keyword">instanceof</span> <span class="token class-name">HTMLDivElement</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sanitizedDiv<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// "abc  def"</span>

<span class="token comment">// At some point later…</span>

<span class="token comment">// Get the element to update. This must be a div to match our sanitizeFor() context.</span>
<span class="token comment">// Set its content to be the children of our sanitized element.</span>
document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"div#target"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceChildren</span><span class="token punctuation">(</span>sanitizedDiv<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://wicg.github.io/sanitizer-api/#dom-sanitizer-sanitizefor">HTML Sanitizer API <br><small># dom-sanitizer-sanitizefor</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>sanitizeFor</code></th>
<td class="bc-supports-no">93–119</td>
<td class="bc-supports-no">93–119</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">93–119</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
</tr></tbody>
</table></div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="../element/sethtml.html"><code>Element.setHTML()</code></a></li> <li><a href="../html_sanitizer_api.html"><code>HTML Sanitizer API</code></a></li> </ul></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Sanitizer/sanitizeFor" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/Sanitizer/sanitizeFor</a>
  </p>
</div>
