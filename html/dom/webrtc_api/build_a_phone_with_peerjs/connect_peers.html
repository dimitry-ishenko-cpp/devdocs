<header><h1>Connecting the peers</h1></header><div class="section-content">
<ul class="prev-next">
<li><a class="button secondary" href="build_the_server.html"><span class="button-wrap"> Previous </span></a></li>
<li><a class="button secondary" href="connect_peers/get_microphone_permission.html"><span class="button-wrap"> Next </span></a></li>
</ul> <p>In the last article we set up our server, but it doesn't do anything yet because we are not serving anything. This is the part you've been waiting for — actually creating the client-side peer connection and call logic. This is going to be an involved process, but we've split it into numerous subsections so you can tackle the different parts in easy bite-sized chunks.</p> <ol> <li> <p>First up, create a <code>script.js</code> file in the same location as the others — this is where all your logic will live.</p> </li> <li> <p>We need to create a peer object with an ID. The ID will be used to connect two peers together and if you don't create one, one will be assigned to the peer. Add the following to <code>script.js</code>:</p> <div class="code-example"><pre data-language="js">const peer = new Peer(
  `${Math.floor(Math.random() * 2 ** 18)
    .toString(36)
    .padStart(4, 0)}`,
  {
    host: location.hostname,
    debug: 1,
    path: "/myapp",
  },
);
</pre></div> </li> <li> <p>You'll then need to attach the peer to the window so that it's accessible. Add the following line below your previous code:</p> <div class="code-example"><pre data-language="js">window.peer = peer;
</pre></div> </li> <li> <p>In another terminal window, start the peer server by running the following command inside the root of your phone app directory:</p> <div class="code-example"><pre data-language="bash">peerjs --port 443 --key peerjs --path /myapp
</pre></div> </li> </ol> <p>This looks very similar to the peer server we created in the last step; this is the client-side portion. In order for the browser to connect to the running peer server, we need to tell it how; this is what the above line does.</p> <ul class="prev-next">
<li><a class="button secondary" href="build_the_server.html"><span class="button-wrap"> Previous </span></a></li>
<li><a class="button secondary" href="connect_peers/get_microphone_permission.html"><span class="button-wrap"> Next </span></a></li>
</ul>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2024 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API/Build_a_phone_with_peerjs/Connect_peers" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API/Build_a_phone_with_peerjs/Connect_peers</a>
  </p>
</div>
