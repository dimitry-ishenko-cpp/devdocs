<header><h1>BeforeUnloadEvent</h1></header><div class="section-content">
<p>The <code>BeforeUnloadEvent</code> interface represents the event object for the <a href="window/beforeunload_event.html"><code>beforeunload</code></a> event, which is fired when the current window, contained document, and associated resources are about to be unloaded.</p> <p>See the <a href="window/beforeunload_event.html"><code>beforeunload</code></a> event reference for detailed guidance on using this event.</p>
<svg viewbox="-1 -1 650 42" preserveaspectratio="xMinYMin meet"> <a style="text-decoration: none;" xlink:href="/en-US/docs/Web/API/Event.html">  <text x="37.5" y="16" font-size="10px" fill="#4D4E53" text-anchor="middle"> Event </text> </a>   <a style="text-decoration: none;" xlink:href="/en-US/docs/Web/API/BeforeUnloadEvent.html" aria-current="page">  <text x="173" y="16" font-size="10px" fill="#4D4E53" text-anchor="middle"> BeforeUnloadEvent </text> </a></svg>
</div>
<h2 id="instance_properties">Instance properties</h2>
<div class="section-content">
<p><em>Inherits properties from its parent, <a href="event.html"><code>Event</code></a>.</em></p> <dl> <dt id="sect1">
<a href="beforeunloadevent/returnvalue.html"><code>returnValue</code></a> <abbr class="icon icon-deprecated" title="Deprecated. Not for use in new websites."> <span class="visually-hidden">Deprecated</span> </abbr>
</dt> <dd> <p>When set to a <a href="https://developer.mozilla.org/en-US/docs/Glossary/Truthy">truthy</a> value, triggers a browser-controlled confirmation dialog asking users to confirm if they want to leave the page when they try to close or reload it. This is a legacy feature, and best practice is to trigger the dialog by invoking <code>event.preventDefault()</code> instead, as shown in the example.</p> </dd> </dl>
</div>
<h2 id="instance_methods">Instance methods</h2>
<div class="section-content"><p><em>Inherits methods from its parent, <a href="event.html"><code>Event</code></a>.</em></p></div>
<h2 id="examples">Examples</h2>
<div class="section-content">
<p>In the following example we have an HTML text <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input"><code>&lt;input&gt;</code></a> to represent some data that could be changed and require saving:</p> <div class="code-example">
<p class="example-header"><span class="language-name">html</span></p>
<pre data-signature="YbX3F0FQ7Thonv9B/929qIllzejsgNlidgnkJbZnC1Q=" data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</pre>
</div> <p>Our JavaScript attaches an <a href="htmlelement/input_event.html"><code>input</code></a> event listener to the <code>&lt;input&gt;</code> element that listens for changes in the inputted value. When the value is updated to a non-empty value, a <a href="window/beforeunload_event.html"><code>beforeunload</code></a> event listener is attached to the <a href="window.html"><code>Window</code></a> object.</p> <p>If the value becomes an empty string again (i.e. the value is deleted), the <code>beforeunload</code> event listener is removed again. It would be more efficient to just add the <code>beforeunload</code> listener once, and conditionally call <code>preventDefault()</code> based on the value of the target input. Best practice however is to add the listener when needed (i.e. when there is unsaved data that could be lost) and remove it again when it is not needed, for reasons outlined in the <a href="window/beforeunload_event.html#usage_notes"><code>beforeunload</code> event usage notes</a>.</p> <p>The <code>beforeunload</code> event handler function invokes <code>preventDefault()</code> to trigger the warning dialog when the user closes or navigates the tab.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="47EiGputko0tuJxBr/DIXWVvJ4rKBkW3l9zqpB5rxrQ=" data-language="js"><span class="token keyword">const</span> <span class="token function-variable function">beforeUnloadHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> nameInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

nameInput<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token operator">!==</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"beforeunload"</span><span class="token punctuation">,</span> beforeUnloadHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">"beforeunload"</span><span class="token punctuation">,</span> beforeUnloadHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p>When the <code>&lt;input&gt;</code> value is non-empty, if you try to close, navigate, or reload the page the browser displays the warning dialog. Try it out:</p>
<div class="code-example" id="sect2">

<iframe class="sample-code-frame" title="Examples sample" id="frame_examples" width="100%" height="60" src="https://live.mdnplay.dev/en-US/docs/Web/API/BeforeUnloadEvent/runner.html?id=examples" loading="lazy"></iframe>
</div> <div class="notecard note" id="sect3"> <p><strong>Note:</strong> The browser-generated confirmation dialog can also be triggered by setting the <a href="beforeunloadevent/returnvalue.html"><code>event.returnValue</code></a> property to a truthy value on the <code>beforeunload</code> event object, or by returning a truthy value from the event handler function. However, these are legacy mechanisms, and best practice is to trigger the dialog by invoking <code>event.preventDefault()</code> as shown in the example above.</p> </div>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#the-beforeunloadevent-interface">HTML Standard <br><small># the-beforeunloadevent-interface</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>BeforeUnloadEvent</code></th>
<td class="bc-supports-yes">30</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">1.5</td>
<td class="bc-supports-yes">4</td>
<td class="bc-supports-yes">17</td>
<td class="bc-supports-yes">7</td>
<td class="bc-supports-yes">≤37</td>
<td class="bc-supports-yes">30</td>
<td class="bc-supports-yes">4</td>
<td class="bc-supports-yes">18</td>
<td class="bc-supports-yes">7</td>
<td class="bc-supports-yes">3.0</td>
</tr>
<tr>
<th><code>returnValue</code></th>
<td class="bc-supports-yes">119<details><summary>30–119</summary>Before Chrome 119, an empty string incorrectly activated the confirmation dialog.</details>
</td>
<td class="bc-supports-yes">119<details><summary>79–119</summary>Before Edge 119, an empty string incorrectly activated the confirmation dialog.</details>
</td>
<td class="bc-supports-yes">1.5</td>
<td class="bc-supports-yes">9</td>
<td class="bc-supports-yes"><details><summary>17</summary>Before Opera false, an empty string incorrectly activated the confirmation dialog.</details></td>
<td class="bc-supports-yes">7</td>
<td class="bc-supports-yes">≤37</td>
<td class="bc-supports-yes">119<details><summary>30–119</summary>Before Chrome 119, an empty string incorrectly activated the confirmation dialog.</details>
</td>
<td class="bc-supports-yes">4</td>
<td class="bc-supports-yes"><details><summary>18</summary>Before Opera false, an empty string incorrectly activated the confirmation dialog.</details></td>
<td class="bc-supports-yes">7</td>
<td class="bc-supports-yes">3.0</td>
</tr>
<tr>
<th><code>user_interaction</code></th>
<td class="bc-supports-yes">60</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">44</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">47</td>
<td class="bc-supports-yes">11</td>
<td class="bc-supports-yes">60</td>
<td class="bc-supports-yes">60</td>
<td class="bc-supports-yes">44</td>
<td class="bc-supports-yes">44</td>
<td class="bc-supports-yes">11</td>
<td class="bc-supports-yes">8.0</td>
</tr>
</tbody>
</table></div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li>
<a href="window/beforeunload_event.html"><code>beforeunload</code></a> event</li> </ul></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/BeforeUnloadEvent" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/BeforeUnloadEvent</a>
  </p>
</div>
