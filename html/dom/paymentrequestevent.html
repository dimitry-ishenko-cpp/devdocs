<header><h1>PaymentRequestEvent</h1></header><div class="section-content">
<div class="notecard experimental" id="sect1"><p><strong>Experimental:</strong> <strong>This is an <a href="https://developer.mozilla.org/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental">experimental technology</a></strong><br>Check the <a href="#browser_compatibility">Browser compatibility table</a> carefully before using this in production.</p></div> <p>The <code>PaymentRequestEvent</code> interface of the <a href="payment_request_api.html">Payment Request API</a> is the object passed to a payment handler when a <a href="paymentrequest.html"><code>PaymentRequest</code></a> is made.</p>
<svg viewbox="-1 -1 650 42" preserveaspectratio="xMinYMin meet"> <a style="text-decoration: none;" xlink:href="/en-US/docs/Web/API/Event.html">  <text x="37.5" y="16" font-size="10px" fill="#4D4E53" text-anchor="middle"> Event </text> </a>   <a style="text-decoration: none;" xlink:href="/en-US/docs/Web/API/ExtendableEvent.html">  <text x="165" y="16" font-size="10px" fill="#4D4E53" text-anchor="middle"> ExtendableEvent </text> </a>   <a style="text-decoration: none;" xlink:href="/en-US/docs/Web/API/PaymentRequestEvent.html" aria-current="page">  <text x="331" y="16" font-size="10px" fill="#4D4E53" text-anchor="middle"> PaymentRequestEvent </text> </a></svg>
</div>
<h2 id="constructor">Constructor</h2>
<div class="section-content"><dl> <dt id="sect2">
<a href="paymentrequestevent/paymentrequestevent.html"><code>PaymentRequestEvent()</code></a> <abbr class="icon icon-experimental" title="Experimental. Expect behavior to change in the future."> <span class="visually-hidden">Experimental</span> </abbr>
</dt> <dd> <p>Creates a new <code>PaymentRequestEvent</code> object instance.</p> </dd> </dl></div>
<h2 id="instance_properties">Instance properties</h2>
<div class="section-content"><dl> <dt id="sect3">
<a href="paymentrequestevent/instrumentkey.html"><code>instrumentKey</code></a> <span class="badge inline readonly">Read only </span> <abbr class="icon icon-deprecated" title="Deprecated. Not for use in new websites."> <span class="visually-hidden">Deprecated</span> </abbr> <abbr class="icon icon-nonstandard" title="Non-standard. Check cross-browser support before using."> <span class="visually-hidden">Non-standard</span> </abbr>
</dt> <dd> <p>Returns a <a class="page-not-created"><code>PaymentInstrument</code></a> object reflecting the payment instrument selected by the user or an empty string if the user has not registered or chosen a payment instrument.</p> </dd> <dt id="sect4">
<a href="paymentrequestevent/methoddata.html"><code>methodData</code></a> <span class="badge inline readonly">Read only </span> <abbr class="icon icon-experimental" title="Experimental. Expect behavior to change in the future."> <span class="visually-hidden">Experimental</span> </abbr>
</dt> <dd> <p>Returns an array of <a class="page-not-created"><code>PaymentMethodData</code></a> objects containing payment method identifiers for the payment methods that the website accepts and any associated payment method specific data.</p> </dd> <dt id="sect5">
<a href="paymentrequestevent/modifiers.html"><code>modifiers</code></a> <span class="badge inline readonly">Read only </span> <abbr class="icon icon-experimental" title="Experimental. Expect behavior to change in the future."> <span class="visually-hidden">Experimental</span> </abbr>
</dt> <dd> <p>Returns an array of objects containing changes to payment details.</p> </dd> <dt id="sect6">
<a href="paymentrequestevent/paymentrequestid.html"><code>paymentRequestId</code></a> <span class="badge inline readonly">Read only </span> <abbr class="icon icon-experimental" title="Experimental. Expect behavior to change in the future."> <span class="visually-hidden">Experimental</span> </abbr>
</dt> <dd> <p>Returns the ID of the <a href="paymentrequest.html"><code>PaymentRequest</code></a> object.</p> </dd> <dt id="sect7">
<a href="paymentrequestevent/paymentrequestorigin.html"><code>paymentRequestOrigin</code></a> <span class="badge inline readonly">Read only </span> <abbr class="icon icon-experimental" title="Experimental. Expect behavior to change in the future."> <span class="visually-hidden">Experimental</span> </abbr>
</dt> <dd> <p>Returns the origin where the <a href="paymentrequest.html"><code>PaymentRequest</code></a> object was initialized.</p> </dd> <dt id="sect8">
<a href="paymentrequestevent/toporigin.html"><code>topOrigin</code></a> <span class="badge inline readonly">Read only </span> <abbr class="icon icon-experimental" title="Experimental. Expect behavior to change in the future."> <span class="visually-hidden">Experimental</span> </abbr>
</dt> <dd> <p>Returns the top-level origin where the <a href="paymentrequest.html"><code>PaymentRequest</code></a> object was initialized.</p> </dd> <dt id="sect9">
<a href="paymentrequestevent/total.html"><code>total</code></a> <span class="badge inline readonly">Read only </span> <abbr class="icon icon-experimental" title="Experimental. Expect behavior to change in the future."> <span class="visually-hidden">Experimental</span> </abbr>
</dt> <dd> <p>Returns the total amount being requested for payment.</p> </dd> </dl></div>
<h2 id="instance_methods">Instance methods</h2>
<div class="section-content"><dl> <dt id="sect10">
<a href="paymentrequestevent/openwindow.html"><code>openWindow()</code></a> <abbr class="icon icon-experimental" title="Experimental. Expect behavior to change in the future."> <span class="visually-hidden">Experimental</span> </abbr>
</dt> <dd> <p>Opens the specified URL in a new window, if and only if the given URL is on the same origin as the calling page. It returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that resolves with a reference to a <a href="windowclient.html"><code>WindowClient</code></a>.</p> </dd> <dt id="sect11">
<a href="paymentrequestevent/respondwith.html"><code>respondWith()</code></a> <abbr class="icon icon-experimental" title="Experimental. Expect behavior to change in the future."> <span class="visually-hidden">Experimental</span> </abbr>
</dt> <dd> <p>Prevents the default event handling and allows you to provide a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> for a <a href="paymentresponse.html"><code>PaymentResponse</code></a> object yourself.</p> </dd> </dl></div>
<h2 id="examples">Examples</h2>
<div class="section-content">
<p>When the <a href="paymentrequest/show.html"><code>PaymentRequest.show()</code></a> method is invoked, a <a href="serviceworkerglobalscope/paymentrequest_event.html"><code>paymentrequest</code></a> event is fired on the service worker of the payment app. This event is listened for inside the payment app's service worker to begin the next stage of the payment process.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="/nv3vTqZSnsdOvGjTgQh6Vi4xLcssKTMIVyPYR3kDQw=" data-language="js"><span class="token keyword">let</span> payment_request_event<span class="token punctuation">;</span>
<span class="token keyword">let</span> resolver<span class="token punctuation">;</span>
<span class="token keyword">let</span> client<span class="token punctuation">;</span>

<span class="token comment">// `self` is the global object in service worker</span>
self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"paymentrequest"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>payment_request_event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// If there's an ongoing payment transaction, reject it.</span>
    resolver<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Preserve the event for future use</span>
  payment_request_event <span class="token operator">=</span> e<span class="token punctuation">;</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p>When a <code>paymentrequest</code> event is received, the payment app can open a payment handler window by calling <a href="paymentrequestevent/openwindow.html"><code>PaymentRequestEvent.openWindow()</code></a>. The payment handler window will present the customers with a payment app interface where they can authenticate, choose shipping address and options, and authorize the payment.</p> <p>When the payment has been handled, <a href="paymentrequestevent/respondwith.html"><code>PaymentRequestEvent.respondWith()</code></a> is used to pass the payment result back to the merchant website.</p> <p>See <a href="https://web.dev/orchestrating-payment-transactions/#receive-payment-request-event" target="_blank">Receive a payment request event from the merchant</a> for more details of this stage.</p>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://w3c.github.io/payment-handler/#the-paymentrequestevent">Payment Handler API <br><small># the-paymentrequestevent</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>PaymentRequestEvent</code></th>
<td class="bc-supports-yes">70</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">57</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">70</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">49</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">10.0</td>
</tr>
<tr>
<th><code>PaymentRequestEvent</code></th>
<td class="bc-supports-yes">70</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">57</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">70</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">49</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">10.0</td>
</tr>
<tr>
<th><code>changePaymentMethod</code></th>
<td class="bc-supports-yes">76</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">63</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">76</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">54</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">12.0</td>
</tr>
<tr>
<th><code>changeShippingAddress</code></th>
<td class="bc-supports-yes">80</td>
<td class="bc-supports-yes">80</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">67</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">80</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">57</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">13.0</td>
</tr>
<tr>
<th><code>changeShippingOption</code></th>
<td class="bc-supports-yes">80</td>
<td class="bc-supports-yes">80</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">67</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">80</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">57</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">13.0</td>
</tr>
<tr>
<th><code>instrumentKey</code></th>
<td class="bc-supports-no">70–111</td>
<td class="bc-supports-no">79–111</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">57–97</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">70–111</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">49</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">10.0–22.0</td>
</tr>
<tr>
<th><code>methodData</code></th>
<td class="bc-supports-yes">70</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">57</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">70</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">49</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">10.0</td>
</tr>
<tr>
<th><code>modifiers</code></th>
<td class="bc-supports-yes">70</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">57</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">70</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">49</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">10.0</td>
</tr>
<tr>
<th><code>openWindow</code></th>
<td class="bc-supports-yes">70</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">57</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">70</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">49</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">10.0</td>
</tr>
<tr>
<th><code>paymentOptions</code></th>
<td class="bc-supports-yes">80</td>
<td class="bc-supports-yes">80</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">67</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">80</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">57</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">13.0</td>
</tr>
<tr>
<th><code>paymentRequestId</code></th>
<td class="bc-supports-yes">70</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">57</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">70</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">49</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">10.0</td>
</tr>
<tr>
<th><code>paymentRequestOrigin</code></th>
<td class="bc-supports-yes">70</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">57</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">70</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">49</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">10.0</td>
</tr>
<tr>
<th><code>respondWith</code></th>
<td class="bc-supports-yes">70</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">57</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">70</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">49</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">10.0</td>
</tr>
<tr>
<th><code>shippingOptions</code></th>
<td class="bc-supports-yes">80</td>
<td class="bc-supports-yes">80</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">67</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">80</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">57</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">13.0</td>
</tr>
<tr>
<th><code>topOrigin</code></th>
<td class="bc-supports-yes">70</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">57</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">70</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">49</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">10.0</td>
</tr>
<tr>
<th><code>total</code></th>
<td class="bc-supports-yes">70</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">57</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">70</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">49</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">10.0</td>
</tr>
</tbody>
</table></div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="https://web.dev/web-based-payment-apps-overview/" target="_blank">Web-based payment apps overview</a></li> <li><a href="https://web.dev/setting-up-a-payment-method/" target="_blank">Setting up a payment method</a></li> <li><a href="https://web.dev/life-of-a-payment-transaction/" target="_blank">Life of a payment transaction</a></li> <li><a href="payment_request_api/using_the_payment_request_api.html">Using the Payment Request API</a></li> <li><a href="payment_request_api/concepts.html">Payment processing concepts</a></li> </ul></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/PaymentRequestEvent" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/PaymentRequestEvent</a>
  </p>
</div>
