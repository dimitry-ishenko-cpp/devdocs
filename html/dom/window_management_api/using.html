<header><h1>Using the Window Management API</h1></header><div class="section-content"><p>This guide explains how to use the <a href="../window_management_api.html">Window Management API</a>. The example code seen below is taken from our <a href="https://mdn.github.io/dom-examples/window-management-api/" target="_blank">Multi-window learning environment</a> example (see the <a href="https://github.com/mdn/dom-examples/tree/main/window-management-api" target="_blank">source code</a>).</p></div>
<h2 id="feature_detection">Feature detection</h2>
<div class="section-content">
<p>You can feature detect the Window Management API by checking for the existence of <code>getScreenDetails</code> in the current <code>window</code> instance. For example, you might want to provide a button to open a multi-window display if the API is supported, or a different experience such as creating links to the different pages if it isn't:</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="6lK1J53Zx2I/9SFRQF8KOiIC9Kg4zFKByStLwDtTc8U=" data-language="js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"getScreenDetails"</span> <span class="token keyword">in</span> window<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// The Window Management API is supported</span>
  <span class="token function">createButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// The Window Management API is not supported</span>
  <span class="token function">createLinks</span><span class="token punctuation">(</span>sites<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div>
</div>
<h2 id="basic_usage">Basic usage</h2>
<div class="section-content">
<p>The core of the Windows Management API is the <a href="../window/getscreendetails.html"><code>Window.getScreenDetails()</code></a> method, which returns an object containing details of all the screens available to the user's system:</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="/zdODNR8+qKJR5GWvBiPod+eROle/8b/+eOElLJ80KY=" data-language="js"><span class="token keyword">const</span> screenDetails <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span><span class="token function">getScreenDetails</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Return the number of screens</span>
<span class="token keyword">const</span> noOfScreens <span class="token operator">=</span> screenDetails<span class="token punctuation">.</span>screens<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
</pre>
</div> <p>When <code>getScreenDetails()</code> is invoked, the user will be asked for permission to manage windows on all their displays (the status of this permission can be checked using <a href="../permissions/query.html"><code>Permissions.query()</code></a> to query <code>window-management</code>). If the user grants permission, a <a href="../screendetails.html"><code>ScreenDetails</code></a> object is returned. This object contains the following properties:</p> <ul> <li>
<code>screens</code>: An array of <a href="../screendetailed.html"><code>ScreenDetailed</code></a> objects, each one containing detailed information about a separate screen available to the system (see below). This array is also useful for determining the number of available screens, via <code>screens.length</code>.</li> <li>
<code>currentScreen</code>: A single <a href="../screendetailed.html"><code>ScreenDetailed</code></a> object containing detailed information about the screen that the current browser window is displayed in.</li> </ul> <p><a href="../screendetailed.html"><code>ScreenDetailed</code></a> objects inherit the properties of the <a href="../screen.html"><code>Screen</code></a> interface, and contain useful information for placing windows on specific screens.</p> <div class="notecard note" id="sect1"> <p><strong>Note:</strong> You can gate functionality based on whether the user has more than one screen available using the <a href="../screen/isextended.html"><code>Window.screen.isExtended</code></a> property. This returns <code>true</code> if the device has multiple screens, and <code>false</code> if not.</p> </div>
</div>
<h3 id="opening_windows">Opening windows</h3>
<div class="section-content">
<p>You'll still need to use <a href="../window/open.html"><code>Window.open()</code></a> to open and manage windows, but the above provides you with better information for doing so in a multi-screen environment. For example, a utility function might look like so:</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="HdPctdeNUFMVFVDyTTHgZjWYdy+vWwKEbRDjmjw5sIs=" data-language="js"><span class="token comment">// Array to hold references to the currently open windows</span>
<span class="token keyword">let</span> windowRefs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// ...</span>

<span class="token keyword">function</span> <span class="token function">openWindow</span><span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span> top<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> windowFeatures <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">left=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>left<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,top=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>top<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,width=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,height=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> windowRef <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>
    url<span class="token punctuation">,</span>
    <span class="token string">"_blank"</span><span class="token punctuation">,</span> <span class="token comment">// needed for it to open in a new window</span>
    windowFeatures<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>windowRef <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// If the browser is blocking new windows, close any windows that were</span>
    <span class="token comment">// able to open and display instructions to help the user fix this problem</span>
    <span class="token function">closeAllWindows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    popoverElem<span class="token punctuation">.</span><span class="token function">showPopover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// Store a reference to the window in the windowRefs array</span>
    windowRefs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>windowRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
</div> <p>You would then invoke this function and open windows on specific screens like this:</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="5SEsbV+p43B2d5LuYX7PkO3UyFnTx4pn40V8dljGC9I=" data-language="js"><span class="token keyword">const</span> screen1 <span class="token operator">=</span> screenDetails<span class="token punctuation">.</span>screens<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> screen2 <span class="token operator">=</span> screenDetails<span class="token punctuation">.</span>screens<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// Windows will be a third the width and the full height of the screen</span>
<span class="token comment">// The available width of screen1, minus 3 times the horizontal browser chrome</span>
<span class="token comment">// width, divided by 3</span>
<span class="token keyword">const</span> windowWidth <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>screen1<span class="token punctuation">.</span>availWidth <span class="token operator">-</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token constant">WINDOW_CHROME_X</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// The available height of screen1, minus the vertical browser chrome width</span>
<span class="token keyword">const</span> windowHeight <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>screen1<span class="token punctuation">.</span>availHeight <span class="token operator">-</span> <span class="token constant">WINDOW_CHROME_Y</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Open a window a third of the width and the entire height of the primary screen</span>
<span class="token function">openWindow</span><span class="token punctuation">(</span>
  screen1<span class="token punctuation">.</span>availLeft<span class="token punctuation">,</span>
  screen1<span class="token punctuation">.</span>availTop<span class="token punctuation">,</span>
  windowWidth<span class="token punctuation">,</span>
  windowHeight<span class="token punctuation">,</span>
  sites<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>url<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ...</span>
</pre>
</div>
</div>
<h3 id="closing_all_windows">Closing all windows</h3>
<div class="section-content">
<p>After opening each window, we add a reference to the <code>windowRefs</code> array. This allows you to, for example, close them all when one window is closed:</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="WbrjAF48z7LusNM3c4Z5O8bMjYT+OzYSXyOX7OGEyvQ=" data-language="js"><span class="token keyword">function</span> <span class="token function">closeAllWindows</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Loop through all window refs and close each one</span>
  windowRefs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">windowRef</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    windowRef<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  windowRefs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Check whether one of our popup windows has been closed</span>
<span class="token comment">// If so, close them all</span>

closeMonitor <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>checkWindowClose<span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">checkWindowClose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>windowRefs<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">windowRef</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> windowRef<span class="token punctuation">.</span>closed<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">closeAllWindows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">clearInterval</span><span class="token punctuation">(</span>closeMonitor<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
</div> <div class="notecard note" id="sect2"> <p><strong>Note:</strong> In our experiments, the <a href="../setinterval.html"><code>setInterval()</code></a> polling method shown above seemed to work best for detecting window closure in the case of multiple windows. Using events such as <a href="../window/beforeunload_event.html"><code>beforeunload</code></a>, <a href="../window/pagehide_event.html"><code>pagehide</code></a>, or <a href="../document/visibilitychange_event.html"><code>visibilitychange</code></a> proved unreliable because, when opening multiple windows at the same time, the rapid shift in focus/visibility seemed to fire the handler function prematurely.</p> </div> <div class="notecard note" id="sect3"> <p><strong>Note:</strong> One concern with the above example is that it uses constant values to represent the size of the Chrome window UI portions in the calculations — <code>WINDOW_CHROME_X</code> and <code>WINDOW_CHROME_Y</code> — to get the window size calculations correct. To create precisely-sized windows on other future implementations of the API, you'd need to keep a small library of browser chrome sizes, and employ browser detection to discover which browser is rendering your app and choose the correct size for calculations. Or you can rely on less precise window sizes.</p> </div>
</div>
<h3 id="handling_browser_popup_blockers">Handling browser popup blockers</h3>
<div class="section-content">
<p>In modern browsers, a separate user gesture event is required for each <code>Window.open()</code> call, for security purposes. This prevents sites from spamming users with lots of windows. However, this poses an issue for multi-window applications. To work around this limitation, you can design your applications to:</p> <ul> <li>Open no more than one new window at once.</li> <li>Reuse existing windows to display different pages.</li> <li>Advise users on how to update their browser settings to allow multiple windows.</li> </ul> <p>In our demo application, we have gone for the third option. Our <code>openWindow()</code> function contains the following section:</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="ukGc1QWRoSEKQUstKC0oRPpl0EFMBtpwMv0RQfB4CW0=" data-language="js"><span class="token comment">// ...</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>windowRef <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// If the browser is blocking new windows, close any windows that were</span>
  <span class="token comment">// able to open and display instructions to help the user fix this problem</span>
  <span class="token function">closeAllWindows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  popoverElem<span class="token punctuation">.</span><span class="token function">showPopover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// Store a reference to the window in the windowRefs array</span>
  windowRefs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>windowRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ...</span>
</pre>
</div> <p>If the browser blocks a new window, the resulting <code>windowRef</code> will be <code>null</code>. In this case we run our <code>closeAllWindows()</code> function to close any windows that <em>did</em> manage to open before the blocking started, and show a <a href="../popover_api.html">popover element</a> that explains how to disable the popup blocker.</p>
</div>
<h2 id="simple_single-window_per_display_case">Simple single-window per display case</h2>
<div class="section-content">
<p>If you want to open a single window on each available display that is the full width and height of the display, you could use a pattern like this:</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="xKNPJ1woKpNMIEnYKDFYn1y9vRogB6kAINTwZBDghyE=" data-language="js"><span class="token comment">// Open a window on each screen of the device</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> screen <span class="token keyword">of</span> screenDetails<span class="token punctuation">.</span>screens<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">openWindow</span><span class="token punctuation">(</span>
    screen<span class="token punctuation">.</span>availLeft<span class="token punctuation">,</span>
    screen<span class="token punctuation">.</span>availTop<span class="token punctuation">,</span>
    screen<span class="token punctuation">.</span>availWidth<span class="token punctuation">,</span>
    screen<span class="token punctuation">.</span>availHeight<span class="token punctuation">,</span>
    url<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div>
</div>
<h2 id="window_management_events">Window management events</h2>
<div class="section-content">
<p>The Window Management API provides some events for responding to changes in the available screens:</p> <dl> <dt id="the">
<a href="#the">The </a><code>ScreenDetails</code> <a href="../screendetails/screenschange_event.html"><code>screenschange</code></a> event</dt> <dd> <p>Fired when screens are connected to or disconnected from the system.</p> </dd> <dt id="the_2">
<a href="#the_2">The </a><code>ScreenDetails</code> <a href="../screendetails/currentscreenchange_event.html"><code>currentscreenchange</code></a> event</dt> <dd> <p>Fired when the window's current screen changes in some way.</p> </dd> <dt id="the_3">
<a href="#the_3">The </a><code>Screen</code> <a href="../screen/change_event.html"><code>change</code></a> event</dt> <dd> <p>Fired on a specific screen when it changes in some way.</p> </dd> </dl> <p>So for example, you could use the <code>screenschange</code> event to detect when the available screens have changed (perhaps when a screen is plugged in or unplugged), report the change, close all windows, and update window arrangements to suit the new configuration:</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="vjmCaSu2G3BO0b0wdIaUHlRlPp9uLz+oGk3A7QKaC4I=" data-language="js">screenDetails<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"screenschange"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// If the new number of screens is different to the old number of screens,</span>
  <span class="token comment">// report the difference</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>screenDetails<span class="token punctuation">.</span>screens<span class="token punctuation">.</span>length <span class="token operator">!==</span> noOfScreens<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The screen count changed from </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>noOfScreens<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>screenDetails<span class="token punctuation">.</span>screens<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// If the windows are open, close them and then open them again</span>
  <span class="token comment">// So that they fit with the new screen configuration</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>windowRefs<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">closeAllWindows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">openWindows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div>
</div>
<h2 id="requestfullscreen_screen_option">requestFullscreen() screen option</h2>
<div class="section-content">
<p>The Window Management API adds a new <code>screen</code> option to the <a href="../element/requestfullscreen.html"><code>requestFullscreen()</code></a> method that allows you to specify on which screen you want to put the element in fullscreen mode. For example, if you want to make it fullscreen on the primary OS screen:</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="DK4OizUpqyDWT/ek7nq79OTQv4KRv9QSGxdHevbzY6s=" data-language="js"><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> primaryScreen <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">getScreenDetails</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>screens<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">screen</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> screen<span class="token punctuation">.</span>isPrimary<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">requestFullscreen</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">screen</span><span class="token operator">:</span> primaryScreen <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>name<span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window_Management_API/Using" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/Window_Management_API/Using</a>
  </p>
</div>
