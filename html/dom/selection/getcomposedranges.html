<header><h1>Selection: getComposedRanges() method</h1></header><div class="section-content">
<div class="notecard experimental" id="sect1"><p><strong>Experimental:</strong> <strong>This is an <a href="https://developer.mozilla.org/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental">experimental technology</a></strong><br>Check the <a href="#browser_compatibility">Browser compatibility table</a> carefully before using this in production.</p></div> <p>The <code>Selection.getComposedRanges()</code> method returns an array of <a href="../staticrange.html"><code>StaticRange</code></a> objects representing the current selection ranges, and can return ranges that potentially cross shadow boundaries.</p> <p> As the selection range endpoints may be within a shadow tree, or even different shadow trees, and because these may be closed, the method cannot by default return nodes from within a shadow tree. If the method needs to return a selection that includes nodes inside shadow trees, then the <a href="../shadowroot.html"><code>ShadowRoot</code></a> objects for these trees must be passed as arguments to the method. If a corresponding roots are not provided and the start or endpoint of the selection are within a shadow tree, the returned range is re-scoped to include the host of the shadow root rather than some node with in the root. </p> <p> The returned ranges represent the range at the time that <code>getComposedRanges()</code> was called. If the DOM or a shadow DOM is mutated, the selected range is likely to be incorrect. Application code might use a <a href="../mutationobserver.html"><code>MutationObserver</code></a> to monitor for DOM mutations and then call <a href="setbaseandextent.html"><code>Selection.setBaseAndExtent()</code></a> to update the selection. </p> <div class="notecard note" id="sect2"> <p> <strong>Note:</strong> This method should be used instead of <a href="getrangeat.html"><code>Selection.getRangeAt()</code></a> when selecting ranges that can potentially cross shadow root boundaries. <a href="getrangeat.html"><code>Selection.getRangeAt()</code></a> is not aware of shadow roots. The returned range is not specified, and varies between browsers. </p> </div>
</div>
<h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="tUmhITC0ICsEEK2wdt1joUhjOelY9IesanHltGfB4FE=" data-language="js"><span class="token function">getComposedRanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">getComposedRanges</span><span class="token punctuation">(</span>shadowRoot1<span class="token punctuation">)</span>
<span class="token function">getComposedRanges</span><span class="token punctuation">(</span>shadowRoot1<span class="token punctuation">,</span> shadowRoot2<span class="token punctuation">)</span>
<span class="token function">getComposedRanges</span><span class="token punctuation">(</span>shadowRoot1<span class="token punctuation">,</span> shadowRoot2<span class="token punctuation">,</span> <span class="token comment">/* …, */</span> shadowRootN<span class="token punctuation">)</span>
</pre>
</div></div>
<h3 id="parameters">Parameters</h3>
<div class="section-content"><dl> <dt id="shadowroot1">
<a href="#shadowroot1"><code>shadowRoot1</code></a>, …, <code>shadowRootN</code>
</dt> <dd> <p> Zero or more <a href="../shadowroot.html"><code>ShadowRoot</code></a> arguments. If a selection endpoint is within one of the provided shadow roots, the range will be able to return nodes within its corresponding Shadow DOM tree. Otherwise, if the selection crosses a shadow boundary and the corresponding <code>ShadowRoot</code> is not provided, the returned range will be adjusted to include the entire host element for the shadow root. </p> </dd> </dl></div>
<h3 id="return_value">Return value</h3>
<div class="section-content"><p> An array of <a href="../staticrange.html"><code>StaticRange</code></a> objects that represent the selected ranges within the composed (flattened) tree of the document. At time of writing the specification expects this array to only contain one object. </p></div>
<h2 id="examples">Examples</h2>

<h3 id="selecting_across_inline_shadow_roots">Selecting across inline shadow roots</h3>
<div class="section-content">
<p>This example demonstrates how <code>getComposedRanges()</code> behaves, both when shadow roots are passed and when they are not, and contrasts with <a href="getrangeat.html"><code>Selection.getRangeAt()</code></a>.</p> <p>It allows you to select text that is defined in different nodes in the DOM, and in open and closed shadow roots, copy the range for the selection using the different approaches, and then reapply the range to see how well the original selection worked.</p> <h4 id="html">HTML</h4> <p> The HTML defines some text nodes with some <code>&lt;span&gt;</code> elements to which we'll attach a shadow root using JavScript. We also add some buttons for copying and applying the selection using a number of different methods. </p> <div class="code-example">
<div class="example-header"><span class="language-name">html</span></div>
<pre data-signature="N95vzvAUrLjv2knFbAoh1a9dVDtcXwOkMSDpuHv5aQs=" data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
  DOM Text One<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>openHost<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>DOM Text Two<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span>
    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>closedHost<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span>
  <span class="token punctuation">&gt;</span></span>DOM Text Three
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</pre>
</div> <div class="code-example">
<div class="example-header"><span class="language-name">html</span></div>
<pre data-signature="LjqWQBvC38kFjkk9UX48s7EvbLdKp7TgNA8Wh4lf1p0=" data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>copySelection<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Copy range not passing shadow roots<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>copySelectionWithShadowRoots<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  Copy range passing shadow roots
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>applySelection<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Apply selection<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>copySelectionRangeAt<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Copy range with getRangeAt()<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>applySelectionGetRangeAt<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Apply selection<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</pre>
</div> <h4 id="css">CSS</h4> <p> The CSS doesn't do anything interesting. We're just laying out the buttons vertically so that they are easier to read. </p> <div class="code-example">
<div class="example-header"><span class="language-name">css</span></div>
<pre data-signature="1tgLbnxuqd8sKwIhoDY44/d9gTuuO8OSQdlDNJ3TkC4=" data-language="css"><span class="token selector">button</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div>  <h4 id="javascript">JavaScript</h4>  <p> Most of the work happens in the JavaScript. First we log if the <code>getComposedRanges()</code> is not supported, though we don't actually prevent the rest of the example attempting to use it. </p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="TT9eB/sbILUZNo+3bV7cVoGPH1Q+ceVNrQ0k8po6Beo=" data-language="js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">"getComposedRanges"</span> <span class="token keyword">in</span> <span class="token class-name">Selection</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"getComposedRanges() method not supported in this browser"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div> <p> Then we create an open and a closed shadow root and attach them to the two <code>&lt;span&gt;</code> elements we created in the HTML. These contain some simple text in bold so that we can easily identify the shadow nodes when the HTML is rendered. </p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="7gS6YNUvgLEbX+zf7zw4BedReKMSKrWVTtU36R4ERu8=" data-language="js"><span class="token keyword">let</span> openRoot <span class="token operator">=</span> openHost<span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">"open"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
openRoot<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;b&gt;Open Shadow DOM Text&lt;/b&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">let</span> closedRoot <span class="token operator">=</span> closedHost<span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">"closed"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
closedRoot<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;b&gt;Closed Shadow DOM Text&lt;/b&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</pre>
</div> <p> Next we create code to get the selected ranges with <code>getComposedRanges()</code> when the first two buttons are clicked. The first button calls <code>getComposedRanges()</code> without passing shadow roots, while the second passes both of the shadow roots. In both cases the composed range is saved to a variable. </p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="Nq/1Rhmx2/8B0Jtaw1KGvUDf4mwAkEAXDRvT8qRiRTI=" data-language="js"><span class="token keyword">const</span> copySelectionButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#copySelection"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> composedRangeSelection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
copySelectionButton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  composedRangeSelection <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getComposedRanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Selection copied (no shadow roots passed)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> copySelectionWithShadowRootsButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>
  <span class="token string">"#copySelectionWithShadowRoots"</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
copySelectionWithShadowRootsButton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  composedRangeSelection <span class="token operator">=</span> window
    <span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">getComposedRanges</span><span class="token punctuation">(</span>openRoot<span class="token punctuation">,</span> closedRoot<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Selection has been copied (shadow roots passed)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p> The handler for the "Apply selection" button is shown below. This calls <a href="setbaseandextent.html"><code>setBaseAndExtent()</code></a> to set the current selection, passing the nodes and offsets from the saved range. </p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="oQ8aqm1kabs84b8nj1p9igeoAY8jTqzbM1OlvEBeRTk=" data-language="js"><span class="token keyword">const</span> applySelectionButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#applySelection"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
applySelectionButton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>composedRangeSelection<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window
      <span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setBaseAndExtent</span><span class="token punctuation">(</span>
        composedRangeSelection<span class="token punctuation">.</span>startContainer<span class="token punctuation">,</span>
        composedRangeSelection<span class="token punctuation">.</span>startOffset<span class="token punctuation">,</span>
        composedRangeSelection<span class="token punctuation">.</span>endContainer<span class="token punctuation">,</span>
        composedRangeSelection<span class="token punctuation">.</span>endOffset<span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Selection applied</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">No selection to apply</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p>The last part of the code defines buttons to copy the current selection range using <a href="getrangeat.html"><code>Selection.getRangeAt()</code></a> and then reapply the selection.</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="zfBtuoizQgx8b0O0VbpU/rsVwwiUu9kgzOIhAxM7YUQ=" data-language="js"><span class="token keyword">const</span> copySelectionRangeAtButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>
  <span class="token string">"#copySelectionRangeAt"</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> rangeSelection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
copySelectionRangeAtButton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> selection <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>selection<span class="token punctuation">.</span>rangeCount <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Selection copied using getRangeAt()</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rangeSelection <span class="token operator">=</span> selection<span class="token punctuation">.</span><span class="token function">getRangeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">No range selected</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> applySelectionGetRangeAtButton <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>
  <span class="token string">"#applySelectionGetRangeAt"</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
applySelectionGetRangeAtButton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>rangeSelection<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window
      <span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setBaseAndExtent</span><span class="token punctuation">(</span>
        rangeSelection<span class="token punctuation">.</span>startContainer<span class="token punctuation">,</span>
        rangeSelection<span class="token punctuation">.</span>startOffset<span class="token punctuation">,</span>
        rangeSelection<span class="token punctuation">.</span>endContainer<span class="token punctuation">,</span>
        rangeSelection<span class="token punctuation">.</span>endOffset<span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Selection applied</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">No selection to apply</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div>  <h4 id="results">Results</h4> <p> The running example is shown below. Select text in the top line starting from some normal text and ending in a bold section so that you have selected nodes from the DOM into a shadow root. If you select "Copy range passing shadow roots" and then the "Apply selection" button, you will note that the selection doesn't change, because the code has given access to all the nodes in the shadow root, even if it is closed. If you then select the button "Copy range not passing shadow roots" and then apply, the selection will extend to the end of the text in the shadow root. This is because the selection is re-scoped to the end of the host node, since the <code>getComposedRanges()</code> method was not given visibility inside the shadow tree. </p> <p> Also test what happens if you use the "Copy range with getRangeAt()" and "Apply selection" buttons. You should find that the selected range is fairly arbitrary if you cross into the shadow root, and differs depending on what browser you are using. </p>
<div class="code-example" id="sect3">

<iframe class="sample-code-frame" title="Selecting across inline shadow roots sample" id="frame_selecting_across_inline_shadow_roots" width="100%" height="240px" src="https://live.mdnplay.dev/en-US/docs/Web/API/Selection/getComposedRanges/runner.html?id=selecting_across_inline_shadow_roots" sandbox="allow-same-origin allow-scripts" loading="lazy"></iframe>
</div>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://w3c.github.io/selection-api/#dom-selection-getcomposedranges">Selection API <br><small># dom-selection-getcomposedranges</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Opera</th>
<th>Safari</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
<th>WebView Android</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>getComposedRanges</code></th>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">preview</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">17</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">17</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
</tr>
<tr>
<th><code>returns_multiple_ranges</code></th>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">preview</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
</tr>
</tbody>
</table></div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li>
<a href="../selection.html"><code>Selection</code></a>, the interface it belongs to.</li> </ul></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Selection/getComposedRanges" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/Selection/getComposedRanges</a>
  </p>
</div>
