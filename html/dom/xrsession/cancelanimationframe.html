<header><h1>XRSession: cancelAnimationFrame() method</h1></header><div class="section-content">
<div class="notecard experimental" id="sect1"><p><strong>Experimental:</strong> <strong>This is an <a href="https://developer.mozilla.org/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental">experimental technology</a></strong><br>Check the <a href="#browser_compatibility">Browser compatibility table</a> carefully before using this in production.</p></div> <p> The <code>cancelAnimationFrame()</code> method of the <a href="../xrsession.html"><code>XRSession</code></a> interface cancels an animation frame which was previously requested by calling <a href="requestanimationframe.html"><code>requestAnimationFrame</code></a>. </p>
</div>
<h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="Wy/Mj/jS9ehhMBznXybtCG2XMTRIsWdBTf3x+ZlK34g=" data-language="js"><span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>handle<span class="token punctuation">)</span>
</pre>
</div></div>
<h3 id="parameters">Parameters</h3>
<div class="section-content"><dl> <dt id="handle"><a href="#handle"><code>handle</code></a></dt> <dd> <p> The unique value returned by the call to <a href="requestanimationframe.html"><code>requestAnimationFrame()</code></a> that previously scheduled the animation callback. </p> </dd> </dl></div>
<h3 id="return_value">Return value</h3>
<div class="section-content"><p>None (<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined"><code>undefined</code></a>).</p></div>
<h2 id="usage_notes">Usage notes</h2>
<div class="section-content"><p>This function has no effect if the specified <code>handle</code> cannot be found.</p></div>
<h2 id="examples">Examples</h2>
<div class="section-content">
<p> In the example below we see code which starts up a WebXR session if immersive VR mode is supported. Once started, the session schedules its first frame to be rendered by calling <a href="requestanimationframe.html"><code>requestAnimationFrame()</code></a>. </p> <p> The <code>pauseXR()</code> function shown at the bottom can be called to suspend the WebVR session, in essence, by canceling any pending animation frame callback. Since each frame callback schedules the next one, removing the callback terminates updating of the WebXR scene. </p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="T+jf+v53btNemutG4WziIdvOvTrZ/ePAWPEtCOIv/Ig=" data-language="js"><span class="token keyword">const</span> <span class="token constant">XR</span> <span class="token operator">=</span> navigator<span class="token punctuation">.</span>xr<span class="token punctuation">;</span>

<span class="token keyword">let</span> requestHandle <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> xrSession <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">XR</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token constant">XR</span><span class="token punctuation">.</span><span class="token function">isSessionSupported</span><span class="token punctuation">(</span><span class="token string">"immersive-vr"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">isSupported</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isSupported<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">startXR</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">frameCallback</span><span class="token punctuation">(</span><span class="token parameter">time<span class="token punctuation">,</span> xrFrame</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  xrSession<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>frameCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Update and render the frame</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">startXR</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  xrSession <span class="token operator">=</span> <span class="token constant">XR</span><span class="token punctuation">.</span><span class="token function">requestSession</span><span class="token punctuation">(</span><span class="token string">"immersive-vr"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>xrSession<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    stopButton<span class="token punctuation">.</span>onclick <span class="token operator">=</span> stopXR<span class="token punctuation">;</span>
    requestHandle <span class="token operator">=</span> xrSession<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>frameCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">pauseXR</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>xrSession <span class="token operator">&amp;&amp;</span> requestHandle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    xrSession<span class="token punctuation">.</span><span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>requestHandle<span class="token punctuation">)</span><span class="token punctuation">;</span>
    requestHandle <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
</div>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://immersive-web.github.io/webxr/#dom-xrsession-cancelanimationframe">WebXR Device API <br><small># dom-xrsession-cancelanimationframe</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>cancelAnimationFrame</code></th>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">66</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">57</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">11.2</td>
</tr></tbody>
</table></div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="../window/cancelanimationframe.html"><code>Window.cancelAnimationFrame</code></a></li> <li><a href="requestanimationframe.html"><code>XRSession.requestAnimationFrame</code></a></li> </ul></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/XRSession/cancelAnimationFrame" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/XRSession/cancelAnimationFrame</a>
  </p>
</div>
