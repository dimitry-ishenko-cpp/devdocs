<section id="pygame-bufferproxy"> <dl class="py class definition"> <dt class="sig sig-object py title" id="pygame.BufferProxy"> pygame.BufferProxy</dt> <dd>
<div class="line-block"> <div class="line"><span class="summaryline">pygame object to export a surface buffer through an array protocol</span></div> <div class="line"><span class="signature">BufferProxy(&lt;parent&gt;) -&gt; BufferProxy</span></div> </div>  <p><a class="reference internal" href="#pygame.BufferProxy" title="pygame.BufferProxy"><code class="xref py py-class docutils literal notranslate"><span class="pre">BufferProxy</span></code></a> is a pygame support type, designed as the return value of the <a class="reference internal" href="surface.html#pygame.Surface.get_buffer" title="pygame.Surface.get_buffer"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Surface.get_buffer()</span></code></a> and <a class="reference internal" href="surface.html#pygame.Surface.get_view" title="pygame.Surface.get_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Surface.get_view()</span></code></a> methods. For all Python versions a <a class="reference internal" href="#pygame.BufferProxy" title="pygame.BufferProxy"><code class="xref py py-class docutils literal notranslate"><span class="pre">BufferProxy</span></code></a> object exports a C struct and Python level array interface on behalf of its parent object's buffer. A new buffer interface is also exported. In pygame, <a class="reference internal" href="#pygame.BufferProxy" title="pygame.BufferProxy"><code class="xref py py-class docutils literal notranslate"><span class="pre">BufferProxy</span></code></a> is key to implementing the <a class="tooltip reference internal" href="surfarray.html#module-pygame.surfarray" title=""><code class="xref py py-mod docutils literal notranslate"><span class="pre">pygame.surfarray</span></code></a> module.</p> <p><a class="reference internal" href="#pygame.BufferProxy" title="pygame.BufferProxy"><code class="xref py py-class docutils literal notranslate"><span class="pre">BufferProxy</span></code></a> instances can be created directly from Python code, either for a parent that exports an interface, or from a Python <code class="docutils literal notranslate"><span class="pre">dict</span></code> describing an object's buffer layout. The dict entries are based on the Python level array interface mapping. The following keys are recognized:</p> <blockquote> <div>
<dl class="simple"> <dt>"shape"tuple</dt>
<dd>
<p>The length of each array dimension as a tuple of integers. The length of the tuple is the number of dimensions in the array.</p> </dd> <dt>"typestr"string</dt>
<dd>
<p>The array element type as a length 3 string. The first character gives byteorder, '&lt;' for little-endian, '&gt;' for big-endian, and '|' for not applicable. The second character is the element type, 'i' for signed integer, 'u' for unsigned integer, 'f' for floating point, and 'V' for an chunk of bytes. The third character gives the bytesize of the element, from '1' to '9' bytes. So, for example, "&lt;u4" is an unsigned 4 byte little-endian integer, such as a 32 bit pixel on a PC, while "|V3" would represent a 24 bit pixel, which has no integer equivalent.</p> </dd> <dt>"data"tuple</dt>
<dd>
<p>The physical buffer start address and a read-only flag as a length 2 tuple. The address is an integer value, while the read-only flag is a boolâ€”<code class="docutils literal notranslate"><span class="pre">False</span></code> for writable, <code class="docutils literal notranslate"><span class="pre">True</span></code> for read-only.</p> </dd> <dt>"strides"tuple(optional)</dt>
<dd>
<p>Array stride information as a tuple of integers. It is required only of non C-contiguous arrays. The tuple length must match that of <code class="docutils literal notranslate"><span class="pre">"shape"</span></code>.</p> </dd> <dt>"parent"object(optional)</dt>
<dd>
<p>The exporting object. It can be used to keep the parent object alive while its buffer is visible.</p> </dd> <dt>"before"callable(optional)</dt>
<dd>
<p>Callback invoked when the <a class="reference internal" href="#pygame.BufferProxy" title="pygame.BufferProxy"><code class="xref py py-class docutils literal notranslate"><span class="pre">BufferProxy</span></code></a> instance exports the buffer. The callback is given one argument, the <code class="docutils literal notranslate"><span class="pre">"parent"</span></code> object if given, otherwise <code class="docutils literal notranslate"><span class="pre">None</span></code>. The callback is useful for setting a lock on the parent.</p> </dd> <dt>"after"callable(optional)</dt>
<dd>
<p>Callback invoked when an exported buffer is released. The callback is passed on argument, the <code class="docutils literal notranslate"><span class="pre">"parent"</span></code> object if given, otherwise None. The callback is useful for releasing a lock on the parent.</p> </dd> </dl> </div>
</blockquote> <p>The BufferProxy class supports subclassing, instance variables, and weak references.</p> <div class="versionadded"> <p><span class="versionmodified added">New in pygame 1.8.0.</span></p> </div> <div class="versionextended"> <p><span class="versionmodified extended">Extended in pygame 1.9.2.</span></p> </div> <dl class="py attribute definition"> <dt class="sig sig-object py title" id="pygame.BufferProxy.parent"> parent</dt> <dd>
<div class="line-block"> <div class="line"><span class="summaryline">Return wrapped exporting object.</span></div> <div class="line"><span class="signature">parent -&gt; Surface</span></div> <div class="line"><span class="signature">parent -&gt; &lt;parent&gt;</span></div> </div> <p>The <a class="reference internal" href="surface.html#pygame.Surface" title="pygame.Surface"><code class="xref py py-class docutils literal notranslate"><span class="pre">Surface</span></code></a> which returned the <a class="reference internal" href="#pygame.BufferProxy" title="pygame.BufferProxy"><code class="xref py py-class docutils literal notranslate"><span class="pre">BufferProxy</span></code></a> object or the object passed to a <a class="reference internal" href="#pygame.BufferProxy" title="pygame.BufferProxy"><code class="xref py py-class docutils literal notranslate"><span class="pre">BufferProxy</span></code></a> call.</p> </dd>
</dl> <dl class="py attribute definition"> <dt class="sig sig-object py title" id="pygame.BufferProxy.length"> length</dt> <dd>
<div class="line-block"> <div class="line"><span class="summaryline">The size, in bytes, of the exported buffer.</span></div> <div class="line"><span class="signature">length -&gt; int</span></div> </div> <p>The number of valid bytes of data exported. For discontinuous data, that is data which is not a single block of memory, the bytes within the gaps are excluded from the count. This property is equivalent to the <code class="docutils literal notranslate"><span class="pre">Py_buffer</span></code> C struct <code class="docutils literal notranslate"><span class="pre">len</span></code> field.</p> </dd>
</dl> <dl class="py attribute definition"> <dt class="sig sig-object py title" id="pygame.BufferProxy.raw"> raw</dt> <dd>
<div class="line-block"> <div class="line"><span class="summaryline">A copy of the exported buffer as a single block of bytes.</span></div> <div class="line"><span class="signature">raw -&gt; bytes</span></div> </div> <p>The buffer data as a <code class="docutils literal notranslate"><span class="pre">str</span></code>/<code class="docutils literal notranslate"><span class="pre">bytes</span></code> object. Any gaps in the exported data are removed.</p> </dd>
</dl> <dl class="py method definition"> <dt class="sig sig-object py title" id="pygame.BufferProxy.write"> write()</dt> <dd>
<div class="line-block"> <div class="line"><span class="summaryline">Write raw bytes to object buffer.</span></div> <div class="line"><span class="signature">write(buffer, offset=0)</span></div> </div> <p>Overwrite bytes in the parent object's data. The data must be C or F contiguous, otherwise a ValueError is raised. Argument <cite>buffer</cite> is a <code class="docutils literal notranslate"><span class="pre">str</span></code>/<code class="docutils literal notranslate"><span class="pre">bytes</span></code> object. An optional offset gives a start position, in bytes, within the buffer where overwriting begins. If the offset is negative or greater that or equal to the buffer proxy's <a class="reference internal" href="#pygame.BufferProxy.length" title="pygame.BufferProxy.length"><code class="xref py py-attr docutils literal notranslate"><span class="pre">length</span></code></a> value, an <code class="docutils literal notranslate"><span class="pre">IndexException</span></code> is raised. If <code class="docutils literal notranslate"><span class="pre">len(buffer)</span> <span class="pre">&gt;</span> <span class="pre">proxy.length</span> <span class="pre">+</span> <span class="pre">offset</span></code>, a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> is raised.</p> </dd>
</dl> </dd>
</dl> </section> <br><br> <hr> <a href="https://github.com/pygame/pygame/edit/main/docs/reST/ref/bufferproxy.rst" rel="nofollow">Edit on GitHub</a> <div class="_attribution">
  <p class="_attribution-p">
    &copy; Pygame Developers.<br>Licensed under the GNU LGPL License version 2.1.<br>
    <a href="https://www.pygame.org/docs/ref/bufferproxy.html" class="_attribution-link">https://www.pygame.org/docs/ref/bufferproxy.html</a>
  </p>
</div>
