<h1 id="merge"><span class="pre">merge</span></h1> <p>The <code class="docutils literal notranslate"><span class="pre">merge</span></code> filter merges an array with another array:</p> <div class="highlight-twig notranslate"><pre data-language="php" class="highlight"><span class="cp">{%</span> <span class="k">set</span> <span class="nv">values</span> <span class="o">=</span> <span class="o">[</span><span class="m">1</span><span class="o">,</span> <span class="m">2</span><span class="o">]</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">set</span> <span class="nv">values</span> <span class="o">=</span> <span class="nv">values</span><span class="o">|</span><span class="nf">merge</span><span class="o">([</span><span class="s1">'apple'</span><span class="o">,</span> <span class="s1">'orange'</span><span class="o">])</span> <span class="cp">%}</span>

<span class="c">{# values now contains [1, 2, 'apple', 'orange'] #}</span>
</pre></div> <p>New values are added at the end of the existing ones.</p> <p>The <code class="docutils literal notranslate"><span class="pre">merge</span></code> filter also works on hashes:</p> <div class="highlight-twig notranslate"><pre data-language="php" class="highlight"><span class="cp">{%</span> <span class="k">set</span> <span class="nv">items</span> <span class="o">=</span> <span class="o">{</span> <span class="s1">'apple'</span><span class="o">:</span> <span class="s1">'fruit'</span><span class="o">,</span> <span class="s1">'orange'</span><span class="o">:</span> <span class="s1">'fruit'</span><span class="o">,</span> <span class="s1">'peugeot'</span><span class="o">:</span> <span class="s1">'unknown'</span> <span class="o">}</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">set</span> <span class="nv">items</span> <span class="o">=</span> <span class="nv">items</span><span class="o">|</span><span class="nf">merge</span><span class="o">({</span> <span class="s1">'peugeot'</span><span class="o">:</span> <span class="s1">'car'</span><span class="o">,</span> <span class="s1">'renault'</span><span class="o">:</span> <span class="s1">'car'</span> <span class="o">})</span> <span class="cp">%}</span>

<span class="c">{# items now contains { 'apple': 'fruit', 'orange': 'fruit', 'peugeot': 'car', 'renault': 'car' } #}</span>
</pre></div> <p>For hashes, the merging process occurs on the keys: if the key does not already exist, it is added but if the key already exists, its value is overridden.</p> <div class="admonition tip"> <p class="first admonition-title">Tip</p> <p>If you want to ensure that some values are defined in an array (by given default values), reverse the two elements in the call:</p> <div class="last highlight-twig notranslate"><pre data-language="php" class="highlight"><span class="cp">{%</span> <span class="k">set</span> <span class="nv">items</span> <span class="o">=</span> <span class="o">{</span> <span class="s1">'apple'</span><span class="o">:</span> <span class="s1">'fruit'</span><span class="o">,</span> <span class="s1">'orange'</span><span class="o">:</span> <span class="s1">'fruit'</span> <span class="o">}</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">set</span> <span class="nv">items</span> <span class="o">=</span> <span class="o">{</span> <span class="s1">'apple'</span><span class="o">:</span> <span class="s1">'unknown'</span> <span class="o">}|</span><span class="nf">merge</span><span class="o">(</span><span class="nv">items</span><span class="o">)</span> <span class="cp">%}</span>

<span class="c">{# items now contains { 'apple': 'fruit', 'orange': 'fruit' } #}</span>
</pre></div> </div> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Internally, Twig uses the PHP <a class="reference external" href="https://secure.php.net/array_merge">array_merge</a> function. It supports Traversable objects by transforming those to arrays.</p> </div>   <div class="navigation" style="text-align: center"> <a accesskey="P" title="markdown_to_html" href="markdown_to_html.html"> « markdown_to_html </a> <span class="separator">|</span> <a accesskey="N" title="nl2br" href="nl2br.html"> nl2br » </a> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2009&ndash;2018 by the Twig Team<br>Licensed under the three clause BSD license.<br>The Twig logo is &copy; 2010&ndash;2020 Symfony<br>
    <a href="https://twig.symfony.com/doc/3.x/filters/merge.html" class="_attribution-link">https://twig.symfony.com/doc/3.x/filters/merge.html</a>
  </p>
</div>
