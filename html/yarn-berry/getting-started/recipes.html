<h1>7. Recipes</h1>

<div class="css-elchao exirf770">
<h2 id="typescript--pnp-quick-start">
TypeScript + PnP quick start:</h2>
<ul><li>Initialize the repo using Yarn 2:</li></ul>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">yarn init -2</code></pre></div>
<ul><li>Add typescript and enable <a href="editor-sdks.html">VSCode integration</a>:</li></ul>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">yarn add --dev typescript
yarn dlx @yarnpkg/sdks vscode</code></pre></div>
<ul><li>You can optionally enable <a href="https://github.com/yarnpkg/berry/tree/master/packages/plugin-typescript">Yarn's TypeScript plugin</a>, which helps manage <code class="language-text">@types/*</code> dependencies automatically.</li></ul>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">yarn plugin import typescript</code></pre></div>
<h2 id="running-a-yarn-cli-command-in-the-specified-directory">
Running a Yarn CLI command in the specified directory:</h2>
<ul><li>Starting a new library inside a monorepo directly, without manually creating directories for it.</li></ul>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">yarn packages/my-new-lib init</code></pre></div>
<ul><li>Running an arbitrary command inside a specific workspace:</li></ul>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">yarn packages/app tsc --noEmit</code></pre></div>
<h2 id="hybrid-pnp--node_modules-mono-repo">
Hybrid PnP + node_modules mono-repo:</h2>
<p>You may sometimes need to use <code class="language-text">node_modules</code> on just part of your workspace (for example, if you use Angular or React-Native).</p>
<ul><li>Create a separate directory for the <code class="language-text">node_modules</code> project.</li></ul>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">mkdir nm-packages/myproj</code></pre></div>
<ul><li>Create an empty lockfile in the new project. Yarn uses lockfiles to locate the root of projects.</li></ul>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">touch nm-packages/myproj/yarn.lock</code></pre></div>
<ul><li>Add a <code class="language-text">.yarnrc.yml</code> file inside the new directory that enables <code class="language-text">node_modules</code> just for it (<code class="language-text">nm-packages/myproj/.yarnrc.yml</code>):</li></ul>
<div class="gatsby-highlight" data-language="yml"><pre class="language-yml"><code class="language-yml"><span class="token key atrule">nodeLinker</span><span class="token punctuation">:</span> node<span class="token punctuation">-</span>modules</code></pre></div>
<ul><li>Add a PnP ignore pattern for this path in your main <code class="language-text">.yarnrc.yml</code> at the root of your monorepo:</li></ul>
<div class="gatsby-highlight" data-language="yml"><pre class="language-yml"><code class="language-yml"><span class="token key atrule">pnpIgnorePatterns</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> ./nm<span class="token punctuation">-</span>packages/<span class="token important">**</span></code></pre></div>
<ul>
<li>Run <code class="language-text">yarn</code> to apply <code class="language-text">pnpIgnorePatterns</code> in the repo root.</li>
<li>Run <code class="language-text">cd nm-packages/myproj &amp;&amp; yarn</code> to install the now isolated project.</li>
</ul>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2016&ndash;present Yarn Contributors<br>Licensed under the BSD License.<br>
    <a href="https://yarnpkg.com/getting-started/recipes" class="_attribution-link">https://yarnpkg.com/getting-started/recipes</a>
  </p>
</div>
