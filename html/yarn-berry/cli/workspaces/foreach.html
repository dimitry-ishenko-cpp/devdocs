<h1>yarn workspaces foreach</h1>

<div class="css-elchao exirf770">
<blockquote>
<p><strong>Plugin</strong></p>
<p>To use this command, first install the <code class="language-text">workspace-tools</code> plugin: <code class="language-text">yarn plugin import workspace-tools</code></p>
</blockquote>
<p>Run a command on all workspaces.</p>
<h2 id="usage">
Usage</h2>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$&gt; yarn workspaces foreach &lt;commandName&gt; ...</code></pre></div>
<h2 id="examples">
Examples</h2>
<p>Publish current and all descendant packages :</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">yarn workspaces foreach npm publish --tolerate-republish</code></pre></div>
<p>Run build script on current and all descendant packages :</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">yarn workspaces foreach run build</code></pre></div>
<p>Run build script on current and all descendant packages in parallel, building package dependencies first :</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">yarn workspaces foreach -pt run build</code></pre></div>
<p>Run build script on several packages and all their dependencies, building dependencies first :</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">yarn workspaces foreach -ptR --from '{workspace-a,workspace-b}' run build</code></pre></div>
<h2 id="options">
Options</h2>
<table>
<thead><tr>
<th><div>Definition</div></th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><span id="options-R%2C-recursive" class="header-code"><code class="language-text">-R,--recursive</code></span></td>
<td>Find packages via dependencies/devDependencies instead of using the workspaces field</td>
</tr>
<tr>
<td><span id="options-from%20%230" class="header-code"><code class="language-text">--from #0</code></span></td>
<td>An array of glob pattern idents from which to base any recursion</td>
</tr>
<tr>
<td><span id="options-A%2C-all" class="header-code"><code class="language-text">-A,--all</code></span></td>
<td>Run the command on all workspaces of a project</td>
</tr>
<tr>
<td><span id="options-v%2C-verbose" class="header-code"><code class="language-text">-v,--verbose</code></span></td>
<td>Prefix each output line with the name of the originating workspace</td>
</tr>
<tr>
<td><span id="options-p%2C-parallel" class="header-code"><code class="language-text">-p,--parallel</code></span></td>
<td>Run the commands in parallel</td>
</tr>
<tr>
<td><span id="options-i%2C-interlaced" class="header-code"><code class="language-text">-i,--interlaced</code></span></td>
<td>Print the output of commands in real-time instead of buffering it</td>
</tr>
<tr>
<td><span id="options-j%2C-jobs%20%230" class="header-code"><code class="language-text">-j,--jobs #0</code></span></td>
<td>The maximum number of parallel tasks that the execution will be limited to; or <code class="language-text">unlimited</code>
</td>
</tr>
<tr>
<td><span id="options-t%2C-topological" class="header-code"><code class="language-text">-t,--topological</code></span></td>
<td>Run the command after all workspaces it depends on (regular) have finished</td>
</tr>
<tr>
<td><span id="options-topological-dev" class="header-code"><code class="language-text">--topological-dev</code></span></td>
<td>Run the command after all workspaces it depends on (regular + dev) have finished</td>
</tr>
<tr>
<td><span id="options-include%20%230" class="header-code"><code class="language-text">--include #0</code></span></td>
<td>An array of glob pattern idents; only matching workspaces will be traversed</td>
</tr>
<tr>
<td><span id="options-exclude%20%230" class="header-code"><code class="language-text">--exclude #0</code></span></td>
<td>An array of glob pattern idents; matching workspaces won't be traversed</td>
</tr>
<tr>
<td><span id="options-no-private" class="header-code"><code class="language-text">--no-private</code></span></td>
<td>Avoid running the command on private workspaces</td>
</tr>
<tr>
<td><span id="options-since" class="header-code"><code class="language-text">--since</code></span></td>
<td>Only include workspaces that have been changed since the specified ref.</td>
</tr>
</tbody>
</table>
<h2 id="details">
Details</h2>
<p>This command will run a given sub-command on current and all its descendant workspaces. Various flags can alter the exact behavior of the command:</p>
<ul>
<li><p>If <code class="language-text">-p,--parallel</code> is set, the commands will be ran in parallel; they'll by default be limited to a number of parallel tasks roughly equal to half your core number, but that can be overridden via <code class="language-text">-j,--jobs</code>, or disabled by setting <code class="language-text">-j unlimited</code>.</p></li>
<li><p>If <code class="language-text">-p,--parallel</code> and <code class="language-text">-i,--interlaced</code> are both set, Yarn will print the lines from the output as it receives them. If <code class="language-text">-i,--interlaced</code> wasn't set, it would instead buffer the output from each process and print the resulting buffers only after their source processes have exited.</p></li>
<li><p>If <code class="language-text">-t,--topological</code> is set, Yarn will only run the command after all workspaces that it depends on through the <code class="language-text">dependencies</code> field have successfully finished executing. If <code class="language-text">--topological-dev</code> is set, both the <code class="language-text">dependencies</code> and <code class="language-text">devDependencies</code> fields will be considered when figuring out the wait points.</p></li>
<li><p>If <code class="language-text">-A,--all</code> is set, Yarn will run the command on all the workspaces of a project. By default yarn runs the command only on current and all its descendant workspaces.</p></li>
<li><p>If <code class="language-text">-R,--recursive</code> is set, Yarn will find workspaces to run the command on by recursively evaluating <code class="language-text">dependencies</code> and <code class="language-text">devDependencies</code> fields, instead of looking at the <code class="language-text">workspaces</code> fields.</p></li>
<li><p>If <code class="language-text">--from</code> is set, Yarn will use the packages matching the 'from' glob as the starting point for any recursive search.</p></li>
<li><p>If <code class="language-text">--since</code> is set, Yarn will only run the command on workspaces that have been modified since the specified ref. By default Yarn will use the refs specified by the <code class="language-text">changesetBaseRefs</code> configuration option.</p></li>
<li><p>The command may apply to only some workspaces through the use of <code class="language-text">--include</code> which acts as a whitelist. The <code class="language-text">--exclude</code> flag will do the opposite and will be a list of packages that mustn't execute the script. Both flags accept glob patterns (if valid Idents and supported by <a href="https://github.com/micromatch/micromatch">micromatch</a>). Make sure to escape the patterns, to prevent your own shell from trying to expand them.</p></li>
</ul>
<p>Adding the <code class="language-text">-v,--verbose</code> flag will cause Yarn to print more information; in particular the name of the workspace that generated the output will be printed at the front of each line.</p>
<p>If the command is <code class="language-text">run</code> and the script being run does not exist the child workspace will be skipped without error.</p>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2016&ndash;present Yarn Contributors<br>Licensed under the BSD License.<br>
    <a href="https://yarnpkg.com/cli/workspaces/foreach" class="_attribution-link">https://yarnpkg.com/cli/workspaces/foreach</a>
  </p>
</div>
