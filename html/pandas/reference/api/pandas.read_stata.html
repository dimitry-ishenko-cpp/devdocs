<h1>pandas.read_stata</h1> <dl class="py function"> <dt class="sig sig-object py" id="pandas.read_stata"> <span class="sig-prename descclassname"><span class="pre">pandas.</span></span><span class="sig-name descname"><span class="pre">read_stata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath_or_buffer</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">convert_dates</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">convert_categoricals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">convert_missing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preserve_dtypes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order_categoricals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunksize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iterator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compression</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'infer'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/pandas-dev/pandas/blob/v2.2.2/pandas/io/stata.py#L2075-L2109"><span class="viewcode-link"><span class="pre">[source]</span></span></a>
</dt> <dd>
<p>Read Stata file into DataFrame.</p> <dl class="field-list"> <dt class="field-odd">Parameters<span class="colon">:</span>
</dt> <dd class="field-odd">
<dl> <dt>
<strong>filepath_or_buffer</strong><span class="classifier">:str, path object or file-like object</span>
</dt>
<dd>
<p>Any valid string path is acceptable. The string could be a URL. Valid URL schemes include http, ftp, s3, and file. For file URLs, a host is expected. A local file could be: <code class="docutils literal notranslate"><span class="pre">file://localhost/path/to/table.dta</span></code>.</p> <p>If you want to pass in a path object, pandas accepts any <code class="docutils literal notranslate"><span class="pre">os.PathLike</span></code>.</p> <p>By file-like object, we refer to objects with a <code class="docutils literal notranslate"><span class="pre">read()</span></code> method, such as a file handle (e.g. via builtin <code class="docutils literal notranslate"><span class="pre">open</span></code> function) or <code class="docutils literal notranslate"><span class="pre">StringIO</span></code>.</p> </dd> <dt>
<strong>convert_dates</strong><span class="classifier">:bool, default True</span>
</dt>
<dd>
<p>Convert date variables to DataFrame time values.</p> </dd> <dt>
<strong>convert_categoricals</strong><span class="classifier">:bool, default True</span>
</dt>
<dd>
<p>Read value labels and convert columns to Categorical/Factor variables.</p> </dd> <dt>
<strong>index_col</strong><span class="classifier">:str, optional</span>
</dt>
<dd>
<p>Column to set as index.</p> </dd> <dt>
<strong>convert_missing</strong><span class="classifier">:bool, default False</span>
</dt>
<dd>
<p>Flag indicating whether to convert missing values to their Stata representations. If False, missing values are replaced with nan. If True, columns containing missing values are returned with object data types and missing values are represented by StataMissingValue objects.</p> </dd> <dt>
<strong>preserve_dtypes</strong><span class="classifier">:bool, default True</span>
</dt>
<dd>
<p>Preserve Stata datatypes. If False, numeric data are upcast to pandas default types for foreign data (float64 or int64).</p> </dd> <dt>
<strong>columns</strong><span class="classifier">:list or None</span>
</dt>
<dd>
<p>Columns to retain. Columns will be returned in the given order. None returns all columns.</p> </dd> <dt>
<strong>order_categoricals</strong><span class="classifier">:bool, default True</span>
</dt>
<dd>
<p>Flag indicating whether converted categorical data are ordered.</p> </dd> <dt>
<strong>chunksize</strong><span class="classifier">:int, default None</span>
</dt>
<dd>
<p>Return StataReader object for iterations, returns chunks with given number of lines.</p> </dd> <dt>
<strong>iterator</strong><span class="classifier">:bool, default False</span>
</dt>
<dd>
<p>Return StataReader object.</p> </dd> <dt>
<strong>compression</strong><span class="classifier">:str or dict, default ‘infer’</span>
</dt>
<dd>
<p>For on-the-fly decompression of on-disk data. If ‘infer’ and ‘filepath_or_buffer’ is path-like, then detect compression from the following extensions: ‘.gz’, ‘.bz2’, ‘.zip’, ‘.xz’, ‘.zst’, ‘.tar’, ‘.tar.gz’, ‘.tar.xz’ or ‘.tar.bz2’ (otherwise no compression). If using ‘zip’ or ‘tar’, the ZIP file must contain only one data file to be read in. Set to <code class="docutils literal notranslate"><span class="pre">None</span></code> for no decompression. Can also be a dict with key <code class="docutils literal notranslate"><span class="pre">'method'</span></code> set to one of {<code class="docutils literal notranslate"><span class="pre">'zip'</span></code>, <code class="docutils literal notranslate"><span class="pre">'gzip'</span></code>, <code class="docutils literal notranslate"><span class="pre">'bz2'</span></code>, <code class="docutils literal notranslate"><span class="pre">'zstd'</span></code>, <code class="docutils literal notranslate"><span class="pre">'xz'</span></code>, <code class="docutils literal notranslate"><span class="pre">'tar'</span></code>} and other key-value pairs are forwarded to <code class="docutils literal notranslate"><span class="pre">zipfile.ZipFile</span></code>, <code class="docutils literal notranslate"><span class="pre">gzip.GzipFile</span></code>, <code class="docutils literal notranslate"><span class="pre">bz2.BZ2File</span></code>, <code class="docutils literal notranslate"><span class="pre">zstandard.ZstdDecompressor</span></code>, <code class="docutils literal notranslate"><span class="pre">lzma.LZMAFile</span></code> or <code class="docutils literal notranslate"><span class="pre">tarfile.TarFile</span></code>, respectively. As an example, the following could be passed for Zstandard decompression using a custom compression dictionary: <code class="docutils literal notranslate"><span class="pre">compression={'method':</span> <span class="pre">'zstd',</span> <span class="pre">'dict_data':</span> <span class="pre">my_compression_dict}</span></code>.</p> <div class="versionadded"> <p><span class="versionmodified added">New in version 1.5.0: </span>Added support for <cite>.tar</cite> files.</p> </div> </dd> <dt>
<strong>storage_options</strong><span class="classifier">:dict, optional</span>
</dt>
<dd>
<p>Extra options that make sense for a particular storage connection, e.g. host, port, username, password, etc. For HTTP(S) URLs the key-value pairs are forwarded to <code class="docutils literal notranslate"><span class="pre">urllib.request.Request</span></code> as header options. For other URLs (e.g. starting with “s3://”, and “gcs://”) the key-value pairs are forwarded to <code class="docutils literal notranslate"><span class="pre">fsspec.open</span></code>. Please see <code class="docutils literal notranslate"><span class="pre">fsspec</span></code> and <code class="docutils literal notranslate"><span class="pre">urllib</span></code> for more details, and for more examples on storage options refer <a class="reference external" href="https://pandas.pydata.org/docs/user_guide/io.html?highlight=storage_options#reading-writing-remote-files">here</a>.</p> </dd> </dl> </dd> <dt class="field-even">Returns<span class="colon">:</span>
</dt> <dd class="field-even">
<dl class="simple"> <dt>DataFrame or pandas.api.typing.StataReader</dt>
 </dl> </dd> </dl> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">io.stata.StataReader</span></code></dt>
<dd>
<p>Low-level reader for Stata data files.</p> </dd> <dt><a class="reference internal" href="pandas.dataframe.to_stata.html#pandas.DataFrame.to_stata" title="pandas.DataFrame.to_stata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DataFrame.to_stata</span></code></a></dt>
<dd>
<p>Export Stata data files.</p> </dd> </dl> </div> <p class="rubric">Notes</p> <p>Categorical variables read through an iterator may not have the same categories and dtype. This occurs when a variable stored in a DTA file is associated to an incomplete set of value labels that only label a strict subset of the values.</p> <p class="rubric">Examples</p> <p>Creating a dummy stata for this example</p> <div class="doctest highlight-default notranslate">
<div class="highlight"><pre data-language="python">&gt;&gt;&gt; df = pd.DataFrame({'animal': ['falcon', 'parrot', 'falcon', 'parrot'],
...                     'speed': [350, 18, 361, 15]})  
&gt;&gt;&gt; df.to_stata('animals.dta')  
</pre></div> </div> <p>Read a Stata dta file:</p> <div class="doctest highlight-default notranslate">
<div class="highlight"><pre data-language="python">&gt;&gt;&gt; df = pd.read_stata('animals.dta')  
</pre></div> </div> <p>Read a Stata dta file in 10,000 line chunks:</p> <div class="doctest highlight-default notranslate">
<div class="highlight"><pre data-language="python">&gt;&gt;&gt; values = np.random.randint(0, 10, size=(20_000, 1), dtype="uint8")  
&gt;&gt;&gt; df = pd.DataFrame(values, columns=["i"])  
&gt;&gt;&gt; df.to_stata('filename.dta')  
</pre></div> </div> <div class="doctest highlight-default notranslate">
<div class="highlight"><pre data-language="python">&gt;&gt;&gt; with pd.read_stata('filename.dta', chunksize=10000) as itr: 
&gt;&gt;&gt;     for chunk in itr:
...         # Operate on a single chunk, e.g., chunk.mean()
...         pass  
</pre></div> </div> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2008&ndash;2022, AQR Capital Management, LLC, Lambda Foundry, Inc. and PyData Development Team<br>Licensed under the 3-clause BSD License.<br>
    <a href="https://pandas.pydata.org/pandas-docs/version/2.2.2/reference/api/pandas.read_stata.html" class="_attribution-link">https://pandas.pydata.org/pandas-docs/version/2.2.2/reference/api/pandas.read_stata.html</a>
  </p>
</div>
