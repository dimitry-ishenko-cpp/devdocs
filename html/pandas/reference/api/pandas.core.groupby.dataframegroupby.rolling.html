<h1>pandas.core.groupby.DataFrameGroupBy.rolling</h1> <dl class="py method"> <dt class="sig sig-object py" id="pandas.core.groupby.DataFrameGroupBy.rolling"> <span class="sig-prename descclassname"><span class="pre">DataFrameGroupBy.</span></span><span class="sig-name descname"><span class="pre">rolling</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/pandas-dev/pandas/blob/v2.2.2/pandas/core/groupby/groupby.py#L3747-L3885"><span class="viewcode-link"><span class="pre">[source]</span></span></a>
</dt> <dd>
<p>Return a rolling grouper, providing rolling functionality per group.</p> <dl class="field-list"> <dt class="field-odd">Parameters<span class="colon">:</span>
</dt> <dd class="field-odd">
<dl> <dt>
<strong>window</strong><span class="classifier">:int, timedelta, str, offset, or BaseIndexer subclass</span>
</dt>
<dd>
<p>Size of the moving window.</p> <p>If an integer, the fixed number of observations used for each window.</p> <p>If a timedelta, str, or offset, the time period of each window. Each window will be a variable sized based on the observations included in the time-period. This is only valid for datetimelike indexes. To learn more about the offsets &amp; frequency strings, please see <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#offset-aliases">this link</a>.</p> <p>If a BaseIndexer subclass, the window boundaries based on the defined <code class="docutils literal notranslate"><span class="pre">get_window_bounds</span></code> method. Additional rolling keyword arguments, namely <code class="docutils literal notranslate"><span class="pre">min_periods</span></code>, <code class="docutils literal notranslate"><span class="pre">center</span></code>, <code class="docutils literal notranslate"><span class="pre">closed</span></code> and <code class="docutils literal notranslate"><span class="pre">step</span></code> will be passed to <code class="docutils literal notranslate"><span class="pre">get_window_bounds</span></code>.</p> </dd> <dt>
<strong>min_periods</strong><span class="classifier">:int, default None</span>
</dt>
<dd>
<p>Minimum number of observations in window required to have a value; otherwise, result is <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>.</p> <p>For a window that is specified by an offset, <code class="docutils literal notranslate"><span class="pre">min_periods</span></code> will default to 1.</p> <p>For a window that is specified by an integer, <code class="docutils literal notranslate"><span class="pre">min_periods</span></code> will default to the size of the window.</p> </dd> <dt>
<strong>center</strong><span class="classifier">:bool, default False</span>
</dt>
<dd>
<p>If False, set the window labels as the right edge of the window index.</p> <p>If True, set the window labels as the center of the window index.</p> </dd> <dt>
<strong>win_type</strong><span class="classifier">:str, default None</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">None</span></code>, all points are evenly weighted.</p> <p>If a string, it must be a valid <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/signal.windows.html#module-scipy.signal.windows">scipy.signal window function</a>.</p> <p>Certain Scipy window types require additional parameters to be passed in the aggregation function. The additional parameters must match the keywords specified in the Scipy window type method signature.</p> </dd> <dt>
<strong>on</strong><span class="classifier">:str, optional</span>
</dt>
<dd>
<p>For a DataFrame, a column label or Index level on which to calculate the rolling window, rather than the DataFrame’s index.</p> <p>Provided integer column is ignored and excluded from result since an integer index is not used to calculate the rolling window.</p> </dd> <dt>
<strong>axis</strong><span class="classifier">:int or str, default 0</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">0</span></code> or <code class="docutils literal notranslate"><span class="pre">'index'</span></code>, roll across the rows.</p> <p>If <code class="docutils literal notranslate"><span class="pre">1</span></code> or <code class="docutils literal notranslate"><span class="pre">'columns'</span></code>, roll across the columns.</p> <p>For <cite>Series</cite> this parameter is unused and defaults to 0.</p> </dd> <dt>
<strong>closed</strong><span class="classifier">:str, default None</span>
</dt>
<dd>
<p>If <code class="docutils literal notranslate"><span class="pre">'right'</span></code>, the first point in the window is excluded from calculations.</p> <p>If <code class="docutils literal notranslate"><span class="pre">'left'</span></code>, the last point in the window is excluded from calculations.</p> <p>If <code class="docutils literal notranslate"><span class="pre">'both'</span></code>, no points in the window are excluded from calculations.</p> <p>If <code class="docutils literal notranslate"><span class="pre">'neither'</span></code>, the first and last points in the window are excluded from calculations.</p> <p>Default <code class="docutils literal notranslate"><span class="pre">None</span></code> (<code class="docutils literal notranslate"><span class="pre">'right'</span></code>).</p> </dd> <dt>
<strong>method</strong><span class="classifier">:str {‘single’, ‘table’}, default ‘single’</span>
</dt>
<dd>
<p>Execute the rolling operation per single column or row (<code class="docutils literal notranslate"><span class="pre">'single'</span></code>) or over the entire object (<code class="docutils literal notranslate"><span class="pre">'table'</span></code>).</p> <p>This argument is only implemented when specifying <code class="docutils literal notranslate"><span class="pre">engine='numba'</span></code> in the method call.</p> </dd> </dl> </dd> <dt class="field-even">Returns<span class="colon">:</span>
</dt> <dd class="field-even">
<dl class="simple"> <dt>pandas.api.typing.RollingGroupby</dt>
<dd>
<p>Return a new grouper with our rolling appended.</p> </dd> </dl> </dd> </dl> <div class="admonition seealso"> <p class="admonition-title">See also</p> <dl class="simple"> <dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">Series.rolling</span></code></dt>
<dd>
<p>Calling object with Series data.</p> </dd> <dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">DataFrame.rolling</span></code></dt>
<dd>
<p>Calling object with DataFrames.</p> </dd> <dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">Series.groupby</span></code></dt>
<dd>
<p>Apply a function groupby to a Series.</p> </dd> <dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">DataFrame.groupby</span></code></dt>
<dd>
<p>Apply a function groupby.</p> </dd> </dl> </div> <p class="rubric">Examples</p> <div class="doctest highlight-default notranslate">
<div class="highlight"><pre data-language="python">&gt;&gt;&gt; df = pd.DataFrame({'A': [1, 1, 2, 2],
...                    'B': [1, 2, 3, 4],
...                    'C': [0.362, 0.227, 1.267, -0.562]})
&gt;&gt;&gt; df
      A  B      C
0     1  1  0.362
1     1  2  0.227
2     2  3  1.267
3     2  4 -0.562
</pre></div> </div> <div class="doctest highlight-default notranslate">
<div class="highlight"><pre data-language="python">&gt;&gt;&gt; df.groupby('A').rolling(2).sum()
    B      C
A
1 0  NaN    NaN
  1  3.0  0.589
2 2  NaN    NaN
  3  7.0  0.705
</pre></div> </div> <div class="doctest highlight-default notranslate">
<div class="highlight"><pre data-language="python">&gt;&gt;&gt; df.groupby('A').rolling(2, min_periods=1).sum()
    B      C
A
1 0  1.0  0.362
  1  3.0  0.589
2 2  3.0  1.267
  3  7.0  0.705
</pre></div> </div> <div class="doctest highlight-default notranslate">
<div class="highlight"><pre data-language="python">&gt;&gt;&gt; df.groupby('A').rolling(2, on='B').sum()
    B      C
A
1 0  1    NaN
  1  2  0.589
2 2  3    NaN
  3  4  0.705
</pre></div> </div> </dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2008&ndash;2022, AQR Capital Management, LLC, Lambda Foundry, Inc. and PyData Development Team<br>Licensed under the 3-clause BSD License.<br>
    <a href="https://pandas.pydata.org/pandas-docs/version/2.2.2/reference/api/pandas.core.groupby.DataFrameGroupBy.rolling.html" class="_attribution-link">https://pandas.pydata.org/pandas-docs/version/2.2.2/reference/api/pandas.core.groupby.DataFrameGroupBy.rolling.html</a>
  </p>
</div>
