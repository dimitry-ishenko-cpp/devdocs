<h1>[Groovy] Class ASTTransformationCustomizer</h1> <ul class="inheritance"> 

<li>org.codehaus.groovy.control.customizers.ASTTransformationCustomizer </li>
</ul> <div class="description">   <dl> <dt>All Implemented Interfaces and Traits:</dt> <dd><a href="../../../../../groovy/transform/compilationunitaware.html">CompilationUnitAware</a></dd> </dl>   <pre data-language="groovy">@<a href="../../../../../groovy/transform/compilestatic.html" title="CompileStatic">CompileStatic</a>
class ASTTransformationCustomizer
extends <a href="compilationcustomizer.html">CompilationCustomizer</a>
implements <a href="../../../../../groovy/transform/compilationunitaware.html">CompilationUnitAware</a></pre> <p> This customizer allows applying an AST transformation to a source unit with several strategies. Creating a customizer with the <a href="asttransformationcustomizer.html#ASTTransformationCustomizer(java.lang.Class)" title=" class constructor"> class constructor</a> will trigger an AST transformation for each class node of a source unit. However, you cannot pass parameters to the annotation so the default values will be used. Writing : </p>
<pre data-language="groovy">
     def configuration = new CompilerConfiguration()
     configuration.addCompilationCustomizers(new ASTTransformationCustomizer(Log))
     def shell = new GroovyShell(configuration)
     shell.evaluate("""
        class MyClass {

        }""")
 </pre> is equivalent to : <pre data-language="groovy">
     def shell = new GroovyShell()
     shell.evaluate("""
        @Log
        class MyClass {

        }""")
 </pre> The class passed as a constructor parameter must be an AST transformation annotation. Alternatively, you can apply a global AST transformation by calling the <a href="asttransformationcustomizer.html#ASTTransformationCustomizer(org.codehaus.groovy.transform.ASTTransformation)" title="AST transformation">AST transformation</a>. In that case, the transformation is applied once for the whole source unit. Unlike a global AST transformation declared in the META-INF/services/org.codehaus.groovy.transform.ASTTransformation file, which are applied if the file is in the classpath, using this customizer you'll have the choice to apply your transformation selectively. It can also be useful to debug global AST transformations without having to package your annotation in a jar file. <dl>
<dt><b>Since:</b></dt>
<dd>1.8.0</dd>
</dl>   </div> <div class="summary">        <h2 id="field_summary">Field Summary</h2>  <table class="overviewSummary"> <caption>
<span>Fields</span>
</caption> <tr> <th class="colFirst" scope="col">Modifiers</th> <th class="colLast" scope="col">Name</th> <th class="colLast" scope="col">Description</th> </tr> <tr class="altColor"> <td class="colFirst">
<code><strong>protectedÂ <a href="../compilationunit.html">CompilationUnit</a></strong></code> </td> <td class="colLast"><code><a href="#compilationUnit">compilationUnit</a></code></td> <td class="colLast"></td> </tr> </table>       <h2 id="property_summary">Properties Summary</h2>  <table class="overviewSummary"> <caption>
<span>Properties</span>
</caption> <tr> <th class="colFirst" scope="col">Type</th> <th class="colLast" scope="col">Name and description</th> </tr> <tr class="altColor"> <td class="colFirst">
<code><strong><a href="../../transform/asttransformation.html">ASTTransformation</a></strong></code> </td> <td class="colLast">
<code><a href="#transformation">transformation</a></code><br>
</td> </tr> </table>        <h2 id="constructor_summary">Constructor Summary</h2>  <table class="overviewSummary"> <caption>
<span>Constructors</span>
</caption> <tr> <th class="colFirst" scope="col">Constructor and description</th> </tr> <tr class="altColor"> <td class="colFirst"> <code><strong><a href="#ASTTransformationCustomizer(Class,%20java.lang.String,%20java.lang.ClassLoader)">ASTTransformationCustomizer</a></strong>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html" title="Class">Class</a>&lt;? extends Annotation&gt; transformationAnnotation, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="String">String</a> astTransformationClassName, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html" title="ClassLoader">ClassLoader</a> transformationClassLoader)</code><br>Creates an AST transformation customizer using the specified annotation. </td> </tr> <tr class="rowColor"> <td class="colFirst"> <code><strong><a href="#ASTTransformationCustomizer(Class,%20java.lang.String)">ASTTransformationCustomizer</a></strong>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html" title="Class">Class</a>&lt;? extends Annotation&gt; transformationAnnotation, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="String">String</a> astTransformationClassName)</code><br>Creates an AST transformation customizer using the specified annotation. </td> </tr> <tr class="altColor"> <td class="colFirst"> <code><strong><a href="#ASTTransformationCustomizer(java.util.Map,%20Class,%20java.lang.String,%20java.lang.ClassLoader)">ASTTransformationCustomizer</a></strong>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="Map">Map</a> annotationParams, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html" title="Class">Class</a>&lt;? extends Annotation&gt; transformationAnnotation, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="String">String</a> astTransformationClassName, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html" title="ClassLoader">ClassLoader</a> transformationClassLoader)</code><br>Creates an AST transformation customizer using the specified annotation. </td> </tr> <tr class="rowColor"> <td class="colFirst"> <code><strong><a href="#ASTTransformationCustomizer(java.util.Map,%20Class,%20java.lang.String)">ASTTransformationCustomizer</a></strong>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="Map">Map</a> annotationParams, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html" title="Class">Class</a>&lt;? extends Annotation&gt; transformationAnnotation, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="String">String</a> astTransformationClassName)</code><br>
</td> </tr> <tr class="altColor"> <td class="colFirst"> <code><strong><a href="#ASTTransformationCustomizer(Class,%20java.lang.ClassLoader)">ASTTransformationCustomizer</a></strong>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html" title="Class">Class</a>&lt;? extends Annotation&gt; transformationAnnotation, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html" title="ClassLoader">ClassLoader</a> transformationClassLoader)</code><br>Creates an AST transformation customizer using the specified annotation. </td> </tr> <tr class="rowColor"> <td class="colFirst"> <code><strong><a href="#ASTTransformationCustomizer(Class)">ASTTransformationCustomizer</a></strong>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html" title="Class">Class</a>&lt;? extends Annotation&gt; transformationAnnotation)</code><br>Creates an AST transformation customizer using the specified annotation.</td> </tr> <tr class="altColor"> <td class="colFirst"> <code><strong><a href="#ASTTransformationCustomizer(org.codehaus.groovy.transform.ASTTransformation)">ASTTransformationCustomizer</a></strong>(<a href="../../transform/asttransformation.html">ASTTransformation</a> transformation)</code><br>Creates an AST transformation customizer using the specified transformation.</td> </tr> <tr class="rowColor"> <td class="colFirst"> <code><strong><a href="#ASTTransformationCustomizer(java.util.Map,%20Class,%20java.lang.ClassLoader)">ASTTransformationCustomizer</a></strong>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="Map">Map</a> annotationParams, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html" title="Class">Class</a>&lt;? extends Annotation&gt; transformationAnnotation, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html" title="ClassLoader">ClassLoader</a> transformationClassLoader)</code><br>Creates an AST transformation customizer using the specified annotation. </td> </tr> <tr class="altColor"> <td class="colFirst"> <code><strong><a href="#ASTTransformationCustomizer(java.util.Map,%20Class)">ASTTransformationCustomizer</a></strong>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="Map">Map</a> annotationParams, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html" title="Class">Class</a>&lt;? extends Annotation&gt; transformationAnnotation)</code><br>
</td> </tr> <tr class="rowColor"> <td class="colFirst"> <code><strong><a href="#ASTTransformationCustomizer(java.util.Map,%20org.codehaus.groovy.transform.ASTTransformation)">ASTTransformationCustomizer</a></strong>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="Map">Map</a> annotationParams, <a href="../../transform/asttransformation.html">ASTTransformation</a> transformation)</code><br>
</td> </tr> </table>       <h2 id="method_summary">Methods Summary</h2>  <table class="overviewSummary"> <caption>
<span>Methods</span>
</caption> <tr> <th class="colFirst" scope="col">Type Params</th> <th class="colLast" scope="col">Return Type</th> <th class="colLast" scope="col">Name and description</th> </tr> <tr class="altColor"> <td class="colFirst"></td> <td class="colLast"><code>void</code></td> <td class="colLast">
<code><strong><a href="#call(org.codehaus.groovy.control.SourceUnit,%20org.codehaus.groovy.classgen.GeneratorContext,%20org.codehaus.groovy.ast.ClassNode)">call</a></strong>(<a href="../sourceunit.html">SourceUnit</a> source, <a href="../../classgen/generatorcontext.html">GeneratorContext</a> context, <a href="../../ast/classnode.html">ClassNode</a> classNode)</code><br>
</td> </tr> <tr class="rowColor"> <td class="colFirst"></td> <td class="colLast"><code>void</code></td> <td class="colLast">
<code><strong><a href="#setAnnotationParameters(Map)">setAnnotationParameters</a></strong>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="Map">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="String">String</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="Object">Object</a>&gt; params)</code><br>Specify annotation parameters. </td> </tr> <tr class="altColor"> <td class="colFirst"></td> <td class="colLast"><code>void</code></td> <td class="colLast">
<code><strong><a href="#setCompilationUnit(org.codehaus.groovy.control.CompilationUnit)">setCompilationUnit</a></strong>(<a href="../compilationunit.html">CompilationUnit</a> unit)</code><br>
</td> </tr> </table>    <h2 id="method_summary">Inherited Methods Summary</h2>  <table class="overviewSummary"> <caption>
<span>Inherited Methods</span>
</caption> <tr> <th class="colFirst" scope="col">Methods inherited from class</th> <th class="colLast" scope="col">Name</th> </tr> <tr class="altColor"> <td class="colFirst"><code>class <a href="compilationcustomizer.html">CompilationCustomizer</a></code></td> <td class="colLast"><code><a href="compilationcustomizer.html#getPhase()">getPhase</a></code></td> </tr> </table>      </div> <div class="details">      <h2 id="field_detail">Field Detail</h2>    <h3 id="compilationUnit" class="field">protected <a href="../compilationunit.html">CompilationUnit</a> <strong>compilationUnit</strong>
</h3>         <h2 id="prop_detail">Property Detail</h2>    <h3 id="transformation">final <a href="../../transform/asttransformation.html">ASTTransformation</a> <strong>transformation</strong>
</h3>         <h2 id="constructor_detail">Constructor Detail</h2>    <h3 id="ASTTransformationCustomizer(Class, java.lang.String, java.lang.ClassLoader)" class="constructor">
<strong>ASTTransformationCustomizer</strong>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html" title="Class">Class</a>&lt;? extends Annotation&gt; transformationAnnotation, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="String">String</a> astTransformationClassName, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html" title="ClassLoader">ClassLoader</a> transformationClassLoader)</h3> <p> Creates an AST transformation customizer using the specified annotation. The transformation classloader can be used if the transformation class cannot be loaded from the same class loader as the annotation class. It's assumed that the annotation is not annotated with <code>GroovyASTTransformationClass</code> and so the second argument supplies the link to the ASTTransformation class that should be used. </p>
<dl>
<dt><b>Parameters:</b></dt>
<dd>transformationAnnotation</dd>
<dd>astTransformationClassName</dd>
<dd>transformationClassLoader</dd>
</dl>      <h3 id="ASTTransformationCustomizer(Class, java.lang.String)" class="constructor">
<strong>ASTTransformationCustomizer</strong>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html" title="Class">Class</a>&lt;? extends Annotation&gt; transformationAnnotation, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="String">String</a> astTransformationClassName)</h3> <p> Creates an AST transformation customizer using the specified annotation. It's assumed that the annotation is not annotated with <code>GroovyASTTransformationClass</code> and so the second argument supplies the link to the ASTTransformation class that should be used. </p>
<dl>
<dt><b>Parameters:</b></dt>
<dd>transformationAnnotation</dd>
<dd>astTransformationClassName</dd>
</dl>      <h3 id="ASTTransformationCustomizer(java.util.Map, Class, java.lang.String, java.lang.ClassLoader)" class="constructor">
<strong>ASTTransformationCustomizer</strong>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="Map">Map</a> annotationParams, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html" title="Class">Class</a>&lt;? extends Annotation&gt; transformationAnnotation, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="String">String</a> astTransformationClassName, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html" title="ClassLoader">ClassLoader</a> transformationClassLoader)</h3> <p> Creates an AST transformation customizer using the specified annotation. The transformation classloader can be used if the transformation class cannot be loaded from the same class loader as the annotation class. Additionally, you can pass a map of parameters that will be used to parameterize the annotation. It's assumed that the annotation is not annotated with <code>GroovyASTTransformationClass</code> and so the second argument supplies the link to the ASTTransformation class that should be used. </p>
<dl>
<dt><b>Parameters:</b></dt>
<dd>transformationAnnotation</dd>
<dd>astTransformationClassName</dd>
<dd>transformationClassLoader</dd>
</dl>      <h3 id="ASTTransformationCustomizer(java.util.Map, Class, java.lang.String)" class="constructor">
<strong>ASTTransformationCustomizer</strong>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="Map">Map</a> annotationParams, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html" title="Class">Class</a>&lt;? extends Annotation&gt; transformationAnnotation, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="String">String</a> astTransformationClassName)</h3>       <h3 id="ASTTransformationCustomizer(Class, java.lang.ClassLoader)" class="constructor">
<strong>ASTTransformationCustomizer</strong>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html" title="Class">Class</a>&lt;? extends Annotation&gt; transformationAnnotation, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html" title="ClassLoader">ClassLoader</a> transformationClassLoader)</h3> <p> Creates an AST transformation customizer using the specified annotation. The transformation classloader can be used if the transformation class cannot be loaded from the same class loader as the annotation class. </p>
<dl>
<dt><b>Parameters:</b></dt>
<dd>transformationAnnotation</dd>
<dd>transformationClassLoader</dd>
</dl>      <h3 id="ASTTransformationCustomizer(Class)" class="constructor">
<strong>ASTTransformationCustomizer</strong>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html" title="Class">Class</a>&lt;? extends Annotation&gt; transformationAnnotation)</h3> <p> Creates an AST transformation customizer using the specified annotation. </p>
<dl>
<dt><b>Parameters:</b></dt>
<dd>transformationAnnotation</dd>
</dl>      <h3 id="ASTTransformationCustomizer(org.codehaus.groovy.transform.ASTTransformation)" class="constructor">
<strong>ASTTransformationCustomizer</strong>(<a href="../../transform/asttransformation.html">ASTTransformation</a> transformation)</h3> <p> Creates an AST transformation customizer using the specified transformation.</p>      <h3 id="ASTTransformationCustomizer(java.util.Map, Class, java.lang.ClassLoader)" class="constructor">
<strong>ASTTransformationCustomizer</strong>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="Map">Map</a> annotationParams, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html" title="Class">Class</a>&lt;? extends Annotation&gt; transformationAnnotation, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html" title="ClassLoader">ClassLoader</a> transformationClassLoader)</h3> <p> Creates an AST transformation customizer using the specified annotation. The transformation classloader can be used if the transformation class cannot be loaded from the same class loader as the annotation class. Additionally, you can pass a map of parameters that will be used to parameterize the annotation. </p>
<dl>
<dt><b>Parameters:</b></dt>
<dd>transformationAnnotation</dd>
<dd>transformationClassLoader</dd>
</dl>      <h3 id="ASTTransformationCustomizer(java.util.Map, Class)" class="constructor">
<strong>ASTTransformationCustomizer</strong>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="Map">Map</a> annotationParams, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html" title="Class">Class</a>&lt;? extends Annotation&gt; transformationAnnotation)</h3>       <h3 id="ASTTransformationCustomizer(java.util.Map, org.codehaus.groovy.transform.ASTTransformation)" class="constructor">
<strong>ASTTransformationCustomizer</strong>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="Map">Map</a> annotationParams, <a href="../../transform/asttransformation.html">ASTTransformation</a> transformation)</h3>         <h2 id="method_detail">Method Detail</h2>    <h3 id="call(org.codehaus.groovy.control.SourceUnit, org.codehaus.groovy.classgen.GeneratorContext, org.codehaus.groovy.ast.ClassNode)" class="method">@<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Override.html" title="Override">Override</a> @<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/SuppressWarnings.html" title="SuppressWarnings">SuppressWarnings</a>(value: Instanceof) void <strong>call</strong>(<a href="../sourceunit.html">SourceUnit</a> source, <a href="../../classgen/generatorcontext.html">GeneratorContext</a> context, <a href="../../ast/classnode.html">ClassNode</a> classNode)</h3>       <h3 id="setAnnotationParameters(Map)" class="method">@<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/SuppressWarnings.html" title="SuppressWarnings">SuppressWarnings</a>(value: Instanceof) void <strong>setAnnotationParameters</strong>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="Map">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="String">String</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="Object">Object</a>&gt; params)</h3> <p> Specify annotation parameters. For example, if the annotation is : </p>
<pre data-language="groovy">@Log(value='logger')</pre> You could create an AST transformation customizer and specify the "value" parameter thanks to this method: <pre data-language="groovy">annotationParameters = [value: 'logger']

 Note that you cannot specify annotation closure values directly. If the annotation you want to add takes
 a closure as an argument, you will have to set a ClosureExpression instead. This can be done by either
 creating a custom ClosureExpression from code, or using the <a href="../../ast/builder/astbuilder.html" title="AstBuilder">AstBuilder</a>.

 Here is an example :
 <pre data-language="groovy">
        // add @Contract({distance &gt;= 0 })
        customizer = new ASTTransformationCustomizer(Contract)
        final expression = new AstBuilder().buildFromCode(CompilePhase.CONVERSION) {-&gt;
            distance &gt;= 0
        }.expression[0]
        customizer.annotationParameters = [value: expression]</pre> </pre>
<dl>
<dt><b>Parameters:</b></dt>
<dd>
<code>params</code> - the annotation parameters</dd>
</dl>
<dl>
<dt><b>Since:</b></dt>
<dd>1.8.1</dd>
</dl>      <h3 id="setCompilationUnit(org.codehaus.groovy.control.CompilationUnit)" class="method">void <strong>setCompilationUnit</strong>(<a href="../compilationunit.html">CompilationUnit</a> unit)</h3>        </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2003-2022 The Apache Software Foundation<br>Licensed under the Apache license.<br>
    <a href="https://docs.groovy-lang.org/4.0.0/html/gapi/org/codehaus/groovy/control/customizers/ASTTransformationCustomizer.html" class="_attribution-link">https://docs.groovy-lang.org/4.0.0/html/gapi/org/codehaus/groovy/control/customizers/ASTTransformationCustomizer.html</a>
  </p>
</div>
