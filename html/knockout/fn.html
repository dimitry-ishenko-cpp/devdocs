<h1>Adding custom functions using "fn"</h1> <p>Occasionally, you may find opportunities to streamline your code by attaching new functionality to Knockout’s core value types. You can define custom functions on any of the following types:</p> <p><img src="data:image/png;base64,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" alt=""></p> <p>Because of inheritance, if you attach a function to ko.subscribable, it will be available on all the others too. If you attach a function to ko.observable, it will be inherited by ko.observableArray but not by ko.computed.</p> <p>To attach a custom function, add it to one of the following extensibility points:</p> <ul> <li>ko.subscribable.fn</li> <li>ko.observable.fn</li> <li>ko.observableArray.fn</li> <li>ko.computed.fn</li> </ul> <p>Then, your custom function will become available on all values of that type created from that point onwards.</p> <p><strong><em>Note:</em></strong> It’s best to use this extensibility point only for custom functions that are truly applicable in a wide range of scenarios. You don’t need to add a custom function to these namespaces if you’re only planning to use it once.</p> <h3 id="example-a-filtered-view-of-an-observable-array">Example: A filtered view of an observable array</h3> <p>Here’s a way to define a filterByProperty function that will become available on all subsequently-created ko.observableArray instances:</p> <div class="highlight"><pre class="highlight" data-language="javascript">ko.observableArray.fn.filterByProperty = function(propName, matchValue) {
    return ko.pureComputed(function() {
        var allItems = this(), matchingItems = [];
        for (var i = 0; i &lt; allItems.length; i++) {
            var current = allItems[i];
            if (ko.unwrap(current[propName]) === matchValue)
                matchingItems.push(current);
        }
        return matchingItems;
    }, this);
}
</pre></div> <p>This returns a new computed value that provides a filtered view of the array, while leaving the original array unchanged. Because the filtered array is a computed observable, it will be re-evaluated whenever the underlying array changes.</p> <p>The following live example shows how you could use this:</p>  <div class="liveExample">Live examples are not available on DevDocs, sorry.</div> <h4>Source code: View</h4> <pre class="brush:html" data-language="html">
&lt;h3&gt;All tasks (&lt;span data-bind="text: tasks().length"&gt; &lt;/span&gt;)&lt;/h3&gt;
&lt;ul data-bind="foreach: tasks"&gt;
    &lt;li&gt;
        &lt;label&gt;
            &lt;input type="checkbox" data-bind="checked: done" /&gt;
            &lt;span data-bind="text: title"&gt; &lt;/span&gt;
        &lt;/label&gt;
    &lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;Done tasks (&lt;span data-bind="text: doneTasks().length"&gt; &lt;/span&gt;)&lt;/h3&gt;
&lt;ul data-bind="foreach: doneTasks"&gt;
    &lt;li data-bind="text: title"&gt;&lt;/li&gt;
&lt;/ul&gt;
</pre> <h4>Source code: View model</h4> <pre class="brush:js" data-language="js">
function Task(title, done) {
    this.title = ko.observable(title);
    this.done = ko.observable(done);
}

function AppViewModel() {
    this.tasks = ko.observableArray([
        new Task('Find new desktop background', true),
        new Task('Put shiny stickers on laptop', false),
        new Task('Request more reggae music in the office', true)
    ]);

    // Here's where we use the custom function
    this.doneTasks = this.tasks.filterByProperty("done", true);
}

ko.applyBindings(new AppViewModel());
</pre> <h4 id="its-not-mandatory">It’s not mandatory</h4> <p>If you tend to filter observable arrays a lot, adding a filterByProperty globally to all observable arrays might make your code tidier. But if you only need to filter occasionally, you could instead choose <em>not</em> to attach to ko.observableArray.fn, and instead just construct doneTasks by hand as follows:</p> <div class="highlight"><pre class="highlight" data-language="javascript">this.doneTasks = ko.pureComputed(function() {
    var all = this.tasks(), done = [];
    for (var i = 0; i &lt; all.length; i++)
        if (all[i].done())
            done.push(all[i]);
    return done;
}, this);
</pre></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Steven Sanderson, the Knockout.js team, and other contributors<br>Licensed under the MIT License.<br>
    <a href="https://knockoutjs.com/documentation/fn.html" class="_attribution-link">https://knockoutjs.com/documentation/fn.html</a>
  </p>
</div>
