<h1>DROP TABLE</h1> <div> <div class="node creole"> <div class="answer formatted"> <h2 class="anchored_heading" id="syntax">Syntax</h2> <pre class="fixed" data-language="sql">DROP [TEMPORARY] TABLE [IF EXISTS] [/*COMMENT TO SAVE*/]
    tbl_name [, tbl_name] ...
    [WAIT n|NOWAIT]
    [RESTRICT | CASCADE]
</pre> <h2 class="anchored_heading" id="description">Description</h2> <p><code>DROP TABLE</code> removes one or more tables. You must have the <code>DROP</code> privilege for each table. All table data and the table definition are removed, as well as <a href="../triggers/index.html">triggers</a> associated to the table, so be careful with this statement! If any of the tables named in the argument list do not exist, MariaDB returns an error indicating by name which non-existing tables it was unable to drop, but it also drops all of the tables in the list that do exist.</p> <p><strong>Important</strong>: When a table is dropped, user privileges on the table are not automatically dropped. See <a href="../grant/index.html">GRANT</a>.</p> <p>If another thread is using the table in an explicit transaction or an autocommit transaction, then the thread acquires a <a href="../metadata-locking/index.html">metadata lock (MDL)</a> on the table. The <code>DROP TABLE</code> statement will wait in the "Waiting for table metadata lock" <a href="../thread-states/index.html">thread state</a> until the MDL is released. MDLs are released in the following cases:</p> <ul start="1">
<li>If an MDL is acquired in an explicit transaction, then the MDL will be released when the transaction ends. </li>
<li>If an MDL is acquired in an autocommit transaction, then the MDL will be released when the statement ends. </li>
<li>Transactional and non-transactional tables are handled the same. </li>
</ul> <p>Note that for a partitioned table, <code>DROP TABLE</code> permanently removes the table definition, all of its partitions, and all of the data which was stored in those partitions. It also removes the partitioning definition (.par) file associated with the dropped table.</p> <p>For each referenced table, <code>DROP TABLE</code> drops a temporary table with that name, if it exists. If it does not exist, and the <code>TEMPORARY</code> keyword is not used, it drops a non-temporary table with the same name, if it exists. The <code>TEMPORARY</code> keyword ensures that a non-temporary table will not accidentally be dropped.</p> <p>Use <code>IF EXISTS</code> to prevent an error from occurring for tables that do not exist. A <code>NOTE</code> is generated for each non-existent table when using <code>IF EXISTS</code>. See <a href="../show-warnings/index.html">SHOW WARNINGS</a>.</p> <p>If a <a href="../foreign-keys/index.html">foreign key</a> references this table, the table cannot be dropped. In this case, it is necessary to drop the foreign key first.</p> <p><code>RESTRICT</code> and <code>CASCADE</code> are allowed to make porting from other database systems easier. In MariaDB, they do nothing.</p> <p>The comment before the table names (<code>/*COMMENT TO SAVE*/</code>) is stored in the <a href="../binary-log/index.html">binary log</a>. That feature can be used by replication tools to send their internal messages.</p> <p>It is possible to specify table names as <code>db_name</code>.<code>tab_name</code>. This is useful to delete tables from multiple databases with one statement. See <a href="../identifier-qualifiers/index.html">Identifier Qualifiers</a> for details.</p> <p>The <a href="../grant/index.html#table-privileges">DROP privilege</a> is required to use <code>DROP TABLE</code> on non-temporary tables. For temporary tables, no privilege is required, because such tables are only visible for the current session.</p> <p><strong>Note:</strong> <code>DROP TABLE</code> automatically commits the current active transaction, unless you use the <code>TEMPORARY</code> keyword.</p> <div class="mariadb_from_10_5_4 mariadb from_10_5_4 product">
<strong class="product_title">MariaDB starting with <a href="https://mariadb.com/kb/en/mariadb-1054-release-notes/">10.5.4</a></strong><p>From <a href="https://mariadb.com/kb/en/mariadb-1054-release-notes/">MariaDB 10.5.4</a>, <code>DROP TABLE</code> reliably deletes table remnants inside a storage engine even if the <code>.frm</code> file is missing. Before then, a missing <code>.frm</code> file would result in the statement failing.</p> </div>
<div class="mariadb_from_10_3_1 mariadb from_10_3_1 product">
<strong class="product_title">MariaDB starting with <a href="https://mariadb.com/kb/en/mariadb-1031-release-notes/">10.3.1</a></strong><h3 class="anchored_heading" id="waitnowait">WAIT/NOWAIT</h3> <p>Set the lock wait timeout. See <a href="../wait-and-nowait/index.html">WAIT and NOWAIT</a>.</p> </div>
<h2 class="anchored_heading" id="drop-table-in-replication">DROP TABLE in replication</h2> <p><code>DROP TABLE</code> has the following characteristics in <a href="../replication/index.html">replication</a>:</p> <ul start="1">
<li>
<code class="highlight fixed" style="white-space:pre-wrap">DROP TABLE IF EXISTS</code> are always logged. </li>
<li>
<code class="highlight fixed" style="white-space:pre-wrap">DROP TABLE</code> without <code class="highlight fixed" style="white-space:pre-wrap">IF EXISTS</code> for tables that don't exist are not written to the <a href="../binary-log/index.html">binary log</a>. </li>
<li>Dropping of <code class="highlight fixed" style="white-space:pre-wrap">TEMPORARY</code> tables are prefixed in the log with <code class="highlight fixed" style="white-space:pre-wrap">TEMPORARY</code>. These drops are only logged when running <a href="../binary-log-formats/index.html#statement-based">statement</a> or <a href="../binary-log-formats/index.html#mixed">mixed mode</a> replication. </li>
<li>One <code class="highlight fixed" style="white-space:pre-wrap">DROP TABLE</code> statement can be logged with up to 3 different <code class="highlight fixed" style="white-space:pre-wrap">DROP</code> statements: <ul start="1">
<li>
<code class="highlight fixed" style="white-space:pre-wrap">DROP TEMPORARY TABLE list_of_non_transactional_temporary_tables</code> </li>
<li>
<code class="highlight fixed" style="white-space:pre-wrap">DROP TEMPORARY TABLE list_of_transactional_temporary_tables</code> </li>
<li>
<code class="highlight fixed" style="white-space:pre-wrap">DROP TABLE list_of_normal_tables</code> </li>
</ul> </li>
</ul> <p><code class="highlight fixed" style="white-space:pre-wrap">DROP TABLE</code> on the primary is treated on the replica as <code class="highlight fixed" style="white-space:pre-wrap">DROP TABLE IF EXISTS</code>. You can change that by setting <a href="../replication-and-binary-log-server-system-variables/index.html#slave_ddl_exec_mode">slave-ddl-exec-mode</a> to <code class="highlight fixed" style="white-space:pre-wrap">STRICT</code>.</p> <h2 class="anchored_heading" id="dropping-an-internal-sql-table">Dropping an Internal #sql-... Table</h2> <p>From <a href="../what-is-mariadb-106/index.html">MariaDB 10.6</a>, <a href="#atomic-drop-table">DROP TABLE is atomic</a> and the following does not apply. Until <a href="../what-is-mariadb-105/index.html">MariaDB 10.5</a>, if the <a href="../mysqld-options/index.html">mariadbd/mysqld process</a> is killed during an <a href="../alter-table/index.html">ALTER TABLE</a> you may find a table named #sql-... in your data directory. In <a href="../what-is-mariadb-103/index.html">MariaDB 10.3</a>, InnoDB tables with this prefix will be deleted automatically during startup. From <a href="../what-is-mariadb-104/index.html">MariaDB 10.4</a>, these temporary tables will always be deleted automatically.</p> <p>If you want to delete one of these tables explicitly you can do so by using the following syntax:</p> <pre class="fixed" data-language="sql">DROP TABLE `#mysql50##sql-...`;
</pre>
<p>When running an <code>ALTER TABLEâ€¦ALGORITHM=INPLACE</code> that rebuilds the table, InnoDB will create an internal <code>#sql-ib</code> table. Until <a href="https://mariadb.com/kb/en/mariadb-1032-release-notes/">MariaDB 10.3.2</a>, for these tables, the <code>.frm</code> file will be called something else. In order to drop such a table after a server crash, you must rename the <code>#sql*.frm</code> file to match the <code>#sql-ib*.ibd</code> file.</p> <p>From <a href="https://mariadb.com/kb/en/mariadb-1033-release-notes/">MariaDB 10.3.3</a>, the same name as the .frm file is used for the intermediate copy of the table. The #sql-ib names are used by TRUNCATE and delayed DROP.</p> <p>From <a href="https://mariadb.com/kb/en/mariadb-10219-release-notes/">MariaDB 10.2.19</a> and <a href="https://mariadb.com/kb/en/mariadb-10310-release-notes/">MariaDB 10.3.10</a>, the #sql-ib tables will be deleted automatically.</p> <h2 class="anchored_heading" id="dropping-all-tables-in-a-database">Dropping All Tables in a Database</h2> <p>The best way to drop all tables in a database is by executing <a href="../drop-database/index.html">DROP DATABASE</a>, which will drop the database itself, and all tables in it.</p> <p>However, if you want to drop all tables in the database, but you also want to keep the database itself and any other non-table objects in it, then you would need to execute <code>DROP TABLE</code> to drop each individual table. You can construct these <code>DROP TABLE</code> commands by querying the <a href="../information-schema-tables-table/index.html">TABLES</a> table in the <a href="../information-schema-tables/index.html">information_schema</a> database. For example:</p> <pre class="fixed" data-language="sql">SELECT CONCAT('DROP TABLE IF EXISTS `', TABLE_SCHEMA, '`.`', TABLE_NAME, '`;')
FROM information_schema.TABLES
WHERE TABLE_SCHEMA = 'mydb';
</pre>
<h2 class="anchored_heading" id="atomic-drop-table">Atomic DROP TABLE</h2> <div class="mariadb_from_10_6_1 mariadb from_10_6_1 product">
<strong class="product_title">MariaDB starting with <a href="https://mariadb.com/kb/en/mariadb-1061-release-notes/">10.6.1</a></strong><p>From <a href="../what-is-mariadb-106/index.html">MariaDB 10.6</a>, <code>DROP TABLE</code> for a single table is atomic (<a href="https://jira.mariadb.org/browse/MDEV-25180">MDEV-25180</a>) for most engines, including InnoDB, MyRocks, MyISAM and Aria.</p> <p>This means that if there is a crash (server down or power outage) during <code>DROP TABLE</code>, all tables that have been processed so far will be completely dropped, including related trigger files and status entries, and the <a href="../binary-log/index.html">binary log</a> will include a <code>DROP TABLE</code> statement for the dropped tables. Tables for which the drop had not started will be left intact.</p> <p>In older MariaDB versions, there was a small chance that, during a server crash happening in the middle of <code>DROP TABLE</code>, some storage engines that were using multiple storage files, like <a href="../myisam-storage-engine/index.html">MyISAM</a>, could have only a part of its internal files dropped.</p> <p>In <a href="../what-is-mariadb-105/index.html">MariaDB 10.5</a>, <code>DROP TABLE</code> was extended to be able to delete a table that was only partly dropped (<a href="https://jira.mariadb.org/browse/MDEV-11412">MDEV-11412</a>) as explained above. Atomic <code>DROP TABLE</code> is the final piece to make <code>DROP TABLE</code> fully reliable.</p> <p>Dropping multiple tables is crash-safe.</p> <p>See <a href="../atomic-ddl/index.html">Atomic DDL</a> for more information.</p> </div>
<h2 class="anchored_heading" id="examples">Examples</h2> <pre class="fixed" data-language="sql">DROP TABLE Employees, Customers;
</pre>
<h2 class="anchored_heading" id="notes">Notes</h2> <p>Beware that <code>DROP TABLE</code> can drop both tables and <a href="../create-sequence/index.html">sequences</a>. This is mainly done to allow old tools like <a href="../mariadb-dump/index.html">mariadb-dump</a> (previously mysqldump) to work with sequences.</p> <h2 class="anchored_heading" id="see-also">See Also</h2> <ul start="1">
<li>
<a href="../create-table/index.html">CREATE TABLE</a> </li>
<li>
<a href="../alter-table/index.html">ALTER TABLE</a> </li>
<li>
<a href="../show-create-table/index.html">SHOW CREATE TABLE</a> </li>
<li>
<a href="../drop-sequence/index.html">DROP SEQUENCE</a> </li>
<li>Variable <a href="../replication-and-binary-log-server-system-variables/index.html#slave_ddl_exec_mode">slave-ddl-exec-mode</a>.</li>
</ul> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2023 MariaDB<br>Licensed under the Creative Commons Attribution 3.0 Unported License and the GNU Free Documentation License.<br>
    <a href="https://mariadb.com/kb/en/drop-table/" class="_attribution-link">https://mariadb.com/kb/en/drop-table/</a>
  </p>
</div>
