<h1>InnoDB File Format</h1> <div> <div class="node creole"> <div class="answer formatted">  <p>Prior to <a href="../what-is-mariadb-103/index.html">MariaDB 10.3</a>, the <a href="../innodb/index.html">InnoDB</a> storage engine supports two different file formats.</p> <h2 class="anchored_heading" id="setting-a-tables-file-format">Setting a Table's File Format</h2> <p>In <a href="../what-is-mariadb-102/index.html">MariaDB 10.2</a> and before, the default file format for InnoDB tables can be chosen by setting the <a href="../innodb-system-variables/index.html#innodb_file_format">innodb_file_format</a>. </p> <p>In <a href="https://mariadb.com/kb/en/mariadb-1021-release-notes/">MariaDB 10.2.1</a> and before, the default file format is<code>Antelope</code>. In <a href="https://mariadb.com/kb/en/mariadb-1022-release-notes/">MariaDB 10.2.2</a> and later, the default file format is <code>Barracuda</code> and <code>Antelope</code> is deprecated.</p> <div class="cstm-style bluebox">
<p>A table's tablespace is tagged with the lowest InnoDB file format that supports the table's <a href="../innodb-storage-formats/index.html">row format</a>. So, even if the <code>Barracuda</code> file format is enabled, tables that use the <code>COMPACT</code> or <code>REDUNDANT</code> row formats will be tagged with the <code>Antelope</code> file format in the <a href="../information-schema-innodb_sys_tables-table/index.html">information_schema.INNODB_SYS_TABLES</a> table.</p> </div>
<h2 class="anchored_heading" id="supported-file-formats">Supported File Formats</h2> <p>The <a href="../innodb/index.html">InnoDB</a> storage engine supports two different file formats:</p> <ul start="1">
<li>
<code>Antelope</code> </li>
<li>
<code>Barracuda</code> </li>
</ul> <h3 class="anchored_heading" id="antelope">Antelope</h3> <p>In <a href="https://mariadb.com/kb/en/mariadb-1021-release-notes/">MariaDB 10.2.1</a> and before, the default file format is <code>Antelope</code>. In <a href="https://mariadb.com/kb/en/mariadb-1022-release-notes/">MariaDB 10.2.2</a> and later, the <code>Antelope</code> file format is deprecated.</p> <p><code>Antelope</code> is the original InnoDB file format. It supports the <code>COMPACT</code> and <code>REDUNDANT</code> row formats, but not the <code>DYNAMIC</code> or <code>COMPRESSED</code> row formats.</p> <h3 class="anchored_heading" id="barracuda">Barracuda</h3> <p>In <a href="../what-is-mariadb-101/index.html">MariaDB 10.1</a> and before, the <code>Barracuda</code> file format is only supported if the <a href="../innodb-system-variables/index.html#innodb_file_per_table">innodb_file_per_table</a> system variable is set to <code>ON</code>. In <a href="https://mariadb.com/kb/en/mariadb-1022-release-notes/">MariaDB 10.2.2</a> and later, the default file format is <code>Barracuda</code> and <code>Antelope</code> is deprecated.</p> <p><code>Barracuda</code> is a newer InnoDB file format. It supports the <code>COMPACT</code>, <code>REDUNDANT</code>, <code>DYNAMIC</code> and <code>COMPRESSED</code> row formats. Tables with large BLOB or TEXT columns in particular could benefit from the dynamic row format.</p> <h3 class="anchored_heading" id="future-formats">Future Formats</h3> <p>InnoDB might use new file formats in the future. Each format will have an identifier from 0 to 25, and a name. The names have already been decided, and are animal names listed in an alphabetical order: Antelope, Barracuda, Cheetah, Dragon, Elk, Fox, Gazelle, Hornet, Impala, Jaguar, Kangaroo, Leopard, Moose, Nautilus, Ocelot, Porpoise, Quail, Rabbit, Shark, Tiger, Urchin, Viper, Whale, Xenops, Yak and Zebra.</p> <h2 class="anchored_heading" id="checking-a-tables-file-format">Checking a Table's File Format.</h2> <p>The <a href="../information-schema-innodb_sys_tables-table/index.html">information_schema.INNODB_SYS_TABLES</a> table can be queried to see the file format used by a table.</p> <div class="cstm-style bluebox">
<p>A table's tablespace is tagged with the lowest InnoDB file format that supports the table's <a href="../innodb-storage-formats/index.html">row format</a>. So, even if the <code>Barracuda</code> file format is enabled, tables that use the <code>COMPACT</code> or <code>REDUNDANT</code> row formats will be tagged with the <code>Antelope</code> file format in the <a href="../information-schema-innodb_sys_tables-table/index.html">information_schema.INNODB_SYS_TABLES</a> table.</p> </div>
<h2 class="anchored_heading" id="compatibility">Compatibility</h2> <p>Each tablespace is tagged with the id of the most recent file format used by one of its tables. All versions of InnoDB can read tables that use an older file format. However, it can not read from more recent formats. For this reason, each time InnoDB opens a table it checks the tablespace's format, and returns an error if a newer format is used.</p> <p>This check can be skipped via the <a href="../innodb-system-variables/index.html#innodb_file_format_check">innodb_file_format_check</a> variable. Beware that, is InnoDB tries to repair a table in an unknown format, the table will be corrupted! This happens on restart if innodb_file_format_check is disabled and the server crashed, or it was closed with fast shutdown.</p> <p>To downgrade a table from the Barracuda format to Antelope, the table's <code>ROW_FORMAT</code> can be set to a value supported by Antelope, via an <a href="../alter-table/index.html">ALTER TABLE</a> statement. This recreates the indexes.</p> <p>The Antelope format can be used to make sure that tables work on MariaDB and MySQL servers which are older than 5.5.</p> <h2 class="anchored_heading" id="see-also">See Also</h2> <ul start="1"><li><a href="../innodb-storage-formats/index.html">InnoDB Storage Formats</a></li></ul> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2023 MariaDB<br>Licensed under the Creative Commons Attribution 3.0 Unported License and the GNU Free Documentation License.<br>
    <a href="https://mariadb.com/kb/en/innodb-file-format/" class="_attribution-link">https://mariadb.com/kb/en/innodb-file-format/</a>
  </p>
</div>
