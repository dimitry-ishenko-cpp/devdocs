<h1>Aria Encryption Keys</h1> <div> <div class="node creole"> <div class="answer formatted">  <p>As with other storage engines that support data-at-rest encryption, Aria relies on an <a href="../key-management-and-encryption-plugins/index.html">Encryption Key Management</a> plugin to handle its encryption keys. Where the support is available, Aria can use <a href="../encryption-key-management/index.html#using-multiple-encryption-keys">multiple keys</a>. </p> <h2 class="anchored_heading" id="encryption-keys">Encryption Keys</h2> <p>MariaDB keeps track of each encryption key internally using a 32-bit integer, which serves as the key identifier. Unlike <a href="../innodb-encryption/index.html">InnoDB</a>, Aria does not support the <code><a href="../create-table/index.html#encryption_key_id">ENCRYPTION_KEY_ID</a></code> table option (for more information, see <a href="https://jira.mariadb.org/browse/MDEV-18049">MDEV-18049</a>), which allows the user to specify the encryption key to use. Instead, Aria defaults to specific encryption keys provided by the Encryption Key Management plugin.</p> <ul start="1"><li>When working with user-created tables, Aria encrypts them to disk using the ID 1 key. </li></ul> <ul start="1"><li>When working with internal temporary tables written to disk, Aria encrypts them to disk using the ID 2 key, unless there is no ID 2 key, then it falls back on the ID 1 key. </li></ul> <h2 class="anchored_heading" id="key-rotation">Key Rotation</h2> <p>Some <a href="../encryption-key-management/index.html">key management and encryption plugins</a> allow you to automatically rotate and version your encryption keys. If a plugin support key rotation, and if it rotates the encryption keys, then InnoDB's <a href="../innodb-background-encryption-threads/index.html">background encryption threads</a> can re-encrypt InnoDB pages that use the old key version with the new key version. However, Aria does <strong>not</strong> have a similar mechanism, which means that the tables remain encrypted with the older key version. For more information, see <a href="https://jira.mariadb.org/browse/MDEV-18971">MDEV-18971</a>.</p> <div class="cstm-style greenbox">
<p>In order for key rotation to work, both the backend key management service (KMS) and the corresponding <a href="../encryption-key-management/index.html">key management and encryption plugin</a> have to support key rotation. See <a href="../encryption-key-management/index.html#support-for-key-rotation-in-encryption-plugins">Encryption Key Management: Support for Key Rotation in Encryption Plugins</a> to determine which plugins currently support key rotation.</p> </div> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2023 MariaDB<br>Licensed under the Creative Commons Attribution 3.0 Unported License and the GNU Free Documentation License.<br>
    <a href="https://mariadb.com/kb/en/aria-encryption-keys/" class="_attribution-link">https://mariadb.com/kb/en/aria-encryption-keys/</a>
  </p>
</div>
