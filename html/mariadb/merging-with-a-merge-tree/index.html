<h1>Merging with a Merge Tree</h1> <div> <div class="node creole"> <div class="answer formatted"> <p>If you have a <a href="../creating-a-new-merge-tree/index.html">merge tree</a>, you merge into MariaDB as follows:</p> <ol start="1">
<li>MariaDB merge trees are in the <a href="https://github.com/MariaDB/mergetrees">mergetrees</a> repository. Add it as a new remote: <pre class="fixed" data-language="sql">git remote add merge https://github.com/MariaDB/mergetrees</pre> </li>
<li>Check out the branch you want to update and merge, for example: <pre class="fixed" data-language="sql">git checkout merge-innodb-5.6</pre> </li>
<li>delete everything in the branch </li>
<li>download the latest released source tarball, unpack it, copy files into the repository: <ul start="1">
<li>for <strong>InnoDB-5.6</strong>: use the content of the <code>storage/innobase/</code> of the latest MySQL 5.6 source release tarball. </li>
<li>for <strong>performance schema 5.6</strong>: use <code>storage/perfschema</code>, <code>include/mysql/psi</code>, <code>mysql-test/suite/perfschema</code>, and <code>mysql-test/suite/perfschema_stress</code> from the latest MySQL 5.6 source release tarball. </li>
<li>for <strong>SphinxSE</strong>: use <code>mysqlse/</code> subdirectory from the latest Sphinx source release tarball. </li>
<li>for <strong>XtraDB</strong>: use the content of the <code>storage/innobase/</code> of the latest Percona-Server source release tarball (5.5 or 5.6 as appropriate). </li>
<li>for <strong>pcre</strong>: simply unpack the latest pcre release source tarball into the repository, rename <code>pcre-X-XX/</code> to <code>pcre</code>. </li>
</ul> </li>
<li>Now <code>git add .</code>, <code>git commit</code> (use the tarball version as a comment), <code>git push</code> </li>
<li>merge this branch into MariaDB </li>
<li>Sometimes after a merge, some changes may be needed: <ul start="1">
<li>for <strong>performance schema 5.6</strong>: update <code>storage/perfschema/ha_perfschema.cc</code>, plugin version under <code>maria_declare_plugin</code>. </li>
<li>for <strong>InnoDB-5.6</strong>: update <code>storage/innobase/include/univ.i</code>, setting <code>INNODB_VERSION_MAJOR</code>, <code>INNODB_VERSION_MINOR</code>, <code>INNODB_VERSION_BUGFIX</code> to whatever MySQL version you were merging from. </li>
<li>for <strong>XtraDB-5.5</strong>: update <code>storage/xtradb/include/univ.i</code>, setting <code>PERCONA_INNODB_VERSION</code>, <code>INNODB_VERSION_STR</code> to whatever Percona-Server version you were merging from. </li>
<li>for <strong>XtraDB-5.6</strong>: update <code>storage/xtradb/include/univ.i</code>, setting <code>PERCONA_INNODB_VERSION</code>, <code>INNODB_VERSION_MAJOR</code>, <code>INNODB_VERSION_MINOR</code>, <code>INNODB_VERSION_BUGFIX</code> to whatever Percona-Server version you were merging from. </li>
</ul> </li>
</ol> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2023 MariaDB<br>Licensed under the Creative Commons Attribution 3.0 Unported License and the GNU Free Documentation License.<br>
    <a href="https://mariadb.com/kb/en/merging-with-a-merge-tree/" class="_attribution-link">https://mariadb.com/kb/en/merging-with-a-merge-tree/</a>
  </p>
</div>
