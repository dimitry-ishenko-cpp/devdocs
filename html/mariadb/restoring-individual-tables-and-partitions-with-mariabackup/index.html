<h1>Restoring Individual Tables and Partitions with Mariabackup</h1> <div> <div class="node creole"> <div class="answer formatted">  <p>When using Mariabackup, you don't necessarily need to restore every table and/or partition that was backed up. Even if you're starting from a <a href="../full-backup-and-restore-with-mariabackup/index.html">full backup</a>, it is certainly possible to restore only certain tables and/or partitions from the backup, as long as the table or partition involved is in an <a href="../innodb-file-per-table-tablespaces/index.html">InnoDB file-per-table tablespace</a>. This page documents how to restore individual tables and partitions.</p> <h2 class="anchored_heading" id="preparing-the-backup">Preparing the Backup</h2> <p>Before you can restore from a backup, you first need to <strong>prepare</strong> it to make the data files consistent. You can do so with the <code><a href="../mariabackup-options/index.html#-prepare">--prepare</a></code> command option.</p> <p>The ability to restore individual tables and partitions relies on <a href="../innodb-file-per-table-tablespaces/index.html#copying-transportable-tablespaces">InnoDB's transportable tablespaces</a>. For MariaDB to import tablespaces like these, <a href="../xtradb-and-innodb/index.html">InnoDB</a> looks for a file with a <code>.cfg</code> extension. For Mariabackup to create these files, you also need to add the <code><a href="../mariabackup-options/index.html#-export">--export</a></code> option during the prepare step.</p> <p>For example, you might execute the following command:</p> <pre class="fixed" data-language="sql">$ mariabackup --prepare --export \
   --target-dir=/var/mariadb/backup/ \
   --user=mariabackup --password=mypassword
</pre>
<p>If this operation completes without error, then the backup is ready to be restored.</p> <div class="mariadb_to_10_2_8 mariadb to_10_2_8 product">
<strong class="product_title">MariaDB until <a href="https://mariadb.com/kb/en/mariadb-1028-release-notes/">10.2.8</a></strong><p>Before <a href="https://mariadb.com/kb/en/mariadb-1029-release-notes/">MariaDB 10.2.9</a>, Mariabackup did not support the <code><a href="../mariabackup-options/index.html#-export">--export</a></code> option. See <a href="https://jira.mariadb.org/browse/MDEV-13466">MDEV-13466</a> about that. In earlier versions of MariaDB, this means that Mariabackup could not create <code>.cfg</code> files for <a href="../innodb-file-per-table-tablespaces/index.html">InnoDB file-per-table tablespaces</a> during the <code>--prepare</code> stage. You can still <a href="../innodb-file-per-table-tablespaces/index.html#copying-transportable-tablespaces">import file-per-table tablespaces</a> without the <code>.cfg</code> files in many cases, so it may still be possible in those versions to <a href="../partial-backup-and-restore-with-mariabackup/index.html">restore partial backups</a> or to <a href="index.html">restore individual tables and partitions</a> with just the <code>.ibd</code> files. If you have a <a href="../full-backup-and-restore-with-mariabackup/index.html">full backup</a> and you need to create <code>.cfg</code> files for <a href="../innodb-file-per-table-tablespaces/index.html">InnoDB file-per-table tablespaces</a>, then you can do so by preparing the backup as usual without the <code>--export</code> option, and then restoring the backup, and then starting the server. At that point, you can use the server's built-in features to <a href="../innodb-file-per-table-tablespaces/index.html#copying-transportable-tablespaces">copy the transportable tablespaces</a>.</p> </div>
<h2 class="anchored_heading" id="restoring-the-backup">Restoring the Backup</h2> <p>The restore process for restoring individual tables and/or partitions is quite different than the process for <a href="../full-backup-and-restore-with-mariabackup/index.html">full backups</a>.</p> <p>Rather than using the <code><a href="../mariabackup-options/index.html#-copy-back">--copy-back</a></code> or the <code><a href="../mariabackup-options/index.html#-move-back">--move-back</a></code>, each individual <a href="../innodb-file-per-table-tablespaces/index.html">InnoDB file-per-table tablespace</a> file will have to be manually imported into the target server. The process that is used to restore the backup will depend on whether partitioning is involved.</p> <h3 class="anchored_heading" id="restoring-individual-non-partitioned-tables">Restoring Individual Non-Partitioned Tables</h3> <p>To restore individual non-partitioned tables from a backup, find the <code>.ibd</code> and <code>.cfg</code> files for the table in the backup, and then import them using the <a href="../innodb-file-per-table-tablespaces/index.html#importing-transportable-tablespaces-for-non-partitioned-tables">Importing Transportable Tablespaces for Non-partitioned Tables</a> process.</p> <h3 class="anchored_heading" id="restoring-individual-partitions-and-partitioned-tables">Restoring Individual Partitions and Partitioned Tables</h3> <p>To restore individual partitions or partitioned tables from a backup, find the <code>.ibd</code> and <code>.cfg</code> files for the partition(s) in the backup, and then import them using the <a href="../innodb-file-per-table-tablespaces/index.html#importing-transportable-tablespaces-for-partitioned-tables">Importing Transportable Tablespaces for Partitioned Tables</a> process.</p> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2023 MariaDB<br>Licensed under the Creative Commons Attribution 3.0 Unported License and the GNU Free Documentation License.<br>
    <a href="https://mariadb.com/kb/en/restoring-individual-tables-and-partitions-with-mariabackup/" class="_attribution-link">https://mariadb.com/kb/en/restoring-individual-tables-and-partitions-with-mariabackup/</a>
  </p>
</div>
