<h1>How to Collect Large Optimizer Traces</h1> <div> <div class="node creole"> <div class="answer formatted"> <p><a href="../mariadb-internals-documentation-optimizer-trace/index.html">Optimizer traces</a> can be large for some queries.</p> <p>In order to collect a large trace, you need to perform the following steps (using 128 MB as an example):</p> <pre class="fixed" data-language="sql">set global max_allowed_packet=128*1024*1024;
</pre>
<p>Reconnect specifying <code>--max-allowed-packet=128000000</code> for the client as well.</p> <pre class="fixed" data-language="sql">set optimizer_trace=1;
set optimizer_trace_max_mem_size=127*1024*1024;
</pre>
<p>Now, one can run the query and save the large trace.</p> <h2 class="anchored_heading" id="see-also">See Also</h2> <ul start="1">
<li>
<a href="../server-system-variables/index.html#optimizer_trace">optimizer_trace</a> system variable </li>
<li>
<a href="../server-system-variables/index.html#optimizer_trace_max_mem_size">optimizer_trace_max_mem_size</a> system variable </li>
<li>
<a href="../server-system-variables/index.html#max_allowed_packet">max_allowed_packet</a> system variable</li>
</ul> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2023 MariaDB<br>Licensed under the Creative Commons Attribution 3.0 Unported License and the GNU Free Documentation License.<br>
    <a href="https://mariadb.com/kb/en/how-to-collect-large-optimizer-traces/" class="_attribution-link">https://mariadb.com/kb/en/how-to-collect-large-optimizer-traces/</a>
  </p>
</div>
