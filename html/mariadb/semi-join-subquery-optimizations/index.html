<h1>Semi-join Subquery Optimizations</h1> <div> <div class="node creole"> <div class="answer formatted">  <p>MariaDB has a set of optimizations specifically targeted at <em>semi-join subqueries</em>.</p> <h2 class="anchored_heading" id="what-is-a-semi-join-subquery">What is a Semi-Join Subquery</h2> <p>A semi-join subquery has a form of</p> <pre class="fixed" data-language="sql">SELECT ... FROM outer_tables WHERE expr IN (SELECT ... FROM inner_tables ...) AND ...
</pre>
<p>that is, the subquery is an IN-subquery and it is located in the WHERE clause. The most important part here is</p> <p><em>with semi-join subquery, we're only interested in records of outer_tables that have matches in the subquery</em></p> <p>Let's see why this is important. Consider a semi-join subquery:</p> <pre class="fixed" data-language="sql">select * from Country 
where 
  Continent='Europe' and 
  Country.Code in (select City.country 
                   from City 
                   where City.Population&gt;1*1000*1000);
</pre>
<p>One can execute it "naturally", by starting from countries in Europe and checking if they have populous Cities:</p> <p><img src="data:image/png;base64,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" alt="semi-join-outer-to-inner" title="semi-join-outer-to-inner"></p> <p>The semi-join property also allows "backwards" execution: we can start from big cities, and check which countries they are in:</p> <p><img src="data:image/png;base64,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" alt="semi-join-inner-to-outer" title="semi-join-inner-to-outer"></p> <p>To contrast, let's change the subquery to be non-semi-join:</p> <pre class="fixed" data-language="sql">select * from Country 
where 
   Country.Continent='Europe' and 
   (Country.Code in (select City.country 
                   from City where City.Population&gt;1*1000*1000) 
    or Country.SurfaceArea &gt; 100*1000  -- Added this part
   );
</pre>
<p>It is still possible to start from countries, and then check</p> <ul start="1">
<li>if a country has any big cities </li>
<li>if it has a large surface area: </li>
</ul> <p><img src="data:image/png;base64,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" alt="non-semi-join-subquery" title="non-semi-join-subquery"></p> <p>The opposite, city-to-country way is not possible. This is not a semi-join.</p> <h3 class="anchored_heading" id="difference-from-inner-joins">Difference from Inner Joins</h3> <p>Semi-join operations are similar to regular relational joins. There is a difference though: with semi-joins, you don't care how many matches an inner table has for an outer row. In the above countries-with-big-cities example, Germany will be returned once, even if it has three cities with populations of more than one million each.</p> <h2 class="anchored_heading" id="semi-join-optimizations-in-mariadb">Semi-Join Optimizations in MariaDB</h2> <p>MariaDB uses semi-join optimizations to run IN subqueries.The optimizations are enabled by default. You can disable them by turning off their <a href="../server-system-variables/index.html#optimizer_switch">optimizer_switch</a> like so:</p> <pre class="fixed" data-language="sql">SET optimizer_switch='semijoin=off'
</pre>
<p>MariaDB has five different semi-join execution strategies:</p> <ul start="1">
<li>
<a href="../table-pullout-optimization/index.html">Table pullout optimization</a> </li>
<li>
<a href="../firstmatch-strategy/index.html">FirstMatch execution strategy</a> </li>
<li>
<a href="../semi-join-materialization-strategy/index.html">Semi-join Materialization execution strategy</a> </li>
<li>
<a href="../loosescan-strategy/index.html">LooseScan execution strategy</a> </li>
<li>
<a href="../duplicateweedout-strategy/index.html">DuplicateWeedout execution strategy</a> </li>
</ul> <h2 class="anchored_heading" id="see-also">See Also</h2> <ul start="1">
<li>
<a href="../what-is-mariadb-53/index.html">What is MariaDB 5.3</a> </li>
<li>
<a href="../subquery-optimizations-map/index.html">Subquery Optimizations Map</a> </li>
<li>
<a href="http://s.petrunia.net/blog/?p=35">"Observations about subquery use cases"</a> blog post </li>
<li><a href="http://en.wikipedia.org/wiki/Semijoin">http:<em>en.wikipedia.org/wiki/Semijoin</em></a></li>
</ul> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2023 MariaDB<br>Licensed under the Creative Commons Attribution 3.0 Unported License and the GNU Free Documentation License.<br>
    <a href="https://mariadb.com/kb/en/semi-join-subquery-optimizations/" class="_attribution-link">https://mariadb.com/kb/en/semi-join-subquery-optimizations/</a>
  </p>
</div>
