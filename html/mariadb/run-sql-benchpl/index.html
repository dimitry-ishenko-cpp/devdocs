<h1>run-sql-bench.pl</h1> <div> <div class="node creole"> <div class="answer formatted"> <p><code>run-sql-bench.pl</code> is a perl script for automating runs of sql-bench (You can find sql-bench in the <a href="../getting-the-mariadb-source-code/index.html">MariaDB source code</a>.)</p> <p><code>run-sql-bench.pl</code> can be found in the <a href="../mariadb-tools/index.html">mariadb-tools</a> project on Launchpad. Once you have a copy of mariadb-tools, you'll find the script, and its configuration directories, in the <code>sql-bench</code> directory. For the purposes of this article, wherever you located your local branch of <code>mariadb-tools</code> will be called <code>${BASE_DIR}</code>.</p> <p>The <code>run-sql-bench.pl</code> script is located at '<code>${BASE_DIR}/sql-bench/run-sql-bench.pl</code>'.</p> <p>Example configuration scripts used for different runs can be found in the various subdirectories of <code>${BASE_DIR}/sql-bench/</code>.</p> <p>To run the <code>run-sql-bench.pl</code> script, do the following:</p> <ol start="1">
<li>
<a href="../getting-the-mariadb-source-code/index.html">Branch a MariaDB or MySQL tree</a> </li>
<li>Optionally do some code changes in that tree and commit your changes </li>
<li>Edit <code>run-sql-bench.pl</code> to set internal options, especially the "<code class="fixed" style="white-space:pre-wrap"><span class="k">my</span> <span class="nv">$path</span>
</code>" variable. </li>
<li>Create a <code>${BASE_DIR}/sql-bench/conf/host.cnf</code> file for your system. An easy way to do this is by duplicating one of the example <code>host.cnf</code> files:<pre class="fixed" data-language="sql">cp -avi ${BASE_DIR}/sql-bench/conf/pitbull.cnf ${BASE_DIR}/sql-bench/conf/${HOSTNAME}.cnf
</pre>Edit the file to customize it for your system. </li>
<li>Create <code>${HOSTNAME}.cnf</code> files under the <code>${BASE_DIR}/sql-bench/basic</code>, <code>${BASE_DIR}/sql-bench/debug</code>, <code>${BASE_DIR}/sql-bench/debug-full</code>, and <code>${BASE_DIR}/sql-bench/O2</code> directories, depending on which automated tests you want to run. Use the example files as a base and customize them for your system. </li>
<li>Run the <code>run-sql-bench.pl</code> script:<pre class="fixed" data-language="sql">cd ${BASE_DIR}/sql-bench/; ./run-sql-bench.pl --repository=[/path/to/bzr/repository] --sql-bench-options=[additional sql-bench-options] --debug=[yes|no]
</pre> <ul start="1">
<li>
<em><code><code>--</code>repository</code></em> is the MariaDB tree to use and compile, the script will also look here for sql-bench. </li>
<li>
<em><code><code>--</code>sql-bench-options</code></em> is mostly used in testing and debugging cases where we want to have short run times. For instance, using <code><code>--</code>small-test</code> or <code><code>--</code>small-table</code>. </li>
<li>You can separate several sql-bench options with spaces like so:<pre class="fixed" data-language="sql">--sql-bench-options="--small-test --small-table"
</pre> </li>
</ul> </li>
</ol> <h2 class="anchored_heading" id="the-results">The results</h2> <p>Results are stored at the location specified by the <code class="fixed" style="white-space:pre-wrap"><span class="nv">$sql_bench_results</span>
</code> variable in the <code>${BASE_DIR}/sql-bench/conf/hostname.cnf</code> file for your host. Results are organized in sub directories with the following schema:</p> <pre class="fixed" data-language="sql">sql-bench-results-dir/${HOSTNAME}/YYYY-MM-DD
</pre>
<h2 class="anchored_heading" id="future-plans">Future plans</h2> <ul start="1">
<li>Crash and error detection and reporting. </li>
<li>One should be able to specify a test name for each file (<code>run-all-tests</code> <code><code>--</code>suffix='_xxxx'</code>) </li>
</ul> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2023 MariaDB<br>Licensed under the Creative Commons Attribution 3.0 Unported License and the GNU Free Documentation License.<br>
    <a href="https://mariadb.com/kb/en/run-sql-benchpl/" class="_attribution-link">https://mariadb.com/kb/en/run-sql-benchpl/</a>
  </p>
</div>
