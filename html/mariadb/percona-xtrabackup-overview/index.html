<h1>Percona XtraBackup Overview</h1> <div> <div class="node creole"> <div class="answer formatted">  <div class="cstm-style greenbox">
<p>In <a href="../what-is-mariadb-101/index.html">MariaDB 10.1</a> and later, <a href="../mariabackup/index.html">Mariabackup</a> is the recommended backup method to use instead of Percona XtraBackup.</p> </div>
<div class="cstm-style redbox">
<p>In <a href="../what-is-mariadb-103/index.html">MariaDB 10.3</a>, Percona XtraBackup is <strong>not supported</strong>. See <a href="index.html#compatibility-with-mariadb">Percona XtraBackup Overview: Compatibility with MariaDB</a> for more information.</p> </div>
<div class="cstm-style redbox">
<p>In <a href="../what-is-mariadb-102/index.html">MariaDB 10.2</a> and <a href="../what-is-mariadb-101/index.html">MariaDB 10.1</a>, Percona XtraBackup is only <strong>partially supported</strong>. See <a href="index.html#compatibility-with-mariadb">Percona XtraBackup Overview: Compatibility with MariaDB</a> for more information.</p> </div> <p>Percona XtraBackup is an open source tool for performing hot backups of MariaDB, MySQL and Percona Server databases. Percona XtraBackup can perform compressed, incremental and streaming backups. It was designed to back up <a href="../innodb/index.html">XtraDB/InnoDB</a> tables but can also back up other <a href="../storage-engines/index.html">storage engines</a>.</p> <p><a href="../mariabackup/index.html">Mariabackup</a> is a fork of Percona XtraBackup designed to work with encrypted and compressed tables and other MariaDB enhancements. There are many bug fixes, such as <a href="https://jira.mariadb.org/browse/MDEV-13807">MDEV-13807</a>, and some unsafe or redundant options have been removed. <a href="../mariabackup/index.html">Mariabackup</a> is the recommended backup method for MariaDB servers.</p> <h2 class="anchored_heading" id="installing-percona-xtrabackup">Installing Percona XtraBackup</h2> <h3 class="anchored_heading" id="installing-with-a-package-manager">Installing with a Package Manager</h3> <p>Percona XtraBackup can also be installed via a package manager on Linux. In order to do so, your system needs to be configured to install from a repository that has it.</p> <p>You can also configure your package manager to install it from Percona's repository by following the instructions in their documentation:</p> <ul start="1">
<li>
<a href="https://www.percona.com/doc/percona-xtrabackup/2.3/installation.html">Installing Percona XtraBackup 2.3</a> </li>
<li>
<a href="https://www.percona.com/doc/percona-xtrabackup/2.4/installation.html">Installing Percona XtraBackup 2.4</a> </li>
</ul> <h4 class="anchored_heading" id="installing-with-yumdnf">Installing with yum/dnf</h4> <p>On RHEL, CentOS, Fedora, and other similar Linux distributions, it is highly recommended to install the relevant <a href="../rpm/index.html">RPM package</a> from MariaDB's repository using <code><a href="../yum/index.html">yum</a></code> or <code><a href="https://en.wikipedia.org/wiki/DNF_(software)">dnf</a></code>. Starting with RHEL 8 and Fedora 22, <code>yum</code> has been replaced by <code>dnf</code>, which is the next major version of <code>yum</code>. However, <code>yum</code> commands still work on many systems that use <code>dnf</code>. For example, to install Percona XtraBackup 2.3:</p> <pre class="fixed" data-language="sql">sudo yum install percona-xtrabackup
</pre>
<p>And to install Percona XtraBackup 2.4:</p> <pre class="fixed" data-language="sql">sudo yum install percona-xtrabackup-24
</pre>
<h4 class="anchored_heading" id="installing-with-apt-get">Installing with apt-get</h4> <p>On Debian, Ubuntu, and other similar Linux distributions, it is highly recommended to install the relevant <a href="../installing-mariadb-deb-files/index.html">DEB package</a> from MariaDB's repository using <code><a href="https://wiki.debian.org/apt-get">apt-get</a></code>. For example, to install Percona XtraBackup 2.3:</p> <pre class="fixed" data-language="sql">sudo apt-get install percona-xtrabackup
</pre>
<p>And to install Percona XtraBackup 2.4:</p> <pre class="fixed" data-language="sql">sudo apt-get install percona-xtrabackup-24
</pre>
<h4 class="anchored_heading" id="installing-with-zypper">Installing with zypper</h4> <p>On SLES, OpenSUSE, and other similar Linux distributions, it is highly recommended to install the relevant <a href="../rpm/index.html">RPM package</a> from MariaDB's repository using <code><a href="../installing-mariadb-with-zypper/index.html">zypper</a></code>. For example, to install Percona XtraBackup 2.3:</p> <pre class="fixed" data-language="sql">sudo zypper install percona-xtrabackup
</pre>
<p>And to install Percona XtraBackup 2.4:</p> <pre class="fixed" data-language="sql">sudo zypper install percona-xtrabackup-24
</pre>
<h2 class="anchored_heading" id="using-percona-xtrabackup">Using Percona XtraBackup</h2> <p>The command to use <code>xtrabackup</code> and the general syntax is:</p> <pre class="fixed" data-language="sql">xtrabackup &lt;options&gt;
</pre>
<p>or:</p> <pre class="fixed" data-language="sql">innobackupex &lt;options&gt;
</pre>
<h3 class="anchored_heading" id="options">Options</h3> <p>Options supported by Percona XtraBackup can be found on Percona's documentation.</p> <p><code>xtrabackup</code> options:</p> <ul start="1">
<li>
<a href="https://www.percona.com/doc/percona-xtrabackup/2.3/xtrabackup_bin/xbk_option_reference.html"><code>xtrabackup</code> options - Percona XtraBackup 2.3</a> </li>
<li>
<a href="https://www.percona.com/doc/percona-xtrabackup/2.4/xtrabackup_bin/xbk_option_reference.html"><code>xtrabackup</code> options - Percona XtraBackup 2.4</a> </li>
</ul> <p><code>innobackupex</code> options:</p> <ul start="1">
<li>
<a href="https://www.percona.com/doc/percona-xtrabackup/2.3/innobackupex/innobackupex_option_reference.html"><code>innobackupex</code> options - Percona XtraBackup 2.3</a> </li>
<li>
<a href="https://www.percona.com/doc/percona-xtrabackup/2.4/innobackupex/innobackupex_option_reference.html"><code>innobackupex</code> options - Percona XtraBackup 2.4</a> </li>
</ul> <h3 class="anchored_heading" id="option-files">Option Files</h3> <p>In addition to reading options from the command-line, Percona XtraBackup can also read options from <a href="../configuring-mariadb-with-option-files/index.html">option files</a>.</p> <p>The following options relate to how MariaDB/MySQL command-line tools handles option files. They must be given as the first argument on the command-line:</p> <div class="cstm-style darkheader-nospace-borders centered">
<table>
<tr>
<th>Option</th>
<th>Description</th>
</tr> <tr>
<td><code>--print-defaults</code></td>
<td>Print the program argument list and exit.</td>
</tr> <tr>
<td><code>--no-defaults</code></td>
<td>Don't read default options from any option file.</td>
</tr> <tr>
<td><code>--defaults-file=# </code></td>
<td>Only read default options from the given file #.</td>
</tr> <tr>
<td><code>--defaults-extra-file=# </code></td>
<td>Read this file after the global files are read.</td>
</tr> </table> </div>
<h4 class="anchored_heading" id="server-option-groups">Server Option Groups</h4> <p>Percona XtraBackup reads server options from the following <a href="../configuring-mariadb-with-option-files/index.html#option-groups">option groups</a> from <a href="../configuring-mariadb-with-option-files/index.html">option files</a>:</p> <div class="cstm-style darkheader-nospace-borders centered">
<table>
<tr>
<th>Group</th>
<th>Description</th>
</tr> <tr>
<td><code>[xtrabackup]</code></td>
<td>Options read by <a href="../mariabackup/index.html">Mariabackup</a> and Percona XtraBackup.</td>
</tr> <tr>
<td><code>[mysqld]</code></td>
<td> Options read by <code>mysqld</code>, which includes both MariaDB Server and MySQL Server.</td>
</tr> </table> </div>
<h4 class="anchored_heading" id="client-option-groups">Client Option Groups</h4> <p>Percona XtraBackup reads client options from the following <a href="../configuring-mariadb-with-option-files/index.html#option-groups">option groups</a> from <a href="../configuring-mariadb-with-option-files/index.html">option files</a>:</p> <div class="cstm-style darkheader-nospace-borders centered">
<table>
<tr>
<th>Group</th>
<th>Description</th>
</tr> <tr>
<td><code>[xtrabackup]</code></td>
<td>Options read by <a href="../mariabackup/index.html">Mariabackup</a> and Percona XtraBackup.</td>
</tr> <tr>
<td><code>[client]</code></td>
<td> Options read by all MariaDB and MySQL <a href="../clients-utilities/index.html">client programs</a>, which includes both MariaDB and MySQL clients. For example, <code>mysqldump</code>.</td>
</tr> </table> </div>
<h3 class="anchored_heading" id="authentication-and-privileges">Authentication and Privileges</h3> <p>Percona XtraBackup needs to authenticate with the database server when it performs a backup operation (i.e. when the <code>--backup</code> option is specified). The user account that performs the backup needs to have the <code>RELOAD</code> , <code>PROCESS</code>, <code>LOCK TABLES</code> and <code>REPLICATION CLIENT</code> <a href="../grant/index.html#global-privileges">global privileges</a> on the database server. For example:</p> <pre class="fixed" data-language="sql">CREATE USER 'xtrabackup'@'localhost' IDENTIFIED BY 'mypassword';
GRANT RELOAD, PROCESS, LOCK TABLES, REPLICATION CLIENT ON *.* TO 'xtrabackup'@'localhost';
</pre>
<p>The user account information can be specified with the <code>-user</code> and <code>--password</code> command-line options. For example:</p> <pre class="fixed" data-language="sql">$ xtrabackup --backup \
   --target-dir=/var/mariadb/backup/ \
   --user=xtrabackup --password=mypassword
</pre>
<p>The user account information can also be specified in a supported <a href="#client-option-groups">client option group</a> in an <a href="../configuring-mariadb-with-option-files/index.html">option file</a>. For example:</p> <pre class="fixed" data-language="sql">[xtrabackup]
user=xtrabackup
password=mypassword
</pre>
<p>Percona XtraBackup does not need to authenticate with the database server when preparing or restoring a backup.</p> <h3 class="anchored_heading" id="file-system-permissions">File System Permissions</h3> <p>Percona XtraBackup has to read MariaDB's files from the file system. Therefore, when you run Percona XtraBackup as a specific operating system user, you should ensure that user account has sufficient permissions to read those files.</p> <p>If you are using Linux and if you installed MariaDB with a package manager, then MariaDB's files will probably be owned by the <code>mysql</code> user and the <code>mysql</code> group.</p> <h2 class="anchored_heading" id="compatibility-with-mariadb">Compatibility with MariaDB</h2> <h3 class="anchored_heading" id="compatibility-with-mariadb-103-and-later">Compatibility with <a href="../what-is-mariadb-103/index.html">MariaDB 10.3</a> and Later</h3> <div class="cstm-style greenbox">
<p>In <a href="../what-is-mariadb-103/index.html">MariaDB 10.3</a> and later, <a href="../mariabackup/index.html">Mariabackup</a> is the recommended backup method to use instead of Percona XtraBackup.</p> </div>
<p>In <a href="../what-is-mariadb-103/index.html">MariaDB 10.3</a> and later, Percona XtraBackup is not supported.</p> <p>This limitation is being tracked by Percona XtraBackup bug <a href="https://jira.percona.com/browse/PXB-1550">PXB-1550</a>. However, it does not appear that there are plans to fix it. </p> <h3 class="anchored_heading" id="compatibility-with-mariadb-102">Compatibility with <a href="../what-is-mariadb-102/index.html">MariaDB 10.2</a>
</h3> <div class="cstm-style greenbox">
<p>In <a href="../what-is-mariadb-102/index.html">MariaDB 10.2</a>, <a href="../mariabackup/index.html">Mariabackup</a> is the recommended backup method to use instead of Percona XtraBackup.</p> </div>
<p>In <a href="../what-is-mariadb-102/index.html">MariaDB 10.2</a>, Percona XtraBackup 2.4 is supported in some cases if <a href="../compression/index.html">InnoDB page compression</a> is not used, and if <a href="../data-at-rest-encryption/index.html">data at rest encryption</a> is not used, and if <a href="../innodb-system-variables/index.html#innodb_page_size">innodb_page_size</a> is set to <code>16k</code>.</p> <p>However, users should be aware that problems are likely due to the MySQL 5.7 undo log format incompatibility bug that was fixed in <a href="https://mariadb.com/kb/en/mariadb-1022-release-notes/">MariaDB 10.2.2</a> in <a href="https://jira.mariadb.org/browse/MDEV-12289">MDEV-12289</a>. Due to this bug, backups prepared with Percona XtraBackup 2.4 may fail to recover some transactions. Only if you ran the server with the setting <a href="../xtradbinnodb-server-system-variables/index.html#innodb_undo_logs">innodb_undo_logs</a>=1 this would not be a problem. Percona XtraBackup 2.4 may also fail to work entirely with <a href="https://mariadb.com/kb/en/mariadb-10219-release-notes/">MariaDB 10.2.19</a> and later if <a href="../xtradbinnodb-server-system-variables/index.html#innodb_safe_truncate">innodb_safe_truncate=ON</a> is set due to changes in the redo log format introduced by <a href="https://jira.mariadb.org/browse/MDEV-14717">MDEV-14717</a>. In that case, you may see the following error:</p> <pre class="fixed" data-language="sql">InnoDB: Unsupported redo log format. The redo log was created with MariaDB 10.2.19. Please follow the instructions at http://dev.mysql.com/doc/refman/5.7/en/upgrading-downgrading.html
</pre>
<h3 class="anchored_heading" id="compatibility-with-mariadb-101">Compatibility with <a href="../what-is-mariadb-101/index.html">MariaDB 10.1</a>
</h3> <div class="cstm-style greenbox">
<p>In <a href="../what-is-mariadb-101/index.html">MariaDB 10.1</a>, <a href="../mariabackup/index.html">Mariabackup</a> is the recommended backup method to use instead of Percona XtraBackup.</p> </div>
<p>In <a href="../what-is-mariadb-101/index.html">MariaDB 10.1</a>, Percona XtraBackup 2.3 is supported if <a href="../compression/index.html">InnoDB page compression</a> is not used, and if <a href="../data-at-rest-encryption/index.html">data at rest encryption</a> is not used, and if <a href="../innodb-system-variables/index.html#innodb_page_size">innodb_page_size</a> is set to <code>16k</code>.</p> <h3 class="anchored_heading" id="compatibility-with-mariadb-100-and-before">Compatibility with <a href="../what-is-mariadb-100/index.html">MariaDB 10.0</a> and Before</h3> <p>In <a href="../what-is-mariadb-100/index.html">MariaDB 10.0</a> and before, Percona XtraBackup 2.3 is supported.</p> <h2 class="anchored_heading" id="using-percona-xtrabackup-for-galera-ssts">Using Percona XtraBackup for Galera SSTs</h2> <p>The <code>xtrabackup-v2</code> SST method uses the <a href="../backup-restore-and-import-clients-percona-xtrabackup/index.html">Percona XtraBackup</a> utility for performing SSTs. See <a href="../xtrabackup-v2-sst-method/index.html">xtrabackup-v2 SST method</a> for more information.</p> <h2 class="anchored_heading" id="see-also">See Also</h2> <ul start="1">
<li>
<a href="../mariabackup/index.html">Mariabackup</a> </li>
<li>
<a href="../mysqldump/index.html">mysqldump</a> </li>
<li>
<a href="http://www.percona.com/doc/percona-xtrabackup/">Percona XtraBackup documentation</a> </li>
<li><a href="https://jira.percona.com/secure/Dashboard.jspa">Percona JIRA</a></li>
</ul> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2023 MariaDB<br>Licensed under the Creative Commons Attribution 3.0 Unported License and the GNU Free Documentation License.<br>
    <a href="https://mariadb.com/kb/en/percona-xtrabackup-overview/" class="_attribution-link">https://mariadb.com/kb/en/percona-xtrabackup-overview/</a>
  </p>
</div>
