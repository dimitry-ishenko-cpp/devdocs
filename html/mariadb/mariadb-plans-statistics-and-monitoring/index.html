<h1>MariaDB Plans - Statistics and Monitoring</h1> <div> <div class="node creole"> <div class="answer formatted"> <div class="cstm-style redbox lead">
<p><strong>Note:</strong> This page is obsolete. The information is old, outdated, or otherwise currently incorrect. We are keeping the page for historical reasons only. <strong>Do not</strong> rely on the information in this article.</p> </div> <p>Notes from the Statistics and Monitoring group:</p> <ul start="1"><li>Strategic direction: Enterprise monitoring <ul start="1">
<li>graphing and data aggregation tools, server monitoring, etc. </li>
<li>customer has reported that Merlin is inadequate, should we enter into this market? </li>
</ul> </li></ul> <ul start="1"><li>QA request: better EXPLAIN: <ul start="1">
<li>required in order to debug performance issues in queries without knowing the query or the data; </li>
<li>the customer will only provide EXPLAIN and SHOW output, we need to debug based on that; </li>
</ul> </li></ul> <ul start="1"><li>QA request: PERSISTENT TABLE STATISTICS <ul start="1">
<li>required to ensure repeatable query execution for InnoDB; </li>
<li>may allow various statistics to be reported by the server regardless of engine; </li>
</ul> </li></ul> <ul start="1"><li>U/C at Oracle: OPTIMIZER tracing spetrunia: report actual estimates, and all decisions of the optimizer, including why an index was *not* picked, etc. </li></ul> <ul start="1"><li>Developed by Serg for <a href="../what-is-mariadb-53/index.html">MariaDB 5.3</a>: Phone Home todo: make a web page on mariadb.org showing the results from the data being collected; pstoev: do we need to allow people to run their own reporting servers; </li></ul> <ul start="1"><li>Present in MySQL 5.5: Performance Schema <ul start="1">
<li>what do we want to do with it, embrace it, extend it? </li>
<li>or it is better to have more SHOW commands and INFORMATION_SCHEMA tables? </li>
<li>are going to use Facebook's user stats/index stats patch or create a PERFORMANCE_SCHEMA-based solution? </li>
</ul> </li></ul> <ul start="1"><li>FB request: log all SQL errors <ul start="1"><li>serg: possible via AUDIT plugin, must back-port audit infrastructure from MySQL 5.5 </li></ul> </li></ul> <ul start="1"><li>FB request: more options for controlling the slow query log <ul start="1">
<li>sample one out of every N queries or transactions ; with N ~ 99 </li>
<li>filter queries based on rows examined, I/O performed, total lock wait time; </li>
</ul> </li></ul> <ul start="1"><li>idea: collect statistics per query text, or normalized query text and report; </li></ul> <ul start="1"><li>FB request: EXPLAIN the *actual* plan on a *running* statement; no progress indicators and numbers are needed; </li></ul> <ul start="1"><li>request by community: progress bar for queries such as LOAD DATA and SELECT; <ul start="1">
<li>something like SHOW PROGRESS PROCESSLIST ; SHOW QUERY PROGRESS; </li>
<li>what numbers are to be reported? time to elapsed, time to completion, number of rows processed? </li>
<li>how to estimate the total runing time of the query; </li>
</ul> </li></ul> <ul start="1"><li>FB request: limit total temptable size on the server; Already available per-query, but per-server needed; </li></ul> <ul start="1"><li>FB patch: Admission Control <ul start="1">
<li>limit number of concurrently running queries per user; </li>
<li>if all user queries are blocked, allow a few more queries to join; </li>
</ul> </li></ul> <ul start="1"><li>Kurt: Integration with log watching tools <ul start="1">
<li>alter log formats to make them compatible with tools; </li>
<li>include logwatch mysql-specific config file in packages/distributions; </li>
</ul> </li></ul> <ul start="1"><li>FB request: Better monitoring for replication: <ul start="1">
<li>seconds_behind_master computation is incorrect, sometimes is zero </li>
<li>a counter for the total number of bytes read by I/O thread that does not rotate on log rotation; </li>
<li>"seconds behind real master" to report the actual time the slave I/O thread is behind; </li>
</ul> </li></ul> <ul start="1"><li>community request: prevent full scans from running at all above a certain table size; <ul start="1"><li>is existing max-join-size variable sufficient or more granula control is needed? </li></ul> </li></ul> <ul start="1"><li>FB patch: report the time spent in individual phases of query processing</li></ul> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2023 MariaDB<br>Licensed under the Creative Commons Attribution 3.0 Unported License and the GNU Free Documentation License.<br>
    <a href="https://mariadb.com/kb/en/mariadb-plans-statistics-and-monitoring/" class="_attribution-link">https://mariadb.com/kb/en/mariadb-plans-statistics-and-monitoring/</a>
  </p>
</div>
