<h1>RESET REPLICA/SLAVE</h1> <div> <div class="node creole"> <div class="answer formatted"> <div class="cstm-style bluebox text">
<p>The terms <em>master</em> and <em>slave</em> have historically been used in replication, but the terms terms <em>primary</em> and <em>replica</em> are now preferred. The old terms are used still used in parts of the documentation, and in MariaDB commands, although <a href="../what-is-mariadb-105/index.html">MariaDB 10.5</a> has begun the process of renaming. The documentation process is ongoing. See <a href="https://jira.mariadb.org/browse/MDEV-18777">MDEV-18777</a> to follow progress on this effort.</p> </div> <h2 class="anchored_heading" id="syntax">Syntax</h2> <pre class="fixed wrap" data-language="sql">RESET REPLICA ["connection_name"] [ALL]  [FOR CHANNEL "connection_name"] -- from MariaDB 10.5.1         
RESET SLAVE ["connection_name"] [ALL]  [FOR CHANNEL "connection_name"]              
</pre> <h2 class="anchored_heading" id="description">Description</h2> <p>RESET REPLICA/SLAVE makes the replica forget its <a href="../replication/index.html">replication</a> position in the master's <a href="../binary-log/index.html">binary log</a>. This statement is meant to be used for a clean start. It deletes the master.info and relay-log.info files, all the <a href="../relay-log/index.html">relay log</a> files, and starts a new relay log file. To use RESET REPLICA/SLAVE, the replica threads must be stopped (use <a href="../stop-replica/index.html">STOP REPLICA/SLAVE</a> if necessary).</p> <div class="cstm-style graybox">
<p>Note: All relay log files are deleted, even if they have not been completely executed by the slave SQL thread. (This is a condition likely to exist on a replication slave if you have issued a STOP REPLICA/SLAVE statement or if the slave is highly loaded.)</p> </div>
<div class="cstm-style graybox">
<p>Note: <code class="highlight fixed" style="white-space:pre-wrap">RESET REPLICA</code> does not reset the global <code class="highlight fixed" style="white-space:pre-wrap">gtid_slave_pos</code> variable. This means that a replica server configured with <code class="highlight fixed" style="white-space:pre-wrap">CHANGE MASTER TO MASTER_USE_GTID=slave_pos</code> will not receive events with GTIDs occurring before the state saved in <code class="highlight fixed" style="white-space:pre-wrap">gtid_slave_pos</code>. If the intent is to reprocess these events, <code class="highlight fixed" style="white-space:pre-wrap">gtid_slave_pos</code> must be manually reset, e.g. by executing <code class="highlight fixed" style="white-space:pre-wrap">set global gtid_slave_pos=""</code>.</p> </div>
<p>Connection information stored in the master.info file is immediately reset using any values specified in the corresponding startup options. This information includes values such as master host, master port, master user, and master password. If the replica SQL thread was in the middle of replicating temporary tables when it was stopped, and RESET REPLICA/SLAVE is issued, these replicated temporary tables are deleted on the slave.</p> <p>The <code class="highlight fixed" style="white-space:pre-wrap">ALL</code> also resets the <code class="highlight fixed" style="white-space:pre-wrap">PORT</code>, <code class="highlight fixed" style="white-space:pre-wrap">HOST</code>, <code class="highlight fixed" style="white-space:pre-wrap">USER</code> and <code class="highlight fixed" style="white-space:pre-wrap">PASSWORD</code> parameters for the slave. If you are using a connection name, it will permanently delete it and it will not show up anymore in <a href="../show-replica-status/index.html">SHOW ALL REPLICAS/SLAVE STATUS</a>.</p> <h4 class="anchored_heading" id="connection_name">connection_name</h4> <p>The <code>connection_name</code> option is used for <a href="../multi-source-replication/index.html">multi-source replication</a>.</p> <p>If there is only one nameless primary, or the default primary (as specified by the <a href="../replication-and-binary-log-server-system-variables/index.html#default_master_connection">default_master_connection</a> system variable) is intended, <code>connection_name</code> can be omitted. If provided, the <code>RESET REPLICA/SLAVE</code> statement will apply to the specified primary. <code>connection_name</code> is case-insensitive.</p> <div class="mariadb_from_10_7_0 mariadb from_10_7_0 product">
<strong class="product_title">MariaDB starting with <a href="https://mariadb.com/kb/en/mariadb-1070-release-notes/">10.7.0</a></strong><p>The <code>FOR CHANNEL</code> keyword was added for MySQL compatibility. This is identical as using the channel_name directly after <code>RESET REPLICA</code>.</p> </div>
<h4 class="anchored_heading" id="reset-replica">RESET REPLICA</h4> <div class="mariadb_from_10_5_1 mariadb from_10_5_1 product">
<strong class="product_title">MariaDB starting with <a href="https://mariadb.com/kb/en/mariadb-1051-release-notes/">10.5.1</a></strong><p><code>RESET REPLICA</code> is an alias for <code>RESET SLAVE</code> from <a href="https://mariadb.com/kb/en/mariadb-1051-release-notes/">MariaDB 10.5.1</a>. </p> </div>
<h2 class="anchored_heading" id="see-also">See Also</h2> <ul start="1"><li>
<a href="../stop-replica/index.html">STOP REPLICA/SLAVE</a> stops the replica, but it can be restarted with <a href="../start-replica/index.html">START REPLICA/SLAVE</a> or after next MariaDB server restart.</li></ul> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2023 MariaDB<br>Licensed under the Creative Commons Attribution 3.0 Unported License and the GNU Free Documentation License.<br>
    <a href="https://mariadb.com/kb/en/reset-slave/" class="_attribution-link">https://mariadb.com/kb/en/reset-slave/</a>
  </p>
</div>
