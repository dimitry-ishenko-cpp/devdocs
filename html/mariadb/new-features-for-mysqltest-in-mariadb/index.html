<h1>New Features for mysqltest in MariaDB</h1> <div> <div class="node creole"> <div class="answer formatted"> <div class="cstm-style bluebox">
<p>Note that not all MariaDB-enhancements are listed on this page. See <a href="../mariadb-test-and-mariadb-test-embedded/index.html">mariadb-test and mariadb-test-embedded</a> for a full set of options.</p> </div>
<h2 class="anchored_heading" id="startup-option-connect-timeout">Startup Option --connect-timeout</h2> <pre class="highlight fixed" data-language="sql">--connect-timeout=N</pre>
<p>This can be used to set the MYSQL_OPT_CONNECT_TIMEOUT parameter of mysql_options, to change the number of seconds before an unsuccessful connection attempt times out.</p> <h2 class="anchored_heading" id="test-commands-for-handling-warnings-during-prepare-statements">Test Commands for Handling Warnings During Prepare Statements</h2> <ul start="1">
<li>
<code class="highlight fixed" style="white-space:pre-wrap">enable_prepare_warnings;</code> </li>
<li>
<code class="highlight fixed" style="white-space:pre-wrap">disable_prepare_warnings;</code> </li>
</ul> <p>Normally, when running with the prepared statement protocol with warnings enabled and executing a statement that returns a result set (like SELECT), warnings that occur during the execute phase are shown, but warnings that occur during the prepare phase are ''not'' shown. The reason for this is that some warnings are returned both during prepare and execute; if both copies of warnings were shown, then test cases would show different number of warnings between prepared statement execution and normal execution (where there is no prepare phase).</p> <p>The <code class="highlight fixed" style="white-space:pre-wrap">enable_prepare_warnings</code> command changes this so that warnings from both the prepare and execute phase are shown, regardless of whether the statement produces a result set in the execute phase. The <code class="highlight fixed" style="white-space:pre-wrap">disable_prepare_warnings</code> command reverts to the default behaviour.</p> <p>These commands only have effect when running with the prepared statement protocol (--ps-protocol) <em>and</em> with warnings enabled (enable_warnings). Furthermore, they only have effects for statements that return a result set (as for statements without result sets, warnings from are always shown when warnings are enabled).</p> <p>The <code>replace_regex</code> command supports paired delimiters (like in perl, etc). If the first non-space character in the <code>replace_regex</code> argument is one of <code>(</code>, <code>[</code>, <code>{</code>, <code>&lt;</code>, then the pattern should end with <code>)</code>, <code>]</code>, <code>}</code>, <code>&gt;</code> accordingly. The replacement string can use its own pair of delimiters, not necessarily the same as the pattern. If the first non-space character in the <code>replace_regex</code> argument is not one of the above, then it should also separate the pattern and the replacement string and it should end the replacement string. Backslash can be used to escape the current terminating character as usual. The examples below demonstrate valid usage of <code>replace_regex</code>:</p> <pre class="highlight fixed" data-language="sql">--replace_regex (/some/path)&lt;/another/path&gt;
--replace_regex !/foo/bar!foobar!
--replace_regex {pat\}tern}/replace\/ment/i</pre> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2023 MariaDB<br>Licensed under the Creative Commons Attribution 3.0 Unported License and the GNU Free Documentation License.<br>
    <a href="https://mariadb.com/kb/en/new-features-for-mysqltest-in-mariadb/" class="_attribution-link">https://mariadb.com/kb/en/new-features-for-mysqltest-in-mariadb/</a>
  </p>
</div>
