<h1>Writing Logs Into Tables</h1> <div> <div class="node creole"> <div class="answer formatted"> <p>By default, all logs are disabled or written into files. The <a href="../general-query-log/index.html">general query log</a> and the <a href="../slow-query-log/index.html">slow query log</a> can also be written to special tables in the <code>mysql</code> database. During the startup, entries will always be written into files.</p> <p>Note that <a href="../explain-in-the-slow-query-log/index.html">EXPLAIN output</a> will only be recorded if the slow query log is written to a file and not to a table.</p> <p>To write logs into tables, the <a href="../server-system-variables/index.html#log_output">log_output</a> server system variable is used. Allowed values are <code>FILE</code>, <code>TABLE</code> and <code>NONE</code>. It is possible to specify multiple values, separated with commas, to write the logs into both tables and files. <code>NONE</code> disables logging and has precedence over the other values.</p> <p>So, to write logs into tables, one of the following settings can be used:</p> <pre class="fixed" data-language="sql">SET GLOBAL log_output = 'TABLE';
SET GLOBAL log_output = 'FILE,TABLE';
</pre>
<p>The general log will be written into the <a href="../mysqlgeneral_log-table/index.html">general_log</a> table, and the slow query log will be written into the <a href="../mysqlslow_log-table/index.html">slow_log</a> table. Only a limited set of operations are supported for those special tables. For example, direct DML statements (like <code>INSERT</code>) on those tables will fail with an error similar to the following:</p> <pre class="fixed" data-language="sql">ERROR 1556 (HY000): You can't use locks with log tables.
</pre>
<p>To flush data to the tables, use <a href="../flush/index.html">FLUSH TABLES</a> instead of <a href="../flush/index.html">FLUSH LOGS</a>.</p> <p>To empty the contents of the log tables, <a href="../truncate-table/index.html">TRUNCATE TABLE</a> can be used.</p> <p>The log tables use the <a href="../csv/index.html">CSV</a> storage engine by default. This allows an external program to read the files if needed: normal CSV files are stored in the <code>mysql</code> subdirectory, in the data dir. However that engine is slow because it does not support indexes, so you can convert the tables to <a href="../myisam/index.html">MyISAM</a> (but not other storage engines). To do so, first temporarily disable logging:</p> <pre class="fixed" data-language="sql">SET GLOBAL general_log = 'OFF';
ALTER TABLE mysql.general_log ENGINE = MyISAM;
ALTER TABLE mysql.slow_log ENGINE = MyISAM;
SET GLOBAL general_log = @old_log_state;
</pre>
<p><a href="../sql-commands-check-table/index.html">CHECK TABLE</a> and <a href="../checksum-table/index.html">CHECKSUM TABLE</a> are supported.</p> <p><a href="../create-table/index.html">CREATE TABLE</a> is supported. <a href="../alter-table/index.html">ALTER TABLE</a>, <a href="../rename-table/index.html">RENAME TABLE</a> and <a href="../drop-table/index.html">DROP TABLE</a> are supported when logging is disabled, but log tables cannot be partitioned.</p> <p>The contents of the log tables is not logged in the <a href="../binary-log/index.html">binary log</a> thus cannot be replicated.</p> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2023 MariaDB<br>Licensed under the Creative Commons Attribution 3.0 Unported License and the GNU Free Documentation License.<br>
    <a href="https://mariadb.com/kb/en/writing-logs-into-tables/" class="_attribution-link">https://mariadb.com/kb/en/writing-logs-into-tables/</a>
  </p>
</div>
