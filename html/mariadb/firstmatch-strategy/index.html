<h1>FirstMatch Strategy</h1> <div> <div class="node creole"> <div class="answer formatted">  <p><code>FirstMatch</code> is an execution strategy for <a href="../semi-join-subquery-optimizations/index.html">Semi-join subqueries</a>.</p> <h2 class="anchored_heading" id="the-idea">The idea</h2> <p>It is very similar to how <code>IN/EXISTS</code> subqueries were executed in MySQL 5.x. </p> <p>Let's take the usual example of a search for countries with big cities:</p> <pre class="fixed" data-language="sql">select * from Country 
where Country.code IN (select City.Country 
                       from City 
                       where City.Population &gt; 1*1000*1000)
      and Country.continent='Europe'
</pre>
<p>Suppose, our execution plan is to find countries in Europe, and then, for each found country, check if it has any big cities. Regular inner join execution will look as follows:</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgsAAAD6CAMAAAAY0PRpAAACr1BMVEX/////QED/f38lJSUAAAD/v7//AAAA/////wDY2Njz8/P4+Pj8/PxAQEDMzMw8PDwfHx/19fX6+vozMzNFRUWFhYXn5+etra1xcXH/JSX39/f/PDz/5+fz8vL09PT9/f37+/v29vb/hYX5+fnx8fH+/v7U1NRZWVkkJCT/zMxjY2P/399RUVHZ2dmjo6P/z8+4uLg6OjqXl5f/n5//7++AgIB0dHT/Y2Php6f/sLDAv7+UlJRvb2//o6PDw8MLDgr/t7exsbH/dHT/9/f/UVHf39//2dlUVFTq6ur/YGDPz8/Gxsb/h4dYWFj/ICCfn5//19dra2v/j49iYmJ9fX3rbGz/cHDdvr56enr/GBb/CAaZmZnJycmPj4/o6Oj/lJTCwsLu7e3/x8e9vb3p6emKior/NDT/Dw+IiIjw8PDniYmkpKQh39+JiYmiXV3/p6eurq7/UFBcoaH+SEgH+Pj/WFgX5+f/l5e+Pz/qeXlgYGCCgoL+eHj/aGhNTk5Qr69Av7//vwAvLy0v8/NzjIwO8PDlj4/bysr3Bwf/8/NISUlMuLge2Nj/KCg2x8fIyMhiJyfgr6/hoKDeHx/klpZNAQHeuLjqERH/8wD/gADogoIoAABTGBiqqanBhoYDBQXLNDTS0tKenp7/5wCaaGj/QQA+YGAVwMBKLS0V+/vi4uJ4GxsZp6fazc2PcHCmS0uRV1f/3wA00NAna2toaGgkfn7JAAD/mQC2R0fXWVnPbW1T6+tNeXmHeHjqZmbcxMTZ0tIF7e2xAADSJiZ/ZWX8rKwRAACXMzOYGxti5uZPjo7/cADwT0+PBQX/WgAkk5P5nZ375OS8np6ZUlJ2Tk4hPDwfTEy3s7P/pwA6Njb/1QC+fHzzMDAkMDA3Gxv62tqvcXEUFBT/OAD/QH//fyUW3VZmAAAgAElEQVR42uydz28bxxXHN94hW4n2rmh5Ka2Gsa2V6+xuyYWYhlyTFJ2aoBjDrKoGdoEWLk0LcoAERdv4aKrVwQcByiW5JAaM2ICFnpSDe+i5KNBDLrk1QC/J/9L3ZobkUqYpQV5KXGm+lnbn166Imc++mXkzXCvK6dTCYnnl3Gi0svHHlCIVGe26Hz+7+rPRaHn9bvtTWcVR0bq7fGmUmmtuyEqOhlLuJ2dHrLInqzkSWtJGjcLZeTcr6zkKZmHl8hD94fJwZa5ePoh2ypdkTY+/rv/ufECf270jBsjn54fK3idfqFS4KGt6/OX+bwgL5/dr6gOycO+zK7Kmx1/nFoJq2J3j7sbGzMLCxsLCzPr6RhNTmxsbG+twXsPYxhrmLNiN1Y1VkQkpzbUmXLHOLu3TuQeypiPAQiKoht052vnVTRbI5XL53Cac2zO53CLkLtvLiRekCUVWE3aunbebLLOdS2C0nZixm6uYFtQ56XCKLgsNe01EkYNFmwV5bgIaOm9vAhNITCIxm8N8KAhotPkZeJAsnBy7kMMmZYE8O6M1aOZYodlNaG+bxexGIpHPARpgPYALjCYwnJMsRJGFuaAaNh538LizmWPRXJ4nYxM3WKEX9hz8W9xsQiKk5HPw0wDx6Jy9A+EXfbedkyxEjwVoSDhstnm4EWChAWR0Cy3l5paW7OUuCwyeuS4Lc69IshAJFub7lLeX8pv28vxOezFvzzfs+flcfp6dbRtGhrxQmzTnF0kOQnYDLoFArr2z037BovM7dr6Rb/ffVrIQBW2uJ/u0uLTZxHNzM7+cTOaTyWeLyeSDfPJZ7kFy2WZZyVv5B5D1DEtBYLHJii/t8Ci7BV4b0M0LkoUIaD2fPJDybTjkmslD6f7SPVnT46/ddy4eSLdwctC+eDitNqXfMQpyX0weTNn7k4fV7UZSVnQEtHx7bXLEulu+KdcpI6Fns7tvj1Q7hd05Wc3R0P13yqXlKyNSw/tnc/dtWclR0drdpc9GtA/63Id/un9TWoUI6dLFK/dSB9YH2sHLpu59clGOFU6uVq6elZUgJVmQkiycPllpfk4PyqxYldewUE3LqjtpqlI8+qZJlVYNWz+YWY9TatYHskCdHjBY0pRVGXWlTXy+KY0hE9jqfW3qQIwRMpQFdokj6zLyZsHv2Ia0sq0oxYpptVh3wboAh3IelO+/Oqukq4oDqUUgpsVZSDtO5xJWvo5AVIppq87u7Us+IiUzhraBt51lKT6N01oL0aAVwYLvQ4EnvwYQTFBRoRZc5SALFZOaNX4JK1mF/DSUh2Ted+DNpaLDAmBg1XjYt0QCNHeFG/44trZS81eumcBCTLEoMwhQiDpps6JYVXFJhcKQwcFbVOMxxeQDy6JZlTUcIRYU1vR8CMBYcPCBFmkV6rAxhLNy1XSws4BfxgKmofmwOpcAJBZlJzASLIUZhoqs4WjZhRo+vTAM6LKgUJ9beYvyQshCGlmIAQsxwYI1iAW/04ewyYnsI6I2XojFrVhNjAR4M1biPhs+Chagj3j0EGxC0aG+4ledImOhjoMD2mMhZsbqAEqPheq2rN9RKKWN5r4+NnqRmj708NWiMBR8ppmOO0Xe39fpkx9+A4MH0/TRk2Ca8TSWg7Gib27zS7AkxOFYa4mBp9SIpJPRwBAzndcREnQZoH/B6bke6t3Q4Edf+iRHqYKO7znJuKHfuGKmB/ccfdrDgtTxS9XDv2f91aRXWx1ZkG7m41bW8/BLJ5Ma/qq6pqUUbZLnjO6NSNuDWJCW/5iVIaqqQs9gwHjBJahMibCeIqVmju5jyDXr45dL3FTKUDkLHbugqphVJiG/Ni+GU8q0xVepKxZfy27hWoOifPtbxkKlyMpZsUAWj9ZrQ/ocqTBmkvzZT3EWOuOFAqNAV0MeRMYpTiZ9y7Rwemix6SKlFq0pRf8/P2DD+3HIKsar6GYWWd2oz2GIUfO0OBtFV31UKpOyCAVZYISk1JDnFDWfL0ThyDGNM02/iqsMbFJhPYk/bMGzj34kClC0aDdLRDtzj6p1WpakNGIc6d8zul6FIAtgElKASSnkP4ZORuZpojG2WhWjrKGValWpPvnuIRYBFvgcw+xkdaJi9VsRPEgWjooFD8xF2F0Ea0I+baRWzeIzS+aIAkb8769SRonDbQBkiKxONDgRrUWXBU9X9QKvcB3G7GymlmH9dFa/gYdsKaNiSHF1ouoYypQ1XS0bzP+jpPTy6PoIYxALcM6SQth/DB76NGeh4vexAA/8h9fPijav8MZPi6xOVBHXwpnSyKJQIGohw8ZoOtGNjKqi7eVDdWYGNFIguquSGwEWVFdVdcPjk7tC6NY6MHZkje91WRDGwFVdkh0BC3zjgelg86MFYOsK+Jgv3V8QLLDHH+yHyOpElc7uuLTpR9eXQ7C6UwWcv+HzXWLxPhZw2M6TO32EyingpVR1dJ/OJbrnZdQOCxlilAz2IUn4HkhkAds9ZuIPW2TCccM2jiF6LLAxIqR3skS020fUI7x9pfdUizbV8Ynrtwvd3C4LqmipEsJUGOHHA4NEVLQLKrKQVQmfPugk9H7JMmsVgKDK5pS1msW2MMAUEyeOnIVty/TrUM5ik0iR1YmKzoO7ICKq7hhM4886PIGlPSwY3XJdFnRhU1yEabRvx9f6bq/xtyBl1NDfhmRZFjRjscbXm6vUZ7tZfb7BSbBg4a7WFq3FAlkiynfEwOlksGAIFsoHZYEljrKL2McHdXQSfcQwV5UZ/eUKvfOEaSQjOg3twCyUiVc64mmm0vM8jhMLdXoCNsD3qlU84OzErYXxKguFPhbg+XTVY3h3na4r42YXToKyBEdl5QxbB1J6xzKisJcFMcfr7SPIEFU/BZV0SlhA/4KusuddZyHuZVJxrbiwlwW2hGwEWPAI8SQLJ0clV3f5vNKDkGjaVEEvpCYNSGcHsBx8WIDJYDG6M7rjGDlKFsa0h8lIFqS4K2h0/mfJQsR0SroIycIBVA7JLPxIwtOPp5MFbf/0VCReXU9+Ep7IaWShgCs1mlrGKSAbwhkq+u41mBjyuKZqrqpqws3Ml3ckCyeRBYPonqGq3Aeg8xQNudBvaIZYYtbVgps1+KLeOPftkoU3HbdNwuxf38sCX8Iz0AekMZ+i8BZmyes3iz4+ZNf8WLIwHi4ivjZQ2ssC9wkGtx5wPIatLZOfHk5EsjAmXYQRaPQuCxpuQwOhE6izrOjheVgXIVnoqsW+61KsnxAWDKZsYNsycFAatv1IstAV37nq+5FiwRvMQjawE7DLgkuyQ9eWJQs9Ftj7tlo0UiyIpYAMa28+SNB721D6WQCjMHRt+ZhZeExC1huMaalFi+JlfoG3q4z7PAIpyGbYnJLtBb2hq8iCQTJgATQ32EcoKhm6WfSYWSATIesNPhd1HLOOLFC/aHZHDYX18WYB9xgQne8x0zDssu1pSkEFEewStMBXTYY6F6LCwp1bR8AC7mh2KG5xr7Y6qR/PJMbcc+sZpd5cAQaLk9yxmPKMMg91vwqbHb5ZdGxYmOXikdu397bx9Awc3oUC3oQIQMi7gxHv3ZBYqOAm6BhlL3LtsfBpFP6HwYN9xXGfzaLvH7Jffj98Fm5P7cfC9AUohCEIIAuz0+zK6ZBYwI3uvknTppOm6ZPIwj7+5zHqI2amhth+zgKi8sG0CEz0s/DvN2aBfdnBrymV4IsUThALHnHHk4VfvjeYhak7U1MTF6CtP5qanpoV8SALE1MfDWbh6VdvxsLgbzlEgwVFC6HQsbHw1/jDX7w3iIWpmevY1tenZiBlkcf7WIAj9hF39rAw8fQR0BC6GzoiLIRipI+LhVgc9PDLaz09/xqPX/8dDl/849qfv3j+/DmcWRxSnvNkPP5365tvX758ubX18putrc5xa+tf3z169PTLM0K/ivX0c8nCWLKQjsX+cubM3956C1D4ffH/7J3vTxvJGcf3h3fI3gvvSmuwEds3eVEp2NiWbZzaNI6JUSxHFkXYgOx7cRKSbRUhUPgRQAIFKkhyyhE1QC6hXHWnEqRIUa5JXpTLSXepdGlU6Zq8uHsTpVV16l/Smdm1vTY2eO21MWFHYr0eb2Dj+ezzPPPMzHd2DrIgN/rTL/4Iyy/S+wIWvng48ujVCCqvHuWPIyNjQwtbT3IsLJL50g9wyeA3V6XPMSQenYVjYGEAEUCSGZAgyVmKmmP+AUCkpI+QnUHW8uP3Sh9h5wPZeCHOsznPAX3E1pPD4wUPbn+fxALmIgMJScPXRYryMYyos1BXFpggRU3D73wdEaB8EIOJYOnYUW50JzoJHGQhxcdyzR/g4wiIAH7z5El1/QgH5CNKUVdJMoHAuEoNMo5TyMIf6pf7dzCDkIEkIKcpKljKFjvK9SNQo0v9CF4QAgUsmHhYl5JPUCfDJcAKl0Z5R1RGodkYJtOgn1x0D5wqFgza5/4HGDcVgU9YmhyGDIRqugNncX6hRAkENMtBK4uViUbWE5GgzoJ6FkIMg8xsAvqCCOVmRM3voBwLGo5HHAxz3dNpj85CZd87gwiAUdg6SJIkCr/Eut1BONB4FmCZi5wuFuwmQQg71aPw8haJCIAR4cBx0VhnFkKT644TyELn4StdS2/FgVsixlvM5pjpeL73i4aLGk5kuajZmBkCwRdJzIonMV44Qgy19NwmxILdYM/FambklANXAmZ4YM3QVOCKXD2ucqKJBPigzTPYJHPcCr2bJ0iRSZQjb/bY0d9qlyYwyltqoBEHI0cbkewZqrL3yPX4KuVWHKVYCOcsQpiPCfCNEOYFsxAWBENKEPgwqhd4NDYIq2DfHl/Ppz4wFoaX8gkpanY9M00xJyC/YEfzmGiF4CYarrRjE0kjOSM7TRvw2KRiVqy8FUdJFlDaJo5Gepw8fNh5OyugHr0gXIHOI8Xaedy1uwLrUGc/xcPLAvCH/aBY8JCAQn2huUUykSGpyYGTkWvqNXB+oqsTT3NXSq7JdoGjDa1tfk5aOpVj4TC7ILFgElgLmkrCW1ghJteahWzqx2yGXTpcBSEQ4mwsfCwsXLv+3dQ4ABMt8/MTLVPdq1qx4EgA0EFmkuRS9GBPqIlZkIX4MAYKFrLxAqZAku1Vrqg6JF4wmeRxX8yCxSnld5UsxPiYhc+zEBeQ9Wg4C9eWx5fBD6tr3d3XW7q7p1omwH3489W15dXltepZYJbW02k0btVRbpyqeVnIyql1Fkkx5ljIq/NVyEIKP/mQhbg8GHSABd6FUz1ZFgJ8imcbzsLaJpiYWSuqfL7aPbMKwJ2pW/O3x6eWr6m7odHhtHUwveggCF8kkymXIm1eFspJtBaxwFXOAgwNYZ8S+ogAHw8EUldKsBBn44Y8C6yJjzWehZbV2zPlLMbMcvfEnesAdO/0k1GCCo4eBcEoMUgCkVpfygcGvoETyIK830ORdHMNLLCwuyCEodV3mngBBgIxNLkYHZwoKjA5WZcgWMJOqQo5lJTB2XAWVv965CUzy+OvqUiUACBNpBOzxPBVCvYJKKvIMKIH5cOYqJtYJGcJEoDQ4HDUU9n9NS8L2XVytryku7+Mj5Av9R7JgtoS59mGs/DVhIp+hIOIUkvEMEmKiwAwbgDcDAARCAlJzE4PEg7Go+L+Pv5LE8eOOJ2A2xbHkZIMg6T3j16Q3ejBnUpJ658u2IpDCxayc0cayMLM/aka+pSyXaiu/O7jj5qVhV4D3WPswXu9wCbn7D2SPAtqfqMXsWDo9LfipVPQdnT2emm6YCsOLViwsCzLfmh5x0NY+FXT5prQ2kmak0TUkGyT109LSr14wxWOtqMTafKzDX7cU7QVh5YjQ5p89V9WMtBw701F4xFfnjIWYL9SkTVSzHjHGWkcNHblr1REnW2lRoZqGwrKJWvqbRe6N3W7oPUQVYmmqH2+o7uf1Fk4PSy8f7a99/4dANu7e3vbZ7a398/siDkSAErm6/FC0xUbVwcWVvYye4m9lWfb2ysPtt9un9kDe2f+BpLEbIYcxksPSGIw6KknC8+7dRbqXyphYS+xf6Buhxkl3BQ1aY1AFgaJDOgnGE/dWLgO1tae6ywcOwvv9g+PFyANcwQhjoaSSao+LMy03AEP7y/rLBw3Cw8Sb49aK2OVNuMTKXdoyVoPuzAPbc993UccOwvvkruVr5sazSQn68DC2iYAD3UW6l2OTjHsqNFl8SwNOETNWWh5fgss6ywct114v7ercj0lmWG071NO3df7EcfOwn7ygUoWPGS64r9e+YLOnUYoPGLJ10uizkLp8vZ/6tdZi6PRSv96xWMfn79shMLjWXjz7ToLWq65d1eaiaychY2NBrBwGXJwKa8HLX5yVmdBaRdWqtFfcE+HNGBBqe95dwu+j9d79PTseQIpvl5oRzrhfe0d7ToLiuwC2K9OiyMYVcWCSxCEWPHyWd4sz9JGShsLv2ax+qNLnpHHBuAJWttjwjPuTAEtWBDbL3Wg3co/Fdsvn2v/lLiss5Avz6plYQ741LBgEcx2k3CQBVdOaOPujb9jFuCV5hhazmXmzWa0uE8S6+DNmsyq+ARcQNbhfIePEDva+/R4QWkXVnar1OiJLKljATYunlNrNuMjWrvJ43Wd8NyJGvruwtNXWQU/M2/PSYNqysIFtGPAWVnqU0R7Sei5pmx5/WanSg3gEOELqWPBhTU9hRhvge0chuZfWqCDzgWkyfTk528WNj7/LbYe8NMSLIzdrZUFvFkA0+47d7bv0oVz5/t0u6D0ESvVaneJyYgKFnjY3kiIy4QXYZgNYal9EQuGOFJ/xZLRNzfG5v/5p7GNjaePRn56DeMFVwELW0MLd2ti4XIffmH6YO/S19fRJ+osKKYuVM8CMQkYFSxYLGG0sBeJfsNAICvjhe1Cdu61HC+8HPnNxs+Px759/OLFi++Hht68GIPl8bfwMPSvoaGFe5KmI1VY5hhlCVX+BTUbC3XcfeXIeOFB9Zp+DkJU4yPQcn7MgoU9lAXsI8J5H/FnJPT535/g4cb3Q1s3X0vNXcTCEqksSZAvGUX9kuJfBKXf8+9fgjXpxmr+8NbvF9aTBYLqD6liQWBNsUJ5vzIsFMSOFrwqFJ3e2LqpPl7wKOzFnIKFaQmP/2x2ZHVjARIqlcvV/IVRLaSGTwALtfgIFDIsVt6nNFsMLhg/ulhn/HAWivqUcT5lTmEgbt6sg3qXs/X3iv9QjhpfnoXFIqlhSUoWleliD1XDfQxYy7BgNBpPAgvE4KSKXBPOILkEHonE4xSTCS/ixOfheJaFA7kmNiVIAqD1UXIrYKHCMio3fbDYQ8msrBfaFtkbHeFQh92lWGilOY6m2xrBwrPtZzVpAIuDGo1HsFkWGq3qVw0LRz7jhbZF9kaJAqOyiD+azDufKOh3H2Chh0arpvwfNYKF2uIFgvCBoM6CuuKQQIliFmYLnU+/tYgFOrfHYCvHeQmizWbkOuHBxtmJTlSB6m243sahzQthTZetDAtH5Jp2wL3a9psiSe1YsDtPAwvlyiwAEWuRXTDSeRS62mDbGw10b6/RYPP30FxPLySlq9NohDAYDVxvL7QhtJ0gvLYqfURt8QJBWEXtWDgW5demYSETsR6IFxALRpqmjQTdC10FDdvcj2raJIsht7qfk6qgYfByBOahKh9RY7xAEExarDoDfpw75DUbC2KpfoRsFxALuEgV+IDWV7fClrfbbBwnV7USbXRbF11VvLCyv3JmZXulJhbExPDhoUuTr6FrAhYGRA8zyXio4emB4thResYRC8Y8HEoW7NAxGPMsEFyPt7MqFnZRfk7NnPiS/cpZnQV1waODGHUPEm5qWnSTmayuzFIIBpEHWPDifgQEgWstzQIyDT0KFuw07a+uH/EjZOHHmvcYsmrLwp3v5m8vSzKPX7dMdK+2fPbZCWYB9i9DQYqyBkkyKKZlKaF+0I81hrJ6U+Xzjl6cX+hCSj1eFCMWs+CnO5U+ooRCT6UsQMOQ3K2VhWhS1IyF8Ylb12//MH97PCfzuLnZ8g34P3vn4tPGkcfx8Zpdy9BgH7ZxUtxrD06V8RoWY5ucoQEnpkU4hEMGm9pK1Cs9QOUQiDckpKBeuCQXkmveUpo0tI2SXJKmUvNQEjVNk7s0ke5OSXqVTlWlq+4/uZnZtVk/8Xttsz+JXbOLH8nv49/M/Gbm+6OWxi9Yh6c/jjgpkjMs0CRpYQgCRvuJDjjA8kCXU6CdomiCokjIgtlCEDZAkkwiOehyf96xEVevxo+x+gr8KYaH8qYa9BhfQmkIRUOy+YV/RAkLibCg83nSxML08MLxfdPhgWJxXGadPTC8j6JGGQ9BOlb/M82drqyygL7lyOVd2OVjrMsHeC6HEZ/QSZD0IGEGLjsJuhKENcXYVy6tSZaFzwc/T5mF2JnoBFhYPhBbzW34JAq1gzMMUm2TzHdYkDYEnTYWdF3wO9uHckHARmC9QIaGLseelbBagQGXk36XS/aa0X50FpK+NASXFFnQGKO84Npz4d+dTMeuFNqeFhZWVibj6jviXrdkgMJJXdQA48YXdMAG2CyRMAyMxpwDPWAq2g38jAGKvst5lva/FM/l5sAzCAJ29mZI7PL8nKdcO9Wzfy4dWR2P15E6C5PTw0uJjSOwNkQ16yf41YyfBRS/0TPQ1/+T2XnaQpK0A8uFkn1AYGvJUD4mWyzofK7U/22PbieeZoI0kFntL+Sv8VnowQuKwsydlmxvDAWfeOPCAjWeTH6BZkQWEmZB2R2RhaFTacn8d9hTZWH4/rrNO2afhcgFIHvPfBup6UiUhejTlXGy8NW4TGQhuyzUKXuUaicqEYx2JPWolKrvh/b3w1/r5Vq2+hS2E3MJ7kSwUbrUWBhZEVnIHgv9aMeStkjlbHb243WocqWqTq5ue3Dv6k+9/6lHtYWcKm5361F3gjsRHHRqcWHywD6RheyxgNYRyrVc0Xh5rQoXIsPFhy4fG5pz37167969J1eHsJ35pxvtRCDjl1/vG3CkFBeOLIksZLmNYBcgt6nUKhV7CbGAdySc+/gytB96sZ36xu0+cfSRBJUvpgYlHvOa0o5dlCsVFhYXZCILQrDQo3TiAkNBLPi3I7AqKW7eTgQL6WofHFtrHD/Rnkp+IY7kQvqXsWDb2bCuWUDOb1tloRae6+rZLY2cOsapsJ0INokkdkrOklJ/YeWCUHHB+ca763YcgXceKFWowDVmQY0qXrPjCKVKWR89v0AOxJ4SbG9PgYUjwyIL2WMhyOoi/t7cHDvX5JmKNS/T4XMkycLCiLVn5G/TIguCsJDkimPzWIw303mZJFmYPE1R1HUxLuQVC4CIqd+WbFyQLVDUgWmRhfxiAUzYo78b46OT7S/ciSssiCykYC1p34lAH3ZEXerq8M4ny8Ly6elMs6ALHNYnCyD9Wp+eyvao7UQHkfQ44itZhlmoRqJduk0iC2ljwSYZiFl9KvR7F7fgzMnvMq0G3boNgM2rmq/goMhCinFhxheLhbGJZDsssZZRpGc3JdKBRlLQtspK+Ns7FZuqRRZSbCP6vDFYmAmduY6bhRNHM76zdtvmd1qRwOOWba2gtYLcZhNZSFUbXDcQnQXHFB0/C05+wuvfmWfh4CYk8VmhgzSAitYtYn8hDTrxjlgrDJlYLKCVMhvrg+S8/Hb2GNbi2LgRAeJED2rlzVjnK0RFOoXuI5KCBpsqNsPYpatE4uAiC2moGRDVbFRfDBaUQQAEsfDfM1ixbWO3shtNoGEotKy6nzZt1SNQLNgEmwbbQYhDhdhfyCwLwLs3Jgv1eClNM5JnwyxAh7OuVp55gFlh1fxYSkJY2J8iC1gKGpcLaH0LHnI1LnyYAcmKD1NLNyW5VGB0NBYLWjxZ2q3qVquciAWtSt2mwmsslUf/xLIgV7dFYeHBXGpq0Ae5fm31W+hQnav9haLMvWaW4wLo6orBAvZ7M4oN6m7MAlKKZ6UeUWEZJdd0aJVqVFcitI2YS1UNOi9y0AXEwsBYDBZqlXXsSktuORVeWcOxID82d7b3C3jncu8nHw0NHRsauvfUDe3pXTdnExNu99xtv+SZTxJqPIFfFxlsujxmoVGj0dTkJQuuIDGG0P5CtwpJd0ZmQf7F2aE56Ps7Qz991HvqN7293yuD93WccbtP7A98LgcZajyBX08IJt5VeWgv7zIS4/xmdj6EHjqnWDBKGzQGaU0+sqCbscQaR8BWog63ERvDWcCHfniX6y80o3XatYFlmN+6k1GDDv+APHpsqyzw6OmMDE6EqJM+anTRWGhQFOdtGwF05lgsNCv75W3KblRuKAILSPVXi8YS8NyDuFCplAH134yoQa/RRvDBiRB1AtQc9l+ZCvxR4HmWeD5FV6c5MgtIy88fIBSKctBkNEg1NdImqdRQqpAqkKCfFJ3wJSM8lWPtv9xgwU4x0VhA0b4Z9hjq6rVc3lHLXWVZ0Gq1bGIJiYI72cFnc2bVHdPUX+jyO340wEIgngyG1C7wBKvPc6j4qM5IetCsPhNS6TEY4I8RaIoMoLgUHkql0tJihQY0NgJ0gpeKi6W1WLPJYMgRFoJSDHHPRygFUvrMYt/RX7vAFaw+z6EyyCoAR2KhRqEoKgXS2tLSWinQrIp3bWUFHlFDogmIdzXBc6iSm3As8FvRuFlQC8bC6zdzYhxxmFUADmcBS8QjgUeFAik/Y+/zhdxqjAqjdJUFIK0JayL8r9mSfXVVsz1xFuSCsVC+IxdYoDkSwvsLGj8LrJpbGAtG2CBoeCwYGwwNudJ3BIBX+zwvWPh9DrDA0FHGEbVFGiTOVop9DmrCWVA0sP0FPwuNEapNCMfCKBXIPbbkuhp0rrAQPb+wFY4TpMZiPI6QNsBxBEICOd5YilXbtsLGw6DhLmGxTwXIHRYcQXOVua4BnEMsdK2Rg66J6/JqyYkcYAEw7Y5UWMiuBnBOsGAnZsAERXnSMB/RGKEgkZAsUKPJspB9DWAhWWT3/wUAAAiUSURBVLDYkZSobwx4qSkkH+lIAwtNDSCXWAATE8mxkIwGMJFnLDAk6SCJMcbuo1wMRXWAvQQZc24qfX0QQVigk+svLCajAZwHcQHLiBLEPJjq5CRlOyUkTYxGnM7IYPkVQVgA8+3JsJCUBrCO8EkYu4TVbl5LhD3zLFh4itI2icRu98sLewemOOFoi1BNUosgYzfezHXcLCwNJ6UB7CC54gxI1DlQnAGJOndIECQSDIkFyf72cX4KEnVOiAVOLJjBL8WpCNPI5UhemOa/ebtP0mWXTMA3n6EdggsLCxkXdN5A7vF8vPTdXlum53xYY9Qe3EawfjKz+tA2D2YB+slHBPsJhmmumgu6MRXtRjv/Bsm7EcabPYi3XDVhWIBecSQYFxaoxaQ0gLsSGcCvxgVUzQV9yy3bnjwHLk5dHAV2hisVgOt+8G7Q/meAvDWBWNB5RxNkYXp83eeaCjUujA0kxsKhcTHvWKgsMGOWhFiYXRFZKFQWALA7EmBBOA1gkYXMs+AXgs11DeB1xEKLYHPDXOGhXNcAFuNCFtoIbkF0fCx8OSuyUMAsAN1eXdyB6fa/hNKDFlnICgu4hmk8Wp9YA3hSjAuFywLoGLTExcL0HevIyPFpkYUCZgHo4mNBdl1ADWCRheyw4PC64mJh+oBwGsAiC9lhARC+vrjGEdeF0wCuUossZIUFh0cXFwtHTl8SKtcENpSLuabsDN/sj2KMDx5eunbrxgcbNmwwfPl3dLp449m1ZZGFwowLkIWoaxgvPbtotH72nvPXr0Iz0+hY4/xDk0F969pDkYVCZAGcfBRxhZJ+R8PWN1/1m26mLPD45b80GVX/y1quSWQheywUyRbC6oo9fLaj9spLq/Zi5sVLQfa7ty9eEuNCAbKwj5oN7jNc23HuF68h2wnt9dcs9pnGnTsDF97Hj+Rv31gSWSg4FmSL92VHeBnnZ/2/LLOUQdujN5lMP4y6jun1Jr3+t9yFXWWslRqWRRYKjgWZ7BA1Esgl3TpXVmZ/jFn4sXq0cgvzph65f5f+StkeUxnPrtwcFlkoPBZk+w4cWmaXKFzSVL3ynLD/XG1/fufpY+aVqqpd+ipk+l1Ve0xVfJNfnBRZKDwWZJOyCxR1ZNFqfVL+wkWMbX7+mPz5vmn79u0lJabdJchMH5RYTSVB1j8uslBAuSbefMTy+NL47MrxFx3EPGFDrrai7sGnJSYry4KpxFqk1+u3r7JQ9/VfRRYKKTCFVJy7WVLCPK7swCywYcAfF3aHxYXmr/8oslC4gen8n19GxrwLD1YTfvwGe9Lv8l8I2LkfP2wRc00FGxdkt977ld+sJnz6tOgzeNytD1zw2/s3F/7f3vm7xnFEcXxgC+EEgQ+ejZsEDGImGCUkU6SIwWaK4QYZYaZb0Aoc1obAahsRUsigFMLNKf9CMHFx4oIqy6pOTUqpl0L+m7w3++N+6GxzIEN28h7o9nZ297Ts+8yb77w33B0PL093OC5EysJfw7stC6QX9u7ff4Pbr757co2FNxdjPP/46ur4Z2YhRhZWjt593avtEdpGeLP9iDbPN3pTtn12XsmF304vT39hFiJkYWVnWHz5cfvD7563yvHV8eXJEbMQHwsrry765rMPm305PBzPTCKOTq6OmIXoWFgZ7Zztb996Lwg/mu/Xd8/Ho/kfQD+5nTMLsbFANOwO1cvf5RfzdveHLT84OxxfI4Hstd/fYBZiYwHt4O2vF8PVvXtaf/OE7Futf/KDwdnF4fn4YPSedU2yf88xC5HkmmbyTrf/Wd/b7PfXB2T7/X5fbb7rryaPP5QY/3uwxSzEFhfa4eJgYqPRx9dBr7242YGCWfjvsLD8d4PL/ou1m7vBTWahwywIsTV4dnN3+Jyd1GUWhHvw4E9+tsxCZc8Gd6qBIlvwT+18g7TsiXhZEJ8/XX2INKhyAQowu+8AJmcZpbzIaZ9mp84vumnv2HFdYgFnFA9X72wv8qWcY0FPnZRC6ZWwhRC9cJZedNNFjx33Cez1DX73/bXvg157mkxEpBGuHgmkmuvmE4cXIIUIqWznYG7kcMUUM3iOZO91Ji6QWKC+bRWNARYKSNCDJYBqWCjpgMPDUNQtUJU0dCE8JABCovsNHjdIDKgmnuAWPw1Kdl+HWNDkdV+InLynXFkKneI4ULOQQ56BxTBhmi5e1EdKihSAqiDDBshEqfCjnDATFhRkuWL3dYkFTcowS7Ffy8QQGkoGQrJUKeexYyuMCNQmCo+asRktVGChOtV44/GMHKgxXEd6A1KSHWGXndgNFjAKyAR0LRjRs7WDe1LK4PGWBStRHgQG3CwLGlSIB86otLousBA2YZetM2OEI5+aombBT40RKfqWBgLV+tPgeKBRPMzEBcBZQ2lzEUaaZh5SscDWHRZCJsGg6FOWPId/QSmqNq8Q9N+EhaAs8yAxKhZo6pDi9R4FgmrEoq1YCIKCrSssVB28SivaaiZIO2423+in544T/7aEOEmNcmaKacMsla1DLEhgh3XGHn/iHza3BT9jjgtszAIbs7AcC05nYqnT2VWxspDTPHOZ+1RcfIiUBUfFqKVmGI6TCZGykKbtpDPkn4XVtEIlMyLLqlb0fCpMUa9ooUs4METJQtvJHSiF73HAAC2ghERBUpenrYMUoAiVSypIZJxx7np+YaEZqj6SYEg1KgdLRUedCgCpUmqiegWlmT21Ki1MWAXBLERpWlkoM5SDoBWVHyCkmyGnAEC1zIxYkElWlabqRDazECkLpAkoIPggIGsWJK1fkFVdG5oit1BpoIDjQpyWYc/PcWAIFezCNyyEtS+IgC/xNSMWSC2YJK2u4ecWpZUAYYELqkTwGB5CBRJfdVAKFqWEL21V5G6E5mTqwRaZzSxxbpe404qVmTyCayCQkPFD+99bgMBx7ZutWcnGWUe2qQEkXvsXN7tqe6NFhSsAAAAASUVORK5CYII=" alt="firstmatch-inner-join" title="firstmatch-inner-join"></p> <p>Since Germany has two big cities (in this diagram), it will be put into the query output twice. This is not correct, <code class="fixed" style="white-space:pre-wrap">SELECT ... FROM Country</code> should not produce the same country record twice. The <code>FirstMatch</code> strategy avoids the production of duplicates by short-cutting execution as soon as the first genuine match is found:</p> <p><img src="data:image/png;base64,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" alt="firstmatch-firstmatch" title="firstmatch-firstmatch"></p> <p>Note that the short-cutting has to take place after "Using where" has been applied. It would have been wrong to short-cut after we found Trier.</p> <h2 class="anchored_heading" id="firstmatch-in-action">FirstMatch in action</h2> <p>The <code>EXPLAIN</code> for the above query will look as follows:</p> <pre class="fixed wrap" data-language="sql">MariaDB [world]&gt; explain select * from Country where Country.code IN 
  (select City.Country from City where City.Population &gt; 1*1000*1000)
    and Country.continent='Europe';
+----+-------------+---------+------+--------------------+-----------+---------+--------------------+------+----------------------------------+
| id | select_type | table   | type | possible_keys      | key       | key_len | ref                | rows | Extra                            |
+----+-------------+---------+------+--------------------+-----------+---------+--------------------+------+----------------------------------+
|  1 | PRIMARY     | Country | ref  | PRIMARY,continent  | continent | 17      | const              |   60 | Using index condition            |
|  1 | PRIMARY     | City    | ref  | Population,Country | Country   | 3       | world.Country.Code |   18 | Using where; FirstMatch(Country) |
+----+-------------+---------+------+--------------------+-----------+---------+--------------------+------+----------------------------------+
2 rows in set (0.00 sec)

</pre>
<p><code class="fixed" style="white-space:pre-wrap">FirstMatch(Country)</code> in the Extra column means that <em>as soon as we have produced one matching record combination, short-cut the execution and jump back to the Country</em> table.</p> <p><code>FirstMatch</code>'s query plan is very similar to one you would get in MySQL:</p> <pre class="fixed wrap" data-language="sql">MySQL [world]&gt; explain select * from Country  where Country.code IN 
  (select City.Country from City where City.Population &gt; 1*1000*1000) 
   and Country.continent='Europe';
+----+--------------------+---------+----------------+--------------------+-----------+---------+-------+------+------------------------------------+
| id | select_type        | table   | type           | possible_keys      | key       | key_len | ref   | rows | Extra                              |
+----+--------------------+---------+----------------+--------------------+-----------+---------+-------+------+------------------------------------+
|  1 | PRIMARY            | Country | ref            | continent          | continent | 17      | const |   60 | Using index condition; Using where |
|  2 | DEPENDENT SUBQUERY | City    | index_subquery | Population,Country | Country   | 3       | func  |   18 | Using where                        |
+----+--------------------+---------+----------------+--------------------+-----------+---------+-------+------+------------------------------------+
2 rows in set (0.01 sec)
</pre>
<p>and these two particular query plans will execute in the same time. </p> <h2 class="anchored_heading" id="difference-between-firstmatch-and-in-exists">Difference between FirstMatch and IN-&gt;EXISTS</h2> <p>The general idea behind the <code>FirstMatch</code> strategy is the same as the one behind the <code>IN-&gt;EXISTS</code> transformation, however, <code>FirstMatch</code> has several advantages:</p> <ul start="1"><li>Equality propagation works across semi-join bounds, but not subquery bounds. Therefore, converting a subquery to semi-join and using <code>FirstMatch</code> can still give a better execution plan. (TODO example) </li></ul> <ul start="1"><li>There is only one way to apply the <code>IN-&gt;EXISTS</code> strategy and MySQL will do it unconditionally. With <code>FirstMatch</code>, the optimizer can make a choice between whether it should run the <code>FirstMatch</code> strategy as soon as all tables used in the subquery are in the join prefix, or at some later point in time. (TODO: example) </li></ul> <h2 class="anchored_heading" id="firstmatch-factsheet">FirstMatch factsheet</h2> <ul start="1">
<li>The <code>FirstMatch</code> strategy works by executing the subquery and short-cutting its execution as soon as the first match is found. </li>
<li>This means, subquery tables must be after all of the parent select's tables that are referred from the subquery predicate. </li>
<li>
<code>EXPLAIN</code> shows <code>FirstMatch</code> as "<code>FirstMatch(tableN)</code>". </li>
<li>The strategy can handle correlated subqueries. </li>
<li>But it cannot be applied if the subquery has meaningful <code>GROUP BY</code> and/or aggregate functions. </li>
<li>Use of the <code>FirstMatch</code> strategy is controlled with the <code class="fixed" style="white-space:pre-wrap">firstmatch=on|off</code> flag in the <a href="../server-system-variables/index.html#optimizer_switch">optimizer_switch</a> variable. </li>
</ul> <h2 class="anchored_heading" id="see-also">See Also</h2> <ul start="1"><li>
<a href="../semi-join-subquery-optimizations/index.html">Semi-join subquery optimizations</a> </li></ul> <p>In-depth material:</p> <ul start="1"><li><a href="http://forge.mysql.com/worklog/task.php?id=3750">WL#3750: initial specification for FirstMatch</a></li></ul> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2023 MariaDB<br>Licensed under the Creative Commons Attribution 3.0 Unported License and the GNU Free Documentation License.<br>
    <a href="https://mariadb.com/kb/en/firstmatch-strategy/" class="_attribution-link">https://mariadb.com/kb/en/firstmatch-strategy/</a>
  </p>
</div>
