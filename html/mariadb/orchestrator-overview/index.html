<h1>Orchestrator Overview</h1> <div> <div class="node creole"> <div class="answer formatted"> <p>Orchestrator is a MySQL and MariaDB high availability and replication management tool. It is released by Shlomi Noach under the terms of the Apache License, version 2.0.</p> <p>Orchestrator provides automation for MariaDB replication in the following ways:</p> <ul start="1">
<li>It can be used to perform certain operations, like repairing broken replication or moving a replica from one master to another. These operations can be requested using CLI commands, or via the GUI provided with Orchestrator. The actual commands sent to MariaDB are automated by Orchestrator, and the user doesn't have to worry about the details. </li>
<li>Orchestrator can also automatically perform a failover in case a master crashes or is unreachable by its replicas. If that is the case, Orchestrator will promote one of the replicas to a master. The replica to promote is chosen based on several criteria, like the server versions, the <a href="../binary-log/index.html">binary log</a> formats in use and the datacenters locations. </li>
</ul> <p>Note that, if we don't want to use Orchestrator to automate operations, we can still use it as a dynamic inventory. Other tools can use it to obtain a list of existing MariaDB servers via its REST API or CLI commands.</p> <p>Orchestrator has several big users, listed in the documentation <a href="https://github.com/openark/orchestrator/blob/master/docs/users.md">Users</a> page. It is also included in the PMM monitoring solution.</p> <p>To install Orchestrator, see:</p> <ul start="1">
<li>The <a href="https://github.com/openark/orchestrator/blob/master/docs/install.md">install.md</a> for a manual installation; </li>
<li>The links in <a href="https://github.com/openark/orchestrator/blob/master/README.md">README.md</a>, to install Orchestrator using automation tools. </li>
</ul>  <h2 class="anchored_heading" id="supported-topologies">Supported Topologies</h2> <p>Currently, Orchestrator fully supports MariaDB <a href="../gtid/index.html">GTID</a>, <a href="../replication/index.html">replication</a>, and <a href="../semisynchronous-replication/index.html">semi-synchronous replication</a>. While Orchestrator does not support Galera specific logic, it works with Galera clusters. For details, see <a href="https://github.com/openark/orchestrator/blob/master/docs/supported-topologies-and-versions.md">Supported Topologies and Versions</a> in Orchestrator documentation.</p> <h2 class="anchored_heading" id="architecture">Architecture</h2> <p>Orchestrator consists of a single executable called <code>orchestrator</code>. This is a process that periodically connects to the target servers. It will run SQL queries against target servers, so it needs a user with proper permissions. When the process is running, a GUI is available via a web browser, at the URL '<a href="#">https://localhost:3000'</a>. It also exposes a REST API (see <a href="https://github.com/openark/orchestrator/blob/master/docs/using-the-web-api.md">Using the web API</a> in the Orchestrator documentation).</p> <p>Orchestrator expects to find a JSON configuration file called <code>orchestrator.conf.json</code>, in <code>/etc</code>.</p> <p>A database is used to store the configuration and the state of the target servers. By default, this is done using built-in SQLite. However, it is possible to use an external MariaDB or MySQL server instance.</p> <p>If a cluster of Orchestrator instances is running, only one central database is used. One Orchestrator node is active, while the others are passive and are only used for failover. If the active node crashes or becomes unreachable, one of the other nodes becomes the active instance. The <code>active_node</code> table shows which node is active. Nodes communicate between them using the Raft protocol.</p> <h2 class="anchored_heading" id="cli-examples">CLI Examples</h2> <p>As mentioned, Orchestrator can be used from the command-line. Here you can find some examples.</p> <p>List clusters:</p> <pre class="fixed" data-language="sql">orchestrator -c clusters
</pre>
<p>Discover a specified instance and add it to the known topology:</p> <pre class="fixed" data-language="sql">orchestrator -c discover -i &lt;host&gt;:&lt;port&gt;
</pre>
<p>Forget about an instance:</p> <pre class="fixed" data-language="sql">orchestrator -c topology -i &lt;host&gt;:&lt;port&gt;
</pre>
<p>Move a replica to a different master:</p> <pre class="fixed" data-language="sql">orchestrator -c move-up -i &lt;replica-host&gt;:&lt;replica-port&gt; -d &lt;master-host&gt;:&lt;master-port&gt;
</pre>
<p>Move a replica up, so that it becomes a "sibling" of its master:</p> <pre class="fixed" data-language="sql">orchestrator -c move-up -i &lt;replica-host&gt;:&lt;replica-port&gt;
</pre>
<p>Move a replica down, so that it becomes a replica of its"sibling":</p> <pre class="fixed" data-language="sql">orchestrator -c move-below -i &lt;replica-host&gt;:&lt;replica-port&gt; -d &lt;master-host&gt;:&lt;master-port&gt;
</pre>
<p>Make a node read-only:</p> <pre class="fixed" data-language="sql">orchestrator -c set-read-only -i &lt;host&gt;:&lt;port&gt;
</pre>
<p>Make a node writeable:</p> <pre class="fixed" data-language="sql">orchestrator -c set-writeable -i &lt;host&gt;:&lt;port&gt;
</pre>
<p>The <code>--debug</code> and <code>--stack</code> options can be added to the above commands to make them more verbose.</p> <h2 class="anchored_heading" id="orchestrator-resources-and-references">Orchestrator Resources and References</h2> <ul start="1">
<li>
<a href="https://github.com/openark/orchestrator">Orchestrator on GitHub</a>. </li>
<li>
<a href="https://github.com/openark/orchestrator/tree/master/docs">Documentation</a>. </li>
<li>
<a href="https://raft.github.io/">Raft consensus protocol website</a>. </li>
</ul> <p>The <a href="https://github.com/openark/orchestrator/blob/master/README.md">README.md</a> file lists some related community projects, including modules to automate Orchestrator with <a href="../automated-mariadb-deployment-and-administration-puppet-and-mariadb/index.html">Puppet</a> and other technologies.</p> <p>On GitHub you can also find links to projects that allow the use of automation software to deploy and manage Orchestrator.</p> <hr> <p>Content initially contributed by <a href="https://vettabase.com/">Vettabase Ltd</a>.</p> </div>     </div> <div id="content_disclaimer" class="graybox"> Content reproduced on this site is the property of its respective owners, and this content is not reviewed in advance by MariaDB. The views, information and opinions expressed by this content do not necessarily represent those of MariaDB or any other party. </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2023 MariaDB<br>Licensed under the Creative Commons Attribution 3.0 Unported License and the GNU Free Documentation License.<br>
    <a href="https://mariadb.com/kb/en/orchestrator-overview/" class="_attribution-link">https://mariadb.com/kb/en/orchestrator-overview/</a>
  </p>
</div>
