<h1>Deno.FsFile</h1>
<div><div id="mainDoc">
<p>The Deno abstraction for reading and writing files.</p> <p>This is the most straight forward way of handling files within Deno and is recommended over using the discreet functions within the <code>Deno</code> namespace.</p> <pre data-language="typescript"><code><span>const</span> file = <span>await</span> <span>Deno</span>.<span>open</span>(<span>"/foo/bar.txt"</span>, { <span>read</span>: <span>true</span> });
<span>const</span> fileInfo = <span>await</span> file.<span>stat</span>();
<span>if</span> (fileInfo.<span>isFile</span>) {
  <span>const</span> buf = <span>new</span> <span>Uint8Array</span>(<span>100</span>);
  <span>const</span> numberOfBytesRead = <span>await</span> file.<span>read</span>(buf); <span>// 11 bytes</span>
  <span>const</span> text = <span>new</span> <span>TextDecoder</span>().<span>decode</span>(buf);  <span>// "hello world"</span>
}
file.<span>close</span>();
</code></pre> </div></div>
<pre data-language="typescript"><span>class</span> FsFile<span> <span>implements </span><span><a href="deno.reader.html">Reader</a></span><span>, </span><span><a href="deno.readersync.html">ReaderSync</a></span><span>, </span><span><a href="deno.writer.html">Writer</a></span><span>, </span><span><a href="deno.writersync.html">WriterSync</a></span><span>, </span><span><a href="deno.seeker.html">Seeker</a></span><span>, </span><span><a href="deno.seekersync.html">SeekerSync</a></span><span>, </span><span><a href="deno.closer.html">Closer</a></span></span> {<div>
<div><div>
<span>constructor</span>(<span>rid<span>: <span>number</span></span></span>);</div></div>
<div>
<div>
<span>readonly </span><span>readable</span><span>: <span><a href="readablestream.html">ReadableStream</a><span>&lt;<span>Uint8Array</span>&gt;</span></span>;</span>
</div>
<div>
<span>readonly </span><span>rid</span><span>: <span>number</span>;</span>
</div>
<div>
<span>readonly </span><span>writable</span><span>: <span><a href="writablestream.html">WritableStream</a><span>&lt;<span>Uint8Array</span>&gt;</span></span>;</span>
</div>

<div>
<span>close</span>()<span>: <span>void</span></span>;</div>
<div>
<span>read</span>(<span>p<span>: <span>Uint8Array</span></span></span>)<span>: <span>Promise<span>&lt;<span><span>number</span><span> | </span><span>null</span></span>&gt;</span></span></span>;</div>
<div>
<span>readSync</span>(<span>p<span>: <span>Uint8Array</span></span></span>)<span>: <span><span>number</span><span> | </span><span>null</span></span></span>;</div>
<div>
<span>seek</span>(<span>offset<span>: <span>number</span></span></span><span>, </span><span>whence<span>: <span><a href="deno.seekmode.html">SeekMode</a></span></span></span>)<span>: <span>Promise<span>&lt;<span>number</span>&gt;</span></span></span>;</div>
<div>
<span>seekSync</span>(<span>offset<span>: <span>number</span></span></span><span>, </span><span>whence<span>: <span><a href="deno.seekmode.html">SeekMode</a></span></span></span>)<span>: <span>number</span></span>;</div>
<div>
<span>stat</span>()<span>: <span>Promise<span>&lt;<span><a href="deno.fileinfo.html">FileInfo</a></span>&gt;</span></span></span>;</div>
<div>
<span>statSync</span>()<span>: <span><a href="deno.fileinfo.html">FileInfo</a></span></span>;</div>
<div>
<span>truncate</span>(<span>len?<span>: <span>number</span></span></span>)<span>: <span>Promise<span>&lt;<span>void</span>&gt;</span></span></span>;</div>
<div>
<span>truncateSync</span>(<span>len?<span>: <span>number</span></span></span>)<span>: <span>void</span></span>;</div>
<div>
<span>write</span>(<span>p<span>: <span>Uint8Array</span></span></span>)<span>: <span>Promise<span>&lt;<span>number</span>&gt;</span></span></span>;</div>
<div>
<span>writeSync</span>(<span>p<span>: <span>Uint8Array</span></span></span>)<span>: <span>number</span></span>;</div>
</div>
</div>}</pre>
<div>
<div>
<h2 id="Implements">Implements</h2>
<div id="i_0"><div><blockquote><code><span><a href="deno.reader.html">Reader</a></span></code></blockquote></div></div>
<div id="i_1"><div><blockquote><code><span><a href="deno.readersync.html">ReaderSync</a></span></code></blockquote></div></div>
<div id="i_2"><div><blockquote><code><span><a href="deno.writer.html">Writer</a></span></code></blockquote></div></div>
<div id="i_3"><div><blockquote><code><span><a href="deno.writersync.html">WriterSync</a></span></code></blockquote></div></div>
<div id="i_4"><div><blockquote><code><span><a href="deno.seeker.html">Seeker</a></span></code></blockquote></div></div>
<div id="i_5"><div><blockquote><code><span><a href="deno.seekersync.html">SeekerSync</a></span></code></blockquote></div></div>
<div id="i_6"><div><blockquote><code><span><a href="deno.closer.html">Closer</a></span></code></blockquote></div></div>
</div>
<div>
<h2 id="Constructors">Constructors</h2>
<div id="ctor_0"><div>
<blockquote><code><span>new </span>FsFile(<span>rid<span>: <span>number</span></span></span>)</code></blockquote>
<div><div>
<p>The constructor which takes a resource ID. Generally <code>FsFile</code> should not be constructed directly. Instead use <a href="deno.html#open"><code>Deno.open</code></a> or <a href="deno.html#openSync"><code>Deno.openSync</code></a> to create a new instance of <code>FsFile</code>.</p> </div></div>
</div></div>
</div>
<h2 id="Properties">Properties</h2>
<div id="readable"><div>
<blockquote><code>readable<span>: <span><a href="readablestream.html">ReadableStream</a><span>&lt;<span>Uint8Array</span>&gt;</span></span></span></code></blockquote>
<div><div>
<p>A <a href="readablestream.html"><code>ReadableStream</code></a> instance representing to the byte contents of the file. This makes it easy to interoperate with other web streams based APIs.</p> <pre data-language="typescript"><code><span>const</span> file = <span>await</span> <span>Deno</span>.<span>open</span>(<span>"my_file.txt"</span>, { <span>read</span>: <span>true</span> });
<span>const</span> decoder = <span>new</span> <span>TextDecoder</span>();
<span>for</span> <span>await</span> (<span>const</span> chunk <span>of</span> file.<span>readable</span>) {
  <span>console</span>.<span>log</span>(decoder.<span>decode</span>(chunk));
}
file.<span>close</span>();
</code></pre> </div></div>
</div></div>
<div id="rid"><div>
<blockquote><code>rid<span>: <span>number</span></span></code></blockquote>
<div><div>
<p>The resource ID associated with the file instance. The resource ID should be considered an opaque reference to resource.</p> </div></div>
</div></div>
<div id="writable"><div>
<blockquote><code>writable<span>: <span><a href="writablestream.html">WritableStream</a><span>&lt;<span>Uint8Array</span>&gt;</span></span></span></code></blockquote>
<div><div>
<p>A <a href="writablestream.html"><code>WritableStream</code></a> instance to write the contents of the file. This makes it easy to interoperate with other web streams based APIs.</p> <pre data-language="typescript"><code><span>const</span> items = [<span>"hello"</span>, <span>"world"</span>];
<span>const</span> file = <span>await</span> <span>Deno</span>.<span>open</span>(<span>"my_file.txt"</span>, { <span>write</span>: <span>true</span> });
<span>const</span> encoder = <span>new</span> <span>TextEncoder</span>();
<span>const</span> writer = file.<span>writable</span>.<span>getWriter</span>();
<span>for</span> (<span>const</span> item <span>of</span> items) {
  <span>await</span> writer.<span>write</span>(encoder.<span>encode</span>(item));
}
file.<span>close</span>();
</code></pre> </div></div>
</div></div>
<h2 id="Methods">Methods</h2>
<div id="close"><div>
<blockquote><code>close()<span>: <span>void</span></span></code></blockquote>
<div><div>
<p>Close the file. Closing a file when you are finished with it is important to avoid leaking resources.</p> <pre data-language="typescript"><code><span>const</span> file = <span>await</span> <span>Deno</span>.<span>open</span>(<span>"my_file.txt"</span>);
<span>// do work with "file" object</span>
file.<span>close</span>();
</code></pre> </div></div>
</div></div>
<div id="read"><div>
<blockquote><code>read(<span>p<span>: <span>Uint8Array</span></span></span>)<span>: <span>Promise<span>&lt;<span><span>number</span><span> | </span><span>null</span></span>&gt;</span></span></span></code></blockquote>
<div><div>
<p>Read the file into an array buffer (<code>p</code>).</p> <p>Resolves to either the number of bytes read during the operation or EOF (<code>null</code>) if there was nothing more to read.</p> <p>It is possible for a read to successfully return with <code>0</code> bytes. This does not indicate EOF.</p> <p><strong>It is not guaranteed that the full buffer will be read in a single call.</strong></p> <pre data-language="typescript"><code><span>// if "/foo/bar.txt" contains the text "hello world":</span>
<span>const</span> file = <span>await</span> <span>Deno</span>.<span>open</span>(<span>"/foo/bar.txt"</span>);
<span>const</span> buf = <span>new</span> <span>Uint8Array</span>(<span>100</span>);
<span>const</span> numberOfBytesRead = <span>await</span> file.<span>read</span>(buf); <span>// 11 bytes</span>
<span>const</span> text = <span>new</span> <span>TextDecoder</span>().<span>decode</span>(buf);  <span>// "hello world"</span>
file.<span>close</span>();
</code></pre> </div></div>
</div></div>
<div id="readSync"><div>
<blockquote><code>readSync(<span>p<span>: <span>Uint8Array</span></span></span>)<span>: <span><span>number</span><span> | </span><span>null</span></span></span></code></blockquote>
<div><div>
<p>Synchronously read from the file into an array buffer (<code>p</code>).</p> <p>Returns either the number of bytes read during the operation or EOF (<code>null</code>) if there was nothing more to read.</p> <p>It is possible for a read to successfully return with <code>0</code> bytes. This does not indicate EOF.</p> <p><strong>It is not guaranteed that the full buffer will be read in a single call.</strong></p> <pre data-language="typescript"><code><span>// if "/foo/bar.txt" contains the text "hello world":</span>
<span>const</span> file = <span>Deno</span>.<span>openSync</span>(<span>"/foo/bar.txt"</span>);
<span>const</span> buf = <span>new</span> <span>Uint8Array</span>(<span>100</span>);
<span>const</span> numberOfBytesRead = file.<span>readSync</span>(buf); <span>// 11 bytes</span>
<span>const</span> text = <span>new</span> <span>TextDecoder</span>().<span>decode</span>(buf);  <span>// "hello world"</span>
file.<span>close</span>();
</code></pre> </div></div>
</div></div>
<div id="seek"><div>
<blockquote><code>seek(<span>offset<span>: <span>number</span></span></span><span>, </span><span>whence<span>: <span><a href="deno.seekmode.html">SeekMode</a></span></span></span>)<span>: <span>Promise<span>&lt;<span>number</span>&gt;</span></span></span></code></blockquote>
<div><div>
<p>Seek to the given <code>offset</code> under mode given by <code>whence</code>. The call resolves to the new position within the resource (bytes from the start).</p> <pre data-language="typescript"><code><span>// Given file pointing to file with "Hello world", which is 11 bytes long:</span>
<span>const</span> file = <span>await</span> <span>Deno</span>.<span>open</span>(
  <span>"hello.txt"</span>,
  { <span>read</span>: <span>true</span>, <span>write</span>: <span>true</span>, <span>truncate</span>: <span>true</span>, <span>create</span>: <span>true</span> },
);
<span>await</span> file.<span>write</span>(<span>new</span> <span>TextEncoder</span>().<span>encode</span>(<span>"Hello world"</span>));

<span>// advance cursor 6 bytes</span>
<span>const</span> cursorPosition = <span>await</span> file.<span>seek</span>(<span>6</span>, <span>Deno</span>.<span>SeekMode</span>.<span>Start</span>);
<span>console</span>.<span>log</span>(cursorPosition);  <span>// 6</span>
<span>const</span> buf = <span>new</span> <span>Uint8Array</span>(<span>100</span>);
<span>await</span> file.<span>read</span>(buf);
<span>console</span>.<span>log</span>(<span>new</span> <span>TextDecoder</span>().<span>decode</span>(buf)); <span>// "world"</span>
file.<span>close</span>();
</code></pre> <p>The seek modes work as follows:</p> <pre data-language="typescript"><code><span>// Given file.rid pointing to file with "Hello world", which is 11 bytes long:</span>
<span>const</span> file = <span>await</span> <span>Deno</span>.<span>open</span>(
  <span>"hello.txt"</span>,
  { <span>read</span>: <span>true</span>, <span>write</span>: <span>true</span>, <span>truncate</span>: <span>true</span>, <span>create</span>: <span>true</span> },
);
<span>await</span> file.<span>write</span>(<span>new</span> <span>TextEncoder</span>().<span>encode</span>(<span>"Hello world"</span>));

<span>// Seek 6 bytes from the start of the file</span>
<span>console</span>.<span>log</span>(<span>await</span> file.<span>seek</span>(<span>6</span>, <span>Deno</span>.<span>SeekMode</span>.<span>Start</span>)); <span>// "6"</span>
<span>// Seek 2 more bytes from the current position</span>
<span>console</span>.<span>log</span>(<span>await</span> file.<span>seek</span>(<span>2</span>, <span>Deno</span>.<span>SeekMode</span>.<span>Current</span>)); <span>// "8"</span>
<span>// Seek backwards 2 bytes from the end of the file</span>
<span>console</span>.<span>log</span>(<span>await</span> file.<span>seek</span>(-<span>2</span>, <span>Deno</span>.<span>SeekMode</span>.<span>End</span>)); <span>// "9" (e.g. 11-2)</span>
</code></pre> </div></div>
</div></div>
<div id="seekSync"><div>
<blockquote><code>seekSync(<span>offset<span>: <span>number</span></span></span><span>, </span><span>whence<span>: <span><a href="deno.seekmode.html">SeekMode</a></span></span></span>)<span>: <span>number</span></span></code></blockquote>
<div><div>
<p>Synchronously seek to the given <code>offset</code> under mode given by <code>whence</code>. The new position within the resource (bytes from the start) is returned.</p> <pre data-language="typescript"><code><span>const</span> file = <span>Deno</span>.<span>openSync</span>(
  <span>"hello.txt"</span>,
  { <span>read</span>: <span>true</span>, <span>write</span>: <span>true</span>, <span>truncate</span>: <span>true</span>, <span>create</span>: <span>true</span> },
);
file.<span>writeSync</span>(<span>new</span> <span>TextEncoder</span>().<span>encode</span>(<span>"Hello world"</span>));

<span>// advance cursor 6 bytes</span>
<span>const</span> cursorPosition = file.<span>seekSync</span>(<span>6</span>, <span>Deno</span>.<span>SeekMode</span>.<span>Start</span>);
<span>console</span>.<span>log</span>(cursorPosition);  <span>// 6</span>
<span>const</span> buf = <span>new</span> <span>Uint8Array</span>(<span>100</span>);
file.<span>readSync</span>(buf);
<span>console</span>.<span>log</span>(<span>new</span> <span>TextDecoder</span>().<span>decode</span>(buf)); <span>// "world"</span>
file.<span>close</span>();
</code></pre> <p>The seek modes work as follows:</p> <pre data-language="typescript"><code><span>// Given file.rid pointing to file with "Hello world", which is 11 bytes long:</span>
<span>const</span> file = <span>Deno</span>.<span>openSync</span>(
  <span>"hello.txt"</span>,
  { <span>read</span>: <span>true</span>, <span>write</span>: <span>true</span>, <span>truncate</span>: <span>true</span>, <span>create</span>: <span>true</span> },
);
file.<span>writeSync</span>(<span>new</span> <span>TextEncoder</span>().<span>encode</span>(<span>"Hello world"</span>));

<span>// Seek 6 bytes from the start of the file</span>
<span>console</span>.<span>log</span>(file.<span>seekSync</span>(<span>6</span>, <span>Deno</span>.<span>SeekMode</span>.<span>Start</span>)); <span>// "6"</span>
<span>// Seek 2 more bytes from the current position</span>
<span>console</span>.<span>log</span>(file.<span>seekSync</span>(<span>2</span>, <span>Deno</span>.<span>SeekMode</span>.<span>Current</span>)); <span>// "8"</span>
<span>// Seek backwards 2 bytes from the end of the file</span>
<span>console</span>.<span>log</span>(file.<span>seekSync</span>(-<span>2</span>, <span>Deno</span>.<span>SeekMode</span>.<span>End</span>)); <span>// "9" (e.g. 11-2)</span>
file.<span>close</span>();
</code></pre> </div></div>
</div></div>
<div id="stat"><div>
<blockquote><code>stat()<span>: <span>Promise<span>&lt;<span><a href="deno.fileinfo.html">FileInfo</a></span>&gt;</span></span></span></code></blockquote>
<div><div>
<p>Resolves to a <a href="deno.html#FileInfo"><code>Deno.FileInfo</code></a> for the file.</p> <pre data-language="typescript"><code><span>import</span> { assert } <span>from</span> <span>"https://deno.land/std/testing/asserts.ts"</span>;

<span>const</span> file = <span>await</span> <span>Deno</span>.<span>open</span>(<span>"hello.txt"</span>);
<span>const</span> fileInfo = <span>await</span> file.<span>stat</span>();
<span>assert</span>(fileInfo.<span>isFile</span>);
file.<span>close</span>();
</code></pre> </div></div>
</div></div>
<div id="statSync"><div>
<blockquote><code>statSync()<span>: <span><a href="deno.fileinfo.html">FileInfo</a></span></span></code></blockquote>
<div><div>
<p>Synchronously returns a <a href="deno.html#FileInfo"><code>Deno.FileInfo</code></a> for the file.</p> <pre data-language="typescript"><code><span>import</span> { assert } <span>from</span> <span>"https://deno.land/std/testing/asserts.ts"</span>;

<span>const</span> file = <span>Deno</span>.<span>openSync</span>(<span>"hello.txt"</span>)
<span>const</span> fileInfo = file.<span>statSync</span>();
<span>assert</span>(fileInfo.<span>isFile</span>);
file.<span>close</span>();
</code></pre> </div></div>
</div></div>
<div id="truncate"><div>
<blockquote><code>truncate(<span>len?<span>: <span>number</span></span></span>)<span>: <span>Promise<span>&lt;<span>void</span>&gt;</span></span></span></code></blockquote>
<div><div>
<p>Truncates (or extends) the file to reach the specified <code>len</code>. If <code>len</code> is not specified, then the entire file contents are truncated.</p> <h3>Truncate the entire file</h3> <pre data-language="typescript"><code><span>const</span> file = <span>await</span> <span>Deno</span>.<span>open</span>(<span>"my_file.txt"</span>, { <span>write</span>: <span>true</span> });
<span>await</span> file.<span>truncate</span>();
file.<span>close</span>();
</code></pre> <h3>Truncate part of the file</h3> <pre data-language="typescript"><code><span>// if "my_file.txt" contains the text "hello world":</span>
<span>const</span> file = <span>await</span> <span>Deno</span>.<span>open</span>(<span>"my_file.txt"</span>, { <span>write</span>: <span>true</span> });
<span>await</span> file.<span>truncate</span>(<span>7</span>);
<span>const</span> buf = <span>new</span> <span>Uint8Array</span>(<span>100</span>);
<span>await</span> file.<span>read</span>(buf);
<span>const</span> text = <span>new</span> <span>TextDecoder</span>().<span>decode</span>(buf); <span>// "hello w"</span>
file.<span>close</span>();
</code></pre> </div></div>
</div></div>
<div id="truncateSync"><div>
<blockquote><code>truncateSync(<span>len?<span>: <span>number</span></span></span>)<span>: <span>void</span></span></code></blockquote>
<div><div>
<p>Synchronously truncates (or extends) the file to reach the specified <code>len</code>. If <code>len</code> is not specified, then the entire file contents are truncated.</p> <h3>Truncate the entire file</h3> <pre data-language="typescript"><code><span>const</span> file = <span>Deno</span>.<span>openSync</span>(<span>"my_file.txt"</span>, { <span>write</span>: <span>true</span> });
file.<span>truncateSync</span>();
file.<span>close</span>();
</code></pre> <h3>Truncate part of the file</h3> <pre data-language="typescript"><code><span>// if "my_file.txt" contains the text "hello world":</span>
<span>const</span> file = <span>Deno</span>.<span>openSync</span>(<span>"my_file.txt"</span>, { <span>write</span>: <span>true</span> });
file.<span>truncateSync</span>(<span>7</span>);
<span>const</span> buf = <span>new</span> <span>Uint8Array</span>(<span>100</span>);
file.<span>readSync</span>(buf);
<span>const</span> text = <span>new</span> <span>TextDecoder</span>().<span>decode</span>(buf); <span>// "hello w"</span>
file.<span>close</span>();
</code></pre> </div></div>
</div></div>
<div id="write"><div>
<blockquote><code>write(<span>p<span>: <span>Uint8Array</span></span></span>)<span>: <span>Promise<span>&lt;<span>number</span>&gt;</span></span></span></code></blockquote>
<div><div>
<p>Write the contents of the array buffer (<code>p</code>) to the file.</p> <p>Resolves to the number of bytes written.</p> <p><strong>It is not guaranteed that the full buffer will be written in a single call.</strong></p> <pre data-language="typescript"><code><span>const</span> encoder = <span>new</span> <span>TextEncoder</span>();
<span>const</span> data = encoder.<span>encode</span>(<span>"Hello world"</span>);
<span>const</span> file = <span>await</span> <span>Deno</span>.<span>open</span>(<span>"/foo/bar.txt"</span>, { <span>write</span>: <span>true</span> });
<span>const</span> bytesWritten = <span>await</span> file.<span>write</span>(data); <span>// 11</span>
file.<span>close</span>();
</code></pre> </div></div>
</div></div>
<div id="writeSync"><div>
<blockquote><code>writeSync(<span>p<span>: <span>Uint8Array</span></span></span>)<span>: <span>number</span></span></code></blockquote>
<div><div>
<p>Synchronously write the contents of the array buffer (<code>p</code>) to the file.</p> <p>Returns the number of bytes written.</p> <p><strong>It is not guaranteed that the full buffer will be written in a single call.</strong></p> <pre data-language="typescript"><code><span>const</span> encoder = <span>new</span> <span>TextEncoder</span>();
<span>const</span> data = encoder.<span>encode</span>(<span>"Hello world"</span>);
<span>const</span> file = <span>Deno</span>.<span>openSync</span>(<span>"/foo/bar.txt"</span>, { <span>write</span>: <span>true</span> });
<span>const</span> bytesWritten = file.<span>writeSync</span>(data); <span>// 11</span>
file.<span>close</span>();
</code></pre> </div></div>
</div></div>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2018–2022 the Deno authors<br>
    <a href="https://doc.deno.land/deno/stable/~/Deno.FsFile" class="_attribution-link">https://doc.deno.land/deno/stable/~/Deno.FsFile</a>
  </p>
</div>
