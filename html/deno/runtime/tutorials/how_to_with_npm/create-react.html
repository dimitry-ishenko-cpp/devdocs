<h1>Build a React app with create-vite</h1>
<div>
<p><a href="https://reactjs.org">React</a> is the most widely used JavaScript frontend library.</p> <p>In this tutorial we'll build a simple React app with Deno. The app will display a list of dinosaurs. When you click on one, it'll take you to a dinosaur page with more details. You can see the <a href="https://github.com/denoland/tutorial-with-react">finished app repo on GitHub</a></p> <p><img src="https://docs.deno.com/runtime/tutorials/images/how-to/react/react-dinosaur-app-demo.gif" alt="demo of the app"></p> <h2 id="create-a-react-app-with-vite-and-deno" tabindex="-1">Create a React app with Vite and Deno </h2> <p>This tutorial will use <a href="https://vitejs.dev/">create-vite</a> to quickly scaffold a Deno and React app. Vite is a build tool and development server for modern web projects. It pairs well with React and Deno, leveraging ES modules and allowing you to import React components directly.</p> <p>In your terminal run the following command to create a new React app with Vite using the typescript template:</p> <div class="relative">
<pre class="language-sh" tabindex="0"><code data-language="sh">deno run <span class="token parameter variable">-A</span> npm:create-vite@latest <span class="token parameter variable">--template</span> react-ts
</code></pre>   </div>
<p>When prompted, give your app a name, and <code data-language="ts">cd</code> into the newly created project directory. Then run the following command to install the dependencies:</p> <div class="relative">
<pre class="language-sh" tabindex="0"><code data-language="sh">deno <span class="token function">install</span>
</code></pre>   </div>
<p>Now you can serve your new react app by running:</p> <div class="relative">
<pre class="language-sh" tabindex="0"><code data-language="sh">deno task dev
</code></pre>   </div>
<p>This will start the Vite server, click the output link to localhost to see your app in the browser. If you have the <a href="../../getting_started/setup_your_environment.html#visual-studio-code">Deno extension for VSCode</a> installed, you may notice that the editor highlights some errors in the code. This is because the app created by Vite is designed with Node in mind and so uses conventions that Deno does not (such as 'sloppy imports' - importing modules without the file extension). Disable the Deno extension for this project to avoid these errors or try out the <a href="react.html">tutorial to build a React app with a deno.json file</a>.</p> <h2 id="add-a-backend" tabindex="-1">Add a backend </h2> <p>The next step is to add a backend API. We'll create a very simple API that returns information about dinosaurs.</p> <p>In the root of your new project, create an <code data-language="ts">api</code> folder. In that folder, create a <code data-language="ts">main.ts</code> file, which will run the server, and a <code data-language="ts">data.json</code>, which will contain the hard coded dinosaur data.</p> <p>Copy and paste <a href="https://github.com/denoland/tutorial-with-react/blob/main/api/data.json">this json file</a> into the <code data-language="ts">api/data.json</code> file.</p> <p>We're going to build out a simple API server with routes that return dinosaur information. We'll use the <a href="https://jsr.io/@oak/oak"><code data-language="ts">oak</code> middleware framework</a> and the <a href="https://jsr.io/@tajpouria/cors"><code data-language="ts">cors</code> middleware</a> to enable <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">CORS</a>.</p> <p>Use the <code data-language="ts">deno add</code> command to add the required dependencies to your project:</p> <div class="relative">
<pre class="language-shell" tabindex="0"><code data-language="shell">deno <span class="token function">add</span> jsr:@oak/oak jsr:@tajpouria/cors
</code></pre>   </div>
<p>Next, update <code data-language="ts">api/main.ts</code> to import the required modules and create a new <code data-language="ts">Router</code> instance to define some routes:</p> <div>
<div class="markdownBlockTitle">main.ts</div>
<div class="relative">
<pre class="language-ts" tabindex="0"><code data-language="ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> Application<span class="token punctuation">,</span> Router <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@oak/oak"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> oakCors <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@tajpouria/cors"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> data <span class="token keyword">from</span> <span class="token string">"./data.json"</span> <span class="token keyword">with</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">"json"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>   </div>
</div>
<p>After this, in the same file, we'll define two routes. One at <code data-language="ts">/api/dinosaurs</code> to return all the dinosaurs, and <code data-language="ts">/api/dinosaurs/:dinosaur</code> to return a specific dinosaur based on the name in the URL:</p> <div>
<div class="markdownBlockTitle">main.ts</div>
<div class="relative">
<pre class="language-ts" tabindex="0"><code data-language="ts">router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/api/dinosaurs"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  context<span class="token punctuation">.</span>response<span class="token punctuation">.</span>body <span class="token operator">=</span> data<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/api/dinosaurs/:dinosaur"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>context<span class="token operator">?.</span>params<span class="token operator">?.</span>dinosaur<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    context<span class="token punctuation">.</span>response<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token string">"No dinosaur name provided."</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> dinosaur <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    item<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> context<span class="token punctuation">.</span>params<span class="token punctuation">.</span>dinosaur<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  context<span class="token punctuation">.</span>response<span class="token punctuation">.</span>body <span class="token operator">=</span> dinosaur <span class="token operator">??</span> <span class="token string">"No dinosaur found."</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>   </div>
</div>
<p>Finally, at the bottom of the same file, create a new <code data-language="ts">Application</code> instance and attach the routes we just defined to the application using <code data-language="ts">app.use(router.routes())</code> and start the server listening on port 8000:</p> <div>
<div class="markdownBlockTitle">main.ts</div>
<div class="relative">
<pre class="language-ts" tabindex="0"><code data-language="ts"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Application</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">oakCors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">await</span> app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">{</span> port<span class="token operator">:</span> <span class="token number">8000</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>   </div>
</div>
<p>You can run the API server with <code data-language="ts">deno run --allow-env --allow-net api/main.ts</code>. We'll create a task to run this command in the background and update the dev task to run both the React app and the API server.</p> <p>In your <code data-language="ts">package.json</code> file, update the <code data-language="ts">scripts</code> field to include the following:</p> <div class="relative">
<pre class="language-jsonc" tabindex="0"><code data-language="jsonc"><span class="token punctuation">{</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"deno task dev:api &amp; deno task dev:vite"</span><span class="token punctuation">,</span>
    <span class="token property">"dev:api"</span><span class="token operator">:</span> <span class="token string">"deno run --allow-env --allow-net api/main.ts"</span><span class="token punctuation">,</span>
    <span class="token property">"dev:vite"</span><span class="token operator">:</span> <span class="token string">"deno run -A npm:vite"</span><span class="token punctuation">,</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre>   </div>
<p>If you run <code data-language="ts">deno task dev</code> now and visit <code data-language="ts">localhost:8000/api/dinosaurs</code>, in your browser you should see a JSON response of all of the dinosaurs.</p> <h2 id="update-the-entrypoint" tabindex="-1">Update the entrypoint </h2> <p>The entrypoint for the React app is in the <code data-language="ts">src/main.tsx</code> file. Ours is going to be very basic:</p> <div>
<div class="markdownBlockTitle">main.tsx</div>
<div class="relative">
<pre class="language-tsx" tabindex="0"><code data-language="tsx"><span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">"react-dom/client"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">"./App"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">"./index.css"</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"root"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HTMLElement<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>   </div>
</div>
<h2 id="add-a-router" tabindex="-1">Add a router </h2> <p>The app will have two routes: <code data-language="ts">/</code> and <code data-language="ts">/:dinosaur</code>.</p> <p>We'll use <a href="https://reactrouter.com/en/main"><code data-language="ts">react-router-dom</code></a> to build out some routing logic, so we'll need to add the <code data-language="ts">react-router-dom</code> dependency to your project. In the project root run:</p> <div class="relative">
<pre class="language-shell" tabindex="0"><code data-language="shell">deno <span class="token function">add</span> npm:react-router-dom
</code></pre>   </div>
<p>Update the <code data-language="ts">/src/App.tsx</code> file to import and use the <a href="https://reactrouter.com/en/main/router-components/browser-router"><code data-language="ts">BrowserRouter</code></a> component from <code data-language="ts">react-router-dom</code> and define the two routes:</p> <div>
<div class="markdownBlockTitle">App.tsx</div>
<div class="relative">
<pre class="language-tsx" tabindex="0"><code data-language="tsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Routes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-router-dom"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Index <span class="token keyword">from</span> <span class="token string">"./pages/index"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Dinosaur <span class="token keyword">from</span> <span class="token string">"./pages/Dinosaur"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">"./App.css"</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">BrowserRouter</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Routes</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span> <span class="token attr-name">element</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Index</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/:selectedDinosaur<span class="token punctuation">"</span></span> <span class="token attr-name">element</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Dinosaur</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Routes</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">BrowserRouter</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre>   </div>
</div>
<h3 id="proxy-to-forward-the-api-requests" tabindex="-1">Proxy to forward the api requests </h3> <p>Vite will be serving the application on port <code data-language="ts">5173</code> while our api is running on port <code data-language="ts">8000</code>. Therefore, we'll need to set up a proxy to allow the <code data-language="ts">api/</code>-paths to get to be reachable by the router. Overwrite <code data-language="ts">vite.config.ts</code> with the following to configure a proxy:</p> <div>
<div class="markdownBlockTitle">vite.config.ts</div>
<div class="relative">
<pre class="language-ts" tabindex="0"><code data-language="ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vite"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> react <span class="token keyword">from</span> <span class="token string">"@vitejs/plugin-react"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">react</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  server<span class="token operator">:</span> <span class="token punctuation">{</span>
    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">"/api"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        target<span class="token operator">:</span> <span class="token string">"http://localhost:8000"</span><span class="token punctuation">,</span>
        changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>   </div>
</div>
<h2 id="create-the-pages" tabindex="-1">Create the pages </h2> <p>We'll create two pages: <code data-language="ts">Index</code> and <code data-language="ts">Dinosaur</code>. The <code data-language="ts">Index</code> page will list all the dinosaurs and the <code data-language="ts">Dinosaur</code> page will show details of a specific dinosaur.</p> <p>Create a <code data-language="ts">pages</code> folder in the <code data-language="ts">src</code> directory and inside that create two files: <code data-language="ts">index.tsx</code> and <code data-language="ts">Dinosaur.tsx</code>.</p> <h3 id="types" tabindex="-1">Types </h3> <p>Both pages will use the <code data-language="ts">Dino</code> type to describe the shape of data they're expecting from the API, so let's create a <code data-language="ts">types.ts</code> file in the <code data-language="ts">src</code> directory:</p> <div>
<div class="markdownBlockTitle">types.ts</div>
<div class="relative">
<pre class="language-ts" tabindex="0"><code data-language="ts"><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">Dino</span> <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> description<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>   </div>
</div>
<h3 id="index.tsx" tabindex="-1">index.tsx </h3> <p>This page will fetch the list of dinosaurs from the API and render them as links:</p> <div>
<div class="markdownBlockTitle">index.tsx</div>
<div class="relative">
<pre class="language-tsx" tabindex="0"><code data-language="tsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-router-dom"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Dino <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types.ts"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>dinosaurs<span class="token punctuation">,</span> setDinosaurs<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span>Dino<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/api/dinosaurs/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> allDinosaurs <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> Dino<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token function">setDinosaurs</span><span class="token punctuation">(</span>allDinosaurs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Welcome to the Dinosaur app</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Click on a dinosaur below to learn more.</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>dinosaurs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dinosaur<span class="token operator">:</span> Dino<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span>
            <span class="token attr-name">to</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dinosaur<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span></span>
            <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>dinosaur<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span>
            <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dinosaur<span class="token punctuation">"</span></span>
          <span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>dinosaur<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>   </div>
</div>
<h3 id="dinosaur.tsx" tabindex="-1">Dinosaur.tsx </h3> <p>This page will fetch the details of a specific dinosaur from the API and render it in a paragraph:</p> <div>
<div class="markdownBlockTitle">Dinosaur.tsx</div>
<div class="relative">
<pre class="language-tsx" tabindex="0"><code data-language="tsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link<span class="token punctuation">,</span> useParams <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-router-dom"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Dino <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../types"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Dinosaur</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> selectedDinosaur <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>dinosaur<span class="token punctuation">,</span> setDino<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span>Dino<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span> description<span class="token operator">:</span> <span class="token string">""</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> resp <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/api/dinosaurs/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>selectedDinosaur<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> dino <span class="token operator">=</span> <span class="token keyword">await</span> resp<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> Dino<span class="token punctuation">;</span>
      <span class="token function">setDino</span><span class="token punctuation">(</span>dino<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>selectedDinosaur<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>dinosaur<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>dinosaur<span class="token punctuation">.</span>description<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">ðŸ   Back to all dinosaurs</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>   </div>
</div>
<h3 id="styling-the-list-of-dinosaurs" tabindex="-1">Styling the list of dinosaurs </h3> <p>Since we are displaying the list of dinosaurs on the main page, let's do some basic formatting. Add the following to the bottom of <code data-language="ts">src/App.css</code> to display our list of dinosaurs in an orderly fashion:</p> <div>
<div class="markdownBlockTitle">src/App.css</div>
<div class="relative">
<pre class="language-css" tabindex="0"><code data-language="css"><span class="token selector">.dinosaur</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>   </div>
</div>
<h2 id="run-the-app" tabindex="-1">Run the app </h2> <p>To run the app use the task you set up earlier</p> <div class="relative">
<pre class="language-sh" tabindex="0"><code data-language="sh">deno task dev
</code></pre>   </div>
<p>Navigate to the local Vite server in your browser (<code data-language="ts">localhost:5173</code>) and you should see the list of dinosaurs displayed which you can click through to find out about each one.</p> <p><img src="https://docs.deno.com/runtime/tutorials/images/how-to/react/react-dinosaur-app-demo.gif" alt="demo of the app"></p> <h2 id="build-and-deploy" tabindex="-1">Build and deploy </h2> <p>At this point the app is being served by the Vite development server. To serve the app in production, you can build the app with Vite and then serve the built files with Deno. To do so we'll need to update the api server to serve the built files. We'll write some middleware to do this. In your <code data-language="ts">api</code> directory create a new folder <code data-language="ts">util</code> and a new file called <code data-language="ts">routeStaticFilesFrom.ts</code> and add the following code:</p> <div>
<div class="markdownBlockTitle">routeStaticFilesFrom.ts</div>
<div class="relative">
<pre class="language-ts" tabindex="0"><code data-language="ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> Next <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"jsr:@oak/oak/middleware"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Context <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"jsr:@oak/oak/context"</span><span class="token punctuation">;</span>

<span class="token comment">// Configure static site routes so that we can serve</span>
<span class="token comment">// the Vite build output and the public folder</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">routeStaticFilesFrom</span><span class="token punctuation">(</span>staticPaths<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>context<span class="token operator">:</span> Context<span class="token operator">&lt;</span>Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> object<span class="token operator">&gt;&gt;</span><span class="token punctuation">,</span> next<span class="token operator">:</span> Next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> path <span class="token keyword">of</span> staticPaths<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">await</span> context<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span> root<span class="token operator">:</span> path<span class="token punctuation">,</span> index<span class="token operator">:</span> <span class="token string">"index.html"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span>
        <span class="token keyword">continue</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>   </div>
</div>
<p>This middleware will attempt to serve the static files from the paths provided in the <code data-language="ts">staticPaths</code> array. If the file is not found it will call the next middleware in the chain. We can now update the <code data-language="ts">api/main.ts</code> file to use this middleware:</p> <div>
<div class="markdownBlockTitle">main.ts</div>
<div class="relative">
<pre class="language-ts" tabindex="0"><code data-language="ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> Application<span class="token punctuation">,</span> Router <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@oak/oak"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> oakCors <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@tajpouria/cors"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> data <span class="token keyword">from</span> <span class="token string">"./data.json"</span> <span class="token keyword">with</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">"json"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> routeStaticFilesFrom <span class="token keyword">from</span> <span class="token string">"./util/routeStaticFilesFrom.ts"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/api/dinosaurs"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  context<span class="token punctuation">.</span>response<span class="token punctuation">.</span>body <span class="token operator">=</span> data<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/api/dinosaurs/:dinosaur"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>context<span class="token operator">?.</span>params<span class="token operator">?.</span>dinosaur<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    context<span class="token punctuation">.</span>response<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token string">"No dinosaur name provided."</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> dinosaur <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    item<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> context<span class="token punctuation">.</span>params<span class="token punctuation">.</span>dinosaur<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  context<span class="token punctuation">.</span>response<span class="token punctuation">.</span>body <span class="token operator">=</span> dinosaur <span class="token operator">?</span> dinosaur <span class="token operator">:</span> <span class="token string">"No dinosaur found."</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Application</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">oakCors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">routeStaticFilesFrom</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Deno<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/dist</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Deno<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/public</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">await</span> app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">{</span> port<span class="token operator">:</span> <span class="token number">8000</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>   </div>
</div>
<p>Add a <code data-language="ts">serve</code> script to your <code data-language="ts">package.json</code> file to build the app with Vite and then run the API server:</p> <div class="relative">
<pre class="language-jsonc" tabindex="0"><code data-language="jsonc"><span class="token punctuation">{</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token property">"serve"</span><span class="token operator">:</span> <span class="token string">"deno task build &amp;&amp; deno task dev:api"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>   </div>
<p>Now you can serve the built app with Deno by running:</p> <div class="relative">
<pre class="language-sh" tabindex="0"><code data-language="sh">deno task serve
</code></pre>   </div>
<p>If you visit <code data-language="ts">localhost:8000</code> in your browser you should see the app running!</p> <p>ðŸ¦• Now you can scaffold and develop a React app with Vite and Deno! Youâ€™re ready to build blazing-fast web applications. We hope you enjoy exploring these cutting-edge tools, we can't wait to see what you make!</p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2018â€“2024 the Deno authors<br>Licensed under the MIT License.<br>
    <a href="https://docs.deno.com/runtime/tutorials/how_to_with_npm/create-react" class="_attribution-link">https://docs.deno.com/runtime/tutorials/how_to_with_npm/create-react</a>
  </p>
</div>
