<h1 class="text-2xl leading-none break-all"> <span class="text-Method">method</span> <span class="font-bold">Deno.Kv.prototype.enqueue</span> </h1>
<article> 
<div>
<div class="mt-3 space-y-8"><div class="scroll-mt-16" id="function_Kv_prototype_enqueue_0"> <code data-language="ts">Kv.prototype.enqueue(value: unknown,options?: { delay?: number; keysIfUndelivered?: KvKey[]; backoffSchedule?: number[];  },): Promise&lt;KvCommitResult&gt;</code><div class="space-y-7" id="">
<div data-color-mode="dark" data-light-theme="light" data-dark-theme="dark" class="markdown-body">
<p>Add a value into the database queue to be delivered to the queue listener via <code data-language="ts">Deno.Kv.listenQueue</code>.</p> <div class="relative">
<pre><code data-language="ts"><span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token keyword">await</span> Deno<span class="token punctuation">.</span><span class="token function">openKv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token string">"bar"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>   </div>
<p>The <code data-language="ts">delay</code> option can be used to specify the delay (in milliseconds) of the value delivery. The default delay is 0, which means immediate delivery.</p> <div class="relative">
<pre><code data-language="ts"><span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token keyword">await</span> Deno<span class="token punctuation">.</span><span class="token function">openKv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token string">"bar"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> delay<span class="token operator">:</span> <span class="token number">60000</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>   </div>
<p>The <code data-language="ts">keysIfUndelivered</code> option can be used to specify the keys to be set if the value is not successfully delivered to the queue listener after several attempts. The values are set to the value of the queued message.</p> <p>The <code data-language="ts">backoffSchedule</code> option can be used to specify the retry policy for failed message delivery. Each element in the array represents the number of milliseconds to wait before retrying the delivery. For example, <code data-language="ts">[1000, 5000, 10000]</code> means that a failed delivery will be retried at most 3 times, with 1 second, 5 seconds, and 10 seconds delay between each retry.</p> <div class="relative">
<pre><code data-language="ts"><span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token keyword">await</span> Deno<span class="token punctuation">.</span><span class="token function">openKv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token string">"bar"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  keysIfUndelivered<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token string">"bar"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  backoffSchedule<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>   </div>
</div>
<section class="section" id="parameters"> <div> <h2 class="anchorable mb-1">
 Parameters</h2>
</div>
<div class="space-y-8">
<div class="anchorable docEntry" id="function_kv_prototype_enqueue_0_parameters_value"> <div class="docEntryHeader"> <div>
<code data-language="ts">value: unknown</code> </div>
</div>
</div> <div class="anchorable docEntry" id="function_kv_prototype_enqueue_0_parameters_options"> <div class="docEntryHeader"> <div>
<div class="space-x-1 mb-1">
<div class="text-optional border border-optional/50 bg-optional/5 inline-flex items-center gap-0.5 *:flex-none rounded-md leading-none text-sm py-1 px-2">optional</div> </div>
<code data-language="ts">options: { delay?: number; keysIfUndelivered?: KvKey[]; backoffSchedule?: number[];  }</code> </div>
</div>
</div> </div></section> <section class="section" id="return-type"> <div> <h2 class="anchorable mb-1">
 Return Type</h2>
</div>
<div class="space-y-8">
<div class=" docEntry" id="function_Kv_prototype_enqueue_0_return"> <div class="docEntryHeader"> <div>
<code data-language="ts">Promise&lt;KvCommitResult&gt;</code> </div>
</div>
</div> </div></section> </div> </div></div> </div> </article><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2018â€“2024 the Deno authors<br>Licensed under the MIT License.<br>
    <a href="https://docs.deno.com/api/deno/~/Deno.Kv.prototype.enqueue" class="_attribution-link">https://docs.deno.com/api/deno/~/Deno.Kv.prototype.enqueue</a>
  </p>
</div>
