<h1 data-toc="serialization" id="serialization.md">Serialization</h1>
<p id="fa80657"><em id="d699eaff" class="">Serialization</em> is the process of converting data used by an application to a format that can be transferred over a network or stored in a database or a file. In turn, <em id="a0d5230b" class="">deserialization</em> is the opposite process of reading data from an external source and converting it into a runtime object. Together they are an essential part of most applications that exchange data with third parties.</p>
<p id="450781d">Some data serialization formats, such as <a href="https://www.json.org/json-en.html" id="30d24f1e" data-external="true" rel="noopener noreferrer">JSON</a> and <a href="https://developers.google.com/protocol-buffers" id="89aee90a" data-external="true" rel="noopener noreferrer">protocol buffers</a> are particularly common. Being language-neutral and platform-neutral, they enable data exchange between systems written in any modern language.</p>
<p id="c0571795">In Kotlin, data serialization tools are available in a separate component, <a href="https://github.com/Kotlin/kotlinx.serialization" id="a1ec586" data-external="true" rel="noopener noreferrer">kotlinx.serialization</a>. It consists of several parts: the <code class="code ">org.jetbrains.kotlin.plugin.serialization</code> Gradle plugin, <a href="#libraries" id="dfec6770">runtime libraries</a>, and compiler plugins.</p>
<p id="cf31ba68">Compiler plugins, <code class="code ">kotlinx-serialization-compiler-plugin</code> and <code class="code ">kotlinx-serialization-compiler-plugin-embeddable</code>, are published directly to Maven Central. The second plugin is designed for working with the <code class="code ">kotlin-compiler-embeddable</code> artifact, which is the default option for scripting artifacts. Gradle adds compiler plugins to your projects as compiler arguments.</p>
<section class="chapter"><h2 id="libraries" data-toc="libraries">Libraries</h2>
<p id="b0c05dc2"><code class="code ">kotlinx.serialization</code> provides sets of libraries for all supported platforms – JVM, JavaScript, Native – and for various serialization formats – JSON, CBOR, protocol buffers, and others. You can find the complete list of supported serialization formats <a href="#formats" id="49095bf7">below</a>.</p>
<p id="9f9cd97b">All Kotlin serialization libraries belong to the <code class="code ">org.jetbrains.kotlinx:</code> group. Their names start with <code class="code ">kotlinx-serialization-</code> and have suffixes that reflect the serialization format. Examples:</p>
<ul class="list _bullet" id="2232f70b">
<li class="list__item" id="e82b6468"><p><code class="code ">org.jetbrains.kotlinx:kotlinx-serialization-json</code> provides JSON serialization for Kotlin projects.</p></li>
<li class="list__item" id="8f7e0bfb"><p><code class="code ">org.jetbrains.kotlinx:kotlinx-serialization-cbor</code> provides CBOR serialization.</p></li>
</ul>
<p id="75c306e9">Platform-specific artifacts are handled automatically; you don't need to add them manually. Use the same dependencies in JVM, JS, Native, and multiplatform projects.</p>
<p id="dc47f22b">Note that the <code class="code ">kotlinx.serialization</code> libraries use their own versioning structure, which doesn't match Kotlin's versioning. Check out the releases on <a href="https://github.com/Kotlin/kotlinx.serialization/releases" id="2a713b94" data-external="true" rel="noopener noreferrer">GitHub</a> to find the latest versions.</p></section><section class="chapter"><h2 id="formats" data-toc="formats">Formats</h2>
<p id="45d261ff"><code class="code ">kotlinx.serialization</code> includes libraries for various serialization formats:</p>
<ul class="list _bullet" id="85bbbeac">
<li class="list__item" id="fca5aeed"><p><a href="https://www.json.org/" id="baa629f7" data-external="true" rel="noopener noreferrer">JSON</a>: <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/formats/README.md#json" id="67d04c4d" data-external="true" rel="noopener noreferrer"><code class="code ">kotlinx-serialization-json</code></a></p></li>
<li class="list__item" id="8c8fdda2"><p><a href="https://developers.google.com/protocol-buffers" id="3ad3c427" data-external="true" rel="noopener noreferrer">Protocol buffers</a>: <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/formats/README.md#protobuf" id="7e099ecb" data-external="true" rel="noopener noreferrer"><code class="code ">kotlinx-serialization-protobuf</code></a></p></li>
<li class="list__item" id="a782c4fe"><p><a href="https://cbor.io/" id="1ec38bd6" data-external="true" rel="noopener noreferrer">CBOR</a>: <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/formats/README.md#cbor" id="171cbfea" data-external="true" rel="noopener noreferrer"><code class="code ">kotlinx-serialization-cbor</code></a></p></li>
<li class="list__item" id="bf331719"><p><a href="https://en.wikipedia.org/wiki/.properties" id="c65f27b" data-external="true" rel="noopener noreferrer">Properties</a>: <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/formats/README.md#properties" id="1f7d3b4a" data-external="true" rel="noopener noreferrer"><code class="code ">kotlinx-serialization-properties</code></a></p></li>
<li class="list__item" id="1376cfa1"><p><a href="https://github.com/lightbend/config/blob/master/HOCON.md" id="fa1def2a" data-external="true" rel="noopener noreferrer">HOCON</a>: <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/formats/README.md#hocon" id="30bd94d8" data-external="true" rel="noopener noreferrer"><code class="code ">kotlinx-serialization-hocon</code></a> (only on JVM)</p></li>
</ul>
<p id="3de2d0dc">Note that all libraries except JSON serialization (<code class="code ">kotlinx-serialization-json</code>) are <a href="components-stability.html" id="aed6d775">Experimental</a>, which means their API can be changed without notice.</p>
<p id="d63fae37">There are also community-maintained libraries that support more serialization formats, such as <a href="https://yaml.org/" id="cd36ccec" data-external="true" rel="noopener noreferrer">YAML</a> or <a href="https://avro.apache.org/" id="bd1fca8c" data-external="true" rel="noopener noreferrer">Apache Avro</a>. For detailed information about available serialization formats, see the <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/formats/README.md" id="807e9d5" data-external="true" rel="noopener noreferrer"><code class="code ">kotlinx.serialization</code> documentation</a>.</p></section><section class="chapter"><h2 id="example-json-serialization" data-toc="example-json-serialization">Example: JSON serialization</h2>
<p id="56c7ff55">Let's take a look at how to serialize Kotlin objects into JSON.</p>
<p id="9e2d4418">Before starting, you'll need to configure your build script so that you can use Kotlin serialization tools in your project:</p>
<ol class="list _decimal" id="665acda9" type="1">
<li class="list__item" id="d0fb7761">
<p id="781f7abc">Apply the Kotlin serialization Gradle plugin <code class="code ">org.jetbrains.kotlin.plugin.serialization</code> (or <code class="code ">kotlin("plugin.serialization")</code> in the Kotlin Gradle DSL).</p>
<div class="tabs" id="96ccf5db" data-group="build-script" data-anchors="[2b090ef1,6532201a,c273d9ea,62f7f159,96ccf5db]">
<div class="tabs__content" data-gtm="tab" id="2b090ef1" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code" data-language="kotlin">plugins {
    kotlin("jvm") version "1.9.0"
    kotlin("plugin.serialization") version "1.9.0"
}
</pre></div>
<div class="tabs__content" data-gtm="tab" id="c273d9ea" data-sync-tabs="groovy" data-title="Groovy"><pre class="code" data-language="groovy">plugins {
    id 'org.jetbrains.kotlin.jvm' version '1.9.0'
    id 'org.jetbrains.kotlin.plugin.serialization' version '1.9.0'  
}
</pre></div>
</div>
</li>
<li class="list__item" id="469c0b2f">
<p id="39ab56a0">Add the JSON serialization library dependency:<code class="code ">org.jetbrains.kotlinx:kotlinx-serialization-json:1.5.1</code></p>
<div class="tabs" id="5b2576d3" data-group="build-script" data-anchors="[509760a2,95956eba,95d82a5d,2c22831c,5b2576d3]">
<div class="tabs__content" data-gtm="tab" id="509760a2" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code" data-language="kotlin">dependencies {
    implementation("org.jetbrains.kotlinx:kotlinx-serialization-json:1.5.1")
} 
</pre></div>
<div class="tabs__content" data-gtm="tab" id="95d82a5d" data-sync-tabs="groovy" data-title="Groovy"><pre class="code" data-language="groovy">dependencies {
    implementation 'org.jetbrains.kotlinx:kotlinx-serialization-json:1.5.1'
} 
</pre></div>
</div>
</li>
</ol>
<p id="dffee928">Now you're ready to use the serialization API in your code. The API is located in the the <code class="code ">kotlinx.serialization</code> package and its format-specific subpackages such as <code class="code ">kotlinx.serialization.json</code>.</p>
<p id="a4e91b7b">First, make a class serializable by annotating it with <code class="code ">@Serializable</code>.</p>
<pre class="code" data-language="kotlin">import kotlinx.serialization.Serializable

@Serializable
data class Data(val a: Int, val b: String)
</pre>
<p id="8a0fffcc">You can now serialize an instance of this class by calling <code class="code ">Json.encodeToString()</code>.</p>
<pre class="code" data-language="kotlin">import kotlinx.serialization.Serializable
import kotlinx.serialization.json.Json
import kotlinx.serialization.encodeToString

@Serializable
data class Data(val a: Int, val b: String)

fun main() {
   val json = Json.encodeToString(Data(42, "str"))
}
</pre>
<p id="18c9d2e6">As a result, you get a string containing the state of this object in the JSON format: <code class="code ">{"a": 42, "b": "str"}</code></p>
<p id="6400bfd">You can also serialize object collections, such as lists, in a single call.</p>
<pre class="code" data-language="kotlin">val dataList = listOf(Data(42, "str"), Data(12, "test"))
val jsonList = Json.encodeToString(dataList)
</pre>
<p id="b6454d86">To deserialize an object from JSON, use the <code class="code ">decodeFromString()</code> function:</p>
<pre class="code" data-language="kotlin">import kotlinx.serialization.Serializable
import kotlinx.serialization.json.Json
import kotlinx.serialization.decodeFromString

@Serializable
data class Data(val a: Int, val b: String)

fun main() {
   val obj = Json.decodeFromString&lt;Data&gt;("""{"a":42, "b": "str"}""")
}
</pre>
<p id="4048600e">For more information about serialization in Kotlin, see the <a href="https://github.com/Kotlin/kotlinx.serialization/blob/master/docs/serialization-guide.md" id="c3cdf2da" data-external="true" rel="noopener noreferrer">Kotlin Serialization Guide</a>.</p></section><div class="last-modified"> Last modified: 13 July 2023</div>

<div class="navigation-links _bottom"> <a class="navigation-links__prev" href="debug-flow-with-idea.html">Debug Kotlin Flow using IntelliJ IDEA – tutorial</a> <a class="navigation-links__next" href="lincheck-guide.html">Lincheck guide</a> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2023 JetBrains s.r.o. and Kotlin Programming Language contributors<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://kotlinlang.org/docs/serialization.html" class="_attribution-link">https://kotlinlang.org/docs/serialization.html</a>
  </p>
</div>
