<h1 data-toc="multiplatform-library" id="multiplatform-library.md">Create and publish a multiplatform library – tutorial</h1>
<p id="d5eeb396">In this tutorial, you will learn how to create a multiplatform library for JVM, JS, and Native platforms, write common tests for all platforms, and publish the library to a local Maven repository.</p>
<p id="d91007bd">This library converts raw data – strings and byte arrays – to the <a href="https://en.wikipedia.org/wiki/Base64" id="4e51427a" data-external="true" rel="noopener noreferrer">Base64</a> format. It can be used on Kotlin/JVM, Kotlin/JS, and any available Kotlin/Native platform.</p>
<p id="8c7128e5">You will use different ways to implement the conversion to the Base64 format on different platforms:</p>
<ul class="list _bullet" id="8768acfe">
<li class="list__item" id="33ea59a2"><p>For JVM – the <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Base64.html" id="ff4ae27b" data-external="true" rel="noopener noreferrer"><code class="code ">java.util.Base64</code> class</a>.</p></li>
<li class="list__item" id="805c7986"><p>For JS – the <a href="https://www.npmjs.com/package/base-64" id="a9f41363" data-external="true" rel="noopener noreferrer"><code class="code ">base-64</code> npm package</a>.</p></li>
<li class="list__item" id="49d03a4b"><p>For Kotlin/Native – your own implementation.</p></li>
</ul>
<p id="e75bd3fb">You will also test your code using common tests, and then publish the library to your local Maven repository.</p>
<aside data-type="note" class="prompt" data-title="" id="2fca6647"><p id="aa2f1a4b">You can find a similar project in this <a href="https://github.com/KaterinaPetrova/mpp-sample-lib" id="302f5c84" data-external="true" rel="noopener noreferrer">GitHub repository</a>.</p></aside><section class="chapter"><h2 id="set-up-the-environment" data-toc="set-up-the-environment">Set up the environment</h2>
<p id="96b3d0b2">You can complete this tutorial on any operating system. Download and install the <a href="https://www.jetbrains.com/idea/download/index.html" id="845b0c18" data-external="true" rel="noopener noreferrer">latest version of IntelliJ IDEA</a> with the <a href="releases.html" id="20def8c5">latest Kotlin plugin</a>.</p></section><section class="chapter"><h2 id="create-a-project" data-toc="create-a-project">Create a project</h2>
<ol class="list _decimal" id="9248678b" type="1">
<li class="list__item" id="a1f00489"><p id="578705cc">In IntelliJ IDEA, select <b id="f1e4841a" class="">File | New | Project</b>.</p></li>
<li class="list__item" id="dd6c719b"><p id="1bf877ef">In the left-hand panel, select <b id="b2b73bb" class="">Kotlin Multiplatform</b>.</p></li>
<li class="list__item" id="3bc78df7">
<p id="1b88ab38">Enter a project name, then in the <b id="2383a283" class="">Multiplatform</b> section select <b id="fb511808" class="">Library</b> as the project template.</p>
<figure class=" " id="cb275f3b"><img alt="Select a project template" title="Select a project template" src="https://kotlinlang.org/docs/images/multiplatform-project-1.png" class=" " width="1656" height="1084"></figure><p id="965ff205">By default, your project will use Gradle with Kotlin DSL as the build system.</p>
</li>
<li class="list__item" id="5f742380"><p id="99cfab03">Specify the <a href="https://www.jetbrains.com/help/idea/sdk.html#jdk" id="a4d85879" data-external="true" rel="noopener noreferrer">JDK</a>, which is required for developing Kotlin projects.</p></li>
<li class="list__item" id="20e52447"><p id="aed03ed1">Click <b id="ac95312" class="">Next</b> and then <b id="1e270b09" class="">Finish</b>.</p></li>
</ol>
<p id="a423b7d">The wizard will create a sample multiplatform library with the following structure:</p>
<figure class=" " id="34a24007"><img alt="Multiplatform library structure" title="Multiplatform library structure" src="data:image/png;base64,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" class=" " width="250" height="183"></figure></section><section class="chapter"><h2 id="write-cross-platform-code" data-toc="write-cross-platform-code">Write cross-platform code</h2>
<p id="addc60d3">Define the classes and interfaces you are going to implement in the common code.</p>
<ol class="list _decimal" id="c276f7ff" type="1">
<li class="list__item" id="814d14bc"><p id="23e0780">In <code class="code ">commonMain/kotlin</code>, create a new <code class="code ">org.jetbrains.base64</code> directory.</p></li>
<li class="list__item" id="1efbe020"><p id="f5191ccf">Create the <code class="code ">Base64.kt</code> file in the new directory.</p></li>
<li class="list__item" id="9dd37170">
<p id="363520e5">Define the <code class="code ">Base64Encoder</code> interface that converts bytes to the <code class="code ">Base64</code> format:</p>
<pre class="code" data-language="kotlin">package org.jetbrains.base64

interface Base64Encoder {
    fun encode(src: ByteArray): ByteArray
}
</pre>
</li>
<li class="list__item" id="6ae9bcb3">
<p id="c0e91cda">Define the <code class="code ">Base64Factory</code> object to provide an instance of the <code class="code ">Base64Encoder</code> interface to the common code:</p>
<pre class="code" data-language="kotlin">expect object Base64Factory {
    fun createEncoder(): Base64Encoder
}
</pre>
</li>
</ol>
<p id="d418872d">The factory object is marked with the <code class="code ">expect</code> keyword in the cross-platform code. For each platform, you should provide an <code class="code ">actual</code> implementation of the <code class="code ">Base64Factory</code> object with the platform-specific encoder. Learn more about <a href="multiplatform-connect-to-apis.html" id="fb2bd341">platform-specific implementations</a>.</p></section><section class="chapter"><h2 id="provide-platform-specific-implementations" data-toc="provide-platform-specific-implementations">Provide platform-specific implementations</h2>
<p id="ae538792">Now you will create the <code class="code ">actual</code> implementations of the <code class="code ">Base64Factory</code> object for each platform:</p>
<ul class="list _bullet" id="8b6f8008">
<li class="list__item" id="ed7dd3b0"><p><a href="#jvm" id="3f016378">JVM</a></p></li>
<li class="list__item" id="10d04714"><p><a href="#js" id="a12fbcec">JS</a></p></li>
<li class="list__item" id="13bf469a"><p><a href="#native" id="6e95129b">Native</a></p></li>
</ul>
<section class="chapter"><h3 id="jvm" data-toc="jvm">JVM</h3>
<ol class="list _decimal" id="10695abf" type="1">
<li class="list__item" id="494c8d5b"><p id="b60e841d">In <code class="code ">jvmMain/kotlin</code>, create a new <code class="code ">org.jetbrains.base64</code> package.</p></li>
<li class="list__item" id="b3ee2085"><p id="eda2415">Create the <code class="code ">Base64.kt</code> file in the new package.</p></li>
<li class="list__item" id="4fbbbb5c">
<p id="b0c06164">Provide a simple implementation of the <code class="code ">Base64Factory</code> object that delegates to the <code class="code ">java.util.Base64</code> class:</p>
<aside data-type="note" class="prompt" data-title="" id="72bd54f8"><p id="a60902fc">IDEA inspections help create <code class="code ">actual</code> implementations for an <code class="code ">expect</code> declaration.</p></aside><pre class="code" data-language="kotlin">package org.jetbrains.base64
import java.util.*

actual object Base64Factory {
    actual fun createEncoder(): Base64Encoder = JvmBase64Encoder
}

object JvmBase64Encoder : Base64Encoder {
    override fun encode(src: ByteArray): ByteArray = Base64.getEncoder().encode(src)
}
</pre>
</li>
</ol>
<p id="df5b8ce4">Pretty simple, right? You've provided a platform-specific implementation by using a straightforward delegation to a third-party implementation.</p></section><section class="chapter"><h3 id="js" data-toc="js">JS</h3>
<p id="b720c0b1">For the JS part of your project, you'll make use of the <code class="code ">base-64</code> npm package. It can be added as dependency to implement JS-specific functionality:</p>
<ol class="list _decimal" id="d43c920b" type="1">
<li class="list__item" id="1ae32c04">
<p id="e24e0219">Update your <code class="code ">build.gradle.kts</code> file by adding a dependency to the <code class="code ">jsMain</code> source set:</p>
<pre class="code" data-language="kotlin">kotlin {
    // ...

    sourceSets {
        val jsMain by getting {
            dependencies {
                implementation(npm("base-64", "1.0.0"))
            }
        }
    }
}
</pre>
</li>
<li class="list__item" id="8910ff80"><p id="2fe3b9b4">In <code class="code ">jsMain/kotlin</code>, create a new <code class="code ">org.jetbrains.base64</code> directory.</p></li>
<li class="list__item" id="2124aea0"><p id="4890d0d4">Create the <code class="code ">Base64.kt</code> file in the new directory.</p></li>
<li class="list__item" id="e15d60df">
<p id="fcb1b170">Provide a simple implementation of the <code class="code ">Base64Factory</code> object that delegates to the <code class="code ">Base64</code> object:</p>
<pre class="code" data-language="kotlin">package org.jetbrains.base64

actual object Base64Factory {
    actual fun createEncoder(): Base64Encoder = JsBase64Encoder
}

object JsBase64Encoder : Base64Encoder {
    override fun encode(src: ByteArray): ByteArray {
        val binString = src.decodeToString()
        return Base64.encode(binString).encodeToByteArray()
    }
}
</pre>
</li>
<li class="list__item" id="a9021695"><p id="e8c5794d">Create a separate file <code class="code ">Base64Npm.kt</code> in the same directory.</p></li>
<li class="list__item" id="124a03f2">
<p id="eccc2d18">Implement the <code class="code ">Base64</code> object using the <code class="code ">base-64</code> npm package:</p>
<pre class="code" data-language="kotlin">package org.jetbrains.base64

@JsModule("base-64")
@JsNonModule
external object Base64 {
    fun encode(s: String): String
}
</pre>
</li>
</ol></section><section class="chapter"><h3 id="native" data-toc="native">Native</h3>
<p id="7eaa5f58">Unfortunately, there is no third-party implementation available for all Kotlin/Native targets, so you need to write it yourself:</p>
<ol class="list _decimal" id="1c8ef52f" type="1">
<li class="list__item" id="95fb81ff"><p id="376adca7">In <code class="code ">nativeMain/kotlin</code>, create a new <code class="code ">org.jetbrains.base64</code> directory.</p></li>
<li class="list__item" id="53093013"><p id="a0550894">Create the <code class="code ">Base64.kt</code> file in the new directory.</p></li>
<li class="list__item" id="682e0ac3">
<p id="1691edaa">Provide your own implementation for the <code class="code ">Base64Factory</code> object:</p>
<pre class="code" data-language="kotlin">package org.jetbrains.base64

private val BASE64_ALPHABET: String = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"
private val BASE64_MASK: Byte = 0x3f
private val BASE64_PAD: Char = '='
private val BASE64_INVERSE_ALPHABET = IntArray(256) {
    BASE64_ALPHABET.indexOf(it.toChar())
}

private fun Int.toBase64(): Char = BASE64_ALPHABET[this]

actual object Base64Factory {
    actual fun createEncoder(): Base64Encoder = NativeBase64Encoder
}

object NativeBase64Encoder : Base64Encoder {
    override fun encode(src: ByteArray): ByteArray {
        fun ByteArray.getOrZero(index: Int): Int = if (index &gt;= size) 0 else get(index).toInt()
        // 4n / 3 is expected Base64 payload
        val result = ArrayList&lt;Byte&gt;(4 * src.size / 3)
        var index = 0
        while (index &lt; src.size) {
            val symbolsLeft = src.size - index
            val padSize = if (symbolsLeft &gt;= 3) 0 else (3 - symbolsLeft) * 8 / 6
            val chunk = (src.getOrZero(index) shl 16) or (src.getOrZero(index + 1) shl 8) or src.getOrZero(index + 2)
            index += 3

            for (i in 3 downTo padSize) {
                val char = (chunk shr (6 * i)) and BASE64_MASK.toInt()
                result.add(char.toBase64().code.toByte())
            }
            // Fill the pad with '='
            repeat(padSize) { result.add(BASE64_PAD.code.toByte()) }
        }

        return result.toByteArray()
    }
}
</pre>
</li>
</ol></section></section><section class="chapter"><h2 id="test-your-library" data-toc="test-your-library">Test your library</h2>
<p id="a5e3fcd">Now when you have <code class="code ">actual</code> implementations of the <code class="code ">Base64Factory</code> object for all platforms, it's time to test your multiplatform library.</p>
<p id="cdc1308e">To save time on testing, you can write common tests that will be executed on all platforms instead of testing each platform separately.</p>
<section class="chapter"><h3 id="prerequisites" data-toc="prerequisites">Prerequisites</h3>
<p id="876fb535">Before writing tests, add the <code class="code ">encodeToString</code> method with the default implementation to the <code class="code ">Base64Encoder</code> interface, which is defined in <code class="code ">commonMain/kotlin/org/jetbrains/base64/Base64.kt</code>. This implementation converts byte arrays to strings, which are much easier to test.</p>
<pre class="code" data-language="kotlin">interface Base64Encoder {
    fun encode(src: ByteArray): ByteArray

    fun encodeToString(src: ByteArray): String {
        val encoded = encode(src)
        return buildString(encoded.size) {
            encoded.forEach { append(it.toInt().toChar()) }
        }
    }
}
</pre>
<p id="680a6d7e">You can also provide a more efficient implementation of this method for a specific platform, for example, for JVM in <code class="code ">jvmMain/kotlin/org/jetbrains/base64/Base64.kt</code>:</p>
<pre class="code" data-language="kotlin">object JvmBase64Encoder : Base64Encoder {
    override fun encode(src: ByteArray): ByteArray = Base64.getEncoder().encode(src)
    override fun encodeToString(src: ByteArray): String = Base64.getEncoder().encodeToString(src)
}
</pre>
<p id="b5015d14">One of the benefits of a multiplatform library is having a default implementation with optional platform-specific overrides.</p></section><section class="chapter"><h3 id="write-common-tests" data-toc="write-common-tests">Write common tests</h3>
<p id="e3571a29">Now you have a string-based API that you can cover with basic tests.</p>
<ol class="list _decimal" id="92bd4503" type="1">
<li class="list__item" id="5db4bc3e"><p id="b1ee8ac7">In <code class="code ">commonTest/kotlin</code>, create a new <code class="code ">org.jetbrains.base64</code> directory.</p></li>
<li class="list__item" id="39dbcf57"><p id="d5e3a0d6">Create the <code class="code ">Base64Test.kt</code> file in the new directory.</p></li>
<li class="list__item" id="74ec5240">
<p id="d34419e8">Add tests to this file:</p>
<pre class="code" data-language="kotlin">package org.jetbrains.base64

import kotlin.test.Test
import kotlin.test.assertEquals

class Base64Test {
    @Test
    fun testEncodeToString() {
        checkEncodeToString("Kotlin is awesome", "S290bGluIGlzIGF3ZXNvbWU=")
    }

    @Test
    fun testPaddedStrings() {
        checkEncodeToString("", "")
        checkEncodeToString("1", "MQ==")
        checkEncodeToString("22", "MjI=")
        checkEncodeToString("333", "MzMz")
        checkEncodeToString("4444", "NDQ0NA==")
    }

    private fun checkEncodeToString(input: String, expectedOutput: String) {
        assertEquals(expectedOutput, Base64Factory.createEncoder().encodeToString(input.asciiToByteArray()))
    }

    private fun String.asciiToByteArray() = ByteArray(length) {
        get(it).code.toByte()
    }
}
</pre>
</li>
<li class="list__item" id="b7a44dff">
<p id="f974393b">In the Terminal, execute the <code class="code ">check</code> Gradle task:</p>
<pre class="code" data-language="bash">./gradlew check
</pre>
<aside data-type="note" class="prompt" data-title="" id="dfdbbc8d"><p id="c9b75973">You can also run the <code class="code ">check</code> Gradle task by double-clicking it in the list of Gradle tasks.</p></aside>
</li>
</ol>
<p id="20483cc">The tests will run on all platforms (JVM, JS, and Native).</p></section><section class="chapter"><h3 id="add-platform-specific-tests" data-toc="add-platform-specific-tests">Add platform-specific tests</h3>
<p id="346048a9">You can also add tests that will be run only for a specific platform. For example, you can add UTF-16 tests on JVM:</p>
<ol class="list _decimal" id="d29fa3aa" type="1">
<li class="list__item" id="fdf6580a"><p id="7b132644">In <code class="code ">jvmTest/kotlin</code>, create the <code class="code ">org.jetbrains.base64</code> package.</p></li>
<li class="list__item" id="1b0908ca"><p id="cf04e00a">Create the <code class="code ">Base64Test.kt</code> file in the new package.</p></li>
<li class="list__item" id="ee0287c5">
<p id="75209a10">Add tests to this file:</p>
<pre class="code" data-language="kotlin">package org.jetbrains.base64

import kotlin.test.Test
import kotlin.test.assertEquals

class Base64JvmTest {
    @Test
    fun testNonAsciiString() {
        val utf8String = "Gödel"
        val actual = Base64Factory.createEncoder().encodeToString(utf8String.toByteArray())
        assertEquals("R8O2ZGVs", actual)
    }
}
</pre>
</li>
</ol>
<p id="cd6b2450">This test will automatically run on the JVM platform in addition to the common tests.</p></section></section><section class="chapter"><h2 id="publish-your-library-to-the-local-maven-repository" data-toc="publish-your-library-to-the-local-maven-repository">Publish your library to the local Maven repository</h2>
<p id="7141735f">Your multiplatform library is ready for publishing so that you can use it in other projects.</p>
<p id="3a1684b9">To publish your library, use the <a href="https://docs.gradle.org/current/userguide/publishing_maven.html" id="b19d123c" data-external="true" rel="noopener noreferrer"><code class="code ">maven-publish</code> Gradle plugin</a>.</p>
<ol class="list _decimal" id="b99914ab" type="1">
<li class="list__item" id="c2d0a63a">
<p id="5352a1ef">In the <code class="code ">build.gradle.kts</code> file, apply the <code class="code ">maven-publish</code> plugin and specify the group and version of your library:</p>
<pre class="code" data-language="kotlin">plugins {
    kotlin("multiplatform") version "1.9.0"
    id("maven-publish")
}

group = "org.jetbrains.base64"
version = "1.0.0"
</pre>
</li>
<li class="list__item" id="26945d88">
<p id="78c9c437">In the Terminal, run the <code class="code ">publishToMavenLocal</code> Gradle task to publish your library to your local Maven repository:</p>
<pre class="code" data-language="bash">./gradlew publishToMavenLocal
</pre>
<aside data-type="note" class="prompt" data-title="" id="ebc34b15"><p id="3b677a31">You can also run the <code class="code ">publishToMavenLocal</code> Gradle task by double-clicking it in the list of Gradle tasks.</p></aside>
</li>
</ol>
<p id="c479d42c">Your library will be published to the local Maven repository.</p></section><section class="chapter"><h2 id="publish-your-library-to-the-external-maven-central-repository" data-toc="publish-your-library-to-the-external-maven-central-repository">Publish your library to the external Maven Central repository</h2>
<p id="68b1b7b8">You can go public and release your multiplatform library to <a href="https://search.maven.org/" id="4c17425d" data-external="true" rel="noopener noreferrer">Maven Central</a>, a remote repository where maven artifacts are stored and managed. This way, other developers will be able to find it and add as a dependency to their projects.</p>
<section class="chapter"><h3 id="register-a-sonatype-account-and-generate-gpg-keys" data-toc="register-a-sonatype-account-and-generate-gpg-keys">Register a Sonatype account and generate GPG keys</h3>
<p id="6653f5aa">If this is your first library, or you used the sunset Bintray to do this before, you need first to register a Sonatype account.</p>
<p id="405ca4bc">You can use the GetStream article to create and set up your account. The <a href="https://getstream.io/blog/publishing-libraries-to-mavencentral-2021/#registering-a-sonatype-account" id="3bfa6e89" data-external="true" rel="noopener noreferrer">Registering a Sonatype account</a> section describes how to:</p>
<ol class="list _decimal" id="aaf73cbf" type="1">
<li class="list__item" id="3940c333"><p>Register a <a href="https://issues.sonatype.org/secure/Signup!default.jspa" id="814aa320" data-external="true" rel="noopener noreferrer">Sonatype Jira account</a>.</p></li>
<li class="list__item" id="ae59f9ba"><p>Create a new issue. You can use <a href="https://issues.sonatype.org/browse/OSSRH-65092" id="49e87d09" data-external="true" rel="noopener noreferrer">our issue</a> as an example.</p></li>
<li class="list__item" id="7a9b45d4"><p>Verify your domain ownership corresponding to the group ID you want to use to publish your artifacts.</p></li>
</ol>
<p id="18e9505b">Then, since artifacts published on Maven Central have to be signed, follow the <a href="https://getstream.io/blog/publishing-libraries-to-mavencentral-2021/#generating-a-gpg-key-pair" id="a6f851fc" data-external="true" rel="noopener noreferrer">Generating a GPG key pair</a> section to:</p>
<ol class="list _decimal" id="abb2902c" type="1">
<li class="list__item" id="51f4e1ce"><p>Generate a GPG key pair for signing your artifacts.</p></li>
<li class="list__item" id="619a75b3"><p>Publish your public key.</p></li>
<li class="list__item" id="dd93a022"><p>Export your private key.</p></li>
</ol>
<p id="65614732">When the Maven repository and signing keys for your library are ready, you can move on and set up your build to upload the library artifacts to a staging repository and then release them.</p></section><section class="chapter"><h3 id="set-up-publication" data-toc="set-up-publication">Set up publication</h3>
<p id="74320fee">Now you need to instruct Gradle how to publish the library. Most of the work is already done by the <code class="code ">maven-publish</code> and Kotlin Gradle plugins, all the required publications are created automatically. You already know the result when the library is published to a local Maven repository. To publish it to Maven Central, you need to take additional steps:</p>
<ol class="list _decimal" id="9162f503" type="1">
<li class="list__item" id="ec33db4a"><p>Configure the public Maven repository URL and credentials.</p></li>
<li class="list__item" id="4736b211"><p>Provide a description and <code class="code ">javadocs</code> for all library components.</p></li>
<li class="list__item" id="67921ba3"><p>Sign publications.</p></li>
</ol>
<p id="8051bf24">You can handle all these tasks with Gradle scripts. Let's extract all the publication-related logic from the library module <code class="code ">build.script</code>, so you can easily reuse it for other modules in the future.</p>
<p id="4429ede5">The most idiomatic and flexible way to do that is to use Gradle's <a href="https://docs.gradle.org/current/userguide/custom_plugins.html#sec:precompiled_plugins" id="fea5e994" data-external="true" rel="noopener noreferrer">precompiled script plugins</a>. All the build logic will be provided as a precompiled script plugin and could be applied by plugin ID to every module of our library.</p>
<p id="e2eab17f">To implement this, move the publication logic to a separate Gradle project:</p>
<ol class="list _decimal" id="e764c403" type="1">
<li class="list__item" id="35a753"><p id="3f2ab19a">Add a new Gradle project inside your library root project. For that, create a new folder named <code class="code ">convention-plugins</code> and create a new file <code class="code ">build.gradle.kts</code> inside of it.</p></li>
<li class="list__item" id="184d8a4e">
<p id="6404bc8d">Place the following code into the new <code class="code ">build.gradle.kts</code> file:</p>
<pre class="code" data-language="kotlin">plugins {
    `kotlin-dsl` // Is needed to turn our build logic written in Kotlin into the Gradle Plugin
}

repositories {
    gradlePluginPortal() // To use 'maven-publish' and 'signing' plugins in our own plugin
}
</pre>
</li>
<li class="list__item" id="d76d372"><p id="27d4ec83">In the <code class="code ">convention-plugins</code> directory, create a <code class="code ">src/main/kotlin/convention.publication.gradle.kts</code> file to store all the publication logic.</p></li>
<li class="list__item" id="13e62e8e">
<p id="e761ee2d">Add all the required logic in the new file. Be sure to make changes to match your project configuration and where explicitly noted by angle brackets (i.e. <code class="code ">&lt;replace-me&gt;</code>):</p>
<div class="code-collapse" data-lang="kotlin" data-is-expanded="false" data-anchors="[b9bee718]" data-synopsis="import org.gradle.api.publish.maven.MavenPublication">import org.gradle.api.publish.maven.MavenPublication import org.gradle.api.tasks.bundling.Jar import org.gradle.kotlin.dsl.`maven-publish` import org.gradle.kotlin.dsl.signing import java.util.* plugins { `maven-publish` signing } // Stub secrets to let the project sync and build without the publication values set up ext["signing.keyId"] = null ext["signing.password"] = null ext["signing.secretKeyRingFile"] = null ext["ossrhUsername"] = null ext["ossrhPassword"] = null // Grabbing secrets from local.properties file or from environment variables, which could be used on CI val secretPropsFile = project.rootProject.file("local.properties") if (secretPropsFile.exists()) { secretPropsFile.reader().use { Properties().apply { load(it) } }.onEach { (name, value) -&gt; ext[name.toString()] = value } } else { ext["signing.keyId"] = System.getenv("SIGNING_KEY_ID") ext["signing.password"] = System.getenv("SIGNING_PASSWORD") ext["signing.secretKeyRingFile"] = System.getenv("SIGNING_SECRET_KEY_RING_FILE") ext["ossrhUsername"] = System.getenv("OSSRH_USERNAME") ext["ossrhPassword"] = System.getenv("OSSRH_PASSWORD") } val javadocJar by tasks.registering(Jar::class) { archiveClassifier.set("javadoc") } fun getExtraString(name: String) = ext[name]?.toString() publishing { // Configure maven central repository repositories { maven { name = "sonatype" setUrl("https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/") credentials { username = getExtraString("ossrhUsername") password = getExtraString("ossrhPassword") } } } // Configure all publications publications.withType&lt;MavenPublication&gt; { // Stub javadoc.jar artifact artifact(javadocJar.get()) // Provide artifacts information requited by Maven Central pom { name.set("MPP Sample library") description.set("Sample Kotlin Multiplatform library (jvm + ios + js) test") url.set("https://github.com/&lt;your-github-repo&gt;/mpp-sample-lib") licenses { license { name.set("MIT") url.set("https://opensource.org/licenses/MIT") } } developers { developer { id.set("&lt;your-github-profile&gt;") name.set("&lt;your-name&gt;") email.set("&lt;your-email&gt;") } } scm { url.set("https://github.com/&lt;your-github-repo&gt;/mpp-sample-lib") } } } } // Signing artifacts. Signing.* extra properties values will be used signing { sign(publishing.publications) } </div>
<p id="b3183252">Applying just <code class="code ">maven-publish</code> is enough for publishing to the local Maven repository, but not to Maven Central. In the provided script, you get the credentials from <code class="code ">local.properties</code> or environment variables, do all the required configuration in the <code class="code ">publishing</code> section, and sign your publications with the signing plugin.</p>
</li>
<li class="list__item" id="6c496347">
<p id="75bc7a99">Go back to your library project. To ask Gradle to prebuild your plugins, update the root <code class="code ">settings.gradle.kts</code> with the following:</p>
<pre class="code" data-language="kotlin">rootProject.name = "multiplatform-lib" // your project name
includeBuild("convention-plugins")
</pre>
</li>
<li class="list__item" id="3f76f1fe">
<p id="6c8b67da">Now, you can apply this logic in the library's <code class="code ">build.script</code>. In the <code class="code ">plugins</code> section, replace <code class="code ">maven-publish</code> with <code class="code ">conventional.publication</code>:</p>
<pre class="code" data-language="kotlin">plugins {
    kotlin("multiplatform") version "1.9.0"
    id("convention.publication")
}
</pre>
</li>
<li class="list__item" id="aefa1286">
<p id="ed17bb35">Create a <code class="code ">local.properties</code> file within your library's root directory with all the necessary credentials and make sure to add it to your <code class="code ">.gitignore</code>:</p>
<pre class="code" data-language="none"># The GPG key pair ID (last 8 digits of its fingerprint)
signing.keyId=...
# The passphrase of the key pair
signing.password=...
# Private key you exported earlier
signing.secretKeyRingFile=...
# Your credentials for the Jira account
ossrhUsername=...
ossrhPassword=...
</pre>
</li>
<li class="list__item" id="556d7066"><p id="503322d8">Run <code class="code ">./gradlew clean</code> and sync the project.</p></li>
</ol>
<p id="69b6e1b5">New Gradle tasks related to the Sonatype repository should appear in the publishing group – that means that everything is ready for you to publish your library.</p></section><section class="chapter"><h3 id="publish-your-library-to-maven-central" data-toc="publish-your-library-to-maven-central">Publish your library to Maven Central</h3>
<p id="74cfd3e8">To upload your library to the Sonatype repository, run the following program:</p>
<pre class="code" data-language="bash">./gradlew publishAllPublicationsToSonatypeRepository
</pre>
<p id="e8df4a35">The staging repository will be created, and all the artifacts for all publications will be uploaded to that repository. All it's left to do is to check that all the artifacts you wanted to upload have made it there and to press the release button.</p>
<p id="47fb6317">These steps are described in the <a href="https://getstream.io/blog/publishing-libraries-to-mavencentral-2021/#your-first-release" id="99f1e953" data-external="true" rel="noopener noreferrer">Your first release</a> section. In short, you need to:</p>
<ol class="list _decimal" id="b1294ee7" type="1">
<li class="list__item" id="7d8874a4"><p>Go to <a href="https://s01.oss.sonatype.org" id="db21de05" data-external="true" rel="noopener noreferrer">https://s01.oss.sonatype.org</a> and log in using your credentials in Sonatype Jira.</p></li>
<li class="list__item" id="ee0011c0"><p>Find your repository in the <b id="5a2f1362" class="">Staging repositories</b> section.</p></li>
<li class="list__item" id="cf5bbf7c"><p>Close it.</p></li>
<li class="list__item" id="9bd2742f"><p>Release the library.</p></li>
<li class="list__item" id="fb3898c2"><p>To activate the sync to Maven Central, go back to the Jira issue you created and leave a comment saying that you've released your first component. This step is only needed if it's your first release.</p></li>
</ol>
<p id="569f73a">Soon your library will be available at <a href="https://repo1.maven.org/maven2" id="77255d23" data-external="true" rel="noopener noreferrer">https://repo1.maven.org/maven2</a>, and other developers will be able to add it as a dependency. In a couple of hours, other developers will be able to find it using <a href="https://search.maven.org/" id="8ecbda97" data-external="true" rel="noopener noreferrer">Maven Central Repository Search</a>.</p></section></section><section class="chapter"><h2 id="add-a-dependency-on-the-published-library" data-toc="add-a-dependency-on-the-published-library">Add a dependency on the published library</h2>
<p id="df4b9c95">You can add your library to other multiplatform projects as a dependency.</p>
<p id="8985c735">In the <code class="code ">build.gradle.kts</code> file, add <code class="code ">mavenLocal()</code> or <code class="code ">MavenCentral()</code> (if the library was published to the external repository) and add a dependency on your library:</p>
<pre class="code" data-language="kotlin">repositories {
    mavenCentral()
    mavenLocal()
}

kotlin {
    sourceSets {
        val commonMain by getting {
            dependencies {
                implementation("org.jetbrains.base64:multiplatform-lib:1.0.0")
            }
        }
    }
}
</pre>
<p id="c80d9cb6">The <code class="code ">implementation</code> dependency consists of:</p>
<ul class="list _bullet" id="857480f8">
<li class="list__item" id="5bef835e"><p>The group ID and version — specified earlier in the <code class="code ">build.gradle.kts</code> file</p></li>
<li class="list__item" id="188d5cd8"><p>The artifact ID — by default, it's your project's name specified in the <code class="code ">settings.gradle.kts</code> file</p></li>
</ul>
<p id="6b6a97f1">For more details, see the <a href="https://docs.gradle.org/current/userguide/publishing_maven.html" id="b83c1476" data-external="true" rel="noopener noreferrer">Gradle documentation</a> on the <code class="code ">maven-publish</code> plugin.</p></section><section class="chapter"><h2 id="what-s-next" data-toc="what-s-next">What's next?</h2>
<ul class="list _bullet" id="a14812aa">
<li class="list__item" id="80454d7a"><p>Learn more about <a href="multiplatform-publish-lib.html" id="65e0966b">publishing multiplatform libraries</a>.</p></li>
<li class="list__item" id="cfb02dc"><p>Learn more about <a href="multiplatform-get-started.html" id="b1e6a950">Kotlin Multiplatform</a>.</p></li>
<li class="list__item" id="1a98b3b1"><p><a href="multiplatform-mobile-create-first-app.html" id="d3ead310">Create your first cross-platform mobile application – tutorial</a>.</p></li>
</ul></section><div class="last-modified"> Last modified: 21 July 2023</div>

<div class="navigation-links _bottom"> <a class="navigation-links__next" href="multiplatform-publish-lib.html">Publishing multiplatform libraries</a> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2023 JetBrains s.r.o. and Kotlin Programming Language contributors<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://kotlinlang.org/docs/multiplatform-library.html" class="_attribution-link">https://kotlinlang.org/docs/multiplatform-library.html</a>
  </p>
</div>
