<h1 data-toc="multiplatform-configure-compilations" id="multiplatform-configure-compilations.md">Configure compilations</h1>
<p id="e2044d1a">Kotlin multiplatform projects use compilations for producing artifacts. Each target can have one or more compilations, for example, for production and test purposes.</p>
<p id="d34d7347">For each target, default compilations include:</p>
<ul class="list _bullet" id="7752a49e">
<li class="list__item" id="e3389a0d"><p><code class="code ">main</code> and <code class="code ">test</code> compilations for JVM, JS, and Native targets.</p></li>
<li class="list__item" id="2664da16"><p>A <a href="#compilation-for-android" id="3ede715a">compilation</a> per <a href="https://developer.android.com/studio/build/build-variants" id="8943411b" data-external="true" rel="noopener noreferrer">Android build variant</a>, for Android targets.</p></li>
</ul>
<figure class=" " id="d9bf59e7"><img alt="Compilations" title="Compilations" src="https://kotlinlang.org/docs/images/compilations.png" class=" " width="1462" height="874"></figure><p id="a43af02d">If you need to compile something other than production code and unit tests, for example, integration or performance tests, you can <a href="#create-a-custom-compilation" id="93a4ecad">create a custom compilation</a>.</p>
<p id="68ce250c">You can configure how artifacts are produced in:</p>
<ul class="list _bullet" id="9230ff38">
<li class="list__item" id="e267c3cb"><p><a href="#configure-all-compilations" id="a9e13f4c">All compilations</a> in your project at once.</p></li>
<li class="list__item" id="2e9298c6"><p><a href="#configure-compilations-for-one-target" id="10abaa7e">Compilations for one target</a> since one target can have multiple compilations.</p></li>
<li class="list__item" id="bc6b2f1b"><p><a href="#configure-one-compilation" id="58488e9f">A specific compilation</a>.</p></li>
</ul>
<p id="3df46d64">See the <a href="multiplatform-dsl-reference.html#compilation-parameters" id="964ae425">list of compilation parameters</a> and <a href="gradle-compiler-options.html" id="4a972dbc">compiler options</a> available for all or specific targets.</p>
<section class="chapter"><h2 id="configure-all-compilations" data-toc="configure-all-compilations">Configure all compilations</h2>
<pre class="code" data-language="kotlin">kotlin {
    targets.all {
        compilations.all {
            compilerOptions.configure {
                allWarningsAsErrors.set(true)
            }
        }
    }
}
</pre></section><section class="chapter"><h2 id="configure-compilations-for-one-target" data-toc="configure-compilations-for-one-target">Configure compilations for one target</h2>
<div class="tabs" id="17f39708" data-group="build-script" data-anchors="[e50f9314,2ca7c0da,54b1bc7a,e97bc072,17f39708]">
<div class="tabs__content" data-gtm="tab" id="e50f9314" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code" data-language="kotlin">kotlin {
    targets.jvm.compilations.all {
        compilerOptions.configure {
            sourceMap.set(true)
            metaInfo.set(true)
        }
    }
}
</pre></div>
<div class="tabs__content" data-gtm="tab" id="54b1bc7a" data-sync-tabs="groovy" data-title="Groovy"><pre class="code" data-language="groovy">kotlin {
    jvm().compilations.all {
        compilerOptions.configure {
            sourceMap.set(true)
            metaInfo.set(true)
        }
    }
}
</pre></div>
</div></section><section class="chapter"><h2 id="configure-one-compilation" data-toc="configure-one-compilation">Configure one compilation</h2>
<div class="tabs" id="aedfa6a7" data-group="build-script" data-anchors="[c720f4a0,d89b1d6b,feab0f95,cfb4c1b3,aedfa6a7]">
<div class="tabs__content" data-gtm="tab" id="c720f4a0" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code" data-language="kotlin">kotlin {
    jvm {
        val main by compilations.getting {
            compilerOptions.configure {
                jvmTarget.set(JvmTarget.JVM_1_8)
            }
        }
    }
}
</pre></div>
<div class="tabs__content" data-gtm="tab" id="feab0f95" data-sync-tabs="groovy" data-title="Groovy"><pre class="code" data-language="groovy">kotlin {
    jvm().compilations.main {
        compilerOptions.configure {
            jvmTarget.set(JvmTarget.JVM_1_8)
        }
    }
}
</pre></div>
</div></section><section class="chapter"><h2 id="create-a-custom-compilation" data-toc="create-a-custom-compilation">Create a custom compilation</h2>
<p id="168348eb">If you need to compile something other than production code and unit tests, for example, integration or performance tests, create a custom compilation.</p>
<p id="3aaf56e9">For example, to create a custom compilation for integration tests of the <code class="code ">jvm()</code> target, add a new item to the <code class="code ">compilations</code> collection.</p>
<aside data-type="note" class="prompt" data-title="" id="d391713f"><p id="a1473bc9">For custom compilations, you need to set up all dependencies manually. The default source set of a custom compilation does not depend on the <code class="code ">commonMain</code> and the <code class="code ">commonTest</code> source sets.</p></aside><div class="tabs" id="281d9ffe" data-group="build-script" data-anchors="[95ec9db9,cf3c65c3,95c75e4c,f883d0d6,281d9ffe]">
<div class="tabs__content" data-gtm="tab" id="95ec9db9" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code" data-language="kotlin">kotlin {
    jvm() {
        compilations {
            val main by getting
            
            val integrationTest by compilations.creating {
                defaultSourceSet {
                    dependencies {
                        // Compile against the main compilation's compile classpath and outputs:
                        implementation(main.compileDependencyFiles + main.output.classesDirs)
                        implementation(kotlin("test-junit"))
                        /* ... */
                    }
                }
                
                // Create a test task to run the tests produced by this compilation:
                tasks.register&lt;Test&gt;("integrationTest") {
                    // Run the tests with the classpath containing the compile dependencies (including 'main'),
                    // runtime dependencies, and the outputs of this compilation:
                    classpath = compileDependencyFiles + runtimeDependencyFiles + output.allOutputs
                    
                    // Run only the tests from this compilation's outputs:
                    testClassesDirs = output.classesDirs
                }
            }
        }
    }
}
</pre></div>
<div class="tabs__content" data-gtm="tab" id="95c75e4c" data-sync-tabs="groovy" data-title="Groovy"><pre class="code" data-language="groovy">kotlin {
    jvm() {
        compilations.create('integrationTest') {
            defaultSourceSet {
                dependencies {
                    def main = compilations.main
                    // Compile against the main compilation's compile classpath and outputs:
                    implementation(main.compileDependencyFiles + main.output.classesDirs)
                    implementation kotlin('test-junit')
                    /* ... */
                }
            }
           
            // Create a test task to run the tests produced by this compilation:
            tasks.register('jvmIntegrationTest', Test) {
                // Run the tests with the classpath containing the compile dependencies (including 'main'),
                // runtime dependencies, and the outputs of this compilation:
                classpath = compileDependencyFiles + runtimeDependencyFiles + output.allOutputs
                
                // Run only the tests from this compilation's outputs:
                testClassesDirs = output.classesDirs
            }
        }
    }
}
</pre></div>
</div>
<p id="684038a5">You also need to create a custom compilation in other cases, for example, if you want to combine compilations for different JVM versions in your final artifact, or you have already set up source sets in Gradle and want to migrate to a multiplatform project.</p></section><section class="chapter"><h2 id="use-java-sources-in-jvm-compilations" data-toc="use-java-sources-in-jvm-compilations">Use Java sources in JVM compilations</h2>
<p id="fe101d4a">When <a href="multiplatform-library.html" id="ff1a7871">creating a project with the Project Wizard</a>, Java sources are included in the compilations of the JVM target.</p>
<p id="de59c67b">In the build script, the following section applies the Gradle <code class="code ">java</code> plugin and configures the target to cooperate with it:</p>
<pre class="code" data-language="kotlin">kotlin {
    jvm {
        withJava()
    }
}
</pre>
<p id="1a91a749">The Java source files are placed in the child directories of the Kotlin source roots. For example, the paths are:</p>
<figure class=" " id="fe3c2777"><img alt="Java source files" title="Java source files" src="data:image/png;base64,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" class=" " width="200" height="227"></figure><p id="6434af96">The common source sets cannot include Java sources.</p>
<p id="993bc473">Due to current limitations, the Kotlin plugin replaces some tasks configured by the Java plugin:</p>
<ul class="list _bullet" id="dd1594c1">
<li class="list__item" id="47288fcf"><p>The target's JAR task instead of <code class="code ">jar</code> (for example, <code class="code ">jvmJar</code>).</p></li>
<li class="list__item" id="92037169"><p>The target's test task instead of <code class="code ">test</code> (for example, <code class="code ">jvmTest</code>).</p></li>
<li class="list__item" id="8fe65e0b"><p>The resources are processed by the equivalent tasks of the compilations instead of <code class="code ">*ProcessResources</code> tasks.</p></li>
</ul>
<p id="eb3094b2">The publication of this target is handled by the Kotlin plugin and doesn't require steps that are specific for the Java plugin.</p></section><section class="chapter"><h2 id="configure-interop-with-native-languages" data-toc="configure-interop-with-native-languages">Configure interop with native languages</h2>
<p id="4703a8d1">Kotlin provides <a href="native-c-interop.html" id="960bc819">interoperability with native languages</a> and DSL to configure this for a specific compilation.</p>
<div class="table-wrapper"><table class=" wide" id="fe7eebde">
<thead><tr class="ijRowHead" id="9d3f3138">
<th id="ac22d515"><p>Native language</p></th>
<th id="d1613b2a"><p>Supported platforms</p></th>
<th id="3c41cd46"><p>Comments</p></th>
</tr></thead>
<tbody>
<tr class="" id="3ef6ea83">
<td id="ea2e127a"><p>C</p></td>
<td id="b35a4ecc"><p>All platforms, except for WebAssembly</p></td>
<td id="4eb83512"></td>
</tr>
<tr class="" id="8c0a0c1b">
<td id="6e1f4d7a"><p>Objective-C</p></td>
<td id="c364c0ef"><p>Apple platforms (macOS, iOS, watchOS, tvOS)</p></td>
<td id="3ebc5f9a"></td>
</tr>
<tr class="" id="b19c4caf">
<td id="c91c3c31"><p>Swift via Objective-C</p></td>
<td id="fabad582"><p>Apple platforms (macOS, iOS, watchOS, tvOS)</p></td>
<td id="7369dad"><p>Kotlin can use only Swift declarations marked with the <code class="code ">@objc</code> attribute.</p></td>
</tr>
</tbody>
</table></div>
<p id="7dd58d52">A compilation can interact with several native libraries. Configure interoperability in the <code class="code ">cinterops</code> block of the compilation with <a href="multiplatform-dsl-reference.html#cinterops" id="b47d1ea1">available parameters</a>.</p>
<div class="tabs" id="c8674b27" data-group="build-script" data-anchors="[7435925e,5ca9d163,d1dc7ab,4be5e7d7,c8674b27]">
<div class="tabs__content" data-gtm="tab" id="7435925e" data-sync-tabs="kotlin" data-title="Kotlin"><pre class="code" data-language="kotlin">kotlin {
    linuxX64 { // Replace with a target you need.
        compilations.getByName("main") {
            val myInterop by cinterops.creating {
                // Def-file describing the native API.
                // The default path is src/nativeInterop/cinterop/&lt;interop-name&gt;.def
                defFile(project.file("def-file.def"))
                
                // Package to place the Kotlin API generated.
                packageName("org.sample")
                
                // Options to be passed to compiler by cinterop tool.
                compilerOpts("-Ipath/to/headers")
              
                // Directories to look for headers.
                includeDirs.apply {
                    // Directories for header search (an equivalent of the -I&lt;path&gt; compiler option).
                    allHeaders("path1", "path2")
                    
                    // Additional directories to search headers listed in the 'headerFilter' def-file option.
                    // -headerFilterAdditionalSearchPrefix command line option equivalent.
                    headerFilterOnly("path1", "path2")
                }
                // A shortcut for includeDirs.allHeaders.
                includeDirs("include/directory", "another/directory")
            }
            
            val anotherInterop by cinterops.creating { /* ... */ }
        }
    }
}
</pre></div>
<div class="tabs__content" data-gtm="tab" id="d1dc7ab" data-sync-tabs="groovy" data-title="Groovy"><pre class="code" data-language="groovy">kotlin {
    linuxX64 { // Replace with a target you need.
        compilations.main {
            cinterops {
                myInterop {
                    // Def-file describing the native API.
                    // The default path is src/nativeInterop/cinterop/&lt;interop-name&gt;.def
                    defFile project.file("def-file.def")
                    
                    // Package to place the Kotlin API generated.
                    packageName 'org.sample'
                    
                    // Options to be passed to compiler by cinterop tool.
                    compilerOpts '-Ipath/to/headers'
                    
                    // Directories for header search (an eqivalent of the -I&lt;path&gt; compiler option).
                    includeDirs.allHeaders("path1", "path2")
                    
                    // Additional directories to search headers listed in the 'headerFilter' def-file option.
                    // -headerFilterAdditionalSearchPrefix command line option equivalent.
                    includeDirs.headerFilterOnly("path1", "path2")
                    
                    // A shortcut for includeDirs.allHeaders.
                    includeDirs("include/directory", "another/directory")
                }
                
                anotherInterop { /* ... */ }
            }
        }
    }
}
</pre></div>
</div></section><section class="chapter"><h2 id="compilation-for-android" data-toc="compilation-for-android">Compilation for Android</h2>
<p id="e612d912">The compilations created for an Android target by default are tied to <a href="https://developer.android.com/studio/build/build-variants" id="bb7a0ae0" data-external="true" rel="noopener noreferrer">Android build variants</a>: for each build variant, a Kotlin compilation is created under the same name.</p>
<p id="bc9dac70">Then, for each <a href="https://developer.android.com/studio/build/build-variants#sourcesets" id="1590d6e1" data-external="true" rel="noopener noreferrer">Android source set</a> compiled for each of the variants, a Kotlin source set is created under that source set name prepended by the target name, like the Kotlin source set <code class="code ">androidDebug</code> for an Android source set <code class="code ">debug</code> and the Kotlin target named <code class="code ">android</code>. These Kotlin source sets are added to the variants' compilations accordingly.</p>
<p id="ec96e9b9">The default source set <code class="code ">commonMain</code> is added to each production (application or library) variant's compilation. The <code class="code ">commonTest</code> source set is similarly added to the compilations of unit test and instrumented test variants.</p>
<p id="20977c31">Annotation processing with <a href="kapt.html" id="e265de54"><code class="code ">kapt</code></a> is also supported, but due to current limitations it requires that the Android target is created before the <code class="code ">kapt</code> dependencies are configured, which needs to be done in a top-level <code class="code ">dependencies</code> block rather than within Kotlin source set dependencies.</p>
<pre class="code" data-language="kotlin">kotlin {
    android { /* ... */ }
}

dependencies {
    kapt("com.my.annotation:processor:1.0.0")
}
</pre></section><section class="chapter"><h2 id="compilation-of-the-source-set-hierarchy" data-toc="compilation-of-the-source-set-hierarchy">Compilation of the source set hierarchy</h2>
<p id="bc42865f">Kotlin can build a <a href="multiplatform-share-on-platforms.html#share-code-on-similar-platforms" id="13966bb1">source set hierarchy</a> with the <code class="code ">dependsOn</code> relation.</p>
<figure class=" " id="a40a5be1"><img alt="Source set hierarchy" title="Source set hierarchy" src="data:image/png;base64,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" class=" " width="400" height="245"></figure><p id="1c4ffa00">If the source set <code class="code ">jvmMain</code> depends on a source set <code class="code ">commonMain</code> then:</p>
<ul class="list _bullet" id="8cd92e35">
<li class="list__item" id="3593769e"><p>Whenever <code class="code ">jvmMain</code> is compiled for a certain target, <code class="code ">commonMain</code> takes part in that compilation as well and is also compiled into the same target binary form, such as JVM class files.</p></li>
<li class="list__item" id="d5686a91"><p>Sources of <code class="code ">jvmMain</code> 'see' the declarations of <code class="code ">commonMain</code>, including internal declarations, and also see the <a href="multiplatform-add-dependencies.html" id="33149270">dependencies</a> of <code class="code ">commonMain</code>, even those specified as <code class="code ">implementation</code> dependencies.</p></li>
<li class="list__item" id="9995bd16"><p><code class="code ">jvmMain</code> can contain platform-specific implementations for the <a href="multiplatform-connect-to-apis.html" id="d6b21768">expected declarations</a> of <code class="code ">commonMain</code>.</p></li>
<li class="list__item" id="76fd1002"><p>The resources of <code class="code ">commonMain</code> are always processed and copied along with the resources of <code class="code ">jvmMain</code>.</p></li>
<li class="list__item" id="1a3d492"><p>The <a href="multiplatform-dsl-reference.html#language-settings" id="1e669f0d">language settings</a> of <code class="code ">jvmMain</code> and <code class="code ">commonMain</code> should be consistent.</p></li>
</ul>
<p id="2b1e97ef">Language settings are checked for consistency in the following ways:</p>
<ul class="list _bullet" id="3e8dbc17">
<li class="list__item" id="2f658129"><p><code class="code ">jvmMain</code> should set a <code class="code ">languageVersion</code> that is greater than or equal to that of <code class="code ">commonMain</code>.</p></li>
<li class="list__item" id="51553074"><p><code class="code ">jvmMain</code> should enable all unstable language features that <code class="code ">commonMain</code> enables (there's no such requirement for bugfix features).</p></li>
<li class="list__item" id="e109333e"><p><code class="code ">jvmMain</code> should use all experimental annotations that <code class="code ">commonMain</code> uses.</p></li>
<li class="list__item" id="a1ac355f"><p><code class="code ">apiVersion</code>, bugfix language features, and <code class="code ">progressiveMode</code> can be set arbitrarily.</p></li>
</ul></section><div class="last-modified"> Last modified: 28 December 2022</div>

<div class="navigation-links _bottom"> <a class="navigation-links__prev" href="multiplatform-run-tests.html">Run tests with Kotlin Multiplatform</a> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2023 JetBrains s.r.o. and Kotlin Programming Language contributors<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://kotlinlang.org/docs/multiplatform-configure-compilations.html" class="_attribution-link">https://kotlinlang.org/docs/multiplatform-configure-compilations.html</a>
  </p>
</div>
