<h1 data-toc="idioms" id="idioms.md">Idioms</h1>
<p id="254db0f8">A collection of random and frequently used idioms in Kotlin. If you have a favorite idiom, contribute it by sending a pull request.</p>
<section class="chapter"><h2 id="create-dtos-pojos-pocos" data-toc="create-dtos-pojos-pocos">Create DTOs (POJOs/POCOs)</h2>
<pre class="code" data-language="kotlin">data class Customer(val name: String, val email: String)
</pre>
<p id="b0d2d868">provides a <code class="code ">Customer</code> class with the following functionality:</p>
<ul class="list _bullet" id="9aefa8a7">
<li class="list__item" id="c0eca97"><p>getters (and setters in case of <code class="code ">var</code>s) for all properties</p></li>
<li class="list__item" id="f4fcb95e"><p><code class="code ">equals()</code></p></li>
<li class="list__item" id="5c690fcc"><p><code class="code ">hashCode()</code></p></li>
<li class="list__item" id="b29665e2"><p><code class="code ">toString()</code></p></li>
<li class="list__item" id="2e106142"><p><code class="code ">copy()</code></p></li>
<li class="list__item" id="2a4cde72"><p><code class="code ">component1()</code>, <code class="code ">component2()</code>, ..., for all properties (see <a href="data-classes.html" id="b145ba8c">Data classes</a>)</p></li>
</ul></section><section class="chapter"><h2 id="default-values-for-function-parameters" data-toc="default-values-for-function-parameters">Default values for function parameters</h2>
<pre class="code" data-language="kotlin">fun foo(a: Int = 0, b: String = "") { ... }
</pre></section><section class="chapter"><h2 id="filter-a-list" data-toc="filter-a-list">Filter a list</h2>
<pre class="code" data-language="kotlin">val positives = list.filter { x -&gt; x &gt; 0 }
</pre>
<p id="7dbe2e05">Or alternatively, even shorter:</p>
<pre class="code" data-language="kotlin">val positives = list.filter { it &gt; 0 }
</pre>
<p id="dfe30726">Learn the difference between <a href="java-to-kotlin-collections-guide.html#filter-elements" id="e4889a88">Java and Kotlin filtering</a>.</p></section><section class="chapter"><h2 id="check-the-presence-of-an-element-in-a-collection" data-toc="check-the-presence-of-an-element-in-a-collection">Check the presence of an element in a collection</h2>
<pre class="code" data-language="kotlin">if ("john@example.com" in emailsList) { ... }

if ("jane@example.com" !in emailsList) { ... }
</pre></section><section class="chapter"><h2 id="string-interpolation" data-toc="string-interpolation">String interpolation</h2>
<pre class="code" data-language="kotlin">println("Name $name")
</pre>
<p id="8b8e5bb0">Learn the difference between <a href="java-to-kotlin-idioms-strings.html#concatenate-strings" id="b803dd73">Java and Kotlin string concatenation</a>.</p></section><section class="chapter"><h2 id="instance-checks" data-toc="instance-checks">Instance checks</h2>
<pre class="code" data-language="kotlin">when (x) {
    is Foo -&gt; ...
    is Bar -&gt; ...
    else   -&gt; ...
}
</pre></section><section class="chapter"><h2 id="read-only-list" data-toc="read-only-list">Read-only list</h2>
<pre class="code" data-language="kotlin">val list = listOf("a", "b", "c")
</pre></section><section class="chapter"><h2 id="read-only-map" data-toc="read-only-map">Read-only map</h2>
<pre class="code" data-language="kotlin">val map = mapOf("a" to 1, "b" to 2, "c" to 3)
</pre></section><section class="chapter"><h2 id="access-a-map-entry" data-toc="access-a-map-entry">Access a map entry</h2>
<pre class="code" data-language="kotlin">println(map["key"])
map["key"] = value
</pre></section><section class="chapter"><h2 id="traverse-a-map-or-a-list-of-pairs" data-toc="traverse-a-map-or-a-list-of-pairs">Traverse a map or a list of pairs</h2>
<pre class="code" data-language="kotlin">for ((k, v) in map) {
    println("$k -&gt; $v")
}
</pre>
<p id="f197ddcd"><code class="code ">k</code> and <code class="code ">v</code> can be any convenient names, such as <code class="code ">name</code> and <code class="code ">age</code>.</p></section><section class="chapter"><h2 id="iterate-over-a-range" data-toc="iterate-over-a-range">Iterate over a range</h2>
<pre class="code" data-language="kotlin">for (i in 1..100) { ... }  // closed-ended range: includes 100
for (i in 1..&lt;100) { ... } // open-ended range: does not include 100
for (x in 2..10 step 2) { ... }
for (x in 10 downTo 1) { ... }
(1..10).forEach { ... }
</pre></section><section class="chapter"><h2 id="lazy-property" data-toc="lazy-property">Lazy property</h2>
<pre class="code" data-language="kotlin">val p: String by lazy { // the value is computed only on first access
    // compute the string
}
</pre></section><section class="chapter"><h2 id="extension-functions" data-toc="extension-functions">Extension functions</h2>
<pre class="code" data-language="kotlin">fun String.spaceToCamelCase() { ... }

"Convert this to camelcase".spaceToCamelCase()
</pre></section><section class="chapter"><h2 id="create-a-singleton" data-toc="create-a-singleton">Create a singleton</h2>
<pre class="code" data-language="kotlin">object Resource {
    val name = "Name"
}
</pre></section><section class="chapter"><h2 id="instantiate-an-abstract-class" data-toc="instantiate-an-abstract-class">Instantiate an abstract class</h2>
<pre class="code" data-language="kotlin">abstract class MyAbstractClass {
    abstract fun doSomething()
    abstract fun sleep()
}

fun main() {
    val myObject = object : MyAbstractClass() {
        override fun doSomething() {
            // ...
        }

        override fun sleep() { // ...
        }
    }
    myObject.doSomething()
}
</pre></section><section class="chapter"><h2 id="if-not-null-shorthand" data-toc="if-not-null-shorthand">If-not-null shorthand</h2>
<pre class="code" data-language="kotlin">val files = File("Test").listFiles()

println(files?.size) // size is printed if files is not null
</pre></section><section class="chapter"><h2 id="if-not-null-else-shorthand" data-toc="if-not-null-else-shorthand">If-not-null-else shorthand</h2>
<pre class="code" data-language="kotlin">val files = File("Test").listFiles()

// For simple fallback values:
println(files?.size ?: "empty") // if files is null, this prints "empty"

// To calculate a more complicated fallback value in a code block, use `run`
val filesSize = files?.size ?: run { 
    val someSize = getSomeSize()
    someSize * 2
}
println(filesSize)
</pre></section><section class="chapter"><h2 id="execute-a-statement-if-null" data-toc="execute-a-statement-if-null">Execute a statement if null</h2>
<pre class="code" data-language="kotlin">val values = ...
val email = values["email"] ?: throw IllegalStateException("Email is missing!")
</pre></section><section class="chapter"><h2 id="get-first-item-of-a-possibly-empty-collection" data-toc="get-first-item-of-a-possibly-empty-collection">Get first item of a possibly empty collection</h2>
<pre class="code" data-language="kotlin">val emails = ... // might be empty
val mainEmail = emails.firstOrNull() ?: ""
</pre>
<p id="737488dc">Learn the difference between <a href="java-to-kotlin-collections-guide.html#get-the-first-and-the-last-items-of-a-possibly-empty-collection" id="dd56c196">Java and Kotlin first item getting</a>.</p></section><section class="chapter"><h2 id="execute-if-not-null" data-toc="execute-if-not-null">Execute if not null</h2>
<pre class="code" data-language="kotlin">val value = ...

value?.let {
    ... // execute this block if not null
}
</pre></section><section class="chapter"><h2 id="map-nullable-value-if-not-null" data-toc="map-nullable-value-if-not-null">Map nullable value if not null</h2>
<pre class="code" data-language="kotlin">val value = ...

val mapped = value?.let { transformValue(it) } ?: defaultValue 
// defaultValue is returned if the value or the transform result is null.
</pre></section><section class="chapter"><h2 id="return-on-when-statement" data-toc="return-on-when-statement">Return on when statement</h2>
<pre class="code" data-language="kotlin">fun transform(color: String): Int {
    return when (color) {
        "Red" -&gt; 0
        "Green" -&gt; 1
        "Blue" -&gt; 2
        else -&gt; throw IllegalArgumentException("Invalid color param value")
    }
}
</pre></section><section class="chapter"><h2 id="try-catch-expression" data-toc="try-catch-expression">try-catch expression</h2>
<pre class="code" data-language="kotlin">fun test() {
    val result = try {
        count()
    } catch (e: ArithmeticException) {
        throw IllegalStateException(e)
    }

    // Working with result
}
</pre></section><section class="chapter"><h2 id="if-expression" data-toc="if-expression">if expression</h2>
<pre class="code" data-language="kotlin">val y = if (x == 1) {
    "one"
} else if (x == 2) {
    "two"
} else {
    "other"
}
</pre></section><section class="chapter"><h2 id="builder-style-usage-of-methods-that-return-unit" data-toc="builder-style-usage-of-methods-that-return-unit">Builder-style usage of methods that return Unit</h2>
<pre class="code" data-language="kotlin">fun arrayOfMinusOnes(size: Int): IntArray {
    return IntArray(size).apply { fill(-1) }
}
</pre></section><section class="chapter"><h2 id="single-expression-functions" data-toc="single-expression-functions">Single-expression functions</h2>
<pre class="code" data-language="kotlin">fun theAnswer() = 42
</pre>
<p id="5a8dbe61">This is equivalent to</p>
<pre class="code" data-language="kotlin">fun theAnswer(): Int {
    return 42
}
</pre>
<p id="93acb158">This can be effectively combined with other idioms, leading to shorter code. For example, with the <code class="code ">when</code> expression:</p>
<pre class="code" data-language="kotlin">fun transform(color: String): Int = when (color) {
    "Red" -&gt; 0
    "Green" -&gt; 1
    "Blue" -&gt; 2
    else -&gt; throw IllegalArgumentException("Invalid color param value")
}
</pre></section><section class="chapter"><h2 id="call-multiple-methods-on-an-object-instance-with" data-toc="call-multiple-methods-on-an-object-instance-with">Call multiple methods on an object instance (with)</h2>
<pre class="code" data-language="kotlin">class Turtle {
    fun penDown()
    fun penUp()
    fun turn(degrees: Double)
    fun forward(pixels: Double)
}

val myTurtle = Turtle()
with(myTurtle) { //draw a 100 pix square
    penDown()
    for (i in 1..4) {
        forward(100.0)
        turn(90.0)
    }
    penUp()
}
</pre></section><section class="chapter"><h2 id="configure-properties-of-an-object-apply" data-toc="configure-properties-of-an-object-apply">Configure properties of an object (apply)</h2>
<pre class="code" data-language="kotlin">val myRectangle = Rectangle().apply {
    length = 4
    breadth = 5
    color = 0xFAFAFA
}
</pre>
<p id="c0f8fbcc">This is useful for configuring properties that aren't present in the object constructor.</p></section><section class="chapter"><h2 id="java-7-s-try-with-resources" data-toc="java-7-s-try-with-resources">Java 7's try-with-resources</h2>
<pre class="code" data-language="kotlin">val stream = Files.newInputStream(Paths.get("/some/file.txt"))
stream.buffered().reader().use { reader -&gt;
    println(reader.readText())
}
</pre></section><section class="chapter"><h2 id="generic-function-that-requires-the-generic-type-information" data-toc="generic-function-that-requires-the-generic-type-information">Generic function that requires the generic type information</h2>
<pre class="code" data-language="kotlin">//  public final class Gson {
//     ...
//     public &lt;T&gt; T fromJson(JsonElement json, Class&lt;T&gt; classOfT) throws JsonSyntaxException {
//     ...

inline fun &lt;reified T: Any&gt; Gson.fromJson(json: JsonElement): T = this.fromJson(json, T::class.java)
</pre></section><section class="chapter"><h2 id="nullable-boolean" data-toc="nullable-boolean">Nullable Boolean</h2>
<pre class="code" data-language="kotlin">val b: Boolean? = ...
if (b == true) {
    ...
} else {
    // `b` is false or null
}
</pre></section><section class="chapter"><h2 id="swap-two-variables" data-toc="swap-two-variables">Swap two variables</h2>
<pre class="code" data-language="kotlin">var a = 1
var b = 2
a = b.also { b = a }
</pre></section><section class="chapter"><h2 id="mark-code-as-incomplete-todo" data-toc="mark-code-as-incomplete-todo">Mark code as incomplete (TODO)</h2>
<p id="6af0e401">Kotlin's standard library has a <code class="code ">TODO()</code> function that will always throw a <code class="code ">NotImplementedError</code>. Its return type is <code class="code ">Nothing</code> so it can be used regardless of expected type. There's also an overload that accepts a reason parameter:</p>
<pre class="code" data-language="kotlin">fun calcTaxes(): BigDecimal = TODO("Waiting for feedback from accounting")
</pre>
<p id="845d1754">IntelliJ IDEA's kotlin plugin understands the semantics of <code class="code ">TODO()</code> and automatically adds a code pointer in the TODO tool window.</p></section><section class="chapter"><h2 id="what-s-next" data-toc="what-s-next">What's next?</h2>
<ul class="list _bullet" id="3a551de5">
<li class="list__item" id="5b8d3068"><p>Solve <a href="advent-of-code.html" id="a75e114c">Advent of Code puzzles</a> using the idiomatic Kotlin style.</p></li>
<li class="list__item" id="d3724dcc"><p>Learn how to perform <a href="java-to-kotlin-idioms-strings.html" id="4e7a06d1">typical tasks with strings in Java and Kotlin</a>.</p></li>
<li class="list__item" id="8514be03"><p>Learn how to perform <a href="java-to-kotlin-collections-guide.html" id="fb32f9e6">typical tasks with collections in Java and Kotlin</a>.</p></li>
<li class="list__item" id="12a61f3f"><p>Learn how to <a href="java-to-kotlin-nullability-guide.html" id="f8eb72ae">handle nullability in Java and Kotlin</a>.</p></li>
</ul></section><div class="last-modified"> Last modified: 13 July 2023</div>

<div class="navigation-links _bottom"> <a class="navigation-links__prev" href="basic-syntax.html">Basic syntax</a> <a class="navigation-links__next" href="coding-conventions.html">Coding conventions</a> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010&ndash;2023 JetBrains s.r.o. and Kotlin Programming Language contributors<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://kotlinlang.org/docs/idioms.html" class="_attribution-link">https://kotlinlang.org/docs/idioms.html</a>
  </p>
</div>
