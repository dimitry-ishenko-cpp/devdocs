<devsite-feature-tooltip ack-key="AckCollectionsBookmarkTooltipDismiss" analytics-category="Site-Wide Custom Events" analytics-action-show="Callout Profile displayed" analytics-action-close="Callout Profile dismissed" analytics-label="Create Collection Callout" class="devsite-page-bookmark-tooltip nocontent" dismiss-button="true" id="devsite-collections-dropdown" dismiss-button-text="Dismiss" close-button-text="Got it">    </devsite-feature-tooltip>   <devsite-mathjax config="TeX-AMS-MML_SVG"></devsite-mathjax>  <h1 id="tensorflow::ops::segmentmaxv2" data-text="tensorflow::ops::SegmentMaxV2" tabindex="-1">tensorflow::ops::SegmentMaxV2</h1> <p><code translate="no" dir="ltr">#include &lt;math_ops.h&gt;</code></p> <p>Computes the maximum along segments of a tensor. </p> <h2 id="summary" data-text="Summary" tabindex="-1">Summary</h2> <p>Read <a href="https://tensorflow.org/api_docs/python/tf/math#Segmentation">the section on segmentation</a> for an explanation of segments.</p> <p>Computes a tensor such that \(output_i = \max_j(data_j)\) where <code translate="no" dir="ltr">max</code> is over <code translate="no" dir="ltr">j</code> such that <code translate="no" dir="ltr">segment_ids[j] == i</code>.</p> <p>If the maximum is empty for a given segment ID <code translate="no" dir="ltr">i</code>, it outputs the smallest possible value for the specific numeric type, <code translate="no" dir="ltr">output[i] = numeric_limits<t>::lowest()</t></code>.</p> <p>Note: That this op is currently only supported with jit_compile=True.</p> <p>Caution: On CPU, values in <code translate="no" dir="ltr">segment_ids</code> are always validated to be sorted, and an error is thrown for indices that are not increasing. On GPU, this does not throw an error for unsorted indices. On GPU, out-of-order indices result in safe but unspecified behavior, which may include treating out-of-order indices as the same as a smaller following index.</p> <p>The only difference with <a href="segment-max.html#classtensorflow_1_1ops_1_1_segment_max">SegmentMax</a> is the additional input <code translate="no" dir="ltr">num_segments</code>. This helps in evaluating the output shape in compile time. <code translate="no" dir="ltr">num_segments</code> should be consistent with segment_ids. e.g. Max(segment_ids) should be equal to <code translate="no" dir="ltr">num_segments</code> - 1 for a 1-d segment_ids With inconsistent num_segments, the op still runs. only difference is, the output takes the size of num_segments irrespective of size of segment_ids and data. for num_segments less than expected output size, the last elements are ignored for num_segments more than the expected output size, last elements are assigned smallest possible value for the specific numeric type.</p> <p>For example:</p> <p>.function(jit_compile=True) ... def test(c): ... return tf.raw_ops.SegmentMaxV2(data=c, segment_ids=tf.constant([0, 0, 1]), num_segments=2) c = tf.constant([[1,2,3,4], [4, 3, 2, 1], [5,6,7,8]]) test(c).numpy() array([[4, 3, 3, 4], [5, 6, 7, 8]], dtype=int32)</p> <p>Args:</p>
<ul> <li>scope: A <a href="../scope.html#classtensorflow_1_1_scope">Scope</a> object</li> <li>segment_ids: A 1-D tensor whose size is equal to the size of <code translate="no" dir="ltr">data</code>'s first dimension. Values should be sorted and can be repeated. The values must be less than <code translate="no" dir="ltr">num_segments</code>.</li> </ul> <p>Caution: The values are always validated to be sorted on CPU, never validated on GPU.</p> <p>Returns:</p>
<ul> <li>
<code translate="no" dir="ltr"><a href="../output.html#classtensorflow_1_1_output">Output</a></code>: Has same shape as data, except for the first <code translate="no" dir="ltr">segment_ids.rank</code> dimensions, which are replaced with a single dimensionw which has size <code translate="no" dir="ltr">num_segments</code>. </li> </ul> <table class="constructors responsive"> <tr> <th colspan="2"> Constructors and Destructors </th> </tr> <tr> <td colspan="2"> <code translate="no" dir="ltr"><a href="#classtensorflow_1_1ops_1_1_segment_max_v2_1a840a6b362b66dbae48665a1d362f295c">SegmentMaxV2</a>(const ::<a href="../scope.html#classtensorflow_1_1_scope">tensorflow::Scope</a> &amp; scope, ::<a href="../input.html#classtensorflow_1_1_input">tensorflow::Input</a> data, ::<a href="../input.html#classtensorflow_1_1_input">tensorflow::Input</a> segment_ids, ::<a href="../input.html#classtensorflow_1_1_input">tensorflow::Input</a> num_segments)</code> <br> </td> </tr> </table> <table class="properties responsive"> <tr> <th colspan="2"> Public attributes </th> </tr> <tr> <td> <code translate="no" dir="ltr"><a href="#classtensorflow_1_1ops_1_1_segment_max_v2_1ae427edf5fdd474f173a3ca6420e233de">operation</a></code> </td> <td> <div> <code translate="no" dir="ltr"><a href="../operation.html#classtensorflow_1_1_operation">Operation</a></code> </div> </td> </tr> <tr> <td> <code translate="no" dir="ltr"><a href="#classtensorflow_1_1ops_1_1_segment_max_v2_1aaa37b1f2e9526b8e1688af5a5d45d6e9">output</a></code> </td> <td> <div> <code translate="no" dir="ltr">::<a href="../output.html#classtensorflow_1_1_output">tensorflow::Output</a></code> </div> </td> </tr> </table> <table class="methods responsive"> <tr> <th colspan="2"> Public functions </th> </tr> <tr> <td> <code translate="no" dir="ltr"><a href="#classtensorflow_1_1ops_1_1_segment_max_v2_1ade3b9f7af8685e1ad9fbfe8d0009403d">node</a>() const </code> </td> <td> <div> <code translate="no" dir="ltr">::tensorflow::Node *</code> </div> </td> </tr> <tr> <td> <code translate="no" dir="ltr"><a href="#classtensorflow_1_1ops_1_1_segment_max_v2_1ad50430503ccba28f80db5412c26d3c85">operator::tensorflow::Input</a>() const </code> </td> <td>  </td> </tr> <tr> <td> <code translate="no" dir="ltr"><a href="#classtensorflow_1_1ops_1_1_segment_max_v2_1a82a172846025d41c4d8e7a0447ad0a25">operator::tensorflow::Output</a>() const </code> </td> <td>  </td> </tr> </table> <h2 id="public-attributes_1" data-text="Public attributes" tabindex="-1">Public attributes</h2> <div id="classtensorflow_1_1ops_1_1_segment_max_v2_1ae427edf5fdd474f173a3ca6420e233de"> <h3 id="operation" data-text="operation" tabindex="-1">operation</h3> 
<devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Text only" data-language="cpp">Operation operation</pre></devsite-code>  </div> <div id="classtensorflow_1_1ops_1_1_segment_max_v2_1aaa37b1f2e9526b8e1688af5a5d45d6e9"> <h3 id="output" data-text="output" tabindex="-1">output</h3> 
<devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="Text only" data-language="cpp">::tensorflow::Output output</pre></devsite-code>  </div> <h2 id="public-functions_1" data-text="Public functions" tabindex="-1">Public functions</h2> <div id="classtensorflow_1_1ops_1_1_segment_max_v2_1a840a6b362b66dbae48665a1d362f295c"> <h3 id="segmentmaxv2" data-text="SegmentMaxV2" tabindex="-1">SegmentMaxV2</h3> 
<devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="GDScript" data-language="cpp"> SegmentMaxV2(
  const ::tensorflow::Scope &amp; scope,
  ::tensorflow::Input data,
  ::tensorflow::Input segment_ids,
  ::tensorflow::Input num_segments
)</pre></devsite-code>  </div> <div id="classtensorflow_1_1ops_1_1_segment_max_v2_1ade3b9f7af8685e1ad9fbfe8d0009403d"> <h3 id="node" data-text="node" tabindex="-1">node</h3> 
<devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="GDScript" data-language="cpp">::tensorflow::Node * node() const </pre></devsite-code>  </div> <div id="classtensorflow_1_1ops_1_1_segment_max_v2_1ad50430503ccba28f80db5412c26d3c85"> <h3 id="operator::tensorflow::input" data-text="operator::tensorflow::Input" tabindex="-1">operator::tensorflow::Input</h3> 
<devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="GDScript" data-language="cpp">operator::tensorflow::Input() const </pre></devsite-code>  </div> <div id="classtensorflow_1_1ops_1_1_segment_max_v2_1a82a172846025d41c4d8e7a0447ad0a25"> <h3 id="operator::tensorflow::output" data-text="operator::tensorflow::Output" tabindex="-1">operator::tensorflow::Output</h3> 
<devsite-code><pre class="devsite-click-to-copy" translate="no" dir="ltr" is-upgraded syntax="GDScript" data-language="cpp">operator::tensorflow::Output() const </pre></devsite-code>  </div>  <devsite-thumb-rating position="footer"> </devsite-thumb-rating> <div class="_attribution">
  <p class="_attribution-p">
    &copy; 2022 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 4.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/api_docs/cc/class/tensorflow/ops/segment-max-v2" class="_attribution-link">https://www.tensorflow.org/api_docs/cc/class/tensorflow/ops/segment-max-v2</a>
  </p>
</div>
