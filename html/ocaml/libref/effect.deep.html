<h1>Module Effect.Deep</h1> <pre id="MODULEDeep" data-type="module Deep [Module Effect.Deep]" data-language="ocaml">module Deep: sig .. end</pre> <p>Deep handlers</p> <pre id="TYPEcontinuation" data-type="type ('a, 'b) continuation [Module Effect.Deep]" data-language="ocaml">type ('a, 'b) continuation </pre> <div class="info "> <div class="info-desc"> <p><code class="code">(<span class="keywordsign">'</span>a,<span class="keywordsign">'</span>b) continuation</code> is a delimited continuation that expects a <code class="code"><span class="keywordsign">'</span>a</code> value and returns a <code class="code"><span class="keywordsign">'</span>b</code> value.</p> </div> </div> <pre id="VALcontinue" data-type="val continue [Module Effect.Deep]" data-language="ocaml">val continue : ('a, 'b) continuation -&gt; 'a -&gt; 'b</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">continue k x</code> resumes the continuation <code class="code">k</code> by passing <code class="code">x</code> to <code class="code">k</code>.</p> </div> <ul class="info-attributes"> <li>
<b>Raises</b> <code>Continuation_already_resumed</code> if the continuation has already been resumed.</li> </ul> </div> <pre id="VALdiscontinue" data-type="val discontinue [Module Effect.Deep]" data-language="ocaml">val discontinue : ('a, 'b) continuation -&gt; exn -&gt; 'b</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">discontinue k e</code> resumes the continuation <code class="code">k</code> by raising the exception <code class="code">e</code> in <code class="code">k</code>.</p> </div> <ul class="info-attributes"> <li>
<b>Raises</b> <code>Continuation_already_resumed</code> if the continuation has already been resumed.</li> </ul> </div> <pre id="VALdiscontinue_with_backtrace" data-type="val discontinue_with_backtrace [Module Effect.Deep]" data-language="ocaml">val discontinue_with_backtrace : ('a, 'b) continuation -&gt;       exn -&gt; Printexc.raw_backtrace -&gt; 'b</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">discontinue_with_backtrace k e bt</code> resumes the continuation <code class="code">k</code> by raising the exception <code class="code">e</code> in <code class="code">k</code> using <code class="code">bt</code> as the origin for the exception.</p> </div> <ul class="info-attributes"> <li>
<b>Raises</b> <code>Continuation_already_resumed</code> if the continuation has already been resumed.</li> </ul> </div> <pre id="TYPEhandler" data-type="type ('a, 'b) handler [Module Effect.Deep]" data-language="ocaml">type ('a, 'b) handler = {</pre>
<table class="typetable"> <tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELThandler.retc">retc</span> : <code class="type">'a -&gt; 'b</code>;</code>
</td> </tr> <tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELThandler.exnc">exnc</span> : <code class="type">exn -&gt; 'b</code>;</code>
</td> </tr> <tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELThandler.effc">effc</span> : <code class="type">'c. 'c <a href="effect.html#TYPEt">Effect.t</a> -&gt; (('c, 'b) <a href="effect.deep.html#TYPEcontinuation">continuation</a> -&gt; 'b) option</code>;</code>
</td> </tr>
</table> <code>}</code> <div class="info "> <div class="info-desc"> <p><code class="code">(<span class="keywordsign">'</span>a,<span class="keywordsign">'</span>b) handler</code> is a handler record with three fields -- <code class="code">retc</code> is the value handler, <code class="code">exnc</code> handles exceptions, and <code class="code">effc</code> handles the effects performed by the computation enclosed by the handler.</p> </div> </div> <pre id="VALmatch_with" data-type="val match_with [Module Effect.Deep]" data-language="ocaml">val match_with : ('c -&gt; 'a) -&gt; 'c -&gt; ('a, 'b) handler -&gt; 'b</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">match_with f v h</code> runs the computation <code class="code">f v</code> in the handler <code class="code">h</code>.</p> </div> </div> <pre id="TYPEeffect_handler" data-type="type 'a effect_handler [Module Effect.Deep]" data-language="ocaml">type 'a effect_handler = {</pre>
<table class="typetable"> <tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELTeffect_handler.effc">effc</span> : <code class="type">'b. 'b <a href="effect.html#TYPEt">Effect.t</a> -&gt; (('b, 'a) <a href="effect.deep.html#TYPEcontinuation">continuation</a> -&gt; 'a) option</code>;</code>
</td> </tr>
</table> <code>}</code> <div class="info "> <div class="info-desc"> <p><code class="code"><span class="keywordsign">'</span>a effect_handler</code> is a deep handler with an identity value handler <code class="code"><span class="keyword">fun</span> x <span class="keywordsign">-&gt;</span> x</code> and an exception handler that raises any exception <code class="code"><span class="keyword">fun</span> e <span class="keywordsign">-&gt;</span> raise e</code>.</p> </div> </div> <pre id="VALtry_with" data-type="val try_with [Module Effect.Deep]" data-language="ocaml">val try_with : ('b -&gt; 'a) -&gt; 'b -&gt; 'a effect_handler -&gt; 'a</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">try_with f v h</code> runs the computation <code class="code">f v</code> under the handler <code class="code">h</code>.</p> </div> </div> <pre id="VALget_callstack" data-type="val get_callstack [Module Effect.Deep]" data-language="ocaml">val get_callstack : ('a, 'b) continuation -&gt; int -&gt; Printexc.raw_backtrace</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">get_callstack c n</code> returns a description of the top of the call stack on the continuation <code class="code">c</code>, with at most <code class="code">n</code> entries.</p> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1995-2022 INRIA.<br>
    <a href="https://v2.ocaml.org/releases/5.0/htmlman/libref/Effect.Deep.html" class="_attribution-link">https://v2.ocaml.org/releases/5.0/htmlman/libref/Effect.Deep.html</a>
  </p>
</div>
