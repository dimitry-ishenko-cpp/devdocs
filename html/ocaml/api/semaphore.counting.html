<div class="api"> <h1>Module Semaphore.Counting</h1> <pre id="MODULECounting" data-type="module Counting [Module Semaphore.Counting]" data-language="ocaml">module Counting: sig .. end</pre> <pre id="TYPEt" data-type="type t [Module Semaphore.Counting]" data-language="ocaml">type t </pre> <div class="info "> <div class="info-desc"> <p>The type of counting semaphores.</p> </div> </div> <pre id="VALmake" data-type="val make [Module Semaphore.Counting]" data-language="ocaml">val make : int -&gt; t</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">make n</code> returns a new counting semaphore, with initial value <code class="code">n</code>. The initial value <code class="code">n</code> must be nonnegative.</p> </div> <ul class="info-attributes"> <li>
<b>Raises</b> <code>Invalid_argument</code> if <code class="code">n &lt; 0</code>
</li> </ul> </div> <pre id="VALrelease" data-type="val release [Module Semaphore.Counting]" data-language="ocaml">val release : t -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">release s</code> increments the value of semaphore <code class="code">s</code>. If other threads are waiting on <code class="code">s</code>, one of them is restarted. If the current value of <code class="code">s</code> is equal to <code class="code">max_int</code>, the value of the semaphore is unchanged and a <code class="code"><span class="constructor">Sys_error</span></code> exception is raised to signal overflow.</p> </div> <ul class="info-attributes"> <li>
<b>Raises</b> <code>Sys_error</code> if the value of the semaphore would overflow <code class="code">max_int</code>
</li> </ul> </div> <pre id="VALacquire" data-type="val acquire [Module Semaphore.Counting]" data-language="ocaml">val acquire : t -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">acquire s</code> blocks the calling thread until the value of semaphore <code class="code">s</code> is not zero, then atomically decrements the value of <code class="code">s</code> and returns.</p> </div> </div> <pre id="VALtry_acquire" data-type="val try_acquire [Module Semaphore.Counting]" data-language="ocaml">val try_acquire : t -&gt; bool</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">try_acquire s</code> immediately returns <code class="code"><span class="keyword">false</span></code> if the value of semaphore <code class="code">s</code> is zero. Otherwise, the value of <code class="code">s</code> is atomically decremented and <code class="code">try_acquire s</code> returns <code class="code"><span class="keyword">true</span></code>.</p> </div> </div> <pre id="VALget_value" data-type="val get_value [Module Semaphore.Counting]" data-language="ocaml">val get_value : t -&gt; int</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">get_value s</code> returns the current value of semaphore <code class="code">s</code>. The current value can be modified at any time by concurrent <a href="semaphore.counting.html#VALrelease"><code class="code"><span class="constructor">Semaphore</span>.<span class="constructor">Counting</span>.release</code></a> and <a href="semaphore.counting.html#VALacquire"><code class="code"><span class="constructor">Semaphore</span>.<span class="constructor">Counting</span>.acquire</code></a> operations. Hence, the <code class="code">get_value</code> operation is racy, and its result should only be used for debugging or informational messages.</p> </div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1995-2024 INRIA.<br>
    <a href="https://ocaml.org/manual/5.2/api/Semaphore.Counting.html" class="_attribution-link">https://ocaml.org/manual/5.2/api/Semaphore.Counting.html</a>
  </p>
</div>
