<div class="api"> <h1>Module Effect.Shallow</h1> <pre id="MODULEShallow" data-type="module Shallow [Module Effect.Shallow]" data-language="ocaml">module Shallow: sig .. end</pre> <pre id="TYPEcontinuation" data-type="type ('a, 'b) continuation [Module Effect.Shallow]" data-language="ocaml">type ('a, 'b) continuation </pre> <div class="info "> <div class="info-desc"> <p><code class="code">(<span class="keywordsign">'</span>a,<span class="keywordsign">'</span>b) continuation</code> is a delimited continuation that expects a <code class="code"><span class="keywordsign">'</span>a</code> value and returns a <code class="code"><span class="keywordsign">'</span>b</code> value.</p> </div> </div> <pre id="VALfiber" data-type="val fiber [Module Effect.Shallow]" data-language="ocaml">val fiber : ('a -&gt; 'b) -&gt; ('a, 'b) continuation</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">fiber f</code> constructs a continuation that runs the computation <code class="code">f</code>.</p> </div> </div> <pre id="TYPEhandler" data-type="type ('a, 'b) handler [Module Effect.Shallow]" data-language="ocaml">type ('a, 'b) handler = {</pre>
<table class="typetable"> <tbody>
<tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELThandler.retc">retc</span> : <code class="type">'a -&gt; 'b</code>;</code>
</td> </tr> <tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELThandler.exnc">exnc</span> : <code class="type">exn -&gt; 'b</code>;</code>
</td> </tr> <tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELThandler.effc">effc</span> : <code class="type">'c. 'c <a href="effect.html#TYPEt">Effect.t</a> -&gt; (('c, 'a) <a href="effect.shallow.html#TYPEcontinuation">continuation</a> -&gt; 'b) option</code>;</code>
</td> </tr>
</tbody>
</table> <code>}</code> <div class="info "> <div class="info-desc"> <p><code class="code">(<span class="keywordsign">'</span>a,<span class="keywordsign">'</span>b) handler</code> is a handler record with three fields -- <code class="code">retc</code> is the value handler, <code class="code">exnc</code> handles exceptions, and <code class="code">effc</code> handles the effects performed by the computation enclosed by the handler.</p> </div> </div> <pre id="VALcontinue_with" data-type="val continue_with [Module Effect.Shallow]" data-language="ocaml">val continue_with : ('c, 'a) continuation -&gt;       'c -&gt; ('a, 'b) handler -&gt; 'b</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">continue_with k v h</code> resumes the continuation <code class="code">k</code> with value <code class="code">v</code> with the handler <code class="code">h</code>.</p> </div> <ul class="info-attributes"> <li>
<b>Raises</b> <code>Continuation_already_resumed</code> if the continuation has already been resumed.</li> </ul> </div> <pre id="VALdiscontinue_with" data-type="val discontinue_with [Module Effect.Shallow]" data-language="ocaml">val discontinue_with : ('c, 'a) continuation -&gt;       exn -&gt; ('a, 'b) handler -&gt; 'b</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">discontinue_with k e h</code> resumes the continuation <code class="code">k</code> by raising the exception <code class="code">e</code> with the handler <code class="code">h</code>.</p> </div> <ul class="info-attributes"> <li>
<b>Raises</b> <code>Continuation_already_resumed</code> if the continuation has already been resumed.</li> </ul> </div> <pre id="VALdiscontinue_with_backtrace" data-type="val discontinue_with_backtrace [Module Effect.Shallow]" data-language="ocaml">val discontinue_with_backtrace : ('a, 'b) continuation -&gt;       exn -&gt; Printexc.raw_backtrace -&gt; ('b, 'c) handler -&gt; 'c</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">discontinue_with k e bt h</code> resumes the continuation <code class="code">k</code> by raising the exception <code class="code">e</code> with the handler <code class="code">h</code> using the raw backtrace <code class="code">bt</code> as the origin of the exception.</p> </div> <ul class="info-attributes"> <li>
<b>Raises</b> <code>Continuation_already_resumed</code> if the continuation has already been resumed.</li> </ul> </div> <pre id="VALget_callstack" data-type="val get_callstack [Module Effect.Shallow]" data-language="ocaml">val get_callstack : ('a, 'b) continuation -&gt; int -&gt; Printexc.raw_backtrace</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">get_callstack c n</code> returns a description of the top of the call stack on the continuation <code class="code">c</code>, with at most <code class="code">n</code> entries.</p> </div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1995-2024 INRIA.<br>
    <a href="https://ocaml.org/manual/5.2/api/Effect.Shallow.html" class="_attribution-link">https://ocaml.org/manual/5.2/api/Effect.Shallow.html</a>
  </p>
</div>
