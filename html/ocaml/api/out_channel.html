<div class="api"> <h1>Module Out_channel</h1> <pre id="MODULEOut_channel" data-type="module Out_channel [Module Out_channel]" data-language="ocaml">module Out_channel: sig .. end</pre>
<div class="info module top"> <div class="info-desc"> <p>Output channels.</p> <p>This module provides functions for working with output channels.</p> <p>See <a href="out_channel.html#examples"> the example section</a> below.</p> </div> <ul class="info-attributes"> <li>
<b>Since</b> 4.14</li> </ul> </div>  <h2 id="channels">Channels</h2> <pre id="TYPEt" data-type="type t [Module Out_channel]" data-language="ocaml">type t = out_channel </pre> <div class="info "> <div class="info-desc"> <p>The type of output channel.</p> </div> </div> <pre id="TYPEopen_flag" data-type="type open_flag [Module Out_channel]" data-language="ocaml">type open_flag = open_flag = </pre>
<table class="typetable"> <tbody>
<tr> <td align="left" valign="top"> <code><span class="keyword">|</span></code>
</td> <td align="left" valign="top"> <code><span id="TYPEELTopen_flag.Open_rdonly"><span class="constructor">Open_rdonly</span></span></code>
</td> <td class="typefieldcomment" align="left" valign="top"><code>(*</code></td>
<td class="typefieldcomment" align="left" valign="top">
<div class="info "> <div class="info-desc"> <p>open for reading.</p> </div> </div> </td>
<td class="typefieldcomment" align="left" valign="bottom"><code>*)</code></td> </tr> <tr> <td align="left" valign="top"> <code><span class="keyword">|</span></code>
</td> <td align="left" valign="top"> <code><span id="TYPEELTopen_flag.Open_wronly"><span class="constructor">Open_wronly</span></span></code>
</td> <td class="typefieldcomment" align="left" valign="top"><code>(*</code></td>
<td class="typefieldcomment" align="left" valign="top">
<div class="info "> <div class="info-desc"> <p>open for writing.</p> </div> </div> </td>
<td class="typefieldcomment" align="left" valign="bottom"><code>*)</code></td> </tr> <tr> <td align="left" valign="top"> <code><span class="keyword">|</span></code>
</td> <td align="left" valign="top"> <code><span id="TYPEELTopen_flag.Open_append"><span class="constructor">Open_append</span></span></code>
</td> <td class="typefieldcomment" align="left" valign="top"><code>(*</code></td>
<td class="typefieldcomment" align="left" valign="top">
<div class="info "> <div class="info-desc"> <p>open for appending: always write at end of file.</p> </div> </div> </td>
<td class="typefieldcomment" align="left" valign="bottom"><code>*)</code></td> </tr> <tr> <td align="left" valign="top"> <code><span class="keyword">|</span></code>
</td> <td align="left" valign="top"> <code><span id="TYPEELTopen_flag.Open_creat"><span class="constructor">Open_creat</span></span></code>
</td> <td class="typefieldcomment" align="left" valign="top"><code>(*</code></td>
<td class="typefieldcomment" align="left" valign="top">
<div class="info "> <div class="info-desc"> <p>create the file if it does not exist.</p> </div> </div> </td>
<td class="typefieldcomment" align="left" valign="bottom"><code>*)</code></td> </tr> <tr> <td align="left" valign="top"> <code><span class="keyword">|</span></code>
</td> <td align="left" valign="top"> <code><span id="TYPEELTopen_flag.Open_trunc"><span class="constructor">Open_trunc</span></span></code>
</td> <td class="typefieldcomment" align="left" valign="top"><code>(*</code></td>
<td class="typefieldcomment" align="left" valign="top">
<div class="info "> <div class="info-desc"> <p>empty the file if it already exists.</p> </div> </div> </td>
<td class="typefieldcomment" align="left" valign="bottom"><code>*)</code></td> </tr> <tr> <td align="left" valign="top"> <code><span class="keyword">|</span></code>
</td> <td align="left" valign="top"> <code><span id="TYPEELTopen_flag.Open_excl"><span class="constructor">Open_excl</span></span></code>
</td> <td class="typefieldcomment" align="left" valign="top"><code>(*</code></td>
<td class="typefieldcomment" align="left" valign="top">
<div class="info "> <div class="info-desc"> <p>fail if Open_creat and the file already exists.</p> </div> </div> </td>
<td class="typefieldcomment" align="left" valign="bottom"><code>*)</code></td> </tr> <tr> <td align="left" valign="top"> <code><span class="keyword">|</span></code>
</td> <td align="left" valign="top"> <code><span id="TYPEELTopen_flag.Open_binary"><span class="constructor">Open_binary</span></span></code>
</td> <td class="typefieldcomment" align="left" valign="top"><code>(*</code></td>
<td class="typefieldcomment" align="left" valign="top">
<div class="info "> <div class="info-desc"> <p>open in binary mode (no conversion).</p> </div> </div> </td>
<td class="typefieldcomment" align="left" valign="bottom"><code>*)</code></td> </tr> <tr> <td align="left" valign="top"> <code><span class="keyword">|</span></code>
</td> <td align="left" valign="top"> <code><span id="TYPEELTopen_flag.Open_text"><span class="constructor">Open_text</span></span></code>
</td> <td class="typefieldcomment" align="left" valign="top"><code>(*</code></td>
<td class="typefieldcomment" align="left" valign="top">
<div class="info "> <div class="info-desc"> <p>open in text mode (may perform conversions).</p> </div> </div> </td>
<td class="typefieldcomment" align="left" valign="bottom"><code>*)</code></td> </tr> <tr> <td align="left" valign="top"> <code><span class="keyword">|</span></code>
</td> <td align="left" valign="top"> <code><span id="TYPEELTopen_flag.Open_nonblock"><span class="constructor">Open_nonblock</span></span></code>
</td> <td class="typefieldcomment" align="left" valign="top"><code>(*</code></td>
<td class="typefieldcomment" align="left" valign="top">
<div class="info "> <div class="info-desc"> <p>open in non-blocking mode.</p> </div> </div> </td>
<td class="typefieldcomment" align="left" valign="bottom"><code>*)</code></td> </tr>
</tbody>
</table> <div class="info "> <div class="info-desc"> <p>Opening modes for <a href="out_channel.html#VALopen_gen"><code class="code"><span class="constructor">Out_channel</span>.open_gen</code></a>.</p> </div> </div> <pre id="VALstdout" data-type="val stdout [Module Out_channel]" data-language="ocaml">val stdout : t</pre>
<div class="info "> <div class="info-desc"> <p>The standard output for the process.</p> </div> </div> <pre id="VALstderr" data-type="val stderr [Module Out_channel]" data-language="ocaml">val stderr : t</pre>
<div class="info "> <div class="info-desc"> <p>The standard error output for the process.</p> </div> </div> <pre id="VALopen_bin" data-type="val open_bin [Module Out_channel]" data-language="ocaml">val open_bin : string -&gt; t</pre>
<div class="info "> <div class="info-desc"> <p>Open the named file for writing, and return a new output channel on that file, positioned at the beginning of the file. The file is truncated to zero length if it already exists. It is created if it does not already exists.</p> </div> </div> <pre id="VALopen_text" data-type="val open_text [Module Out_channel]" data-language="ocaml">val open_text : string -&gt; t</pre>
<div class="info "> <div class="info-desc"> <p>Same as <a href="out_channel.html#VALopen_bin"><code class="code"><span class="constructor">Out_channel</span>.open_bin</code></a>, but the file is opened in text mode, so that newline translation takes place during writes. On operating systems that do not distinguish between text mode and binary mode, this function behaves like <a href="out_channel.html#VALopen_bin"><code class="code"><span class="constructor">Out_channel</span>.open_bin</code></a>.</p> </div> </div> <pre id="VALopen_gen" data-type="val open_gen [Module Out_channel]" data-language="ocaml">val open_gen : open_flag list -&gt; int -&gt; string -&gt; t</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">open_gen mode perm filename</code> opens the named file for writing, as described above. The extra argument <code class="code">mode</code> specifies the opening mode. The extra argument <code class="code">perm</code> specifies the file permissions, in case the file must be created. <a href="out_channel.html#VALopen_text"><code class="code"><span class="constructor">Out_channel</span>.open_text</code></a> and <a href="out_channel.html#VALopen_bin"><code class="code"><span class="constructor">Out_channel</span>.open_bin</code></a> are special cases of this function.</p> </div> </div> <pre id="VALwith_open_bin" data-type="val with_open_bin [Module Out_channel]" data-language="ocaml">val with_open_bin : string -&gt; (t -&gt; 'a) -&gt; 'a</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">with_open_bin fn f</code> opens a channel <code class="code">oc</code> on file <code class="code">fn</code> and returns <code class="code">f<br>
    oc</code>. After <code class="code">f</code> returns, either with a value or by raising an exception, <code class="code">oc</code> is guaranteed to be closed.</p> </div> </div> <pre id="VALwith_open_text" data-type="val with_open_text [Module Out_channel]" data-language="ocaml">val with_open_text : string -&gt; (t -&gt; 'a) -&gt; 'a</pre>
<div class="info "> <div class="info-desc"> <p>Like <a href="out_channel.html#VALwith_open_bin"><code class="code"><span class="constructor">Out_channel</span>.with_open_bin</code></a>, but the channel is opened in text mode (see <a href="out_channel.html#VALopen_text"><code class="code"><span class="constructor">Out_channel</span>.open_text</code></a>).</p> </div> </div> <pre id="VALwith_open_gen" data-type="val with_open_gen [Module Out_channel]" data-language="ocaml">val with_open_gen : open_flag list -&gt; int -&gt; string -&gt; (t -&gt; 'a) -&gt; 'a</pre>
<div class="info "> <div class="info-desc"> <p>Like <a href="out_channel.html#VALwith_open_bin"><code class="code"><span class="constructor">Out_channel</span>.with_open_bin</code></a>, but can specify the opening mode and file permission, in case the file must be created (see <a href="out_channel.html#VALopen_gen"><code class="code"><span class="constructor">Out_channel</span>.open_gen</code></a>).</p> </div> </div> <pre id="VALclose" data-type="val close [Module Out_channel]" data-language="ocaml">val close : t -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>Close the given channel, flushing all buffered write operations. Output functions raise a <code class="code"><span class="constructor">Sys_error</span></code> exception when they are applied to a closed output channel, except <a href="out_channel.html#VALclose"><code class="code"><span class="constructor">Out_channel</span>.close</code></a> and <a href="out_channel.html#VALflush"><code class="code"><span class="constructor">Out_channel</span>.flush</code></a>, which do nothing when applied to an already closed channel. Note that <a href="out_channel.html#VALclose"><code class="code"><span class="constructor">Out_channel</span>.close</code></a> may raise <code class="code"><span class="constructor">Sys_error</span></code> if the operating system signals an error when flushing or closing.</p> </div> </div> <pre id="VALclose_noerr" data-type="val close_noerr [Module Out_channel]" data-language="ocaml">val close_noerr : t -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>Same as <a href="out_channel.html#VALclose"><code class="code"><span class="constructor">Out_channel</span>.close</code></a>, but ignore all errors.</p> </div> </div> <h2 id="output">Output</h2> <pre id="VALoutput_char" data-type="val output_char [Module Out_channel]" data-language="ocaml">val output_char : t -&gt; char -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>Write the character on the given output channel.</p> </div> </div> <pre id="VALoutput_byte" data-type="val output_byte [Module Out_channel]" data-language="ocaml">val output_byte : t -&gt; int -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>Write one 8-bit integer (as the single character with that code) on the given output channel. The given integer is taken modulo 256.</p> </div> </div> <pre id="VALoutput_string" data-type="val output_string [Module Out_channel]" data-language="ocaml">val output_string : t -&gt; string -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>Write the string on the given output channel.</p> </div> </div> <pre id="VALoutput_bytes" data-type="val output_bytes [Module Out_channel]" data-language="ocaml">val output_bytes : t -&gt; bytes -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>Write the byte sequence on the given output channel.</p> </div> </div> <h2 id="advanced_output">Advanced output</h2> <pre id="VALoutput" data-type="val output [Module Out_channel]" data-language="ocaml">val output : t -&gt; bytes -&gt; int -&gt; int -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">output oc buf pos len</code> writes <code class="code">len</code> characters from byte sequence <code class="code">buf</code>, starting at offset <code class="code">pos</code>, to the given output channel <code class="code">oc</code>.</p> </div> <ul class="info-attributes"> <li>
<b>Raises</b> <code>Invalid_argument</code> if <code class="code">pos</code> and <code class="code">len</code> do not designate a valid range of <code class="code">buf</code>.</li> </ul> </div> <pre id="VALoutput_substring" data-type="val output_substring [Module Out_channel]" data-language="ocaml">val output_substring : t -&gt; string -&gt; int -&gt; int -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>Same as <a href="out_channel.html#VALoutput"><code class="code"><span class="constructor">Out_channel</span>.output</code></a> but take a string as argument instead of a byte sequence.</p> </div> </div> <pre id="VALoutput_bigarray" data-type="val output_bigarray [Module Out_channel]" data-language="ocaml">val output_bigarray : t -&gt;       ('a, Bigarray.int8_unsigned_elt, Bigarray.c_layout)       Bigarray.Array1.t -&gt; int -&gt; int -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>Same as <a href="out_channel.html#VALoutput"><code class="code"><span class="constructor">Out_channel</span>.output</code></a> but take the data from a bigarray.</p> </div> <ul class="info-attributes"> <li>
<b>Since</b> 5.2</li> </ul> </div> <h2 id="flushing">Flushing</h2> <pre id="VALflush" data-type="val flush [Module Out_channel]" data-language="ocaml">val flush : t -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>Flush the buffer associated with the given output channel, performing all pending writes on that channel. Interactive programs must be careful about flushing standard output and standard error at the right time.</p> </div> </div> <pre id="VALflush_all" data-type="val flush_all [Module Out_channel]" data-language="ocaml">val flush_all : unit -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>Flush all open output channels; ignore errors.</p> </div> </div> <h2 id="seeking">Seeking</h2> <pre id="VALseek" data-type="val seek [Module Out_channel]" data-language="ocaml">val seek : t -&gt; int64 -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">seek chan pos</code> sets the current writing position to <code class="code">pos</code> for channel <code class="code">chan</code>. This works only for regular files. On files of other kinds (such as terminals, pipes and sockets), the behavior is unspecified.</p> </div> </div> <pre id="VALpos" data-type="val pos [Module Out_channel]" data-language="ocaml">val pos : t -&gt; int64</pre>
<div class="info "> <div class="info-desc"> <p>Return the current writing position for the given channel. Does not work on channels opened with the <code class="code"><span class="constructor">Open_append</span></code> flag (returns unspecified results).</p> <p>For files opened in text mode under Windows, the returned position is approximate (owing to end-of-line conversion); in particular, saving the current position with <a href="out_channel.html#VALpos"><code class="code"><span class="constructor">Out_channel</span>.pos</code></a>, then going back to this position using <a href="out_channel.html#VALseek"><code class="code"><span class="constructor">Out_channel</span>.seek</code></a> will not work. For this programming idiom to work reliably and portably, the file must be opened in binary mode.</p> </div> </div> <h2 id="attributes">Attributes</h2> <pre id="VALlength" data-type="val length [Module Out_channel]" data-language="ocaml">val length : t -&gt; int64</pre>
<div class="info "> <div class="info-desc"> <p>Return the size (number of characters) of the regular file on which the given channel is opened. If the channel is opened on a file that is not a regular file, the result is meaningless.</p> </div> </div> <pre id="VALset_binary_mode" data-type="val set_binary_mode [Module Out_channel]" data-language="ocaml">val set_binary_mode : t -&gt; bool -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">set_binary_mode oc <span class="keyword">true</span></code> sets the channel <code class="code">oc</code> to binary mode: no translations take place during output.</p> <p><code class="code">set_binary_mode oc <span class="keyword">false</span></code> sets the channel <code class="code">oc</code> to text mode: depending on the operating system, some translations may take place during output. For instance, under Windows, end-of-lines will be translated from <code class="code">\n</code> to <code class="code">\r\n</code>.</p> <p>This function has no effect under operating systems that do not distinguish between text mode and binary mode.</p> </div> </div> <pre id="VALis_binary_mode" data-type="val is_binary_mode [Module Out_channel]" data-language="ocaml">val is_binary_mode : t -&gt; bool</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">is_binary_mode oc</code> returns whether the channel <code class="code">oc</code> is in binary mode (see <a href="out_channel.html#VALset_binary_mode"><code class="code"><span class="constructor">Out_channel</span>.set_binary_mode</code></a>).</p> </div> <ul class="info-attributes"> <li>
<b>Since</b> 5.2</li> </ul> </div> <pre id="VALset_buffered" data-type="val set_buffered [Module Out_channel]" data-language="ocaml">val set_buffered : t -&gt; bool -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">set_buffered oc <span class="keyword">true</span></code> sets the channel <code class="code">oc</code> to <em>buffered</em> mode. In this mode, data output on <code class="code">oc</code> will be buffered until either the internal buffer is full or the function <a href="out_channel.html#VALflush"><code class="code"><span class="constructor">Out_channel</span>.flush</code></a> or <a href="out_channel.html#VALflush_all"><code class="code"><span class="constructor">Out_channel</span>.flush_all</code></a> is called, at which point it will be sent to the output device.</p> <p><code class="code">set_buffered oc <span class="keyword">false</span></code> sets the channel <code class="code">oc</code> to <em>unbuffered</em> mode. In this mode, data output on <code class="code">oc</code> will be sent to the output device immediately.</p> <p>All channels are open in <em>buffered</em> mode by default.</p> </div> </div> <pre id="VALis_buffered" data-type="val is_buffered [Module Out_channel]" data-language="ocaml">val is_buffered : t -&gt; bool</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">is_buffered oc</code> returns whether the channel <code class="code">oc</code> is buffered (see <a href="out_channel.html#VALset_buffered"><code class="code"><span class="constructor">Out_channel</span>.set_buffered</code></a>).</p> </div> </div> <pre id="VALisatty" data-type="val isatty [Module Out_channel]" data-language="ocaml">val isatty : t -&gt; bool</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">isatty oc</code> is <code class="code"><span class="keyword">true</span></code> if <code class="code">oc</code> refers to a terminal or console window, <code class="code"><span class="keyword">false</span></code> otherwise.</p> </div> <ul class="info-attributes"> <li>
<b>Since</b> 5.1</li> </ul> </div> <h2 id="examples">Examples</h2>
<p>Writing the contents of a file:</p> <pre class="codepre" data-language="ocaml">      let write_file file s =
        Out_channel.with_open_bin file
          (fun oc -&gt; Out_channel.output_string oc s))
    </pre> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1995-2024 INRIA.<br>
    <a href="https://ocaml.org/manual/5.2/api/Out_channel.html" class="_attribution-link">https://ocaml.org/manual/5.2/api/Out_channel.html</a>
  </p>
</div>
