<div class="api"> <h1>Module Build_path_prefix_map</h1> <pre id="MODULEBuild_path_prefix_map" data-type="module Build_path_prefix_map [Module Build_path_prefix_map]" data-language="ocaml">module Build_path_prefix_map: sig .. end</pre>
<div class="info module top"> <div class="info-desc"> <p>Rewrite paths for reproducible builds</p> <p><b>Warning:</b> this module is unstable and part of <a href="compiler_libs.html">compiler-libs</a>.</p> <p>See <a href="https://reproducible-builds.org/specs/build-path-prefix-map/"> the BUILD_PATH_PREFIX_MAP spec</a></p> </div> </div>  <pre id="TYPEpath" data-type="type path [Module Build_path_prefix_map]" data-language="ocaml">type path = string </pre> <pre id="TYPEpath_prefix" data-type="type path_prefix [Module Build_path_prefix_map]" data-language="ocaml">type path_prefix = string </pre> <pre id="TYPEerror_message" data-type="type error_message [Module Build_path_prefix_map]" data-language="ocaml">type error_message = string </pre> <pre id="VALencode_prefix" data-type="val encode_prefix [Module Build_path_prefix_map]" data-language="ocaml">val encode_prefix : path_prefix -&gt; string</pre> <pre id="VALdecode_prefix" data-type="val decode_prefix [Module Build_path_prefix_map]" data-language="ocaml">val decode_prefix : string -&gt;       (path_prefix, error_message)       result</pre> <pre id="TYPEpair" data-type="type pair [Module Build_path_prefix_map]" data-language="ocaml">type pair = {</pre>
<table class="typetable"> <tbody>
<tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELTpair.target">target</span> : <code class="type"><a href="build_path_prefix_map.html#TYPEpath_prefix">path_prefix</a></code>;</code>
</td> </tr> <tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELTpair.source">source</span> : <code class="type"><a href="build_path_prefix_map.html#TYPEpath_prefix">path_prefix</a></code>;</code>
</td> </tr>
</tbody>
</table> <code>}</code> <pre id="VALencode_pair" data-type="val encode_pair [Module Build_path_prefix_map]" data-language="ocaml">val encode_pair : pair -&gt; string</pre> <pre id="VALdecode_pair" data-type="val decode_pair [Module Build_path_prefix_map]" data-language="ocaml">val decode_pair : string -&gt;       (pair, error_message)       result</pre> <pre id="TYPEmap" data-type="type map [Module Build_path_prefix_map]" data-language="ocaml">type map = pair option list </pre> <pre id="VALencode_map" data-type="val encode_map [Module Build_path_prefix_map]" data-language="ocaml">val encode_map : map -&gt; string</pre> <pre id="VALdecode_map" data-type="val decode_map [Module Build_path_prefix_map]" data-language="ocaml">val decode_map : string -&gt;       (map, error_message)       result</pre> <pre id="VALrewrite_first" data-type="val rewrite_first [Module Build_path_prefix_map]" data-language="ocaml">val rewrite_first : map -&gt;       path -&gt; path option</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">rewrite_first map path</code> tries to find a source in <code class="code">map</code> that is a prefix of the input <code class="code">path</code>. If it succeeds, it replaces this prefix with the corresponding target. If it fails, it just returns <code class="code"><span class="constructor">None</span></code>.</p> </div> </div> <pre id="VALrewrite_all" data-type="val rewrite_all [Module Build_path_prefix_map]" data-language="ocaml">val rewrite_all : map -&gt;       path -&gt; path list</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">rewrite_all map path</code> finds all sources in <code class="code">map</code> that are a prefix of the input <code class="code">path</code>. For each matching source, in priority order, it replaces this prefix with the corresponding target and adds the result to the returned list. If there are no matches, it just returns <code class="code">[]</code>.</p> </div> </div> <pre id="VALrewrite" data-type="val rewrite [Module Build_path_prefix_map]" data-language="ocaml">val rewrite : map -&gt;       path -&gt; path</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">rewrite path</code> uses <code class="code">rewrite_first</code> to try to find a mapping for path. If found, it returns that, otherwise it just returns <code class="code">path</code>.</p> </div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1995-2024 INRIA.<br>
    <a href="https://ocaml.org/manual/5.2/api/compilerlibref/Build_path_prefix_map.html" class="_attribution-link">https://ocaml.org/manual/5.2/api/compilerlibref/Build_path_prefix_map.html</a>
  </p>
</div>
