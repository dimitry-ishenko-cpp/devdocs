<div class="api"> <h1>Module Diffing_with_keys</h1> <pre id="MODULEDiffing_with_keys" data-type="module Diffing_with_keys [Module Diffing_with_keys]" data-language="ocaml">module Diffing_with_keys: sig .. end</pre>
<div class="info module top"> <div class="info-desc"> <p>When diffing lists where each element has a distinct key, we can refine the diffing patch by introducing two composite edit moves: swaps and moves.</p> <p><code class="code"><span class="constructor">Swap</span></code>s exchange the position of two elements. <code class="code"><span class="constructor">Swap</span></code> cost is set to <code class="code">2 * change - epsilon</code>. <code class="code"><span class="constructor">Move</span></code>s change the position of one element. <code class="code"><span class="constructor">Move</span></code> cost is set to <code class="code">delete + addition - epsilon</code>.</p> <p>When the cost <code class="code">delete + addition</code> is greater than <code class="code">change</code> and with those specific weights, the optimal patch with <code class="code"><span class="constructor">Swap</span></code>s and <code class="code"><span class="constructor">Move</span></code>s can be computed directly and cheaply from the original optimal patch.</p> </div> </div>  <pre id="TYPEwith_pos" data-type="type 'a with_pos [Module Diffing_with_keys]" data-language="ocaml">type 'a with_pos = {</pre>
<table class="typetable"> <tbody>
<tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELTwith_pos.pos">pos</span> : <code class="type">int</code>;</code>
</td> </tr> <tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELTwith_pos.data">data</span> : <code class="type">'a</code>;</code>
</td> </tr>
</tbody>
</table> <code>}</code> <pre id="VALwith_pos" data-type="val with_pos [Module Diffing_with_keys]" data-language="ocaml">val with_pos : 'a list -&gt; 'a with_pos list</pre> <pre id="TYPEmismatch" data-type="type ('l, 'r, 'diff) mismatch [Module Diffing_with_keys]" data-language="ocaml">type ('l, 'r, 'diff) mismatch = </pre>
<table class="typetable"> <tbody>
<tr> <td align="left" valign="top"> <code><span class="keyword">|</span></code>
</td> <td align="left" valign="top"> <code><span id="TYPEELTmismatch.Name"><span class="constructor">Name</span></span> <span class="keyword">of</span> <code>{</code><table class="typetable">
<tbody>
<tr>
<td align="left" valign="top">

</td>
<td align="left" valign="top">
<code><span id="TYPEELTDiffing_with_keys.Name.pos">pos</span> : <code class="type">int</code>;</code>
</td>

</tr>
<tr>
<td align="left" valign="top">

</td>
<td align="left" valign="top">
<code><span id="TYPEELTDiffing_with_keys.Name.got">got</span> : <code class="type">string</code>;</code>
</td>

</tr>
<tr>
<td align="left" valign="top">

</td>
<td align="left" valign="top">
<code><span id="TYPEELTDiffing_with_keys.Name.expected">expected</span> : <code class="type">string</code>;</code>
</td>

</tr>
<tr>
<td align="left" valign="top">

</td>
<td align="left" valign="top">
<code><span id="TYPEELTDiffing_with_keys.Name.types_match">types_match</span> : <code class="type">bool</code>;</code>
</td>

</tr>
</tbody>
</table>
<code>}</code>
</code>
</td> </tr> <tr> <td align="left" valign="top"> <code><span class="keyword">|</span></code>
</td> <td align="left" valign="top"> <code><span id="TYPEELTmismatch.Type"><span class="constructor">Type</span></span> <span class="keyword">of</span> <code>{</code><table class="typetable">
<tbody>
<tr>
<td align="left" valign="top">

</td>
<td align="left" valign="top">
<code><span id="TYPEELTDiffing_with_keys.Type.pos">pos</span> : <code class="type">int</code>;</code>
</td>

</tr>
<tr>
<td align="left" valign="top">

</td>
<td align="left" valign="top">
<code><span id="TYPEELTDiffing_with_keys.Type.got">got</span> : <code class="type">'l</code>;</code>
</td>

</tr>
<tr>
<td align="left" valign="top">

</td>
<td align="left" valign="top">
<code><span id="TYPEELTDiffing_with_keys.Type.expected">expected</span> : <code class="type">'r</code>;</code>
</td>

</tr>
<tr>
<td align="left" valign="top">

</td>
<td align="left" valign="top">
<code><span id="TYPEELTDiffing_with_keys.Type.reason">reason</span> : <code class="type">'diff</code>;</code>
</td>

</tr>
</tbody>
</table>
<code>}</code>
</code>
</td> </tr>
</tbody>
</table> <pre id="TYPEchange" data-type="type ('l, 'r, 'diff) change [Module Diffing_with_keys]" data-language="ocaml">type ('l, 'r, 'diff) change = </pre>
<table class="typetable"> <tbody>
<tr> <td align="left" valign="top"> <code><span class="keyword">|</span></code>
</td> <td align="left" valign="top"> <code><span id="TYPEELTchange.Change"><span class="constructor">Change</span></span> <span class="keyword">of</span> <code class="type">('l, 'r, 'diff) <a href="diffing_with_keys.html#TYPEmismatch">mismatch</a></code></code>
</td> </tr> <tr> <td align="left" valign="top"> <code><span class="keyword">|</span></code>
</td> <td align="left" valign="top"> <code><span id="TYPEELTchange.Swap"><span class="constructor">Swap</span></span> <span class="keyword">of</span> <code>{</code><table class="typetable">
<tbody>
<tr>
<td align="left" valign="top">

</td>
<td align="left" valign="top">
<code><span id="TYPEELTDiffing_with_keys.Swap.pos">pos</span> : <code class="type">int * int</code>;</code>
</td>

</tr>
<tr>
<td align="left" valign="top">

</td>
<td align="left" valign="top">
<code><span id="TYPEELTDiffing_with_keys.Swap.first">first</span> : <code class="type">string</code>;</code>
</td>

</tr>
<tr>
<td align="left" valign="top">

</td>
<td align="left" valign="top">
<code><span id="TYPEELTDiffing_with_keys.Swap.last">last</span> : <code class="type">string</code>;</code>
</td>

</tr>
</tbody>
</table>
<code>}</code>
</code>
</td> </tr> <tr> <td align="left" valign="top"> <code><span class="keyword">|</span></code>
</td> <td align="left" valign="top"> <code><span id="TYPEELTchange.Move"><span class="constructor">Move</span></span> <span class="keyword">of</span> <code>{</code><table class="typetable">
<tbody>
<tr>
<td align="left" valign="top">

</td>
<td align="left" valign="top">
<code><span id="TYPEELTDiffing_with_keys.Move.name">name</span> : <code class="type">string</code>;</code>
</td>

</tr>
<tr>
<td align="left" valign="top">

</td>
<td align="left" valign="top">
<code><span id="TYPEELTDiffing_with_keys.Move.got">got</span> : <code class="type">int</code>;</code>
</td>

</tr>
<tr>
<td align="left" valign="top">

</td>
<td align="left" valign="top">
<code><span id="TYPEELTDiffing_with_keys.Move.expected">expected</span> : <code class="type">int</code>;</code>
</td>

</tr>
</tbody>
</table>
<code>}</code>
</code>
</td> </tr> <tr> <td align="left" valign="top"> <code><span class="keyword">|</span></code>
</td> <td align="left" valign="top"> <code><span id="TYPEELTchange.Insert"><span class="constructor">Insert</span></span> <span class="keyword">of</span> <code>{</code><table class="typetable">
<tbody>
<tr>
<td align="left" valign="top">

</td>
<td align="left" valign="top">
<code><span id="TYPEELTDiffing_with_keys.Insert.pos">pos</span> : <code class="type">int</code>;</code>
</td>

</tr>
<tr>
<td align="left" valign="top">

</td>
<td align="left" valign="top">
<code><span id="TYPEELTDiffing_with_keys.Insert.insert">insert</span> : <code class="type">'r</code>;</code>
</td>

</tr>
</tbody>
</table>
<code>}</code>
</code>
</td> </tr> <tr> <td align="left" valign="top"> <code><span class="keyword">|</span></code>
</td> <td align="left" valign="top"> <code><span id="TYPEELTchange.Delete"><span class="constructor">Delete</span></span> <span class="keyword">of</span> <code>{</code><table class="typetable">
<tbody>
<tr>
<td align="left" valign="top">

</td>
<td align="left" valign="top">
<code><span id="TYPEELTDiffing_with_keys.Delete.pos">pos</span> : <code class="type">int</code>;</code>
</td>

</tr>
<tr>
<td align="left" valign="top">

</td>
<td align="left" valign="top">
<code><span id="TYPEELTDiffing_with_keys.Delete.delete">delete</span> : <code class="type">'l</code>;</code>
</td>

</tr>
</tbody>
</table>
<code>}</code>
</code>
</td> </tr>
</tbody>
</table> <div class="info "> <div class="info-desc"> <p>This specialized version of changes introduces two composite changes: <code class="code"><span class="constructor">Move</span></code> and <code class="code"><span class="constructor">Swap</span></code></p> </div> </div> <pre id="VALprefix" data-type="val prefix [Module Diffing_with_keys]" data-language="ocaml">val prefix : Format.formatter -&gt; ('l, 'r, 'diff) change -&gt; unit</pre> <pre id="MODULEDefine" data-type="module Define [Module Diffing_with_keys]" data-language="ocaml">module Define: functor (D : Diffing.Defs  with type eq := unit) -&gt; sig .. end</pre> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1995-2024 INRIA.<br>
    <a href="https://ocaml.org/manual/5.2/api/compilerlibref/Diffing_with_keys.html" class="_attribution-link">https://ocaml.org/manual/5.2/api/compilerlibref/Diffing_with_keys.html</a>
  </p>
</div>
