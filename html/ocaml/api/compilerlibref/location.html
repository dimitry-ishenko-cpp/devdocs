<div class="api"> <h1>Module Location</h1> <pre id="MODULELocation" data-type="module Location [Module Location]" data-language="ocaml">module Location: sig .. end</pre>
<div class="info module top"> <div class="info-desc"> <p>Source code locations (ranges of positions), used in parsetree.</p> <p><b>Warning:</b> this module is unstable and part of <a href="compiler_libs.html">compiler-libs</a>.</p> </div> </div>  <pre id="TYPEt" data-type="type t [Module Location]" data-language="ocaml">type t = Warnings.loc = {</pre>
<table class="typetable"> <tbody>
<tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELTt.loc_start">loc_start</span> : <code class="type">Lexing.position</code>;</code>
</td> </tr> <tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELTt.loc_end">loc_end</span> : <code class="type">Lexing.position</code>;</code>
</td> </tr> <tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELTt.loc_ghost">loc_ghost</span> : <code class="type">bool</code>;</code>
</td> </tr>
</tbody>
</table> <code>}</code> <p>Note on the use of Lexing.position in this module. If <code class="code">pos_fname = <span class="string">""</span></code>, then use <code class="code">!input_name</code> instead. If <code class="code">pos_lnum = -1</code>, then <code class="code">pos_bol = 0</code>. Use <code class="code">pos_cnum</code> and re-parse the file to get the line and character numbers. Else all fields are correct.</p> <pre id="VALnone" data-type="val none [Module Location]" data-language="ocaml">val none : t</pre>
<div class="info "> <div class="info-desc"> <p>An arbitrary value of type <code class="code">t</code>; describes an empty ghost range.</p> </div> </div> <pre id="VALis_none" data-type="val is_none [Module Location]" data-language="ocaml">val is_none : t -&gt; bool</pre>
<div class="info "> <div class="info-desc"> <p>True for <code class="code"><span class="constructor">Location</span>.none</code>, false any other location</p> </div> </div> <pre id="VALin_file" data-type="val in_file [Module Location]" data-language="ocaml">val in_file : string -&gt; t</pre>
<div class="info "> <div class="info-desc"> <p>Return an empty ghost range located in a given file.</p> </div> </div> <pre id="VALinit" data-type="val init [Module Location]" data-language="ocaml">val init : Lexing.lexbuf -&gt; string -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>Set the file name and line number of the <code class="code">lexbuf</code> to be the start of the named file.</p> </div> </div> <pre id="VALcurr" data-type="val curr [Module Location]" data-language="ocaml">val curr : Lexing.lexbuf -&gt; t</pre>
<div class="info "> <div class="info-desc"> <p>Get the location of the current token from the <code class="code">lexbuf</code>.</p> </div> </div> <pre id="VALsymbol_rloc" data-type="val symbol_rloc [Module Location]" data-language="ocaml">val symbol_rloc : unit -&gt; t</pre> <pre id="VALsymbol_gloc" data-type="val symbol_gloc [Module Location]" data-language="ocaml">val symbol_gloc : unit -&gt; t</pre> <pre id="VALrhs_loc" data-type="val rhs_loc [Module Location]" data-language="ocaml">val rhs_loc : int -&gt; t</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">rhs_loc n</code> returns the location of the symbol at position <code class="code">n</code>, starting at 1, in the current parser rule.</p> </div> </div> <pre id="VALrhs_interval" data-type="val rhs_interval [Module Location]" data-language="ocaml">val rhs_interval : int -&gt; int -&gt; t</pre> <pre id="VALget_pos_info" data-type="val get_pos_info [Module Location]" data-language="ocaml">val get_pos_info : Lexing.position -&gt; string * int * int</pre>
<div class="info "> <div class="info-desc"> <p>file, line, char</p> </div> </div> <pre id="TYPEloc" data-type="type 'a loc [Module Location]" data-language="ocaml">type 'a loc = {</pre>
<table class="typetable"> <tbody>
<tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELTloc.txt">txt</span> : <code class="type">'a</code>;</code>
</td> </tr> <tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELTloc.loc">loc</span> : <code class="type"><a href="location.html#TYPEt">t</a></code>;</code>
</td> </tr>
</tbody>
</table> <code>}</code> <pre id="VALmknoloc" data-type="val mknoloc [Module Location]" data-language="ocaml">val mknoloc : 'a -&gt; 'a loc</pre> <pre id="VALmkloc" data-type="val mkloc [Module Location]" data-language="ocaml">val mkloc : 'a -&gt; t -&gt; 'a loc</pre>
<h2 id="1_Inputinfo">Input info</h2> <pre id="VALinput_name" data-type="val input_name [Module Location]" data-language="ocaml">val input_name : string ref</pre> <pre id="VALinput_lexbuf" data-type="val input_lexbuf [Module Location]" data-language="ocaml">val input_lexbuf : Lexing.lexbuf option ref</pre> <pre id="VALinput_phrase_buffer" data-type="val input_phrase_buffer [Module Location]" data-language="ocaml">val input_phrase_buffer : Buffer.t option ref</pre>
<h2 id="1_Toplevelspecificfunctions">Toplevel-specific functions</h2> <pre id="VALecho_eof" data-type="val echo_eof [Module Location]" data-language="ocaml">val echo_eof : unit -&gt; unit</pre> <pre id="VALseparate_new_message" data-type="val separate_new_message [Module Location]" data-language="ocaml">val separate_new_message : Format.formatter -&gt; unit</pre> <pre id="VALreset" data-type="val reset [Module Location]" data-language="ocaml">val reset : unit -&gt; unit</pre>
<h2 id="1_Rewritingpath">Rewriting path </h2> <pre id="VALrewrite_absolute_path" data-type="val rewrite_absolute_path [Module Location]" data-language="ocaml">val rewrite_absolute_path : string -&gt; string</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">rewrite_absolute_path path</code> rewrites <code class="code">path</code> to honor the BUILD_PATH_PREFIX_MAP variable if it is set. It does not check whether <code class="code">path</code> is absolute or not. The result is as follows:</p> <ul> <li>If BUILD_PATH_PREFIX_MAP is not set, just return <code class="code">path</code>.</li> <li>otherwise, rewrite using the mapping (and if there are no matching prefixes that will just return <code class="code">path</code>).</li> </ul> <p>See <a href="https://reproducible-builds.org/specs/build-path-prefix-map/"> the BUILD_PATH_PREFIX_MAP spec</a></p> </div> </div> <pre id="VALrewrite_find_first_existing" data-type="val rewrite_find_first_existing [Module Location]" data-language="ocaml">val rewrite_find_first_existing : string -&gt; string option</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">rewrite_find_first_existing path</code> uses a BUILD_PATH_PREFIX_MAP mapping and tries to find a source in mapping that maps to a result that exists in the file system. There are the following return values:</p> <ul> <li>
<code class="code"><span class="constructor">None</span></code>, means either <ul> <li>BUILD_PATH_PREFIX_MAP is not set and <code class="code">path</code> does not exists, or</li> <li>no source prefixes of <code class="code">path</code> in the mapping were found,</li> </ul> </li> <li>
<code class="code"><span class="constructor">Some</span> target</code>, means <code class="code">target</code> exists and either <ul> <li>BUILD_PATH_PREFIX_MAP is not set and <code class="code">target</code> = <code class="code">path</code>, or</li> <li>
<code class="code">target</code> is the first file (in priority order) that <code class="code">path</code> mapped to that exists in the file system.</li> </ul> </li> <li>
<code class="code"><span class="constructor">Not_found</span></code> raised, means some source prefixes in the map were found that matched <code class="code">path</code>, but none of them existed in the file system. The caller should catch this and issue an appropriate error message.</li> </ul> <p>See <a href="https://reproducible-builds.org/specs/build-path-prefix-map/"> the BUILD_PATH_PREFIX_MAP spec</a></p> </div> </div> <pre id="VALrewrite_find_all_existing_dirs" data-type="val rewrite_find_all_existing_dirs [Module Location]" data-language="ocaml">val rewrite_find_all_existing_dirs : string -&gt; string list</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">rewrite_find_all_existing_dirs dir</code> accumulates a list of existing directories, <code class="code">dirs</code>, that are the result of mapping a potentially abstract directory, <code class="code">dir</code>, over all the mapping pairs in the BUILD_PATH_PREFIX_MAP environment variable, if any. The list <code class="code">dirs</code> will be in priority order (head as highest priority).</p> <p>The possible results are:</p> <ul> <li>
<code class="code">[]</code>, means either <ul> <li>BUILD_PATH_PREFIX_MAP is not set and <code class="code">dir</code> is not an existing directory, or</li> <li>if set, then there were no matching prefixes of <code class="code">dir</code>.</li> </ul> </li> <li>
<code class="code"><span class="constructor">Some</span> dirs</code>, means dirs are the directories found. Either <ul> <li>BUILD_PATH_PREFIX_MAP is not set and <code class="code">dirs = [dir]</code>, or</li> <li>it was set and <code class="code">dirs</code> are the mapped existing directories.</li> </ul> </li> <li>Not_found raised, means some source prefixes in the map were found that matched <code class="code">dir</code>, but none of mapping results were existing directories (possibly due to misconfiguration). The caller should catch this and issue an appropriate error message.</li> </ul> <p>See <a href="https://reproducible-builds.org/specs/build-path-prefix-map/"> the BUILD_PATH_PREFIX_MAP spec</a></p> </div> </div> <pre id="VALabsolute_path" data-type="val absolute_path [Module Location]" data-language="ocaml">val absolute_path : string -&gt; string</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">absolute_path path</code> first makes an absolute path, <code class="code">s</code> from <code class="code">path</code>, prepending the current working directory if <code class="code">path</code> was relative. Then <code class="code">s</code> is rewritten using <code class="code">rewrite_absolute_path</code>. Finally the result is normalized by eliminating instances of <code class="code"><span class="string">'.'</span></code> or <code class="code"><span class="keywordsign">'</span>..<span class="keywordsign">'</span></code>.</p> </div> </div> <h2 id="1_Printinglocations">Printing locations</h2> <pre id="VALshow_filename" data-type="val show_filename [Module Location]" data-language="ocaml">val show_filename : string -&gt; string</pre>
<div class="info "> <div class="info-desc"> <p>In -absname mode, return the absolute path for this filename. Otherwise, returns the filename unchanged.</p> </div> </div> <pre id="VALprint_filename" data-type="val print_filename [Module Location]" data-language="ocaml">val print_filename : Format.formatter -&gt; string -&gt; unit</pre> <pre id="VALprint_loc" data-type="val print_loc [Module Location]" data-language="ocaml">val print_loc : Format.formatter -&gt; t -&gt; unit</pre> <pre id="VALprint_locs" data-type="val print_locs [Module Location]" data-language="ocaml">val print_locs : Format.formatter -&gt; t list -&gt; unit</pre>
<h2 id="1_Toplevelspecificlocationhighlighting">Toplevel-specific location highlighting</h2> <pre id="VALhighlight_terminfo" data-type="val highlight_terminfo [Module Location]" data-language="ocaml">val highlight_terminfo : Lexing.lexbuf -&gt; Format.formatter -&gt; t list -&gt; unit</pre>
<h2 id="1_Reportingerrorsandwarnings">Reporting errors and warnings</h2>
<h3 id="2_Thetypeofreportsandreportprinters">The type of reports and report printers</h3> <pre id="TYPEmsg" data-type="type msg [Module Location]" data-language="ocaml">type msg = (Format.formatter -&gt; unit) loc </pre> <pre id="VALmsg" data-type="val msg [Module Location]" data-language="ocaml">val msg : ?loc:t -&gt;       ('a, Format.formatter, unit, msg) format4 -&gt; 'a</pre> <pre id="TYPEreport_kind" data-type="type report_kind [Module Location]" data-language="ocaml">type report_kind = </pre>
<table class="typetable"> <tbody>
<tr> <td align="left" valign="top"> <code><span class="keyword">|</span></code>
</td> <td align="left" valign="top"> <code><span id="TYPEELTreport_kind.Report_error"><span class="constructor">Report_error</span></span></code>
</td> </tr> <tr> <td align="left" valign="top"> <code><span class="keyword">|</span></code>
</td> <td align="left" valign="top"> <code><span id="TYPEELTreport_kind.Report_warning"><span class="constructor">Report_warning</span></span> <span class="keyword">of</span> <code class="type">string</code></code>
</td> </tr> <tr> <td align="left" valign="top"> <code><span class="keyword">|</span></code>
</td> <td align="left" valign="top"> <code><span id="TYPEELTreport_kind.Report_warning_as_error"><span class="constructor">Report_warning_as_error</span></span> <span class="keyword">of</span> <code class="type">string</code></code>
</td> </tr> <tr> <td align="left" valign="top"> <code><span class="keyword">|</span></code>
</td> <td align="left" valign="top"> <code><span id="TYPEELTreport_kind.Report_alert"><span class="constructor">Report_alert</span></span> <span class="keyword">of</span> <code class="type">string</code></code>
</td> </tr> <tr> <td align="left" valign="top"> <code><span class="keyword">|</span></code>
</td> <td align="left" valign="top"> <code><span id="TYPEELTreport_kind.Report_alert_as_error"><span class="constructor">Report_alert_as_error</span></span> <span class="keyword">of</span> <code class="type">string</code></code>
</td> </tr>
</tbody>
</table> <pre id="TYPEreport" data-type="type report [Module Location]" data-language="ocaml">type report = {</pre>
<table class="typetable"> <tbody>
<tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELTreport.kind">kind</span> : <code class="type"><a href="location.html#TYPEreport_kind">report_kind</a></code>;</code>
</td> </tr> <tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELTreport.main">main</span> : <code class="type"><a href="location.html#TYPEmsg">msg</a></code>;</code>
</td> </tr> <tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELTreport.sub">sub</span> : <code class="type"><a href="location.html#TYPEmsg">msg</a> list</code>;</code>
</td> </tr>
</tbody>
</table> <code>}</code> <pre id="TYPEreport_printer" data-type="type report_printer [Module Location]" data-language="ocaml">type report_printer = {</pre>
<table class="typetable"> <tbody>
<tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELTreport_printer.pp">pp</span> : <code class="type"><a href="location.html#TYPEreport_printer">report_printer</a> -&gt; Format.formatter -&gt; <a href="location.html#TYPEreport">report</a> -&gt; unit</code>;</code>
</td> </tr> <tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELTreport_printer.pp_report_kind">pp_report_kind</span> : <code class="type"><a href="location.html#TYPEreport_printer">report_printer</a> -&gt;<br>       <a href="location.html#TYPEreport">report</a> -&gt; Format.formatter -&gt; <a href="location.html#TYPEreport_kind">report_kind</a> -&gt; unit</code>;</code>
</td> </tr> <tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELTreport_printer.pp_main_loc">pp_main_loc</span> : <code class="type"><a href="location.html#TYPEreport_printer">report_printer</a> -&gt;<br>       <a href="location.html#TYPEreport">report</a> -&gt; Format.formatter -&gt; <a href="location.html#TYPEt">t</a> -&gt; unit</code>;</code>
</td> </tr> <tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELTreport_printer.pp_main_txt">pp_main_txt</span> : <code class="type"><a href="location.html#TYPEreport_printer">report_printer</a> -&gt;<br>       <a href="location.html#TYPEreport">report</a> -&gt;<br>       Format.formatter -&gt; (Format.formatter -&gt; unit) -&gt; unit</code>;</code>
</td> </tr> <tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELTreport_printer.pp_submsgs">pp_submsgs</span> : <code class="type"><a href="location.html#TYPEreport_printer">report_printer</a> -&gt;<br>       <a href="location.html#TYPEreport">report</a> -&gt; Format.formatter -&gt; <a href="location.html#TYPEmsg">msg</a> list -&gt; unit</code>;</code>
</td> </tr> <tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELTreport_printer.pp_submsg">pp_submsg</span> : <code class="type"><a href="location.html#TYPEreport_printer">report_printer</a> -&gt;<br>       <a href="location.html#TYPEreport">report</a> -&gt; Format.formatter -&gt; <a href="location.html#TYPEmsg">msg</a> -&gt; unit</code>;</code>
</td> </tr> <tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELTreport_printer.pp_submsg_loc">pp_submsg_loc</span> : <code class="type"><a href="location.html#TYPEreport_printer">report_printer</a> -&gt;<br>       <a href="location.html#TYPEreport">report</a> -&gt; Format.formatter -&gt; <a href="location.html#TYPEt">t</a> -&gt; unit</code>;</code>
</td> </tr> <tr> <td align="left" valign="top"> 
</td> <td align="left" valign="top"> <code><span id="TYPEELTreport_printer.pp_submsg_txt">pp_submsg_txt</span> : <code class="type"><a href="location.html#TYPEreport_printer">report_printer</a> -&gt;<br>       <a href="location.html#TYPEreport">report</a> -&gt;<br>       Format.formatter -&gt; (Format.formatter -&gt; unit) -&gt; unit</code>;</code>
</td> </tr>
</tbody>
</table> <code>}</code> <div class="info "> <div class="info-desc"> <p>A printer for <code class="code">report</code>s, defined using open-recursion. The goal is to make it easy to define new printers by re-using code from existing ones.</p> </div> </div> <h3 id="2_Reportprintersusedinthecompiler">Report printers used in the compiler</h3> <pre id="VALbatch_mode_printer" data-type="val batch_mode_printer [Module Location]" data-language="ocaml">val batch_mode_printer : report_printer</pre> <pre id="VALterminfo_toplevel_printer" data-type="val terminfo_toplevel_printer [Module Location]" data-language="ocaml">val terminfo_toplevel_printer : Lexing.lexbuf -&gt; report_printer</pre> <pre id="VALbest_toplevel_printer" data-type="val best_toplevel_printer [Module Location]" data-language="ocaml">val best_toplevel_printer : unit -&gt; report_printer</pre>
<div class="info "> <div class="info-desc"> <p>Detects the terminal capabilities and selects an adequate printer</p> </div> </div> <h3 id="2_Printingareport">Printing a <code class="code">report</code>
</h3> <pre id="VALprint_report" data-type="val print_report [Module Location]" data-language="ocaml">val print_report : Format.formatter -&gt; report -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>Display an error or warning report.</p> </div> </div> <pre id="VALreport_printer" data-type="val report_printer [Module Location]" data-language="ocaml">val report_printer : (unit -&gt; report_printer) ref</pre>
<div class="info "> <div class="info-desc"> <p>Hook for redefining the printer of reports.</p> <p>The hook is a <code class="code">unit <span class="keywordsign">-&gt;</span> report_printer</code> and not simply a <code class="code">report_printer</code>: this is useful so that it can detect the type of the output (a file, a terminal, ...) and select a printer accordingly.</p> </div> </div> <pre id="VALdefault_report_printer" data-type="val default_report_printer [Module Location]" data-language="ocaml">val default_report_printer : unit -&gt; report_printer</pre>
<div class="info "> <div class="info-desc"> <p>Original report printer for use in hooks.</p> </div> </div> <h2 id="1_Reportingwarnings">Reporting warnings</h2>
<h3 id="2_ConvertingaWarningstintoareport">Converting a <code class="code"><span class="constructor">Warnings</span>.t</code> into a <code class="code">report</code>
</h3> <pre id="VALreport_warning" data-type="val report_warning [Module Location]" data-language="ocaml">val report_warning : t -&gt; Warnings.t -&gt; report option</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">report_warning loc w</code> produces a report for the given warning <code class="code">w</code>, or <code class="code"><span class="constructor">None</span></code> if the warning is not to be printed.</p> </div> </div> <pre id="VALwarning_reporter" data-type="val warning_reporter [Module Location]" data-language="ocaml">val warning_reporter : (t -&gt; Warnings.t -&gt; report option) ref</pre>
<div class="info "> <div class="info-desc"> <p>Hook for intercepting warnings.</p> </div> </div> <pre id="VALdefault_warning_reporter" data-type="val default_warning_reporter [Module Location]" data-language="ocaml">val default_warning_reporter : t -&gt; Warnings.t -&gt; report option</pre>
<div class="info "> <div class="info-desc"> <p>Original warning reporter for use in hooks.</p> </div> </div> <h3 id="2_Printingwarnings">Printing warnings</h3> <pre id="VALformatter_for_warnings" data-type="val formatter_for_warnings [Module Location]" data-language="ocaml">val formatter_for_warnings : Format.formatter ref</pre> <pre id="VALprint_warning" data-type="val print_warning [Module Location]" data-language="ocaml">val print_warning : t -&gt; Format.formatter -&gt; Warnings.t -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>Prints a warning. This is simply the composition of <code class="code">report_warning</code> and <code class="code">print_report</code>.</p> </div> </div> <pre id="VALprerr_warning" data-type="val prerr_warning [Module Location]" data-language="ocaml">val prerr_warning : t -&gt; Warnings.t -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>Same as <code class="code">print_warning</code>, but uses <code class="code">!formatter_for_warnings</code> as output formatter.</p> </div> </div> <h2 id="1_Reportingalerts">Reporting alerts</h2>
<h3 id="2_ConvertinganAlerttintoareport">Converting an <code class="code"><span class="constructor">Alert</span>.t</code> into a <code class="code">report</code>
</h3> <pre id="VALreport_alert" data-type="val report_alert [Module Location]" data-language="ocaml">val report_alert : t -&gt; Warnings.alert -&gt; report option</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">report_alert loc w</code> produces a report for the given alert <code class="code">w</code>, or <code class="code"><span class="constructor">None</span></code> if the alert is not to be printed.</p> </div> </div> <pre id="VALalert_reporter" data-type="val alert_reporter [Module Location]" data-language="ocaml">val alert_reporter : (t -&gt; Warnings.alert -&gt; report option) ref</pre>
<div class="info "> <div class="info-desc"> <p>Hook for intercepting alerts.</p> </div> </div> <pre id="VALdefault_alert_reporter" data-type="val default_alert_reporter [Module Location]" data-language="ocaml">val default_alert_reporter : t -&gt; Warnings.alert -&gt; report option</pre>
<div class="info "> <div class="info-desc"> <p>Original alert reporter for use in hooks.</p> </div> </div> <h3 id="2_Printingalerts">Printing alerts</h3> <pre id="VALprint_alert" data-type="val print_alert [Module Location]" data-language="ocaml">val print_alert : t -&gt; Format.formatter -&gt; Warnings.alert -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>Prints an alert. This is simply the composition of <code class="code">report_alert</code> and <code class="code">print_report</code>.</p> </div> </div> <pre id="VALprerr_alert" data-type="val prerr_alert [Module Location]" data-language="ocaml">val prerr_alert : t -&gt; Warnings.alert -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>Same as <code class="code">print_alert</code>, but uses <code class="code">!formatter_for_warnings</code> as output formatter.</p> </div> </div> <pre id="VALdeprecated" data-type="val deprecated [Module Location]" data-language="ocaml">val deprecated : ?def:t -&gt; ?use:t -&gt; t -&gt; string -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>Prints a deprecation alert.</p> </div> </div> <pre id="VALalert" data-type="val alert [Module Location]" data-language="ocaml">val alert : ?def:t -&gt;       ?use:t -&gt; kind:string -&gt; t -&gt; string -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>Prints an arbitrary alert.</p> </div> </div> <pre id="VALauto_include_alert" data-type="val auto_include_alert [Module Location]" data-language="ocaml">val auto_include_alert : string -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>Prints an alert that -I +lib has been automatically added to the load path</p> </div> </div> <pre id="VALdeprecated_script_alert" data-type="val deprecated_script_alert [Module Location]" data-language="ocaml">val deprecated_script_alert : string -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">deprecated_script_alert command</code> prints an alert that <code class="code">command foo</code> has been deprecated in favour of <code class="code">command ./foo</code></p> </div> </div> <h2 id="1_Reportingerrors">Reporting errors</h2> <pre id="TYPEerror" data-type="type error [Module Location]" data-language="ocaml">type error = report </pre> <div class="info "> <div class="info-desc"> <p>An <code class="code">error</code> is a <code class="code">report</code> which <code class="code">report_kind</code> must be <code class="code"><span class="constructor">Report_error</span></code>.</p> </div> </div> <pre id="VALerror" data-type="val error [Module Location]" data-language="ocaml">val error : ?loc:t -&gt; ?sub:msg list -&gt; string -&gt; error</pre> <pre id="VALerrorf" data-type="val errorf [Module Location]" data-language="ocaml">val errorf : ?loc:t -&gt;       ?sub:msg list -&gt;       ('a, Format.formatter, unit, error) format4 -&gt; 'a</pre> <pre id="VALerror_of_printer" data-type="val error_of_printer [Module Location]" data-language="ocaml">val error_of_printer : ?loc:t -&gt;       ?sub:msg list -&gt;       (Format.formatter -&gt; 'a -&gt; unit) -&gt; 'a -&gt; error</pre> <pre id="VALerror_of_printer_file" data-type="val error_of_printer_file [Module Location]" data-language="ocaml">val error_of_printer_file : (Format.formatter -&gt; 'a -&gt; unit) -&gt; 'a -&gt; error</pre>
<h2 id="1_Automaticallyreportingerrorsforraisedexceptions">Automatically reporting errors for raised exceptions</h2> <pre id="VALregister_error_of_exn" data-type="val register_error_of_exn [Module Location]" data-language="ocaml">val register_error_of_exn : (exn -&gt; error option) -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>Each compiler module which defines a custom type of exception which can surface as a user-visible error should register a "printer" for this exception using <code class="code">register_error_of_exn</code>. The result of the printer is an <code class="code">error</code> value containing a location, a message, and optionally sub-messages (each of them being located as well).</p> </div> </div> <pre id="VALerror_of_exn" data-type="val error_of_exn [Module Location]" data-language="ocaml">val error_of_exn : exn -&gt; [ `Already_displayed | `Ok of error ] option</pre> <pre id="EXCEPTIONError" data-type="exception Error [Module Location]" data-language="ocaml">exception Error of error</pre> <div class="info "> <div class="info-desc"> <p>Raising <code class="code"><span class="constructor">Error</span> e</code> signals an error <code class="code">e</code>; the exception will be caught and the error will be printed.</p> </div> </div> <pre id="EXCEPTIONAlready_displayed_error" data-type="exception Already_displayed_error [Module Location]" data-language="ocaml">exception Already_displayed_error</pre> <div class="info "> <div class="info-desc"> <p>Raising <code class="code"><span class="constructor">Already_displayed_error</span></code> signals an error which has already been printed. The exception will be caught, but nothing will be printed</p> </div> </div> <pre id="VALraise_errorf" data-type="val raise_errorf [Module Location]" data-language="ocaml">val raise_errorf : ?loc:t -&gt;       ?sub:msg list -&gt;       ('a, Format.formatter, unit, 'b) format4 -&gt; 'a</pre> <pre id="VALreport_exception" data-type="val report_exception [Module Location]" data-language="ocaml">val report_exception : Format.formatter -&gt; exn -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>Reraise the exception if it is unknown.</p> </div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1995-2024 INRIA.<br>
    <a href="https://ocaml.org/manual/5.2/api/compilerlibref/Location.html" class="_attribution-link">https://ocaml.org/manual/5.2/api/compilerlibref/Location.html</a>
  </p>
</div>
