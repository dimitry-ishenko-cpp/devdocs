<div class="api"> <h1>Module Misc</h1> <pre id="MODULEMisc" data-type="module Misc [Module Misc]" data-language="ocaml">module Misc: sig .. end</pre>
<div class="info module top"> <div class="info-desc"> <p>Miscellaneous useful types and functions</p> <p><b>Warning:</b> this module is unstable and part of <a href="compiler_libs.html">compiler-libs</a>.</p> </div> </div>  <h2 id="1_Reportingfatalerrors">Reporting fatal errors</h2> <pre id="VALfatal_error" data-type="val fatal_error [Module Misc]" data-language="ocaml">val fatal_error : string -&gt; 'a</pre>
<div class="info "> <div class="info-desc"> <p>Raise the <code class="code"><span class="constructor">Fatal_error</span></code> exception with the given string.</p> </div> </div> <pre id="VALfatal_errorf" data-type="val fatal_errorf [Module Misc]" data-language="ocaml">val fatal_errorf : ('a, Format.formatter, unit, 'b) format4 -&gt; 'a</pre>
<div class="info "> <div class="info-desc"> <p>Format the arguments according to the given format string and raise <code class="code"><span class="constructor">Fatal_error</span></code> with the resulting string.</p> </div> </div> <pre id="EXCEPTIONFatal_error" data-type="exception Fatal_error [Module Misc]" data-language="ocaml">exception Fatal_error</pre> <h2 id="1_Exceptionsandfinalization">Exceptions and finalization</h2> <pre id="VALtry_finally" data-type="val try_finally [Module Misc]" data-language="ocaml">val try_finally : ?always:(unit -&gt; unit) -&gt; ?exceptionally:(unit -&gt; unit) -&gt; (unit -&gt; 'a) -&gt; 'a</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">try_finally work ~always ~exceptionally</code> is designed to run code in <code class="code">work</code> that may fail with an exception, and has two kind of cleanup routines: <code class="code">always</code>, that must be run after any execution of the function (typically, freeing system resources), and <code class="code">exceptionally</code>, that should be run only if <code class="code">work</code> or <code class="code">always</code> failed with an exception (typically, undoing user-visible state changes that would only make sense if the function completes correctly). For example:</p> <pre class="codepre" data-language="ocaml">      let objfile = outputprefix ^ ".cmo" in
      let oc = open_out_bin objfile in
      Misc.try_finally
        (fun () -&gt;
           bytecode
           ++ Timings.(accumulate_time (Generate sourcefile))
               (Emitcode.to_file oc modulename objfile);
           Warnings.check_fatal ())
        ~always:(fun () -&gt; close_out oc)
        ~exceptionally:(fun _exn -&gt; remove_file objfile);
    </pre> <p>If <code class="code">exceptionally</code> fail with an exception, it is propagated as usual.</p> <p>If <code class="code">always</code> or <code class="code">exceptionally</code> use exceptions internally for control-flow but do not raise, then <code class="code">try_finally</code> is careful to preserve any exception backtrace coming from <code class="code">work</code> or <code class="code">always</code> for easier debugging.</p> </div> </div> <pre id="VALreraise_preserving_backtrace" data-type="val reraise_preserving_backtrace [Module Misc]" data-language="ocaml">val reraise_preserving_backtrace : exn -&gt; (unit -&gt; unit) -&gt; 'a</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">reraise_preserving_backtrace e f</code> is (f (); raise e) except that the current backtrace is preserved, even if <code class="code">f</code> uses exceptions internally.</p> </div> </div> <h2 id="1_Listoperations">List operations</h2> <pre id="VALmap_end" data-type="val map_end [Module Misc]" data-language="ocaml">val map_end : ('a -&gt; 'b) -&gt; 'a list -&gt; 'b list -&gt; 'b list</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">map_end f l t</code> is <code class="code">map f l @ t</code>, just more efficient.</p> </div> </div> <pre id="VALrev_map_end" data-type="val rev_map_end [Module Misc]" data-language="ocaml">val rev_map_end : ('a -&gt; 'b) -&gt; 'a list -&gt; 'b list -&gt; 'b list</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">map_end f l t</code> is <code class="code">map f (rev l) @ t</code>, just more efficient.</p> </div> </div> <pre id="VALmap_left_right" data-type="val map_left_right [Module Misc]" data-language="ocaml">val map_left_right : ('a -&gt; 'b) -&gt; 'a list -&gt; 'b list</pre>
<div class="info "> <div class="info-desc"> <p>Like <code class="code"><span class="constructor">List</span>.map</code>, with guaranteed left-to-right evaluation order</p> </div> </div> <pre id="VALfor_all2" data-type="val for_all2 [Module Misc]" data-language="ocaml">val for_all2 : ('a -&gt; 'b -&gt; bool) -&gt; 'a list -&gt; 'b list -&gt; bool</pre>
<div class="info "> <div class="info-desc"> <p>Same as <code class="code"><span class="constructor">List</span>.for_all</code> but for a binary predicate. In addition, this <code class="code">for_all2</code> never fails: given two lists with different lengths, it returns false.</p> </div> </div> <pre id="VALreplicate_list" data-type="val replicate_list [Module Misc]" data-language="ocaml">val replicate_list : 'a -&gt; int -&gt; 'a list</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">replicate_list elem n</code> is the list with <code class="code">n</code> elements all identical to <code class="code">elem</code>.</p> </div> </div> <pre id="VALlist_remove" data-type="val list_remove [Module Misc]" data-language="ocaml">val list_remove : 'a -&gt; 'a list -&gt; 'a list</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">list_remove x l</code> returns a copy of <code class="code">l</code> with the first element equal to <code class="code">x</code> removed.</p> </div> </div> <pre id="VALsplit_last" data-type="val split_last [Module Misc]" data-language="ocaml">val split_last : 'a list -&gt; 'a list * 'a</pre>
<div class="info "> <div class="info-desc"> <p>Return the last element and the other elements of the given list.</p> </div> </div> <h2 id="1_Hashtableoperations">Hash table operations</h2> <pre id="VALcreate_hashtable" data-type="val create_hashtable [Module Misc]" data-language="ocaml">val create_hashtable : int -&gt; ('a * 'b) list -&gt; ('a, 'b) Hashtbl.t</pre>
<div class="info "> <div class="info-desc"> <p>Create a hashtable with the given initial size and fills it with the given bindings.</p> </div> </div> <h2 id="1_Extensionstothestandardlibrary">Extensions to the standard library</h2> <pre id="MODULEStdlib" data-type="module Stdlib [Module Misc]" data-language="ocaml">module Stdlib: sig .. end</pre>
<h2 id="1_Operationsonfilesandfilepaths">Operations on files and file paths</h2> <pre id="VALfind_in_path" data-type="val find_in_path [Module Misc]" data-language="ocaml">val find_in_path : string list -&gt; string -&gt; string</pre>
<div class="info "> <div class="info-desc"> <p>Search a file in a list of directories.</p> </div> </div> <pre id="VALfind_in_path_rel" data-type="val find_in_path_rel [Module Misc]" data-language="ocaml">val find_in_path_rel : string list -&gt; string -&gt; string</pre>
<div class="info "> <div class="info-desc"> <p>Search a relative file in a list of directories.</p> </div> </div> <pre id="VALnormalized_unit_filename" data-type="val normalized_unit_filename [Module Misc]" data-language="ocaml">val normalized_unit_filename : string -&gt; string</pre>
<div class="info "> <div class="info-desc"> <p>Normalize file name <code class="code"><span class="constructor">Foo</span>.ml</code> to <code class="code">foo.ml</code></p> </div> </div> <pre id="VALfind_in_path_normalized" data-type="val find_in_path_normalized [Module Misc]" data-language="ocaml">val find_in_path_normalized : string list -&gt; string -&gt; string</pre>
<div class="info "> <div class="info-desc"> <p>Same as <a href="misc.html#VALfind_in_path_rel"><code class="code"><span class="constructor">Misc</span>.find_in_path_rel</code></a> , but search also for normalized unit filename, i.e. if name is <code class="code"><span class="constructor">Foo</span>.ml</code>, allow <code class="code">/path/<span class="constructor">Foo</span>.ml</code> and <code class="code">/path/foo.ml</code> to match.</p> </div> </div> <pre id="VALremove_file" data-type="val remove_file [Module Misc]" data-language="ocaml">val remove_file : string -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>Delete the given file if it exists and is a regular file. Does nothing for other kinds of files. Never raises an error.</p> </div> </div> <pre id="VALexpand_directory" data-type="val expand_directory [Module Misc]" data-language="ocaml">val expand_directory : string -&gt; string -&gt; string</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">expand_directory alt file</code> eventually expands a <code class="code">+</code> at the beginning of file into <code class="code">alt</code> (an alternate root directory)</p> </div> </div> <pre id="VALsplit_path_contents" data-type="val split_path_contents [Module Misc]" data-language="ocaml">val split_path_contents : ?sep:char -&gt; string -&gt; string list</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">split_path_contents ?sep s</code> interprets <code class="code">s</code> as the value of a "PATH"-like variable and returns the corresponding list of directories. <code class="code">s</code> is split using the platform-specific delimiter, or <code class="code">~sep</code> if it is passed.</p> <p>Returns the empty list if <code class="code">s</code> is empty.</p> </div> </div> <pre id="VALcopy_file" data-type="val copy_file [Module Misc]" data-language="ocaml">val copy_file : in_channel -&gt; out_channel -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">copy_file ic oc</code> reads the contents of file <code class="code">ic</code> and copies them to <code class="code">oc</code>. It stops when encountering EOF on <code class="code">ic</code>.</p> </div> </div> <pre id="VALcopy_file_chunk" data-type="val copy_file_chunk [Module Misc]" data-language="ocaml">val copy_file_chunk : in_channel -&gt; out_channel -&gt; int -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">copy_file_chunk ic oc n</code> reads <code class="code">n</code> bytes from <code class="code">ic</code> and copies them to <code class="code">oc</code>. It raises <code class="code"><span class="constructor">End_of_file</span></code> when encountering EOF on <code class="code">ic</code>.</p> </div> </div> <pre id="VALstring_of_file" data-type="val string_of_file [Module Misc]" data-language="ocaml">val string_of_file : in_channel -&gt; string</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">string_of_file ic</code> reads the contents of file <code class="code">ic</code> and copies them to a string. It stops when encountering EOF on <code class="code">ic</code>.</p> </div> </div> <pre id="VALoutput_to_file_via_temporary" data-type="val output_to_file_via_temporary [Module Misc]" data-language="ocaml">val output_to_file_via_temporary : ?mode:open_flag list -&gt;       string -&gt; (string -&gt; out_channel -&gt; 'a) -&gt; 'a</pre>
<div class="info "> <div class="info-desc"> <p>Produce output in temporary file, then rename it (as atomically as possible) to the desired output file name. <code class="code">output_to_file_via_temporary filename fn</code> opens a temporary file which is passed to <code class="code">fn</code> (name + output channel). When <code class="code">fn</code> returns, the channel is closed and the temporary file is renamed to <code class="code">filename</code>.</p> </div> </div> <pre id="VALprotect_writing_to_file" data-type="val protect_writing_to_file [Module Misc]" data-language="ocaml">val protect_writing_to_file : filename:string -&gt; f:(out_channel -&gt; 'a) -&gt; 'a</pre>
<div class="info "> <div class="info-desc"> <p>Open the given <code class="code">filename</code> for writing (in binary mode), pass the <code class="code">out_channel</code> to the given function, then close the channel. If the function raises an exception then <code class="code">filename</code> will be removed.</p> </div> </div> <pre id="VALconcat_null_terminated" data-type="val concat_null_terminated [Module Misc]" data-language="ocaml">val concat_null_terminated : string list -&gt; string</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">concat_null_terminated [x1;x2; ... xn]</code> is <code class="code">x1 ^ <span class="string">"\000"</span> ^ x2 ^ <span class="string">"\000"</span> ^ ... ^ xn ^ <span class="string">"\000"</span></code></p> </div> </div> <pre id="VALsplit_null_terminated" data-type="val split_null_terminated [Module Misc]" data-language="ocaml">val split_null_terminated : string -&gt; string list</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">split_null_terminated s</code> is similar <code class="code"><span class="constructor">String</span>.split_on_char <span class="string">'\000'</span></code> but ignores the trailing separator, if any</p> </div> </div> <pre id="VALchop_extensions" data-type="val chop_extensions [Module Misc]" data-language="ocaml">val chop_extensions : string -&gt; string</pre>
<div class="info "> <div class="info-desc"> <p>Return the given file name without its extensions. The extensions is the longest suffix starting with a period and not including a directory separator, <code class="code">.xyz.uvw</code> for instance.</p> <p>Return the given name if it does not contain an extension.</p> </div> </div> <h2 id="1_Integeroperations">Integer operations</h2> <pre id="VALlog2" data-type="val log2 [Module Misc]" data-language="ocaml">val log2 : int -&gt; int</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">log2 n</code> returns <code class="code">s</code> such that <code class="code">n = 1 <span class="keyword">lsl</span> s</code> if <code class="code">n</code> is a power of 2</p> </div> </div> <pre id="VALalign" data-type="val align [Module Misc]" data-language="ocaml">val align : int -&gt; int -&gt; int</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">align n a</code> rounds <code class="code">n</code> upwards to a multiple of <code class="code">a</code> (a power of 2).</p> </div> </div> <pre id="VALno_overflow_add" data-type="val no_overflow_add [Module Misc]" data-language="ocaml">val no_overflow_add : int -&gt; int -&gt; bool</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">no_overflow_add n1 n2</code> returns <code class="code"><span class="keyword">true</span></code> if the computation of <code class="code">n1 + n2</code> does not overflow.</p> </div> </div> <pre id="VALno_overflow_sub" data-type="val no_overflow_sub [Module Misc]" data-language="ocaml">val no_overflow_sub : int -&gt; int -&gt; bool</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">no_overflow_sub n1 n2</code> returns <code class="code"><span class="keyword">true</span></code> if the computation of <code class="code">n1 - n2</code> does not overflow.</p> </div> </div> <pre id="VALno_overflow_mul" data-type="val no_overflow_mul [Module Misc]" data-language="ocaml">val no_overflow_mul : int -&gt; int -&gt; bool</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">no_overflow_mul n1 n2</code> returns <code class="code"><span class="keyword">true</span></code> if the computation of <code class="code">n1 * n2</code> does not overflow.</p> </div> </div> <pre id="VALno_overflow_lsl" data-type="val no_overflow_lsl [Module Misc]" data-language="ocaml">val no_overflow_lsl : int -&gt; int -&gt; bool</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">no_overflow_lsl n k</code> returns <code class="code"><span class="keyword">true</span></code> if the computation of <code class="code">n <span class="keyword">lsl</span> k</code> does not overflow.</p> </div> </div> <pre id="VALletter_of_int" data-type="val letter_of_int [Module Misc]" data-language="ocaml">val letter_of_int : int -&gt; string</pre> <pre id="MODULEInt_literal_converter" data-type="module Int_literal_converter [Module Misc]" data-language="ocaml">module Int_literal_converter: sig .. end</pre> <pre id="VALfind_first_mono" data-type="val find_first_mono [Module Misc]" data-language="ocaml">val find_first_mono : (int -&gt; bool) -&gt; int</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">find_first_mono p</code> takes an integer predicate <code class="code">p : int <span class="keywordsign">-&gt;</span> bool</code> that we assume: 1. is monotonic on natural numbers: if <code class="code">a &lt;= b</code> then <code class="code">p a</code> implies <code class="code">p b</code>, 2. is satisfied for some natural numbers in range <code class="code">0; max_int</code> (this is equivalent to: <code class="code">p max_int = <span class="keyword">true</span></code>).</p> <p><code class="code">find_first_mono p</code> is the smallest natural number N that satisfies <code class="code">p</code>, computed in O(log(N)) calls to <code class="code">p</code>.</p> <p>Our implementation supports two cases where the preconditions on <code class="code">p</code> are not respected:</p> <ul> <li>If <code class="code">p</code> is always <code class="code"><span class="keyword">false</span></code>, we silently return <code class="code">max_int</code> instead of looping or crashing.</li> <li>If <code class="code">p</code> is non-monotonic but eventually true, we return some satisfying value.</li> </ul> </div> </div> <h2 id="1_Stringoperations">String operations</h2> <pre id="VALsearch_substring" data-type="val search_substring [Module Misc]" data-language="ocaml">val search_substring : string -&gt; string -&gt; int -&gt; int</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">search_substring pat str start</code> returns the position of the first occurrence of string <code class="code">pat</code> in string <code class="code">str</code>. Search starts at offset <code class="code">start</code> in <code class="code">str</code>. Raise <code class="code"><span class="constructor">Not_found</span></code> if <code class="code">pat</code> does not occur.</p> </div> </div> <pre id="VALreplace_substring" data-type="val replace_substring [Module Misc]" data-language="ocaml">val replace_substring : before:string -&gt; after:string -&gt; string -&gt; string</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">replace_substring ~before ~after str</code> replaces all occurrences of <code class="code">before</code> with <code class="code">after</code> in <code class="code">str</code> and returns the resulting string.</p> </div> </div> <pre id="VALrev_split_words" data-type="val rev_split_words [Module Misc]" data-language="ocaml">val rev_split_words : string -&gt; string list</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">rev_split_words s</code> splits <code class="code">s</code> in blank-separated words, and returns the list of words in reverse order.</p> </div> </div> <pre id="VALcut_at" data-type="val cut_at [Module Misc]" data-language="ocaml">val cut_at : string -&gt; char -&gt; string * string</pre>
<div class="info "> <div class="info-desc"> <p><code class="code"><span class="constructor">String</span>.cut_at s c</code> returns a pair containing the sub-string before the first occurrence of <code class="code">c</code> in <code class="code">s</code>, and the sub-string after the first occurrence of <code class="code">c</code> in <code class="code">s</code>. <code class="code"><span class="keyword">let</span> (before, after) = <span class="constructor">String</span>.cut_at s c <span class="keyword">in</span><br>
    before ^ <span class="constructor">String</span>.make 1 c ^ after</code> is the identity if <code class="code">s</code> contains <code class="code">c</code>.</p> <p>Raise <code class="code"><span class="constructor">Not_found</span></code> if the character does not appear in the string</p> </div> <ul class="info-attributes"> <li>
<b>Since</b> 4.01</li> </ul> </div> <pre id="VALordinal_suffix" data-type="val ordinal_suffix [Module Misc]" data-language="ocaml">val ordinal_suffix : int -&gt; string</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">ordinal_suffix n</code> is the appropriate suffix to append to the numeral <code class="code">n</code> as an ordinal number: <code class="code">1</code> -&gt; <code class="code"><span class="string">"st"</span></code>, <code class="code">2</code> -&gt; <code class="code"><span class="string">"nd"</span></code>, <code class="code">3</code> -&gt; <code class="code"><span class="string">"rd"</span></code>, <code class="code">4</code> -&gt; <code class="code"><span class="string">"th"</span></code>, and so on. Handles larger numbers (e.g., <code class="code">42</code> -&gt; <code class="code"><span class="string">"nd"</span></code>) and the numbers 11--13 (which all get <code class="code"><span class="string">"th"</span></code>) correctly.</p> </div> </div> <pre id="VALnormalise_eol" data-type="val normalise_eol [Module Misc]" data-language="ocaml">val normalise_eol : string -&gt; string</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">normalise_eol s</code> returns a fresh copy of <code class="code">s</code> with any '\r' characters removed. Intended for pre-processing text which will subsequently be printed on a channel which performs EOL transformations (i.e. Windows)</p> </div> </div> <pre id="VALdelete_eol_spaces" data-type="val delete_eol_spaces [Module Misc]" data-language="ocaml">val delete_eol_spaces : string -&gt; string</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">delete_eol_spaces s</code> returns a fresh copy of <code class="code">s</code> with any end of line spaces removed. Intended to normalize the output of the toplevel for tests.</p> </div> </div> <h2 id="1_Operationsonreferences">Operations on references</h2> <pre id="TYPEref_and_value" data-type="type ref_and_value [Module Misc]" data-language="ocaml">type ref_and_value = </pre>
<table class="typetable"> <tbody><tr> <td align="left" valign="top"> <code><span class="keyword">|</span></code>
</td> <td align="left" valign="top"> <code><span id="TYPEELTref_and_value.R"><span class="constructor">R</span></span> <span class="keyword">:</span> <code class="type">'a ref * 'a</code> <span class="keyword">-&gt;</span> <code class="type"><a href="misc.html#TYPEref_and_value">ref_and_value</a></code></code>
</td> </tr></tbody>
</table> <pre id="VALprotect_refs" data-type="val protect_refs [Module Misc]" data-language="ocaml">val protect_refs : ref_and_value list -&gt; (unit -&gt; 'a) -&gt; 'a</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">protect_refs l f</code> temporarily sets <code class="code">r</code> to <code class="code">v</code> for each <code class="code"><span class="constructor">R</span> (r, v)</code> in <code class="code">l</code> while executing <code class="code">f</code>. The previous contents of the references is restored even if <code class="code">f</code> raises an exception, without altering the exception backtrace.</p> </div> </div> <pre id="VALget_ref" data-type="val get_ref [Module Misc]" data-language="ocaml">val get_ref : 'a list ref -&gt; 'a list</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">get_ref lr</code> returns the content of the list reference <code class="code">lr</code> and reset its content to the empty list.</p> </div> </div> <pre id="VALset_or_ignore" data-type="val set_or_ignore [Module Misc]" data-language="ocaml">val set_or_ignore : ('a -&gt; 'b option) -&gt; 'b option ref -&gt; 'a -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">set_or_ignore f opt x</code> sets <code class="code">opt</code> to <code class="code">f x</code> if it returns <code class="code"><span class="constructor">Some</span> _</code>, or leaves it unmodified if it returns <code class="code"><span class="constructor">None</span></code>.</p> </div> </div> <h2 id="1_Operationsontriplesandquadruples">Operations on triples and quadruples</h2> <pre id="VALfst3" data-type="val fst3 [Module Misc]" data-language="ocaml">val fst3 : 'a * 'b * 'c -&gt; 'a</pre> <pre id="VALsnd3" data-type="val snd3 [Module Misc]" data-language="ocaml">val snd3 : 'a * 'b * 'c -&gt; 'b</pre> <pre id="VALthd3" data-type="val thd3 [Module Misc]" data-language="ocaml">val thd3 : 'a * 'b * 'c -&gt; 'c</pre> <pre id="VALfst4" data-type="val fst4 [Module Misc]" data-language="ocaml">val fst4 : 'a * 'b * 'c * 'd -&gt; 'a</pre> <pre id="VALsnd4" data-type="val snd4 [Module Misc]" data-language="ocaml">val snd4 : 'a * 'b * 'c * 'd -&gt; 'b</pre> <pre id="VALthd4" data-type="val thd4 [Module Misc]" data-language="ocaml">val thd4 : 'a * 'b * 'c * 'd -&gt; 'c</pre> <pre id="VALfor4" data-type="val for4 [Module Misc]" data-language="ocaml">val for4 : 'a * 'b * 'c * 'd -&gt; 'd</pre>
<h2 id="1_Spellcheckinganddidyoumeansuggestions">Spell checking and ``did you mean'' suggestions</h2> <pre id="VALedit_distance" data-type="val edit_distance [Module Misc]" data-language="ocaml">val edit_distance : string -&gt; string -&gt; int -&gt; int option</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">edit_distance a b cutoff</code> computes the edit distance between strings <code class="code">a</code> and <code class="code">b</code>. To help efficiency, it uses a cutoff: if the distance <code class="code">d</code> is smaller than <code class="code">cutoff</code>, it returns <code class="code"><span class="constructor">Some</span> d</code>, else <code class="code"><span class="constructor">None</span></code>.</p> <p>The distance algorithm currently used is Damerau-Levenshtein: it computes the number of insertion, deletion, substitution of letters, or swapping of adjacent letters to go from one word to the other. The particular algorithm may change in the future.</p> </div> </div> <pre id="VALspellcheck" data-type="val spellcheck [Module Misc]" data-language="ocaml">val spellcheck : string list -&gt; string -&gt; string list</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">spellcheck env name</code> takes a list of names <code class="code">env</code> that exist in the current environment and an erroneous <code class="code">name</code>, and returns a list of suggestions taken from <code class="code">env</code>, that are close enough to <code class="code">name</code> that it may be a typo for one of them.</p> </div> </div> <pre id="VALdid_you_mean" data-type="val did_you_mean [Module Misc]" data-language="ocaml">val did_you_mean : Format.formatter -&gt; (unit -&gt; string list) -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">did_you_mean ppf get_choices</code> hints that the user may have meant one of the option returned by calling <code class="code">get_choices</code>. It does nothing if the returned list is empty.</p> <p>The <code class="code">unit <span class="keywordsign">-&gt;</span> ...</code> thunking is meant to delay any potentially-slow computation (typically computing edit-distance with many things from the current environment) to when the hint message is to be printed. You should print an understandable error message before calling <code class="code">did_you_mean</code>, so that users get a clear notification of the failure even if producing the hint is slow.</p> </div> </div> <pre id="MODULEColor" data-type="module Color [Module Misc]" data-language="ocaml">module Color: sig .. end</pre>
<div class="info"> <p>Color support detection</p> </div> <h2 id="1_Stylinghandlingforterminaloutput">Styling handling for terminal output </h2> <pre id="MODULEStyle" data-type="module Style [Module Misc]" data-language="ocaml">module Style: sig .. end</pre> <pre id="MODULEError_style" data-type="module Error_style [Module Misc]" data-language="ocaml">module Error_style: sig .. end</pre>
<h2 id="1_Formattedoutput">Formatted output</h2> <pre id="VALprint_if" data-type="val print_if [Module Misc]" data-language="ocaml">val print_if : Format.formatter -&gt;       bool ref -&gt; (Format.formatter -&gt; 'a -&gt; unit) -&gt; 'a -&gt; 'a</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">print_if ppf flag fmt x</code> prints <code class="code">x</code> with <code class="code">fmt</code> on <code class="code">ppf</code> if <code class="code">b</code> is true.</p> </div> </div> <pre id="VALpp_two_columns" data-type="val pp_two_columns [Module Misc]" data-language="ocaml">val pp_two_columns : ?sep:string -&gt;       ?max_lines:int -&gt; Format.formatter -&gt; (string * string) list -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p><code class="code">pp_two_columns ?sep ?max_lines ppf l</code> prints the lines in <code class="code">l</code> as two columns separated by <code class="code">sep</code> ("|" by default). <code class="code">max_lines</code> can be used to indicate a maximum number of lines to print -- an ellipsis gets inserted at the middle if the input has too many lines.</p> <p>Example:</p> <pre class="verbatim" data-language="ocaml">pp_two_columns ~max_lines:3 Format.std_formatter [
      "abc", "hello";
      "def", "zzz";
      "a"  , "bllbl";
      "bb" , "dddddd";
    ]</pre> <p>prints</p> <pre class="verbatim" data-language="ocaml">    abc | hello
    ...
    bb  | dddddd
   </pre>
</div> </div> <pre id="VALprint_see_manual" data-type="val print_see_manual [Module Misc]" data-language="ocaml">val print_see_manual : Format.formatter -&gt; int list -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>See manual section</p> </div> </div> <h2 id="1_Displayingconfigurationvariables">Displaying configuration variables</h2> <pre id="VALshow_config_and_exit" data-type="val show_config_and_exit [Module Misc]" data-language="ocaml">val show_config_and_exit : unit -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>Display the values of all compiler configuration variables from module <code class="code"><span class="constructor">Config</span></code>, then exit the program with code 0.</p> </div> </div> <pre id="VALshow_config_variable_and_exit" data-type="val show_config_variable_and_exit [Module Misc]" data-language="ocaml">val show_config_variable_and_exit : string -&gt; unit</pre>
<div class="info "> <div class="info-desc"> <p>Display the value of the given configuration variable, then exit the program with code 0.</p> </div> </div> <h2 id="1_Handlingofbuildmaps">Handling of build maps</h2>
<p>Build maps cause the compiler to normalize file names embedded in object files, thus leading to more reproducible builds.</p> <pre id="VALget_build_path_prefix_map" data-type="val get_build_path_prefix_map [Module Misc]" data-language="ocaml">val get_build_path_prefix_map : unit -&gt; Build_path_prefix_map.map option</pre>
<div class="info "> <div class="info-desc"> <p>Returns the map encoded in the <code class="code"><span class="constructor">BUILD_PATH_PREFIX_MAP</span></code> environment variable.</p> </div> </div> <pre id="VALdebug_prefix_map_flags" data-type="val debug_prefix_map_flags [Module Misc]" data-language="ocaml">val debug_prefix_map_flags : unit -&gt; string list</pre>
<div class="info "> <div class="info-desc"> <p>Returns the list of <code class="code">--debug-prefix-map</code> flags to be passed to the assembler, built from the <code class="code"><span class="constructor">BUILD_PATH_PREFIX_MAP</span></code> environment variable.</p> </div> </div> <h2 id="1_Handlingofmagicnumbers">Handling of magic numbers</h2> <pre id="MODULEMagic_number" data-type="module Magic_number [Module Misc]" data-language="ocaml">module Magic_number: sig .. end</pre>
<h2 id="1_Miscellaneoustypealiases">Miscellaneous type aliases</h2> <pre id="TYPEfilepath" data-type="type filepath [Module Misc]" data-language="ocaml">type filepath = string </pre> <pre id="TYPEmodname" data-type="type modname [Module Misc]" data-language="ocaml">type modname = string </pre> <pre id="TYPEcrcs" data-type="type crcs [Module Misc]" data-language="ocaml">type crcs = (modname * Digest.t option) list </pre> <pre id="TYPEalerts" data-type="type alerts [Module Misc]" data-language="ocaml">type alerts = string Stdlib.String.Map.t </pre> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1995-2024 INRIA.<br>
    <a href="https://ocaml.org/manual/5.2/api/compilerlibref/Misc.html" class="_attribution-link">https://ocaml.org/manual/5.2/api/compilerlibref/Misc.html</a>
  </p>
</div>
