<h1 class="chapter" id="sec638">Chapter 33 The threads library</h1> 
<p>The <span class="machine"><span class="font-tt">threads</span></span> library allows concurrent programming in OCaml. It provides multiple threads of control (also called lightweight processes) that execute concurrently in the same memory space. Threads communicate by in-place modification of shared data structures, or by sending and receiving data on communication channels.</p>
<p>The <span class="machine"><span class="font-tt">threads</span></span> library is implemented on top of the threading facilities provided by the operating system: POSIX 1003.1c threads for Linux, MacOS, and other Unix-like systems; Win32 threads for Windows. Only one thread at a time is allowed to run OCaml code on a particular domain <a href="parallelism.html#s%3Apar_systhread_interaction">9.5.1</a>. Hence, opportunities for parallelism are limited to the parts of the program that run system or C library code. However, threads provide concurrency and can be used to structure programs as several communicating processes. Threads also efficiently support concurrent, overlapping I/O operations.</p>
<p>Programs that use threads must be linked as follows: </p>
<pre data-language="ocaml">
        ocamlc -I +unix -I +threads other options unix.cma threads.cma other files
        ocamlopt -I +unix -I +threads other options unix.cmxa threads.cmxa other files
</pre>
<p> Compilation units that use the <span class="machine"><span class="font-tt">threads</span></span> library must also be compiled with the <span class="machine"><span class="font-tt">-I +threads</span></span> option (see chapter <a href="comp.html#c%3Acamlc">13</a>).</p>
<ul class="ftoc2">
<li class="li-links">
<a href="libref/thread.html">Module <span class="font-tt">Thread</span></a>: lightweight threads </li>
<li class="li-links">
<a href="libref/event.html">Module <span class="font-tt">Event</span></a>: first-class synchronous communication </li>
</ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1995-2022 INRIA.<br>
    <a href="https://v2.ocaml.org/releases/5.0/htmlman/libthreads.html" class="_attribution-link">https://v2.ocaml.org/releases/5.0/htmlman/libthreads.html</a>
  </p>
</div>
