<header><h1>Corepack</h1></header><p>You may notice by reading our <a href="getting-started/install.html">installation guide</a> that we don't tell you to run <code>npm install -g yarn</code> to install Yarn - we even recommend against it. The reason is simple: <strong>just like your project dependencies must be locked, so should be the package manager itself.</strong></p> <p>Installing Yarn as a global binary meant you always used whatever was the latest version published. Most of the time it worked fine, but every once in a while something was shipped that could impact the way your project was installed - be it a bugfix, new bug, or breaking change.</p> <p>To counter that, Yarn joined forces with the Node.js project to start the development of <a href="https://nodejs.org/api/corepack.html" target="_blank" rel="noopener noreferrer">Corepack</a>, an official Node.js tool letting you define which package manager version you want to use on a per-project basis, just like your lockfile does for your project dependencies.</p> <div class="theme-admonition theme-admonition-info admonition_JrWa alert alert--info">
<div class="admonitionHeading_MtRg">
info</div>
<div class="admonitionContent_G2Ck"><p>Corepack is marked experimental so we can iterate on its CLI faster, but it's already the preferred way to install package managers - both for Yarn and for pnpm.</p></div>
</div> <h2 class="anchor anchorWithStickyNavbar_ATBP" id="installation">Installation<a class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation" href="corepack.html#installation">​</a>
</h2> <p>Corepack is included with all official Node.js releases starting from Node.js 14.19 / 16.9. It's however opt-in for the duration of the experimental stage, so you'll need to run <code>corepack enable</code> before it's active.</p> <p>You can quickly check whether Corepack is enabled by running <span class="inline_hdsZ"><code><span class="token_Ye2a" data-type="binary">yarn</span> <a class="path_tCL7" data-tooltip-id="tooltip" data-tooltip-content="Execute a shell script
" href="cli/exec.html"><span class="token_Ye2a" data-type="path">exec</span></a> <span class="token_Ye2a" data-type="positional">env</span></code></span>: if you get a path as output, Corepack is properly installed. If not, something may be messing with how the shims are installed. In that case check the <a href="corepack.html#troubleshooting">Troubleshooting</a> section for advices.</p> <div class="theme-admonition theme-admonition-danger admonition_JrWa alert alert--danger">
<div class="admonitionHeading_MtRg">
danger</div>
<div class="admonitionContent_G2Ck"><p>Some third-party distributors may not include Corepack by default, in particular if you install Node.js from your system package manager. If that happens, running <code>npm install -g corepack</code> before <code>corepack enable</code> should do the trick.</p></div>
</div> <h2 class="anchor anchorWithStickyNavbar_ATBP" id="troubleshooting">Troubleshooting<a class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting" href="corepack.html#troubleshooting">​</a>
</h2> <h3 class="anchor anchorWithStickyNavbar_ATBP" id="offline-workflow">Offline workflow<a class="hash-link" aria-label="Direct link to Offline workflow" title="Direct link to Offline workflow" href="corepack.html#offline-workflow">​</a>
</h3> <p>If you use an airgapped network, as is often the case in company CIs, you may hit problems where Corepack isn't able to download the Yarn binary for the active project. The Corepack documentation includes a <a href="https://github.com/nodejs/corepack?tab=readme-ov-file#offline-workflow" target="_blank" rel="noopener noreferrer">dedicated section</a> explaining how to avoid this problem.</p> <h3 class="anchor anchorWithStickyNavbar_ATBP" id="volta">Volta<a class="hash-link" aria-label="Direct link to Volta" title="Direct link to Volta" href="corepack.html#volta">​</a>
</h3> <p>Volta doesn't currently integrate with Corepack, as it installs its own shims which prevent the Corepack ones from being applied. You will need to run the following two commands to force the integration:</p> <div class="language-bash codeBlockContainer_EXcq theme-code-block"><div class="codeBlockContent_gO9Y">
<pre tabindex="0" class="prism-code language-bash codeBlock_itEV thin-scrollbar" data-language="bash">npm install -g corepack

# Specifying an explicit install-directory makes corepack overwrite volta's yarn shims, which is what we want
corepack enable --install-directory ~/.volta/bin</pre>

</div></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2016&ndash;present Yarn Contributors<br>Licensed under the BSD License.<br>
    <a href="https://yarnpkg.com/corepack" class="_attribution-link">https://yarnpkg.com/corepack</a>
  </p>
</div>
