<header><h1>Package patching</h1></header><h2 class="anchor anchorWithStickyNavbar_ATBP" id="overview">Overview<a class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview" href="patching.html#overview">​</a>
</h2> <p>It sometimes happen that you need to make small changes to a dependency, just to workaround some small issue. The recommended action is to make a PR upstream, but it may take time until your changes get through review and end up in a release; what to do in the meantime? You have two options:</p> <ul> <li> <p>You can use the <code>git:</code> protocol, which will let you install a project straight from its development repository, provided it was correctly setup.</p> </li> <li> <p>Or you can use the <code>patch:</code> protocol to make small changes to the dependencies straight from your project, while keeping them separated from the original code.</p> </li> </ul> <p>No more waiting around for pull requests to be merged and published, no more forking repos just to fix that one tiny thing preventing your app from working: the builtin patch mechanism will always let you unblock yourself.</p> <h2 class="anchor anchorWithStickyNavbar_ATBP" id="making-patches">Making patches<a class="hash-link" aria-label="Direct link to Making patches" title="Direct link to Making patches" href="patching.html#making-patches">​</a>
</h2> <p>To create a patch, run the <span class="inline_hdsZ"><code><span class="token_Ye2a" data-type="binary">yarn</span> <a class="path_tCL7" data-tooltip-id="tooltip" data-tooltip-content="Prepare a package for patching
" href="../cli/patch.html"><span class="token_Ye2a" data-type="path">patch</span></a></code></span> command and pass it a package name to make Yarn extract the requested package in a temporary folder. You're then free to edit the files within the patch at your convenience.</p> <p>Once you're done with your changes, run <span class="inline_hdsZ"><code><span class="token_Ye2a" data-type="binary">yarn</span> <a class="path_tCL7" data-tooltip-id="tooltip" data-tooltip-content="Generate a patch out of a directory
" href="../cli/patch-commit.html"><span class="token_Ye2a" data-type="path">patch-commit</span></a> <span class="token_Ye2a" data-type="dash">-</span><span class="token_Ye2a" data-type="option" data-tooltip-id="tooltip" data-tooltip-content="Add the patch to your resolution entries">s</span></code></span> with the temporary folder as parameter: the patch will be generated in <code>.yarn/patches</code>, and applied to your project. Add it to Git, and you're set to go.</p> <h2 class="anchor anchorWithStickyNavbar_ATBP" id="maintaining-patches">Maintaining patches<a class="hash-link" aria-label="Direct link to Maintaining patches" title="Direct link to Maintaining patches" href="patching.html#maintaining-patches">​</a>
</h2> <p>By default, <span class="inline_hdsZ"><code><span class="token_Ye2a" data-type="binary">yarn</span> <a class="path_tCL7" data-tooltip-id="tooltip" data-tooltip-content="Prepare a package for patching
" href="../cli/patch.html"><span class="token_Ye2a" data-type="path">patch</span></a></code></span> will always reset the patch. If you wish to add new changes, use the <span class="inline_hdsZ"><code><span class="token_Ye2a" data-type="dash">--</span><span class="token_Ye2a" data-type="option" data-tooltip-id="tooltip" data-tooltip-content="Reapply local patches that already apply to this packages">update</span></code></span> flag and follow the same procedure as before - your patch will be regenerated.</p> <h2 class="anchor anchorWithStickyNavbar_ATBP" id="limitations">Limitations<a class="hash-link" aria-label="Direct link to Limitations" title="Direct link to Limitations" href="patching.html#limitations">​</a>
</h2> <ul> <li> <p>Because they're currently computed at fetch time rather than resolution time, the package dependencies have already been resolved and patches won't be able to alter them. Instead, use the <code data-tooltip-id="tooltip" data-tooltip-content="Extend the package definitions of your dependencies; useful to fix third-party issues."><a class="key_FEvO" href="../configuration/yarnrc.html#packageExtensions">packageExtensions</a></code> mechanism which is specifically made to add new runtime dependencies to packages.</p> </li> <li> <p>Patches are ill-suited for modifying binary files. Minified files are problematic as well, although we could improve the feature to automatically process such files through a Prettier-like tool.</p> </li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2016&ndash;present Yarn Contributors<br>Licensed under the BSD License.<br>
    <a href="https://yarnpkg.com/features/patching" class="_attribution-link">https://yarnpkg.com/features/patching</a>
  </p>
</div>
