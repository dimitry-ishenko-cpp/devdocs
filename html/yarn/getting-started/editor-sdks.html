<header><h1>Editor SDKs</h1></header><p>Smart IDEs (such as VSCode or IntelliJ) require special configuration for TypeScript to work when using <a href="../features/pnp.html" target="_blank" rel="noopener noreferrer">Plug'n'Play installs</a>. This page is a collection of settings for each editor we've looked into.</p> <p>The editor SDKs and settings can be generated using <span class="inline_hdsZ"><code><span class="token_Ye2a" data-type="binary">yarn</span> <a class="path_tCL7" data-tooltip-id="tooltip" data-tooltip-content="Run a package in a temporary environment
" href="../cli/dlx.html"><span class="token_Ye2a" data-type="path">dlx</span></a> <span class="token_Ye2a" data-type="positional">@yarnpkg/sdks</span></code></span>. Its detailed documentation can be found on the <a href="../cli/sdks/default.html" target="_blank" rel="noopener noreferrer">dedicated page</a>.</p> <div class="theme-admonition theme-admonition-info admonition_JrWa alert alert--info">
<div class="admonitionHeading_MtRg">
info</div>
<div class="admonitionContent_G2Ck">
<p><strong>Why are SDKs needed with Yarn PnP?</strong></p>
<p>Yarn PnP works by generating a <a href="https://nodejs.org/api/esm.html#loaders" target="_blank" rel="noopener noreferrer">Node.js loader</a>, which has to be injected within the Node.js runtime. Many IDE extensions execute the packages they wrap (Prettier, TypeScript, ...) without consideration for loaders.</p>
<p>The SDKs workaround that by generating indirection packages. When required, these indirection automatically setup the loader before forwarding the <code>require</code> calls to the real packages.</p>
</div>
</div> <h2 class="anchor anchorWithStickyNavbar_ATBP" id="usage">Usage<a class="hash-link" aria-label="Direct link to Usage" title="Direct link to Usage" href="editor-sdks.html#usage">​</a>
</h2> <p>Generate both the base SDK and the editor settings:</p>  <p>Generate the base SDK, but no editor settings:</p>  <p>Update all installed SDKs &amp; editor settings:</p>  <h2 class="anchor anchorWithStickyNavbar_ATBP" id="tools-currently-supported">Tools currently supported<a class="hash-link" aria-label="Direct link to Tools currently supported" title="Direct link to Tools currently supported" href="editor-sdks.html#tools-currently-supported">​</a>
</h2> <div class="theme-admonition theme-admonition-warning admonition_JrWa alert alert--warning">
<div class="admonitionHeading_MtRg">
warning</div>
<div class="admonitionContent_G2Ck"><p>The <span class="inline_hdsZ"><code><span class="token_Ye2a" data-type="binary">yarn</span> <a class="path_tCL7" data-tooltip-id="tooltip" data-tooltip-content="Run a package in a temporary environment
" href="../cli/dlx.html"><span class="token_Ye2a" data-type="path">dlx</span></a> <span class="token_Ye2a" data-type="positional">@yarnpkg/sdks</span></code></span> command will look at the content of your <em>root</em> <code>package.json</code> to figure out the SDKs you need - it won't look at the dependencies from any other workspaces.</p></div>
</div> <table>
<thead><tr>
<th>Supported extension</th>
<th>Enabled if ... is found in your <code>package.json</code> dependencies</th>
</tr></thead>
<tbody>
<tr>
<td>Builtin VSCode TypeScript Server</td>
<td><a href="https://yarnpkg.com/package/typescript" target="_blank" rel="noopener noreferrer">typescript</a></td>
</tr>
<tr>
<td><a href="https://marketplace.visualstudio.com/items?itemName=astro-build.astro-vscode" target="_blank" rel="noopener noreferrer">astro-vscode</a></td>
<td><a href="https://astro.build/" target="_blank" rel="noopener noreferrer">astro</a></td>
</tr>
<tr>
<td><a href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint" target="_blank" rel="noopener noreferrer">vscode-eslint</a></td>
<td><a href="https://yarnpkg.com/package/eslint" target="_blank" rel="noopener noreferrer">eslint</a></td>
</tr>
<tr>
<td><a href="https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode" target="_blank" rel="noopener noreferrer">prettier-vscode</a></td>
<td><a href="https://yarnpkg.com/package/prettier" target="_blank" rel="noopener noreferrer">prettier</a></td>
</tr>
<tr>
<td><a href="https://marketplace.visualstudio.com/items?itemName=meta.relay" target="_blank" rel="noopener noreferrer">relay</a></td>
<td><a href="https://relay.dev/" target="_blank" rel="noopener noreferrer">relay</a></td>
</tr>
</tbody>
</table> <p>If you'd like to contribute more, <a href="https://github.com/yarnpkg/berry/blob/master/packages/yarnpkg-sdks/sources/generateSdk.ts" target="_blank" rel="noopener noreferrer">take a look here!</a></p> <h2 class="anchor anchorWithStickyNavbar_ATBP" id="editor-setup">Editor setup<a class="hash-link" aria-label="Direct link to Editor setup" title="Direct link to Editor setup" href="editor-sdks.html#editor-setup">​</a>
</h2> <h3 class="anchor anchorWithStickyNavbar_ATBP" id="coc-nvim">CoC nvim<a class="hash-link" aria-label="Direct link to CoC nvim" title="Direct link to CoC nvim" href="editor-sdks.html#coc-nvim">​</a>
</h3> <ol> <li> <p>Install <a href="https://github.com/lbrayner/vim-rzip" target="_blank" rel="noopener noreferrer">vim-rzip</a></p> </li> <li> <p>Run the following command, which will generate a <code>.vim/coc-settings.json</code> file:</p> </li> </ol> <div class="language-bash codeBlockContainer_EXcq theme-code-block"><div class="codeBlockContent_gO9Y">
<pre tabindex="0" class="prism-code language-bash codeBlock_itEV thin-scrollbar" data-language="bash">yarn dlx @yarnpkg/sdks vim</pre>

</div></div> <h3 class="anchor anchorWithStickyNavbar_ATBP" id="emacs">Emacs<a class="hash-link" aria-label="Direct link to Emacs" title="Direct link to Emacs" href="editor-sdks.html#emacs">​</a>
</h3> <p>The SDK comes with a typescript-language-server wrapper which enables you to use the ts-ls LSP client.</p> <ol> <li>Run the following command, which will generate a new directory called <code>.yarn/sdks</code>:</li> </ol> <div class="language-bash codeBlockContainer_EXcq theme-code-block"><div class="codeBlockContent_gO9Y">
<pre tabindex="0" class="prism-code language-bash codeBlock_itEV thin-scrollbar" data-language="bash">yarn dlx @yarnpkg/sdks base</pre>

</div></div> <ol start="2"> <li>Create a <code>.dir-locals.el</code> with the following content to enable Flycheck and LSP support, and make sure LSP is loaded after local variables are applied to trigger the <code>eval-after-load</code>:</li> </ol> <div class="language-lisp codeBlockContainer_EXcq theme-code-block"><div class="codeBlockContent_gO9Y">
<pre tabindex="0" class="prism-code language-lisp codeBlock_itEV thin-scrollbar" data-language="lisp">((typescript-mode
  . ((eval . (let ((project-directory (car (dir-locals-find-file default-directory))))
                (setq lsp-clients-typescript-server-args `("--tsserver-path" ,(concat project-directory ".yarn/sdks/typescript/bin/tsserver") "--stdio")))))))</pre>

</div></div> <h3 class="anchor anchorWithStickyNavbar_ATBP" id="neovim-native-lsp">Neovim Native LSP<a class="hash-link" aria-label="Direct link to Neovim Native LSP" title="Direct link to Neovim Native LSP" href="editor-sdks.html#neovim-native-lsp">​</a>
</h3> <ol> <li> <p>Install <a href="https://github.com/lbrayner/vim-rzip" target="_blank" rel="noopener noreferrer">vim-rzip</a></p> </li> <li> <p>Run the following command, which will generate a new directory called <code>.yarn/sdks</code>:</p> </li> </ol> <div class="language-bash codeBlockContainer_EXcq theme-code-block"><div class="codeBlockContent_gO9Y">
<pre tabindex="0" class="prism-code language-bash codeBlock_itEV thin-scrollbar" data-language="bash">yarn dlx @yarnpkg/sdks base</pre>

</div></div> <p>TypeScript support should then work out of the box with <a href="https://github.com/neovim/nvim-lspconfig" target="_blank" rel="noopener noreferrer">nvim-lspconfig</a> and <a href="https://github.com/theia-ide/typescript-language-server" target="_blank" rel="noopener noreferrer">theia-ide/typescript-language-server</a>.</p> <h3 class="anchor anchorWithStickyNavbar_ATBP" id="vscode">VSCode<a class="hash-link" aria-label="Direct link to VSCode" title="Direct link to VSCode" href="editor-sdks.html#vscode">​</a>
</h3> <ol> <li> <p>Install the <a href="https://marketplace.visualstudio.com/items?itemName=arcanis.vscode-zipfs" target="_blank" rel="noopener noreferrer">ZipFS</a> extension, which is maintained by the Yarn team.</p> </li> <li> <p>Run the following command, which will generate a <code>.vscode/settings.json</code> file:</p> </li> </ol> <div class="language-bash codeBlockContainer_EXcq theme-code-block"><div class="codeBlockContent_gO9Y">
<pre tabindex="0" class="prism-code language-bash codeBlock_itEV thin-scrollbar" data-language="bash">yarn dlx @yarnpkg/sdks vscode</pre>

</div></div> <ol start="3"> <li> <p>For safety reason VSCode requires you to explicitly activate the custom TS settings:</p> <ol> <li>Press <kbd>ctrl+shift+p</kbd> in a TypeScript file</li> <li>Choose "Select TypeScript Version"</li> <li>Pick "Use Workspace Version"</li> </ol> </li> </ol> <p>Your VSCode project is now configured to use the exact same version of TypeScript as the one you usually use, except that it will be able to properly resolve the type definitions.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2016&ndash;present Yarn Contributors<br>Licensed under the BSD License.<br>
    <a href="https://yarnpkg.com/getting-started/editor-sdks" class="_attribution-link">https://yarnpkg.com/getting-started/editor-sdks</a>
  </p>
</div>
