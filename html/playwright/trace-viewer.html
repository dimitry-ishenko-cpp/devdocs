<header><h1>Trace viewer</h1></header><h2 id="introduction">Introduction<a href="#introduction" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a>
</h2> <p>Playwright Trace Viewer is a GUI tool that helps you explore recorded Playwright traces after the script has run. Traces are a great way for debugging your tests when they fail on CI. You can open traces <a href="#opening-the-trace">locally</a> or in your browser on <a href="https://trace.playwright.dev" target="_blank" rel="noopener noreferrer">trace.playwright.dev</a>.</p>   <h2 id="trace-viewer-features">Trace Viewer features<a href="#trace-viewer-features" aria-label="Direct link to Trace Viewer features" title="Direct link to Trace Viewer features">​</a>
</h2> <h3 id="actions">Actions<a href="#actions" aria-label="Direct link to Actions" title="Direct link to Actions">​</a>
</h3> <p>In the Actions tab you can see what locator was used for every action and how long each one took to run. Hover over each action of your test and visually see the change in the DOM snapshot. Go back and forward in time and click an action to inspect and debug. Use the Before and After tabs to visually see what happened before and after the action.</p> <p><img decoding="async" loading="lazy" src="https://github.com/microsoft/playwright/assets/13063165/948b65cd-f0fd-4c7f-8e53-2c632b5a07f1" alt="actions tab in trace viewer"></p> <p><strong>Selecting each action reveals:</strong></p> <ul> <li>action snapshots</li> <li>action log</li> <li>source code location</li> </ul> <h3 id="screenshots">Screenshots<a href="#screenshots" aria-label="Direct link to Screenshots" title="Direct link to Screenshots">​</a>
</h3> <p>When tracing with the <code>screenshots</code> option turned on (default), each trace records a screencast and renders it as a film strip. You can hover over the film strip to see a magnified image of for each action and state which helps you easily find the action you want to inspect.</p> <p>Double click on an action to see the time range for that action. You can use the slider in the timeline to increase the actions selected and these will be shown in the Actions tab and all console logs and network logs will be filtered to only show the logs for the actions selected.</p> <p><img decoding="async" loading="lazy" src="https://github.com/microsoft/playwright/assets/13063165/b04a7d75-54bb-4ab2-9e30-e76f6f74a2c8" alt="timeline view in trace viewer"></p> <h3 id="snapshots">Snapshots<a href="#snapshots" aria-label="Direct link to Snapshots" title="Direct link to Snapshots">​</a>
</h3> <p>When tracing with the <code>snapshots</code> option turned on (default), Playwright captures a set of complete DOM snapshots for each action. Depending on the type of the action, it will capture:</p> <table>
<thead><tr>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td>Before</td>
<td>A snapshot at the time action is called.</td>
</tr>
<tr>
<td>Action</td>
<td>A snapshot at the moment of the performed input. This type of snapshot is especially useful when exploring where exactly Playwright clicked.</td>
</tr>
<tr>
<td>After</td>
<td>A snapshot after the action.</td>
</tr>
</tbody>
</table> <br> <p>Here is what the typical Action snapshot looks like:</p> <p><img decoding="async" loading="lazy" src="https://github.com/microsoft/playwright/assets/13063165/7168d549-eb0a-4964-9c93-483f03711fa9" alt="action tab in trace viewer"></p> <p>Notice how it highlights both, the DOM Node as well as the exact click position.</p> <h3 id="source">Source<a href="#source" aria-label="Direct link to Source" title="Direct link to Source">​</a>
</h3> <p>When you click on an action in the sidebar, the line of code for that action is highlighted in the source panel.</p> <p><img decoding="async" loading="lazy" src="https://github.com/microsoft/playwright/assets/13063165/daa8845d-c250-4923-aa7a-5d040da9adc5" alt="showing source code tab in trace viewer"></p> <h3 id="call">Call<a href="#call" aria-label="Direct link to Call" title="Direct link to Call">​</a>
</h3> <p>The call tab shows you information about the action such as the time it took, what locator was used, if in strict mode and what key was used.</p> <p><img decoding="async" loading="lazy" src="https://github.com/microsoft/playwright/assets/13063165/95498580-f9dd-4932-a123-c37fe7cfc3c2" alt="showing call tab in trace viewer"></p> <h3 id="log">Log<a href="#log" aria-label="Direct link to Log" title="Direct link to Log">​</a>
</h3> <p>See a full log of your test to better understand what Playwright is doing behind the scenes such as scrolling into view, waiting for element to be visible, enabled and stable and performing actions such as click, fill, press etc.</p> <p><img decoding="async" loading="lazy" src="https://github.com/microsoft/playwright/assets/13063165/de621461-3bab-4140-b39d-9f02d6672dbf" alt="showing log of tests in trace viewer"></p> <h3 id="errors">Errors<a href="#errors" aria-label="Direct link to Errors" title="Direct link to Errors">​</a>
</h3> <p>If your test fails you will see the error messages for each test in the Errors tab. The timeline will also show a red line highlighting where the error occurred. You can also click on the source tab to see on which line of the source code the error is.</p> <p><img decoding="async" loading="lazy" src="https://github.com/microsoft/playwright/assets/13063165/e9ef77b3-05d1-4df2-852c-981023723d34" alt="showing errors in trace viewer"></p> <h3 id="console">Console<a href="#console" aria-label="Direct link to Console" title="Direct link to Console">​</a>
</h3> <p>See console logs from the browser as well as from your test. Different icons are displayed to show you if the console log came from the browser or from the test file.</p> <p><img decoding="async" loading="lazy" src="https://github.com/microsoft/playwright/assets/13063165/4107c08d-1eaf-421c-bdd4-9dd2aa641d4a" alt="showing log of tests in trace viewer"></p> <p>Double click on an action from your test in the actions sidebar. This will filter the console to only show the logs that were made during that action. Click the <em>Show all</em> button to see all console logs again.</p> <p>Use the timeline to filter actions, by clicking a start point and dragging to an ending point. The console tab will also be filtered to only show the logs that were made during the actions selected.</p> <h3 id="network">Network<a href="#network" aria-label="Direct link to Network" title="Direct link to Network">​</a>
</h3> <p>The Network tab shows you all the network requests that were made during your test. You can sort by different types of requests, status code, method, request, content type, duration and size. Click on a request to see more information about it such as the request headers, response headers, request body and response body.</p> <p><img decoding="async" loading="lazy" src="https://github.com/microsoft/playwright/assets/13063165/0a3d1671-8ccd-4f7a-a844-35f5eb37f236" alt="network requests tab in trace viewer"></p> <p>Double click on an action from your test in the actions sidebar. This will filter the network requests to only show the requests that were made during that action. Click the <em>Show all</em> button to see all network requests again.</p> <p>Use the timeline to filter actions, by clicking a start point and dragging to an ending point. The network tab will also be filtered to only show the network requests that were made during the actions selected.</p> <h3 id="metadata">Metadata<a href="#metadata" aria-label="Direct link to Metadata" title="Direct link to Metadata">​</a>
</h3> <p>Next to the Actions tab you will find the Metadata tab which will show you more information on your test such as the Browser, viewport size, test duration and more.</p> <p><img decoding="async" loading="lazy" src="https://github.com/microsoft/playwright/assets/13063165/82ab3d33-1ec9-4b8a-9cf2-30a6e2d59091" alt="meta data in trace viewer"></p> <h3 id="attachments">Attachments<a href="#attachments" aria-label="Direct link to Attachments" title="Direct link to Attachments">​</a>
</h3> <p>The "Attachments" tab allows you to explore attachments. If you're doing <a href="test-snapshots.html">visual regression testing</a>, you'll be able to compare screenshots by examining the image diff, the actual image and the expected image. When you click on the expected image you can use the slider to slide one image over the other so you can easily see the differences in your screenshots.</p> <p><img decoding="async" loading="lazy" src="https://github.com/microsoft/playwright/assets/13063165/4386178a-5808-4fa8-9436-315350a23b04" alt="attachments tab in trace viewer"></p> <h2 id="recording-a-trace-locally">Recording a trace locally<a href="#recording-a-trace-locally" aria-label="Direct link to Recording a trace locally" title="Direct link to Recording a trace locally">​</a>
</h2> <p>To record a trace during development mode set the <code>--trace</code> flag to <code>on</code> when running your tests. You can also use <a href="test-ui-mode.html">UI Mode</a> for a better developer experience.</p> <pre tabindex="0" data-language="javascript">npx playwright test --trace on</pre> <p>You can then open the HTML report and click on the trace icon to open the trace.</p> <pre tabindex="0" data-language="javascript">npx playwright show-report</pre> <h2 id="recording-a-trace-on-ci">Recording a trace on CI<a href="#recording-a-trace-on-ci" aria-label="Direct link to Recording a trace on CI" title="Direct link to Recording a trace on CI">​</a>
</h2> <p>Traces should be run on continuous integration on the first retry of a failed test by setting the <code>trace: 'on-first-retry'</code> option in the test configuration file. This will produce a <code>trace.zip</code> file for each test that was retried.</p> <div>
<ul role="tablist" aria-orientation="horizontal">
<li role="tab" tabindex="0" aria-selected="true">Test</li>
<li role="tab" tabindex="-1" aria-selected="false">Library</li>
</ul>
<div>
<div role="tabpanel"><pre tabindex="0" data-language="javascript">import { defineConfig } from '@playwright/test';
export default defineConfig({
  retries: 1,
  use: {
    trace: 'on-first-retry',
  },
});</pre></div>
<div role="tabpanel" hidden=""><pre tabindex="0" data-language="javascript">const browser = await chromium.launch();
const context = await browser.newContext();

// Start tracing before creating / navigating a page.
await context.tracing.start({ screenshots: true, snapshots: true });

const page = await context.newPage();
await page.goto('https://playwright.dev');

// Stop tracing and export it into a zip archive.
await context.tracing.stop({ path: 'trace.zip' });</pre></div>
</div>
</div> <p>Available options to record a trace:</p> <ul> <li>
<code>'on-first-retry'</code> - Record a trace only when retrying a test for the first time.</li> <li>
<code>'on-all-retries'</code> - Record traces for all test retries.</li> <li>
<code>'off'</code> - Do not record a trace.</li> <li>
<code>'on'</code> - Record a trace for each test. (not recommended as it's performance heavy)</li> <li>
<code>'retain-on-failure'</code> - Record a trace for each test, but remove it from successful test runs.</li> </ul> <p>You can also use <code>trace: 'retain-on-failure'</code> if you do not enable retries but still want traces for failed tests.</p> <p>There are more granular options available, see <a href="api/class-testoptions.html#test-options-trace">testOptions.trace</a>.</p> <p>If you are not using Playwright as a Test Runner, use the <a href="api/class-browsercontext.html#browser-context-tracing">browserContext.tracing</a> API instead.</p> <h2 id="opening-the-trace">Opening the trace<a href="#opening-the-trace" aria-label="Direct link to Opening the trace" title="Direct link to Opening the trace">​</a>
</h2> <p>You can open the saved trace using the Playwright CLI or in your browser on <a href="https://trace.playwright.dev" target="_blank" rel="noopener noreferrer"><code>trace.playwright.dev</code></a>. Make sure to add the full path to where your <code>trace.zip</code> file is located.</p> <pre tabindex="0" data-language="javascript">npx playwright show-trace path/to/trace.zip</pre> <h2 id="using-traceplaywrightdev">Using <a href="https://trace.playwright.dev" target="_blank" rel="noopener noreferrer">trace.playwright.dev</a><a href="#using-traceplaywrightdev" aria-label="Direct link to using-traceplaywrightdev" title="Direct link to using-traceplaywrightdev">​</a>
</h2> <p><a href="https://trace.playwright.dev" target="_blank" rel="noopener noreferrer">trace.playwright.dev</a> is a statically hosted variant of the Trace Viewer. You can upload trace files using drag and drop.</p> <img width="1119" alt="Drop Playwright Trace to load" src="https://user-images.githubusercontent.com/13063165/194577918-b4d45726-2692-4093-8a28-9e73552617ef.png"> <h2 id="viewing-remote-traces">Viewing remote traces<a href="#viewing-remote-traces" aria-label="Direct link to Viewing remote traces" title="Direct link to Viewing remote traces">​</a>
</h2> <p>You can open remote traces using its URL. They could be generated on a CI run which makes it easy to view the remote trace without having to manually download the file.</p> <pre tabindex="0" data-language="javascript">npx playwright show-trace https://example.com/trace.zip</pre> <p>You can also pass the URL of your uploaded trace (e.g. inside your CI) from some accessible storage as a parameter. CORS (Cross-Origin Resource Sharing) rules might apply.</p> <pre tabindex="0" data-language="javascript">https://trace.playwright.dev/?trace=https://demo.playwright.dev/reports/todomvc/data/cb0fa77ebd9487a5c899f3ae65a7ffdbac681182.zip</pre><div class="_attribution">
  <p class="_attribution-p">
          &copy; 2024 Microsoft<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://playwright.dev/docs/trace-viewer" class="_attribution-link">https://playwright.dev/docs/trace-viewer</a>
  </p>
</div>
