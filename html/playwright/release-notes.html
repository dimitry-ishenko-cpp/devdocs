<header><h1>Release notes</h1></header><h2 id="version-149">Version 1.49<a href="#version-149" aria-label="Direct link to Version 1.49" title="Direct link to Version 1.49">​</a>
</h2> <h3 id="aria-snapshots">Aria snapshots<a href="#aria-snapshots" aria-label="Direct link to Aria snapshots" title="Direct link to Aria snapshots">​</a>
</h3> <p>New assertion <a href="api/class-locatorassertions.html#locator-assertions-to-match-aria-snapshot">expect(locator).toMatchAriaSnapshot()</a> verifies page structure by comparing to an expected accessibility tree, represented as YAML.</p> <pre tabindex="0" data-language="javascript">await page.goto('https://playwright.dev');
await expect(page.locator('body')).toMatchAriaSnapshot(`
  - banner:
    - heading /Playwright enables reliable/ [level=1]
    - link "Get started"
    - link "Star microsoft/playwright on GitHub"
  - main:
    - img "Browsers (Chromium, Firefox, WebKit)"
    - heading "Any browser • Any platform • One API"
`);</pre> <p>You can generate this assertion with <a href="codegen.html">Test Generator</a> and update the expected snapshot with <code>--update-snapshots</code> command line flag.</p> <p>Learn more in the <a href="aria-snapshots.html">aria snapshots guide</a>.</p> <h3 id="test-runner">Test runner<a href="#test-runner" aria-label="Direct link to Test runner" title="Direct link to Test runner">​</a>
</h3> <ul> <li>New option <a href="api/class-testconfig.html#test-config-tsconfig">testConfig.tsconfig</a> allows to specify a single <code>tsconfig</code> to be used for all tests.</li> <li>New method <a href="api/class-test.html#test-fail-only">test.fail.only()</a> to focus on a failing test.</li> <li>Options <a href="api/class-testconfig.html#test-config-global-setup">testConfig.globalSetup</a> and <a href="api/class-testconfig.html#test-config-global-teardown">testConfig.globalTeardown</a> now support multiple setups/teardowns.</li> <li>New value <code>'on-first-failure'</code> for <a href="api/class-testoptions.html#test-options-screenshot">testOptions.screenshot</a>.</li> <li>Added "previous" and "next" buttons to the HTML report to quickly switch between test cases.</li> <li>New properties <a href="api/class-testinfoerror.html#test-info-error-cause">testInfoError.cause</a> and <a href="api/class-testerror.html#test-error-cause">testError.cause</a> mirroring <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error/cause" target="_blank" rel="noopener noreferrer"><code>Error.cause</code></a>.</li> </ul> <h3 id="breaking-channels-chrome-msedge-and-similar-switch-to-new-headless">Breaking: channels <code>chrome</code>, <code>msedge</code> and similar switch to new headless<a href="#breaking-channels-chrome-msedge-and-similar-switch-to-new-headless" aria-label="Direct link to breaking-channels-chrome-msedge-and-similar-switch-to-new-headless" title="Direct link to breaking-channels-chrome-msedge-and-similar-switch-to-new-headless">​</a>
</h3> <p>This change affects you if you're using one of the following channels in your <code>playwright.config.ts</code>:</p> <ul> <li>
<code>chrome</code>, <code>chrome-dev</code>, <code>chrome-beta</code>, or <code>chrome-canary</code>
</li> <li>
<code>msedge</code>, <code>msedge-dev</code>, <code>msedge-beta</code>, or <code>msedge-canary</code>
</li> </ul> <h4 id="what-do-i-need-to-do">What do I need to do?<a href="#what-do-i-need-to-do" aria-label="Direct link to What do I need to do?" title="Direct link to What do I need to do?">​</a>
</h4> <p>After updating to Playwright v1.49, run your test suite. If it still passes, you're good to go. If not, you will probably need to update your snapshots, and adapt some of your test code around PDF viewers and extensions. See <a href="https://github.com/microsoft/playwright/issues/33566" target="_blank" rel="noopener noreferrer">issue #33566</a> for more details.</p> <h3 id="other-breaking-changes">Other breaking changes<a href="#other-breaking-changes" aria-label="Direct link to Other breaking changes" title="Direct link to Other breaking changes">​</a>
</h3> <ul> <li>There will be no more updates for WebKit on Ubuntu 20.04 and Debian 11. We recommend updating your OS to a later version.</li> <li>Package <code>@playwright/experimental-ct-vue2</code> will no longer be updated.</li> <li>Package <code>@playwright/experimental-ct-solid</code> will no longer be updated.</li> </ul> <h3 id="try-new-chromium-headless">Try new Chromium headless<a href="#try-new-chromium-headless" aria-label="Direct link to Try new Chromium headless" title="Direct link to Try new Chromium headless">​</a>
</h3> <p>You can opt into the new headless mode by using <code>'chromium'</code> channel. As <a href="https://developer.chrome.com/blog/chrome-headless-shell" target="_blank" rel="noopener noreferrer">official Chrome documentation puts it</a>:</p> <blockquote> <p>New Headless on the other hand is the real Chrome browser, and is thus more authentic, reliable, and offers more features. This makes it more suitable for high-accuracy end-to-end web app testing or browser extension testing.</p> </blockquote> <p>See <a href="https://github.com/microsoft/playwright/issues/33566" target="_blank" rel="noopener noreferrer">issue #33566</a> for the list of possible breakages you could encounter and more details on Chromium headless. Please file an issue if you see any problems after opting in.</p> <pre tabindex="0" data-language="javascript">import { defineConfig, devices } from '@playwright/test';

export default defineConfig({
  projects: [
    {
      name: 'chromium',
      use: { ...devices['Desktop Chrome'], channel: 'chromium' },
    },
  ],
});</pre> <h3 id="miscellaneous">Miscellaneous<a href="#miscellaneous" aria-label="Direct link to Miscellaneous" title="Direct link to Miscellaneous">​</a>
</h3> <ul> <li>
<code>&lt;canvas&gt;</code> elements inside a snapshot now draw a preview.</li> <li>New method <a href="api/class-tracing.html#tracing-group">tracing.group()</a> to visually group actions in the trace.</li> <li>Playwright docker images switched from Node.js v20 to Node.js v22 LTS.</li> </ul> <h3 id="browser-versions">Browser Versions<a href="#browser-versions" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 131.0.6778.33</li> <li>Mozilla Firefox 132.0</li> <li>WebKit 18.2</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 130</li> <li>Microsoft Edge 130</li> </ul> <h2 id="version-148">Version 1.48<a href="#version-148" aria-label="Direct link to Version 1.48" title="Direct link to Version 1.48">​</a>
</h2>  <h3 id="websocket-routing">WebSocket routing<a href="#websocket-routing" aria-label="Direct link to WebSocket routing" title="Direct link to WebSocket routing">​</a>
</h3> <p>New methods <a href="api/class-page.html#page-route-web-socket">page.routeWebSocket()</a> and <a href="api/class-browsercontext.html#browser-context-route-web-socket">browserContext.routeWebSocket()</a> allow to intercept, modify and mock WebSocket connections initiated in the page. Below is a simple example that mocks WebSocket communication by responding to a <code>"request"</code> with a <code>"response"</code>.</p> <pre tabindex="0" data-language="javascript">await page.routeWebSocket('/ws', ws =&gt; {
  ws.onMessage(message =&gt; {
    if (message === 'request')
      ws.send('response');
  });
});</pre> <p>See <a title="WebSocketRoute" href="api/class-websocketroute.html">WebSocketRoute</a> for more details.</p> <h3 id="ui-updates">UI updates<a href="#ui-updates" aria-label="Direct link to UI updates" title="Direct link to UI updates">​</a>
</h3> <ul> <li>New "copy" buttons for annotations and test location in the HTML report.</li> <li>Route method calls like <a href="api/class-route.html#route-fulfill">route.fulfill()</a> are not shown in the report and trace viewer anymore. You can see which network requests were routed in the network tab instead.</li> <li>New "Copy as cURL" and "Copy as fetch" buttons for requests in the network tab.</li> </ul> <h3 id="miscellaneous-1">Miscellaneous<a href="#miscellaneous-1" aria-label="Direct link to Miscellaneous" title="Direct link to Miscellaneous">​</a>
</h3> <ul> <li>Option <a href="api/class-apirequestcontext.html#api-request-context-fetch-option-form">form</a> and similar ones now accept <a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData" target="_blank" rel="noopener noreferrer">FormData</a>.</li> <li>New method <a href="api/class-page.html#page-request-gc">page.requestGC()</a> may help detect memory leaks.</li> <li>New option <a href="api/class-test.html#test-step-option-location">location</a> to pass custom step location.</li> <li>Requests made by <a title="APIRequestContext" href="api/class-apirequestcontext.html">APIRequestContext</a> now record detailed timing and security information in the HAR.</li> </ul> <h3 id="browser-versions-1">Browser Versions<a href="#browser-versions-1" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 130.0.6723.19</li> <li>Mozilla Firefox 130.0</li> <li>WebKit 18.0</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 129</li> <li>Microsoft Edge 129</li> </ul> <h2 id="version-147">Version 1.47<a href="#version-147" aria-label="Direct link to Version 1.47" title="Direct link to Version 1.47">​</a>
</h2> <h3 id="network-tab-improvements">Network Tab improvements<a href="#network-tab-improvements" aria-label="Direct link to Network Tab improvements" title="Direct link to Network Tab improvements">​</a>
</h3> <p>The Network tab in the UI mode and trace viewer has several nice improvements:</p> <ul> <li>filtering by asset type and URL</li> <li>better display of query string parameters</li> <li>preview of font assets</li> </ul> <p><img decoding="async" loading="lazy" src="https://github.com/user-attachments/assets/4bd1b67d-90bd-438b-a227-00b9e86872e2" alt="Network tab now has filters"></p> <h3 id="--tsconfig-cli-option">
<code>--tsconfig</code> CLI option<a href="#--tsconfig-cli-option" aria-label="Direct link to --tsconfig-cli-option" title="Direct link to --tsconfig-cli-option">​</a>
</h3> <p>By default, Playwright will look up the closest tsconfig for each imported file using a heuristic. You can now specify a single tsconfig file in the command line, and Playwright will use it for all imported files, not only test files:</p> <pre tabindex="0" data-language="javascript"># Pass a specific tsconfig
npx playwright test --tsconfig tsconfig.test.json</pre> <h3 id="apirequestcontext-now-accepts-urlsearchparams-and-string-as-query-parameters">
<a title="APIRequestContext" href="api/class-apirequestcontext.html">APIRequestContext</a> now accepts <a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams" target="_blank" rel="noopener noreferrer"><code>URLSearchParams</code></a> and <code>string</code> as query parameters<a href="#apirequestcontext-now-accepts-urlsearchparams-and-string-as-query-parameters" aria-label="Direct link to apirequestcontext-now-accepts-urlsearchparams-and-string-as-query-parameters" title="Direct link to apirequestcontext-now-accepts-urlsearchparams-and-string-as-query-parameters">​</a>
</h3> <p>You can now pass <a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams" target="_blank" rel="noopener noreferrer"><code>URLSearchParams</code></a> and <code>string</code> as query parameters to <a title="APIRequestContext" href="api/class-apirequestcontext.html">APIRequestContext</a>:</p> <pre tabindex="0" data-language="javascript">test('query params', async ({ request }) =&gt; {
  const searchParams = new URLSearchParams();
  searchParams.set('userId', 1);
  const response = await request.get(
      'https://jsonplaceholder.typicode.com/posts',
      {
        params: searchParams // or as a string: 'userId=1'
      }
  );
  // ...
});</pre> <h3 id="miscellaneous-2">Miscellaneous<a href="#miscellaneous-2" aria-label="Direct link to Miscellaneous" title="Direct link to Miscellaneous">​</a>
</h3> <ul> <li>The <code>mcr.microsoft.com/playwright:v1.47.0</code> now serves a Playwright image based on Ubuntu 24.04 Noble. To use the 22.04 jammy-based image, please use <code>mcr.microsoft.com/playwright:v1.47.0-jammy</code> instead.</li> <li>New options <a href="api/class-page.html#page-remove-all-listeners-option-behavior">behavior</a>, <a href="api/class-browser.html#browser-remove-all-listeners-option-behavior">behavior</a> and <a href="api/class-browsercontext.html#browser-context-remove-all-listeners-option-behavior">behavior</a> to wait for ongoing listeners to complete.</li> <li>TLS client certificates can now be passed from memory by passing <a href="api/class-browser.html#browser-new-context-option-client-certificates">clientCertificates.cert</a> and <a href="api/class-browser.html#browser-new-context-option-client-certificates">clientCertificates.key</a> as buffers instead of file paths.</li> <li>Attachments with a <code>text/html</code> content type can now be opened in a new tab in the HTML report. This is useful for including third-party reports or other HTML content in the Playwright test report and distributing it to your team.</li> <li>
<a href="api/class-locator.html#locator-select-option-option-no-wait-after">noWaitAfter</a> option in <a href="api/class-locator.html#locator-select-option">locator.selectOption()</a> was deprecated.</li> <li>We've seen reports of WebGL in Webkit misbehaving on GitHub Actions <code>macos-13</code>. We recommend upgrading GitHub Actions to <code>macos-14</code>.</li> </ul> <h3 id="browser-versions-2">Browser Versions<a href="#browser-versions-2" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 129.0.6668.29</li> <li>Mozilla Firefox 130.0</li> <li>WebKit 18.0</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 128</li> <li>Microsoft Edge 128</li> </ul> <h2 id="version-146">Version 1.46<a href="#version-146" aria-label="Direct link to Version 1.46" title="Direct link to Version 1.46">​</a>
</h2>  <h3 id="tls-client-certificates">TLS Client Certificates<a href="#tls-client-certificates" aria-label="Direct link to TLS Client Certificates" title="Direct link to TLS Client Certificates">​</a>
</h3> <p>Playwright now allows you to supply client-side certificates, so that server can verify them, as specified by TLS Client Authentication.</p> <p>The following snippet sets up a client certificate for <code>https://example.com</code>:</p> <pre tabindex="0" data-language="javascript">import { defineConfig } from '@playwright/test';

export default defineConfig({
  // ...
  use: {
    clientCertificates: [{
      origin: 'https://example.com',
      certPath: './cert.pem',
      keyPath: './key.pem',
      passphrase: 'mysecretpassword',
    }],
  },
  // ...
});</pre> <p>You can also provide client certificates to a particular <a href="api/class-testproject.html#test-project-use">test project</a> or as a parameter of <a href="api/class-browser.html#browser-new-context">browser.newContext()</a> and <a href="api/class-apirequest.html#api-request-new-context">apiRequest.newContext()</a>.</p> <h3 id="--only-changed-cli-option">
<code>--only-changed</code> cli option<a href="#--only-changed-cli-option" aria-label="Direct link to --only-changed-cli-option" title="Direct link to --only-changed-cli-option">​</a>
</h3> <p>New CLI option <code>--only-changed</code> will only run test files that have been changed since the last git commit or from a specific git "ref". This will also run all test files that import any changed files.</p> <pre tabindex="0" data-language="javascript"># Only run test files with uncommitted changes
npx playwright test --only-changed

# Only run test files changed relative to the "main" branch
npx playwright test --only-changed=main</pre> <h3 id="component-testing-new-router-fixture">Component Testing: New <code>router</code> fixture<a href="#component-testing-new-router-fixture" aria-label="Direct link to component-testing-new-router-fixture" title="Direct link to component-testing-new-router-fixture">​</a>
</h3> <p>This release introduces an experimental <code>router</code> fixture to intercept and handle network requests in component testing. There are two ways to use the router fixture:</p> <ul> <li>Call <code>router.route(url, handler)</code> that behaves similarly to <a href="api/class-page.html#page-route">page.route()</a>.</li> <li>Call <code>router.use(handlers)</code> and pass <a href="https://mswjs.io" target="_blank" rel="noopener noreferrer">MSW library</a> request handlers to it.</li> </ul> <p>Here is an example of reusing your existing MSW handlers in the test.</p> <pre tabindex="0" data-language="javascript">import { handlers } from '@src/mocks/handlers';

test.beforeEach(async ({ router }) =&gt; {
  // install common handlers before each test
  await router.use(...handlers);
});

test('example test', async ({ mount }) =&gt; {
  // test as usual, your handlers are active
  // ...
});</pre> <p>This fixture is only available in <a href="test-components.html#handling-network-requests">component tests</a>.</p> <h3 id="ui-mode--trace-viewer-updates">UI Mode / Trace Viewer Updates<a href="#ui-mode--trace-viewer-updates" aria-label="Direct link to UI Mode / Trace Viewer Updates" title="Direct link to UI Mode / Trace Viewer Updates">​</a>
</h3> <ul> <li>Test annotations are now shown in UI mode.</li> <li>Content of text attachments is now rendered inline in the attachments pane.</li> <li>New setting to show/hide routing actions like <a href="api/class-route.html#route-continue">route.continue()</a>.</li> <li>Request method and status are shown in the network details tab.</li> <li>New button to copy source file location to clipboard.</li> <li>Metadata pane now displays the <code>baseURL</code>.</li> </ul> <h3 id="miscellaneous-3">Miscellaneous<a href="#miscellaneous-3" aria-label="Direct link to Miscellaneous" title="Direct link to Miscellaneous">​</a>
</h3> <ul> <li>New <code>maxRetries</code> option in <a href="api/class-apirequestcontext.html#api-request-context-fetch">apiRequestContext.fetch()</a> which retries on the <code>ECONNRESET</code> network error.</li> <li>New option to <a href="test-fixtures.html#box-fixtures">box a fixture</a> to minimize the fixture exposure in test reports and error messages.</li> <li>New option to provide a <a href="test-fixtures.html#custom-fixture-title">custom fixture title</a> to be used in test reports and error messages.</li> </ul> <h3 id="browser-versions-3">Browser Versions<a href="#browser-versions-3" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 128.0.6613.18</li> <li>Mozilla Firefox 128.0</li> <li>WebKit 18.0</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 127</li> <li>Microsoft Edge 127</li> </ul> <h2 id="version-145">Version 1.45<a href="#version-145" aria-label="Direct link to Version 1.45" title="Direct link to Version 1.45">​</a>
</h2>  <h3 id="clock">Clock<a href="#clock" aria-label="Direct link to Clock" title="Direct link to Clock">​</a>
</h3> <p>Utilizing the new <a title="Clock" href="api/class-clock.html">Clock</a> API allows to manipulate and control time within tests to verify time-related behavior. This API covers many common scenarios, including:</p> <ul> <li>testing with predefined time;</li> <li>keeping consistent time and timers;</li> <li>monitoring inactivity;</li> <li>ticking through time manually.</li> </ul> <pre tabindex="0" data-language="javascript">// Initialize clock and let the page load naturally.
await page.clock.install({ time: new Date('2024-02-02T08:00:00') });
await page.goto('http://localhost:3333');

// Pretend that the user closed the laptop lid and opened it again at 10am,
// Pause the time once reached that point.
await page.clock.pauseAt(new Date('2024-02-02T10:00:00'));

// Assert the page state.
await expect(page.getByTestId('current-time')).toHaveText('2/2/2024, 10:00:00 AM');

// Close the laptop lid again and open it at 10:30am.
await page.clock.fastForward('30:00');
await expect(page.getByTestId('current-time')).toHaveText('2/2/2024, 10:30:00 AM');</pre> <p>See <a href="clock.html">the clock guide</a> for more details.</p> <h3 id="test-runner-1">Test runner<a href="#test-runner-1" aria-label="Direct link to Test runner" title="Direct link to Test runner">​</a>
</h3> <ul> <li> <p>New CLI option <code>--fail-on-flaky-tests</code> that sets exit code to <code>1</code> upon any flaky tests. Note that by default, the test runner exits with code <code>0</code> when all failed tests recovered upon a retry. With this option, the test run will fail in such case.</p> </li> <li> <p>New environment variable <code>PLAYWRIGHT_FORCE_TTY</code> controls whether built-in <code>list</code>, <code>line</code> and <code>dot</code> reporters assume a live terminal. For example, this could be useful to disable tty behavior when your CI environment does not handle ANSI control sequences well. Alternatively, you can enable tty behavior even when to live terminal is present, if you plan to post-process the output and handle control sequences.</p> <pre tabindex="0" data-language="javascript"># Avoid TTY features that output ANSI control sequences
PLAYWRIGHT_FORCE_TTY=0 npx playwright test

# Enable TTY features, assuming a terminal width 80
PLAYWRIGHT_FORCE_TTY=80 npx playwright test</pre> </li> <li> <p>New options <a href="api/class-testconfig.html#test-config-respect-git-ignore">testConfig.respectGitIgnore</a> and <a href="api/class-testproject.html#test-project-respect-git-ignore">testProject.respectGitIgnore</a> control whether files matching <code>.gitignore</code> patterns are excluded when searching for tests.</p> </li> <li> <p>New property <code>timeout</code> is now available for custom expect matchers. This property takes into account <code>playwright.config.ts</code> and <code>expect.configure()</code>.</p> <pre tabindex="0" data-language="javascript">import { expect as baseExpect } from '@playwright/test';

export const expect = baseExpect.extend({
  async toHaveAmount(locator: Locator, expected: number, options?: { timeout?: number }) {
    // When no timeout option is specified, use the config timeout.
    const timeout = options?.timeout ?? this.timeout;
    // ... implement the assertion ...
  },
});</pre> </li> </ul> <h3 id="miscellaneous-4">Miscellaneous<a href="#miscellaneous-4" aria-label="Direct link to Miscellaneous" title="Direct link to Miscellaneous">​</a>
</h3> <ul> <li> <p>Method <a href="api/class-locator.html#locator-set-input-files">locator.setInputFiles()</a> now supports uploading a directory for <code>&lt;input type=file webkitdirectory&gt;</code> elements.</p> <pre tabindex="0" data-language="javascript">await page.getByLabel('Upload directory').setInputFiles(path.join(__dirname, 'mydir'));</pre> </li> <li> <p>Multiple methods like <a href="api/class-locator.html#locator-click">locator.click()</a> or <a href="api/class-locator.html#locator-press">locator.press()</a> now support a <code>ControlOrMeta</code> modifier key. This key maps to <code>Meta</code> on macOS and maps to <code>Control</code> on Windows and Linux.</p> <pre tabindex="0" data-language="javascript">// Press the common keyboard shortcut Control+S or Meta+S to trigger a "Save" operation.
await page.keyboard.press('ControlOrMeta+S');</pre> </li> <li> <p>New property <code>httpCredentials.send</code> in <a href="api/class-apirequest.html#api-request-new-context">apiRequest.newContext()</a> that allows to either always send the <code>Authorization</code> header or only send it in response to <code>401 Unauthorized</code>.</p> </li> <li> <p>New option <code>reason</code> in <a href="api/class-apirequestcontext.html#api-request-context-dispose">apiRequestContext.dispose()</a> that will be included in the error message of ongoing operations interrupted by the context disposal.</p> </li> <li> <p>New option <code>host</code> in <a href="api/class-browsertype.html#browser-type-launch-server">browserType.launchServer()</a> allows to accept websocket connections on a specific address instead of unspecified <code>0.0.0.0</code>.</p> </li> <li> <p>Playwright now supports Chromium, Firefox and WebKit on Ubuntu 24.04.</p> </li> <li> <p>v1.45 is the last release to receive WebKit update for macOS 12 Monterey. Please update macOS to keep using the latest WebKit.</p> </li> </ul> <h3 id="browser-versions-4">Browser Versions<a href="#browser-versions-4" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 127.0.6533.5</li> <li>Mozilla Firefox 127.0</li> <li>WebKit 17.4</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 126</li> <li>Microsoft Edge 126</li> </ul> <h2 id="version-144">Version 1.44<a href="#version-144" aria-label="Direct link to Version 1.44" title="Direct link to Version 1.44">​</a>
</h2>  <h3 id="new-apis">New APIs<a href="#new-apis" aria-label="Direct link to New APIs" title="Direct link to New APIs">​</a>
</h3> <p><strong>Accessibility assertions</strong></p> <ul> <li> <p><a href="api/class-locatorassertions.html#locator-assertions-to-have-accessible-name">expect(locator).toHaveAccessibleName()</a> checks if the element has the specified accessible name:</p> <pre tabindex="0" data-language="javascript">const locator = page.getByRole('button');
await expect(locator).toHaveAccessibleName('Submit');</pre> </li> <li> <p><a href="api/class-locatorassertions.html#locator-assertions-to-have-accessible-description">expect(locator).toHaveAccessibleDescription()</a> checks if the element has the specified accessible description:</p> <pre tabindex="0" data-language="javascript">const locator = page.getByRole('button');
await expect(locator).toHaveAccessibleDescription('Upload a photo');</pre> </li> <li> <p><a href="api/class-locatorassertions.html#locator-assertions-to-have-role">expect(locator).toHaveRole()</a> checks if the element has the specified ARIA role:</p> <pre tabindex="0" data-language="javascript">const locator = page.getByTestId('save-button');
await expect(locator).toHaveRole('button');</pre> </li> </ul> <p><strong>Locator handler</strong></p> <ul> <li>After executing the handler added with <a href="api/class-page.html#page-add-locator-handler">page.addLocatorHandler()</a>, Playwright will now wait until the overlay that triggered the handler is not visible anymore. You can opt-out of this behavior with the new <code>noWaitAfter</code> option.</li> <li>You can use new <code>times</code> option in <a href="api/class-page.html#page-add-locator-handler">page.addLocatorHandler()</a> to specify maximum number of times the handler should be run.</li> <li>The handler in <a href="api/class-page.html#page-add-locator-handler">page.addLocatorHandler()</a> now accepts the locator as argument.</li> <li>New <a href="api/class-page.html#page-remove-locator-handler">page.removeLocatorHandler()</a> method for removing previously added locator handlers.</li> </ul> <pre tabindex="0" data-language="javascript">const locator = page.getByText('This interstitial covers the button');
await page.addLocatorHandler(locator, async overlay =&gt; {
  await overlay.locator('#close').click();
}, { times: 3, noWaitAfter: true });
// Run your tests that can be interrupted by the overlay.
// ...
await page.removeLocatorHandler(locator);</pre> <p><strong>Miscellaneous options</strong></p> <ul> <li> <p><a href="api/class-apirequestcontext.html#api-request-context-fetch-option-multipart"><code>multipart</code></a> option in <code>apiRequestContext.fetch()</code> now accepts <a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData" target="_blank" rel="noopener noreferrer"><code>FormData</code></a> and supports repeating fields with the same name.</p> <pre tabindex="0" data-language="javascript">const formData = new FormData();
formData.append('file', new File(['let x = 2024;'], 'f1.js', { type: 'text/javascript' }));
formData.append('file', new File(['hello'], 'f2.txt', { type: 'text/plain' }));
context.request.post('https://example.com/uploadFiles', {
  multipart: formData
});</pre> </li> <li> <p><code>expect(callback).toPass({ intervals })</code> can now be configured by <code>expect.toPass.intervals</code> option globally in <a href="api/class-testconfig.html#test-config-expect">testConfig.expect</a> or per project in <a href="api/class-testproject.html#test-project-expect">testProject.expect</a>.</p> </li> <li> <p><code>expect(page).toHaveURL(url)</code> now supports <code>ignoreCase</code> <a href="api/class-pageassertions.html#page-assertions-to-have-url-option-ignore-case">option</a>.</p> </li> <li> <p><a href="api/class-testproject.html#test-project-ignore-snapshots">testProject.ignoreSnapshots</a> allows to configure per project whether to skip screenshot expectations.</p> </li> </ul> <p><strong>Reporter API</strong></p> <ul> <li>New method <a href="api/class-suite.html#suite-entries">suite.entries()</a> returns child test suites and test cases in their declaration order. <a href="api/class-suite.html#suite-type">suite.type</a> and <a href="api/class-testcase.html#test-case-type">testCase.type</a> can be used to tell apart test cases and suites in the list.</li> <li>
<a href="test-reporters.html#blob-reporter">Blob</a> reporter now allows overriding report file path with a single option <code>outputFile</code>. The same option can also be specified as <code>PLAYWRIGHT_BLOB_OUTPUT_FILE</code> environment variable that might be more convenient on CI/CD.</li> <li>
<a href="test-reporters.html#junit-reporter">JUnit</a> reporter now supports <code>includeProjectInTestName</code> option.</li> </ul> <p><strong>Command line</strong></p> <ul> <li> <p><code>--last-failed</code> CLI option to for running only tests that failed in the previous run.</p> <p>First run all tests:</p> <pre tabindex="0" data-language="javascript">$ npx playwright test

Running 103 tests using 5 workers
...
2 failed
  [chromium] › my-test.spec.ts:8:5 › two ─────────────────────────────────────────────────────────
  [chromium] › my-test.spec.ts:13:5 › three ──────────────────────────────────────────────────────
101 passed (30.0s)</pre> <p>Now fix the failing tests and run Playwright again with <code>--last-failed</code> option:</p> <pre tabindex="0" data-language="javascript">$ npx playwright test --last-failed

Running 2 tests using 2 workers
  2 passed (1.2s)</pre> </li> </ul> <h3 id="browser-versions-5">Browser Versions<a href="#browser-versions-5" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 125.0.6422.14</li> <li>Mozilla Firefox 125.0.1</li> <li>WebKit 17.4</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 124</li> <li>Microsoft Edge 124</li> </ul> <h2 id="version-143">Version 1.43<a href="#version-143" aria-label="Direct link to Version 1.43" title="Direct link to Version 1.43">​</a>
</h2> <h3 id="new-apis-1">New APIs<a href="#new-apis-1" aria-label="Direct link to New APIs" title="Direct link to New APIs">​</a>
</h3> <ul> <li> <p>Method <a href="api/class-browsercontext.html#browser-context-clear-cookies">browserContext.clearCookies()</a> now supports filters to remove only some cookies.</p> <pre tabindex="0" data-language="javascript">// Clear all cookies.
await context.clearCookies();
// New: clear cookies with a particular name.
await context.clearCookies({ name: 'session-id' });
// New: clear cookies for a particular domain.
await context.clearCookies({ domain: 'my-origin.com' });</pre> </li> <li> <p>New mode <code>retain-on-first-failure</code> for <a href="api/class-testoptions.html#test-options-trace">testOptions.trace</a>. In this mode, trace is recorded for the first run of each test, but not for retires. When test run fails, the trace file is retained, otherwise it is removed.</p> <pre tabindex="0" data-language="javascript">import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    trace: 'retain-on-first-failure',
  },
});</pre> </li> <li> <p>New property <a href="api/class-testinfo.html#test-info-tags">testInfo.tags</a> exposes test tags during test execution.</p> <pre tabindex="0" data-language="javascript">test('example', async ({ page }) =&gt; {
  console.log(test.info().tags);
});</pre> </li> <li> <p>New method <a href="api/class-locator.html#locator-content-frame">locator.contentFrame()</a> converts a <a title="Locator" href="api/class-locator.html">Locator</a> object to a <a title="FrameLocator" href="api/class-framelocator.html">FrameLocator</a>. This can be useful when you have a <a title="Locator" href="api/class-locator.html">Locator</a> object obtained somewhere, and later on would like to interact with the content inside the frame.</p> <pre tabindex="0" data-language="javascript">const locator = page.locator('iframe[name="embedded"]');
// ...
const frameLocator = locator.contentFrame();
await frameLocator.getByRole('button').click();</pre> </li> <li> <p>New method <a href="api/class-framelocator.html#frame-locator-owner">frameLocator.owner()</a> converts a <a title="FrameLocator" href="api/class-framelocator.html">FrameLocator</a> object to a <a title="Locator" href="api/class-locator.html">Locator</a>. This can be useful when you have a <a title="FrameLocator" href="api/class-framelocator.html">FrameLocator</a> object obtained somewhere, and later on would like to interact with the <code>iframe</code> element.</p> <pre tabindex="0" data-language="javascript">const frameLocator = page.frameLocator('iframe[name="embedded"]');
// ...
const locator = frameLocator.owner();
await expect(locator).toBeVisible();</pre> </li> </ul> <h3 id="ui-mode-updates">UI Mode Updates<a href="#ui-mode-updates" aria-label="Direct link to UI Mode Updates" title="Direct link to UI Mode Updates">​</a>
</h3> <p><img decoding="async" loading="lazy" src="https://github.com/microsoft/playwright/assets/9881434/61ca7cfc-eb7a-4305-8b62-b6c9f098f300" alt="Playwright UI Mode"></p> <ul> <li>See tags in the test list.</li> <li>Filter by tags by typing <code>@fast</code> or clicking on the tag itself.</li> <li>New shortcuts: <ul> <li>"F5" to run tests.</li> <li>"Shift F5" to stop running tests.</li> <li>"Ctrl `" to toggle test output.</li> </ul> </li> </ul> <h3 id="browser-versions-6">Browser Versions<a href="#browser-versions-6" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 124.0.6367.8</li> <li>Mozilla Firefox 124.0</li> <li>WebKit 17.4</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 123</li> <li>Microsoft Edge 123</li> </ul> <h2 id="version-142">Version 1.42<a href="#version-142" aria-label="Direct link to Version 1.42" title="Direct link to Version 1.42">​</a>
</h2>  <h3 id="new-apis-2">New APIs<a href="#new-apis-2" aria-label="Direct link to New APIs" title="Direct link to New APIs">​</a>
</h3> <ul> <li>New method <a href="api/class-page.html#page-add-locator-handler">page.addLocatorHandler()</a> registers a callback that will be invoked when specified element becomes visible and may block Playwright actions. The callback can get rid of the overlay. Here is an example that closes a cookie dialog when it appears:</li> </ul> <pre tabindex="0" data-language="javascript">// Setup the handler.
await page.addLocatorHandler(
    page.getByRole('heading', { name: 'Hej! You are in control of your cookies.' }),
    async () =&gt; {
      await page.getByRole('button', { name: 'Accept all' }).click();
    });
// Write the test as usual.
await page.goto('https://www.ikea.com/');
await page.getByRole('link', { name: 'Collection of blue and white' }).click();
await expect(page.getByRole('heading', { name: 'Light and easy' })).toBeVisible();</pre> <ul> <li>
<code>expect(callback).toPass()</code> timeout can now be configured by <code>expect.toPass.timeout</code> option <a href="api/class-testconfig.html#test-config-expect">globally</a> or in <a href="api/class-testproject.html#test-project-expect">project config</a>
</li> <li>
<a href="api/class-electronapplication.html#electron-application-event-console">electronApplication.on('console')</a> event is emitted when Electron main process calls console API methods.</li> </ul> <pre tabindex="0" data-language="javascript">electronApp.on('console', async msg =&gt; {
  const values = [];
  for (const arg of msg.args())
    values.push(await arg.jsonValue());
  console.log(...values);
});
await electronApp.evaluate(() =&gt; console.log('hello', 5, { foo: 'bar' }));</pre> <ul> <li>
<a href="test-annotations.html#tag-tests">New syntax</a> for adding tags to the tests (@-tokens in the test title are still supported):</li> </ul> <pre tabindex="0" data-language="javascript">test('test customer login', {
  tag: ['@fast', '@login'],
}, async ({ page }) =&gt; {
  // ...
});</pre> <p>Use <code>--grep</code> command line option to run only tests with certain tags.</p> <pre tabindex="0" data-language="javascript">npx playwright test --grep @fast</pre> <ul> <li>
<code>--project</code> command line <a href="test-cli.html#reference">flag</a> now supports '*' wildcard:</li> </ul> <pre tabindex="0" data-language="javascript">npx playwright test --project='*mobile*'</pre> <ul> <li>
<a href="test-annotations.html#annotate-tests">New syntax</a> for test annotations:</li> </ul> <pre tabindex="0" data-language="javascript">test('test full report', {
  annotation: [
    { type: 'issue', description: 'https://github.com/microsoft/playwright/issues/23180' },
    { type: 'docs', description: 'https://playwright.dev/docs/test-annotations#tag-tests' },
  ],
}, async ({ page }) =&gt; {
  // ...
});</pre> <ul> <li>
<a href="api/class-page.html#page-pdf">page.pdf()</a> accepts two new options <a href="api/class-page.html#page-pdf-option-tagged"><code>tagged</code></a> and <a href="api/class-page.html#page-pdf-option-outline"><code>outline</code></a>.</li> </ul> <h3 id="announcements">Announcements<a href="#announcements" aria-label="Direct link to Announcements" title="Direct link to Announcements">​</a>
</h3> <ul> <li>⚠️ Ubuntu 18 is not supported anymore.</li> </ul> <h3 id="browser-versions-7">Browser Versions<a href="#browser-versions-7" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 123.0.6312.4</li> <li>Mozilla Firefox 123.0</li> <li>WebKit 17.4</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 122</li> <li>Microsoft Edge 123</li> </ul> <h2 id="version-141">Version 1.41<a href="#version-141" aria-label="Direct link to Version 1.41" title="Direct link to Version 1.41">​</a>
</h2> <h3 id="new-apis-3">New APIs<a href="#new-apis-3" aria-label="Direct link to New APIs" title="Direct link to New APIs">​</a>
</h3> <ul> <li>New method <a href="api/class-page.html#page-unroute-all">page.unrouteAll()</a> removes all routes registered by <a href="api/class-page.html#page-route">page.route()</a> and <a href="api/class-page.html#page-route-from-har">page.routeFromHAR()</a>. Optionally allows to wait for ongoing routes to finish, or ignore any errors from them.</li> <li>New method <a href="api/class-browsercontext.html#browser-context-unroute-all">browserContext.unrouteAll()</a> removes all routes registered by <a href="api/class-browsercontext.html#browser-context-route">browserContext.route()</a> and <a href="api/class-browsercontext.html#browser-context-route-from-har">browserContext.routeFromHAR()</a>. Optionally allows to wait for ongoing routes to finish, or ignore any errors from them.</li> <li>New options <a href="api/class-page.html#page-screenshot-option-style">style</a> in <a href="api/class-page.html#page-screenshot">page.screenshot()</a> and <a href="api/class-locator.html#locator-screenshot-option-style">style</a> in <a href="api/class-locator.html#locator-screenshot">locator.screenshot()</a> to add custom CSS to the page before taking a screenshot.</li> <li>New option <code>stylePath</code> for methods <a href="api/class-pageassertions.html#page-assertions-to-have-screenshot-1">expect(page).toHaveScreenshot()</a> and <a href="api/class-locatorassertions.html#locator-assertions-to-have-screenshot-1">expect(locator).toHaveScreenshot()</a> to apply a custom stylesheet while making the screenshot.</li> <li>New <code>fileName</code> option for <a href="test-reporters.html#blob-reporter">Blob reporter</a>, to specify the name of the report to be created.</li> </ul> <h3 id="browser-versions-8">Browser Versions<a href="#browser-versions-8" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 121.0.6167.57</li> <li>Mozilla Firefox 121.0</li> <li>WebKit 17.4</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 120</li> <li>Microsoft Edge 120</li> </ul> <h2 id="version-140">Version 1.40<a href="#version-140" aria-label="Direct link to Version 1.40" title="Direct link to Version 1.40">​</a>
</h2>  <h3 id="test-generator-update">Test Generator Update<a href="#test-generator-update" aria-label="Direct link to Test Generator Update" title="Direct link to Test Generator Update">​</a>
</h3> <p><img decoding="async" loading="lazy" src="https://github.com/microsoft/playwright/assets/9881434/e8d67e2e-f36d-4301-8631-023948d3e190" alt="Playwright Test Generator"></p> <p>New tools to generate assertions:</p> <ul> <li>"Assert visibility" tool generates <a href="api/class-locatorassertions.html#locator-assertions-to-be-visible">expect(locator).toBeVisible()</a>.</li> <li>"Assert value" tool generates <a href="api/class-locatorassertions.html#locator-assertions-to-have-value">expect(locator).toHaveValue()</a>.</li> <li>"Assert text" tool generates <a href="api/class-locatorassertions.html#locator-assertions-to-contain-text">expect(locator).toContainText()</a>.</li> </ul> <p>Here is an example of a generated test with assertions:</p> <pre tabindex="0" data-language="javascript">import { test, expect } from '@playwright/test';

test('test', async ({ page }) =&gt; {
  await page.goto('https://playwright.dev/');
  await page.getByRole('link', { name: 'Get started' }).click();
  await expect(page.getByLabel('Breadcrumbs').getByRole('list')).toContainText('Installation');
  await expect(page.getByLabel('Search')).toBeVisible();
  await page.getByLabel('Search').click();
  await page.getByPlaceholder('Search docs').fill('locator');
  await expect(page.getByPlaceholder('Search docs')).toHaveValue('locator');
});</pre> <h3 id="new-apis-4">New APIs<a href="#new-apis-4" aria-label="Direct link to New APIs" title="Direct link to New APIs">​</a>
</h3> <ul> <li>Options <a href="api/class-page.html#page-close-option-reason">reason</a> in <a href="api/class-page.html#page-close">page.close()</a>, <a href="api/class-browsercontext.html#browser-context-close-option-reason">reason</a> in <a href="api/class-browsercontext.html#browser-context-close">browserContext.close()</a> and <a href="api/class-browser.html#browser-close-option-reason">reason</a> in <a href="api/class-browser.html#browser-close">browser.close()</a>. Close reason is reported for all operations interrupted by the closure.</li> <li>Option <a href="api/class-browsertype.html#browser-type-launch-persistent-context-option-firefox-user-prefs">firefoxUserPrefs</a> in <a href="api/class-browsertype.html#browser-type-launch-persistent-context">browserType.launchPersistentContext()</a>.</li> </ul> <h3 id="other-changes">Other Changes<a href="#other-changes" aria-label="Direct link to Other Changes" title="Direct link to Other Changes">​</a>
</h3> <ul> <li>Methods <a href="api/class-download.html#download-path">download.path()</a> and <a href="api/class-download.html#download-create-read-stream">download.createReadStream()</a> throw an error for failed and cancelled downloads.</li> <li>Playwright <a href="docker.html">docker image</a> now comes with Node.js v20.</li> </ul> <h3 id="browser-versions-9">Browser Versions<a href="#browser-versions-9" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 120.0.6099.28</li> <li>Mozilla Firefox 119.0</li> <li>WebKit 17.4</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 119</li> <li>Microsoft Edge 119</li> </ul> <h2 id="version-139">Version 1.39<a href="#version-139" aria-label="Direct link to Version 1.39" title="Direct link to Version 1.39">​</a>
</h2>  <h3 id="add-custom-matchers-to-your-expect">Add custom matchers to your expect<a href="#add-custom-matchers-to-your-expect" aria-label="Direct link to Add custom matchers to your expect" title="Direct link to Add custom matchers to your expect">​</a>
</h3> <p>You can extend Playwright assertions by providing custom matchers. These matchers will be available on the expect object.</p> <pre tabindex="0" data-language="javascript">import { expect as baseExpect } from '@playwright/test';
export const expect = baseExpect.extend({
  async toHaveAmount(locator: Locator, expected: number, options?: { timeout?: number }) {
    // ... see documentation for how to write matchers.
  },
});

test('pass', async ({ page }) =&gt; {
  await expect(page.getByTestId('cart')).toHaveAmount(5);
});</pre> <p>See the documentation <a href="test-assertions.html#add-custom-matchers-using-expectextend">for a full example</a>.</p> <h3 id="merge-test-fixtures">Merge test fixtures<a href="#merge-test-fixtures" aria-label="Direct link to Merge test fixtures" title="Direct link to Merge test fixtures">​</a>
</h3> <p>You can now merge test fixtures from multiple files or modules:</p> <pre tabindex="0" data-language="javascript">import { mergeTests } from '@playwright/test';
import { test as dbTest } from 'database-test-utils';
import { test as a11yTest } from 'a11y-test-utils';

export const test = mergeTests(dbTest, a11yTest);</pre> <pre tabindex="0" data-language="javascript">import { test } from './fixtures';

test('passes', async ({ database, page, a11y }) =&gt; {
  // use database and a11y fixtures.
});</pre> <h3 id="merge-custom-expect-matchers">Merge custom expect matchers<a href="#merge-custom-expect-matchers" aria-label="Direct link to Merge custom expect matchers" title="Direct link to Merge custom expect matchers">​</a>
</h3> <p>You can now merge custom expect matchers from multiple files or modules:</p> <pre tabindex="0" data-language="javascript">import { mergeTests, mergeExpects } from '@playwright/test';
import { test as dbTest, expect as dbExpect } from 'database-test-utils';
import { test as a11yTest, expect as a11yExpect } from 'a11y-test-utils';

export const test = mergeTests(dbTest, a11yTest);
export const expect = mergeExpects(dbExpect, a11yExpect);</pre> <pre tabindex="0" data-language="javascript">import { test, expect } from './fixtures';

test('passes', async ({ page, database }) =&gt; {
  await expect(database).toHaveDatabaseUser('admin');
  await expect(page).toPassA11yAudit();
});</pre> <h3 id="hide-implementation-details-box-test-steps">Hide implementation details: box test steps<a href="#hide-implementation-details-box-test-steps" aria-label="Direct link to Hide implementation details: box test steps" title="Direct link to Hide implementation details: box test steps">​</a>
</h3> <p>You can mark a <a href="api/class-test.html#test-step">test.step()</a> as "boxed" so that errors inside it point to the step call site.</p> <pre tabindex="0" data-language="javascript">async function login(page) {
  await test.step('login', async () =&gt; {
    // ...
  }, { box: true });  // Note the "box" option here.
}</pre> <pre tabindex="0" data-language="javascript">Error: Timed out 5000ms waiting for expect(locator).toBeVisible()
  ... error details omitted ...

  14 |   await page.goto('https://github.com/login');
&gt; 15 |   await login(page);
     |         ^
  16 | });</pre> <p>See <a href="api/class-test.html#test-step">test.step()</a> documentation for a full example.</p> <h3 id="new-apis-5">New APIs<a href="#new-apis-5" aria-label="Direct link to New APIs" title="Direct link to New APIs">​</a>
</h3> <ul> <li><a href="api/class-locatorassertions.html#locator-assertions-to-have-attribute-2">expect(locator).toHaveAttribute()</a></li> </ul> <h3 id="browser-versions-10">Browser Versions<a href="#browser-versions-10" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 119.0.6045.9</li> <li>Mozilla Firefox 118.0.1</li> <li>WebKit 17.4</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 118</li> <li>Microsoft Edge 118</li> </ul> <h2 id="version-138">Version 1.38<a href="#version-138" aria-label="Direct link to Version 1.38" title="Direct link to Version 1.38">​</a>
</h2>  <h3 id="ui-mode-updates-1">UI Mode Updates<a href="#ui-mode-updates-1" aria-label="Direct link to UI Mode Updates" title="Direct link to UI Mode Updates">​</a>
</h3> <p><img decoding="async" loading="lazy" src="https://github.com/microsoft/playwright/assets/746130/8ba27be0-58fd-4f62-8561-950480610369" alt="Playwright UI Mode"></p> <ol> <li>Zoom into time range.</li> <li>Network panel redesign.</li> </ol> <h3 id="new-apis-6">New APIs<a href="#new-apis-6" aria-label="Direct link to New APIs" title="Direct link to New APIs">​</a>
</h3> <ul> <li><a href="api/class-browsercontext.html#browser-context-event-web-error">browserContext.on('weberror')</a></li> <li><a href="api/class-locator.html#locator-press-sequentially">locator.pressSequentially()</a></li> <li>The <a href="api/class-reporter.html#reporter-on-end">reporter.onEnd()</a> now reports <code>startTime</code> and total run <code>duration</code>.</li> </ul> <h3 id="deprecations">Deprecations<a href="#deprecations" aria-label="Direct link to Deprecations" title="Direct link to Deprecations">​</a>
</h3> <ul> <li>The following methods were deprecated: <a href="api/class-page.html#page-type">page.type()</a>, <a href="api/class-frame.html#frame-type">frame.type()</a>, <a href="api/class-locator.html#locator-type">locator.type()</a> and <a href="api/class-elementhandle.html#element-handle-type">elementHandle.type()</a>. Please use <a href="api/class-locator.html#locator-fill">locator.fill()</a> instead which is much faster. Use <a href="api/class-locator.html#locator-press-sequentially">locator.pressSequentially()</a> only if there is a special keyboard handling on the page, and you need to press keys one-by-one.</li> </ul> <h3 id="breaking-changes-playwright-no-longer-downloads-browsers-automatically">Breaking Changes: Playwright no longer downloads browsers automatically<a href="#breaking-changes-playwright-no-longer-downloads-browsers-automatically" aria-label="Direct link to Breaking Changes: Playwright no longer downloads browsers automatically" title="Direct link to Breaking Changes: Playwright no longer downloads browsers automatically">​</a>
</h3> <blockquote> <p><strong>Note</strong>: If you are using <code>@playwright/test</code> package, this change does not affect you.</p> </blockquote> <p>Playwright recommends to use <code>@playwright/test</code> package and download browsers via <code>npx playwright install</code> command. If you are following this recommendation, nothing has changed for you.</p> <p>However, up to v1.38, installing the <code>playwright</code> package instead of <code>@playwright/test</code> did automatically download browsers. This is no longer the case, and we recommend to explicitly download browsers via <code>npx playwright install</code> command.</p> <p><strong>v1.37 and earlier</strong></p> <p><code>playwright</code> package was downloading browsers during <code>npm install</code>, while <code>@playwright/test</code> was not.</p> <p><strong>v1.38 and later</strong></p> <p><code>playwright</code> and <code>@playwright/test</code> packages do not download browsers during <code>npm install</code>.</p> <p><strong>Recommended migration</strong></p> <p>Run <code>npx playwright install</code> to download browsers after <code>npm install</code>. For example, in your CI configuration:</p> <pre tabindex="0" data-language="javascript">- run: npm ci
- run: npx playwright install --with-deps</pre> <p><strong>Alternative migration option - not recommended</strong></p> <p>Add <code>@playwright/browser-chromium</code>, <code>@playwright/browser-firefox</code> and <code>@playwright/browser-webkit</code> as a dependency. These packages download respective browsers during <code>npm install</code>. Make sure you keep the version of all playwright packages in sync:</p> <pre tabindex="0" data-language="javascript">// package.json
{
  "devDependencies": {
    "playwright": "1.38.0",
    "@playwright/browser-chromium": "1.38.0",
    "@playwright/browser-firefox": "1.38.0",
    "@playwright/browser-webkit": "1.38.0"
  }
}</pre> <h3 id="browser-versions-11">Browser Versions<a href="#browser-versions-11" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 117.0.5938.62</li> <li>Mozilla Firefox 117.0</li> <li>WebKit 17.0</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 116</li> <li>Microsoft Edge 116</li> </ul> <h2 id="version-137">Version 1.37<a href="#version-137" aria-label="Direct link to Version 1.37" title="Direct link to Version 1.37">​</a>
</h2>  <h3 id="new-npx-playwright-merge-reports-tool">New <code>npx playwright merge-reports</code> tool<a href="#new-npx-playwright-merge-reports-tool" aria-label="Direct link to new-npx-playwright-merge-reports-tool" title="Direct link to new-npx-playwright-merge-reports-tool">​</a>
</h3> <p>If you run tests on multiple shards, you can now merge all reports in a single HTML report (or any other report) using the new <code>merge-reports</code> CLI tool.</p> <p>Using <code>merge-reports</code> tool requires the following steps:</p> <ol> <li> <p>Adding a new "blob" reporter to the config when running on CI:</p> <pre tabindex="0" data-language="javascript">export default defineConfig({
  testDir: './tests',
  reporter: process.env.CI ? 'blob' : 'html',
});</pre> <p>The "blob" reporter will produce ".zip" files that contain all the information about the test run.</p> </li> <li> <p>Copying all "blob" reports in a single shared location and running <code>npx playwright merge-reports</code>:</p> </li> </ol> <pre tabindex="0" data-language="javascript">npx playwright merge-reports --reporter html ./all-blob-reports</pre> <p>Read more in <a href="test-sharding.html">our documentation</a>.</p> <h3 id="-debian-12-bookworm-support">📚 Debian 12 Bookworm Support<a href="#-debian-12-bookworm-support" aria-label="Direct link to 📚 Debian 12 Bookworm Support" title="Direct link to 📚 Debian 12 Bookworm Support">​</a>
</h3> <p>Playwright now supports Debian 12 Bookworm on both x86_64 and arm64 for Chromium, Firefox and WebKit. Let us know if you encounter any issues!</p> <p>Linux support looks like this:</p> <table>
<thead><tr>
<th style="text-align:left"></th>
<th style="text-align:center">Ubuntu 20.04</th>
<th style="text-align:center">Ubuntu 22.04</th>
<th style="text-align:center">Debian 11</th>
<th style="text-align:center">Debian 12</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left">Chromium</td>
<td style="text-align:center">✅</td>
<td style="text-align:center">✅</td>
<td style="text-align:center">✅</td>
<td style="text-align:center">✅</td>
</tr>
<tr>
<td style="text-align:left">WebKit</td>
<td style="text-align:center">✅</td>
<td style="text-align:center">✅</td>
<td style="text-align:center">✅</td>
<td style="text-align:center">✅</td>
</tr>
<tr>
<td style="text-align:left">Firefox</td>
<td style="text-align:center">✅</td>
<td style="text-align:center">✅</td>
<td style="text-align:center">✅</td>
<td style="text-align:center">✅</td>
</tr>
</tbody>
</table> <h3 id="ui-mode-updates-2">UI Mode Updates<a href="#ui-mode-updates-2" aria-label="Direct link to UI Mode Updates" title="Direct link to UI Mode Updates">​</a>
</h3> <ul> <li>UI Mode now respects project dependencies. You can control which dependencies to respect by checking/unchecking them in a projects list.</li> <li>Console logs from the test are now displayed in the Console tab.</li> </ul> <h3 id="browser-versions-12">Browser Versions<a href="#browser-versions-12" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 116.0.5845.82</li> <li>Mozilla Firefox 115.0</li> <li>WebKit 17.0</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 115</li> <li>Microsoft Edge 115</li> </ul> <h2 id="version-136">Version 1.36<a href="#version-136" aria-label="Direct link to Version 1.36" title="Direct link to Version 1.36">​</a>
</h2> <p>🏝️ Summer maintenance release.</p> <h3 id="browser-versions-13">Browser Versions<a href="#browser-versions-13" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 115.0.5790.75</li> <li>Mozilla Firefox 115.0</li> <li>WebKit 17.0</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 114</li> <li>Microsoft Edge 114</li> </ul> <h2 id="version-135">Version 1.35<a href="#version-135" aria-label="Direct link to Version 1.35" title="Direct link to Version 1.35">​</a>
</h2>  <h3 id="highlights">Highlights<a href="#highlights" aria-label="Direct link to Highlights" title="Direct link to Highlights">​</a>
</h3> <ul> <li> <p>UI mode is now available in VSCode Playwright extension via a new "Show trace viewer" button:</p> <p><img decoding="async" loading="lazy" src="https://github.com/microsoft/playwright/assets/746130/13094128-259b-477a-8bbb-c1181178e8a2" alt="Playwright UI Mode"></p> </li> <li> <p>UI mode and trace viewer mark network requests handled with <a href="api/class-page.html#page-route">page.route()</a> and <a href="api/class-browsercontext.html#browser-context-route">browserContext.route()</a> handlers, as well as those issued via the <a href="api-testing.html">API testing</a>:</p> <p><img decoding="async" loading="lazy" src="https://github.com/microsoft/playwright/assets/746130/0df2d4b6-faa3-465c-aff3-c435b430bfe1" alt="Trace Viewer"></p> </li> <li> <p>New option <code>maskColor</code> for methods <a href="api/class-page.html#page-screenshot">page.screenshot()</a>, <a href="api/class-locator.html#locator-screenshot">locator.screenshot()</a>, <a href="api/class-pageassertions.html#page-assertions-to-have-screenshot-1">expect(page).toHaveScreenshot()</a> and <a href="api/class-locatorassertions.html#locator-assertions-to-have-screenshot-1">expect(locator).toHaveScreenshot()</a> to change default masking color:</p> <pre tabindex="0" data-language="javascript">await page.goto('https://playwright.dev');
await expect(page).toHaveScreenshot({
  mask: [page.locator('img')],
  maskColor: '#00FF00', // green
});</pre> </li> <li> <p>New <code>uninstall</code> CLI command to uninstall browser binaries:</p> <pre tabindex="0" data-language="javascript">$ npx playwright uninstall # remove browsers installed by this installation
$ npx playwright uninstall --all # remove all ever-install Playwright browsers</pre> </li> <li> <p>Both UI mode and trace viewer now could be opened in a browser tab:</p> <pre tabindex="0" data-language="javascript">$ npx playwright test --ui-port 0 # open UI mode in a tab on a random port
$ npx playwright show-trace --port 0 # open trace viewer in tab on a random port</pre> </li> </ul> <h3 id="️-breaking-changes">⚠️ Breaking changes<a href="#%EF%B8%8F-breaking-changes" aria-label="Direct link to ⚠️ Breaking changes" title="Direct link to ⚠️ Breaking changes">​</a>
</h3> <ul> <li> <p><code>playwright-core</code> binary got renamed from <code>playwright</code> to <code>playwright-core</code>. So if you use <code>playwright-core</code> CLI, make sure to update the name:</p> <pre tabindex="0" data-language="javascript">$ npx playwright-core install # the new way to install browsers when using playwright-core</pre> <p>This change <strong>does not</strong> affect <code>@playwright/test</code> and <code>playwright</code> package users.</p> </li> </ul> <h3 id="browser-versions-14">Browser Versions<a href="#browser-versions-14" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 115.0.5790.13</li> <li>Mozilla Firefox 113.0</li> <li>WebKit 16.4</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 114</li> <li>Microsoft Edge 114</li> </ul> <h2 id="version-134">Version 1.34<a href="#version-134" aria-label="Direct link to Version 1.34" title="Direct link to Version 1.34">​</a>
</h2>  <h3 id="highlights-1">Highlights<a href="#highlights-1" aria-label="Direct link to Highlights" title="Direct link to Highlights">​</a>
</h3> <ul> <li> <p>UI Mode now shows steps, fixtures and attachments: <img decoding="async" loading="lazy" src="https://github.com/microsoft/playwright/assets/746130/1d280419-d79a-4a56-b2dc-54d631281d56" alt="UI Mode attachments"></p> </li> <li> <p>New property <a href="api/class-testproject.html#test-project-teardown">testProject.teardown</a> to specify a project that needs to run after this and all dependent projects have finished. Teardown is useful to cleanup any resources acquired by this project.</p> <p>A common pattern would be a <code>setup</code> dependency with a corresponding <code>teardown</code>:</p> <pre tabindex="0" data-language="javascript">import { defineConfig } from '@playwright/test';

export default defineConfig({
  projects: [
    {
      name: 'setup',
      testMatch: /global.setup\.ts/,
      teardown: 'teardown',
    },
    {
      name: 'teardown',
      testMatch: /global.teardown\.ts/,
    },
    {
      name: 'chromium',
      use: devices['Desktop Chrome'],
      dependencies: ['setup'],
    },
    {
      name: 'firefox',
      use: devices['Desktop Firefox'],
      dependencies: ['setup'],
    },
    {
      name: 'webkit',
      use: devices['Desktop Safari'],
      dependencies: ['setup'],
    },
  ],
});</pre> </li> <li> <p>New method <a href="test-assertions.html#expectconfigure"><code>expect.configure</code></a> to create pre-configured expect instance with its own defaults such as <code>timeout</code> and <code>soft</code>.</p> <pre tabindex="0" data-language="javascript">const slowExpect = expect.configure({ timeout: 10000 });
await slowExpect(locator).toHaveText('Submit');

// Always do soft assertions.
const softExpect = expect.configure({ soft: true });</pre> </li> <li> <p>New options <code>stderr</code> and <code>stdout</code> in <a href="api/class-testconfig.html#test-config-web-server">testConfig.webServer</a> to configure output handling:</p> <pre tabindex="0" data-language="javascript">import { defineConfig } from '@playwright/test';

export default defineConfig({
  // Run your local dev server before starting the tests
  webServer: {
    command: 'npm run start',
    url: 'http://127.0.0.1:3000',
    reuseExistingServer: !process.env.CI,
    stdout: 'pipe',
    stderr: 'pipe',
  },
});</pre> </li> <li> <p>New <a href="api/class-locator.html#locator-and">locator.and()</a> to create a locator that matches both locators.</p> <pre tabindex="0" data-language="javascript">const button = page.getByRole('button').and(page.getByTitle('Subscribe'));</pre> </li> <li> <p>New events <a href="api/class-browsercontext.html#browser-context-event-console">browserContext.on('console')</a> and <a href="api/class-browsercontext.html#browser-context-event-dialog">browserContext.on('dialog')</a> to subscribe to any dialogs and console messages from any page from the given browser context. Use the new methods <a href="api/class-consolemessage.html#console-message-page">consoleMessage.page()</a> and <a href="api/class-dialog.html#dialog-page">dialog.page()</a> to pin-point event source.</p> </li> </ul> <h3 id="️-breaking-changes-1">⚠️ Breaking changes<a href="#%EF%B8%8F-breaking-changes-1" aria-label="Direct link to ⚠️ Breaking changes" title="Direct link to ⚠️ Breaking changes">​</a>
</h3> <ul> <li> <p><code>npx playwright test</code> no longer works if you install both <code>playwright</code> and <code>@playwright/test</code>. There's no need to install both, since you can always import browser automation APIs from <code>@playwright/test</code> directly:</p> <pre tabindex="0" data-language="javascript">import { chromium, firefox, webkit } from '@playwright/test';
/* ... */</pre> </li> <li> <p>Node.js 14 is no longer supported since it <a href="https://nodejs.dev/en/about/releases/" target="_blank" rel="noopener noreferrer">reached its end-of-life</a> on April 30, 2023.</p> </li> </ul> <h3 id="browser-versions-15">Browser Versions<a href="#browser-versions-15" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 114.0.5735.26</li> <li>Mozilla Firefox 113.0</li> <li>WebKit 16.4</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 113</li> <li>Microsoft Edge 113</li> </ul> <h2 id="version-133">Version 1.33<a href="#version-133" aria-label="Direct link to Version 1.33" title="Direct link to Version 1.33">​</a>
</h2>  <h3 id="locators-update">Locators Update<a href="#locators-update" aria-label="Direct link to Locators Update" title="Direct link to Locators Update">​</a>
</h3> <ul> <li> <p>Use <a href="api/class-locator.html#locator-or">locator.or()</a> to create a locator that matches either of the two locators. Consider a scenario where you'd like to click on a "New email" button, but sometimes a security settings dialog shows up instead. In this case, you can wait for either a "New email" button, or a dialog and act accordingly:</p> <pre tabindex="0" data-language="javascript">const newEmail = page.getByRole('button', { name: 'New email' });
const dialog = page.getByText('Confirm security settings');
await expect(newEmail.or(dialog)).toBeVisible();
if (await dialog.isVisible())
  await page.getByRole('button', { name: 'Dismiss' }).click();
await newEmail.click();</pre> </li> <li> <p>Use new options <a href="api/class-locator.html#locator-filter-option-has-not">hasNot</a> and <a href="api/class-locator.html#locator-filter-option-has-not-text">hasNotText</a> in <a href="api/class-locator.html#locator-filter">locator.filter()</a> to find elements that <strong>do not match</strong> certain conditions.</p> <pre tabindex="0" data-language="javascript">const rowLocator = page.locator('tr');
await rowLocator
    .filter({ hasNotText: 'text in column 1' })
    .filter({ hasNot: page.getByRole('button', { name: 'column 2 button' }) })
    .screenshot();</pre> </li> <li> <p>Use new web-first assertion <a href="api/class-locatorassertions.html#locator-assertions-to-be-attached">expect(locator).toBeAttached()</a> to ensure that the element is present in the page's DOM. Do not confuse with the <a href="api/class-locatorassertions.html#locator-assertions-to-be-visible">expect(locator).toBeVisible()</a> that ensures that element is both attached &amp; visible.</p> </li> </ul> <h3 id="new-apis-7">New APIs<a href="#new-apis-7" aria-label="Direct link to New APIs" title="Direct link to New APIs">​</a>
</h3> <ul> <li><a href="api/class-locator.html#locator-or">locator.or()</a></li> <li>New option <a href="api/class-locator.html#locator-filter-option-has-not">hasNot</a> in <a href="api/class-locator.html#locator-filter">locator.filter()</a>
</li> <li>New option <a href="api/class-locator.html#locator-filter-option-has-not-text">hasNotText</a> in <a href="api/class-locator.html#locator-filter">locator.filter()</a>
</li> <li><a href="api/class-locatorassertions.html#locator-assertions-to-be-attached">expect(locator).toBeAttached()</a></li> <li>New option <a href="api/class-route.html#route-fetch-option-timeout">timeout</a> in <a href="api/class-route.html#route-fetch">route.fetch()</a>
</li> <li><a href="api/class-reporter.html#reporter-on-exit">reporter.onExit()</a></li> </ul> <h3 id="️-breaking-change">⚠️ Breaking change<a href="#%EF%B8%8F-breaking-change" aria-label="Direct link to ⚠️ Breaking change" title="Direct link to ⚠️ Breaking change">​</a>
</h3> <ul> <li>The <code>mcr.microsoft.com/playwright:v1.33.0</code> now serves a Playwright image based on Ubuntu Jammy. To use the focal-based image, please use <code>mcr.microsoft.com/playwright:v1.33.0-focal</code> instead.</li> </ul> <h3 id="browser-versions-16">Browser Versions<a href="#browser-versions-16" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 113.0.5672.53</li> <li>Mozilla Firefox 112.0</li> <li>WebKit 16.4</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 112</li> <li>Microsoft Edge 112</li> </ul> <h2 id="version-132">Version 1.32<a href="#version-132" aria-label="Direct link to Version 1.32" title="Direct link to Version 1.32">​</a>
</h2>  <h3 id="introducing-ui-mode-preview">Introducing UI Mode (preview)<a href="#introducing-ui-mode-preview" aria-label="Direct link to Introducing UI Mode (preview)" title="Direct link to Introducing UI Mode (preview)">​</a>
</h3> <p>New <a href="test-ui-mode.html">UI Mode</a> lets you explore, run and debug tests. Comes with a built-in watch mode.</p> <p><img decoding="async" loading="lazy" src="https://user-images.githubusercontent.com/746130/227004851-3901a691-4f8e-43d6-8d6b-cbfeafaeb999.png" alt="Playwright UI Mode"></p> <p>Engage with a new flag <code>--ui</code>:</p> <pre tabindex="0" data-language="javascript">npx playwright test --ui</pre> <h3 id="new-apis-8">New APIs<a href="#new-apis-8" aria-label="Direct link to New APIs" title="Direct link to New APIs">​</a>
</h3> <ul> <li>New options <a href="api/class-page.html#page-route-from-har-option-update-mode">updateMode</a> and <a href="api/class-page.html#page-route-from-har-option-update-content">updateContent</a> in <a href="api/class-page.html#page-route-from-har">page.routeFromHAR()</a> and <a href="api/class-browsercontext.html#browser-context-route-from-har">browserContext.routeFromHAR()</a>.</li> <li>Chaining existing locator objects, see <a href="locators.html#matching-inside-a-locator">locator docs</a> for details.</li> <li>New property <a href="api/class-testinfo.html#test-info-test-id">testInfo.testId</a>.</li> <li>New option <a href="api/class-tracing.html#tracing-start-chunk-option-name">name</a> in method <a href="api/class-tracing.html#tracing-start-chunk">tracing.startChunk()</a>.</li> </ul> <h3 id="️-breaking-change-in-component-tests">⚠️ Breaking change in component tests<a href="#%EF%B8%8F-breaking-change-in-component-tests" aria-label="Direct link to ⚠️ Breaking change in component tests" title="Direct link to ⚠️ Breaking change in component tests">​</a>
</h3> <p>Note: <strong>component tests only</strong>, does not affect end-to-end tests.</p> <ul> <li>
<code>@playwright/experimental-ct-react</code> now supports <strong>React 18 only</strong>.</li> <li>If you're running component tests with React 16 or 17, please replace <code>@playwright/experimental-ct-react</code> with <code>@playwright/experimental-ct-react17</code>.</li> </ul> <h3 id="browser-versions-17">Browser Versions<a href="#browser-versions-17" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 112.0.5615.29</li> <li>Mozilla Firefox 111.0</li> <li>WebKit 16.4</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 111</li> <li>Microsoft Edge 111</li> </ul> <h2 id="version-131">Version 1.31<a href="#version-131" aria-label="Direct link to Version 1.31" title="Direct link to Version 1.31">​</a>
</h2>  <h3 id="new-apis-9">New APIs<a href="#new-apis-9" aria-label="Direct link to New APIs" title="Direct link to New APIs">​</a>
</h3> <ul> <li> <p>New property <a href="api/class-testproject.html#test-project-dependencies">testProject.dependencies</a> to configure dependencies between projects.</p> <p>Using dependencies allows global setup to produce traces and other artifacts, see the setup steps in the test report and more.</p> <pre tabindex="0" data-language="javascript">import { defineConfig } from '@playwright/test';

export default defineConfig({
  projects: [
    {
      name: 'setup',
      testMatch: /global.setup\.ts/,
    },
    {
      name: 'chromium',
      use: devices['Desktop Chrome'],
      dependencies: ['setup'],
    },
    {
      name: 'firefox',
      use: devices['Desktop Firefox'],
      dependencies: ['setup'],
    },
    {
      name: 'webkit',
      use: devices['Desktop Safari'],
      dependencies: ['setup'],
    },
  ],
});</pre> </li> <li> <p>New assertion <a href="api/class-locatorassertions.html#locator-assertions-to-be-in-viewport">expect(locator).toBeInViewport()</a> ensures that locator points to an element that intersects viewport, according to the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API" target="_blank" rel="noopener noreferrer">intersection observer API</a>.</p> <pre tabindex="0" data-language="javascript">const button = page.getByRole('button');

// Make sure at least some part of element intersects viewport.
await expect(button).toBeInViewport();

// Make sure element is fully outside of viewport.
await expect(button).not.toBeInViewport();

// Make sure that at least half of the element intersects viewport.
await expect(button).toBeInViewport({ ratio: 0.5 });</pre> </li> </ul> <h3 id="miscellaneous-5">Miscellaneous<a href="#miscellaneous-5" aria-label="Direct link to Miscellaneous" title="Direct link to Miscellaneous">​</a>
</h3> <ul> <li>DOM snapshots in trace viewer can be now opened in a separate window.</li> <li>New method <code>defineConfig</code> to be used in <code>playwright.config</code>.</li> <li>New option <a href="api/class-route.html#route-fetch-option-max-redirects">maxRedirects</a> for method <a href="api/class-route.html#route-fetch">route.fetch()</a>.</li> <li>Playwright now supports Debian 11 arm64.</li> <li>Official <a href="docker.html">docker images</a> now include Node 18 instead of Node 16.</li> </ul> <h3 id="️-breaking-change-in-component-tests-1">⚠️ Breaking change in component tests<a href="#%EF%B8%8F-breaking-change-in-component-tests-1" aria-label="Direct link to ⚠️ Breaking change in component tests" title="Direct link to ⚠️ Breaking change in component tests">​</a>
</h3> <p>Note: <strong>component tests only</strong>, does not affect end-to-end tests.</p> <p><code>playwright-ct.config</code> configuration file for <a href="test-components.html">component testing</a> now requires calling <code>defineConfig</code>.</p> <pre tabindex="0" data-language="javascript">// Before

import { type PlaywrightTestConfig, devices } from '@playwright/experimental-ct-react';
const config: PlaywrightTestConfig = {
  // ... config goes here ...
};
export default config;</pre> <p>Replace <code>config</code> variable definition with <code>defineConfig</code> call:</p> <pre tabindex="0" data-language="javascript">// After

import { defineConfig, devices } from '@playwright/experimental-ct-react';
export default defineConfig({
  // ... config goes here ...
});</pre> <h3 id="browser-versions-18">Browser Versions<a href="#browser-versions-18" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 111.0.5563.19</li> <li>Mozilla Firefox 109.0</li> <li>WebKit 16.4</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 110</li> <li>Microsoft Edge 110</li> </ul> <h2 id="version-130">Version 1.30<a href="#version-130" aria-label="Direct link to Version 1.30" title="Direct link to Version 1.30">​</a>
</h2> <h3 id="browser-versions-19">Browser Versions<a href="#browser-versions-19" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 110.0.5481.38</li> <li>Mozilla Firefox 108.0.2</li> <li>WebKit 16.4</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 109</li> <li>Microsoft Edge 109</li> </ul> <h2 id="version-129">Version 1.29<a href="#version-129" aria-label="Direct link to Version 1.29" title="Direct link to Version 1.29">​</a>
</h2>  <h3 id="new-apis-10">New APIs<a href="#new-apis-10" aria-label="Direct link to New APIs" title="Direct link to New APIs">​</a>
</h3> <ul> <li> <p>New method <a href="api/class-route.html#route-fetch">route.fetch()</a> and new option <code>json</code> for <a href="api/class-route.html#route-fulfill">route.fulfill()</a>:</p> <pre tabindex="0" data-language="javascript">await page.route('**/api/settings', async route =&gt; {
  // Fetch original settings.
  const response = await route.fetch();

  // Force settings theme to a predefined value.
  const json = await response.json();
  json.theme = 'Solorized';

  // Fulfill with modified data.
  await route.fulfill({ json });
});</pre> </li> <li> <p>New method <a href="api/class-locator.html#locator-all">locator.all()</a> to iterate over all matching elements:</p> <pre tabindex="0" data-language="javascript">// Check all checkboxes!
const checkboxes = page.getByRole('checkbox');
for (const checkbox of await checkboxes.all())
  await checkbox.check();</pre> </li> <li> <p><a href="api/class-locator.html#locator-select-option">locator.selectOption()</a> matches now by value or label:</p> <pre tabindex="0" data-language="html">&lt;select multiple&gt;
  &lt;option value="red"&gt;Red&lt;/div&gt;
  &lt;option value="green"&gt;Green&lt;/div&gt;
  &lt;option value="blue"&gt;Blue&lt;/div&gt;
&lt;/select&gt;</pre> <pre tabindex="0" data-language="javascript">await element.selectOption('Red');</pre> </li> <li> <p>Retry blocks of code until all assertions pass:</p> <pre tabindex="0" data-language="javascript">await expect(async () =&gt; {
  const response = await page.request.get('https://api.example.com');
  await expect(response).toBeOK();
}).toPass();</pre> <p>Read more in <a href="test-assertions.html#expecttopass">our documentation</a>.</p> </li> <li> <p>Automatically capture <strong>full page screenshot</strong> on test failure:</p> <pre tabindex="0" data-language="javascript">import { defineConfig } from '@playwright/test';
export default defineConfig({
  use: {
    screenshot: {
      mode: 'only-on-failure',
      fullPage: true,
    }
  }
});</pre> </li> </ul> <h3 id="miscellaneous-6">Miscellaneous<a href="#miscellaneous-6" aria-label="Direct link to Miscellaneous" title="Direct link to Miscellaneous">​</a>
</h3> <ul> <li>Playwright Test now respects <a href="https://code.visualstudio.com/docs/languages/jsconfig" target="_blank" rel="noopener noreferrer"><code>jsconfig.json</code></a>.</li> <li>New options <code>args</code> and <code>proxy</code> for <a href="api/class-androiddevice.html#android-device-launch-browser">androidDevice.launchBrowser()</a>.</li> <li>Option <code>postData</code> in method <a href="api/class-route.html#route-continue">route.continue()</a> now supports <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description" target="_blank" rel="noopener noreferrer" title="Serializable">Serializable</a> values.</li> </ul> <h3 id="browser-versions-20">Browser Versions<a href="#browser-versions-20" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 109.0.5414.46</li> <li>Mozilla Firefox 107.0</li> <li>WebKit 16.4</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 108</li> <li>Microsoft Edge 108</li> </ul> <h2 id="version-128">Version 1.28<a href="#version-128" aria-label="Direct link to Version 1.28" title="Direct link to Version 1.28">​</a>
</h2>  <h3 id="playwright-tools">Playwright Tools<a href="#playwright-tools" aria-label="Direct link to Playwright Tools" title="Direct link to Playwright Tools">​</a>
</h3> <ul> <li>
<strong>Record at Cursor in VSCode.</strong> You can run the test, position the cursor at the end of the test and continue generating the test.</li> </ul> <p><img decoding="async" loading="lazy" src="https://user-images.githubusercontent.com/746130/202005839-aba2eeba-217b-424d-8496-8b4f5fa72f41.png" alt="New VSCode Extension"></p> <ul> <li>
<strong>Live Locators in VSCode.</strong> You can hover and edit locators in VSCode to get them highlighted in the opened browser.</li> <li>
<strong>Live Locators in CodeGen.</strong> Generate a locator for any element on the page using "Explore" tool.</li> </ul> <p><img decoding="async" loading="lazy" src="https://user-images.githubusercontent.com/746130/201796876-01567a0b-ca61-4a9d-b12b-04786c471671.png" alt="Locator Explorer"></p> <ul> <li>
<strong>Codegen and Trace Viewer Dark Theme.</strong> Automatically picked up from operating system settings.</li> </ul> <p><img decoding="async" loading="lazy" src="https://user-images.githubusercontent.com/746130/201797969-603f74df-d7cf-4c56-befd-798dbd269796.png" alt="Dark Theme"></p> <h3 id="test-runner-2">Test Runner<a href="#test-runner-2" aria-label="Direct link to Test Runner" title="Direct link to Test Runner">​</a>
</h3> <ul> <li> <p>Configure retries and test timeout for a file or a test with <a href="api/class-test.html#test-describe-configure">test.describe.configure()</a>.</p> <pre tabindex="0" data-language="javascript">// Each test in the file will be retried twice and have a timeout of 20 seconds.
test.describe.configure({ retries: 2, timeout: 20_000 });
test('runs first', async ({ page }) =&gt; {});
test('runs second', async ({ page }) =&gt; {});</pre> </li> <li> <p>Use <a href="api/class-testproject.html#test-project-snapshot-path-template">testProject.snapshotPathTemplate</a> and <a href="api/class-testconfig.html#test-config-snapshot-path-template">testConfig.snapshotPathTemplate</a> to configure a template controlling location of snapshots generated by <a href="api/class-pageassertions.html#page-assertions-to-have-screenshot-1">expect(page).toHaveScreenshot()</a> and <a href="api/class-snapshotassertions.html#snapshot-assertions-to-match-snapshot-1">expect(value).toMatchSnapshot()</a>.</p> <pre tabindex="0" data-language="javascript">import { defineConfig } from '@playwright/test';
export default defineConfig({
  testDir: './tests',
  snapshotPathTemplate: '{testDir}/__screenshots__/{testFilePath}/{arg}{ext}',
});</pre> </li> </ul> <h3 id="new-apis-11">New APIs<a href="#new-apis-11" aria-label="Direct link to New APIs" title="Direct link to New APIs">​</a>
</h3> <ul> <li><a href="api/class-locator.html#locator-blur">locator.blur()</a></li> <li><a href="api/class-locator.html#locator-clear">locator.clear()</a></li> <li>
<a href="api/class-android.html#android-launch-server">android.launchServer()</a> and <a href="api/class-android.html#android-connect">android.connect()</a>
</li> <li><a href="api/class-androiddevice.html#android-device-event-close">androidDevice.on('close')</a></li> </ul> <h3 id="browser-versions-21">Browser Versions<a href="#browser-versions-21" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 108.0.5359.29</li> <li>Mozilla Firefox 106.0</li> <li>WebKit 16.4</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 107</li> <li>Microsoft Edge 107</li> </ul> <h2 id="version-127">Version 1.27<a href="#version-127" aria-label="Direct link to Version 1.27" title="Direct link to Version 1.27">​</a>
</h2>  <h3 id="locators">Locators<a href="#locators" aria-label="Direct link to Locators" title="Direct link to Locators">​</a>
</h3> <p>With these new APIs writing locators is a joy:</p> <ul> <li>
<a href="api/class-page.html#page-get-by-text">page.getByText()</a> to locate by text content.</li> <li>
<a href="api/class-page.html#page-get-by-role">page.getByRole()</a> to locate by <a href="https://www.w3.org/TR/wai-aria-1.2/#roles" target="_blank" rel="noopener noreferrer">ARIA role</a>, <a href="https://www.w3.org/TR/wai-aria-1.2/#aria-attributes" target="_blank" rel="noopener noreferrer">ARIA attributes</a> and <a href="https://w3c.github.io/accname/#dfn-accessible-name" target="_blank" rel="noopener noreferrer">accessible name</a>.</li> <li>
<a href="api/class-page.html#page-get-by-label">page.getByLabel()</a> to locate a form control by associated label's text.</li> <li>
<a href="api/class-page.html#page-get-by-test-id">page.getByTestId()</a> to locate an element based on its <code>data-testid</code> attribute (other attribute can be configured).</li> <li>
<a href="api/class-page.html#page-get-by-placeholder">page.getByPlaceholder()</a> to locate an input by placeholder.</li> <li>
<a href="api/class-page.html#page-get-by-alt-text">page.getByAltText()</a> to locate an element, usually image, by its text alternative.</li> <li>
<a href="api/class-page.html#page-get-by-title">page.getByTitle()</a> to locate an element by its title.</li> </ul> <pre tabindex="0" data-language="javascript">await page.getByLabel('User Name').fill('John');

await page.getByLabel('Password').fill('secret-password');

await page.getByRole('button', { name: 'Sign in' }).click();

await expect(page.getByText('Welcome, John!')).toBeVisible();</pre> <p>All the same methods are also available on <a title="Locator" href="api/class-locator.html">Locator</a>, <a title="FrameLocator" href="api/class-framelocator.html">FrameLocator</a> and <a title="Frame" href="api/class-frame.html">Frame</a> classes.</p> <h3 id="other-highlights">Other highlights<a href="#other-highlights" aria-label="Direct link to Other highlights" title="Direct link to Other highlights">​</a>
</h3> <ul> <li> <p><code>workers</code> option in the <code>playwright.config.ts</code> now accepts a percentage string to use some of the available CPUs. You can also pass it in the command line:</p> <pre tabindex="0" data-language="javascript">npx playwright test --workers=20%</pre> </li> <li> <p>New options <code>host</code> and <code>port</code> for the html reporter.</p> <pre tabindex="0" data-language="javascript">import { defineConfig } from '@playwright/test';

export default defineConfig({
  reporter: [['html', { host: 'localhost', port: '9223' }]],
});</pre> </li> <li> <p>New field <code>FullConfig.configFile</code> is available to test reporters, specifying the path to the config file if any.</p> </li> <li> <p>As announced in v1.25, Ubuntu 18 will not be supported as of Dec 2022. In addition to that, there will be no WebKit updates on Ubuntu 18 starting from the next Playwright release.</p> </li> </ul> <h3 id="behavior-changes">Behavior Changes<a href="#behavior-changes" aria-label="Direct link to Behavior Changes" title="Direct link to Behavior Changes">​</a>
</h3> <ul> <li> <p><a href="api/class-locatorassertions.html#locator-assertions-to-have-attribute">expect(locator).toHaveAttribute()</a> with an empty value does not match missing attribute anymore. For example, the following snippet will succeed when <code>button</code> <strong>does not</strong> have a <code>disabled</code> attribute.</p> <pre tabindex="0" data-language="javascript">await expect(page.getByRole('button')).toHaveAttribute('disabled', '');</pre> </li> <li> <p>Command line options <code>--grep</code> and <code>--grep-invert</code> previously incorrectly ignored <code>grep</code> and <code>grepInvert</code> options specified in the config. Now all of them are applied together.</p> </li> </ul> <h3 id="browser-versions-22">Browser Versions<a href="#browser-versions-22" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 107.0.5304.18</li> <li>Mozilla Firefox 105.0.1</li> <li>WebKit 16.0</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 106</li> <li>Microsoft Edge 106</li> </ul> <h2 id="version-126">Version 1.26<a href="#version-126" aria-label="Direct link to Version 1.26" title="Direct link to Version 1.26">​</a>
</h2>  <h3 id="assertions">Assertions<a href="#assertions" aria-label="Direct link to Assertions" title="Direct link to Assertions">​</a>
</h3> <ul> <li>New option <code>enabled</code> for <a href="api/class-locatorassertions.html#locator-assertions-to-be-enabled">expect(locator).toBeEnabled()</a>.</li> <li>
<a href="api/class-locatorassertions.html#locator-assertions-to-have-text">expect(locator).toHaveText()</a> now pierces open shadow roots.</li> <li>New option <code>editable</code> for <a href="api/class-locatorassertions.html#locator-assertions-to-be-editable">expect(locator).toBeEditable()</a>.</li> <li>New option <code>visible</code> for <a href="api/class-locatorassertions.html#locator-assertions-to-be-visible">expect(locator).toBeVisible()</a>.</li> </ul> <h3 id="other-highlights-1">Other highlights<a href="#other-highlights-1" aria-label="Direct link to Other highlights" title="Direct link to Other highlights">​</a>
</h3> <ul> <li>New option <code>maxRedirects</code> for <a href="api/class-apirequestcontext.html#api-request-context-get">apiRequestContext.get()</a> and others to limit redirect count.</li> <li>New command-line flag <code>--pass-with-no-tests</code> that allows the test suite to pass when no files are found.</li> <li>New command-line flag <code>--ignore-snapshots</code> to skip snapshot expectations, such as <code>expect(value).toMatchSnapshot()</code> and <code>expect(page).toHaveScreenshot()</code>.</li> </ul> <h3 id="behavior-change">Behavior Change<a href="#behavior-change" aria-label="Direct link to Behavior Change" title="Direct link to Behavior Change">​</a>
</h3> <p>A bunch of Playwright APIs already support the <code>waitUntil: 'domcontentloaded'</code> option. For example:</p> <pre tabindex="0" data-language="javascript">await page.goto('https://playwright.dev', {
  waitUntil: 'domcontentloaded',
});</pre> <p>Prior to 1.26, this would wait for all iframes to fire the <code>DOMContentLoaded</code> event.</p> <p>To align with web specification, the <code>'domcontentloaded'</code> value only waits for the target frame to fire the <code>'DOMContentLoaded'</code> event. Use <code>waitUntil: 'load'</code> to wait for all iframes.</p> <h3 id="browser-versions-23">Browser Versions<a href="#browser-versions-23" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 106.0.5249.30</li> <li>Mozilla Firefox 104.0</li> <li>WebKit 16.0</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 105</li> <li>Microsoft Edge 105</li> </ul> <h2 id="version-125">Version 1.25<a href="#version-125" aria-label="Direct link to Version 1.25" title="Direct link to Version 1.25">​</a>
</h2>  <h3 id="vscode-extension">VSCode Extension<a href="#vscode-extension" aria-label="Direct link to VSCode Extension" title="Direct link to VSCode Extension">​</a>
</h3> <ul> <li>Watch your tests running live &amp; keep devtools open.</li> <li>Pick selector.</li> <li>Record new test from current page state.</li> </ul> <p><img decoding="async" loading="lazy" src="https://user-images.githubusercontent.com/746130/183781999-1b9fdbc5-cfae-47d6-b4f7-5d4ae89716a8.jpg" alt="vscode extension screenshot"></p> <h3 id="test-runner-3">Test Runner<a href="#test-runner-3" aria-label="Direct link to Test Runner" title="Direct link to Test Runner">​</a>
</h3> <ul> <li> <p><a href="api/class-test.html#test-step">test.step()</a> now returns the value of the step function:</p> <pre tabindex="0" data-language="javascript">test('should work', async ({ page }) =&gt; {
  const pageTitle = await test.step('get title', async () =&gt; {
    await page.goto('https://playwright.dev');
    return await page.title();
  });
  console.log(pageTitle);
});</pre> </li> <li> <p>Added <a href="api/class-test.html#test-describe-fixme">test.describe.fixme()</a>.</p> </li> <li> <p>New <code>'interrupted'</code> test status.</p> </li> <li> <p>Enable tracing via CLI flag: <code>npx playwright test --trace=on</code>.</p> </li> </ul> <h3 id="announcements-1">Announcements<a href="#announcements-1" aria-label="Direct link to Announcements" title="Direct link to Announcements">​</a>
</h3> <ul> <li>🎁 We now ship Ubuntu 22.04 Jammy Jellyfish docker image: <code>mcr.microsoft.com/playwright:v1.34.0-jammy</code>.</li> <li>🪦 This is the last release with macOS 10.15 support (deprecated as of 1.21).</li> <li>🪦 This is the last release with Node.js 12 support, we recommend upgrading to Node.js LTS (16).</li> <li>⚠️ Ubuntu 18 is now deprecated and will not be supported as of Dec 2022.</li> </ul> <h3 id="browser-versions-24">Browser Versions<a href="#browser-versions-24" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 105.0.5195.19</li> <li>Mozilla Firefox 103.0</li> <li>WebKit 16.0</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 104</li> <li>Microsoft Edge 104</li> </ul> <h2 id="version-124">Version 1.24<a href="#version-124" aria-label="Direct link to Version 1.24" title="Direct link to Version 1.24">​</a>
</h2>  <h3 id="-multiple-web-servers-in-playwrightconfigts">🌍 Multiple Web Servers in <code>playwright.config.ts</code><a href="#-multiple-web-servers-in-playwrightconfigts" aria-label="Direct link to -multiple-web-servers-in-playwrightconfigts" title="Direct link to -multiple-web-servers-in-playwrightconfigts">​</a>
</h3> <p>Launch multiple web servers, databases, or other processes by passing an array of configurations:</p> <pre tabindex="0" data-language="javascript">import { defineConfig } from '@playwright/test';
export default defineConfig({
  webServer: [
    {
      command: 'npm run start',
      url: 'http://127.0.0.1:3000',
      timeout: 120 * 1000,
      reuseExistingServer: !process.env.CI,
    },
    {
      command: 'npm run backend',
      url: 'http://127.0.0.1:3333',
      timeout: 120 * 1000,
      reuseExistingServer: !process.env.CI,
    }
  ],
  use: {
    baseURL: 'http://localhost:3000/',
  },
});</pre> <h3 id="-debian-11-bullseye-support">🐂 Debian 11 Bullseye Support<a href="#-debian-11-bullseye-support" aria-label="Direct link to 🐂 Debian 11 Bullseye Support" title="Direct link to 🐂 Debian 11 Bullseye Support">​</a>
</h3> <p>Playwright now supports Debian 11 Bullseye on x86_64 for Chromium, Firefox and WebKit. Let us know if you encounter any issues!</p> <p>Linux support looks like this:</p> <p>| | Ubuntu 20.04 | Ubuntu 22.04 | Debian 11 | :--- | :---: | :---: | :---: | :---: | | Chromium | ✅ | ✅ | ✅ | | WebKit | ✅ | ✅ | ✅ | | Firefox | ✅ | ✅ | ✅ |</p> <h3 id="️-anonymous-describe">🕵️ Anonymous Describe<a href="#%EF%B8%8F-anonymous-describe" aria-label="Direct link to 🕵️ Anonymous Describe" title="Direct link to 🕵️ Anonymous Describe">​</a>
</h3> <p>It is now possible to call <a href="api/class-test.html#test-describe">test.describe()</a> to create suites without a title. This is useful for giving a group of tests a common option with <a href="api/class-test.html#test-use">test.use()</a>.</p> <pre tabindex="0" data-language="javascript">test.describe(() =&gt; {
  test.use({ colorScheme: 'dark' });

  test('one', async ({ page }) =&gt; {
    // ...
  });

  test('two', async ({ page }) =&gt; {
    // ...
  });
});</pre> <h3 id="-component-tests-update">🧩 Component Tests Update<a href="#-component-tests-update" aria-label="Direct link to 🧩 Component Tests Update" title="Direct link to 🧩 Component Tests Update">​</a>
</h3> <p>Playwright 1.24 Component Tests introduce <code>beforeMount</code> and <code>afterMount</code> hooks. Use these to configure your app for tests.</p> <p>For example, this could be used to setup App router in Vue.js:</p> <pre tabindex="0" data-language="javascript">import { test } from '@playwright/experimental-ct-vue';
import { Component } from './mycomponent';

test('should work', async ({ mount }) =&gt; {
  const component = await mount(Component, {
    hooksConfig: {
      /* anything to configure your app */
    }
  });
});</pre> <pre tabindex="0" data-language="javascript">import { router } from '../router';
import { beforeMount } from '@playwright/experimental-ct-vue/hooks';

beforeMount(async ({ app, hooksConfig }) =&gt; {
  app.use(router);
});</pre> <p>A similar configuration in Next.js would look like this:</p> <pre tabindex="0" data-language="javascript">import { test } from '@playwright/experimental-ct-react';
import { Component } from './mycomponent';

test('should work', async ({ mount }) =&gt; {
  const component = await mount(&lt;Component&gt;&lt;/Component&gt;, {
    // Pass mock value from test into `beforeMount`.
    hooksConfig: {
      router: {
        query: { page: 1, per_page: 10 },
        asPath: '/posts'
      }
    }
  });
});</pre> <pre tabindex="0" data-language="javascript">import router from 'next/router';
import { beforeMount } from '@playwright/experimental-ct-react/hooks';

beforeMount(async ({ hooksConfig }) =&gt; {
  // Before mount, redefine useRouter to return mock value from test.
  router.useRouter = () =&gt; hooksConfig.router;
});</pre> <h2 id="version-123">Version 1.23<a href="#version-123" aria-label="Direct link to Version 1.23" title="Direct link to Version 1.23">​</a>
</h2>  <h3 id="network-replay">Network Replay<a href="#network-replay" aria-label="Direct link to Network Replay" title="Direct link to Network Replay">​</a>
</h3> <p>Now you can record network traffic into a HAR file and re-use this traffic in your tests.</p> <p>To record network into HAR file:</p> <pre tabindex="0" data-language="javascript">npx playwright open --save-har=github.har.zip https://github.com/microsoft</pre> <p>Alternatively, you can record HAR programmatically:</p> <pre tabindex="0" data-language="javascript">const context = await browser.newContext({
  recordHar: { path: 'github.har.zip' }
});
// ... do stuff ...
await context.close();</pre> <p>Use the new methods <a href="api/class-page.html#page-route-from-har">page.routeFromHAR()</a> or <a href="api/class-browsercontext.html#browser-context-route-from-har">browserContext.routeFromHAR()</a> to serve matching responses from the <a href="http://www.softwareishard.com/blog/har-12-spec/" target="_blank" rel="noopener noreferrer">HAR</a> file:</p> <pre tabindex="0" data-language="javascript">await context.routeFromHAR('github.har.zip');</pre> <p>Read more in <a href="mock.html#mocking-with-har-files">our documentation</a>.</p> <h3 id="advanced-routing">Advanced Routing<a href="#advanced-routing" aria-label="Direct link to Advanced Routing" title="Direct link to Advanced Routing">​</a>
</h3> <p>You can now use <a href="api/class-route.html#route-fallback">route.fallback()</a> to defer routing to other handlers.</p> <p>Consider the following example:</p> <pre tabindex="0" data-language="javascript">// Remove a header from all requests.
test.beforeEach(async ({ page }) =&gt; {
  await page.route('**/*', async route =&gt; {
    const headers = await route.request().allHeaders();
    delete headers['if-none-match'];
    await route.fallback({ headers });
  });
});

test('should work', async ({ page }) =&gt; {
  await page.route('**/*', async route =&gt; {
    if (route.request().resourceType() === 'image')
      await route.abort();
    else
      await route.fallback();
  });
});</pre> <p>Note that the new methods <a href="api/class-page.html#page-route-from-har">page.routeFromHAR()</a> and <a href="api/class-browsercontext.html#browser-context-route-from-har">browserContext.routeFromHAR()</a> also participate in routing and could be deferred to.</p> <h3 id="web-first-assertions-update">Web-First Assertions Update<a href="#web-first-assertions-update" aria-label="Direct link to Web-First Assertions Update" title="Direct link to Web-First Assertions Update">​</a>
</h3> <ul> <li>New method <a href="api/class-locatorassertions.html#locator-assertions-to-have-values">expect(locator).toHaveValues()</a> that asserts all selected values of <code>&lt;select multiple&gt;</code> element.</li> <li>Methods <a href="api/class-locatorassertions.html#locator-assertions-to-contain-text">expect(locator).toContainText()</a> and <a href="api/class-locatorassertions.html#locator-assertions-to-have-text">expect(locator).toHaveText()</a> now accept <code>ignoreCase</code> option.</li> </ul> <h3 id="component-tests-update">Component Tests Update<a href="#component-tests-update" aria-label="Direct link to Component Tests Update" title="Direct link to Component Tests Update">​</a>
</h3> <ul> <li>Support for Vue2 via the <a href="https://www.npmjs.com/package/@playwright/experimental-ct-vue2" target="_blank" rel="noopener noreferrer"><code>@playwright/experimental-ct-vue2</code></a> package.</li> <li>Support for component tests for <a href="https://www.npmjs.com/package/create-react-app" target="_blank" rel="noopener noreferrer">create-react-app</a> with components in <code>.js</code> files.</li> </ul> <p>Read more about <a href="test-components.html">component testing with Playwright</a>.</p> <h3 id="miscellaneous-7">Miscellaneous<a href="#miscellaneous-7" aria-label="Direct link to Miscellaneous" title="Direct link to Miscellaneous">​</a>
</h3> <ul> <li> <p>If there's a service worker that's in your way, you can now easily disable it with a new context option <code>serviceWorkers</code>:</p> <pre tabindex="0" data-language="javascript">export default {
  use: {
    serviceWorkers: 'block',
  }
};</pre> </li> <li> <p>Using <code>.zip</code> path for <code>recordHar</code> context option automatically zips the resulting HAR:</p> <pre tabindex="0" data-language="javascript">const context = await browser.newContext({
  recordHar: {
    path: 'github.har.zip',
  }
});</pre> </li> <li> <p>If you intend to edit HAR by hand, consider using the <code>"minimal"</code> HAR recording mode that only records information that is essential for replaying:</p> <pre tabindex="0" data-language="javascript">const context = await browser.newContext({
  recordHar: {
    path: 'github.har',
    mode: 'minimal',
  }
});</pre> </li> <li> <p>Playwright now runs on Ubuntu 22 amd64 and Ubuntu 22 arm64. We also publish new docker image <code>mcr.microsoft.com/playwright:v1.34.0-jammy</code>.</p> </li> </ul> <h3 id="️-breaking-changes-️">⚠️ Breaking Changes ⚠️<a href="#%EF%B8%8F-breaking-changes-%EF%B8%8F" aria-label="Direct link to ⚠️ Breaking Changes ⚠️" title="Direct link to ⚠️ Breaking Changes ⚠️">​</a>
</h3> <p>WebServer is now considered "ready" if request to the specified url has any of the following HTTP status codes:</p> <ul> <li><code>200-299</code></li> <li>
<code>300-399</code> (new)</li> <li>
<code>400</code>, <code>401</code>, <code>402</code>, <code>403</code> (new)</li> </ul> <h2 id="version-122">Version 1.22<a href="#version-122" aria-label="Direct link to Version 1.22" title="Direct link to Version 1.22">​</a>
</h2>  <h3 id="highlights-2">Highlights<a href="#highlights-2" aria-label="Direct link to Highlights" title="Direct link to Highlights">​</a>
</h3> <ul> <li> <p>Components Testing (preview)</p> <p>Playwright Test can now test your <a href="https://reactjs.org/" target="_blank" rel="noopener noreferrer">React</a>, <a href="https://vuejs.org/" target="_blank" rel="noopener noreferrer">Vue.js</a> or <a href="https://svelte.dev/" target="_blank" rel="noopener noreferrer">Svelte</a> components. You can use all the features of Playwright Test (such as parallelization, emulation &amp; debugging) while running components in real browsers.</p> <p>Here is what a typical component test looks like:</p> <pre tabindex="0" data-language="javascript">import { test, expect } from '@playwright/experimental-ct-react';
import App from './App';

// Let's test component in a dark scheme!
test.use({ colorScheme: 'dark' });

test('should render', async ({ mount }) =&gt; {
  const component = await mount(&lt;App&gt;&lt;/App&gt;);

  // As with any Playwright test, assert locator text.
  await expect(component).toContainText('React');
  // Or do a screenshot 🚀
  await expect(component).toHaveScreenshot();
  // Or use any Playwright method
  await component.click();
});</pre> <p>Read more in <a href="test-components.html">our documentation</a>.</p> </li> <li> <p>Role selectors that allow selecting elements by their <a href="https://www.w3.org/TR/wai-aria-1.2/#roles" target="_blank" rel="noopener noreferrer">ARIA role</a>, <a href="https://www.w3.org/TR/wai-aria-1.2/#aria-attributes" target="_blank" rel="noopener noreferrer">ARIA attributes</a> and <a href="https://w3c.github.io/accname/#dfn-accessible-name" target="_blank" rel="noopener noreferrer">accessible name</a>.</p> <pre tabindex="0" data-language="javascript">// Click a button with accessible name "log in"
await page.locator('role=button[name="log in"]').click();</pre> <p>Read more in <a href="locators.html#locate-by-role">our documentation</a>.</p> </li> <li> <p>New <a href="api/class-locator.html#locator-filter">locator.filter()</a> API to filter an existing locator</p> <pre tabindex="0" data-language="javascript">const buttons = page.locator('role=button');
// ...
const submitButton = buttons.filter({ hasText: 'Submit' });
await submitButton.click();</pre> </li> <li> <p>New web-first assertions <a href="api/class-pageassertions.html#page-assertions-to-have-screenshot-1">expect(page).toHaveScreenshot()</a> and <a href="api/class-locatorassertions.html#locator-assertions-to-have-screenshot-1">expect(locator).toHaveScreenshot()</a> that wait for screenshot stabilization and enhances test reliability.</p> <p>The new assertions has screenshot-specific defaults, such as:</p> <ul> <li>disables animations</li> <li>uses CSS scale option</li> </ul> <pre tabindex="0" data-language="javascript">await page.goto('https://playwright.dev');
await expect(page).toHaveScreenshot();</pre> <p>The new <a href="api/class-pageassertions.html#page-assertions-to-have-screenshot-1">expect(page).toHaveScreenshot()</a> saves screenshots at the same location as <a href="api/class-snapshotassertions.html#snapshot-assertions-to-match-snapshot-1">expect(value).toMatchSnapshot()</a>.</p> </li> </ul> <h2 id="version-121">Version 1.21<a href="#version-121" aria-label="Direct link to Version 1.21" title="Direct link to Version 1.21">​</a>
</h2>  <h3 id="highlights-3">Highlights<a href="#highlights-3" aria-label="Direct link to Highlights" title="Direct link to Highlights">​</a>
</h3> <ul> <li> <p>New role selectors that allow selecting elements by their <a href="https://www.w3.org/TR/wai-aria-1.2/#roles" target="_blank" rel="noopener noreferrer">ARIA role</a>, <a href="https://www.w3.org/TR/wai-aria-1.2/#aria-attributes" target="_blank" rel="noopener noreferrer">ARIA attributes</a> and <a href="https://w3c.github.io/accname/#dfn-accessible-name" target="_blank" rel="noopener noreferrer">accessible name</a>.</p> <pre tabindex="0" data-language="javascript">// Click a button with accessible name "log in"
await page.locator('role=button[name="log in"]').click();</pre> <p>Read more in <a href="locators.html#locate-by-role">our documentation</a>.</p> </li> <li> <p>New <code>scale</code> option in <a href="api/class-page.html#page-screenshot">page.screenshot()</a> for smaller sized screenshots.</p> </li> <li> <p>New <code>caret</code> option in <a href="api/class-page.html#page-screenshot">page.screenshot()</a> to control text caret. Defaults to <code>"hide"</code>.</p> </li> <li> <p>New method <code>expect.poll</code> to wait for an arbitrary condition:</p> <pre tabindex="0" data-language="javascript">// Poll the method until it returns an expected result.
await expect.poll(async () =&gt; {
  const response = await page.request.get('https://api.example.com');
  return response.status();
}).toBe(200);</pre> <p><code>expect.poll</code> supports most synchronous matchers, like <code>.toBe()</code>, <code>.toContain()</code>, etc. Read more in <a href="test-assertions.html#expectpoll">our documentation</a>.</p> </li> </ul> <h3 id="behavior-changes-1">Behavior Changes<a href="#behavior-changes-1" aria-label="Direct link to Behavior Changes" title="Direct link to Behavior Changes">​</a>
</h3> <ul> <li>ESM support when running TypeScript tests is now enabled by default. The <code>PLAYWRIGHT_EXPERIMENTAL_TS_ESM</code> env variable is no longer required.</li> <li>The <code>mcr.microsoft.com/playwright</code> docker image no longer contains Python. Please use <code>mcr.microsoft.com/playwright/python</code> as a Playwright-ready docker image with pre-installed Python.</li> <li>Playwright now supports large file uploads (100s of MBs) via <a href="api/class-locator.html#locator-set-input-files">locator.setInputFiles()</a> API.</li> </ul> <h3 id="browser-versions-25">Browser Versions<a href="#browser-versions-25" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 101.0.4951.26</li> <li>Mozilla Firefox 98.0.2</li> <li>WebKit 15.4</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 100</li> <li>Microsoft Edge 100</li> </ul> <h2 id="version-120">Version 1.20<a href="#version-120" aria-label="Direct link to Version 1.20" title="Direct link to Version 1.20">​</a>
</h2>  <h3 id="highlights-4">Highlights<a href="#highlights-4" aria-label="Direct link to Highlights" title="Direct link to Highlights">​</a>
</h3> <ul> <li> <p>New options for methods <a href="api/class-page.html#page-screenshot">page.screenshot()</a>, <a href="api/class-locator.html#locator-screenshot">locator.screenshot()</a> and <a href="api/class-elementhandle.html#element-handle-screenshot">elementHandle.screenshot()</a>:</p> <ul> <li>Option <code>animations: "disabled"</code> rewinds all CSS animations and transitions to a consistent state</li> <li>Option <code>mask: Locator[]</code> masks given elements, overlaying them with pink <code>#FF00FF</code> boxes.</li> </ul> </li> <li> <p><code>expect().toMatchSnapshot()</code> now supports anonymous snapshots: when snapshot name is missing, Playwright Test will generate one automatically:</p> <pre tabindex="0" data-language="javascript">expect('Web is Awesome &lt;3').toMatchSnapshot();</pre> </li> <li> <p>New <code>maxDiffPixels</code> and <code>maxDiffPixelRatio</code> options for fine-grained screenshot comparison using <code>expect().toMatchSnapshot()</code>:</p> <pre tabindex="0" data-language="javascript">expect(await page.screenshot()).toMatchSnapshot({
  maxDiffPixels: 27, // allow no more than 27 different pixels.
});</pre> <p>It is most convenient to specify <code>maxDiffPixels</code> or <code>maxDiffPixelRatio</code> once in <a href="api/class-testconfig.html#test-config-expect">testConfig.expect</a>.</p> </li> <li> <p>Playwright Test now adds <a href="api/class-testconfig.html#test-config-fully-parallel">testConfig.fullyParallel</a> mode. By default, Playwright Test parallelizes between files. In fully parallel mode, tests inside a single file are also run in parallel. You can also use <code>--fully-parallel</code> command line flag.</p> <pre tabindex="0" data-language="javascript">export default {
  fullyParallel: true,
};</pre> </li> <li> <p><a href="api/class-testproject.html#test-project-grep">testProject.grep</a> and <a href="api/class-testproject.html#test-project-grep-invert">testProject.grepInvert</a> are now configurable per project. For example, you can now configure smoke tests project using <code>grep</code>:</p> <pre tabindex="0" data-language="javascript">export default {
  projects: [
    {
      name: 'smoke tests',
      grep: /@smoke/,
    },
  ],
};</pre> </li> <li> <p><a href="trace-viewer.html">Trace Viewer</a> now shows <a href="api-testing.html">API testing requests</a>.</p> </li> <li> <p><a href="api/class-locator.html#locator-highlight">locator.highlight()</a> visually reveals element(s) for easier debugging.</p> </li> </ul> <h3 id="announcements-2">Announcements<a href="#announcements-2" aria-label="Direct link to Announcements" title="Direct link to Announcements">​</a>
</h3> <ul> <li>We now ship a designated Python docker image <code>mcr.microsoft.com/playwright/python</code>. Please switch over to it if you use Python. This is the last release that includes Python inside our javascript <code>mcr.microsoft.com/playwright</code> docker image.</li> <li>v1.20 is the last release to receive WebKit update for macOS 10.15 Catalina. Please update macOS to keep using latest &amp; greatest WebKit!</li> </ul> <h3 id="browser-versions-26">Browser Versions<a href="#browser-versions-26" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 101.0.4921.0</li> <li>Mozilla Firefox 97.0.1</li> <li>WebKit 15.4</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 99</li> <li>Microsoft Edge 99</li> </ul> <h2 id="version-119">Version 1.19<a href="#version-119" aria-label="Direct link to Version 1.19" title="Direct link to Version 1.19">​</a>
</h2>  <h3 id="playwright-test-update">Playwright Test Update<a href="#playwright-test-update" aria-label="Direct link to Playwright Test Update" title="Direct link to Playwright Test Update">​</a>
</h3> <ul> <li> <p>Playwright Test v1.19 now supports <em>soft assertions</em>. Failed soft assertions</p> <p><strong>do not</strong> terminate test execution, but mark the test as failed.</p> <pre tabindex="0" data-language="javascript">// Make a few checks that will not stop the test when failed...
await expect.soft(page.locator('#status')).toHaveText('Success');
await expect.soft(page.locator('#eta')).toHaveText('1 day');

// ... and continue the test to check more things.
await page.locator('#next-page').click();
await expect.soft(page.locator('#title')).toHaveText('Make another order');</pre> <p>Read more in <a href="test-assertions.html#soft-assertions">our documentation</a></p> </li> <li> <p>You can now specify a <strong>custom expect message</strong> as a second argument to the <code>expect</code> and <code>expect.soft</code> functions, for example:</p> <pre tabindex="0" data-language="javascript">await expect(page.locator('text=Name'), 'should be logged in').toBeVisible();</pre> <p>The error would look like this:</p> <pre tabindex="0" data-language="javascript">    Error: should be logged in

    Call log:
      - expect.toBeVisible with timeout 5000ms
      - waiting for "getByText('Name')"


      2 |
      3 | test('example test', async({ page }) =&gt; {
    &gt; 4 |   await expect(page.locator('text=Name'), 'should be logged in').toBeVisible();
        |                                                                  ^
      5 | });
      6 |</pre> <p>Read more in <a href="test-assertions.html#custom-expect-message">our documentation</a></p> </li> <li> <p>By default, tests in a single file are run in order. If you have many independent tests in a single file, you can now run them in parallel with <a href="api/class-test.html#test-describe-configure">test.describe.configure()</a>.</p> </li> </ul> <h3 id="other-updates">Other Updates<a href="#other-updates" aria-label="Direct link to Other Updates" title="Direct link to Other Updates">​</a>
</h3> <ul> <li> <p>Locator now supports a <code>has</code> option that makes sure it contains another locator inside:</p> <pre tabindex="0" data-language="javascript">await page.locator('article', {
  has: page.locator('.highlight'),
}).click();</pre> <p>Read more in <a href="api/class-locator.html#locator-locator">locator documentation</a></p> </li> <li> <p>New <a href="api/class-locator.html#locator-page">locator.page()</a></p> </li> <li> <p><a href="api/class-page.html#page-screenshot">page.screenshot()</a> and <a href="api/class-locator.html#locator-screenshot">locator.screenshot()</a> now automatically hide blinking caret</p> </li> <li> <p>Playwright Codegen now generates locators and frame locators</p> </li> <li> <p>New option <code>url</code> in <a href="api/class-testconfig.html#test-config-web-server">testConfig.webServer</a> to ensure your web server is ready before running the tests</p> </li> <li> <p>New <a href="api/class-testinfo.html#test-info-errors">testInfo.errors</a> and <a href="api/class-testresult.html#test-result-errors">testResult.errors</a> that contain all failed assertions and soft assertions.</p> </li> </ul> <h3 id="potentially-breaking-change-in-playwright-test-global-setup">Potentially breaking change in Playwright Test Global Setup<a href="#potentially-breaking-change-in-playwright-test-global-setup" aria-label="Direct link to Potentially breaking change in Playwright Test Global Setup" title="Direct link to Potentially breaking change in Playwright Test Global Setup">​</a>
</h3> <p>It is unlikely that this change will affect you, no action is required if your tests keep running as they did.</p> <p>We've noticed that in rare cases, the set of tests to be executed was configured in the global setup by means of the environment variables. We also noticed some applications that were post processing the reporters' output in the global teardown. If you are doing one of the two, <a href="https://github.com/microsoft/playwright/issues/12018" target="_blank" rel="noopener noreferrer">learn more</a></p> <h3 id="browser-versions-27">Browser Versions<a href="#browser-versions-27" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 100.0.4863.0</li> <li>Mozilla Firefox 96.0.1</li> <li>WebKit 15.4</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 98</li> <li>Microsoft Edge 98</li> </ul> <h2 id="version-118">Version 1.18<a href="#version-118" aria-label="Direct link to Version 1.18" title="Direct link to Version 1.18">​</a>
</h2>  <h3 id="locator-improvements">Locator Improvements<a href="#locator-improvements" aria-label="Direct link to Locator Improvements" title="Direct link to Locator Improvements">​</a>
</h3> <ul> <li> <p><a href="api/class-locator.html#locator-drag-to">locator.dragTo()</a></p> </li> <li> <p><a href="api/class-locatorassertions.html#locator-assertions-to-be-checked"><code>expect(locator).toBeChecked({ checked })</code></a></p> </li> <li> <p>Each locator can now be optionally filtered by the text it contains:</p> <pre tabindex="0" data-language="javascript">await page.locator('li', { hasText: 'my item' }).locator('button').click();</pre> <p>Read more in <a href="api/class-locator.html#locator-locator">locator documentation</a></p> </li> </ul> <h3 id="testing-api-improvements">Testing API improvements<a href="#testing-api-improvements" aria-label="Direct link to Testing API improvements" title="Direct link to Testing API improvements">​</a>
</h3> <ul> <li><a href="test-assertions.html"><code>expect(response).toBeOK()</code></a></li> <li><a href="api/class-testinfo.html#test-info-attach"><code>testInfo.attach()</code></a></li> <li><a href="api/class-test.html#test-info"><code>test.info()</code></a></li> </ul> <h3 id="improved-typescript-support">Improved TypeScript Support<a href="#improved-typescript-support" aria-label="Direct link to Improved TypeScript Support" title="Direct link to Improved TypeScript Support">​</a>
</h3> <ol> <li>Playwright Test now respects <code>tsconfig.json</code>'s <a href="https://www.typescriptlang.org/tsconfig#baseUrl" target="_blank" rel="noopener noreferrer"><code>baseUrl</code></a> and <a href="https://www.typescriptlang.org/tsconfig#paths" target="_blank" rel="noopener noreferrer"><code>paths</code></a>, so you can use aliases</li> <li>There is a new environment variable <code>PW_EXPERIMENTAL_TS_ESM</code> that allows importing ESM modules in your TS code, without the need for the compile step. Don't forget the <code>.js</code> suffix when you are importing your esm modules. Run your tests as follows:</li> </ol> <pre tabindex="0" data-language="javascript">npm i --save-dev @playwright/test@1.18.0-rc1
PW_EXPERIMENTAL_TS_ESM=1 npx playwright test</pre> <h3 id="create-playwright">Create Playwright<a href="#create-playwright" aria-label="Direct link to Create Playwright" title="Direct link to Create Playwright">​</a>
</h3> <p>The <code>npm init playwright</code> command is now generally available for your use:</p> <pre tabindex="0" data-language="javascript"># Run from your project's root directory
npm init playwright@latest
# Or create a new project
npm init playwright@latest new-project</pre> <p>This will create a Playwright Test configuration file, optionally add examples, a GitHub Action workflow and a first test <code>example.spec.ts</code>.</p> <h3 id="new-apis--changes">New APIs &amp; changes<a href="#new-apis--changes" aria-label="Direct link to New APIs &amp; changes" title="Direct link to New APIs &amp; changes">​</a>
</h3> <ul> <li>new <a href="api/class-testcase.html#test-case-repeat-each-index"><code>testCase.repeatEachIndex</code></a> API</li> <li>
<a href="api/class-browser.html#browser-new-context-option-accept-downloads"><code>acceptDownloads</code></a> option now defaults to <code>true</code>
</li> </ul> <h3 id="breaking-change-custom-config-options">Breaking change: custom config options<a href="#breaking-change-custom-config-options" aria-label="Direct link to Breaking change: custom config options" title="Direct link to Breaking change: custom config options">​</a>
</h3> <p>Custom config options are a convenient way to parametrize projects with different values. Learn more in <a href="test-parameterize.html#parameterized-projects">this guide</a>.</p> <p>Previously, any fixture introduced through <a href="api/class-test.html#test-extend">test.extend()</a> could be overridden in the <a href="api/class-testproject.html#test-project-use">testProject.use</a> config section. For example,</p> <pre tabindex="0" data-language="javascript">// WRONG: THIS SNIPPET DOES NOT WORK SINCE v1.18.

// fixtures.js
const test = base.extend({
  myParameter: 'default',
});

// playwright.config.js
module.exports = {
  use: {
    myParameter: 'value',
  },
};</pre> <p>The proper way to make a fixture parametrized in the config file is to specify <code>option: true</code> when defining the fixture. For example,</p> <pre tabindex="0" data-language="javascript">// CORRECT: THIS SNIPPET WORKS SINCE v1.18.

// fixtures.js
const test = base.extend({
  // Fixtures marked as "option: true" will get a value specified in the config,
  // or fallback to the default value.
  myParameter: ['default', { option: true }],
});

// playwright.config.js
module.exports = {
  use: {
    myParameter: 'value',
  },
};</pre> <h3 id="browser-versions-28">Browser Versions<a href="#browser-versions-28" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 99.0.4812.0</li> <li>Mozilla Firefox 95.0</li> <li>WebKit 15.4</li> </ul> <p>This version was also tested against the following stable channels:</p> <ul> <li>Google Chrome 97</li> <li>Microsoft Edge 97</li> </ul> <h2 id="version-117">Version 1.17<a href="#version-117" aria-label="Direct link to Version 1.17" title="Direct link to Version 1.17">​</a>
</h2>  <h3 id="frame-locators">Frame Locators<a href="#frame-locators" aria-label="Direct link to Frame Locators" title="Direct link to Frame Locators">​</a>
</h3> <p>Playwright 1.17 introduces <a href="api/class-framelocator.html">frame locators</a> - a locator to the iframe on the page. Frame locators capture the logic sufficient to retrieve the <code>iframe</code> and then locate elements in that iframe. Frame locators are strict by default, will wait for <code>iframe</code> to appear and can be used in Web-First assertions.</p> <p><img decoding="async" loading="lazy" src="https://user-images.githubusercontent.com/746130/142082759-2170db38-370d-43ec-8d41-5f9941f57d83.png" alt="Graphics"></p> <p>Frame locators can be created with either <a href="api/class-page.html#page-frame-locator">page.frameLocator()</a> or <a href="api/class-locator.html#locator-frame-locator">locator.frameLocator()</a> method.</p> <pre tabindex="0" data-language="javascript">const locator = page.frameLocator('#my-iframe').locator('text=Submit');
await locator.click();</pre> <p>Read more at <a href="api/class-framelocator.html">our documentation</a>.</p> <h3 id="trace-viewer-update">Trace Viewer Update<a href="#trace-viewer-update" aria-label="Direct link to Trace Viewer Update" title="Direct link to Trace Viewer Update">​</a>
</h3> <p>Playwright Trace Viewer is now <strong>available online</strong> at <a href="https://trace.playwright.dev" target="_blank" rel="noopener noreferrer">https://trace.playwright.dev</a>! Just drag-and-drop your <code>trace.zip</code> file to inspect its contents.</p> <blockquote> <p><strong>NOTE</strong>: trace files are not uploaded anywhere; <a href="https://trace.playwright.dev" target="_blank" rel="noopener noreferrer">trace.playwright.dev</a> is a <a href="https://web.dev/progressive-web-apps/" target="_blank" rel="noopener noreferrer">progressive web application</a> that processes traces locally.</p> </blockquote> <ul> <li>Playwright Test traces now include sources by default (these could be turned off with tracing option)</li> <li>Trace Viewer now shows test name</li> <li>New trace metadata tab with browser details</li> <li>Snapshots now have URL bar</li> </ul> <p><img decoding="async" loading="lazy" src="https://user-images.githubusercontent.com/746130/141877831-29e37cd1-e574-4bd9-aab5-b13a463bb4ae.png" alt="image"></p> <h3 id="html-report-update">HTML Report Update<a href="#html-report-update" aria-label="Direct link to HTML Report Update" title="Direct link to HTML Report Update">​</a>
</h3> <ul> <li>HTML report now supports dynamic filtering</li> <li>Report is now a <strong>single static HTML file</strong> that could be sent by e-mail or as a slack attachment.</li> </ul> <p><img decoding="async" loading="lazy" src="https://user-images.githubusercontent.com/746130/141877402-e486643d-72c7-4db3-8844-ed2072c5d676.png" alt="image"></p> <h3 id="ubuntu-arm64-support--more">Ubuntu ARM64 support + more<a href="#ubuntu-arm64-support--more" aria-label="Direct link to Ubuntu ARM64 support + more" title="Direct link to Ubuntu ARM64 support + more">​</a>
</h3> <ul> <li> <p>Playwright now supports <strong>Ubuntu 20.04 ARM64</strong>. You can now run Playwright tests inside Docker on Apple M1 and on Raspberry Pi.</p> </li> <li> <p>You can now use Playwright to install stable version of Edge on Linux:</p> <pre tabindex="0" data-language="javascript">npx playwright install msedge</pre> </li> </ul> <h3 id="new-apis-12">New APIs<a href="#new-apis-12" aria-label="Direct link to New APIs" title="Direct link to New APIs">​</a>
</h3> <ul> <li>Tracing now supports a <a href="api/class-tracing.html#tracing-start-option-title"><code>'title'</code></a> option</li> <li>Page navigations support a new <a href="api/class-page.html#page-goto"><code>'commit'</code></a> waiting option</li> <li>HTML reporter got <a href="test-reporters.html#html-reporter">new configuration options</a>
</li> <li><a href="api/class-testconfig.html#test-config-snapshot-dir"><code>testConfig.snapshotDir</code> option</a></li> <li><a href="api/class-testinfo.html#test-info-parallel-index"><code>testInfo.parallelIndex</code></a></li> <li><a href="api/class-testinfo.html#test-info-title-path"><code>testInfo.titlePath</code></a></li> <li>
<a href="api/class-testoptions.html#test-options-trace"><code>testOptions.trace</code></a> has new options</li> <li>
<a href="api/class-genericassertions.html"><code>expect.toMatchSnapshot</code></a> supports subdirectories</li> <li><a href="api/class-reporter.html#reporter-prints-to-stdio"><code>reporter.printsToStdio()</code></a></li> </ul> <h2 id="version-116">Version 1.16<a href="#version-116" aria-label="Direct link to Version 1.16" title="Direct link to Version 1.16">​</a>
</h2>  <h3 id="-playwright-test">🎭 Playwright Test<a href="#-playwright-test" aria-label="Direct link to 🎭 Playwright Test" title="Direct link to 🎭 Playwright Test">​</a>
</h3> <h4 id="api-testing">API Testing<a href="#api-testing" aria-label="Direct link to API Testing" title="Direct link to API Testing">​</a>
</h4> <p>Playwright 1.16 introduces new <a href="api/class-apirequestcontext.html">API Testing</a> that lets you send requests to the server directly from Node.js! Now you can:</p> <ul> <li>test your server API</li> <li>prepare server side state before visiting the web application in a test</li> <li>validate server side post-conditions after running some actions in the browser</li> </ul> <p>To do a request on behalf of Playwright's Page, use <strong>new <a href="api/class-page.html#page-request">page.request</a> API</strong>:</p> <pre tabindex="0" data-language="javascript">import { test, expect } from '@playwright/test';

test('context fetch', async ({ page }) =&gt; {
  // Do a GET request on behalf of page
  const response = await page.request.get('http://example.com/foo.json');
  // ...
});</pre> <p>To do a stand-alone request from node.js to an API endpoint, use <strong>new <a href="api/class-fixtures.html#fixtures-request"><code>request</code> fixture</a></strong>:</p> <pre tabindex="0" data-language="javascript">import { test, expect } from '@playwright/test';

test('context fetch', async ({ request }) =&gt; {
  // Do a GET request on behalf of page
  const response = await request.get('http://example.com/foo.json');
  // ...
});</pre> <p>Read more about it in our <a href="api-testing.html">API testing guide</a>.</p> <h4 id="response-interception">Response Interception<a href="#response-interception" aria-label="Direct link to Response Interception" title="Direct link to Response Interception">​</a>
</h4> <p>It is now possible to do response interception by combining <a href="api-testing.html">API Testing</a> with <a href="network.html#modify-requests">request interception</a>.</p> <p>For example, we can blur all the images on the page:</p> <pre tabindex="0" data-language="javascript">import { test, expect } from '@playwright/test';
import jimp from 'jimp'; // image processing library

test('response interception', async ({ page }) =&gt; {
  await page.route('**/*.jpeg', async route =&gt; {
    const response = await page._request.fetch(route.request());
    const image = await jimp.read(await response.body());
    await image.blur(5);
    await route.fulfill({
      response,
      body: await image.getBufferAsync('image/jpeg'),
    });
  });
  const response = await page.goto('https://playwright.dev');
  expect(response.status()).toBe(200);
});</pre> <p>Read more about <a href="network.html#modify-responses">response interception</a>.</p> <h4 id="new-html-reporter">New HTML reporter<a href="#new-html-reporter" aria-label="Direct link to New HTML reporter" title="Direct link to New HTML reporter">​</a>
</h4> <p>Try it out new HTML reporter with either <code>--reporter=html</code> or a <code>reporter</code> entry in <code>playwright.config.ts</code> file:</p> <pre tabindex="0" data-language="javascript">$ npx playwright test --reporter=html</pre> <p>The HTML reporter has all the information about tests and their failures, including surfacing trace and image artifacts.</p> <p><img decoding="async" loading="lazy" src="https://user-images.githubusercontent.com/746130/138324311-94e68b39-b51a-4776-a446-f60037a77f32.png" alt="html reporter"></p> <p>Read more about <a href="test-reporters.html#html-reporter">our reporters</a>.</p> <h3 id="-playwright-library">🎭 Playwright Library<a href="#-playwright-library" aria-label="Direct link to 🎭 Playwright Library" title="Direct link to 🎭 Playwright Library">​</a>
</h3> <h4 id="locatorwaitfor">locator.waitFor<a href="#locatorwaitfor" aria-label="Direct link to locator.waitFor" title="Direct link to locator.waitFor">​</a>
</h4> <p>Wait for a locator to resolve to a single element with a given state. Defaults to the <code>state: 'visible'</code>.</p> <p>Comes especially handy when working with lists:</p> <pre tabindex="0" data-language="javascript">import { test, expect } from '@playwright/test';

test('context fetch', async ({ page }) =&gt; {
  const completeness = page.locator('text=Success');
  await completeness.waitFor();
  expect(await page.screenshot()).toMatchSnapshot('screen.png');
});</pre> <p>Read more about <a href="api/class-locator.html#locator-wait-for">locator.waitFor()</a>.</p> <h3 id="docker-support-for-arm64">Docker support for Arm64<a href="#docker-support-for-arm64" aria-label="Direct link to Docker support for Arm64" title="Direct link to Docker support for Arm64">​</a>
</h3> <p>Playwright Docker image is now published for Arm64 so it can be used on Apple Silicon.</p> <p>Read more about <a href="docker.html">Docker integration</a>.</p> <h3 id="-playwright-trace-viewer">🎭 Playwright Trace Viewer<a href="#-playwright-trace-viewer" aria-label="Direct link to 🎭 Playwright Trace Viewer" title="Direct link to 🎭 Playwright Trace Viewer">​</a>
</h3> <ul> <li>web-first assertions inside trace viewer</li> <li>run trace viewer with <code>npx playwright show-trace</code> and drop trace files to the trace viewer PWA</li> <li>API testing is integrated with trace viewer</li> <li>better visual attribution of action targets</li> </ul> <p>Read more about <a href="trace-viewer.html">Trace Viewer</a>.</p> <h3 id="browser-versions-29">Browser Versions<a href="#browser-versions-29" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 97.0.4666.0</li> <li>Mozilla Firefox 93.0</li> <li>WebKit 15.4</li> </ul> <p>This version of Playwright was also tested against the following stable channels:</p> <ul> <li>Google Chrome 94</li> <li>Microsoft Edge 94</li> </ul> <h2 id="version-115">Version 1.15<a href="#version-115" aria-label="Direct link to Version 1.15" title="Direct link to Version 1.15">​</a>
</h2>  <h3 id="-playwright-library-1">🎭 Playwright Library<a href="#-playwright-library-1" aria-label="Direct link to 🎭 Playwright Library" title="Direct link to 🎭 Playwright Library">​</a>
</h3> <h4 id="️-mouse-wheel">🖱️ Mouse Wheel<a href="#%EF%B8%8F-mouse-wheel" aria-label="Direct link to 🖱️ Mouse Wheel" title="Direct link to 🖱️ Mouse Wheel">​</a>
</h4> <p>By using <a href="api/class-mouse.html#mouse-wheel">mouse.wheel()</a> you are now able to scroll vertically or horizontally.</p> <h4 id="-new-headers-api">📜 New Headers API<a href="#-new-headers-api" aria-label="Direct link to 📜 New Headers API" title="Direct link to 📜 New Headers API">​</a>
</h4> <p>Previously it was not possible to get multiple header values of a response. This is now possible and additional helper functions are available:</p> <ul> <li><a href="api/class-request.html#request-all-headers">request.allHeaders()</a></li> <li><a href="api/class-request.html#request-headers-array">request.headersArray()</a></li> <li><a href="api/class-request.html#request-header-value">request.headerValue()</a></li> <li><a href="api/class-response.html#response-all-headers">response.allHeaders()</a></li> <li><a href="api/class-response.html#response-headers-array">response.headersArray()</a></li> <li><a href="api/class-response.html#response-header-value">response.headerValue()</a></li> <li><a href="api/class-response.html#response-header-values">response.headerValues()</a></li> </ul> <h4 id="-forced-colors-emulation">🌈 Forced-Colors emulation<a href="#-forced-colors-emulation" aria-label="Direct link to 🌈 Forced-Colors emulation" title="Direct link to 🌈 Forced-Colors emulation">​</a>
</h4> <p>Its now possible to emulate the <code>forced-colors</code> CSS media feature by passing it in the <a href="api/class-browser.html#browser-new-context">browser.newContext()</a> or calling <a href="api/class-page.html#page-emulate-media">page.emulateMedia()</a>.</p> <h4 id="new-apis-13">New APIs<a href="#new-apis-13" aria-label="Direct link to New APIs" title="Direct link to New APIs">​</a>
</h4> <ul> <li>
<a href="api/class-page.html#page-route">page.route()</a> accepts new <code>times</code> option to specify how many times this route should be matched.</li> <li>
<a href="api/class-page.html#page-set-checked">page.setChecked()</a> and <a href="api/class-locator.html#locator-set-checked">locator.setChecked()</a> were introduced to set the checked state of a checkbox.</li> <li>
<a href="api/class-request.html#request-sizes">request.sizes()</a> Returns resource size information for given http request.</li> <li>
<a href="api/class-tracing.html#tracing-start-chunk">tracing.startChunk()</a> - Start a new trace chunk.</li> <li>
<a href="api/class-tracing.html#tracing-stop-chunk">tracing.stopChunk()</a> - Stops a new trace chunk.</li> </ul> <h3 id="-playwright-test-1">🎭 Playwright Test<a href="#-playwright-test-1" aria-label="Direct link to 🎭 Playwright Test" title="Direct link to 🎭 Playwright Test">​</a>
</h3> <h4 id="-testparallel-run-tests-in-the-same-file-in-parallel">🤝 <code>test.parallel()</code> run tests in the same file in parallel<a href="#-testparallel-run-tests-in-the-same-file-in-parallel" aria-label="Direct link to -testparallel-run-tests-in-the-same-file-in-parallel" title="Direct link to -testparallel-run-tests-in-the-same-file-in-parallel">​</a>
</h4> <pre tabindex="0" data-language="javascript">test.describe.parallel('group', () =&gt; {
  test('runs in parallel 1', async ({ page }) =&gt; {
  });
  test('runs in parallel 2', async ({ page }) =&gt; {
  });
});</pre> <p>By default, tests in a single file are run in order. If you have many independent tests in a single file, you can now run them in parallel with <a href="api/class-test.html#test-describe-parallel">test.describe.parallel(title, callback)</a>.</p> <h4 id="-add---debug-cli-flag">🛠 Add <code>--debug</code> CLI flag<a href="#-add---debug-cli-flag" aria-label="Direct link to -add---debug-cli-flag" title="Direct link to -add---debug-cli-flag">​</a>
</h4> <p>By using <code>npx playwright test --debug</code> it will enable the <a href="debug.html#playwright-inspector">Playwright Inspector</a> for you to debug your tests.</p> <h3 id="browser-versions-30">Browser Versions<a href="#browser-versions-30" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 96.0.4641.0</li> <li>Mozilla Firefox 92.0</li> <li>WebKit 15.0</li> </ul> <h2 id="version-114">Version 1.14<a href="#version-114" aria-label="Direct link to Version 1.14" title="Direct link to Version 1.14">​</a>
</h2>  <h3 id="-playwright-library-2">🎭 Playwright Library<a href="#-playwright-library-2" aria-label="Direct link to 🎭 Playwright Library" title="Direct link to 🎭 Playwright Library">​</a>
</h3> <h4 id="️-new-strict-mode">⚡️ New "strict" mode<a href="#%EF%B8%8F-new-strict-mode" aria-label='Direct link to ⚡️ New "strict" mode' title='Direct link to ⚡️ New "strict" mode'>​</a>
</h4> <p>Selector ambiguity is a common problem in automation testing. <strong>"strict" mode</strong> ensures that your selector points to a single element and throws otherwise.</p> <p>Pass <code>strict: true</code> into your action calls to opt in.</p> <pre tabindex="0" data-language="javascript">// This will throw if you have more than one button!
await page.click('button', { strict: true });</pre> <h4 id="-new-locators-api">📍 New <a href="api/class-locator.html"><strong>Locators API</strong></a><a href="#-new-locators-api" aria-label="Direct link to -new-locators-api" title="Direct link to -new-locators-api">​</a>
</h4> <p>Locator represents a view to the element(s) on the page. It captures the logic sufficient to retrieve the element at any given moment.</p> <p>The difference between the <a href="api/class-locator.html">Locator</a> and <a href="api/class-elementhandle.html">ElementHandle</a> is that the latter points to a particular element, while <a href="api/class-locator.html">Locator</a> captures the logic of how to retrieve that element.</p> <p>Also, locators are <strong>"strict" by default</strong>!</p> <pre tabindex="0" data-language="javascript">const locator = page.locator('button');
await locator.click();</pre> <p>Learn more in the <a href="api/class-locator.html">documentation</a>.</p> <h4 id="-experimental-react-and-vue-selector-engines">🧩 Experimental <a href="other-locators.html#react-locator"><strong>React</strong></a> and <a href="other-locators.html#vue-locator"><strong>Vue</strong></a> selector engines<a href="#-experimental-react-and-vue-selector-engines" aria-label="Direct link to -experimental-react-and-vue-selector-engines" title="Direct link to -experimental-react-and-vue-selector-engines">​</a>
</h4> <p>React and Vue selectors allow selecting elements by its component name and/or property values. The syntax is very similar to <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Attribute_selectors" target="_blank" rel="noopener noreferrer">attribute selectors</a> and supports all attribute selector operators.</p> <pre tabindex="0" data-language="javascript">await page.locator('_react=SubmitButton[enabled=true]').click();
await page.locator('_vue=submit-button[enabled=true]').click();</pre> <p>Learn more in the <a href="other-locators.html#react-locator">react selectors documentation</a> and the <a href="other-locators.html#vue-locator">vue selectors documentation</a>.</p> <h4 id="-new-nth-and-visible-selector-engines">✨ New <a href="other-locators.html#n-th-element-locator"><strong><code>nth</code></strong></a> and <a href="other-locators.html#css-matching-only-visible-elements"><strong><code>visible</code></strong></a> selector engines<a href="#-new-nth-and-visible-selector-engines" aria-label="Direct link to -new-nth-and-visible-selector-engines" title="Direct link to -new-nth-and-visible-selector-engines">​</a>
</h4> <ul> <li>
<a href="other-locators.html#n-th-element-locator"><code>nth</code></a> selector engine is equivalent to the <code>:nth-match</code> pseudo class, but could be combined with other selector engines.</li> <li>
<a href="other-locators.html#css-matching-only-visible-elements"><code>visible</code></a> selector engine is equivalent to the <code>:visible</code> pseudo class, but could be combined with other selector engines.</li> </ul> <pre tabindex="0" data-language="javascript">// select the first button among all buttons
await button.click('button &gt;&gt; nth=0');
// or if you are using locators, you can use first(), nth() and last()
await page.locator('button').first().click();

// click a visible button
await button.click('button &gt;&gt; visible=true');</pre> <h3 id="-playwright-test-2">🎭 Playwright Test<a href="#-playwright-test-2" aria-label="Direct link to 🎭 Playwright Test" title="Direct link to 🎭 Playwright Test">​</a>
</h3> <h4 id="-web-first-assertions">✅ Web-First Assertions<a href="#-web-first-assertions" aria-label="Direct link to ✅ Web-First Assertions" title="Direct link to ✅ Web-First Assertions">​</a>
</h4> <p><code>expect</code> now supports lots of new web-first assertions.</p> <p>Consider the following example:</p> <pre tabindex="0" data-language="javascript">await expect(page.locator('.status')).toHaveText('Submitted');</pre> <p>Playwright Test will be re-testing the node with the selector <code>.status</code> until fetched Node has the <code>"Submitted"</code> text. It will be re-fetching the node and checking it over and over, until the condition is met or until the timeout is reached. You can either pass this timeout or configure it once via the <a href="api/class-testproject.html#test-project-expect"><code>testProject.expect</code></a> value in test config.</p> <p>By default, the timeout for assertions is not set, so it'll wait forever, until the whole test times out.</p> <p>List of all new assertions:</p> <ul> <li><a href="api/class-locatorassertions.html#locator-assertions-to-be-checked"><code>expect(locator).toBeChecked()</code></a></li> <li><a href="api/class-locatorassertions.html#locator-assertions-to-be-disabled"><code>expect(locator).toBeDisabled()</code></a></li> <li><a href="api/class-locatorassertions.html#locator-assertions-to-be-editable"><code>expect(locator).toBeEditable()</code></a></li> <li><a href="api/class-locatorassertions.html#locator-assertions-to-be-empty"><code>expect(locator).toBeEmpty()</code></a></li> <li><a href="api/class-locatorassertions.html#locator-assertions-to-be-enabled"><code>expect(locator).toBeEnabled()</code></a></li> <li><a href="api/class-locatorassertions.html#locator-assertions-to-be-focused"><code>expect(locator).toBeFocused()</code></a></li> <li><a href="api/class-locatorassertions.html#locator-assertions-to-be-hidden"><code>expect(locator).toBeHidden()</code></a></li> <li><a href="api/class-locatorassertions.html#locator-assertions-to-be-visible"><code>expect(locator).toBeVisible()</code></a></li> <li><a href="api/class-locatorassertions.html#locator-assertions-to-contain-text"><code>expect(locator).toContainText(text, options?)</code></a></li> <li><a href="api/class-locatorassertions.html#locator-assertions-to-have-attribute"><code>expect(locator).toHaveAttribute(name, value)</code></a></li> <li><a href="api/class-locatorassertions.html#locator-assertions-to-have-class"><code>expect(locator).toHaveClass(expected)</code></a></li> <li><a href="api/class-locatorassertions.html#locator-assertions-to-have-count"><code>expect(locator).toHaveCount(count)</code></a></li> <li><a href="api/class-locatorassertions.html#locator-assertions-to-have-css"><code>expect(locator).toHaveCSS(name, value)</code></a></li> <li><a href="api/class-locatorassertions.html#locator-assertions-to-have-id"><code>expect(locator).toHaveId(id)</code></a></li> <li><a href="api/class-locatorassertions.html#locator-assertions-to-have-js-property"><code>expect(locator).toHaveJSProperty(name, value)</code></a></li> <li><a href="api/class-locatorassertions.html#locator-assertions-to-have-text"><code>expect(locator).toHaveText(expected, options)</code></a></li> <li><a href="api/class-pageassertions.html#page-assertions-to-have-title"><code>expect(page).toHaveTitle(title)</code></a></li> <li><a href="api/class-pageassertions.html#page-assertions-to-have-url"><code>expect(page).toHaveURL(url)</code></a></li> <li><a href="api/class-locatorassertions.html#locator-assertions-to-have-value"><code>expect(locator).toHaveValue(value)</code></a></li> </ul> <h4 id="-serial-mode-with-describeserial">⛓ Serial mode with <a href="api/class-test.html#test-describe-serial"><code>describe.serial</code></a><a href="#-serial-mode-with-describeserial" aria-label="Direct link to -serial-mode-with-describeserial" title="Direct link to -serial-mode-with-describeserial">​</a>
</h4> <p>Declares a group of tests that should always be run serially. If one of the tests fails, all subsequent tests are skipped. All tests in a group are retried together.</p> <pre tabindex="0" data-language="javascript">test.describe.serial('group', () =&gt; {
  test('runs first', async ({ page }) =&gt; { /* ... */ });
  test('runs second', async ({ page }) =&gt; { /* ... */ });
});</pre> <p>Learn more in the <a href="api/class-test.html#test-describe-serial">documentation</a>.</p> <h4 id="-steps-api-with-teststep">🐾 Steps API with <a href="api/class-test.html#test-step"><code>test.step</code></a><a href="#-steps-api-with-teststep" aria-label="Direct link to -steps-api-with-teststep" title="Direct link to -steps-api-with-teststep">​</a>
</h4> <p>Split long tests into multiple steps using <code>test.step()</code> API:</p> <pre tabindex="0" data-language="javascript">import { test, expect } from '@playwright/test';

test('test', async ({ page }) =&gt; {
  await test.step('Log in', async () =&gt; {
    // ...
  });
  await test.step('news feed', async () =&gt; {
    // ...
  });
});</pre> <p>Step information is exposed in reporters API.</p> <h4 id="-launch-web-server-before-running-tests">🌎 Launch web server before running tests<a href="#-launch-web-server-before-running-tests" aria-label="Direct link to 🌎 Launch web server before running tests" title="Direct link to 🌎 Launch web server before running tests">​</a>
</h4> <p>To launch a server during the tests, use the <a href="test-webserver.html"><code>webServer</code></a> option in the configuration file. The server will wait for a given url to be available before running the tests, and the url will be passed over to Playwright as a <a href="api/class-testoptions.html#test-options-base-url"><code>baseURL</code></a> when creating a context.</p> <pre tabindex="0" data-language="javascript">import { defineConfig } from '@playwright/test';
export default defineConfig({
  webServer: {
    command: 'npm run start', // command to launch
    url: 'http://127.0.0.1:3000', // url to await for
    timeout: 120 * 1000,
    reuseExistingServer: !process.env.CI,
  },
});</pre> <p>Learn more in the <a href="test-webserver.html">documentation</a>.</p> <h3 id="browser-versions-31">Browser Versions<a href="#browser-versions-31" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h3> <ul> <li>Chromium 94.0.4595.0</li> <li>Mozilla Firefox 91.0</li> <li>WebKit 15.0</li> </ul> <h2 id="version-113">Version 1.13<a href="#version-113" aria-label="Direct link to Version 1.13" title="Direct link to Version 1.13">​</a>
</h2> <h4 id="playwright-test">Playwright Test<a href="#playwright-test" aria-label="Direct link to Playwright Test" title="Direct link to Playwright Test">​</a>
</h4> <ul> <li>
<strong>⚡️ Introducing <a href="https://github.com/microsoft/playwright/blob/65a9037461ffc15d70cdc2055832a0c5512b227c/packages/playwright-test/types/testReporter.d.ts" target="_blank" rel="noopener noreferrer">Reporter API</a></strong> which is already used to create an <a href="https://github.com/allure-framework/allure-js/pull/297" target="_blank" rel="noopener noreferrer">Allure Playwright reporter</a>.</li> <li>
<strong>⛺️ New <a href="test-configuration.html#basic-configuration"><code>baseURL</code> fixture</a></strong> to support relative paths in tests.</li> </ul> <h4 id="playwright">Playwright<a href="#playwright" aria-label="Direct link to Playwright" title="Direct link to Playwright">​</a>
</h4> <ul> <li>
<strong>🖖 Programmatic drag-and-drop support</strong> via the <a href="api/class-page.html#page-drag-and-drop">page.dragAndDrop()</a> API.</li> <li>
<strong>🔎 Enhanced HAR</strong> with body sizes for requests and responses. Use via <code>recordHar</code> option in <a href="api/class-browser.html#browser-new-context">browser.newContext()</a>.</li> </ul> <h4 id="tools">Tools<a href="#tools" aria-label="Direct link to Tools" title="Direct link to Tools">​</a>
</h4> <ul> <li>Playwright Trace Viewer now shows parameters, returned values and <code>console.log()</code> calls.</li> <li>Playwright Inspector can generate Playwright Test tests.</li> </ul> <h4 id="new-and-overhauled-guides">New and Overhauled Guides<a href="#new-and-overhauled-guides" aria-label="Direct link to New and Overhauled Guides" title="Direct link to New and Overhauled Guides">​</a>
</h4> <ul> <li><a href="index.html">Intro</a></li> <li><a href="auth.html">Authentication</a></li> <li><a href="chrome-extensions.html">Chrome Extensions</a></li> <li><a href="test-annotations.html">Playwright Test Annotations</a></li> <li><a href="test-configuration.html">Playwright Test Configuration</a></li> <li><a href="test-fixtures.html">Playwright Test Fixtures</a></li> </ul> <h4 id="browser-versions-32">Browser Versions<a href="#browser-versions-32" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h4> <ul> <li>Chromium 93.0.4576.0</li> <li>Mozilla Firefox 90.0</li> <li>WebKit 14.2</li> </ul> <h4 id="new-playwright-apis">New Playwright APIs<a href="#new-playwright-apis" aria-label="Direct link to New Playwright APIs" title="Direct link to New Playwright APIs">​</a>
</h4> <ul> <li>new <code>baseURL</code> option in <a href="api/class-browser.html#browser-new-context">browser.newContext()</a> and <a href="api/class-browser.html#browser-new-page">browser.newPage()</a>
</li> <li>
<a href="api/class-response.html#response-security-details">response.securityDetails()</a> and <a href="api/class-response.html#response-server-addr">response.serverAddr()</a>
</li> <li>
<a href="api/class-page.html#page-drag-and-drop">page.dragAndDrop()</a> and <a href="api/class-frame.html#frame-drag-and-drop">frame.dragAndDrop()</a>
</li> <li><a href="api/class-download.html#download-cancel">download.cancel()</a></li> <li>
<a href="api/class-page.html#page-input-value">page.inputValue()</a>, <a href="api/class-frame.html#frame-input-value">frame.inputValue()</a> and <a href="api/class-elementhandle.html#element-handle-input-value">elementHandle.inputValue()</a>
</li> <li>new <code>force</code> option in <a href="api/class-page.html#page-fill">page.fill()</a>, <a href="api/class-frame.html#frame-fill">frame.fill()</a>, and <a href="api/class-elementhandle.html#element-handle-fill">elementHandle.fill()</a>
</li> <li>new <code>force</code> option in <a href="api/class-page.html#page-select-option">page.selectOption()</a>, <a href="api/class-frame.html#frame-select-option">frame.selectOption()</a>, and <a href="api/class-elementhandle.html#element-handle-select-option">elementHandle.selectOption()</a>
</li> </ul> <h2 id="version-112">Version 1.12<a href="#version-112" aria-label="Direct link to Version 1.12" title="Direct link to Version 1.12">​</a>
</h2> <h4 id="️-introducing-playwright-test">⚡️ Introducing Playwright Test<a href="#%EF%B8%8F-introducing-playwright-test" aria-label="Direct link to ⚡️ Introducing Playwright Test" title="Direct link to ⚡️ Introducing Playwright Test">​</a>
</h4> <p><a href="index.html">Playwright Test</a> is a <strong>new test runner</strong> built from scratch by Playwright team specifically to accommodate end-to-end testing needs:</p> <ul> <li>Run tests across all browsers.</li> <li>Execute tests in parallel.</li> <li>Enjoy context isolation and sensible defaults out of the box.</li> <li>Capture videos, screenshots and other artifacts on failure.</li> <li>Integrate your POMs as extensible fixtures.</li> </ul> <p>Installation:</p> <pre tabindex="0" data-language="javascript">npm i -D @playwright/test</pre> <p>Simple test <code>tests/foo.spec.ts</code>:</p> <pre tabindex="0" data-language="javascript">import { test, expect } from '@playwright/test';

test('basic test', async ({ page }) =&gt; {
  await page.goto('https://playwright.dev/');
  const name = await page.innerText('.navbar__title');
  expect(name).toBe('Playwright');
});</pre> <p>Running:</p> <pre tabindex="0" data-language="javascript">npx playwright test</pre> <p>👉 Read more in <a href="index.html">Playwright Test documentation</a>.</p> <h4 id="️-introducing-playwright-trace-viewer">🧟‍♂️ Introducing Playwright Trace Viewer<a href="#%EF%B8%8F-introducing-playwright-trace-viewer" aria-label="Direct link to 🧟‍♂️ Introducing Playwright Trace Viewer" title="Direct link to 🧟‍♂️ Introducing Playwright Trace Viewer">​</a>
</h4> <p><a href="trace-viewer.html">Playwright Trace Viewer</a> is a new GUI tool that helps exploring recorded Playwright traces after the script ran. Playwright traces let you examine:</p> <ul> <li>page DOM before and after each Playwright action</li> <li>page rendering before and after each Playwright action</li> <li>browser network during script execution</li> </ul> <p>Traces are recorded using the new <a href="api/class-browsercontext.html#browser-context-tracing">browserContext.tracing</a> API:</p> <pre tabindex="0" data-language="javascript">const browser = await chromium.launch();
const context = await browser.newContext();

// Start tracing before creating / navigating a page.
await context.tracing.start({ screenshots: true, snapshots: true });

const page = await context.newPage();
await page.goto('https://playwright.dev');

// Stop tracing and export it into a zip archive.
await context.tracing.stop({ path: 'trace.zip' });</pre> <p>Traces are examined later with the Playwright CLI:</p> <pre tabindex="0" data-language="javascript">npx playwright show-trace trace.zip</pre> <p>That will open the following GUI:</p> <p><img decoding="async" loading="lazy" src="https://user-images.githubusercontent.com/746130/121109654-d66c4480-c7c0-11eb-8d4d-eb70d2b03811.png" alt="image"></p> <p>👉 Read more in <a href="trace-viewer.html">trace viewer documentation</a>.</p> <h4 id="browser-versions-33">Browser Versions<a href="#browser-versions-33" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h4> <ul> <li>Chromium 93.0.4530.0</li> <li>Mozilla Firefox 89.0</li> <li>WebKit 14.2</li> </ul> <p>This version of Playwright was also tested against the following stable channels:</p> <ul> <li>Google Chrome 91</li> <li>Microsoft Edge 91</li> </ul> <h4 id="new-apis-14">New APIs<a href="#new-apis-14" aria-label="Direct link to New APIs" title="Direct link to New APIs">​</a>
</h4> <ul> <li>
<code>reducedMotion</code> option in <a href="api/class-page.html#page-emulate-media">page.emulateMedia()</a>, <a href="api/class-browsertype.html#browser-type-launch-persistent-context">browserType.launchPersistentContext()</a>, <a href="api/class-browser.html#browser-new-context">browser.newContext()</a> and <a href="api/class-browser.html#browser-new-page">browser.newPage()</a>
</li> <li><a href="api/class-browsercontext.html#browser-context-event-request">browserContext.on('request')</a></li> <li><a href="api/class-browsercontext.html#browser-context-event-request-failed">browserContext.on('requestfailed')</a></li> <li><a href="api/class-browsercontext.html#browser-context-event-request-finished">browserContext.on('requestfinished')</a></li> <li><a href="api/class-browsercontext.html#browser-context-event-response">browserContext.on('response')</a></li> <li>
<code>tracesDir</code> option in <a href="api/class-browsertype.html#browser-type-launch">browserType.launch()</a> and <a href="api/class-browsertype.html#browser-type-launch-persistent-context">browserType.launchPersistentContext()</a>
</li> <li>new <a href="api/class-browsercontext.html#browser-context-tracing">browserContext.tracing</a> API namespace</li> <li>new <a href="api/class-download.html#download-page">download.page()</a> method</li> </ul> <h2 id="version-111">Version 1.11<a href="#version-111" aria-label="Direct link to Version 1.11" title="Direct link to Version 1.11">​</a>
</h2> <p>🎥 New video: <a href="https://youtu.be/_Jla6DyuEu4" target="_blank" rel="noopener noreferrer">Playwright: A New Test Automation Framework for the Modern Web</a> (<a href="https://docs.google.com/presentation/d/1xFhZIJrdHkVe2CuMKOrni92HoG2SWslo0DhJJQMR1DI/edit?usp=sharing" target="_blank" rel="noopener noreferrer">slides</a>)</p> <ul> <li>We talked about Playwright</li> <li>Showed engineering work behind the scenes</li> <li>Did live demos with new features ✨</li> <li>
<strong>Special thanks</strong> to <a href="http://applitools.com/" target="_blank" rel="noopener noreferrer">applitools</a> for hosting the event and inviting us!</li> </ul> <h4 id="browser-versions-34">Browser Versions<a href="#browser-versions-34" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h4> <ul> <li>Chromium 92.0.4498.0</li> <li>Mozilla Firefox 89.0b6</li> <li>WebKit 14.2</li> </ul> <h4 id="new-apis-15">New APIs<a href="#new-apis-15" aria-label="Direct link to New APIs" title="Direct link to New APIs">​</a>
</h4> <ul> <li>support for <strong>async predicates</strong> across the API in methods such as <a href="api/class-page.html#page-wait-for-request">page.waitForRequest()</a> and others</li> <li>new <strong>emulation devices</strong>: Galaxy S8, Galaxy S9+, Galaxy Tab S4, Pixel 3, Pixel 4</li> <li>new methods: <ul> <li>
<a href="api/class-page.html#page-wait-for-url">page.waitForURL()</a> to await navigations to URL</li> <li>
<a href="api/class-video.html#video-delete">video.delete()</a> and <a href="api/class-video.html#video-save-as">video.saveAs()</a> to manage screen recording</li> </ul> </li> <li>new options: <ul> <li>
<code>screen</code> option in the <a href="api/class-browser.html#browser-new-context">browser.newContext()</a> method to emulate <code>window.screen</code> dimensions</li> <li>
<code>position</code> option in <a href="api/class-page.html#page-check">page.check()</a> and <a href="api/class-page.html#page-uncheck">page.uncheck()</a> methods</li> <li>
<code>trial</code> option to dry-run actions in <a href="api/class-page.html#page-check">page.check()</a>, <a href="api/class-page.html#page-uncheck">page.uncheck()</a>, <a href="api/class-page.html#page-click">page.click()</a>, <a href="api/class-page.html#page-dblclick">page.dblclick()</a>, <a href="api/class-page.html#page-hover">page.hover()</a> and <a href="api/class-page.html#page-tap">page.tap()</a>
</li> </ul> </li> </ul> <h2 id="version-110">Version 1.10<a href="#version-110" aria-label="Direct link to Version 1.10" title="Direct link to Version 1.10">​</a>
</h2> <ul> <li>
<a href="https://github.com/microsoft/playwright-java" target="_blank" rel="noopener noreferrer">Playwright for Java v1.10</a> is <strong>now stable</strong>!</li> <li>Run Playwright against <strong>Google Chrome</strong> and <strong>Microsoft Edge</strong> stable channels with the <a href="browsers.html">new channels API</a>.</li> <li>Chromium screenshots are <strong>fast</strong> on Mac &amp; Windows.</li> </ul> <h4 id="bundled-browser-versions">Bundled Browser Versions<a href="#bundled-browser-versions" aria-label="Direct link to Bundled Browser Versions" title="Direct link to Bundled Browser Versions">​</a>
</h4> <ul> <li>Chromium 90.0.4430.0</li> <li>Mozilla Firefox 87.0b10</li> <li>WebKit 14.2</li> </ul> <p>This version of Playwright was also tested against the following stable channels:</p> <ul> <li>Google Chrome 89</li> <li>Microsoft Edge 89</li> </ul> <h4 id="new-apis-16">New APIs<a href="#new-apis-16" aria-label="Direct link to New APIs" title="Direct link to New APIs">​</a>
</h4> <ul> <li>
<a href="api/class-browsertype.html#browser-type-launch">browserType.launch()</a> now accepts the new <code>'channel'</code> option. Read more in <a href="browsers.html">our documentation</a>.</li> </ul> <h2 id="version-19">Version 1.9<a href="#version-19" aria-label="Direct link to Version 1.9" title="Direct link to Version 1.9">​</a>
</h2> <ul> <li>
<a href="debug.html">Playwright Inspector</a> is a <strong>new GUI tool</strong> to author and debug your tests. <ul> <li>
<strong>Line-by-line debugging</strong> of your Playwright scripts, with play, pause and step-through.</li> <li>Author new scripts by <strong>recording user actions</strong>.</li> <li>
<strong>Generate element selectors</strong> for your script by hovering over elements.</li> <li>Set the <code>PWDEBUG=1</code> environment variable to launch the Inspector</li> </ul> </li> <li>
<strong>Pause script execution</strong> with <a href="api/class-page.html#page-pause">page.pause()</a> in headed mode. Pausing the page launches <a href="debug.html">Playwright Inspector</a> for debugging.</li> <li>
<strong>New has-text pseudo-class</strong> for CSS selectors. <code>:has-text("example")</code> matches any element containing <code>"example"</code> somewhere inside, possibly in a child or a descendant element. See <a href="other-locators.html#css-matching-by-text">more examples</a>.</li> <li>
<strong>Page dialogs are now auto-dismissed</strong> during execution, unless a listener for <code>dialog</code> event is configured. <a href="dialogs.html">Learn more</a> about this.</li> <li>
<a href="https://github.com/microsoft/playwright-python" target="_blank" rel="noopener noreferrer">Playwright for Python</a> is <strong>now stable</strong> with an idiomatic snake case API and pre-built <a href="docker.html">Docker image</a> to run tests in CI/CD.</li> </ul> <h4 id="browser-versions-35">Browser Versions<a href="#browser-versions-35" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h4> <ul> <li>Chromium 90.0.4421.0</li> <li>Mozilla Firefox 86.0b10</li> <li>WebKit 14.1</li> </ul> <h4 id="new-apis-17">New APIs<a href="#new-apis-17" aria-label="Direct link to New APIs" title="Direct link to New APIs">​</a>
</h4> <ul> <li>
<a href="api/class-page.html#page-pause">page.pause()</a>.</li> </ul> <h2 id="version-18">Version 1.8<a href="#version-18" aria-label="Direct link to Version 1.8" title="Direct link to Version 1.8">​</a>
</h2> <ul> <li> <p><a href="other-locators.html#css-matching-elements-based-on-layout">Selecting elements based on layout</a> with <code>:left-of()</code>, <code>:right-of()</code>, <code>:above()</code> and <code>:below()</code>.</p> </li> <li> <p>Playwright now includes <a href="test-cli.html">command line interface</a>, former playwright-cli.</p> <pre tabindex="0" data-language="javascript">npx playwright --help</pre> </li> <li> <p><a href="api/class-page.html#page-select-option">page.selectOption()</a> now waits for the options to be present.</p> </li> <li> <p>New methods to <a href="actionability.html#assertions">assert element state</a> like <a href="api/class-page.html#page-is-editable">page.isEditable()</a>.</p> </li> </ul> <h4 id="new-apis-18">New APIs<a href="#new-apis-18" aria-label="Direct link to New APIs" title="Direct link to New APIs">​</a>
</h4> <ul> <li>
<a href="api/class-elementhandle.html#element-handle-is-checked">elementHandle.isChecked()</a>.</li> <li>
<a href="api/class-elementhandle.html#element-handle-is-disabled">elementHandle.isDisabled()</a>.</li> <li>
<a href="api/class-elementhandle.html#element-handle-is-editable">elementHandle.isEditable()</a>.</li> <li>
<a href="api/class-elementhandle.html#element-handle-is-enabled">elementHandle.isEnabled()</a>.</li> <li>
<a href="api/class-elementhandle.html#element-handle-is-hidden">elementHandle.isHidden()</a>.</li> <li>
<a href="api/class-elementhandle.html#element-handle-is-visible">elementHandle.isVisible()</a>.</li> <li>
<a href="api/class-page.html#page-is-checked">page.isChecked()</a>.</li> <li>
<a href="api/class-page.html#page-is-disabled">page.isDisabled()</a>.</li> <li>
<a href="api/class-page.html#page-is-editable">page.isEditable()</a>.</li> <li>
<a href="api/class-page.html#page-is-enabled">page.isEnabled()</a>.</li> <li>
<a href="api/class-page.html#page-is-hidden">page.isHidden()</a>.</li> <li>
<a href="api/class-page.html#page-is-visible">page.isVisible()</a>.</li> <li>New option <code>'editable'</code> in <a href="api/class-elementhandle.html#element-handle-wait-for-element-state">elementHandle.waitForElementState()</a>.</li> </ul> <h4 id="browser-versions-36">Browser Versions<a href="#browser-versions-36" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h4> <ul> <li>Chromium 90.0.4392.0</li> <li>Mozilla Firefox 85.0b5</li> <li>WebKit 14.1</li> </ul> <h2 id="version-17">Version 1.7<a href="#version-17" aria-label="Direct link to Version 1.7" title="Direct link to Version 1.7">​</a>
</h2> <ul> <li>
<strong>New Java SDK</strong>: <a href="https://github.com/microsoft/playwright-java" target="_blank" rel="noopener noreferrer">Playwright for Java</a> is now on par with <a href="https://github.com/microsoft/playwright" target="_blank" rel="noopener noreferrer">JavaScript</a>, <a href="https://github.com/microsoft/playwright-python" target="_blank" rel="noopener noreferrer">Python</a> and <a href="https://github.com/microsoft/playwright-dotnet" target="_blank" rel="noopener noreferrer">.NET bindings</a>.</li> <li>
<strong>Browser storage API</strong>: New convenience APIs to save and load browser storage state (cookies, local storage) to simplify automation scenarios with authentication.</li> <li>
<strong>New CSS selectors</strong>: We heard your feedback for more flexible selectors and have revamped the selectors implementation. Playwright 1.7 introduces <a href="other-locators.html#css-locator">new CSS extensions</a> and there's more coming soon.</li> <li>
<strong>New website</strong>: The docs website at <a href="https://playwright.dev/" target="_blank" rel="noopener noreferrer">playwright.dev</a> has been updated and is now built with <a href="https://v2.docusaurus.io/" target="_blank" rel="noopener noreferrer">Docusaurus</a>.</li> <li>
<strong>Support for Apple Silicon</strong>: Playwright browser binaries for WebKit and Chromium are now built for Apple Silicon.</li> </ul> <h4 id="new-apis-19">New APIs<a href="#new-apis-19" aria-label="Direct link to New APIs" title="Direct link to New APIs">​</a>
</h4> <ul> <li>
<a href="api/class-browsercontext.html#browser-context-storage-state">browserContext.storageState()</a> to get current state for later reuse.</li> <li>
<code>storageState</code> option in <a href="api/class-browser.html#browser-new-context">browser.newContext()</a> and <a href="api/class-browser.html#browser-new-page">browser.newPage()</a> to setup browser context state.</li> </ul> <h4 id="browser-versions-37">Browser Versions<a href="#browser-versions-37" aria-label="Direct link to Browser Versions" title="Direct link to Browser Versions">​</a>
</h4> <ul> <li>Chromium 89.0.4344.0</li> <li>Mozilla Firefox 84.0b9</li> <li>WebKit 14.1</li> </ul><div class="_attribution">
  <p class="_attribution-p">
          &copy; 2024 Microsoft<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://playwright.dev/docs/release-notes" class="_attribution-link">https://playwright.dev/docs/release-notes</a>
  </p>
</div>
