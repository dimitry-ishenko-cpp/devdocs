<header><h1>WebSocket</h1></header><p>The <a title="WebSocket" href="class-websocket.html">WebSocket</a> class represents websocket connections in the page.</p>  <h2 id="methods">Methods<a href="#methods" aria-label="Direct link to Methods" title="Direct link to Methods">​</a>
</h2> <h3 id="web-socket-is-closed">isClosed<a href="#web-socket-is-closed" aria-label="Direct link to isClosed" title="Direct link to isClosed">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>Indicates that the web socket has been closed.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">webSocket.isClosed();</pre> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a>
</li> </ul>  <h3 id="web-socket-url">url<a href="#web-socket-url" aria-label="Direct link to url" title="Direct link to url">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>Contains the URL of the WebSocket.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">webSocket.url();</pre> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>
</li> </ul>  <h3 id="web-socket-wait-for-event">waitForEvent<a href="#web-socket-wait-for-event" aria-label="Direct link to waitForEvent" title="Direct link to waitForEvent">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>Waits for event to fire and passes its value into the predicate function. Returns when the predicate returns truthy value. Will throw an error if the webSocket is closed before the event is fired. Returns the event data value.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await webSocket.waitForEvent(event);
await webSocket.waitForEvent(event, optionsOrPredicate, options);</pre> <p><strong>Arguments</strong></p> <ul> <li> <p><code>event</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> <p>Event name, same one would pass into <code>webSocket.on(event)</code>.</p> </li> <li> <p><code>optionsOrPredicate</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener noreferrer" title="Function">function</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em></p> <ul> <li> <p><code>predicate</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener noreferrer" title="Function">function</a></p> <p>Receives the event data and resolves to truthy value when the waiting should resolve.</p> </li> <li> <p><code>timeout</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a> <em>(optional)</em></p> <p>Maximum time to wait for in milliseconds. Defaults to <code>0</code> - no timeout. The default value can be changed via <code>actionTimeout</code> option in the config, or by using the <a href="class-browsercontext.html#browser-context-set-default-timeout">browserContext.setDefaultTimeout()</a> or <a href="class-page.html#page-set-default-timeout">page.setDefaultTimeout()</a> methods.</p> </li> </ul> <p>Either a predicate that receives an event or an options object. Optional.</p> </li> <li> <p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em></p> <ul> <li> <p><code>predicate</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener noreferrer" title="Function">function</a> <em>(optional)</em></p> <p>Receives the event data and resolves to truthy value when the waiting should resolve.</p> </li> </ul> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a>&gt;
</li> </ul>  <h2 id="events">Events<a href="#events" aria-label="Direct link to Events" title="Direct link to Events">​</a>
</h2> <h3 id="web-socket-event-close">on('close')<a href="#web-socket-event-close" aria-label="Direct link to on('close')" title="Direct link to on('close')">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>Fired when the websocket closes.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">webSocket.on('close', data =&gt; {});</pre> <p><strong>Event data</strong></p> <ul> <li><a title="WebSocket" href="class-websocket.html">WebSocket</a></li> </ul>  <h3 id="web-socket-event-frame-received">on('framereceived')<a href="#web-socket-event-frame-received" aria-label="Direct link to on('framereceived')" title="Direct link to on('framereceived')">​</a>
</h3>   <p>Fired when the websocket receives a frame.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">webSocket.on('framereceived', data =&gt; {});</pre> <p><strong>Event data</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <ul> <li> <p><code>payload</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> | <a href="https://nodejs.org/api/buffer.html#buffer_class_buffer" target="_blank" rel="noopener noreferrer" title="Buffer">Buffer</a></p> <p>frame payload</p> </li> </ul> </li> </ul>  <h3 id="web-socket-event-frame-sent">on('framesent')<a href="#web-socket-event-frame-sent" aria-label="Direct link to on('framesent')" title="Direct link to on('framesent')">​</a>
</h3>   <p>Fired when the websocket sends a frame.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">webSocket.on('framesent', data =&gt; {});</pre> <p><strong>Event data</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <ul> <li> <p><code>payload</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> | <a href="https://nodejs.org/api/buffer.html#buffer_class_buffer" target="_blank" rel="noopener noreferrer" title="Buffer">Buffer</a></p> <p>frame payload</p> </li> </ul> </li> </ul>  <h3 id="web-socket-event-socket-error">on('socketerror')<a href="#web-socket-event-socket-error" aria-label="Direct link to on('socketerror')" title="Direct link to on('socketerror')">​</a>
</h3>   <p>Fired when the websocket has an error.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">webSocket.on('socketerror', data =&gt; {});</pre> <p><strong>Event data</strong></p> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></li> </ul><div class="_attribution">
  <p class="_attribution-p">
          &copy; 2024 Microsoft<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://playwright.dev/docs/api/class-websocket" class="_attribution-link">https://playwright.dev/docs/api/class-websocket</a>
  </p>
</div>
