<header><h1>Clock</h1></header><p>Accurately simulating time-dependent behavior is essential for verifying the correctness of applications. Learn more about <a href="../clock.html">clock emulation</a>.</p> <p>Note that clock is installed for the entire <a title="BrowserContext" href="class-browsercontext.html">BrowserContext</a>, so the time in all the pages and iframes is controlled by the same clock.</p>  <h2 id="methods">Methods<a href="#methods" aria-label="Direct link to Methods" title="Direct link to Methods">​</a>
</h2> <h3 id="clock-fast-forward">fastForward<a href="#clock-fast-forward" aria-label="Direct link to fastForward" title="Direct link to fastForward">​</a>
</h3>   <p>Advance the clock by jumping forward in time. Only fires due timers at most once. This is equivalent to user closing the laptop lid for a while and reopening it later, after given time.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await page.clock.fastForward(1000);
await page.clock.fastForward('30:00');</pre> <p><strong>Arguments</strong></p> <ul> <li> <p><code>ticks</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> <p>Time may be the number of milliseconds to advance the clock by or a human-readable string. Valid string formats are "08" for eight seconds, "01:00" for one minute and "02:34:10" for two hours, 34 minutes and ten seconds.</p> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul>  <h3 id="clock-install">install<a href="#clock-install" aria-label="Direct link to install" title="Direct link to install">​</a>
</h3>   <p>Install fake implementations for the following time-related functions:</p> <ul> <li><code>Date</code></li> <li><code>setTimeout</code></li> <li><code>clearTimeout</code></li> <li><code>setInterval</code></li> <li><code>clearInterval</code></li> <li><code>requestAnimationFrame</code></li> <li><code>cancelAnimationFrame</code></li> <li><code>requestIdleCallback</code></li> <li><code>cancelIdleCallback</code></li> <li><code>performance</code></li> </ul> <p>Fake timers are used to manually control the flow of time in tests. They allow you to advance time, fire timers, and control the behavior of time-dependent functions. See <a href="class-clock.html#clock-run-for">clock.runFor()</a> and <a href="class-clock.html#clock-fast-forward">clock.fastForward()</a> for more information.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await clock.install();
await clock.install(options);</pre> <p><strong>Arguments</strong></p> <ul> <li>
<code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em> <ul> <li> <p><code>time</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> | [Date] <em>(optional)</em></p> <p>Time to initialize with, current system time by default.</p> </li> </ul> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul>  <h3 id="clock-pause-at">pauseAt<a href="#clock-pause-at" aria-label="Direct link to pauseAt" title="Direct link to pauseAt">​</a>
</h3>   <p>Advance the clock by jumping forward in time and pause the time. Once this method is called, no timers are fired unless <a href="class-clock.html#clock-run-for">clock.runFor()</a>, <a href="class-clock.html#clock-fast-forward">clock.fastForward()</a>, <a href="class-clock.html#clock-pause-at">clock.pauseAt()</a> or <a href="class-clock.html#clock-resume">clock.resume()</a> is called.</p> <p>Only fires due timers at most once. This is equivalent to user closing the laptop lid for a while and reopening it at the specified time and pausing.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await page.clock.pauseAt(new Date('2020-02-02'));
await page.clock.pauseAt('2020-02-02');</pre> <p><strong>Arguments</strong></p> <ul> <li> <p><code>time</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> | [Date]</p> <p>Time to pause at.</p> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul>  <h3 id="clock-resume">resume<a href="#clock-resume" aria-label="Direct link to resume" title="Direct link to resume">​</a>
</h3>   <p>Resumes timers. Once this method is called, time resumes flowing, timers are fired as usual.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await clock.resume();</pre> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul>  <h3 id="clock-run-for">runFor<a href="#clock-run-for" aria-label="Direct link to runFor" title="Direct link to runFor">​</a>
</h3>   <p>Advance the clock, firing all the time-related callbacks.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await page.clock.runFor(1000);
await page.clock.runFor('30:00');</pre> <p><strong>Arguments</strong></p> <ul> <li> <p><code>ticks</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> <p>Time may be the number of milliseconds to advance the clock by or a human-readable string. Valid string formats are "08" for eight seconds, "01:00" for one minute and "02:34:10" for two hours, 34 minutes and ten seconds.</p> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul>  <h3 id="clock-set-fixed-time">setFixedTime<a href="#clock-set-fixed-time" aria-label="Direct link to setFixedTime" title="Direct link to setFixedTime">​</a>
</h3>   <p>Makes <code>Date.now</code> and <code>new Date()</code> return fixed fake time at all times, keeps all the timers running.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await page.clock.setFixedTime(Date.now());
await page.clock.setFixedTime(new Date('2020-02-02'));
await page.clock.setFixedTime('2020-02-02');</pre> <p><strong>Arguments</strong></p> <ul> <li> <p><code>time</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> | [Date]</p> <p>Time to be set in milliseconds.</p> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul>  <h3 id="clock-set-system-time">setSystemTime<a href="#clock-set-system-time" aria-label="Direct link to setSystemTime" title="Direct link to setSystemTime">​</a>
</h3>   <p>Sets current system time but does not trigger any timers.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await page.clock.setSystemTime(Date.now());
await page.clock.setSystemTime(new Date('2020-02-02'));
await page.clock.setSystemTime('2020-02-02');</pre> <p><strong>Arguments</strong></p> <ul> <li> <p><code>time</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> | [Date]</p> <p>Time to be set in milliseconds.</p> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul><div class="_attribution">
  <p class="_attribution-p">
          &copy; 2024 Microsoft<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://playwright.dev/docs/api/class-clock" class="_attribution-link">https://playwright.dev/docs/api/class-clock</a>
  </p>
</div>
