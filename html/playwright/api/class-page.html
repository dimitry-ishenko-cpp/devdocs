<header><h1>Page</h1></header><ul> <li>extends: <a href="https://nodejs.org/api/events.html#events_class_eventemitter" target="_blank" rel="noopener noreferrer" title="EventEmitter">EventEmitter</a>
</li> </ul> <p>Page provides methods to interact with a single tab in a <a title="Browser" href="class-browser.html">Browser</a>, or an <a href="https://developer.chrome.com/extensions/background_pages" target="_blank" rel="noopener noreferrer">extension background page</a> in Chromium. One <a title="Browser" href="class-browser.html">Browser</a> instance might have multiple <a title="Page" href="class-page.html">Page</a> instances.</p> <p>This example creates a page, navigates it to a URL, and then saves a screenshot:</p> <pre tabindex="0" data-language="javascript">const { webkit } = require('playwright');  // Or 'chromium' or 'firefox'.

(async () =&gt; {
  const browser = await webkit.launch();
  const context = await browser.newContext();
  const page = await context.newPage();
  await page.goto('https://example.com');
  await page.screenshot({ path: 'screenshot.png' });
  await browser.close();
})();</pre> <p>The Page class emits various events (described below) which can be handled using any of Node's native <a href="https://nodejs.org/api/events.html#events_class_eventemitter" target="_blank" rel="noopener noreferrer"><code>EventEmitter</code></a> methods, such as <code>on</code>, <code>once</code> or <code>removeListener</code>.</p> <p>This example logs a message for a single page <code>load</code> event:</p> <pre tabindex="0" data-language="javascript">page.once('load', () =&gt; console.log('Page loaded!'));</pre> <p>To unsubscribe from events use the <code>removeListener</code> method:</p> <pre tabindex="0" data-language="javascript">function logRequest(interceptedRequest) {
  console.log('A request was made:', interceptedRequest.url());
}
page.on('request', logRequest);
// Sometime later...
page.removeListener('request', logRequest);</pre>  <h2 id="methods">Methods<a href="#methods" aria-label="Direct link to Methods" title="Direct link to Methods">​</a>
</h2> <h3 id="page-add-init-script">addInitScript<a href="#page-add-init-script" aria-label="Direct link to addInitScript" title="Direct link to addInitScript">​</a>
</h3>   <p>Adds a script which would be evaluated in one of the following scenarios:</p> <ul> <li>Whenever the page is navigated.</li> <li>Whenever the child frame is attached or navigated. In this case, the script is evaluated in the context of the newly attached frame.</li> </ul> <p>The script is evaluated after the document was created but before any of its scripts were run. This is useful to amend the JavaScript environment, e.g. to seed <code>Math.random</code>.</p> <p><strong>Usage</strong></p> <p>An example of overriding <code>Math.random</code> before the page loads:</p> <pre tabindex="0" data-language="javascript">// preload.js
Math.random = () =&gt; 42;</pre> <pre tabindex="0" data-language="javascript">// In your playwright script, assuming the preload.js file is in same directory
await page.addInitScript({ path: './preload.js' });</pre> <pre tabindex="0" data-language="javascript">await page.addInitScript(mock =&gt; {
  window.mock = mock;
}, mock);</pre> <blockquote>
<div>
note</div>
<div><p>The order of evaluation of multiple scripts installed via <a href="class-browsercontext.html#browser-context-add-init-script">browserContext.addInitScript()</a> and <a href="class-page.html#page-add-init-script">page.addInitScript()</a> is not defined.</p></div>
</blockquote> <p><strong>Arguments</strong></p> <ul> <li> <p><code>script</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener noreferrer" title="Function">function</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a></p> <ul> <li> <p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Path to the JavaScript file. If <code>path</code> is a relative path, then it is resolved relative to the current working directory. Optional.</p> </li> <li> <p><code>content</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Raw script content. Optional.</p> </li> </ul> <p>Script to be evaluated in the page.</p> </li> <li> <p><code>arg</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description" target="_blank" rel="noopener noreferrer" title="Serializable">Serializable</a> <em>(optional)</em></p> <p>Optional argument to pass to <code>script</code> (only supported when passing a function).</p> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul>  <h3 id="page-add-locator-handler">addLocatorHandler<a href="#page-add-locator-handler" aria-label="Direct link to addLocatorHandler" title="Direct link to addLocatorHandler">​</a>
</h3>   <p>When testing a web page, sometimes unexpected overlays like a "Sign up" dialog appear and block actions you want to automate, e.g. clicking a button. These overlays don't always show up in the same way or at the same time, making them tricky to handle in automated tests.</p> <p>This method lets you set up a special function, called a handler, that activates when it detects that overlay is visible. The handler's job is to remove the overlay, allowing your test to continue as if the overlay wasn't there.</p> <p>Things to keep in mind:</p> <ul> <li>When an overlay is shown predictably, we recommend explicitly waiting for it in your test and dismissing it as a part of your normal test flow, instead of using <a href="class-page.html#page-add-locator-handler">page.addLocatorHandler()</a>.</li> <li>Playwright checks for the overlay every time before executing or retrying an action that requires an <a href="../actionability.html">actionability check</a>, or before performing an auto-waiting assertion check. When overlay is visible, Playwright calls the handler first, and then proceeds with the action/assertion. Note that the handler is only called when you perform an action/assertion - if the overlay becomes visible but you don't perform any actions, the handler will not be triggered.</li> <li>After executing the handler, Playwright will ensure that overlay that triggered the handler is not visible anymore. You can opt-out of this behavior with <code>noWaitAfter</code>.</li> <li>The execution time of the handler counts towards the timeout of the action/assertion that executed the handler. If your handler takes too long, it might cause timeouts.</li> <li>You can register multiple handlers. However, only a single handler will be running at a time. Make sure the actions within a handler don't depend on another handler.</li> </ul> <blockquote>
<div>
warning</div>
<div><p>Running the handler will alter your page state mid-test. For example it will change the currently focused element and move the mouse. Make sure that actions that run after the handler are self-contained and do not rely on the focus and mouse state being unchanged. <br> <br> For example, consider a test that calls <a href="class-locator.html#locator-focus">locator.focus()</a> followed by <a href="class-keyboard.html#keyboard-press">keyboard.press()</a>. If your handler clicks a button between these two actions, the focused element most likely will be wrong, and key press will happen on the unexpected element. Use <a href="class-locator.html#locator-press">locator.press()</a> instead to avoid this problem. <br> <br> Another example is a series of mouse actions, where <a href="class-mouse.html#mouse-move">mouse.move()</a> is followed by <a href="class-mouse.html#mouse-down">mouse.down()</a>. Again, when the handler runs between these two actions, the mouse position will be wrong during the mouse down. Prefer self-contained actions like <a href="class-locator.html#locator-click">locator.click()</a> that do not rely on the state being unchanged by a handler.</p></div>
</blockquote> <p><strong>Usage</strong></p> <p>An example that closes a "Sign up to the newsletter" dialog when it appears:</p> <pre tabindex="0" data-language="javascript">// Setup the handler.
await page.addLocatorHandler(page.getByText('Sign up to the newsletter'), async () =&gt; {
  await page.getByRole('button', { name: 'No thanks' }).click();
});

// Write the test as usual.
await page.goto('https://example.com');
await page.getByRole('button', { name: 'Start here' }).click();</pre> <p>An example that skips the "Confirm your security details" page when it is shown:</p> <pre tabindex="0" data-language="javascript">// Setup the handler.
await page.addLocatorHandler(page.getByText('Confirm your security details'), async () =&gt; {
  await page.getByRole('button', { name: 'Remind me later' }).click();
});

// Write the test as usual.
await page.goto('https://example.com');
await page.getByRole('button', { name: 'Start here' }).click();</pre> <p>An example with a custom callback on every actionability check. It uses a <code>&lt;body&gt;</code> locator that is always visible, so the handler is called before every actionability check. It is important to specify <code>noWaitAfter</code>, because the handler does not hide the <code>&lt;body&gt;</code> element.</p> <pre tabindex="0" data-language="javascript">// Setup the handler.
await page.addLocatorHandler(page.locator('body'), async () =&gt; {
  await page.evaluate(() =&gt; window.removeObstructionsForTestIfNeeded());
}, { noWaitAfter: true });

// Write the test as usual.
await page.goto('https://example.com');
await page.getByRole('button', { name: 'Start here' }).click();</pre> <p>Handler takes the original locator as an argument. You can also automatically remove the handler after a number of invocations by setting <code>times</code>:</p> <pre tabindex="0" data-language="javascript">await page.addLocatorHandler(page.getByLabel('Close'), async locator =&gt; {
  await locator.click();
}, { times: 1 });</pre> <p><strong>Arguments</strong></p> <ul> <li> <p><code>locator</code> <a title="Locator" href="class-locator.html">Locator</a></p> <p>Locator that triggers the handler.</p> </li> <li> <p><code>handler</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener noreferrer" title="Function">function</a>(<a title="Locator" href="class-locator.html">Locator</a>):<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a>&gt;</p> <p>Function that should be run once <code>locator</code> appears. This function should get rid of the element that blocks actions like click.</p> </li> <li> <p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em></p> <ul> <li> <p><code>noWaitAfter</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a> <em>(optional)</em> </p> <p>By default, after calling the handler Playwright will wait until the overlay becomes hidden, and only then Playwright will continue with the action/assertion that triggered the handler. This option allows to opt-out of this behavior, so that overlay can stay visible after the handler has run.</p> </li> <li> <p><code>times</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a> <em>(optional)</em> </p> <p>Specifies the maximum number of times this handler should be called. Unlimited by default.</p> </li> </ul> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul>  <h3 id="page-add-script-tag">addScriptTag<a href="#page-add-script-tag" aria-label="Direct link to addScriptTag" title="Direct link to addScriptTag">​</a>
</h3>   <p>Adds a <code>&lt;script&gt;</code> tag into the page with the desired url or content. Returns the added tag when the script's onload fires or when the script content was injected into frame.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await page.addScriptTag();
await page.addScriptTag(options);</pre> <p><strong>Arguments</strong></p> <ul> <li>
<code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em> <ul> <li> <p><code>content</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Raw JavaScript content to be injected into frame.</p> </li> <li> <p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Path to the JavaScript file to be injected into frame. If <code>path</code> is a relative path, then it is resolved relative to the current working directory.</p> </li> <li> <p><code>type</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Script type. Use 'module' in order to load a Javascript ES6 module. See <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script" target="_blank" rel="noopener noreferrer">script</a> for more details.</p> </li> <li> <p><code>url</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>URL of a script to be added.</p> </li> </ul> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a title="ElementHandle" href="class-elementhandle.html">ElementHandle</a>&gt;
</li> </ul>  <h3 id="page-add-style-tag">addStyleTag<a href="#page-add-style-tag" aria-label="Direct link to addStyleTag" title="Direct link to addStyleTag">​</a>
</h3>   <p>Adds a <code>&lt;link rel="stylesheet"&gt;</code> tag into the page with the desired url or a <code>&lt;style type="text/css"&gt;</code> tag with the content. Returns the added tag when the stylesheet's onload fires or when the CSS content was injected into frame.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await page.addStyleTag();
await page.addStyleTag(options);</pre> <p><strong>Arguments</strong></p> <ul> <li>
<code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em> <ul> <li> <p><code>content</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Raw CSS content to be injected into frame.</p> </li> <li> <p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Path to the CSS file to be injected into frame. If <code>path</code> is a relative path, then it is resolved relative to the current working directory.</p> </li> <li> <p><code>url</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>URL of the <code>&lt;link&gt;</code> tag.</p> </li> </ul> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a title="ElementHandle" href="class-elementhandle.html">ElementHandle</a>&gt;
</li> </ul>  <h3 id="page-bring-to-front">bringToFront
</h3><div class="_attribution">
  <p class="_attribution-p">
          &copy; 2024 Microsoft<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://playwright.dev/docs/api/class-page" class="_attribution-link">https://playwright.dev/docs/api/class-page</a>
  </p>
</div>
