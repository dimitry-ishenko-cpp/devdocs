<header><h1>Page</h1></header><ul> <li>extends: <a href="https://nodejs.org/api/events.html#events_class_eventemitter" target="_blank" rel="noopener noreferrer" title="EventEmitter">EventEmitter</a>
</li> </ul> <p>Page provides methods to interact with a single tab in a <a title="Browser" href="class-browser.html">Browser</a>, or an <a href="https://developer.chrome.com/extensions/background_pages" target="_blank" rel="noopener noreferrer">extension background page</a> in Chromium. One <a title="Browser" href="class-browser.html">Browser</a> instance might have multiple <a title="Page" href="class-page.html">Page</a> instances.</p> <p>This example creates a page, navigates it to a URL, and then saves a screenshot:</p> <pre tabindex="0" data-language="javascript">const { webkit } = require('playwright');  // Or 'chromium' or 'firefox'.

(async () =&gt; {
  const browser = await webkit.launch();
  const context = await browser.newContext();
  const page = await context.newPage();
  await page.goto('https://example.com');
  await page.screenshot({ path: 'screenshot.png' });
  await browser.close();
})();</pre> <p>The Page class emits various events (described below) which can be handled using any of Node's native <a href="https://nodejs.org/api/events.html#events_class_eventemitter" target="_blank" rel="noopener noreferrer"><code>EventEmitter</code></a> methods, such as <code>on</code>, <code>once</code> or <code>removeListener</code>.</p> <p>This example logs a message for a single page <code>load</code> event:</p> <pre tabindex="0" data-language="javascript">page.once('load', () =&gt; console.log('Page loaded!'));</pre> <p>To unsubscribe from events use the <code>removeListener</code> method:</p> <pre tabindex="0" data-language="javascript">function logRequest(interceptedRequest) {
  console.log('A request was made:', interceptedRequest.url());
}
page.on('request', logRequest);
// Sometime later...
page.removeListener('request', logRequest);</pre>  <h2 id="methods">Methods<a href="#methods" aria-label="Direct link to Methods" title="Direct link to Methods">​</a>
</h2> <h3 id="page-add-init-script">addInitScript<a href="#page-add-init-script" aria-label="Direct link to addInitScript" title="Direct link to addInitScript">​</a>
</h3>   <p>Adds a script which would be evaluated in one of the following scenarios:</p> <ul> <li>Whenever the page is navigated.</li> <li>Whenever the child frame is attached or navigated. In this case, the script is evaluated in the context of the newly attached frame.</li> </ul> <p>The script is evaluated after the document was created but before any of its scripts were run. This is useful to amend the JavaScript environment, e.g. to seed <code>Math.random</code>.</p> <p><strong>Usage</strong></p> <p>An example of overriding <code>Math.random</code> before the page loads:</p> <pre tabindex="0" data-language="javascript">// preload.js
Math.random = () =&gt; 42;</pre> <pre tabindex="0" data-language="javascript">// In your playwright script, assuming the preload.js file is in same directory
await page.addInitScript({ path: './preload.js' });</pre> <pre tabindex="0" data-language="javascript">await page.addInitScript(mock =&gt; {
  window.mock = mock;
}, mock);</pre> <blockquote>
<div>
note</div>
<div><p>The order of evaluation of multiple scripts installed via <a href="class-browsercontext.html#browser-context-add-init-script">browserContext.addInitScript()</a> and <a href="class-page.html#page-add-init-script">page.addInitScript()</a> is not defined.</p></div>
</blockquote> <p><strong>Arguments</strong></p> <ul> <li> <p><code>script</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener noreferrer" title="Function">function</a>|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a></p> <ul> <li> <p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Path to the JavaScript file. If <code>path</code> is a relative path, then it is resolved relative to the current working directory. Optional.</p> </li> <li> <p><code>content</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Raw script content. Optional.</p> </li> </ul> <p>Script to be evaluated in the page.</p> </li> <li> <p><code>arg</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description" target="_blank" rel="noopener noreferrer" title="Serializable">Serializable</a> <em>(optional)</em></p> <p>Optional argument to pass to <code>script</code> (only supported when passing a function).</p> </li> </ul>  <h3 id="page-add-script-tag">addScriptTag<a href="#page-add-script-tag" aria-label="Direct link to addScriptTag" title="Direct link to addScriptTag">​</a>
</h3>   <p>Adds a <code>&lt;script&gt;</code> tag into the page with the desired url or content. Returns the added tag when the script's onload fires or when the script content was injected into frame.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await page.addScriptTag();
await page.addScriptTag(options);</pre> <p><strong>Arguments</strong></p> <ul> <li>
<code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em> <ul> <li> <p><code>content</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Raw JavaScript content to be injected into frame.</p> </li> <li> <p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Path to the JavaScript file to be injected into frame. If <code>path</code> is a relative path, then it is resolved relative to the current working directory.</p> </li> <li> <p><code>type</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Script type. Use 'module' in order to load a Javascript ES6 module. See <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script" target="_blank" rel="noopener noreferrer">script</a> for more details.</p> </li> <li> <p><code>url</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>URL of a script to be added.</p> </li> </ul> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a title="ElementHandle" href="class-elementhandle.html">ElementHandle</a>&gt;
</li> </ul>  <h3 id="page-add-style-tag">addStyleTag<a href="#page-add-style-tag" aria-label="Direct link to addStyleTag" title="Direct link to addStyleTag">​</a>
</h3>   <p>Adds a <code>&lt;link rel="stylesheet"&gt;</code> tag into the page with the desired url or a <code>&lt;style type="text/css"&gt;</code> tag with the content. Returns the added tag when the stylesheet's onload fires or when the CSS content was injected into frame.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await page.addStyleTag();
await page.addStyleTag(options);</pre> <p><strong>Arguments</strong></p> <ul> <li>
<code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em> <ul> <li> <p><code>content</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Raw CSS content to be injected into frame.</p> </li> <li> <p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Path to the CSS file to be injected into frame. If <code>path</code> is a relative path, then it is resolved relative to the current working directory.</p> </li> <li> <p><code>url</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>URL of the <code>&lt;link&gt;</code> tag.</p> </li> </ul> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a title="ElementHandle" href="class-elementhandle.html">ElementHandle</a>&gt;
</li> </ul>  <h3 id="page-bring-to-front">bringToFront<a href="#page-bring-to-front" aria-label="Direct link to bringToFront" title="Direct link to bringToFront">​</a>
</h3>   <p>Brings page to front (activates tab).</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await page.bringToFront();</pre>  <h3 id="page-close">close<a href="#page-close" aria-label="Direct link to close" title="Direct link to close">​</a>
</h3>   <p>If <code>runBeforeUnload</code> is <code>false</code>, does not run any unload handlers and waits for the page to be closed. If <code>runBeforeUnload</code> is <code>true</code> the method will run unload handlers, but will <strong>not</strong> wait for the page to close.</p> <p>By default, <code>page.close()</code> <strong>does not</strong> run <code>beforeunload</code> handlers.</p> <blockquote>
<div>
note</div>
<div><p>if <code>runBeforeUnload</code> is passed as true, a <code>beforeunload</code> dialog might be summoned and should be handled manually via <a href="class-page.html#page-event-dialog">page.on('dialog')</a> event.</p></div>
</blockquote> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await page.close();
await page.close(options);</pre> <p><strong>Arguments</strong></p> <ul> <li>
<code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em> <ul> <li> <p><code>reason</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em> </p> <p>The reason to be reported to the operations interrupted by the page closure.</p> </li> <li> <p><code>runBeforeUnload</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a> <em>(optional)</em></p> <p>Defaults to <code>false</code>. Whether to run the <a href="https://developer.mozilla.org/en-US/docs/Web/Events/beforeunload" target="_blank" rel="noopener noreferrer">before unload</a> page handlers.</p> </li> </ul> </li> </ul>  <h3 id="page-content">content<a href="#page-content" aria-label="Direct link to content" title="Direct link to content">​</a>
</h3>   <p>Gets the full HTML contents of the page, including the doctype.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await page.content();</pre> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>&gt;
</li> </ul>  <h3 id="page-context">context<a href="#page-context" aria-label="Direct link to context" title="Direct link to context">​</a>
</h3>   <p>Get the browser context that the page belongs to.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">page.context();</pre> <p><strong>Returns</strong></p> <ul> <li>
<a title="BrowserContext" href="class-browsercontext.html">BrowserContext</a>
</li> </ul>  <h3 id="page-drag-and-drop">dragAndDrop<a href="#page-drag-and-drop" aria-label="Direct link to dragAndDrop" title="Direct link to dragAndDrop">​</a>
</h3>   <p>This method drags the source element to the target element. It will first move to the source element, perform a <code>mousedown</code>, then move to the target element and perform a <code>mouseup</code>.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await page.dragAndDrop('#source', '#target');
// or specify exact positions relative to the top-left corners of the elements:
await page.dragAndDrop('#source', '#target', {
  sourcePosition: { x: 34, y: 7 },
  targetPosition: { x: 10, y: 20 },
});</pre> <p><strong>Arguments</strong></p> <ul> <li> <p><code>source</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> <p>A selector to search for an element to drag. If there are multiple elements satisfying the selector, the first will be used.</p> </li> <li> <p><code>target</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> <p>A selector to search for an element to drop onto. If there are multiple elements satisfying the selector, the first will be used.</p> </li> <li> <p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em></p> <ul> <li> <p><code>force</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a> <em>(optional)</em></p> <p>Whether to bypass the <a href="../actionability.html">actionability</a> checks. Defaults to <code>false</code>.</p> </li> <li> <p><code>noWaitAfter</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a> <em>(optional)</em></p> <p>Actions that initiate navigations are waiting for these navigations to happen and for pages to start loading. You can opt out of waiting via setting this flag. You would only need this option in the exceptional cases such as navigating to inaccessible pages. Defaults to <code>false</code>.</p> </li> <li> <p><code>sourcePosition</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em> </p> <ul> <li> <p><code>x</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a></p> </li> <li> <p><code>y</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a></p> </li> </ul> <p>Clicks on the source element at this point relative to the top-left corner of the element's padding box. If not specified, some visible point of the element is used.</p> </li> <li> <p><code>strict</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a> <em>(optional)</em> </p> <p>When true, the call requires selector to resolve to a single element. If given selector resolves to more than one element, the call throws an exception.</p> </li> <li> <p><code>targetPosition</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em> </p> <ul> <li> <p><code>x</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a></p> </li> <li> <p><code>y</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a></p> </li> </ul> <p>Drops on the target element at this point relative to the top-left corner of the element's padding box. If not specified, some visible point of the element is used.</p> </li> <li> <p><code>timeout</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a> <em>(optional)</em></p> <p>Maximum time in milliseconds. Defaults to <code>0</code> - no timeout. The default value can be changed via <code>actionTimeout</code> option in the config, or by using the <a href="class-browsercontext.html#browser-context-set-default-timeout">browserContext.setDefaultTimeout()</a> or <a href="class-page.html#page-set-default-timeout">page.setDefaultTimeout()</a> methods.</p> </li> <li> <p><code>trial</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a> <em>(optional)</em></p> <p>When set, this method only performs the <a href="../actionability.html">actionability</a> checks and skips the action. Defaults to <code>false</code>. Useful to wait until the element is ready for the action without performing it.</p> </li> </ul> </li> </ul>  <h3 id="page-emulate-media">emulateMedia<a href="#page-emulate-media" aria-label="Direct link to emulateMedia" title="Direct link to emulateMedia">​</a>
</h3>   <p>This method changes the <code>CSS media type</code> through the <code>media</code> argument, and/or the <code>'prefers-colors-scheme'</code> media feature, using the <code>colorScheme</code> argument.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await page.evaluate(() =&gt; matchMedia('screen').matches);
// → true
await page.evaluate(() =&gt; matchMedia('print').matches);
// → false

await page.emulateMedia({ media: 'print' });
await page.evaluate(() =&gt; matchMedia('screen').matches);
// → false
await page.evaluate(() =&gt; matchMedia('print').matches);
// → true

await page.emulateMedia({});
await page.evaluate(() =&gt; matchMedia('screen').matches);
// → true
await page.evaluate(() =&gt; matchMedia('print').matches);
// → false</pre> <pre tabindex="0" data-language="javascript">await page.emulateMedia({ colorScheme: 'dark' });
await page.evaluate(() =&gt; matchMedia('(prefers-color-scheme: dark)').matches);
// → true
await page.evaluate(() =&gt; matchMedia('(prefers-color-scheme: light)').matches);
// → false
await page.evaluate(() =&gt; matchMedia('(prefers-color-scheme: no-preference)').matches);
// → false</pre> <p><strong>Arguments</strong></p> <ul> <li>
<code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em> <ul> <li> <p><code>colorScheme</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null" target="_blank" rel="noopener noreferrer" title="null">null</a>|"light"|"dark"|"no-preference" <em>(optional)</em> </p> <p>Emulates <code>'prefers-colors-scheme'</code> media feature, supported values are <code>'light'</code>, <code>'dark'</code>, <code>'no-preference'</code>. Passing <code>null</code> disables color scheme emulation.</p> </li> <li> <p><code>forcedColors</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null" target="_blank" rel="noopener noreferrer" title="null">null</a>|"active"|"none" <em>(optional)</em> </p> <p>Emulates <code>'forced-colors'</code> media feature, supported values are <code>'active'</code> and <code>'none'</code>. Passing <code>null</code> disables forced colors emulation.</p> </li> <li> <p><code>media</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null" target="_blank" rel="noopener noreferrer" title="null">null</a>|"screen"|"print" <em>(optional)</em> </p> <p>Changes the CSS media type of the page. The only allowed values are <code>'screen'</code>, <code>'print'</code> and <code>null</code>. Passing <code>null</code> disables CSS media emulation.</p> </li> <li> <p><code>reducedMotion</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null" target="_blank" rel="noopener noreferrer" title="null">null</a>|"reduce"|"no-preference" <em>(optional)</em> </p> <p>Emulates <code>'prefers-reduced-motion'</code> media feature, supported values are <code>'reduce'</code>, <code>'no-preference'</code>. Passing <code>null</code> disables reduced motion emulation.</p> </li> </ul> </li> </ul>  <h3 id="page-evaluate">evaluate<a href="#page-evaluate" aria-label="Direct link to evaluate" title="Direct link to evaluate">​</a>
</h3>   <p>Returns the value of the <code>pageFunction</code> invocation.</p> <p>If the function passed to the <a href="class-page.html#page-evaluate">page.evaluate()</a> returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>, then <a href="class-page.html#page-evaluate">page.evaluate()</a> would wait for the promise to resolve and return its value.</p> <p>If the function passed to the <a href="class-page.html#page-evaluate">page.evaluate()</a> returns a non-<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description" target="_blank" rel="noopener noreferrer" title="Serializable">Serializable</a> value, then <a href="class-page.html#page-evaluate">page.evaluate()</a> resolves to <code>undefined</code>. Playwright also supports transferring some additional values that are not serializable by <code>JSON</code>: <code>-0</code>, <code>NaN</code>, <code>Infinity</code>, <code>-Infinity</code>.</p> <p><strong>Usage</strong></p> <p>Passing argument to <code>pageFunction</code>:</p> <pre tabindex="0" data-language="javascript">const result = await page.evaluate(([x, y]) =&gt; {
  return Promise.resolve(x * y);
}, [7, 8]);
console.log(result); // prints "56"</pre> <p>A string can also be passed in instead of a function:</p> <pre tabindex="0" data-language="javascript">console.log(await page.evaluate('1 + 2')); // prints "3"
const x = 10;
console.log(await page.evaluate(`1 + ${x}`)); // prints "11"</pre> <p><a title="ElementHandle" href="class-elementhandle.html">ElementHandle</a> instances can be passed as an argument to the <a href="class-page.html#page-evaluate">page.evaluate()</a>:</p> <pre tabindex="0" data-language="javascript">const bodyHandle = await page.evaluate('document.body');
const html = await page.evaluate&lt;string, HTMLElement&gt;(([body, suffix]) =&gt;
  body.innerHTML + suffix, [bodyHandle, 'hello']
);
await bodyHandle.dispose();</pre> <p><strong>Arguments</strong></p> <ul> <li> <p><code>pageFunction</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener noreferrer" title="Function">function</a>|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> <p>Function to be evaluated in the page context.</p> </li> <li> <p><code>arg</code> <a title="EvaluationArgument" href="../evaluating.html#evaluation-argument">EvaluationArgument</a> <em>(optional)</em></p> <p>Optional argument to pass to <code>pageFunction</code>.</p> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description" target="_blank" rel="noopener noreferrer" title="Serializable">Serializable</a>&gt;
</li> </ul>  <h3 id="page-evaluate-handle">evaluateHandle<a href="#page-evaluate-handle" aria-label="Direct link to evaluateHandle" title="Direct link to evaluateHandle">​</a>
</h3>   <p>Returns the value of the <code>pageFunction</code> invocation as a <a title="JSHandle" href="class-jshandle.html">JSHandle</a>.</p> <p>The only difference between <a href="class-page.html#page-evaluate">page.evaluate()</a> and <a href="class-page.html#page-evaluate-handle">page.evaluateHandle()</a> is that <a href="class-page.html#page-evaluate-handle">page.evaluateHandle()</a> returns <a title="JSHandle" href="class-jshandle.html">JSHandle</a>.</p> <p>If the function passed to the <a href="class-page.html#page-evaluate-handle">page.evaluateHandle()</a> returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>, then <a href="class-page.html#page-evaluate-handle">page.evaluateHandle()</a> would wait for the promise to resolve and return its value.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">// Handle for the window object.
const aWindowHandle = await page.evaluateHandle(() =&gt; Promise.resolve(window));</pre> <p>A string can also be passed in instead of a function:</p> <pre tabindex="0" data-language="javascript">const aHandle = await page.evaluateHandle('document'); // Handle for the 'document'</pre> <p><a title="JSHandle" href="class-jshandle.html">JSHandle</a> instances can be passed as an argument to the <a href="class-page.html#page-evaluate-handle">page.evaluateHandle()</a>:</p> <pre tabindex="0" data-language="javascript">const aHandle = await page.evaluateHandle(() =&gt; document.body);
const resultHandle = await page.evaluateHandle(body =&gt; body.innerHTML, aHandle);
console.log(await resultHandle.jsonValue());
await resultHandle.dispose();</pre> <p><strong>Arguments</strong></p> <ul> <li> <p><code>pageFunction</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener noreferrer" title="Function">function</a>|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> <p>Function to be evaluated in the page context.</p> </li> <li> <p><code>arg</code> <a title="EvaluationArgument" href="../evaluating.html#evaluation-argument">EvaluationArgument</a> <em>(optional)</em></p> <p>Optional argument to pass to <code>pageFunction</code>.</p> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a title="JSHandle" href="class-jshandle.html">JSHandle</a>&gt;
</li> </ul>  <h3 id="page-expose-binding">exposeBinding<a href="#page-expose-binding" aria-label="Direct link to exposeBinding" title="Direct link to exposeBinding">​</a>
</h3>   <p>The method adds a function called <code>name</code> on the <code>window</code> object of every frame in this page. When called, the function executes <code>callback</code> and returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a> which resolves to the return value of <code>callback</code>. If the <code>callback</code> returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>, it will be awaited.</p> <p>The first argument of the <code>callback</code> function contains information about the caller: <code>{ browserContext: BrowserContext, page: Page, frame: Frame }</code>.</p> <p>See <a href="class-browsercontext.html#browser-context-expose-binding">browserContext.exposeBinding()</a> for the context-wide version.</p> <blockquote>
<div>
note</div>
<div><p>Functions installed via <a href="class-page.html#page-expose-binding">page.exposeBinding()</a> survive navigations.</p></div>
</blockquote> <p><strong>Usage</strong></p> <p>An example of exposing page URL to all frames in a page:</p> <pre tabindex="0" data-language="javascript">const { webkit } = require('playwright');  // Or 'chromium' or 'firefox'.

(async () =&gt; {
  const browser = await webkit.launch({ headless: false });
  const context = await browser.newContext();
  const page = await context.newPage();
  await page.exposeBinding('pageURL', ({ page }) =&gt; page.url());
  await page.setContent(`
    &lt;script&gt;
      async function onClick() {
        document.querySelector('div').textContent = await window.pageURL();
      }
    &lt;/script&gt;
    &lt;button onclick="onClick()"&gt;Click me&lt;/button&gt;
    &lt;div&gt;&lt;/div&gt;
  `);
  await page.click('button');
})();</pre> <p>An example of passing an element handle:</p> <pre tabindex="0" data-language="javascript">await page.exposeBinding('clicked', async (source, element) =&gt; {
  console.log(await element.textContent());
}, { handle: true });
await page.setContent(`
  &lt;script&gt;
    document.addEventListener('click', event =&gt; window.clicked(event.target));
  &lt;/script&gt;
  &lt;div&gt;Click me&lt;/div&gt;
  &lt;div&gt;Or click me&lt;/div&gt;
`);</pre> <p><strong>Arguments</strong></p> <ul> <li> <p><code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> <p>Name of the function on the window object.</p> </li> <li> <p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener noreferrer" title="Function">function</a></p> <p>Callback function that will be called in the Playwright's context.</p> </li> <li> <p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em></p> <ul> <li> <p><code>handle</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a> <em>(optional)</em></p> <p>Whether to pass the argument as a handle, instead of passing by value. When passing a handle, only one argument is supported. When passing by value, multiple arguments are supported.</p> </li> </ul> </li> </ul>  <h3 id="page-expose-function">exposeFunction<a href="#page-expose-function" aria-label="Direct link to exposeFunction" title="Direct link to exposeFunction">​</a>
</h3>   <p>The method adds a function called <code>name</code> on the <code>window</code> object of every frame in the page. When called, the function executes <code>callback</code> and returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a> which resolves to the return value of <code>callback</code>.</p> <p>If the <code>callback</code> returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>, it will be awaited.</p> <p>See <a href="class-browsercontext.html#browser-context-expose-function">browserContext.exposeFunction()</a> for context-wide exposed function.</p> <blockquote>
<div>
note</div>
<div><p>Functions installed via <a href="class-page.html#page-expose-function">page.exposeFunction()</a> survive navigations.</p></div>
</blockquote> <p><strong>Usage</strong></p> <p>An example of adding a <code>sha256</code> function to the page:</p> <pre tabindex="0" data-language="javascript">const { webkit } = require('playwright');  // Or 'chromium' or 'firefox'.
const crypto = require('crypto');

(async () =&gt; {
  const browser = await webkit.launch({ headless: false });
  const page = await browser.newPage();
  await page.exposeFunction('sha256', text =&gt;
    crypto.createHash('sha256').update(text).digest('hex'),
  );
  await page.setContent(`
    &lt;script&gt;
      async function onClick() {
        document.querySelector('div').textContent = await window.sha256('PLAYWRIGHT');
      }
    &lt;/script&gt;
    &lt;button onclick="onClick()"&gt;Click me&lt;/button&gt;
    &lt;div&gt;&lt;/div&gt;
  `);
  await page.click('button');
})();</pre> <p><strong>Arguments</strong></p> <ul> <li> <p><code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> <p>Name of the function on the window object</p> </li> <li> <p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener noreferrer" title="Function">function</a></p> <p>Callback function which will be called in Playwright's context.</p> </li> </ul>  <h3 id="page-frame">frame<a href="#page-frame" aria-label="Direct link to frame" title="Direct link to frame">​</a>
</h3>   <p>Returns frame matching the specified criteria. Either <code>name</code> or <code>url</code> must be specified.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">const frame = page.frame('frame-name');</pre> <pre tabindex="0" data-language="javascript">const frame = page.frame({ url: /.*domain.*/ });</pre> <p><strong>Arguments</strong></p> <ul> <li>
<code>frameSelector</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <ul> <li> <p><code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Frame name specified in the <code>iframe</code>'s <code>name</code> attribute. Optional.</p> </li> <li> <p><code>url</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp" target="_blank" rel="noopener noreferrer" title="RegExp">RegExp</a>|<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener noreferrer" title="Function">function</a>(<a href="https://nodejs.org/api/url.html" target="_blank" rel="noopener noreferrer" title="URL">URL</a>):<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a> <em>(optional)</em></p> <p>A glob pattern, regex pattern or predicate receiving frame's <code>url</code> as a <a href="https://nodejs.org/api/url.html" target="_blank" rel="noopener noreferrer" title="URL">URL</a> object. Optional.</p> </li> </ul> Frame name or other frame lookup options.</li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null" target="_blank" rel="noopener noreferrer" title="null">null</a>|<a title="Frame" href="class-frame.html">Frame</a>
</li> </ul>  <h3 id="page-frame-locator">frameLocator
</h3><div class="_attribution">
  <p class="_attribution-p">
          &copy; 2024 Microsoft<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://playwright.dev/docs/api/class-page" class="_attribution-link">https://playwright.dev/docs/api/class-page</a>
  </p>
</div>
