<header><h1>BrowserContext</h1></header><ul> <li>extends: <a href="https://nodejs.org/api/events.html#events_class_eventemitter" target="_blank" rel="noopener noreferrer" title="EventEmitter">EventEmitter</a>
</li> </ul> <p>BrowserContexts provide a way to operate multiple independent browser sessions.</p> <p>If a page opens another page, e.g. with a <code>window.open</code> call, the popup will belong to the parent page's browser context.</p> <p>Playwright allows creating "incognito" browser contexts with <a href="class-browser.html#browser-new-context">browser.newContext()</a> method. "Incognito" browser contexts don't write any browsing data to disk.</p> <pre tabindex="0" data-language="javascript">// Create a new incognito browser context
const context = await browser.newContext();
// Create a new page inside context.
const page = await context.newPage();
await page.goto('https://example.com');
// Dispose context once it's no longer needed.
await context.close();</pre>  <h2 id="methods">Methods<a href="#methods" aria-label="Direct link to Methods" title="Direct link to Methods">​</a>
</h2> <h3 id="browser-context-add-cookies">addCookies<a href="#browser-context-add-cookies" aria-label="Direct link to addCookies" title="Direct link to addCookies">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>Adds cookies into this browser context. All pages within this context will have these cookies installed. Cookies can be obtained via <a href="class-browsercontext.html#browser-context-cookies">browserContext.cookies()</a>.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await browserContext.addCookies([cookieObject1, cookieObject2]);</pre> <p><strong>Arguments</strong></p> <ul> <li>
<code>cookies</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener noreferrer" title="Array">Array</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a>&gt; <ul> <li> <p><code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> </li> <li> <p><code>value</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> </li> <li> <p><code>url</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Either url or domain / path are required. Optional.</p> </li> <li> <p><code>domain</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>For the cookie to apply to all subdomains as well, prefix domain with a dot, like this: ".example.com". Either url or domain / path are required. Optional.</p> </li> <li> <p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Either url or domain / path are required Optional.</p> </li> <li> <p><code>expires</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a> <em>(optional)</em></p> <p>Unix time in seconds. Optional.</p> </li> <li> <p><code>httpOnly</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a> <em>(optional)</em></p> <p>Optional.</p> </li> <li> <p><code>secure</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a> <em>(optional)</em></p> <p>Optional.</p> </li> <li> <p><code>sameSite</code> "Strict" | "Lax" | "None" <em>(optional)</em></p> <p>Optional.</p> </li> </ul> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul>  <h3 id="browser-context-add-init-script">addInitScript<a href="#browser-context-add-init-script" aria-label="Direct link to addInitScript" title="Direct link to addInitScript">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>Adds a script which would be evaluated in one of the following scenarios:</p> <ul> <li>Whenever a page is created in the browser context or is navigated.</li> <li>Whenever a child frame is attached or navigated in any page in the browser context. In this case, the script is evaluated in the context of the newly attached frame.</li> </ul> <p>The script is evaluated after the document was created but before any of its scripts were run. This is useful to amend the JavaScript environment, e.g. to seed <code>Math.random</code>.</p> <p><strong>Usage</strong></p> <p>An example of overriding <code>Math.random</code> before the page loads:</p> <pre tabindex="0" data-language="javascript">// preload.js
Math.random = () =&gt; 42;</pre> <pre tabindex="0" data-language="javascript">// In your playwright script, assuming the preload.js file is in same directory.
await browserContext.addInitScript({
  path: 'preload.js'
});</pre> <blockquote>
<div>
note</div>
<div><p>The order of evaluation of multiple scripts installed via <a href="class-browsercontext.html#browser-context-add-init-script">browserContext.addInitScript()</a> and <a href="class-page.html#page-add-init-script">page.addInitScript()</a> is not defined.</p></div>
</blockquote> <p><strong>Arguments</strong></p> <ul> <li> <p><code>script</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener noreferrer" title="Function">function</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a></p> <ul> <li> <p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Path to the JavaScript file. If <code>path</code> is a relative path, then it is resolved relative to the current working directory. Optional.</p> </li> <li> <p><code>content</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>Raw script content. Optional.</p> </li> </ul> <p>Script to be evaluated in all pages in the browser context.</p> </li> <li> <p><code>arg</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#Description" target="_blank" rel="noopener noreferrer" title="Serializable">Serializable</a> <em>(optional)</em></p> <p>Optional argument to pass to <code>script</code> (only supported when passing a function).</p> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul>  <h3 id="browser-context-background-pages">backgroundPages<a href="#browser-context-background-pages" aria-label="Direct link to backgroundPages" title="Direct link to backgroundPages">​</a>
</h3>   <blockquote>
<div>
note</div>
<div><p>Background pages are only supported on Chromium-based browsers.</p></div>
</blockquote> <p>All existing background pages in the context.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">browserContext.backgroundPages();</pre> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener noreferrer" title="Array">Array</a>&lt;<a title="Page" href="class-page.html">Page</a>&gt;
</li> </ul>  <h3 id="browser-context-browser">browser<a href="#browser-context-browser" aria-label="Direct link to browser" title="Direct link to browser">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>Returns the browser instance of the context. If it was launched as a persistent context null gets returned.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">browserContext.browser();</pre> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null" target="_blank" rel="noopener noreferrer" title="null">null</a> | <a title="Browser" href="class-browser.html">Browser</a>
</li> </ul>  <h3 id="browser-context-clear-cookies">clearCookies<a href="#browser-context-clear-cookies" aria-label="Direct link to clearCookies" title="Direct link to clearCookies">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>Removes cookies from context. Accepts optional filter.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await context.clearCookies();
await context.clearCookies({ name: 'session-id' });
await context.clearCookies({ domain: 'my-origin.com' });
await context.clearCookies({ domain: /.*my-origin\.com/ });
await context.clearCookies({ path: '/api/v1' });
await context.clearCookies({ name: 'session-id', domain: 'my-origin.com' });</pre> <p><strong>Arguments</strong></p> <ul> <li>
<code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em> <ul> <li> <p><code>domain</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp" target="_blank" rel="noopener noreferrer" title="RegExp">RegExp</a> <em>(optional)</em> </p> <p>Only removes cookies with the given domain.</p> </li> <li> <p><code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp" target="_blank" rel="noopener noreferrer" title="RegExp">RegExp</a> <em>(optional)</em> </p> <p>Only removes cookies with the given name.</p> </li> <li> <p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp" target="_blank" rel="noopener noreferrer" title="RegExp">RegExp</a> <em>(optional)</em> </p> <p>Only removes cookies with the given path.</p> </li> </ul> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul>  <h3 id="browser-context-clear-permissions">clearPermissions<a href="#browser-context-clear-permissions" aria-label="Direct link to clearPermissions" title="Direct link to clearPermissions">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>Clears all permission overrides for the browser context.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">const context = await browser.newContext();
await context.grantPermissions(['clipboard-read']);
// do stuff ..
context.clearPermissions();</pre> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul>  <h3 id="browser-context-close">close<a href="#browser-context-close" aria-label="Direct link to close" title="Direct link to close">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>Closes the browser context. All the pages that belong to the browser context will be closed.</p> <blockquote>
<div>
note</div>
<div><p>The default browser context cannot be closed.</p></div>
</blockquote> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await browserContext.close();
await browserContext.close(options);</pre> <p><strong>Arguments</strong></p> <ul> <li>
<code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em> <ul> <li> <p><code>reason</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em> </p> <p>The reason to be reported to the operations interrupted by the context closure.</p> </li> </ul> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul>  <h3 id="browser-context-cookies">cookies<a href="#browser-context-cookies" aria-label="Direct link to cookies" title="Direct link to cookies">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>If no URLs are specified, this method returns all cookies. If URLs are specified, only cookies that affect those URLs are returned.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await browserContext.cookies();
await browserContext.cookies(urls);</pre> <p><strong>Arguments</strong></p> <ul> <li> <p><code>urls</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener noreferrer" title="Array">Array</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>&gt; <em>(optional)</em></p> <p>Optional list of URLs.</p> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener noreferrer" title="Array">Array</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a>&gt;&gt; <ul> <li> <p><code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> </li> <li> <p><code>value</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> </li> <li> <p><code>domain</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> </li> <li> <p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> </li> <li> <p><code>expires</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a></p> <p>Unix time in seconds.</p> </li> <li> <p><code>httpOnly</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a></p> </li> <li> <p><code>secure</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a></p> </li> <li> <p><code>sameSite</code> "Strict" | "Lax" | "None"</p> </li> </ul> </li> </ul>  <h3 id="browser-context-expose-binding">exposeBinding<a href="#browser-context-expose-binding" aria-label="Direct link to exposeBinding" title="Direct link to exposeBinding">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>The method adds a function called <code>name</code> on the <code>window</code> object of every frame in every page in the context. When called, the function executes <code>callback</code> and returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a> which resolves to the return value of <code>callback</code>. If the <code>callback</code> returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>, it will be awaited.</p> <p>The first argument of the <code>callback</code> function contains information about the caller: <code>{ browserContext: BrowserContext, page: Page, frame: Frame }</code>.</p> <p>See <a href="class-page.html#page-expose-binding">page.exposeBinding()</a> for page-only version.</p> <p><strong>Usage</strong></p> <p>An example of exposing page URL to all frames in all pages in the context:</p> <pre tabindex="0" data-language="javascript">const { webkit } = require('playwright');  // Or 'chromium' or 'firefox'.

(async () =&gt; {
  const browser = await webkit.launch({ headless: false });
  const context = await browser.newContext();
  await context.exposeBinding('pageURL', ({ page }) =&gt; page.url());
  const page = await context.newPage();
  await page.setContent(`
    &lt;script&gt;
      async function onClick() {
        document.querySelector('div').textContent = await window.pageURL();
      }
    &lt;/script&gt;
    &lt;button onclick="onClick()"&gt;Click me&lt;/button&gt;
    &lt;div&gt;&lt;/div&gt;
  `);
  await page.getByRole('button').click();
})();</pre> <p><strong>Arguments</strong></p> <ul> <li> <p><code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> <p>Name of the function on the window object.</p> </li> <li> <p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener noreferrer" title="Function">function</a></p> <p>Callback function that will be called in the Playwright's context.</p> </li> <li> <p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em></p> <ul> <li> <p><code>handle</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a> <em>(optional)</em></p> <blockquote>
<div>
Deprecated</div>
<div><p>This option will be removed in the future.</p></div>
</blockquote> <p>Whether to pass the argument as a handle, instead of passing by value. When passing a handle, only one argument is supported. When passing by value, multiple arguments are supported.</p> </li> </ul> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul>  <h3 id="browser-context-expose-function">exposeFunction<a href="#browser-context-expose-function" aria-label="Direct link to exposeFunction" title="Direct link to exposeFunction">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>The method adds a function called <code>name</code> on the <code>window</code> object of every frame in every page in the context. When called, the function executes <code>callback</code> and returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a> which resolves to the return value of <code>callback</code>.</p> <p>If the <code>callback</code> returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>, it will be awaited.</p> <p>See <a href="class-page.html#page-expose-function">page.exposeFunction()</a> for page-only version.</p> <p><strong>Usage</strong></p> <p>An example of adding a <code>sha256</code> function to all pages in the context:</p> <pre tabindex="0" data-language="javascript">const { webkit } = require('playwright');  // Or 'chromium' or 'firefox'.
const crypto = require('crypto');

(async () =&gt; {
  const browser = await webkit.launch({ headless: false });
  const context = await browser.newContext();
  await context.exposeFunction('sha256', text =&gt;
    crypto.createHash('sha256').update(text).digest('hex'),
  );
  const page = await context.newPage();
  await page.setContent(`
    &lt;script&gt;
      async function onClick() {
        document.querySelector('div').textContent = await window.sha256('PLAYWRIGHT');
      }
    &lt;/script&gt;
    &lt;button onclick="onClick()"&gt;Click me&lt;/button&gt;
    &lt;div&gt;&lt;/div&gt;
  `);
  await page.getByRole('button').click();
})();</pre> <p><strong>Arguments</strong></p> <ul> <li> <p><code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> <p>Name of the function on the window object.</p> </li> <li> <p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener noreferrer" title="Function">function</a></p> <p>Callback function that will be called in the Playwright's context.</p> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul>  <h3 id="browser-context-grant-permissions">grantPermissions<a href="#browser-context-grant-permissions" aria-label="Direct link to grantPermissions" title="Direct link to grantPermissions">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>Grants specified permissions to the browser context. Only grants corresponding permissions to the given origin if specified.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await browserContext.grantPermissions(permissions);
await browserContext.grantPermissions(permissions, options);</pre> <p><strong>Arguments</strong></p> <ul> <li> <p><code>permissions</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener noreferrer" title="Array">Array</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>&gt;</p> <p>A permission or an array of permissions to grant. Permissions can be one of the following values:</p> <ul> <li><code>'accelerometer'</code></li> <li><code>'accessibility-events'</code></li> <li><code>'ambient-light-sensor'</code></li> <li><code>'background-sync'</code></li> <li><code>'camera'</code></li> <li><code>'clipboard-read'</code></li> <li><code>'clipboard-write'</code></li> <li><code>'geolocation'</code></li> <li><code>'gyroscope'</code></li> <li><code>'magnetometer'</code></li> <li><code>'microphone'</code></li> <li>
<code>'midi-sysex'</code> (system-exclusive midi)</li> <li><code>'midi'</code></li> <li><code>'notifications'</code></li> <li><code>'payment-handler'</code></li> <li><code>'storage-access'</code></li> </ul> </li> <li> <p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em></p> <ul> <li> <p><code>origin</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>The <a href="https://developer.mozilla.org/en-US/docs/Glossary/Origin" target="_blank" rel="noopener noreferrer" title="Origin">origin</a> to grant permissions to, e.g. "<a href="https://example.com" target="_blank" rel="noopener noreferrer">https://example.com</a>".</p> </li> </ul> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul>  <h3 id="browser-context-new-cdp-session">newCDPSession<a href="#browser-context-new-cdp-session" aria-label="Direct link to newCDPSession" title="Direct link to newCDPSession">​</a>
</h3>   <blockquote>
<div>
note</div>
<div><p>CDP sessions are only supported on Chromium-based browsers.</p></div>
</blockquote> <p>Returns the newly created session.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await browserContext.newCDPSession(page);</pre> <p><strong>Arguments</strong></p> <ul> <li> <p><code>page</code> <a title="Page" href="class-page.html">Page</a> | <a title="Frame" href="class-frame.html">Frame</a></p> <p>Target to create new session for. For backwards-compatibility, this parameter is named <code>page</code>, but it can be a <code>Page</code> or <code>Frame</code> type.</p> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a title="CDPSession" href="class-cdpsession.html">CDPSession</a>&gt;
</li> </ul>  <h3 id="browser-context-new-page">newPage<a href="#browser-context-new-page" aria-label="Direct link to newPage" title="Direct link to newPage">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>Creates a new page in the browser context.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await browserContext.newPage();</pre> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a title="Page" href="class-page.html">Page</a>&gt;
</li> </ul>  <h3 id="browser-context-pages">pages<a href="#browser-context-pages" aria-label="Direct link to pages" title="Direct link to pages">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>Returns all open pages in the context.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">browserContext.pages();</pre> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener noreferrer" title="Array">Array</a>&lt;<a title="Page" href="class-page.html">Page</a>&gt;
</li> </ul>  <h3 id="browser-context-route">route<a href="#browser-context-route" aria-label="Direct link to route" title="Direct link to route">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>Routing provides the capability to modify network requests that are made by any page in the browser context. Once route is enabled, every request matching the url pattern will stall unless it's continued, fulfilled or aborted.</p> <blockquote>
<div>
note</div>
<div><p><a href="class-browsercontext.html#browser-context-route">browserContext.route()</a> will not intercept requests intercepted by Service Worker. See <a href="https://github.com/microsoft/playwright/issues/1090" target="_blank" rel="noopener noreferrer">this</a> issue. We recommend disabling Service Workers when using request interception by setting <code>Browser.newContext.serviceWorkers</code> to <code>'block'</code>.</p></div>
</blockquote> <p><strong>Usage</strong></p> <p>An example of a naive handler that aborts all image requests:</p> <pre tabindex="0" data-language="javascript">const context = await browser.newContext();
await context.route('**/*.{png,jpg,jpeg}', route =&gt; route.abort());
const page = await context.newPage();
await page.goto('https://example.com');
await browser.close();</pre> <p>or the same snippet using a regex pattern instead:</p> <pre tabindex="0" data-language="javascript">const context = await browser.newContext();
await context.route(/(\.png$)|(\.jpg$)/, route =&gt; route.abort());
const page = await context.newPage();
await page.goto('https://example.com');
await browser.close();</pre> <p>It is possible to examine the request to decide the route action. For example, mocking all requests that contain some post data, and leaving all other requests as is:</p> <pre tabindex="0" data-language="javascript">await context.route('/api/**', async route =&gt; {
  if (route.request().postData().includes('my-string'))
    await route.fulfill({ body: 'mocked-data' });
  else
    await route.continue();
});</pre> <p>Page routes (set up with <a href="class-page.html#page-route">page.route()</a>) take precedence over browser context routes when request matches both handlers.</p> <p>To remove a route with its handler you can use <a href="class-browsercontext.html#browser-context-unroute">browserContext.unroute()</a>.</p> <blockquote>
<div>
note</div>
<div><p>Enabling routing disables http cache.</p></div>
</blockquote> <p><strong>Arguments</strong></p> <ul> <li> <p><code>url</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp" target="_blank" rel="noopener noreferrer" title="RegExp">RegExp</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener noreferrer" title="Function">function</a>(<a href="https://nodejs.org/api/url.html" target="_blank" rel="noopener noreferrer" title="URL">URL</a>):<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a></p> <p>A glob pattern, regex pattern or predicate receiving <a href="https://nodejs.org/api/url.html" target="_blank" rel="noopener noreferrer" title="URL">URL</a> to match while routing. When a <code>baseURL</code> via the context options was provided and the passed URL is a path, it gets merged via the <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL/URL" target="_blank" rel="noopener noreferrer"><code>new URL()</code></a> constructor.</p> </li> <li> <p><code>handler</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener noreferrer" title="Function">function</a>(<a title="Route" href="class-route.html">Route</a>, <a title="Request" href="class-request.html">Request</a>):<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a>&gt; | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a></p> <p>handler function to route the request.</p> </li> <li> <p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em></p> <ul> <li> <p><code>times</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a> <em>(optional)</em> </p> <p>How often a route should be used. By default it will be used every time.</p> </li> </ul> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul>  <h3 id="browser-context-route-from-har">routeFromHAR<a href="#browser-context-route-from-har" aria-label="Direct link to routeFromHAR" title="Direct link to routeFromHAR">​</a>
</h3>   <p>If specified the network requests that are made in the context will be served from the HAR file. Read more about <a href="../mock.html#replaying-from-har">Replaying from HAR</a>.</p> <p>Playwright will not serve requests intercepted by Service Worker from the HAR file. See <a href="https://github.com/microsoft/playwright/issues/1090" target="_blank" rel="noopener noreferrer">this</a> issue. We recommend disabling Service Workers when using request interception by setting <code>Browser.newContext.serviceWorkers</code> to <code>'block'</code>.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await browserContext.routeFromHAR(har);
await browserContext.routeFromHAR(har, options);</pre> <p><strong>Arguments</strong></p> <ul> <li> <p><code>har</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> <p>Path to a <a href="http://www.softwareishard.com/blog/har-12-spec" target="_blank" rel="noopener noreferrer">HAR</a> file with prerecorded network data. If <code>path</code> is a relative path, then it is resolved relative to the current working directory.</p> </li> <li> <p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em></p> <ul> <li> <p><code>notFound</code> "abort" | "fallback" <em>(optional)</em></p> <ul> <li>If set to 'abort' any request not found in the HAR file will be aborted.</li> <li>If set to 'fallback' falls through to the next route handler in the handler chain.</li> </ul> <p>Defaults to abort.</p> </li> <li> <p><code>update</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a> <em>(optional)</em></p> <p>If specified, updates the given HAR with the actual network information instead of serving from file. The file is written to disk when <a href="class-browsercontext.html#browser-context-close">browserContext.close()</a> is called.</p> </li> <li> <p><code>updateContent</code> "embed" | "attach" <em>(optional)</em> </p> <p>Optional setting to control resource content management. If <code>attach</code> is specified, resources are persisted as separate files or entries in the ZIP archive. If <code>embed</code> is specified, content is stored inline the HAR file.</p> </li> <li> <p><code>updateMode</code> "full" | "minimal" <em>(optional)</em> </p> <p>When set to <code>minimal</code>, only record information necessary for routing from HAR. This omits sizes, timing, page, cookies, security and other types of HAR information that are not used when replaying from HAR. Defaults to <code>minimal</code>.</p> </li> <li> <p><code>url</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp" target="_blank" rel="noopener noreferrer" title="RegExp">RegExp</a> <em>(optional)</em></p> <p>A glob pattern, regular expression or predicate to match the request URL. Only requests with URL matching the pattern will be served from the HAR file. If not specified, all requests are served from the HAR file.</p> </li> </ul> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul>  <h3 id="browser-context-service-workers">serviceWorkers<a href="#browser-context-service-workers" aria-label="Direct link to serviceWorkers" title="Direct link to serviceWorkers">​</a>
</h3>   <blockquote>
<div>
note</div>
<div><p>Service workers are only supported on Chromium-based browsers.</p></div>
</blockquote> <p>All existing service workers in the context.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">browserContext.serviceWorkers();</pre> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener noreferrer" title="Array">Array</a>&lt;<a title="Worker" href="class-worker.html">Worker</a>&gt;
</li> </ul>  <h3 id="browser-context-set-default-navigation-timeout">setDefaultNavigationTimeout<a href="#browser-context-set-default-navigation-timeout" aria-label="Direct link to setDefaultNavigationTimeout" title="Direct link to setDefaultNavigationTimeout">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>This setting will change the default maximum navigation time for the following methods and related shortcuts:</p> <ul> <li><a href="class-page.html#page-go-back">page.goBack()</a></li> <li><a href="class-page.html#page-go-forward">page.goForward()</a></li> <li><a href="class-page.html#page-goto">page.goto()</a></li> <li><a href="class-page.html#page-reload">page.reload()</a></li> <li><a href="class-page.html#page-set-content">page.setContent()</a></li> <li><a href="class-page.html#page-wait-for-navigation">page.waitForNavigation()</a></li> </ul> <blockquote>
<div>
note</div>
<div><p><a href="class-page.html#page-set-default-navigation-timeout">page.setDefaultNavigationTimeout()</a> and <a href="class-page.html#page-set-default-timeout">page.setDefaultTimeout()</a> take priority over <a href="class-browsercontext.html#browser-context-set-default-navigation-timeout">browserContext.setDefaultNavigationTimeout()</a>.</p></div>
</blockquote> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">browserContext.setDefaultNavigationTimeout(timeout);</pre> <p><strong>Arguments</strong></p> <ul> <li> <p><code>timeout</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a></p> <p>Maximum navigation time in milliseconds</p> </li> </ul>  <h3 id="browser-context-set-default-timeout">setDefaultTimeout<a href="#browser-context-set-default-timeout" aria-label="Direct link to setDefaultTimeout" title="Direct link to setDefaultTimeout">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>This setting will change the default maximum time for all the methods accepting <code>timeout</code> option.</p> <blockquote>
<div>
note</div>
<div><p><a href="class-page.html#page-set-default-navigation-timeout">page.setDefaultNavigationTimeout()</a>, <a href="class-page.html#page-set-default-timeout">page.setDefaultTimeout()</a> and <a href="class-browsercontext.html#browser-context-set-default-navigation-timeout">browserContext.setDefaultNavigationTimeout()</a> take priority over <a href="class-browsercontext.html#browser-context-set-default-timeout">browserContext.setDefaultTimeout()</a>.</p></div>
</blockquote> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">browserContext.setDefaultTimeout(timeout);</pre> <p><strong>Arguments</strong></p> <ul> <li> <p><code>timeout</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a></p> <p>Maximum time in milliseconds</p> </li> </ul>  <h3 id="browser-context-set-extra-http-headers">setExtraHTTPHeaders<a href="#browser-context-set-extra-http-headers" aria-label="Direct link to setExtraHTTPHeaders" title="Direct link to setExtraHTTPHeaders">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>The extra HTTP headers will be sent with every request initiated by any page in the context. These headers are merged with page-specific extra HTTP headers set with <a href="class-page.html#page-set-extra-http-headers">page.setExtraHTTPHeaders()</a>. If page overrides a particular header, page-specific header value will be used instead of the browser context header value.</p> <blockquote>
<div>
note</div>
<div><p><a href="class-browsercontext.html#browser-context-set-extra-http-headers">browserContext.setExtraHTTPHeaders()</a> does not guarantee the order of headers in the outgoing requests.</p></div>
</blockquote> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await browserContext.setExtraHTTPHeaders(headers);</pre> <p><strong>Arguments</strong></p> <ul> <li> <p><code>headers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a>&gt;</p> <p>An object containing additional HTTP headers to be sent with every request. All header values must be strings.</p> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul>  <h3 id="browser-context-set-geolocation">setGeolocation<a href="#browser-context-set-geolocation" aria-label="Direct link to setGeolocation" title="Direct link to setGeolocation">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>Sets the context's geolocation. Passing <code>null</code> or <code>undefined</code> emulates position unavailable.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await browserContext.setGeolocation({ latitude: 59.95, longitude: 30.31667 });</pre> <blockquote>
<div>
note</div>
<div><p>Consider using <a href="class-browsercontext.html#browser-context-grant-permissions">browserContext.grantPermissions()</a> to grant permissions for the browser context pages to read its geolocation.</p></div>
</blockquote> <p><strong>Arguments</strong></p> <ul> <li>
<code>geolocation</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null" target="_blank" rel="noopener noreferrer" title="null">null</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <ul> <li> <p><code>latitude</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a></p> <p>Latitude between -90 and 90.</p> </li> <li> <p><code>longitude</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a></p> <p>Longitude between -180 and 180.</p> </li> <li> <p><code>accuracy</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a> <em>(optional)</em></p> <p>Non-negative accuracy value. Defaults to <code>0</code>.</p> </li> </ul> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul>  <h3 id="browser-context-set-offline">setOffline<a href="#browser-context-set-offline" aria-label="Direct link to setOffline" title="Direct link to setOffline">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await browserContext.setOffline(offline);</pre> <p><strong>Arguments</strong></p> <ul> <li> <p><code>offline</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a></p> <p>Whether to emulate network being offline for the browser context.</p> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul>  <h3 id="browser-context-storage-state">storageState<a href="#browser-context-storage-state" aria-label="Direct link to storageState" title="Direct link to storageState">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>Returns storage state for this browser context, contains current cookies and local storage snapshot.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await browserContext.storageState();
await browserContext.storageState(options);</pre> <p><strong>Arguments</strong></p> <ul> <li>
<code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em> <ul> <li> <p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> <em>(optional)</em></p> <p>The file path to save the storage state to. If <code>path</code> is a relative path, then it is resolved relative to current working directory. If no path is provided, storage state is still returned, but won't be saved to the disk.</p> </li> </ul> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a>&gt; <ul> <li>
<code>cookies</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener noreferrer" title="Array">Array</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a>&gt; <ul> <li> <p><code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> </li> <li> <p><code>value</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> </li> <li> <p><code>domain</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> </li> <li> <p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> </li> <li> <p><code>expires</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a></p> <p>Unix time in seconds.</p> </li> <li> <p><code>httpOnly</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a></p> </li> <li> <p><code>secure</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a></p> </li> <li> <p><code>sameSite</code> "Strict" | "Lax" | "None"</p> </li> </ul> </li> <li>
<code>origins</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener noreferrer" title="Array">Array</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a>&gt; <ul> <li> <p><code>origin</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> </li> <li> <p><code>localStorage</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener noreferrer" title="Array">Array</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a>&gt;</p> <ul> <li> <p><code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> </li> <li> <p><code>value</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> </li> </ul> </li> </ul> </li> </ul> </li> </ul>  <h3 id="browser-context-unroute">unroute<a href="#browser-context-unroute" aria-label="Direct link to unroute" title="Direct link to unroute">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>Removes a route created with <a href="class-browsercontext.html#browser-context-route">browserContext.route()</a>. When <code>handler</code> is not specified, removes all routes for the <code>url</code>.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await browserContext.unroute(url);
await browserContext.unroute(url, handler);</pre> <p><strong>Arguments</strong></p> <ul> <li> <p><code>url</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp" target="_blank" rel="noopener noreferrer" title="RegExp">RegExp</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener noreferrer" title="Function">function</a>(<a href="https://nodejs.org/api/url.html" target="_blank" rel="noopener noreferrer" title="URL">URL</a>):<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noopener noreferrer" title="Boolean">boolean</a></p> <p>A glob pattern, regex pattern or predicate receiving <a href="https://nodejs.org/api/url.html" target="_blank" rel="noopener noreferrer" title="URL">URL</a> used to register a routing with <a href="class-browsercontext.html#browser-context-route">browserContext.route()</a>.</p> </li> <li> <p><code>handler</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener noreferrer" title="Function">function</a>(<a title="Route" href="class-route.html">Route</a>, <a title="Request" href="class-request.html">Request</a>):<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a>&gt; | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em></p> <p>Optional handler function used to register a routing with <a href="class-browsercontext.html#browser-context-route">browserContext.route()</a>.</p> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul>  <h3 id="browser-context-unroute-all">unrouteAll<a href="#browser-context-unroute-all" aria-label="Direct link to unrouteAll" title="Direct link to unrouteAll">​</a>
</h3>   <p>Removes all routes created with <a href="class-browsercontext.html#browser-context-route">browserContext.route()</a> and <a href="class-browsercontext.html#browser-context-route-from-har">browserContext.routeFromHAR()</a>.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await browserContext.unrouteAll();
await browserContext.unrouteAll(options);</pre> <p><strong>Arguments</strong></p> <ul> <li>
<code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em> <ul> <li> <p><code>behavior</code> "wait" | "ignoreErrors" | "default" <em>(optional)</em></p> <p>Specifies whether to wait for already running handlers and what to do if they throw errors:</p> <ul> <li>
<code>'default'</code> - do not wait for current handler calls (if any) to finish, if unrouted handler throws, it may result in unhandled error</li> <li>
<code>'wait'</code> - wait for current handler calls (if any) to finish</li> <li>
<code>'ignoreErrors'</code> - do not wait for current handler calls (if any) to finish, all errors thrown by the handlers after unrouting are silently caught</li> </ul> </li> </ul> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul>  <h3 id="browser-context-wait-for-event">waitForEvent<a href="#browser-context-wait-for-event" aria-label="Direct link to waitForEvent" title="Direct link to waitForEvent">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>Waits for event to fire and passes its value into the predicate function. Returns when the predicate returns truthy value. Will throw an error if the context closes before the event is fired. Returns the event data value.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">const pagePromise = context.waitForEvent('page');
await page.getByRole('button').click();
const page = await pagePromise;</pre> <p><strong>Arguments</strong></p> <ul> <li> <p><code>event</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> <p>Event name, same one would pass into <code>browserContext.on(event)</code>.</p> </li> <li> <p><code>optionsOrPredicate</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener noreferrer" title="Function">function</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em></p> <ul> <li> <p><code>predicate</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener noreferrer" title="Function">function</a></p> <p>Receives the event data and resolves to truthy value when the waiting should resolve.</p> </li> <li> <p><code>timeout</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noopener noreferrer" title="Number">number</a> <em>(optional)</em></p> <p>Maximum time to wait for in milliseconds. Defaults to <code>0</code> - no timeout. The default value can be changed via <code>actionTimeout</code> option in the config, or by using the <a href="class-browsercontext.html#browser-context-set-default-timeout">browserContext.setDefaultTimeout()</a> method.</p> </li> </ul> <p>Either a predicate that receives an event or an options object. Optional.</p> </li> <li> <p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <em>(optional)</em></p> <ul> <li> <p><code>predicate</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener noreferrer" title="Function">function</a> <em>(optional)</em></p> <p>Receives the event data and resolves to truthy value when the waiting should resolve.</p> </li> </ul> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a>&gt;
</li> </ul>  <h2 id="properties">Properties<a href="#properties" aria-label="Direct link to Properties" title="Direct link to Properties">​</a>
</h2> <h3 id="browser-context-clock">clock<a href="#browser-context-clock" aria-label="Direct link to clock" title="Direct link to clock">​</a>
</h3>   <p>Playwright has ability to mock clock and passage of time.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">browserContext.clock</pre> <p><strong>Type</strong></p> <ul> <li><a title="Clock" href="class-clock.html">Clock</a></li> </ul>  <h3 id="browser-context-request">request<a href="#browser-context-request" aria-label="Direct link to request" title="Direct link to request">​</a>
</h3>   <p>API testing helper associated with this context. Requests made with this API will use context cookies.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">browserContext.request</pre> <p><strong>Type</strong></p> <ul> <li><a title="APIRequestContext" href="class-apirequestcontext.html">APIRequestContext</a></li> </ul>  <h3 id="browser-context-tracing">tracing<a href="#browser-context-tracing" aria-label="Direct link to tracing" title="Direct link to tracing">​</a>
</h3>   <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">browserContext.tracing</pre> <p><strong>Type</strong></p> <ul> <li><a title="Tracing" href="class-tracing.html">Tracing</a></li> </ul>  <h2 id="events">Events<a href="#events" aria-label="Direct link to Events" title="Direct link to Events">​</a>
</h2> <h3 id="browser-context-event-background-page">on('backgroundpage')<a href="#browser-context-event-background-page" aria-label="Direct link to on('backgroundpage')" title="Direct link to on('backgroundpage')">​</a>
</h3>   <blockquote>
<div>
note</div>
<div><p>Only works with Chromium browser's persistent context.</p></div>
</blockquote> <p>Emitted when new background page is created in the context.</p> <pre tabindex="0" data-language="javascript">const backgroundPage = await context.waitForEvent('backgroundpage');</pre> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">browserContext.on('backgroundpage', data =&gt; {});</pre> <p><strong>Event data</strong></p> <ul> <li><a title="Page" href="class-page.html">Page</a></li> </ul>  <h3 id="browser-context-event-close">on('close')<a href="#browser-context-event-close" aria-label="Direct link to on('close')" title="Direct link to on('close')">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>Emitted when Browser context gets closed. This might happen because of one of the following:</p> <ul> <li>Browser context is closed.</li> <li>Browser application is closed or crashed.</li> <li>The <a href="class-browser.html#browser-close">browser.close()</a> method was called.</li> </ul> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">browserContext.on('close', data =&gt; {});</pre> <p><strong>Event data</strong></p> <ul> <li><a title="BrowserContext" href="class-browsercontext.html">BrowserContext</a></li> </ul>  <h3 id="browser-context-event-console">on('console')<a href="#browser-context-event-console" aria-label="Direct link to on('console')" title="Direct link to on('console')">​</a>
</h3>   <p>Emitted when JavaScript within the page calls one of console API methods, e.g. <code>console.log</code> or <code>console.dir</code>.</p> <p>The arguments passed into <code>console.log</code> and the page are available on the <a title="ConsoleMessage" href="class-consolemessage.html">ConsoleMessage</a> event handler argument.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">context.on('console', async msg =&gt; {
  const values = [];
  for (const arg of msg.args())
    values.push(await arg.jsonValue());
  console.log(...values);
});
await page.evaluate(() =&gt; console.log('hello', 5, { foo: 'bar' }));</pre> <p><strong>Event data</strong></p> <ul> <li><a title="ConsoleMessage" href="class-consolemessage.html">ConsoleMessage</a></li> </ul>  <h3 id="browser-context-event-dialog">on('dialog')<a href="#browser-context-event-dialog" aria-label="Direct link to on('dialog')" title="Direct link to on('dialog')">​</a>
</h3>   <p>Emitted when a JavaScript dialog appears, such as <code>alert</code>, <code>prompt</code>, <code>confirm</code> or <code>beforeunload</code>. Listener <strong>must</strong> either <a href="class-dialog.html#dialog-accept">dialog.accept()</a> or <a href="class-dialog.html#dialog-dismiss">dialog.dismiss()</a> the dialog - otherwise the page will <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop#never_blocking" target="_blank" rel="noopener noreferrer">freeze</a> waiting for the dialog, and actions like click will never finish.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">context.on('dialog', dialog =&gt; {
  dialog.accept();
});</pre> <blockquote>
<div>
note</div>
<div><p>When no <a href="class-page.html#page-event-dialog">page.on('dialog')</a> or <a href="class-browsercontext.html#browser-context-event-dialog">browserContext.on('dialog')</a> listeners are present, all dialogs are automatically dismissed.</p></div>
</blockquote> <p><strong>Event data</strong></p> <ul> <li><a title="Dialog" href="class-dialog.html">Dialog</a></li> </ul>  <h3 id="browser-context-event-page">on('page')<a href="#browser-context-event-page" aria-label="Direct link to on('page')" title="Direct link to on('page')">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <p>The event is emitted when a new Page is created in the BrowserContext. The page may still be loading. The event will also fire for popup pages. See also <a href="class-page.html#page-event-popup">page.on('popup')</a> to receive events about popups relevant to a specific page.</p> <p>The earliest moment that page is available is when it has navigated to the initial url. For example, when opening a popup with <code>window.open('http://example.com')</code>, this event will fire when the network request to "<a href="http://example.com" target="_blank" rel="noopener noreferrer">http://example.com</a>" is done and its response has started loading in the popup. If you would like to route/listen to this network request, use <a href="class-browsercontext.html#browser-context-route">browserContext.route()</a> and <a href="class-browsercontext.html#browser-context-event-request">browserContext.on('request')</a> respectively instead of similar methods on the <a title="Page" href="class-page.html">Page</a>.</p> <pre tabindex="0" data-language="javascript">const newPagePromise = context.waitForEvent('page');
await page.getByText('open new page').click();
const newPage = await newPagePromise;
console.log(await newPage.evaluate('location.href'));</pre> <blockquote>
<div>
note</div>
<div><p>Use <a href="class-page.html#page-wait-for-load-state">page.waitForLoadState()</a> to wait until the page gets to a particular state (you should not need it in most cases).</p></div>
</blockquote> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">browserContext.on('page', data =&gt; {});</pre> <p><strong>Event data</strong></p> <ul> <li><a title="Page" href="class-page.html">Page</a></li> </ul>  <h3 id="browser-context-event-request">on('request')<a href="#browser-context-event-request" aria-label="Direct link to on('request')" title="Direct link to on('request')">​</a>
</h3>   <p>Emitted when a request is issued from any pages created through this context. The <a title="Request" href="class-request.html">request</a> object is read-only. To only listen for requests from a particular page, use <a href="class-page.html#page-event-request">page.on('request')</a>.</p> <p>In order to intercept and mutate requests, see <a href="class-browsercontext.html#browser-context-route">browserContext.route()</a> or <a href="class-page.html#page-route">page.route()</a>.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">browserContext.on('request', data =&gt; {});</pre> <p><strong>Event data</strong></p> <ul> <li><a title="Request" href="class-request.html">Request</a></li> </ul>  <h3 id="browser-context-event-request-failed">on('requestfailed')<a href="#browser-context-event-request-failed" aria-label="Direct link to on('requestfailed')" title="Direct link to on('requestfailed')">​</a>
</h3>   <p>Emitted when a request fails, for example by timing out. To only listen for failed requests from a particular page, use <a href="class-page.html#page-event-request-failed">page.on('requestfailed')</a>.</p> <blockquote>
<div>
note</div>
<div><p>HTTP Error responses, such as 404 or 503, are still successful responses from HTTP standpoint, so request will complete with <a href="class-browsercontext.html#browser-context-event-request-finished">browserContext.on('requestfinished')</a> event and not with <a href="class-browsercontext.html#browser-context-event-request-failed">browserContext.on('requestfailed')</a>.</p></div>
</blockquote> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">browserContext.on('requestfailed', data =&gt; {});</pre> <p><strong>Event data</strong></p> <ul> <li><a title="Request" href="class-request.html">Request</a></li> </ul>  <h3 id="browser-context-event-request-finished">on('requestfinished')<a href="#browser-context-event-request-finished" aria-label="Direct link to on('requestfinished')" title="Direct link to on('requestfinished')">​</a>
</h3>   <p>Emitted when a request finishes successfully after downloading the response body. For a successful response, the sequence of events is <code>request</code>, <code>response</code> and <code>requestfinished</code>. To listen for successful requests from a particular page, use <a href="class-page.html#page-event-request-finished">page.on('requestfinished')</a>.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">browserContext.on('requestfinished', data =&gt; {});</pre> <p><strong>Event data</strong></p> <ul> <li><a title="Request" href="class-request.html">Request</a></li> </ul>  <h3 id="browser-context-event-response">on('response')<a href="#browser-context-event-response" aria-label="Direct link to on('response')" title="Direct link to on('response')">​</a>
</h3>   <p>Emitted when <a title="Response" href="class-response.html">response</a> status and headers are received for a request. For a successful response, the sequence of events is <code>request</code>, <code>response</code> and <code>requestfinished</code>. To listen for response events from a particular page, use <a href="class-page.html#page-event-response">page.on('response')</a>.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">browserContext.on('response', data =&gt; {});</pre> <p><strong>Event data</strong></p> <ul> <li><a title="Response" href="class-response.html">Response</a></li> </ul>  <h3 id="browser-context-event-service-worker">on('serviceworker')<a href="#browser-context-event-service-worker" aria-label="Direct link to on('serviceworker')" title="Direct link to on('serviceworker')">​</a>
</h3>   <blockquote>
<div>
note</div>
<div><p>Service workers are only supported on Chromium-based browsers.</p></div>
</blockquote> <p>Emitted when new service worker is created in the context.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">browserContext.on('serviceworker', data =&gt; {});</pre> <p><strong>Event data</strong></p> <ul> <li><a title="Worker" href="class-worker.html">Worker</a></li> </ul>  <h3 id="browser-context-event-web-error">on('weberror')<a href="#browser-context-event-web-error" aria-label="Direct link to on('weberror')" title="Direct link to on('weberror')">​</a>
</h3>   <p>Emitted when exception is unhandled in any of the pages in this context. To listen for errors from a particular page, use <a href="class-page.html#page-event-page-error">page.on('pageerror')</a> instead.</p> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">browserContext.on('weberror', data =&gt; {});</pre> <p><strong>Event data</strong></p> <ul> <li><a title="WebError" href="class-weberror.html">WebError</a></li> </ul>  <h2 id="deprecated">Deprecated<a href="#deprecated" aria-label="Direct link to Deprecated" title="Direct link to Deprecated">​</a>
</h2> <h3 id="browser-context-set-http-credentials">setHTTPCredentials<a href="#browser-context-set-http-credentials" aria-label="Direct link to setHTTPCredentials" title="Direct link to setHTTPCredentials">​</a>
</h3> <font size="2" style="position:relative;top:-20px">Added before v1.9</font>  <blockquote>
<div>
Deprecated</div>
<div><p>Browsers may cache credentials after successful authentication. Create a new browser context instead.</p></div>
</blockquote> <p><strong>Usage</strong></p> <pre tabindex="0" data-language="javascript">await browserContext.setHTTPCredentials(httpCredentials);</pre> <p><strong>Arguments</strong></p> <ul> <li>
<code>httpCredentials</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null" target="_blank" rel="noopener noreferrer" title="null">null</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noopener noreferrer" title="Object">Object</a> <ul> <li> <p><code>username</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> </li> <li> <p><code>password</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noopener noreferrer" title="string">string</a></p> </li> </ul> </li> </ul> <p><strong>Returns</strong></p> <ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer" title="Promise">Promise</a>&lt;<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined" target="_blank" rel="noopener noreferrer" title="void">void</a>&gt;
</li> </ul><div class="_attribution">
  <p class="_attribution-p">
          &copy; 2024 Microsoft<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://playwright.dev/docs/api/class-browsercontext" class="_attribution-link">https://playwright.dev/docs/api/class-browsercontext</a>
  </p>
</div>
