<header><h1>Test use options</h1></header><h2 id="introduction">Introduction<a href="#introduction" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a>
</h2> <p>In addition to configuring the test runner you can also configure <a href="#emulation-options">Emulation</a>, <a href="#network-options">Network</a> and <a href="#recording-options">Recording</a> for the <a title="Browser" href="api/class-browser.html">Browser</a> or <a title="BrowserContext" href="api/class-browsercontext.html">BrowserContext</a>. These options are passed to the <code>use: {}</code> object in the Playwright config.</p> <h3 id="basic-options">Basic Options<a href="#basic-options" aria-label="Direct link to Basic Options" title="Direct link to Basic Options">​</a>
</h3> <p>Set the base URL and storage state for all tests:</p> <pre tabindex="0" data-language="javascript">import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    // Base URL to use in actions like `await page.goto('/')`.
    baseURL: 'http://127.0.0.1:3000',

    // Populates context with given storage state.
    storageState: 'state.json',
  },
});</pre> <table>
<thead><tr>
<th style="text-align:left">Option</th>
<th style="text-align:left">Description</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left"><a href="api/class-testoptions.html#test-options-base-url">testOptions.baseURL</a></td>
<td style="text-align:left">Base URL used for all pages in the context. Allows navigating by using just the path, for example <code>page.goto('/settings')</code>.</td>
</tr>
<tr>
<td style="text-align:left"><a href="api/class-testoptions.html#test-options-storage-state">testOptions.storageState</a></td>
<td style="text-align:left">Populates context with given storage state. Useful for easy authentication, <a href="auth.html">learn more</a>.</td>
</tr>
</tbody>
</table> <h3 id="emulation-options">Emulation Options<a href="#emulation-options" aria-label="Direct link to Emulation Options" title="Direct link to Emulation Options">​</a>
</h3> <p>With Playwright you can emulate a real device such as a mobile phone or tablet. See our <a href="test-projects.html">guide on projects</a> for more info on emulating devices. You can also emulate the <code>"geolocation"</code>, <code>"locale"</code> and <code>"timezone"</code> for all tests or for a specific test as well as set the <code>"permissions"</code> to show notifications or change the <code>"colorScheme"</code>. See our <a href="emulation.html">Emulation</a> guide to learn more.</p> <pre tabindex="0" data-language="javascript">import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    // Emulates `'prefers-colors-scheme'` media feature.
    colorScheme: 'dark',

    // Context geolocation.
    geolocation: { longitude: 12.492507, latitude: 41.889938 },

    // Emulates the user locale.
    locale: 'en-GB',

    // Grants specified permissions to the browser context.
    permissions: ['geolocation'],

    // Emulates the user timezone.
    timezoneId: 'Europe/Paris',

    // Viewport used for all pages in the context.
    viewport: { width: 1280, height: 720 },
  },
});</pre> <table>
<thead><tr>
<th style="text-align:left">Option</th>
<th style="text-align:left">Description</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left"><a href="api/class-testoptions.html#test-options-color-scheme">testOptions.colorScheme</a></td>
<td style="text-align:left">
<a href="emulation.html#color-scheme-and-media">Emulates</a> <code>'prefers-colors-scheme'</code> media feature, supported values are <code>'light'</code>, <code>'dark'</code>, <code>'no-preference'</code>
</td>
</tr>
<tr>
<td style="text-align:left"><a href="api/class-testoptions.html#test-options-geolocation">testOptions.geolocation</a></td>
<td style="text-align:left">Context <a href="emulation.html#geolocation">geolocation</a>.</td>
</tr>
<tr>
<td style="text-align:left"><a href="api/class-testoptions.html#test-options-locale">testOptions.locale</a></td>
<td style="text-align:left">
<a href="emulation.html#locale--timezone">Emulates</a> the user locale, for example <code>en-GB</code>, <code>de-DE</code>, etc.</td>
</tr>
<tr>
<td style="text-align:left"><a href="api/class-testoptions.html#test-options-permissions">testOptions.permissions</a></td>
<td style="text-align:left">A list of <a href="emulation.html#permissions">permissions</a> to grant to all pages in the context.</td>
</tr>
<tr>
<td style="text-align:left"><a href="api/class-testoptions.html#test-options-timezone-id">testOptions.timezoneId</a></td>
<td style="text-align:left">Changes the <a href="emulation.html#locale--timezone">timezone</a> of the context.</td>
</tr>
<tr>
<td style="text-align:left"><a href="api/class-testoptions.html#test-options-viewport">testOptions.viewport</a></td>
<td style="text-align:left">
<a href="emulation.html#viewport">Viewport</a> used for all pages in the context.</td>
</tr>
</tbody>
</table> <h3 id="network-options">Network Options<a href="#network-options" aria-label="Direct link to Network Options" title="Direct link to Network Options">​</a>
</h3> <p>Available options to configure networking:</p> <pre tabindex="0" data-language="javascript">import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    // Whether to automatically download all the attachments.
    acceptDownloads: false,

    // An object containing additional HTTP headers to be sent with every request.
    extraHTTPHeaders: {
      'X-My-Header': 'value',
    },

    // Credentials for HTTP authentication.
    httpCredentials: {
      username: 'user',
      password: 'pass',
    },

    // Whether to ignore HTTPS errors during navigation.
    ignoreHTTPSErrors: true,

    // Whether to emulate network being offline.
    offline: true,

    // Proxy settings used for all pages in the test.
    proxy: {
      server: 'http://myproxy.com:3128',
      bypass: 'localhost',
    },
  },
});</pre> <table>
<thead><tr>
<th style="text-align:left">Option</th>
<th style="text-align:left">Description</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left"><a href="api/class-testoptions.html#test-options-accept-downloads">testOptions.acceptDownloads</a></td>
<td style="text-align:left">Whether to automatically download all the attachments, defaults to <code>true</code>. <a href="downloads.html">Learn more</a> about working with downloads.</td>
</tr>
<tr>
<td style="text-align:left"><a href="api/class-testoptions.html#test-options-extra-http-headers">testOptions.extraHTTPHeaders</a></td>
<td style="text-align:left">An object containing additional HTTP headers to be sent with every request. All header values must be strings.</td>
</tr>
<tr>
<td style="text-align:left"><a href="api/class-testoptions.html#test-options-http-credentials">testOptions.httpCredentials</a></td>
<td style="text-align:left">Credentials for <a href="network.html#http-authentication">HTTP authentication</a>.</td>
</tr>
<tr>
<td style="text-align:left"><a href="api/class-testoptions.html#test-options-ignore-https-errors">testOptions.ignoreHTTPSErrors</a></td>
<td style="text-align:left">Whether to ignore HTTPS errors during navigation.</td>
</tr>
<tr>
<td style="text-align:left"><a href="api/class-testoptions.html#test-options-offline">testOptions.offline</a></td>
<td style="text-align:left">Whether to emulate network being offline.</td>
</tr>
<tr>
<td style="text-align:left"><a href="api/class-testoptions.html#test-options-proxy">testOptions.proxy</a></td>
<td style="text-align:left">
<a href="network.html#http-proxy">Proxy settings</a> used for all pages in the test.</td>
</tr>
</tbody>
</table> <blockquote>
<div>
note</div>
<div><p>You don't have to configure anything to mock network requests. Just define a custom <a title="Route" href="api/class-route.html">Route</a> that mocks the network for a browser context. See our <a href="network.html">network mocking guide</a> to learn more.</p></div>
</blockquote> <h3 id="recording-options">Recording Options<a href="#recording-options" aria-label="Direct link to Recording Options" title="Direct link to Recording Options">​</a>
</h3> <p>With Playwright you can capture screenshots, record videos as well as traces of your test. By default these are turned off but you can enable them by setting the <code>screenshot</code>, <code>video</code> and <code>trace</code> options in your <code>playwright.config.js</code> file.</p> <p>Trace files, screenshots and videos will appear in the test output directory, typically <code>test-results</code>.</p> <pre tabindex="0" data-language="javascript">import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    // Capture screenshot after each test failure.
    screenshot: 'only-on-failure',

    // Record trace only when retrying a test for the first time.
    trace: 'on-first-retry',

    // Record video only when retrying a test for the first time.
    video: 'on-first-retry'
  },
});</pre> <table>
<thead><tr>
<th style="text-align:left">Option</th>
<th style="text-align:left">Description</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left"><a href="api/class-testoptions.html#test-options-screenshot">testOptions.screenshot</a></td>
<td style="text-align:left">Capture <a href="screenshots.html">screenshots</a> of your test. Options include <code>'off'</code>, <code>'on'</code> and <code>'only-on-failure'</code>
</td>
</tr>
<tr>
<td style="text-align:left"><a href="api/class-testoptions.html#test-options-trace">testOptions.trace</a></td>
<td style="text-align:left">Playwright can produce test traces while running the tests. Later on, you can view the trace and get detailed information about Playwright execution by opening <a href="trace-viewer.html">Trace Viewer</a>. Options include: <code>'off'</code>, <code>'on'</code>, <code>'retain-on-failure'</code> and <code>'on-first-retry'</code>
</td>
</tr>
<tr>
<td style="text-align:left"><a href="api/class-testoptions.html#test-options-video">testOptions.video</a></td>
<td style="text-align:left">Playwright can record <a href="videos.html">videos</a> for your tests. Options include: <code>'off'</code>, <code>'on'</code>, <code>'retain-on-failure'</code> and <code>'on-first-retry'</code>
</td>
</tr>
</tbody>
</table> <h3 id="other-options">Other Options<a href="#other-options" aria-label="Direct link to Other Options" title="Direct link to Other Options">​</a>
</h3> <pre tabindex="0" data-language="javascript">import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    // Maximum time each action such as `click()` can take. Defaults to 0 (no limit).
    actionTimeout: 0,

    // Name of the browser that runs tests. For example `chromium`, `firefox`, `webkit`.
    browserName: 'chromium',

    // Toggles bypassing Content-Security-Policy.
    bypassCSP: true,

    // Channel to use, for example "chrome", "chrome-beta", "msedge", "msedge-beta".
    channel: 'chrome',

    // Run browser in headless mode.
    headless: false,

    // Change the default data-testid attribute.
    testIdAttribute: 'pw-test-id',
  },
});</pre> <table>
<thead><tr>
<th style="text-align:left">Option</th>
<th style="text-align:left">Description</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left"><a href="api/class-testoptions.html#test-options-action-timeout">testOptions.actionTimeout</a></td>
<td style="text-align:left">Timeout for each Playwright action in milliseconds. Defaults to <code>0</code> (no timeout). Learn more about <a href="test-timeouts.html">timeouts</a> and how to set them for a single test.</td>
</tr>
<tr>
<td style="text-align:left"><a href="api/class-testoptions.html#test-options-browser-name">testOptions.browserName</a></td>
<td style="text-align:left">Name of the browser that runs tests. Defaults to 'chromium'. Options include <code>chromium</code>, <code>firefox</code>, or <code>webkit</code>.</td>
</tr>
<tr>
<td style="text-align:left"><a href="api/class-testoptions.html#test-options-bypass-csp">testOptions.bypassCSP</a></td>
<td style="text-align:left">Toggles bypassing Content-Security-Policy. Useful when CSP includes the production origin. Defaults to <code>false</code>.</td>
</tr>
<tr>
<td style="text-align:left"><a href="api/class-testoptions.html#test-options-channel">testOptions.channel</a></td>
<td style="text-align:left">Browser channel to use. <a href="browsers.html">Learn more</a> about different browsers and channels.</td>
</tr>
<tr>
<td style="text-align:left"><a href="api/class-testoptions.html#test-options-headless">testOptions.headless</a></td>
<td style="text-align:left">Whether to run the browser in headless mode meaning no browser is shown when running tests. Defaults to <code>true</code>.</td>
</tr>
<tr>
<td style="text-align:left"><a href="api/class-testoptions.html#test-options-test-id-attribute">testOptions.testIdAttribute</a></td>
<td style="text-align:left">Changes the default <a href="locators.html#locate-by-test-id"><code>data-testid</code> attribute</a> used by Playwright locators.</td>
</tr>
</tbody>
</table> <h3 id="more-browser-and-context-options">More browser and context options<a href="#more-browser-and-context-options" aria-label="Direct link to More browser and context options" title="Direct link to More browser and context options">​</a>
</h3> <p>Any options accepted by <a href="api/class-browsertype.html#browser-type-launch">browserType.launch()</a> or <a href="api/class-browser.html#browser-new-context">browser.newContext()</a> can be put into <code>launchOptions</code> or <code>contextOptions</code> respectively in the <code>use</code> section.</p> <pre tabindex="0" data-language="javascript">import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    launchOptions: {
      slowMo: 50,
    },
  },
});</pre> <p>However, most common ones like <code>headless</code> or <code>viewport</code> are available directly in the <code>use</code> section - see <a href="#basic-options">basic options</a>, <a href="#emulation-options">emulation</a> or <a href="#network-options">network</a>.</p> <h3 id="explicit-context-creation-and-option-inheritance">Explicit Context Creation and Option Inheritance<a href="#explicit-context-creation-and-option-inheritance" aria-label="Direct link to Explicit Context Creation and Option Inheritance" title="Direct link to Explicit Context Creation and Option Inheritance">​</a>
</h3> <p>If using the built-in <code>browser</code> fixture, calling <a href="api/class-browser.html#browser-new-context">browser.newContext()</a> will create a context with options inherited from the config:</p> <pre tabindex="0" data-language="javascript">import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    userAgent: 'some custom ua',
    viewport: { width: 100, height: 100 },
  },
});</pre> <p>An example test illustrating the initial context options are set:</p> <pre tabindex="0" data-language="javascript">test('should inherit use options on context when using built-in browser fixture', async ({
  browser,
}) =&gt; {
  const context = await browser.newContext();
  const page = await context.newPage();
  expect(await page.evaluate(() =&gt; navigator.userAgent)).toBe('some custom ua');
  expect(await page.evaluate(() =&gt; window.innerWidth)).toBe(100);
  await context.close();
});</pre> <h3 id="configuration-scopes">Configuration Scopes<a href="#configuration-scopes" aria-label="Direct link to Configuration Scopes" title="Direct link to Configuration Scopes">​</a>
</h3> <p>You can configure Playwright globally, per project, or per test. For example, you can set the locale to be used globally by adding <code>locale</code> to the <code>use</code> option of the Playwright config, and then override it for a specific project using the <code>project</code> option in the config. You can also override it for a specific test by adding <code>test.use({})</code> in the test file and passing in the options.</p> <pre tabindex="0" data-language="javascript">import { defineConfig } from '@playwright/test';

export default defineConfig({
  use: {
    locale: 'en-GB'
  },
});</pre> <p>You can override options for a specific project using the <code>project</code> option in the Playwright config.</p> <pre tabindex="0" data-language="javascript">import { defineConfig, devices } from '@playwright/test';

export default defineConfig({
  projects: [
    {
      name: 'chromium',
      use: {
        ...devices['Desktop Chrome'],
        locale: 'de-DE',
      },
    },
  ],
});</pre> <p>You can override options for a specific test file by using the <code>test.use()</code> method and passing in the options. For example to run tests with the French locale for a specific test:</p> <pre tabindex="0" data-language="javascript">import { test, expect } from '@playwright/test';

test.use({ locale: 'fr-FR' });

test('example', async ({ page }) =&gt; {
  // ...
});</pre> <p>The same works inside a describe block. For example to run tests in a describe block with the French locale:</p> <pre tabindex="0" data-language="javascript">import { test, expect } from '@playwright/test';

test.describe('french language block', () =&gt; {

  test.use({ locale: 'fr-FR' });

  test('example', async ({ page }) =&gt; {
    // ...
  });
});</pre><div class="_attribution">
  <p class="_attribution-p">
          &copy; 2024 Microsoft<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://playwright.dev/docs/test-use-options" class="_attribution-link">https://playwright.dev/docs/test-use-options</a>
  </p>
</div>
