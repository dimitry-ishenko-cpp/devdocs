<h1><code>hx-sync</code></h1> <p>The <code>hx-sync</code> attribute allows you to synchronize AJAX requests between multiple elements.</p> <p>The <code>hx-sync</code> attribute consists of a CSS selector to indicate the element to synchronize on, followed optionally by a colon and then by an optional syncing strategy. The available strategies are:</p> <ul> <li>
<code>drop</code> - drop (ignore) this request if an existing request is in flight (the default)</li> <li>
<code>abort</code> - drop (ignore) this request if an existing request is in flight, and, if that is not the case, <em>abort</em> this request if another request occurs while it is still in flight</li> <li>
<code>replace</code> - abort the current request, if any, and replace it with this request</li> <li>
<code>queue</code> - place this request in the request queue associated with the given element</li> </ul> <p>The <code>queue</code> modifier can take an additional argument indicating exactly how to queue:</p> <ul> <li>
<code>queue first</code> - queue the first request to show up while a request is in flight</li> <li>
<code>queue last</code> - queue the last request to show up while a request is in flight</li> <li>
<code>queue all</code> - queue all requests that show up while a request is in flight</li> </ul> <h2 id="notes">Notes</h2> <ul> <li>
<code>hx-sync</code> is inherited and can be placed on a parent element</li> </ul> <p>This example resolves a race condition between a form’s submit request and an individual input’s validation request. Normally, without using <code>hx-sync</code>, filling out the input and immediately submitting the form triggers two parallel requests to <code>/validate</code> and <code>/store</code>. Using <code>hx-sync="closest form:abort"</code> on the input will watch for requests on the form and abort the input’s request if a form request is present or starts while the input request is in flight.</p> <pre data-lang="html" style="background-color:#1f2329;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#e06c75;">form </span><span style="color:#d19a66;">hx-post</span><span>=</span><span style="color:#98c379;">"/store"</span><span>&gt;
</span><span>    &lt;</span><span style="color:#e06c75;">input </span><span style="color:#d19a66;">id</span><span>=</span><span style="color:#98c379;">"title" </span><span style="color:#d19a66;">name</span><span>=</span><span style="color:#98c379;">"title" </span><span style="color:#d19a66;">type</span><span>=</span><span style="color:#98c379;">"text" 
</span><span style="color:#d19a66;">hx-post</span><span>=</span><span style="color:#98c379;">"/validate" 
</span><span style="color:#d19a66;">hx-trigger</span><span>=</span><span style="color:#98c379;">"change"
</span><span style="color:#d19a66;">hx-sync</span><span>=</span><span style="color:#98c379;">"closest form:abort"</span><span>&gt;
</span><span>    &lt;</span><span style="color:#e06c75;">button </span><span style="color:#d19a66;">type</span><span>=</span><span style="color:#98c379;">"submit"</span><span>&gt;Submit&lt;/</span><span style="color:#e06c75;">button</span><span>&gt;
</span><span>&lt;/</span><span style="color:#e06c75;">form</span><span>&gt;
</span></code></pre> <p>If you’d rather prioritize the validation request over the submit request, you can use the <code>drop</code> strategy. This example will prioritize the validation request over the submit request so that if a validation request is in flight, the form cannot be submitted.</p> <pre data-lang="html" style="background-color:#1f2329;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#e06c75;">form </span><span style="color:#d19a66;">hx-post</span><span>=</span><span style="color:#98c379;">"/store"</span><span>&gt;
</span><span>    &lt;</span><span style="color:#e06c75;">input </span><span style="color:#d19a66;">id</span><span>=</span><span style="color:#98c379;">"title" </span><span style="color:#d19a66;">name</span><span>=</span><span style="color:#98c379;">"title" </span><span style="color:#d19a66;">type</span><span>=</span><span style="color:#98c379;">"text" 
</span><span style="color:#d19a66;">hx-post</span><span>=</span><span style="color:#98c379;">"/validate" 
</span><span style="color:#d19a66;">hx-trigger</span><span>=</span><span style="color:#98c379;">"change"
</span><span style="color:#d19a66;">hx-sync</span><span>=</span><span style="color:#98c379;">"closest form:drop"
</span><span>    &gt;
</span><span>    &lt;</span><span style="color:#e06c75;">button </span><span style="color:#d19a66;">type</span><span>=</span><span style="color:#98c379;">"submit"</span><span>&gt;Submit&lt;/</span><span style="color:#e06c75;">button</span><span>&gt;
</span><span>&lt;/</span><span style="color:#e06c75;">form</span><span>&gt;
</span></code></pre> <p>When dealing with forms that contain many inputs, you can prioritize the submit request over all input validation requests using the hx-sync <code>replace</code> strategy on the form tag. This will cancel any in-flight validation requests and issue only the <code>hx-post="/store"</code> request. If you’d rather abort the submit request and prioritize any existing validation requests you can use the <code>hx-sync="this:abort"</code> strategy on the form tag.</p> <pre data-lang="html" style="background-color:#1f2329;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#e06c75;">form </span><span style="color:#d19a66;">hx-post</span><span>=</span><span style="color:#98c379;">"/store" </span><span style="color:#d19a66;">hx-sync</span><span>=</span><span style="color:#98c379;">"this:replace"</span><span>&gt;
</span><span>    &lt;</span><span style="color:#e06c75;">input </span><span style="color:#d19a66;">id</span><span>=</span><span style="color:#98c379;">"title" </span><span style="color:#d19a66;">name</span><span>=</span><span style="color:#98c379;">"title" </span><span style="color:#d19a66;">type</span><span>=</span><span style="color:#98c379;">"text" </span><span style="color:#d19a66;">hx-post</span><span>=</span><span style="color:#98c379;">"/validate" </span><span style="color:#d19a66;">hx-trigger</span><span>=</span><span style="color:#98c379;">"change" </span><span>/&gt;
</span><span>    &lt;</span><span style="color:#e06c75;">button </span><span style="color:#d19a66;">type</span><span>=</span><span style="color:#98c379;">"submit"</span><span>&gt;Submit&lt;/</span><span style="color:#e06c75;">button</span><span>&gt;
</span><span>&lt;/</span><span style="color:#e06c75;">form</span><span>&gt;
</span></code></pre> <p>When implementing active search functionality the hx-trigger attribute’s <code>delay</code> modifier can be used to debounce the user’s input and avoid making multiple requests while the user types. However, once a request is made, if the user begins typing again a new request will begin even if the previous one has not finished processing. This example will cancel any in-flight requests and use only the last request. In cases where the search input is contained within the target, then using <code>hx-sync</code> like this also helps reduce the chances that the input will be replaced while the user is still typing.</p> <pre data-lang="html" style="background-color:#1f2329;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#e06c75;">input </span><span style="color:#d19a66;">type</span><span>=</span><span style="color:#98c379;">"search" 
</span><span style="color:#d19a66;">hx-get</span><span>=</span><span style="color:#98c379;">"/search" 
</span><span style="color:#d19a66;">hx-trigger</span><span>=</span><span style="color:#98c379;">"keyup changed delay:500ms, search" 
</span><span style="color:#d19a66;">hx-target</span><span>=</span><span style="color:#98c379;">"#search-results"
</span><span style="color:#d19a66;">hx-sync</span><span>=</span><span style="color:#98c379;">"this:replace"</span><span>&gt;
</span></code></pre><div class="_attribution">
  <p class="_attribution-p">
    Licensed under the Zero-Clause BSD License.<br>
    <a href="https://htmx.org/attributes/hx-sync/" class="_attribution-link">https://htmx.org/attributes/hx-sync/</a>
  </p>
</div>
