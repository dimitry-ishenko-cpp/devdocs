<h1><code>hx-sse</code></h1> <p><em>Note: This attribute will be migrated to an extension in htmx 2.0, which is available now. Please visit the <a href="../../extensions/server-sent-events/index.html">SSE extension page</a> to learn about the new implementation of SSE as an extension.</em></p> <p>The <code>hx-sse</code> allows you to work with <a rel="noopener" target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events">Server Sent Event</a> <code>EventSource</code>s directly from HTML. The value of the attribute can be one or more of the following, separated by white space:</p> <ul> <li>
<code>connect:&lt;url&gt;</code> - A URL to establish an <code>EventSource</code> against</li> <li>
<code>swap:&lt;eventName&gt;</code> - Swap SSE message content into a DOM node on matching event names</li> </ul> <h3 id="swap-message-content">Swap Message Content</h3> <p>When an SSE connection has been established (using the <code>connect</code> keyword) the contents of SSE messages can be swapped into the DOM using the <code>swap</code> keyword. This can be done on the element that creates the SSE connection, or any child element of it. Multiple elements can use <code>swap</code> to listen for Server Sent Events.</p> <p>Here is an example:</p> <pre data-lang="html" style="background-color:#1f2329;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#e06c75;">div </span><span style="color:#d19a66;">hx-sse</span><span>=</span><span style="color:#98c379;">"connect:/event_stream swap:eventName"</span><span>&gt;
</span><span>  ...
</span><span>&lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span></code></pre> <p>This example connects to a Server Sent Event stream, and begins swapping events named <code>eventName</code> into the same element.</p> <p>Here is another example:</p> <pre data-lang="html" style="background-color:#1f2329;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#e06c75;">div </span><span style="color:#d19a66;">hx-sse</span><span>=</span><span style="color:#98c379;">"connect:/event_stream"</span><span>&gt;
</span><span>  &lt;</span><span style="color:#e06c75;">div </span><span style="color:#d19a66;">hx-sse</span><span>=</span><span style="color:#98c379;">"swap:eventName1"</span><span>&gt;
</span><span>    ...
</span><span>  &lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span><span>  &lt;</span><span style="color:#e06c75;">div </span><span style="color:#d19a66;">hx-sse</span><span>=</span><span style="color:#98c379;">"swap:eventName2"</span><span>&gt;
</span><span>    ...
</span><span>  &lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span><span>&lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span></code></pre> <p>This example connects the Server Sent Event stream to the parent node, and directs different events to different child nodes based on the event name returned by the server.</p> <h3 id="trigger-server-callbacks">Trigger Server Callbacks</h3> <p>When a connection for server sent events has been established, child elements can listen for these events by using the special <a href="../hx-trigger/index.html"><code>hx-trigger</code></a> syntax <code>sse:&lt;event_name&gt;</code>. This, when combined with an <code>hx-get</code> or similar will trigger the element to make a request.</p> <p>Here is an example:</p> <pre data-lang="html" style="background-color:#1f2329;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>  &lt;</span><span style="color:#e06c75;">div </span><span style="color:#d19a66;">hx-sse</span><span>=</span><span style="color:#98c379;">"connect:/event_stream"</span><span>&gt;
</span><span>    &lt;</span><span style="color:#e06c75;">div </span><span style="color:#d19a66;">hx-get</span><span>=</span><span style="color:#98c379;">"/chatroom" </span><span style="color:#d19a66;">hx-trigger</span><span>=</span><span style="color:#98c379;">"sse:chatter"</span><span>&gt;
</span><span>      ...
</span><span>    &lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span><span>  &lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span></code></pre> <p>This example establishes an SSE connection to the <code>event_stream</code> end point which then triggers a <code>GET</code> to the <code>/chatroom</code> url whenever the <code>chatter</code> event is seen.</p> <h3 id="named-events">Named Events</h3> <p>The Server Sent Event specification allows servers to optionally include an event name with every event. <strong>Named events</strong> look like this:</p> <pre data-lang="txt" style="background-color:#1f2329;color:#abb2bf;" class="language-txt "><code class="language-txt" data-lang="txt"><span>event: EventName
</span><span>data: &lt;div&gt;Content to swap into your HTML page.&lt;/div&gt;
</span></code></pre> <pre data-lang="html" style="background-color:#1f2329;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#e06c75;">div </span><span style="color:#d19a66;">hx-sse</span><span>=</span><span style="color:#98c379;">"connect:/server-url swap:eventName"</span><span>&gt;&lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span></code></pre> <h3 id="data-only-events">Data Only Events</h3> <p>Alternatively, servers can provide <strong>data only events</strong> that do not have a name. In this case, Javascript (and HTMX) use the name “message” like this:</p> <pre data-lang="txt" style="background-color:#1f2329;color:#abb2bf;" class="language-txt "><code class="language-txt" data-lang="txt"><span>data: &lt;div&gt;Content to swap into your HTML page.&lt;/div&gt;
</span></code></pre> <pre data-lang="html" style="background-color:#1f2329;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#e06c75;">div </span><span style="color:#d19a66;">hx-sse</span><span>=</span><span style="color:#98c379;">"connect:/server-url swap:message"</span><span>&gt;&lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span></code></pre> <h3 id="test-sse-server">Test SSE Server</h3> <p>Htmx includes an SSE test server with many more examples of how to use Server Sent Events. Download the htmx source code from GitHub and navigate to /test/ws-sse to experiment.</p> <h2 id="notes">Notes</h2> <ul> <li>
<code>hx-sse</code> is not inherited</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    Licensed under the Zero-Clause BSD License.<br>
    <a href="https://htmx.org/attributes/hx-sse/" class="_attribution-link">https://htmx.org/attributes/hx-sse/</a>
  </p>
</div>
