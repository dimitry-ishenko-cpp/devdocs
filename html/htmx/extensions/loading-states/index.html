<h1>The <code>loading-states</code> Extension</h1> <p>This extension allows you to easily manage loading states while a request is in flight, including disabling elements, and adding and removing CSS classes.</p> <h2 id="install">Install</h2> <pre data-lang="html" style="background-color:#1f2329;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#e06c75;">script </span><span style="color:#d19a66;">src</span><span>=</span><span style="color:#98c379;">"https://unpkg.com/htmx.org/dist/ext/loading-states.js"</span><span>&gt;&lt;/</span><span style="color:#e06c75;">script</span><span>&gt;
</span></code></pre> <h2 id="usage">Usage</h2> <p>Add the <code>hx-ext="loading-states"</code> attribute to the body tag or to any parent element containing your htmx attributes.</p> <p>Add the following class to your stylesheet to make sure elements are hidden by default:</p> <pre data-lang="css" style="background-color:#1f2329;color:#abb2bf;" class="language-css "><code class="language-css" data-lang="css"><span style="color:#d19a66;">[data-loading] </span><span>{
</span><span>  display: none;
</span><span>}
</span></code></pre> <h2 id="supported-attributes">Supported attributes</h2> <ul> <li> <p><code>data-loading</code></p> <p>Shows the element. The default style is <code>inline-block</code>, but itâ€™s possible to use any display style by specifying it in the attribute value.</p> <pre data-lang="html" style="background-color:#1f2329;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#e06c75;">div </span><span style="color:#d19a66;">data-loading</span><span>&gt;loading&lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span><span>&lt;</span><span style="color:#e06c75;">div </span><span style="color:#d19a66;">data-loading</span><span>=</span><span style="color:#98c379;">"block"</span><span>&gt;loading&lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span><span>&lt;</span><span style="color:#e06c75;">div </span><span style="color:#d19a66;">data-loading</span><span>=</span><span style="color:#98c379;">"flex"</span><span>&gt;loading&lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span></code></pre> </li> <li> <p><code>data-loading-class</code></p> <p>Adds, then removes, CSS classes to the element:</p> <pre data-lang="html" style="background-color:#1f2329;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#e06c75;">div </span><span style="color:#d19a66;">class</span><span>=</span><span style="color:#98c379;">"transition-all ease-in-out duration-600" </span><span style="color:#d19a66;">data-loading-class</span><span>=</span><span style="color:#98c379;">"bg-gray-100 opacity-80"</span><span>&gt;
</span><span>...
</span><span>&lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span></code></pre> </li> <li> <p><code>data-loading-class-remove</code></p> <p>Removes, then adds back, CSS classes from the element.</p> <pre data-lang="html" style="background-color:#1f2329;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#e06c75;">div </span><span style="color:#d19a66;">class</span><span>=</span><span style="color:#98c379;">"p-8 bg-gray-100 transition-all ease-in-out duration-600" </span><span style="color:#d19a66;">data-loading-class-remove</span><span>=</span><span style="color:#98c379;">"bg-gray-100"</span><span>&gt;
</span><span>...
</span><span>&lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span></code></pre> </li> <li> <p><code>data-loading-disable</code></p> <p>Disables an element for the duration of the request.</p> <pre data-lang="html" style="background-color:#1f2329;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#e06c75;">button </span><span style="color:#d19a66;">data-loading-disable</span><span>&gt;Submit&lt;/</span><span style="color:#e06c75;">button</span><span>&gt;
</span></code></pre> </li> <li> <p><code>data-loading-aria-busy</code></p> <p>Add <a rel="noopener" target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/aria-busy"><code>aria-busy="true"</code></a> attribute to the element for the duration of the request</p> <pre data-lang="html" style="background-color:#1f2329;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#e06c75;">button </span><span style="color:#d19a66;">data-loading-aria-busy</span><span>&gt;Submit&lt;/</span><span style="color:#e06c75;">button</span><span>&gt;
</span></code></pre> </li> <li> <p><code>data-loading-delay</code></p> <p>Some actions may update quickly and showing a loading state in these cases may be more of a distraction. This attribute ensures that the loading state changes are applied only after 200ms if the request is not finished. The default delay can be modified through the attribute value and expressed in milliseconds:</p> <pre data-lang="html" style="background-color:#1f2329;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#e06c75;">button </span><span style="color:#d19a66;">type</span><span>=</span><span style="color:#98c379;">"submit" </span><span style="color:#d19a66;">data-loading-disable data-loading-delay</span><span>=</span><span style="color:#98c379;">"1000"</span><span>&gt;Submit&lt;/</span><span style="color:#e06c75;">button</span><span>&gt;
</span></code></pre> <p>You can place the <code>data-loading-delay</code> attribute directly on the element you want to disable, or in any parent element.</p> </li> <li> <p><code>data-loading-target</code></p> <p>Allows setting a different target to apply the loading states. The attribute value can be any valid CSS selector. The example below disables the submit button and shows the loading state when the form is submitted.</p> <pre data-lang="html" style="background-color:#1f2329;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#e06c75;">form </span><span style="color:#d19a66;">hx-post</span><span>=</span><span style="color:#98c379;">"/save"
</span><span style="color:#d19a66;">data-loading-target</span><span>=</span><span style="color:#98c379;">"#loading"
</span><span style="color:#d19a66;">data-loading-class-remove</span><span>=</span><span style="color:#98c379;">"hidden"</span><span>&gt;
</span><span>  &lt;</span><span style="color:#e06c75;">button </span><span style="color:#d19a66;">type</span><span>=</span><span style="color:#98c379;">"submit" </span><span style="color:#d19a66;">data-loading-disable</span><span>&gt;Submit&lt;/</span><span style="color:#e06c75;">button</span><span>&gt;
</span><span>&lt;/</span><span style="color:#e06c75;">form</span><span>&gt;
</span><span>&lt;</span><span style="color:#e06c75;">div </span><span style="color:#d19a66;">id</span><span>=</span><span style="color:#98c379;">"loading" </span><span style="color:#d19a66;">class</span><span>=</span><span style="color:#98c379;">"hidden"</span><span>&gt;Loading ...&lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span></code></pre> </li> <li> <p><code>data-loading-path</code></p> <p>Allows filtering the processing of loading states only for specific requests based on the request path.</p> <pre data-lang="html" style="background-color:#1f2329;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#e06c75;">form </span><span style="color:#d19a66;">hx-post</span><span>=</span><span style="color:#98c379;">"/save"</span><span>&gt;
</span><span>  &lt;</span><span style="color:#e06c75;">button </span><span style="color:#d19a66;">type</span><span>=</span><span style="color:#98c379;">"submit" </span><span style="color:#d19a66;">data-loading-disable data-loading-path</span><span>=</span><span style="color:#98c379;">"/save"</span><span>&gt;Submit&lt;/</span><span style="color:#e06c75;">button</span><span>&gt;
</span><span>&lt;/</span><span style="color:#e06c75;">form</span><span>&gt;
</span></code></pre> <p>You can place the <code>data-loading-path</code> attribute directly on the loading state element, or in any parent element.</p> <pre data-lang="html" style="background-color:#1f2329;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#e06c75;">form </span><span style="color:#d19a66;">hx-post</span><span>=</span><span style="color:#98c379;">"/save" </span><span style="color:#d19a66;">data-loading-path</span><span>=</span><span style="color:#98c379;">"/save"</span><span>&gt;
</span><span>  &lt;</span><span style="color:#e06c75;">button </span><span style="color:#d19a66;">type</span><span>=</span><span style="color:#98c379;">"submit" </span><span style="color:#d19a66;">data-loading-disable</span><span>&gt;Submit&lt;/</span><span style="color:#e06c75;">button</span><span>&gt;
</span><span>&lt;/</span><span style="color:#e06c75;">form</span><span>&gt;
</span></code></pre> </li> <li> <p><code>data-loading-states</code></p> <p>This attribute is optional and it allows defining a scope for the loading states so only elements within that scope are processed.</p> <pre data-lang="html" style="background-color:#1f2329;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#e06c75;">div </span><span style="color:#d19a66;">data-loading-states</span><span>&gt;
</span><span>  &lt;</span><span style="color:#e06c75;">div </span><span style="color:#d19a66;">hx-get</span><span>=</span><span style="color:#98c379;">""</span><span>&gt;&lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span><span>  &lt;</span><span style="color:#e06c75;">div </span><span style="color:#d19a66;">data-loading</span><span>&gt;loading&lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span><span>&lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span><span>&lt;</span><span style="color:#e06c75;">div </span><span style="color:#d19a66;">data-loading-states</span><span>&gt;
</span><span>  &lt;</span><span style="color:#e06c75;">div </span><span style="color:#d19a66;">hx-get</span><span>=</span><span style="color:#98c379;">""</span><span>&gt;&lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span><span>  &lt;</span><span style="color:#e06c75;">div </span><span style="color:#d19a66;">data-loading</span><span>&gt;loading&lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span><span>&lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span><span>&lt;</span><span style="color:#e06c75;">form </span><span style="color:#d19a66;">data-loading-states hx-post</span><span>=</span><span style="color:#98c379;">""</span><span>&gt;
</span><span>  &lt;</span><span style="color:#e06c75;">div </span><span style="color:#d19a66;">data-loading</span><span>&gt;loading&lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span><span>&lt;/</span><span style="color:#e06c75;">form</span><span>&gt;
</span></code></pre> </li> </ul><div class="_attribution">
  <p class="_attribution-p">
    Licensed under the Zero-Clause BSD License.<br>
    <a href="https://htmx.org/extensions/loading-states/" class="_attribution-link">https://htmx.org/extensions/loading-states/</a>
  </p>
</div>
