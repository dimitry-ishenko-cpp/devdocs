<h1>The <code>alpine-morph</code> Extension</h1> <p>Alpine.js now has a lightweight <a rel="noopener" target="_blank" href="https://alpinejs.dev/plugins/morph">morph plugin</a> and this extension allows you to use it as the swapping mechanism in htmx which is necessary to retain Alpine state when you have entire Alpine components swapped by htmx.</p> <h2 id="install">Install</h2> <pre data-lang="html" style="background-color:#1f2329;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#e06c75;">script </span><span style="color:#d19a66;">src</span><span>=</span><span style="color:#98c379;">"https://unpkg.com/htmx.org/dist/ext/alpine-morph.js"</span><span>&gt;&lt;/</span><span style="color:#e06c75;">script</span><span>&gt;
</span></code></pre> <h2 id="usage">Usage</h2> <pre data-lang="html" style="background-color:#1f2329;color:#abb2bf;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#e06c75;">header</span><span>&gt;
</span><span>  &lt;</span><span style="color:#e06c75;">script </span><span style="color:#d19a66;">src</span><span>=</span><span style="color:#98c379;">"https://unpkg.com/htmx.org@latest"</span><span>&gt;&lt;/</span><span style="color:#e06c75;">script</span><span>&gt;
</span><span>  &lt;</span><span style="color:#e06c75;">script </span><span style="color:#d19a66;">src</span><span>=</span><span style="color:#98c379;">"https://unpkg.com/htmx.org@latest/dist/ext/alpine-morph.js"</span><span>&gt;&lt;/</span><span style="color:#e06c75;">script</span><span>&gt;
</span><span style="font-style:italic;color:#848da1;">&lt;!-- Alpine Plugins --&gt;
</span><span>  &lt;</span><span style="color:#e06c75;">script </span><span style="color:#d19a66;">defer src</span><span>=</span><span style="color:#98c379;">"https://unpkg.com/@alpinejs/morph@3.x.x/dist/cdn.min.js"</span><span>&gt;&lt;/</span><span style="color:#e06c75;">script</span><span>&gt;
</span><span style="font-style:italic;color:#848da1;">&lt;!-- Alpine Core --&gt;
</span><span>  &lt;</span><span style="color:#e06c75;">script </span><span style="color:#d19a66;">defer src</span><span>=</span><span style="color:#98c379;">"https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"</span><span>&gt;&lt;/</span><span style="color:#e06c75;">script</span><span>&gt;
</span><span>&lt;/</span><span style="color:#e06c75;">header</span><span>&gt;
</span><span>&lt;</span><span style="color:#e06c75;">body</span><span>&gt;
</span><span>  &lt;</span><span style="color:#e06c75;">div </span><span style="color:#d19a66;">hx-target</span><span>=</span><span style="color:#98c379;">"this" </span><span style="color:#d19a66;">hx-ext</span><span>=</span><span style="color:#98c379;">"alpine-morph" </span><span style="color:#d19a66;">hx-swap</span><span>=</span><span style="color:#98c379;">"morph"</span><span>&gt;
</span><span>      &lt;</span><span style="color:#e06c75;">div </span><span style="color:#d19a66;">x-data</span><span>=</span><span style="color:#98c379;">"{ count: 0, replaced: false,
</span><span style="color:#98c379;">                     message: 'Change me, then press the button!' }"</span><span>&gt;
</span><span>          &lt;</span><span style="color:#e06c75;">input </span><span style="color:#d19a66;">type</span><span>=</span><span style="color:#98c379;">"text" </span><span style="color:#d19a66;">x-model</span><span>=</span><span style="color:#98c379;">"message"</span><span>&gt;
</span><span>          &lt;</span><span style="color:#e06c75;">div </span><span style="color:#d19a66;">x-text</span><span>=</span><span style="color:#98c379;">"count"</span><span>&gt;&lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span><span>          &lt;</span><span style="color:#e06c75;">button </span><span style="color:#d19a66;">x-bind:style</span><span>=</span><span style="color:#98c379;">"replaced &amp;&amp; {'backgroundColor': '#fecaca'}"
</span><span style="color:#d19a66;">x-on:click</span><span>=</span><span style="color:#98c379;">"replaced = true; count++"
</span><span style="color:#d19a66;">hx-get</span><span>=</span><span style="color:#98c379;">"/swap"</span><span>&gt;
</span><span>            Morph
</span><span>          &lt;/</span><span style="color:#e06c75;">button</span><span>&gt;
</span><span>      &lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span><span>  &lt;/</span><span style="color:#e06c75;">div</span><span>&gt;
</span><span>&lt;/</span><span style="color:#e06c75;">body</span><span>&gt;
</span></code></pre> <p>In the above example, all the Alpine x-data states (count, replaced, and message) are preserved even the entire Alpine component is swapped.</p> <p>NOTE: <code>/swap</code> response from the example above should return actual element that is being replaced (this is <code>&lt;div hx-target="this"...</code> element).</p><div class="_attribution">
  <p class="_attribution-p">
    Licensed under the Zero-Clause BSD License.<br>
    <a href="https://htmx.org/extensions/alpine-morph/" class="_attribution-link">https://htmx.org/extensions/alpine-morph/</a>
  </p>
</div>
