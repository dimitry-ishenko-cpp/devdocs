<h1 title="Interface ModuleReader" class="title">Interface ModuleReader</h1> <section class="class-description" id="class-description"> <dl class="notes"> <dt>All Superinterfaces:</dt> <dd>
<code><a href="../autocloseable.html" title="interface in java.lang">AutoCloseable</a></code>, <code><a href="../../io/closeable.html" title="interface in java.io">Closeable</a></code>
</dd> </dl>  <pre class="lang-java" data-language="java">public interface ModuleReader extends Closeable</pre> <div class="block">Provides access to the content of a module. <p> A module reader is intended for cases where access to the resources in a module is required, regardless of whether the module has been loaded. A framework that scans a collection of packaged modules on the file system, for example, may use a module reader to access a specific resource in each module. A module reader is also intended to be used by <code>ClassLoader</code> implementations that load classes and resources from modules. </p> <p> A resource in a module is identified by an abstract name that is a '<code>/</code>'-separated path string. For example, module <code>java.base</code> may have a resource "<code>java/lang/Object.class</code>" that, by convention, is the class file for <code>java.lang.Object</code>. A module reader may treat directories in the module content as resources (whether it does or not is module reader specific). Where the module content contains a directory that can be located as a resource then its name ends with a slash ('/'). The directory can also be located with a name that drops the trailing slash. </p> <p> A <code>ModuleReader</code> is <a href="modulereference.html#open()">open</a> upon creation and is closed by invoking the <a href="#close()"><code>close</code></a> method. Failure to close a module reader may result in a resource leak. The <code>
 try-with-resources</code> statement provides a useful construct to ensure that module readers are closed. </p> <p> A <code>ModuleReader</code> implementation may require permissions to access resources in the module. Consequently the <a href="#find(java.lang.String)"><code>find</code></a>, <a href="#open(java.lang.String)"><code>open</code></a>, <a href="#read(java.lang.String)"><code>read</code></a>, and <a href="#list()"><code>list</code></a> methods may throw <code>
 SecurityException</code> if access is denied by the security manager. </p>
</div> <dl class="notes"> <dt>Implementation Requirements:</dt> <dd>Implementations of <code>ModuleReader</code> should take great care when translating an abstract resource name to the location of a resource in a packaged module or on the file system. Implementations are advised to treat resource names with elements such as '<code>.</code>, '<code>..</code>', elements containing file separators, or empty elements as "not found". More generally, if the resource name is not in the stream of elements that the <code>list</code> method returns then the resource should be treated as "not found" to avoid inconsistencies.</dd> <dt>Since:</dt> <dd>9</dd> <dt>See Also:</dt> <dd> <ul class="tag-list"> <li><a href="modulereference.html" title="class in java.lang.module"><code>ModuleReference</code></a></li> </ul> </dd> </dl> </section> <section class="summary"> <section class="method-summary" id="method-summary"> <h2>Method Summary</h2> <div id="method-summary-table">  <div id="method-summary-table.tabpanel" role="tabpanel"> <table class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">                      <tr>
<th>Modifier and Type</th>
<th>Method</th>
<th>Description</th>
</tr>
<tr>
<td><code>void</code></td>
<td><code><a href="#close()" class="member-name-link">close</a>()</code></td>
<td> <div class="block">Closes the module reader.</div> </td>
</tr>
<tr>
<td><code><a href="../../util/optional.html" title="class in java.util">Optional</a><wbr>&lt;<a href="../../net/uri.html" title="class in java.net">URI</a>&gt;</wbr></code></td>
<td><code><a href="#find(java.lang.String)" class="member-name-link">find</a><wbr>(<a href="../string.html" title="class in java.lang">String</a> name)</wbr></code></td>
<td> <div class="block">Finds a resource, returning a URI to the resource in the module.</div> </td>
</tr>
<tr>
<td><code><a href="../../util/stream/stream.html" title="interface in java.util.stream">Stream</a><wbr>&lt;<a href="../string.html" title="class in java.lang">String</a>&gt;</wbr></code></td>
<td><code><a href="#list()" class="member-name-link">list</a>()</code></td>
<td> <div class="block">Lists the contents of the module, returning a stream of elements that are the names of all resources in the module.</div> </td>
</tr>
<tr>
<td><code>default <a href="../../util/optional.html" title="class in java.util">Optional</a><wbr>&lt;<a href="../../io/inputstream.html" title="class in java.io">InputStream</a>&gt;</wbr></code></td>
<td><code><a href="#open(java.lang.String)" class="member-name-link">open</a><wbr>(<a href="../string.html" title="class in java.lang">String</a> name)</wbr></code></td>
<td> <div class="block">Opens a resource, returning an input stream to read the resource in the module.</div> </td>
</tr>
<tr>
<td><code>default <a href="../../util/optional.html" title="class in java.util">Optional</a><wbr>&lt;<a href="../../nio/bytebuffer.html" title="class in java.nio">ByteBuffer</a>&gt;</wbr></code></td>
<td><code><a href="#read(java.lang.String)" class="member-name-link">read</a><wbr>(<a href="../string.html" title="class in java.lang">String</a> name)</wbr></code></td>
<td> <div class="block">Reads a resource, returning a byte buffer with the contents of the resource.</div> </td>
</tr>
<tr>
<td><code>default void</code></td>
<td><code><a href="#release(java.nio.ByteBuffer)" class="member-name-link">release</a><wbr>(<a href="../../nio/bytebuffer.html" title="class in java.nio">ByteBuffer</a> bb)</wbr></code></td>
<td> <div class="block">Releases a byte buffer.</div> </td>
</tr>
</table> </div> </div> </section> </section> <section class="details"> <section class="method-details" id="method-detail"> <h2>Method Details</h2>  </section><section class="detail" id="find(java.lang.String)"> <h3>find</h3> <pre class="lang-java" data-language="java">Optional&lt;URI&gt; find(String name) throws IOException</pre> <div class="block">Finds a resource, returning a URI to the resource in the module. <p> If the module reader can determine that the name locates a directory then the resulting URI will end with a slash ('/'). </p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>name</code> - The name of the resource to open for reading</dd> <dt>Returns:</dt> <dd>A URI to the resource; an empty <code>Optional</code> if the resource is not found or a URI cannot be constructed to locate the resource</dd> <dt>Throws:</dt> <dd>
<code><a href="../../io/ioexception.html" title="class in java.io">IOException</a></code> - If an I/O error occurs or the module reader is closed</dd> <dd>
<code><a href="../securityexception.html" title="class in java.lang">SecurityException</a></code> - If denied by the security manager</dd> <dt>See Also:</dt> <dd> <ul class="tag-list-long"> <li><a href="../classloader.html#getResource(java.lang.String)"><code>ClassLoader.getResource(String)</code></a></li> </ul> </dd> </dl> </section><section class="detail" id="open(java.lang.String)"> <h3>open</h3> <pre class="lang-java" data-language="java">default Optional&lt;InputStream&gt; open(String name) throws IOException</pre> <div class="block">Opens a resource, returning an input stream to read the resource in the module. <p> The behavior of the input stream when used after the module reader is closed is implementation specific and therefore not specified. </p>
</div> <dl class="notes"> <dt>Implementation Requirements:</dt> <dd>The default implementation invokes the <a href="#find(java.lang.String)"><code>find</code></a> method to get a URI to the resource. If found, then it attempts to construct a <a href="../../net/url.html" title="class in java.net"><code>URL</code></a> and open a connection to the resource.</dd> <dt>Parameters:</dt> <dd>
<code>name</code> - The name of the resource to open for reading</dd> <dt>Returns:</dt> <dd>An input stream to read the resource or an empty <code>Optional</code> if not found</dd> <dt>Throws:</dt> <dd>
<code><a href="../../io/ioexception.html" title="class in java.io">IOException</a></code> - If an I/O error occurs or the module reader is closed</dd> <dd>
<code><a href="../securityexception.html" title="class in java.lang">SecurityException</a></code> - If denied by the security manager</dd> </dl> </section><section class="detail" id="read(java.lang.String)"> <h3>read</h3> <pre class="lang-java" data-language="java">default Optional&lt;ByteBuffer&gt; read(String name) throws IOException</pre> <div class="block">Reads a resource, returning a byte buffer with the contents of the resource. The element at the returned buffer's position is the first byte of the resource, the element at the buffer's limit is the last byte of the resource. Once consumed, the <a href="#release(java.nio.ByteBuffer)"><code>release</code></a> method must be invoked. Failure to invoke the <code>release</code> method may result in a resource leak.</div> <dl class="notes"> <dt>API Note:</dt> <dd>This method is intended for high-performance class loading. It is not capable (or intended) to read arbitrary large resources that could potentially be 2GB or larger. The rationale for using this method in conjunction with the <code>release</code> method is to allow module reader implementations manage buffers in an efficient manner.</dd> <dt>Implementation Requirements:</dt> <dd>The default implementation invokes the <a href="#open(java.lang.String)"><code>open</code></a> method and reads all bytes from the input stream into a byte buffer.</dd> <dt>Parameters:</dt> <dd>
<code>name</code> - The name of the resource to read</dd> <dt>Returns:</dt> <dd>A byte buffer containing the contents of the resource or an empty <code>Optional</code> if not found</dd> <dt>Throws:</dt> <dd>
<code><a href="../../io/ioexception.html" title="class in java.io">IOException</a></code> - If an I/O error occurs or the module reader is closed</dd> <dd>
<code><a href="../securityexception.html" title="class in java.lang">SecurityException</a></code> - If denied by the security manager</dd> <dd>
<code><a href="../outofmemoryerror.html" title="class in java.lang">OutOfMemoryError</a></code> - If the resource is larger than <code>Integer.MAX_VALUE</code>, the maximum capacity of a byte buffer</dd> <dt>See Also:</dt> <dd> <ul class="tag-list-long"> <li><a href="../classloader.html#defineClass(java.lang.String,java.nio.ByteBuffer,java.security.ProtectionDomain)"><code>ClassLoader.defineClass(String, ByteBuffer, java.security.ProtectionDomain)</code></a></li> </ul> </dd> </dl> </section><section class="detail" id="release(java.nio.ByteBuffer)"> <h3>release</h3> <pre class="lang-java" data-language="java">default void release(ByteBuffer bb)</pre> <div class="block">Releases a byte buffer. This method should be invoked after consuming the contents of the buffer returned by the <code>read</code> method. The behavior of this method when invoked to release a buffer that has already been released, or the behavior when invoked to release a buffer after a <code>ModuleReader</code> is closed is implementation specific and therefore not specified.</div> <dl class="notes"> <dt>Implementation Requirements:</dt> <dd>The default implementation doesn't do anything except check if the byte buffer is null.</dd> <dt>Parameters:</dt> <dd>
<code>bb</code> - The byte buffer to release</dd> </dl> </section><section class="detail" id="list()"> <h3>list</h3> <pre class="lang-java" data-language="java">Stream&lt;String&gt; list() throws IOException</pre> <div class="block">Lists the contents of the module, returning a stream of elements that are the names of all resources in the module. Whether the stream of elements includes names corresponding to directories in the module is module reader specific. <p> In lazy implementations then an <code>IOException</code> may be thrown when using the stream to list the module contents. If this occurs then the <code>IOException</code> will be wrapped in an <a href="../../io/uncheckedioexception.html" title="class in java.io"><code>UncheckedIOException</code></a> and thrown from the method that caused the access to be attempted. <code>SecurityException</code> may also be thrown when using the stream to list the module contents and access is denied by the security manager. </p> <p> The returned stream may contain references to one or more open directories in the module. The directories are closed by closing the stream. </p> <p> The behavior of the stream when used after the module reader is closed is implementation specific and therefore not specified. </p>
</div> <dl class="notes"> <dt>API Note:</dt> <dd>This method should be used within a try-with-resources statement or similar control structure to ensure that any open directories referenced by the stream are closed promptly after the stream's operations have completed.</dd> <dt>Returns:</dt> <dd>A stream of elements that are the names of all resources in the module</dd> <dt>Throws:</dt> <dd>
<code><a href="../../io/ioexception.html" title="class in java.io">IOException</a></code> - If an I/O error occurs or the module reader is closed</dd> <dd>
<code><a href="../securityexception.html" title="class in java.lang">SecurityException</a></code> - If denied by the security manager</dd> </dl> </section><section class="detail" id="close()"> <h3>close</h3> <pre class="lang-java" data-language="java">void close() throws IOException</pre> <div class="block">Closes the module reader. Once closed then subsequent calls to locate or read a resource will fail by throwing <code>IOException</code>. <p> A module reader is not required to be asynchronously closeable. If a thread is reading a resource and another thread invokes the close method, then the second thread may block until the read operation is complete. </p>
</div> <dl class="notes"> <dt>Specified by:</dt> <dd>
<code><a href="../autocloseable.html#close()">close</a></code> in interface <code><a href="../autocloseable.html" title="interface in java.lang">AutoCloseable</a></code>
</dd> <dt>Specified by:</dt> <dd>
<code><a href="../../io/closeable.html#close()">close</a></code> in interface <code><a href="../../io/closeable.html" title="interface in java.io">Closeable</a></code>
</dd> <dt>Throws:</dt> <dd>
<code><a href="../../io/ioexception.html" title="class in java.io">IOException</a></code> - if an I/O error occurs</dd> </dl> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993, 2023, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/module/ModuleReader.html" class="_attribution-link">https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/module/ModuleReader.html</a>
  </p>
</div>
