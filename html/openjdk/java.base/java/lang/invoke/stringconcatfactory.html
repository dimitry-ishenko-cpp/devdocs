<h1 title="Class StringConcatFactory" class="title">Class StringConcatFactory</h1> <div class="inheritance" title="Inheritance Tree">
<a href="../object.html" title="class in java.lang">java.lang.Object</a> <div class="inheritance">java.lang.invoke.StringConcatFactory</div> </div> <section class="class-description" id="class-description">  <pre class="lang-java" data-language="java">public final class StringConcatFactory extends Object</pre> <div class="block">
<p>Methods to facilitate the creation of String concatenation methods, that can be used to efficiently concatenate a known number of arguments of known types, possibly after type adaptation and partial evaluation of arguments. These methods are typically used as <em>bootstrap methods</em> for <code>
 invokedynamic</code> call sites, to support the <em>string concatenation</em> feature of the Java Programming Language. </p>
<p>Indirect access to the behavior specified by the provided <code>
 MethodHandle</code> proceeds in order through two phases: </p>
<ol> <li>
<em>Linkage</em> occurs when the methods in this class are invoked. They take as arguments a method type describing the concatenated arguments count and types, and optionally the String <em>recipe</em>, plus the constants that participate in the String concatenation. The details on accepted recipe shapes are described further below. Linkage may involve dynamically loading a new class that implements the expected concatenation behavior. The <code>CallSite</code> holds the <code>MethodHandle</code> pointing to the exact concatenation method. The concatenation methods may be shared among different <code>CallSite</code>s, e.g. if linkage methods produce them as pure functions.</li> <li>
<em>Invocation</em> occurs when a generated concatenation method is invoked with the exact dynamic arguments. This may occur many times for a single concatenation method. The method referenced by the behavior <code>
 MethodHandle</code> is invoked with the static arguments and any additional dynamic arguments provided on invocation, as if by <a href="methodhandle.html#invoke(java.lang.Object...)"><code>MethodHandle.invoke(Object...)</code></a>.</li> </ol> <p> This class provides two forms of linkage methods: a simple version (<a href="#makeConcat(java.lang.invoke.MethodHandles.Lookup,java.lang.String,java.lang.invoke.MethodType)"><code>makeConcat(java.lang.invoke.MethodHandles.Lookup, String, MethodType)</code></a>) using only the dynamic arguments, and an advanced version (<a href="#makeConcatWithConstants(java.lang.invoke.MethodHandles.Lookup,java.lang.String,java.lang.invoke.MethodType,java.lang.String,java.lang.Object...)"><code>makeConcatWithConstants(java.lang.invoke.MethodHandles.Lookup, String, MethodType, String, Object...)</code></a> using the advanced forms of capturing the constant arguments. The advanced strategy can produce marginally better invocation bytecode, at the expense of exploding the number of shapes of string concatenation methods present at runtime, because those shapes would include constant static arguments as well.</p>
</div> <dl class="notes"> <dt>API Note:</dt> <dd><p>There is a JVM limit (classfile structural constraint): no method can call with more than 255 slots. This limits the number of static and dynamic arguments one can pass to bootstrap method. Since there are potential concatenation strategies that use <code>MethodHandle</code> combinators, we need to reserve a few empty slots on the parameter lists to capture the temporal results. This is why bootstrap methods in this factory do not accept more than 200 argument slots. Users requiring more than 200 argument slots in concatenation are expected to split the large concatenation in smaller expressions.</p></dd> <dt>Since:</dt> <dd>9</dd> </dl> </section> <section class="summary"> <section class="field-summary" id="field-summary"> <h2>Field Summary</h2>  <table class="summary-table three-column-summary">       <tr>
<th>Modifier and Type</th>
<th>Field</th>
<th>Description</th>
</tr>
<tr>
<td><code>static final int</code></td>
<td><code><a href="#MAX_INDY_CONCAT_ARG_SLOTS" class="member-name-link">MAX_INDY_CONCAT_ARG_SLOTS</a></code></td>
<td> <div class="block"><span class="preview-label">Preview.</span></div> <div class="block">Maximum number of argument slots in String Concat call.</div> </td>
</tr>
</table> </section><section class="method-summary" id="method-summary"> <h2>Method Summary</h2> <div id="method-summary-table">  <div id="method-summary-table.tabpanel" role="tabpanel"> <table class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">                   <tr>
<th>Modifier and Type</th>
<th>Method</th>
<th>Description</th>
</tr>
<tr>
<td><code>static <a href="callsite.html" title="class in java.lang.invoke">CallSite</a></code></td>
<td><code><a href="#makeConcat(java.lang.invoke.MethodHandles.Lookup,java.lang.String,java.lang.invoke.MethodType)" class="member-name-link">makeConcat</a><wbr>(<a href="methodhandles.lookup.html" title="class in java.lang.invoke">MethodHandles.Lookup</a> lookup,
 <a href="../string.html" title="class in java.lang">String</a> name,
 <a href="methodtype.html" title="class in java.lang.invoke">MethodType</a> concatType)</wbr></code></td>
<td> <div class="block">Facilitates the creation of optimized String concatenation methods, that can be used to efficiently concatenate a known number of arguments of known types, possibly after type adaptation and partial evaluation of arguments.</div> </td>
</tr>
<tr>
<td><code>static <a href="callsite.html" title="class in java.lang.invoke">CallSite</a></code></td>
<td><code><a href="#makeConcatWithConstants(java.lang.invoke.MethodHandles.Lookup,java.lang.String,java.lang.invoke.MethodType,java.lang.String,java.lang.Object...)" class="member-name-link">makeConcatWithConstants</a><wbr>(<a href="methodhandles.lookup.html" title="class in java.lang.invoke">MethodHandles.Lookup</a> lookup,
 <a href="../string.html" title="class in java.lang">String</a> name,
 <a href="methodtype.html" title="class in java.lang.invoke">MethodType</a> concatType,
 <a href="../string.html" title="class in java.lang">String</a> recipe,
 <a href="../object.html" title="class in java.lang">Object</a>... constants)</wbr></code></td>
<td> <div class="block">Facilitates the creation of optimized String concatenation methods, that can be used to efficiently concatenate a known number of arguments of known types, possibly after type adaptation and partial evaluation of arguments.</div> </td>
</tr>
<tr>
<td><code>static <a href="methodhandle.html" title="class in java.lang.invoke">MethodHandle</a></code></td>
<td><code><a href="#makeConcatWithTemplate(java.util.List,java.util.List)" class="member-name-link">makeConcatWithTemplate</a><wbr>(<a href="../../util/list.html" title="interface in java.util">List</a>&lt;<a href="../string.html" title="class in java.lang">String</a>&gt; fragments,
 <a href="../../util/list.html" title="interface in java.util">List</a>&lt;<a href="../class.html" title="class in java.lang">Class</a>&lt;?&gt;&gt; ptypes)</wbr></code></td>
<td> <div class="block"><span class="preview-label">Preview.</span></div> <div class="block">Simplified concatenation method to facilitate <a href="../stringtemplate.html" title="interface in java.lang"><code>StringTemplate</code></a><sup><a href="../stringtemplate.html#preview-java.lang.StringTemplate">PREVIEW</a></sup> concatenation.</div> </td>
</tr>
<tr>
<td><code>static <a href="../../util/list.html" title="interface in java.util">List</a><wbr>&lt;<a href="methodhandle.html" title="class in java.lang.invoke">MethodHandle</a>&gt;</wbr></code></td>
<td><code><a href="#makeConcatWithTemplateCluster(java.util.List,java.util.List,int)" class="member-name-link">makeConcatWithTemplateCluster</a><wbr>(<a href="../../util/list.html" title="interface in java.util">List</a>&lt;<a href="../string.html" title="class in java.lang">String</a>&gt; fragments,
 <a href="../../util/list.html" title="interface in java.util">List</a>&lt;<a href="../class.html" title="class in java.lang">Class</a>&lt;?&gt;&gt; ptypes,
 int maxSlots)</wbr></code></td>
<td> <div class="block"><span class="preview-label">Preview.</span></div> <div class="block">This method breaks up large concatenations into separate <a href="methodhandle.html" title="class in java.lang.invoke"><code>MethodHandles</code></a> based on the number of slots required per <a href="methodhandle.html" title="class in java.lang.invoke"><code>MethodHandle</code></a>.</div> </td>
</tr>
<tr>
<td><code>static <a href="methodhandle.html" title="class in java.lang.invoke">MethodHandle</a></code></td>
<td><code><a href="#makeConcatWithTemplateGetters(java.util.List,java.util.List,int)" class="member-name-link">makeConcatWithTemplateGetters</a><wbr>(<a href="../../util/list.html" title="interface in java.util">List</a>&lt;<a href="../string.html" title="class in java.lang">String</a>&gt; fragments,
 <a href="../../util/list.html" title="interface in java.util">List</a>&lt;<a href="methodhandle.html" title="class in java.lang.invoke">MethodHandle</a>&gt; getters,
 int maxSlots)</wbr></code></td>
<td> <div class="block"><span class="preview-label">Preview.</span></div> <div class="block">This method creates a <a href="methodhandle.html" title="class in java.lang.invoke"><code>MethodHandle</code></a> expecting one input, the receiver of the supplied getters.</div> </td>
</tr>
</table> </div> </div> <div class="inherited-list"> <h3 id="methods-inherited-from-class-java.lang.Object">Methods declared in class java.lang.<a href="../object.html" title="class in java.lang">Object</a>
</h3> <code><a href="../object.html#clone()">clone</a>, <a href="../object.html#equals(java.lang.Object)">equals</a>, <a href="../object.html#finalize()">finalize</a>, <a href="../object.html#getClass()">getClass</a>, <a href="../object.html#hashCode()">hashCode</a>, <a href="../object.html#notify()">notify</a>, <a href="../object.html#notifyAll()">notifyAll</a>, <a href="../object.html#toString()">toString</a>, <a href="../object.html#wait()">wait</a>, <a href="../object.html#wait(long)">wait</a>, <a href="../object.html#wait(long,int)">wait</a></code>
</div> </section> </section> <section class="details"> <section class="field-details" id="field-detail"> <h2>Field Details</h2>  </section><section class="detail" id="MAX_INDY_CONCAT_ARG_SLOTS"> <h3>MAX_INDY_CONCAT_ARG_SLOTS</h3> <pre class="lang-java" data-language="java">public static final int MAX_INDY_CONCAT_ARG_SLOTS</pre> <div class="preview-block" id="preview-MAX_INDY_CONCAT_ARG_SLOTS">
<span class="preview-label"><code>MAX_INDY_CONCAT_ARG_SLOTS</code> is a preview API of the Java platform.</span> <div class="preview-comment">Programs can only use <code>MAX_INDY_CONCAT_ARG_SLOTS</code> when preview features are enabled.</div> <div class="preview-comment">Preview features may be removed in a future release, or upgraded to permanent features of the Java platform.</div> </div> <div class="block">Maximum number of argument slots in String Concat call. While the maximum number of argument slots that indy call can handle is 253, we do not use all those slots, to let the strategies with MethodHandle combinators to use some arguments.</div> <dl class="notes"> <dt>Since:</dt> <dd>21</dd> </dl> </section><section class="method-details" id="method-detail"> <h2>Method Details</h2>  </section><section class="detail" id="makeConcat(java.lang.invoke.MethodHandles.Lookup,java.lang.String,java.lang.invoke.MethodType)"> <h3>makeConcat</h3> <pre class="lang-java" data-language="java">public static CallSite makeConcat(MethodHandles.Lookup lookup, String name, MethodType concatType) throws StringConcatException</pre> <div class="block">Facilitates the creation of optimized String concatenation methods, that can be used to efficiently concatenate a known number of arguments of known types, possibly after type adaptation and partial evaluation of arguments. Typically used as a <em>bootstrap method</em> for <code>
 invokedynamic</code> call sites, to support the <em>string concatenation</em> feature of the Java Programming Language. <p>When the target of the <code>CallSite</code> returned from this method is invoked, it returns the result of String concatenation, taking all function arguments passed to the linkage method as inputs for concatenation. The target signature is given by <code>concatType</code>. For a target accepting: </p>
<ul> <li>zero inputs, concatenation results in an empty string;</li> <li>one input, concatenation results in the single input converted as per JLS <a href="https://docs.oracle.com/javase/specs/jls/se21/html/jls-5.html#jls-5.1.11">5.1.11</a> "String Conversion"; otherwise</li> <li>two or more inputs, the inputs are concatenated as per requirements stated in JLS <a href="https://docs.oracle.com/javase/specs/jls/se21/html/jls-15.html#jls-15.18.1">15.18.1</a> "String Concatenation Operator +". The inputs are converted as per JLS <a href="https://docs.oracle.com/javase/specs/jls/se21/html/jls-5.html#jls-5.1.11">5.1.11</a> "String Conversion", and combined from left to right.</li> </ul> <p>Assume the linkage arguments are as follows: </p>
<ul> <li>
<code>concatType</code>, describing the <code>CallSite</code> signature</li> </ul> <p>Then the following linkage invariants must hold: </p>
<ul> <li>The number of parameter slots in <code>concatType</code> is less than or equal to 200</li> <li>The return type in <code>concatType</code> is assignable from <a href="../string.html" title="class in java.lang"><code>String</code></a>
</li> </ul>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>lookup</code> - Represents a lookup context with the accessibility privileges of the caller. Specifically, the lookup context must have <a href="methodhandles.lookup.html#hasFullPrivilegeAccess()">full privilege access</a>. When used with <code>invokedynamic</code>, this is stacked automatically by the VM.</dd> <dd>
<code>name</code> - The name of the method to implement. This name is arbitrary, and has no meaning for this linkage method. When used with <code>invokedynamic</code>, this is provided by the <code>NameAndType</code> of the <code>InvokeDynamic</code> structure and is stacked automatically by the VM.</dd> <dd>
<code>concatType</code> - The expected signature of the <code>CallSite</code>. The parameter types represent the types of concatenation arguments; the return type is always assignable from <a href="../string.html" title="class in java.lang"><code>String</code></a>. When used with <code>invokedynamic</code>, this is provided by the <code>NameAndType</code> of the <code>
                   InvokeDynamic</code> structure and is stacked automatically by the VM.</dd> <dt>Returns:</dt> <dd>a CallSite whose target can be used to perform String concatenation, with dynamic concatenation arguments described by the given <code>concatType</code>.</dd> <dt>Throws:</dt> <dd>
<code><a href="stringconcatexception.html" title="class in java.lang.invoke">StringConcatException</a></code> - If any of the linkage invariants described here are violated, or the lookup context does not have private access privileges.</dd> <dd>
<code><a href="../nullpointerexception.html" title="class in java.lang">NullPointerException</a></code> - If any of the incoming arguments is null. This will never happen when a bootstrap method is called with invokedynamic.</dd> <dt>See <i>Java Language Specification</i>:</dt> <dd> <a href="https://docs.oracle.com/javase/specs/jls/se21/html/jls-5.html#jls-5.1.11">5.1.11 String Conversion</a><br><a href="https://docs.oracle.com/javase/specs/jls/se21/html/jls-15.html#jls-15.18.1">15.18.1 String Concatenation Operator +</a><br>
</dd>
</dl> </section><section class="detail" id="makeConcatWithConstants(java.lang.invoke.MethodHandles.Lookup,java.lang.String,java.lang.invoke.MethodType,java.lang.String,java.lang.Object...)"> <h3>makeConcatWithConstants</h3> <pre class="lang-java" data-language="java">public static CallSite makeConcatWithConstants(MethodHandles.Lookup lookup, String name, MethodType concatType, String recipe, Object... constants) throws StringConcatException</pre> <div class="block">Facilitates the creation of optimized String concatenation methods, that can be used to efficiently concatenate a known number of arguments of known types, possibly after type adaptation and partial evaluation of arguments. Typically used as a <em>bootstrap method</em> for <code>
 invokedynamic</code> call sites, to support the <em>string concatenation</em> feature of the Java Programming Language. <p>When the target of the <code>CallSite</code> returned from this method is invoked, it returns the result of String concatenation, taking all function arguments and constants passed to the linkage method as inputs for concatenation. The target signature is given by <code>concatType</code>, and does not include constants. For a target accepting: </p>
<ul> <li>zero inputs, concatenation results in an empty string;</li> <li>one input, concatenation results in the single input converted as per JLS <a href="https://docs.oracle.com/javase/specs/jls/se21/html/jls-5.html#jls-5.1.11">5.1.11</a> "String Conversion"; otherwise</li> <li>two or more inputs, the inputs are concatenated as per requirements stated in JLS <a href="https://docs.oracle.com/javase/specs/jls/se21/html/jls-15.html#jls-15.18.1">15.18.1</a> "String Concatenation Operator +". The inputs are converted as per JLS <a href="https://docs.oracle.com/javase/specs/jls/se21/html/jls-5.html#jls-5.1.11">5.1.11</a> "String Conversion", and combined from left to right.</li> </ul> <p>The concatenation <em>recipe</em> is a String description for the way to construct a concatenated String from the arguments and constants. The recipe is processed from left to right, and each character represents an input to concatenation. Recipe characters mean: </p>
<ul> <li>
<em>\1 (Unicode point 0001)</em>: an ordinary argument. This input is passed through dynamic argument, and is provided during the concatenation method invocation. This input can be null.</li> <li>
<em>\2 (Unicode point 0002):</em> a constant. This input passed through static bootstrap argument. This constant can be any value representable in constant pool. If necessary, the factory would call <code>toString</code> to perform a one-time String conversion.</li> <li>
<em>Any other char value:</em> a single character constant.</li> </ul> <p>Assume the linkage arguments are as follows: </p>
<ul> <li>
<code>concatType</code>, describing the <code>CallSite</code> signature</li> <li>
<code>recipe</code>, describing the String recipe</li> <li>
<code>constants</code>, the vararg array of constants</li> </ul> <p>Then the following linkage invariants must hold: </p>
<ul> <li>The number of parameter slots in <code>concatType</code> is less than or equal to 200</li> <li>The parameter count in <code>concatType</code> is equal to number of \1 tags in <code>recipe</code>
</li> <li>The return type in <code>concatType</code> is assignable from <a href="../string.html" title="class in java.lang"><code>String</code></a>, and matches the return type of the returned <a href="methodhandle.html" title="class in java.lang.invoke"><code>MethodHandle</code></a>
</li> <li>The number of elements in <code>constants</code> is equal to number of \2 tags in <code>recipe</code>
</li> </ul>
</div> <dl class="notes"> <dt>API Note:</dt> <dd>Code generators have three distinct ways to process a constant string operand S in a string concatenation expression. First, S can be materialized as a reference (using ldc) and passed as an ordinary argument (recipe '\1'). Or, S can be stored in the constant pool and passed as a constant (recipe '\2') . Finally, if S contains neither of the recipe tag characters ('\1', '\2') then S can be interpolated into the recipe itself, causing its characters to be inserted into the result.</dd> <dt>Parameters:</dt> <dd>
<code>lookup</code> - Represents a lookup context with the accessibility privileges of the caller. Specifically, the lookup context must have <a href="methodhandles.lookup.html#hasFullPrivilegeAccess()">full privilege access</a>. When used with <code>invokedynamic</code>, this is stacked automatically by the VM.</dd> <dd>
<code>name</code> - The name of the method to implement. This name is arbitrary, and has no meaning for this linkage method. When used with <code>invokedynamic</code>, this is provided by the <code>NameAndType</code> of the <code>InvokeDynamic</code> structure and is stacked automatically by the VM.</dd> <dd>
<code>concatType</code> - The expected signature of the <code>CallSite</code>. The parameter types represent the types of dynamic concatenation arguments; the return type is always assignable from <a href="../string.html" title="class in java.lang"><code>String</code></a>. When used with <code>
                  invokedynamic</code>, this is provided by the <code>
                  NameAndType</code> of the <code>InvokeDynamic</code> structure and is stacked automatically by the VM.</dd> <dd>
<code>recipe</code> - Concatenation recipe, described above.</dd> <dd>
<code>constants</code> - A vararg parameter representing the constants passed to the linkage method.</dd> <dt>Returns:</dt> <dd>a CallSite whose target can be used to perform String concatenation, with dynamic concatenation arguments described by the given <code>concatType</code>.</dd> <dt>Throws:</dt> <dd>
<code><a href="stringconcatexception.html" title="class in java.lang.invoke">StringConcatException</a></code> - If any of the linkage invariants described here are violated, or the lookup context does not have private access privileges.</dd> <dd>
<code><a href="../nullpointerexception.html" title="class in java.lang">NullPointerException</a></code> - If any of the incoming arguments is null, or any constant in <code>recipe</code> is null. This will never happen when a bootstrap method is called with invokedynamic.</dd> <dt>See <i>Java Language Specification</i>:</dt> <dd> <a href="https://docs.oracle.com/javase/specs/jls/se21/html/jls-5.html#jls-5.1.11">5.1.11 String Conversion</a><br><a href="https://docs.oracle.com/javase/specs/jls/se21/html/jls-15.html#jls-15.18.1">15.18.1 String Concatenation Operator +</a><br>
</dd>
</dl> </section><section class="detail" id="makeConcatWithTemplate(java.util.List,java.util.List)"> <h3>makeConcatWithTemplate</h3> <pre class="lang-java" data-language="java">public static MethodHandle makeConcatWithTemplate(List&lt;String&gt; fragments, List&lt;Class&lt;?&gt;&gt; ptypes) throws StringConcatException</pre> <div class="preview-block" id="preview-makeConcatWithTemplate(java.util.List,java.util.List)">
<span class="preview-label"><code>makeConcatWithTemplate</code> is a preview API of the Java platform.</span> <div class="preview-comment">Programs can only use <code>makeConcatWithTemplate</code> when preview features are enabled.</div> <div class="preview-comment">Preview features may be removed in a future release, or upgraded to permanent features of the Java platform.</div> </div> <div class="block">Simplified concatenation method to facilitate <a href="../stringtemplate.html" title="interface in java.lang"><code>StringTemplate</code></a><sup><a href="../stringtemplate.html#preview-java.lang.StringTemplate">PREVIEW</a></sup> concatenation. This method returns a single concatenation method that interleaves fragments and values. fragment|value|fragment|value|...|value|fragment. The number of fragments must be one more that the number of ptypes. The total number of slots used by the ptypes must be less than or equal to <a href="#MAX_INDY_CONCAT_ARG_SLOTS"><code>MAX_INDY_CONCAT_ARG_SLOTS</code></a><sup><a href="#preview-MAX_INDY_CONCAT_ARG_SLOTS">PREVIEW</a></sup>.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>fragments</code> - list of string fragments</dd> <dd>
<code>ptypes</code> - list of expression types</dd> <dt>Returns:</dt> <dd>the <a href="methodhandle.html" title="class in java.lang.invoke"><code>MethodHandle</code></a> for concatenation</dd> <dt>Throws:</dt> <dd>
<code><a href="stringconcatexception.html" title="class in java.lang.invoke">StringConcatException</a></code> - If any of the linkage invariants are violated.</dd> <dd>
<code><a href="../nullpointerexception.html" title="class in java.lang">NullPointerException</a></code> - If any of the incoming arguments is null.</dd> <dd>
<code><a href="../illegalargumentexception.html" title="class in java.lang">IllegalArgumentException</a></code> - If the number of value slots exceed <a href="#MAX_INDY_CONCAT_ARG_SLOTS"><code>MAX_INDY_CONCAT_ARG_SLOTS</code></a><sup><a href="#preview-MAX_INDY_CONCAT_ARG_SLOTS">PREVIEW</a></sup>.</dd> <dt>Since:</dt> <dd>21</dd> </dl> </section><section class="detail" id="makeConcatWithTemplateCluster(java.util.List,java.util.List,int)"> <h3>makeConcatWithTemplateCluster</h3> <pre class="lang-java" data-language="java">public static List&lt;MethodHandle&gt; makeConcatWithTemplateCluster(List&lt;String&gt; fragments, List&lt;Class&lt;?&gt;&gt; ptypes, int maxSlots) throws StringConcatException</pre> <div class="preview-block" id="preview-makeConcatWithTemplateCluster(java.util.List,java.util.List,int)">
<span class="preview-label"><code>makeConcatWithTemplateCluster</code> is a preview API of the Java platform.</span> <div class="preview-comment">Programs can only use <code>makeConcatWithTemplateCluster</code> when preview features are enabled.</div> <div class="preview-comment">Preview features may be removed in a future release, or upgraded to permanent features of the Java platform.</div> </div> <div class="block">This method breaks up large concatenations into separate <a href="methodhandle.html" title="class in java.lang.invoke"><code>MethodHandles</code></a> based on the number of slots required per <a href="methodhandle.html" title="class in java.lang.invoke"><code>MethodHandle</code></a>. Each <a href="methodhandle.html" title="class in java.lang.invoke"><code>MethodHandle</code></a> after the first will have an extra <a href="../string.html" title="class in java.lang"><code>String</code></a> slot for the result from the previous <a href="methodhandle.html" title="class in java.lang.invoke"><code>MethodHandle</code></a>. <a href="#makeConcatWithTemplate(java.util.List,java.util.List)"><code>makeConcatWithTemplate(java.util.List&lt;java.lang.String&gt;, java.util.List&lt;java.lang.Class&lt;?&gt;&gt;)</code></a><sup><a href="#preview-makeConcatWithTemplate(java.util.List,java.util.List)">PREVIEW</a></sup> is used to construct the <a href="methodhandle.html" title="class in java.lang.invoke"><code>MethodHandles</code></a>. The total number of slots used by the ptypes is open ended. However, care must be given when combining the <a href="methodhandle.html" title="class in java.lang.invoke"><code>MethodHandles</code></a> so that the combine total does not exceed the 255 slot limit.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>fragments</code> - list of string fragments</dd> <dd>
<code>ptypes</code> - list of expression types</dd> <dd>
<code>maxSlots</code> - maximum number of slots per <a href="methodhandle.html" title="class in java.lang.invoke"><code>MethodHandle</code></a>.</dd> <dt>Returns:</dt> <dd>List of <a href="methodhandle.html" title="class in java.lang.invoke"><code>MethodHandles</code></a>
</dd> <dt>Throws:</dt> <dd>
<code><a href="../illegalargumentexception.html" title="class in java.lang">IllegalArgumentException</a></code> - If maxSlots is not between 1 and MAX_INDY_CONCAT_ARG_SLOTS.</dd> <dd>
<code><a href="stringconcatexception.html" title="class in java.lang.invoke">StringConcatException</a></code> - If any of the linkage invariants are violated.</dd> <dd>
<code><a href="../nullpointerexception.html" title="class in java.lang">NullPointerException</a></code> - If any of the incoming arguments is null.</dd> <dd>
<code><a href="../illegalargumentexception.html" title="class in java.lang">IllegalArgumentException</a></code> - If the number of value slots exceed <a href="#MAX_INDY_CONCAT_ARG_SLOTS"><code>MAX_INDY_CONCAT_ARG_SLOTS</code></a><sup><a href="#preview-MAX_INDY_CONCAT_ARG_SLOTS">PREVIEW</a></sup>.</dd> <dt>Since:</dt> <dd>21</dd> </dl> </section><section class="detail" id="makeConcatWithTemplateGetters(java.util.List,java.util.List,int)"> <h3>makeConcatWithTemplateGetters</h3> <pre class="lang-java" data-language="java">public static MethodHandle makeConcatWithTemplateGetters(List&lt;String&gt; fragments, List&lt;MethodHandle&gt; getters, int maxSlots) throws StringConcatException</pre> <div class="preview-block" id="preview-makeConcatWithTemplateGetters(java.util.List,java.util.List,int)">
<span class="preview-label"><code>makeConcatWithTemplateGetters</code> is a preview API of the Java platform.</span> <div class="preview-comment">Programs can only use <code>makeConcatWithTemplateGetters</code> when preview features are enabled.</div> <div class="preview-comment">Preview features may be removed in a future release, or upgraded to permanent features of the Java platform.</div> </div> <div class="block">This method creates a <a href="methodhandle.html" title="class in java.lang.invoke"><code>MethodHandle</code></a> expecting one input, the receiver of the supplied getters. This method uses <a href="#makeConcatWithTemplateCluster(java.util.List,java.util.List,int)"><code>makeConcatWithTemplateCluster(java.util.List&lt;java.lang.String&gt;, java.util.List&lt;java.lang.Class&lt;?&gt;&gt;, int)</code></a><sup><a href="#preview-makeConcatWithTemplateCluster(java.util.List,java.util.List,int)">PREVIEW</a></sup> to create the intermediate <a href="methodhandle.html" title="class in java.lang.invoke"><code>MethodHandles</code></a>.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>fragments</code> - list of string fragments</dd> <dd>
<code>getters</code> - list of getter <a href="methodhandle.html" title="class in java.lang.invoke"><code>MethodHandles</code></a>
</dd> <dd>
<code>maxSlots</code> - maximum number of slots per <a href="methodhandle.html" title="class in java.lang.invoke"><code>MethodHandle</code></a> in cluster.</dd> <dt>Returns:</dt> <dd>the <a href="methodhandle.html" title="class in java.lang.invoke"><code>MethodHandle</code></a> for concatenation</dd> <dt>Throws:</dt> <dd>
<code><a href="../illegalargumentexception.html" title="class in java.lang">IllegalArgumentException</a></code> - If maxSlots is not between 1 and MAX_INDY_CONCAT_ARG_SLOTS or if the getters don't use the same argument type</dd> <dd>
<code><a href="stringconcatexception.html" title="class in java.lang.invoke">StringConcatException</a></code> - If any of the linkage invariants are violated</dd> <dd>
<code><a href="../nullpointerexception.html" title="class in java.lang">NullPointerException</a></code> - If any of the incoming arguments is null</dd> <dd>
<code><a href="../illegalargumentexception.html" title="class in java.lang">IllegalArgumentException</a></code> - If the number of value slots exceed <a href="#MAX_INDY_CONCAT_ARG_SLOTS"><code>MAX_INDY_CONCAT_ARG_SLOTS</code></a><sup><a href="#preview-MAX_INDY_CONCAT_ARG_SLOTS">PREVIEW</a></sup>.</dd> <dt>Since:</dt> <dd>21</dd> </dl> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993, 2023, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/invoke/StringConcatFactory.html" class="_attribution-link">https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/invoke/StringConcatFactory.html</a>
  </p>
</div>
