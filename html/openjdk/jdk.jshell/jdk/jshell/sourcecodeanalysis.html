<h1 title="Class SourceCodeAnalysis" class="title">Class SourceCodeAnalysis</h1> <div class="inheritance" title="Inheritance Tree">
<a href="../../../java.base/java/lang/object.html" title="class in java.lang">java.lang.Object</a> <div class="inheritance">jdk.jshell.SourceCodeAnalysis</div> </div> <section class="class-description" id="class-description">  <pre class="lang-java" data-language="java">public abstract class SourceCodeAnalysis extends Object</pre> <div class="block">Provides analysis utilities for source code input. Optional functionality that provides for a richer interactive experience. Includes completion analysis: Is the input a complete snippet of code? Do I need to prompt for more input? Would adding a semicolon make it complete? Is there more than one snippet? etc. Also includes completion suggestions, as might be used in tab-completion.</div> <dl class="notes"> <dt>Since:</dt> <dd>9</dd> </dl> </section> <section class="summary"> <section class="nested-class-summary" id="nested-class-summary"> <h2>Nested Class Summary</h2>  <table class="summary-table three-column-summary">                            <tr>
<th>Modifier and Type</th>
<th>Class</th>
<th>Description</th>
</tr>
<tr>
<td><code>static enum </code></td>
<td><code><a href="sourcecodeanalysis.attribute.html" class="type-name-link" title="enum class in jdk.jshell">SourceCodeAnalysis.Attribute</a></code></td>
<td> <div class="block">A span attribute which can be used to derive a coloring.</div> </td>
</tr>
<tr>
<td><code>static enum </code></td>
<td><code><a href="sourcecodeanalysis.completeness.html" class="type-name-link" title="enum class in jdk.jshell">SourceCodeAnalysis.Completeness</a></code></td>
<td> <div class="block">Describes the completeness of the given input.</div> </td>
</tr>
<tr>
<td><code>static interface </code></td>
<td><code><a href="sourcecodeanalysis.completioninfo.html" class="type-name-link" title="interface in jdk.jshell">SourceCodeAnalysis.CompletionInfo</a></code></td>
<td> <div class="block">The result of <code>analyzeCompletion(String input)</code>.</div> </td>
</tr>
<tr>
<td><code>static interface </code></td>
<td><code><a href="sourcecodeanalysis.documentation.html" class="type-name-link" title="interface in jdk.jshell">SourceCodeAnalysis.Documentation</a></code></td>
<td> <div class="block">A documentation for a candidate for continuation of the given user's input.</div> </td>
</tr>
<tr>
<td><code>static final record </code></td>
<td><code><a href="sourcecodeanalysis.highlight.html" class="type-name-link" title="class in jdk.jshell">SourceCodeAnalysis.Highlight</a></code></td>
<td> <div class="block">Assigns attributes usable for coloring to spans inside a snippet.</div> </td>
</tr>
<tr>
<td><code>static final class </code></td>
<td><code><a href="sourcecodeanalysis.qualifiednames.html" class="type-name-link" title="class in jdk.jshell">SourceCodeAnalysis.QualifiedNames</a></code></td>
<td> <div class="block">List of possible qualified names.</div> </td>
</tr>
<tr>
<td><code>static interface </code></td>
<td><code><a href="sourcecodeanalysis.snippetwrapper.html" class="type-name-link" title="interface in jdk.jshell">SourceCodeAnalysis.SnippetWrapper</a></code></td>
<td> <div class="block">The wrapping of a snippet of Java source into valid top-level Java source.</div> </td>
</tr>
<tr>
<td><code>static interface </code></td>
<td><code><a href="sourcecodeanalysis.suggestion.html" class="type-name-link" title="interface in jdk.jshell">SourceCodeAnalysis.Suggestion</a></code></td>
<td> <div class="block">A candidate for continuation of the given user's input.</div> </td>
</tr>
</table> </section><section class="method-summary" id="method-summary"> <h2>Method Summary</h2> <div id="method-summary-table">  <div id="method-summary-table.tabpanel" role="tabpanel"> <table class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">                                  <tr>
<th>Modifier and Type</th>
<th>Method</th>
<th>Description</th>
</tr>
<tr>
<td><code>abstract <a href="sourcecodeanalysis.completioninfo.html" title="interface in jdk.jshell">SourceCodeAnalysis.CompletionInfo</a></code></td>
<td><code><a href="#analyzeCompletion(java.lang.String)" class="member-name-link">analyzeCompletion</a><wbr>(<a href="../../../java.base/java/lang/string.html" title="class in java.lang">String</a> input)</wbr></code></td>
<td> <div class="block">Given an input string, find the first snippet of code (one statement, definition, import, or expression) and evaluate if it is complete.</div> </td>
</tr>
<tr>
<td><code>abstract <a href="../../../java.base/java/lang/string.html" title="class in java.lang">String</a></code></td>
<td><code><a href="#analyzeType(java.lang.String,int)" class="member-name-link">analyzeType</a><wbr>(<a href="../../../java.base/java/lang/string.html" title="class in java.lang">String</a> code,
 int cursor)</wbr></code></td>
<td> <div class="block">Infer the type of the given expression.</div> </td>
</tr>
<tr>
<td><code>abstract <a href="../../../java.base/java/util/list.html" title="interface in java.util">List</a><wbr>&lt;<a href="sourcecodeanalysis.suggestion.html" title="interface in jdk.jshell">SourceCodeAnalysis.Suggestion</a>&gt;</wbr></code></td>
<td><code><a href="#completionSuggestions(java.lang.String,int,int%5B%5D)" class="member-name-link">completionSuggestions</a><wbr>(<a href="../../../java.base/java/lang/string.html" title="class in java.lang">String</a> input,
 int cursor,
 int[] anchor)</wbr></code></td>
<td> <div class="block">Compute possible follow-ups for the given input.</div> </td>
</tr>
<tr>
<td><code>abstract <a href="../../../java.base/java/util/collection.html" title="interface in java.util">Collection</a><wbr>&lt;<a href="snippet.html" title="class in jdk.jshell">Snippet</a>&gt;</wbr></code></td>
<td><code><a href="#dependents(jdk.jshell.Snippet)" class="member-name-link">dependents</a><wbr>(<a href="snippet.html" title="class in jdk.jshell">Snippet</a> snippet)</wbr></code></td>
<td> <div class="block">Returns a collection of <code>Snippet</code>s which might need updating if the given <code>Snippet</code> is updated.</div> </td>
</tr>
<tr>
<td><code>abstract <a href="../../../java.base/java/util/list.html" title="interface in java.util">List</a><wbr>&lt;<a href="sourcecodeanalysis.documentation.html" title="interface in jdk.jshell">SourceCodeAnalysis.Documentation</a>&gt;</wbr></code></td>
<td><code><a href="#documentation(java.lang.String,int,boolean)" class="member-name-link">documentation</a><wbr>(<a href="../../../java.base/java/lang/string.html" title="class in java.lang">String</a> input,
 int cursor,
 boolean computeJavadoc)</wbr></code></td>
<td> <div class="block">Compute documentation for the given user's input.</div> </td>
</tr>
<tr>
<td><code>abstract <a href="../../../java.base/java/util/list.html" title="interface in java.util">List</a><wbr>&lt;<a href="sourcecodeanalysis.highlight.html" title="class in jdk.jshell">SourceCodeAnalysis.Highlight</a>&gt;</wbr></code></td>
<td><code><a href="#highlights(java.lang.String)" class="member-name-link">highlights</a><wbr>(<a href="../../../java.base/java/lang/string.html" title="class in java.lang">String</a> snippet)</wbr></code></td>
<td> <div class="block">Returns a collection of <code>Highlight</code>s which can be used to color the given snippet.</div> </td>
</tr>
<tr>
<td><code>abstract <a href="sourcecodeanalysis.qualifiednames.html" title="class in jdk.jshell">SourceCodeAnalysis.QualifiedNames</a></code></td>
<td><code><a href="#listQualifiedNames(java.lang.String,int)" class="member-name-link">listQualifiedNames</a><wbr>(<a href="../../../java.base/java/lang/string.html" title="class in java.lang">String</a> code,
 int cursor)</wbr></code></td>
<td> <div class="block">List qualified names known for the simple name in the given code immediately to the left of the given cursor position.</div> </td>
</tr>
<tr>
<td><code>abstract <a href="../../../java.base/java/util/list.html" title="interface in java.util">List</a><wbr>&lt;<a href="snippet.html" title="class in jdk.jshell">Snippet</a>&gt;</wbr></code></td>
<td><code><a href="#sourceToSnippets(java.lang.String)" class="member-name-link">sourceToSnippets</a><wbr>(<a href="../../../java.base/java/lang/string.html" title="class in java.lang">String</a> input)</wbr></code></td>
<td> <div class="block">Converts the source code of a snippet into a <a href="snippet.html" title="class in jdk.jshell"><code>Snippet</code></a> object (or list of <code>Snippet</code> objects in the case of some var declarations, e.g.: int x, y, z;).</div> </td>
</tr>
<tr>
<td><code>abstract <a href="sourcecodeanalysis.snippetwrapper.html" title="interface in jdk.jshell">SourceCodeAnalysis.SnippetWrapper</a></code></td>
<td><code><a href="#wrapper(jdk.jshell.Snippet)" class="member-name-link">wrapper</a><wbr>(<a href="snippet.html" title="class in jdk.jshell">Snippet</a> snippet)</wbr></code></td>
<td> <div class="block">Returns the wrapper information for the <code>Snippet</code>.</div> </td>
</tr>
<tr>
<td><code>abstract <a href="../../../java.base/java/util/list.html" title="interface in java.util">List</a><wbr>&lt;<a href="sourcecodeanalysis.snippetwrapper.html" title="interface in jdk.jshell">SourceCodeAnalysis.SnippetWrapper</a>&gt;</wbr></code></td>
<td><code><a href="#wrappers(java.lang.String)" class="member-name-link">wrappers</a><wbr>(<a href="../../../java.base/java/lang/string.html" title="class in java.lang">String</a> input)</wbr></code></td>
<td> <div class="block">Returns the wrapper information for the snippet within the input source string.</div> </td>
</tr>
</table> </div> </div> <div class="inherited-list"> <h3 id="methods-inherited-from-class-java.lang.Object">Methods declared in class java.lang.<a href="../../../java.base/java/lang/object.html" title="class in java.lang">Object</a>
</h3> <code><a href="../../../java.base/java/lang/object.html#clone()">clone</a>, <a href="../../../java.base/java/lang/object.html#equals(java.lang.Object)">equals</a>, <a href="../../../java.base/java/lang/object.html#finalize()">finalize</a>, <a href="../../../java.base/java/lang/object.html#getClass()">getClass</a>, <a href="../../../java.base/java/lang/object.html#hashCode()">hashCode</a>, <a href="../../../java.base/java/lang/object.html#notify()">notify</a>, <a href="../../../java.base/java/lang/object.html#notifyAll()">notifyAll</a>, <a href="../../../java.base/java/lang/object.html#toString()">toString</a>, <a href="../../../java.base/java/lang/object.html#wait()">wait</a>, <a href="../../../java.base/java/lang/object.html#wait(long)">wait</a>, <a href="../../../java.base/java/lang/object.html#wait(long,int)">wait</a></code>
</div> </section> </section> <section class="details"> <section class="method-details" id="method-detail"> <h2>Method Details</h2>  </section><section class="detail" id="analyzeCompletion(java.lang.String)"> <h3>analyzeCompletion</h3> <pre class="lang-java" data-language="java">public abstract SourceCodeAnalysis.CompletionInfo analyzeCompletion(String input)</pre> <div class="block">Given an input string, find the first snippet of code (one statement, definition, import, or expression) and evaluate if it is complete.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>input</code> - the input source string</dd> <dt>Returns:</dt> <dd>a CompletionInfo instance with location and completeness info</dd> </dl> </section><section class="detail" id="completionSuggestions(java.lang.String,int,int[])"> <h3>completionSuggestions</h3> <pre class="lang-java" data-language="java">public abstract List&lt;SourceCodeAnalysis.Suggestion&gt; completionSuggestions(String input, int cursor, int[] anchor)</pre> <div class="block">Compute possible follow-ups for the given input. Uses information from the current <code>JShell</code> state, including type information, to filter the suggestions.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>input</code> - the user input, so far</dd> <dd>
<code>cursor</code> - the current position of the cursors in the given <code>input</code> text</dd> <dd>
<code>anchor</code> - outgoing parameter - when an option will be completed, the text between the anchor and cursor will be deleted and replaced with the given option</dd> <dt>Returns:</dt> <dd>list of candidate continuations of the given input.</dd> </dl> </section><section class="detail" id="documentation(java.lang.String,int,boolean)"> <h3>documentation</h3> <pre class="lang-java" data-language="java">public abstract List&lt;SourceCodeAnalysis.Documentation&gt; documentation(String input, int cursor, boolean computeJavadoc)</pre> <div class="block">Compute documentation for the given user's input. Multiple <code>Documentation</code> objects may be returned when multiple elements match the user's input (like for overloaded methods).</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>input</code> - the snippet the user wrote so far</dd> <dd>
<code>cursor</code> - the current position of the cursors in the given <code>input</code> text</dd> <dd>
<code>computeJavadoc</code> - true if the javadoc for the given input should be computed in addition to the signature</dd> <dt>Returns:</dt> <dd>the documentations for the given user's input, if multiple elements match the input, multiple <code>Documentation</code> objects are returned.</dd> </dl> </section><section class="detail" id="analyzeType(java.lang.String,int)"> <h3>analyzeType</h3> <pre class="lang-java" data-language="java">public abstract String analyzeType(String code, int cursor)</pre> <div class="block">Infer the type of the given expression. The expression spans from the beginning of <code>code</code> to the given <code>cursor</code> position. Returns null if the type of the expression cannot be inferred.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>code</code> - the expression for which the type should be inferred</dd> <dd>
<code>cursor</code> - current cursor position in the given code</dd> <dt>Returns:</dt> <dd>the inferred type, or null if it cannot be inferred</dd> </dl> </section><section class="detail" id="listQualifiedNames(java.lang.String,int)"> <h3>listQualifiedNames</h3> <pre class="lang-java" data-language="java">public abstract SourceCodeAnalysis.QualifiedNames listQualifiedNames(String code, int cursor)</pre> <div class="block">List qualified names known for the simple name in the given code immediately to the left of the given cursor position. The qualified names are gathered by inspecting the classpath used by eval (see <a href="jshell.html#addToClasspath(java.lang.String)"><code>JShell.addToClasspath(java.lang.String)</code></a>).</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>code</code> - the expression for which the candidate qualified names should be computed</dd> <dd>
<code>cursor</code> - current cursor position in the given code</dd> <dt>Returns:</dt> <dd>the known qualified names</dd> </dl> </section><section class="detail" id="wrapper(jdk.jshell.Snippet)"> <h3>wrapper</h3> <pre class="lang-java" data-language="java">public abstract SourceCodeAnalysis.SnippetWrapper wrapper(Snippet snippet)</pre> <div class="block">Returns the wrapper information for the <code>Snippet</code>. The wrapper changes as the environment changes, so calls to this method at different times may yield different results.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>snippet</code> - the <code>Snippet</code> from which to retrieve the wrapper</dd> <dt>Returns:</dt> <dd>information on the wrapper</dd> </dl> </section><section class="detail" id="wrappers(java.lang.String)"> <h3>wrappers</h3> <pre class="lang-java" data-language="java">public abstract List&lt;SourceCodeAnalysis.SnippetWrapper&gt; wrappers(String input)</pre> <div class="block">Returns the wrapper information for the snippet within the input source string. <p> Wrapper information for malformed and incomplete snippets also generate wrappers. The list is in snippet encounter order. The wrapper changes as the environment changes, so calls to this method at different times may yield different results. </p>
<p> The input should be exactly one complete snippet of source code, that is, one expression, statement, variable declaration, method declaration, class declaration, or import. To break arbitrary input into individual complete snippets, use <a href="#analyzeCompletion(java.lang.String)"><code>analyzeCompletion(String)</code></a>. </p>
<p> The wrapper may not match that returned by <a href="#wrapper(jdk.jshell.Snippet)"><code>wrapper(Snippet)</code></a>, were the source converted to a <code>Snippet</code>.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>input</code> - the source input from which to generate wrappers</dd> <dt>Returns:</dt> <dd>a list of wrapper information</dd> </dl> </section><section class="detail" id="sourceToSnippets(java.lang.String)"> <h3>sourceToSnippets</h3> <pre class="lang-java" data-language="java">public abstract List&lt;Snippet&gt; sourceToSnippets(String input)</pre> <div class="block">Converts the source code of a snippet into a <a href="snippet.html" title="class in jdk.jshell"><code>Snippet</code></a> object (or list of <code>Snippet</code> objects in the case of some var declarations, e.g.: int x, y, z;). Does not install the snippets: declarations are not accessible by other snippets; imports are not added. Does not execute the snippets. <p> Queries may be done on the <code>Snippet</code> object. The <a href="snippet.html#id()"><code>Snippet.id()</code></a> will be <code>"*UNASSOCIATED*"</code>. The returned snippets are not associated with the <a href="jshell.html" title="class in jdk.jshell"><code>JShell</code></a> instance, so attempts to pass them to <code>JShell</code> methods will throw an <code>IllegalArgumentException</code>. They will not appear in queries for snippets -- for example, <a href="jshell.html#snippets()"><code>JShell.snippets()</code></a>. </p>
<p> Restrictions on the input are as in <code>JShell.eval</code>. </p>
<p> Only preliminary compilation is performed, sufficient to build the <code>Snippet</code>. Snippets known to be erroneous, are returned as <a href="erroneoussnippet.html" title="class in jdk.jshell"><code>ErroneousSnippet</code></a>, other snippets may or may not be in error.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>input</code> - The input String to convert</dd> <dt>Returns:</dt> <dd>usually a singleton list of Snippet, but may be empty or multiple</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/illegalstateexception.html" title="class in java.lang">IllegalStateException</a></code> - if the <code>JShell</code> instance is closed.</dd> </dl> </section><section class="detail" id="dependents(jdk.jshell.Snippet)"> <h3>dependents</h3> <pre class="lang-java" data-language="java">public abstract Collection&lt;Snippet&gt; dependents(Snippet snippet)</pre> <div class="block">Returns a collection of <code>Snippet</code>s which might need updating if the given <code>Snippet</code> is updated. The returned collection is designed to be inclusive and may include many false positives.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>snippet</code> - the <code>Snippet</code> whose dependents are requested</dd> <dt>Returns:</dt> <dd>the collection of dependents</dd> </dl> </section><section class="detail" id="highlights(java.lang.String)"> <h3>highlights</h3> <pre class="lang-java" data-language="java">public abstract List&lt;SourceCodeAnalysis.Highlight&gt; highlights(String snippet)</pre> <div class="block">Returns a collection of <code>Highlight</code>s which can be used to color the given snippet. <p> The returned <code>Highlight</code>s do not overlap, and are sorted by their start position.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>snippet</code> - the snippet for which the <code>Highlight</code>s should be computed</dd> <dt>Returns:</dt> <dd>the computed <code>Highlight</code>s.</dd> <dt>Since:</dt> <dd>19</dd> </dl> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993, 2023, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    <a href="https://docs.oracle.com/en/java/javase/21/docs/api/jdk.jshell/jdk/jshell/SourceCodeAnalysis.html" class="_attribution-link">https://docs.oracle.com/en/java/javase/21/docs/api/jdk.jshell/jdk/jshell/SourceCodeAnalysis.html</a>
  </p>
</div>
