<h1 title="Class GapContent" class="title">Class GapContent</h1> <div class="inheritance" title="Inheritance Tree">
<a href="../../../../java.base/java/lang/object.html" title="class in java.lang">java.lang.Object</a> <div class="inheritance">javax.swing.text.GapContent</div> </div> <section class="class-description" id="class-description"> <dl class="notes"> <dt>All Implemented Interfaces:</dt> <dd>
<code><a href="../../../../java.base/java/io/serializable.html" title="interface in java.io">Serializable</a></code>, <code><a href="abstractdocument.content.html" title="interface in javax.swing.text">AbstractDocument.Content</a></code>
</dd> </dl>  <pre class="lang-java" data-language="java">public class GapContent extends Object implements AbstractDocument.Content, Serializable</pre> <div class="block">An implementation of the AbstractDocument.Content interface implemented using a gapped buffer similar to that used by emacs. The underlying storage is an array of Unicode characters with a gap somewhere. The gap is moved to the location of changes to take advantage of common behavior where most changes are in the same location. Changes that occur at a gap boundary are generally cheap and moving the gap is generally cheaper than moving the array contents directly to accommodate the change. <p> The positions tracking change are also generally cheap to maintain. The Position implementations (marks) store the array index and can easily calculate the sequential position from the current gap location. Changes only require updating the marks between the old and new gap boundaries when the gap is moved, so generally updating the marks is pretty cheap. The marks are stored sorted so they can be located quickly with a binary search. This increases the cost of adding a mark, and decreases the cost of keeping the mark updated.</p>
</div> </section> <section class="summary"> <section class="constructor-summary" id="constructor-summary"> <h2>Constructor Summary</h2>  <table class="summary-table two-column-summary">       <tr>
<th>Constructor</th>
<th>Description</th>
</tr>
<tr>
<td><code><a href="#%3Cinit%3E()" class="member-name-link">GapContent</a>()</code></td>
<td> <div class="block">Creates a new GapContent object.</div> </td>
</tr>
<tr>
<td><code><a href="#%3Cinit%3E(int)" class="member-name-link">GapContent</a><wbr>(int initialLength)</wbr></code></td>
<td> <div class="block">Creates a new GapContent object, with the initial size specified.</div> </td>
</tr>
</table> </section><section class="method-summary" id="method-summary"> <h2>Method Summary</h2> <div id="method-summary-table">  <div id="method-summary-table.tabpanel" role="tabpanel"> <table class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">                                                             <tr>
<th>Modifier and Type</th>
<th>Method</th>
<th>Description</th>
</tr>
<tr>
<td><code>protected <a href="../../../../java.base/java/lang/object.html" title="class in java.lang">Object</a></code></td>
<td><code><a href="#allocateArray(int)" class="member-name-link">allocateArray</a><wbr>(int len)</wbr></code></td>
<td> <div class="block">Allocate an array to store items of the type appropriate (which is determined by the subclass).</div> </td>
</tr>
<tr>
<td><code><a href="position.html" title="interface in javax.swing.text">Position</a></code></td>
<td><code><a href="#createPosition(int)" class="member-name-link">createPosition</a><wbr>(int offset)</wbr></code></td>
<td> <div class="block">Creates a position within the content that will track change as the content is mutated.</div> </td>
</tr>
<tr>
<td><code>protected final <a href="../../../../java.base/java/lang/object.html" title="class in java.lang">Object</a></code></td>
<td><code><a href="#getArray()" class="member-name-link">getArray</a>()</code></td>
<td> <div class="block">Access to the array.</div> </td>
</tr>
<tr>
<td><code>protected int</code></td>
<td><code><a href="#getArrayLength()" class="member-name-link">getArrayLength</a>()</code></td>
<td> <div class="block">Get the length of the allocated array.</div> </td>
</tr>
<tr>
<td><code>void</code></td>
<td><code><a href="#getChars(int,int,javax.swing.text.Segment)" class="member-name-link">getChars</a><wbr>(int where,
 int len,
 <a href="segment.html" title="class in javax.swing.text">Segment</a> chars)</wbr></code></td>
<td> <div class="block">Retrieves a portion of the content.</div> </td>
</tr>
<tr>
<td><code>protected final int</code></td>
<td><code><a href="#getGapEnd()" class="member-name-link">getGapEnd</a>()</code></td>
<td> <div class="block">Access to the end of the gap.</div> </td>
</tr>
<tr>
<td><code>protected final int</code></td>
<td><code><a href="#getGapStart()" class="member-name-link">getGapStart</a>()</code></td>
<td> <div class="block">Access to the start of the gap.</div> </td>
</tr>
<tr>
<td><code>protected <a href="../../../../java.base/java/util/vector.html" title="class in java.util">Vector</a></code></td>
<td><code><a href="#getPositionsInRange(java.util.Vector,int,int)" class="member-name-link">getPositionsInRange</a><wbr>(<a href="../../../../java.base/java/util/vector.html" title="class in java.util">Vector</a> v,
 int offset,
 int length)</wbr></code></td>
<td> <div class="block">Returns a Vector containing instances of UndoPosRef for the Positions in the range <code>offset</code> to <code>offset</code> + <code>length</code>.</div> </td>
</tr>
<tr>
<td><code><a href="../../../../java.base/java/lang/string.html" title="class in java.lang">String</a></code></td>
<td><code><a href="#getString(int,int)" class="member-name-link">getString</a><wbr>(int where,
 int len)</wbr></code></td>
<td> <div class="block">Retrieves a portion of the content.</div> </td>
</tr>
<tr>
<td><code><a href="../undo/undoableedit.html" title="interface in javax.swing.undo">UndoableEdit</a></code></td>
<td><code><a href="#insertString(int,java.lang.String)" class="member-name-link">insertString</a><wbr>(int where,
 <a href="../../../../java.base/java/lang/string.html" title="class in java.lang">String</a> str)</wbr></code></td>
<td> <div class="block">Inserts a string into the content.</div> </td>
</tr>
<tr>
<td><code>int</code></td>
<td><code><a href="#length()" class="member-name-link">length</a>()</code></td>
<td> <div class="block">Returns the length of the content.</div> </td>
</tr>
<tr>
<td><code><a href="../undo/undoableedit.html" title="interface in javax.swing.undo">UndoableEdit</a></code></td>
<td><code><a href="#remove(int,int)" class="member-name-link">remove</a><wbr>(int where,
 int nitems)</wbr></code></td>
<td> <div class="block">Removes part of the content.</div> </td>
</tr>
<tr>
<td><code>protected void</code></td>
<td><code><a href="#replace(int,int,java.lang.Object,int)" class="member-name-link">replace</a><wbr>(int position,
 int rmSize,
 <a href="../../../../java.base/java/lang/object.html" title="class in java.lang">Object</a> addItems,
 int addSize)</wbr></code></td>
<td> <div class="block">Replace the given logical position in the storage with the given new items.</div> </td>
</tr>
<tr>
<td><code>protected void</code></td>
<td><code><a href="#resetMarksAtZero()" class="member-name-link">resetMarksAtZero</a>()</code></td>
<td> <div class="block">Resets all the marks that have an offset of 0 to have an index of zero as well.</div> </td>
</tr>
<tr>
<td><code>protected void</code></td>
<td><code><a href="#shiftEnd(int)" class="member-name-link">shiftEnd</a><wbr>(int newSize)</wbr></code></td>
<td> <div class="block">Make the gap bigger, moving any necessary data and updating the appropriate marks</div> </td>
</tr>
<tr>
<td><code>protected void</code></td>
<td><code><a href="#shiftGap(int)" class="member-name-link">shiftGap</a><wbr>(int newGapStart)</wbr></code></td>
<td> <div class="block">Move the start of the gap to a new location, without changing the size of the gap.</div> </td>
</tr>
<tr>
<td><code>protected void</code></td>
<td><code><a href="#shiftGapEndUp(int)" class="member-name-link">shiftGapEndUp</a><wbr>(int newGapEnd)</wbr></code></td>
<td> <div class="block">Adjust the gap end upward.</div> </td>
</tr>
<tr>
<td><code>protected void</code></td>
<td><code><a href="#shiftGapStartDown(int)" class="member-name-link">shiftGapStartDown</a><wbr>(int newGapStart)</wbr></code></td>
<td> <div class="block">Adjust the gap end downward.</div> </td>
</tr>
<tr>
<td><code>protected void</code></td>
<td><code><a href="#updateUndoPositions(java.util.Vector,int,int)" class="member-name-link">updateUndoPositions</a><wbr>(<a href="../../../../java.base/java/util/vector.html" title="class in java.util">Vector</a> positions,
 int offset,
 int length)</wbr></code></td>
<td> <div class="block">Resets the location for all the UndoPosRef instances in <code>positions</code>.</div> </td>
</tr>
</table> </div> </div> <div class="inherited-list"> <h3 id="methods-inherited-from-class-java.lang.Object">Methods declared in class java.lang.<a href="../../../../java.base/java/lang/object.html" title="class in java.lang">Object</a>
</h3> <code><a href="../../../../java.base/java/lang/object.html#clone()">clone</a>, <a href="../../../../java.base/java/lang/object.html#equals(java.lang.Object)">equals</a>, <a href="../../../../java.base/java/lang/object.html#finalize()">finalize</a>, <a href="../../../../java.base/java/lang/object.html#getClass()">getClass</a>, <a href="../../../../java.base/java/lang/object.html#hashCode()">hashCode</a>, <a href="../../../../java.base/java/lang/object.html#notify()">notify</a>, <a href="../../../../java.base/java/lang/object.html#notifyAll()">notifyAll</a>, <a href="../../../../java.base/java/lang/object.html#toString()">toString</a>, <a href="../../../../java.base/java/lang/object.html#wait()">wait</a>, <a href="../../../../java.base/java/lang/object.html#wait(long)">wait</a>, <a href="../../../../java.base/java/lang/object.html#wait(long,int)">wait</a></code>
</div> </section> </section> <section class="details"> <section class="constructor-details" id="constructor-detail"> <h2>Constructor Details</h2>  </section><section class="detail" id="&lt;init&gt;()"> <h3>GapContent</h3> <pre class="lang-java" data-language="java">public GapContent()</pre> <div class="block">Creates a new GapContent object. Initial size defaults to 10.</div> </section><section class="detail" id="&lt;init&gt;(int)"> <h3>GapContent</h3> <pre class="lang-java" data-language="java">public GapContent(int initialLength)</pre> <div class="block">Creates a new GapContent object, with the initial size specified. The initial size will not be allowed to go below 2, to give room for the implied break and the gap.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>initialLength</code> - the initial size</dd> </dl> </section><section class="method-details" id="method-detail"> <h2>Method Details</h2>  </section><section class="detail" id="allocateArray(int)"> <h3>allocateArray</h3> <pre class="lang-java" data-language="java">protected Object allocateArray(int len)</pre> <div class="block">Allocate an array to store items of the type appropriate (which is determined by the subclass).</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>len</code> - the length of the array</dd> <dt>Returns:</dt> <dd>the java array of some type</dd> </dl> </section><section class="detail" id="getArrayLength()"> <h3>getArrayLength</h3> <pre class="lang-java" data-language="java">protected int getArrayLength()</pre> <div class="block">Get the length of the allocated array.</div> <dl class="notes"> <dt>Returns:</dt> <dd>the length of the array</dd> </dl> </section><section class="detail" id="length()"> <h3>length</h3> <pre class="lang-java" data-language="java">public int length()</pre> <div class="block">Returns the length of the content.</div> <dl class="notes"> <dt>Specified by:</dt> <dd>
<code><a href="abstractdocument.content.html#length()">length</a></code> in interface <code><a href="abstractdocument.content.html" title="interface in javax.swing.text">AbstractDocument.Content</a></code>
</dd> <dt>Returns:</dt> <dd>the length &gt;= 1</dd> <dt>See Also:</dt> <dd> <ul class="tag-list-long"> <li><a href="abstractdocument.content.html#length()"><code>AbstractDocument.Content.length()</code></a></li> </ul> </dd> </dl> </section><section class="detail" id="insertString(int,java.lang.String)"> <h3>insertString</h3> <pre class="lang-java" data-language="java">public UndoableEdit insertString(int where, String str) throws BadLocationException</pre> <div class="block">Inserts a string into the content.</div> <dl class="notes"> <dt>Specified by:</dt> <dd>
<code><a href="abstractdocument.content.html#insertString(int,java.lang.String)">insertString</a></code> in interface <code><a href="abstractdocument.content.html" title="interface in javax.swing.text">AbstractDocument.Content</a></code>
</dd> <dt>Parameters:</dt> <dd>
<code>where</code> - the starting position &gt;= 0, &lt; length()</dd> <dd>
<code>str</code> - the non-null string to insert</dd> <dt>Returns:</dt> <dd>an UndoableEdit object for undoing</dd> <dt>Throws:</dt> <dd>
<code><a href="badlocationexception.html" title="class in javax.swing.text">BadLocationException</a></code> - if the specified position is invalid</dd> <dt>See Also:</dt> <dd> <ul class="tag-list-long"> <li><a href="abstractdocument.content.html#insertString(int,java.lang.String)"><code>AbstractDocument.Content.insertString(int, java.lang.String)</code></a></li> </ul> </dd> </dl> </section><section class="detail" id="remove(int,int)"> <h3>remove</h3> <pre class="lang-java" data-language="java">public UndoableEdit remove(int where, int nitems) throws BadLocationException</pre> <div class="block">Removes part of the content.</div> <dl class="notes"> <dt>Specified by:</dt> <dd>
<code><a href="abstractdocument.content.html#remove(int,int)">remove</a></code> in interface <code><a href="abstractdocument.content.html" title="interface in javax.swing.text">AbstractDocument.Content</a></code>
</dd> <dt>Parameters:</dt> <dd>
<code>where</code> - the starting position &gt;= 0, where + nitems &lt; length()</dd> <dd>
<code>nitems</code> - the number of characters to remove &gt;= 0</dd> <dt>Returns:</dt> <dd>an UndoableEdit object for undoing</dd> <dt>Throws:</dt> <dd>
<code><a href="badlocationexception.html" title="class in javax.swing.text">BadLocationException</a></code> - if the specified position is invalid</dd> <dt>See Also:</dt> <dd> <ul class="tag-list-long"> <li><a href="abstractdocument.content.html#remove(int,int)"><code>AbstractDocument.Content.remove(int, int)</code></a></li> </ul> </dd> </dl> </section><section class="detail" id="getString(int,int)"> <h3>getString</h3> <pre class="lang-java" data-language="java">public String getString(int where, int len) throws BadLocationException</pre> <div class="block">Retrieves a portion of the content.</div> <dl class="notes"> <dt>Specified by:</dt> <dd>
<code><a href="abstractdocument.content.html#getString(int,int)">getString</a></code> in interface <code><a href="abstractdocument.content.html" title="interface in javax.swing.text">AbstractDocument.Content</a></code>
</dd> <dt>Parameters:</dt> <dd>
<code>where</code> - the starting position &gt;= 0</dd> <dd>
<code>len</code> - the length to retrieve &gt;= 0</dd> <dt>Returns:</dt> <dd>a string representing the content</dd> <dt>Throws:</dt> <dd>
<code><a href="badlocationexception.html" title="class in javax.swing.text">BadLocationException</a></code> - if the specified position is invalid</dd> <dt>See Also:</dt> <dd> <ul class="tag-list-long"> <li><a href="abstractdocument.content.html#getString(int,int)"><code>AbstractDocument.Content.getString(int, int)</code></a></li> </ul> </dd> </dl> </section><section class="detail" id="getChars(int,int,javax.swing.text.Segment)"> <h3>getChars</h3> <pre class="lang-java" data-language="java">public void getChars(int where, int len, Segment chars) throws BadLocationException</pre> <div class="block">Retrieves a portion of the content. If the desired content spans the gap, we copy the content. If the desired content does not span the gap, the actual store is returned to avoid the copy since it is contiguous.</div> <dl class="notes"> <dt>Specified by:</dt> <dd>
<code><a href="abstractdocument.content.html#getChars(int,int,javax.swing.text.Segment)">getChars</a></code> in interface <code><a href="abstractdocument.content.html" title="interface in javax.swing.text">AbstractDocument.Content</a></code>
</dd> <dt>Parameters:</dt> <dd>
<code>where</code> - the starting position &gt;= 0, where + len &lt;= length()</dd> <dd>
<code>len</code> - the number of characters to retrieve &gt;= 0</dd> <dd>
<code>chars</code> - the Segment object to return the characters in</dd> <dt>Throws:</dt> <dd>
<code><a href="badlocationexception.html" title="class in javax.swing.text">BadLocationException</a></code> - if the specified position is invalid</dd> <dt>See Also:</dt> <dd> <ul class="tag-list-long"> <li><a href="abstractdocument.content.html#getChars(int,int,javax.swing.text.Segment)"><code>AbstractDocument.Content.getChars(int, int, javax.swing.text.Segment)</code></a></li> </ul> </dd> </dl> </section><section class="detail" id="createPosition(int)"> <h3>createPosition</h3> <pre class="lang-java" data-language="java">public Position createPosition(int offset) throws BadLocationException</pre> <div class="block">Creates a position within the content that will track change as the content is mutated.</div> <dl class="notes"> <dt>Specified by:</dt> <dd>
<code><a href="abstractdocument.content.html#createPosition(int)">createPosition</a></code> in interface <code><a href="abstractdocument.content.html" title="interface in javax.swing.text">AbstractDocument.Content</a></code>
</dd> <dt>Parameters:</dt> <dd>
<code>offset</code> - the offset to track &gt;= 0</dd> <dt>Returns:</dt> <dd>the position</dd> <dt>Throws:</dt> <dd>
<code><a href="badlocationexception.html" title="class in javax.swing.text">BadLocationException</a></code> - if the specified position is invalid</dd> </dl> </section><section class="detail" id="shiftEnd(int)"> <h3>shiftEnd</h3> <pre class="lang-java" data-language="java">protected void shiftEnd(int newSize)</pre> <div class="block">Make the gap bigger, moving any necessary data and updating the appropriate marks</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>newSize</code> - the new capacity</dd> </dl> </section><section class="detail" id="shiftGap(int)"> <h3>shiftGap</h3> <pre class="lang-java" data-language="java">protected void shiftGap(int newGapStart)</pre> <div class="block">Move the start of the gap to a new location, without changing the size of the gap. This moves the data in the array and updates the marks accordingly.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>newGapStart</code> - the new start of the gap</dd> </dl> </section><section class="detail" id="resetMarksAtZero()"> <h3>resetMarksAtZero</h3> <pre class="lang-java" data-language="java">protected void resetMarksAtZero()</pre> <div class="block">Resets all the marks that have an offset of 0 to have an index of zero as well.</div> </section><section class="detail" id="shiftGapStartDown(int)"> <h3>shiftGapStartDown</h3> <pre class="lang-java" data-language="java">protected void shiftGapStartDown(int newGapStart)</pre> <div class="block">Adjust the gap end downward. This doesn't move any data, but it does update any marks affected by the boundary change. All marks from the old gap start down to the new gap start are squeezed to the end of the gap (their location has been removed).</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>newGapStart</code> - the new start of the gap</dd> </dl> </section><section class="detail" id="shiftGapEndUp(int)"> <h3>shiftGapEndUp</h3> <pre class="lang-java" data-language="java">protected void shiftGapEndUp(int newGapEnd)</pre> <div class="block">Adjust the gap end upward. This doesn't move any data, but it does update any marks affected by the boundary change. All marks from the old gap end up to the new gap end are squeezed to the end of the gap (their location has been removed).</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>newGapEnd</code> - the new end of the gap</dd> </dl> </section><section class="detail" id="getPositionsInRange(java.util.Vector,int,int)"> <h3>getPositionsInRange</h3> <pre class="lang-java" data-language="java">protected Vector getPositionsInRange(Vector v, int offset, int length)</pre> <div class="block">Returns a Vector containing instances of UndoPosRef for the Positions in the range <code>offset</code> to <code>offset</code> + <code>length</code>. If <code>v</code> is not null the matching Positions are placed in there. The vector with the resulting Positions are returned.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>v</code> - the Vector to use, with a new one created on null</dd> <dd>
<code>offset</code> - the starting offset &gt;= 0</dd> <dd>
<code>length</code> - the length &gt;= 0</dd> <dt>Returns:</dt> <dd>the set of instances</dd> </dl> </section><section class="detail" id="updateUndoPositions(java.util.Vector,int,int)"> <h3>updateUndoPositions</h3> <pre class="lang-java" data-language="java">protected void updateUndoPositions(Vector positions, int offset, int length)</pre> <div class="block">Resets the location for all the UndoPosRef instances in <code>positions</code>. <p> This is meant for internal usage, and is generally not of interest to subclasses.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>positions</code> - the UndoPosRef instances to reset</dd> <dd>
<code>offset</code> - where the string was inserted</dd> <dd>
<code>length</code> - length of inserted string</dd> </dl> </section><section class="detail" id="getArray()"> <h3>getArray</h3> <pre class="lang-java" data-language="java">protected final Object getArray()</pre> <div class="block">Access to the array. The actual type of the array is known only by the subclass.</div> <dl class="notes"> <dt>Returns:</dt> <dd>the java array of some type</dd> </dl> </section><section class="detail" id="getGapStart()"> <h3>getGapStart</h3> <pre class="lang-java" data-language="java">protected final int getGapStart()</pre> <div class="block">Access to the start of the gap.</div> <dl class="notes"> <dt>Returns:</dt> <dd>the start of the gap</dd> </dl> </section><section class="detail" id="getGapEnd()"> <h3>getGapEnd</h3> <pre class="lang-java" data-language="java">protected final int getGapEnd()</pre> <div class="block">Access to the end of the gap.</div> <dl class="notes"> <dt>Returns:</dt> <dd>the end of the gap</dd> </dl> </section><section class="detail" id="replace(int,int,java.lang.Object,int)"> <h3>replace</h3> <pre class="lang-java" data-language="java">protected void replace(int position, int rmSize, Object addItems, int addSize)</pre> <div class="block">Replace the given logical position in the storage with the given new items. This will move the gap to the area being changed if the gap is not currently located at the change location.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>position</code> - the location to make the replacement. This is not the location in the underlying storage array, but the location in the contiguous space being modeled.</dd> <dd>
<code>rmSize</code> - the number of items to remove</dd> <dd>
<code>addItems</code> - the new items to place in storage.</dd> <dd>
<code>addSize</code> - the number of items to add</dd> </dl> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993, 2023, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/javax/swing/text/GapContent.html" class="_attribution-link">https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/javax/swing/text/GapContent.html</a>
  </p>
</div>
