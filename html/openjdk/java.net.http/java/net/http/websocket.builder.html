<h1 title="Interface WebSocket.Builder" class="title">Interface WebSocket.Builder</h1> <section class="class-description" id="class-description"> <dl class="notes"> <dt>Enclosing interface:</dt> <dd><code><a href="websocket.html" title="interface in java.net.http">WebSocket</a></code></dd> </dl>  <pre class="lang-java" data-language="java">public static interface WebSocket.Builder</pre> <div class="block">A builder of <a href="websocket.html" title="interface in java.net.http">WebSocket Clients</a>. <p> Builders are created by invoking <a href="httpclient#newWebSocketBuilder()"><code>HttpClient.newWebSocketBuilder</code></a>. The intermediate (setter-like) methods change the state of the builder and return the same builder they have been invoked on. If an intermediate method is not invoked, an appropriate default value (or behavior) will be assumed. A <code>Builder</code> is not safe for use by multiple threads without external synchronization.</p>
</div> <dl class="notes"> <dt>Since:</dt> <dd>11</dd> </dl> </section> <section class="summary"> <section class="method-summary" id="method-summary"> <h2>Method Summary</h2> <div id="method-summary-table">  <div id="method-summary-table.tabpanel" role="tabpanel"> <table class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">                <tr>
<th>Modifier and Type</th>
<th>Method</th>
<th>Description</th>
</tr>
<tr>
<td><code><a href="../../../../java.base/java/util/concurrent/completablefuture.html" title="class in java.util.concurrent">CompletableFuture</a><wbr>&lt;<a href="websocket.html" title="interface in java.net.http">WebSocket</a>&gt;</wbr></code></td>
<td><code><a href="#buildAsync(java.net.URI,java.net.http.WebSocket.Listener)" class="member-name-link">buildAsync</a><wbr>(<a href="../../../../java.base/java/net/uri.html" title="class in java.net">URI</a> uri,
 <a href="websocket.listener.html" title="interface in java.net.http">WebSocket.Listener</a> listener)</wbr></code></td>
<td> <div class="block">Builds a <a href="websocket.html" title="interface in java.net.http"><code>WebSocket</code></a> connected to the given <code>URI</code> and associated with the given <code>Listener</code>.</div> </td>
</tr>
<tr>
<td><code><a href="websocket.builder.html" title="interface in java.net.http">WebSocket.Builder</a></code></td>
<td><code><a href="#connectTimeout(java.time.Duration)" class="member-name-link">connectTimeout</a><wbr>(<a href="../../../../java.base/java/time/duration.html" title="class in java.time">Duration</a> timeout)</wbr></code></td>
<td> <div class="block">Sets a timeout for establishing a WebSocket connection.</div> </td>
</tr>
<tr>
<td><code><a href="websocket.builder.html" title="interface in java.net.http">WebSocket.Builder</a></code></td>
<td><code><a href="#header(java.lang.String,java.lang.String)" class="member-name-link">header</a><wbr>(<a href="../../../../java.base/java/lang/string.html" title="class in java.lang">String</a> name,
 <a href="../../../../java.base/java/lang/string.html" title="class in java.lang">String</a> value)</wbr></code></td>
<td> <div class="block">Adds the given name-value pair to the list of additional HTTP headers sent during the opening handshake.</div> </td>
</tr>
<tr>
<td><code><a href="websocket.builder.html" title="interface in java.net.http">WebSocket.Builder</a></code></td>
<td><code><a href="#subprotocols(java.lang.String,java.lang.String...)" class="member-name-link">subprotocols</a><wbr>(<a href="../../../../java.base/java/lang/string.html" title="class in java.lang">String</a> mostPreferred,
 <a href="../../../../java.base/java/lang/string.html" title="class in java.lang">String</a>... lesserPreferred)</wbr></code></td>
<td> <div class="block">Sets a request for the given subprotocols.</div> </td>
</tr>
</table> </div> </div> </section> </section> <section class="details"> <section class="method-details" id="method-detail"> <h2>Method Details</h2>  </section><section class="detail" id="header(java.lang.String,java.lang.String)"> <h3>header</h3> <pre class="lang-java" data-language="java">WebSocket.Builder header(String name, String value)</pre> <div class="block">Adds the given name-value pair to the list of additional HTTP headers sent during the opening handshake. <p> Headers defined in the <a href="https://tools.ietf.org/html/rfc6455#section-11.3">WebSocket Protocol</a> are illegal. If this method is not invoked, no additional HTTP headers will be sent.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>name</code> - the header name</dd> <dd>
<code>value</code> - the header value</dd> <dt>Returns:</dt> <dd>this builder</dd> </dl> </section><section class="detail" id="connectTimeout(java.time.Duration)"> <h3>connectTimeout</h3> <pre class="lang-java" data-language="java">WebSocket.Builder connectTimeout(Duration timeout)</pre> <div class="block">Sets a timeout for establishing a WebSocket connection. <p> If the connection is not established within the specified duration then building of the <code>WebSocket</code> will fail with <a href="httptimeoutexception" title="class in java.net.http"><code>HttpTimeoutException</code></a>. If this method is not invoked then the infinite timeout is assumed.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>timeout</code> - the timeout, non-<a href="../../../../java.base/java/time/duration.html#isNegative()">negative</a>, non-<a href="../../../../java.base/java/time/duration.html#ZERO">ZERO</a>
</dd> <dt>Returns:</dt> <dd>this builder</dd> </dl> </section><section class="detail" id="subprotocols(java.lang.String,java.lang.String...)"> <h3>subprotocols</h3> <pre class="lang-java" data-language="java">WebSocket.Builder subprotocols(String mostPreferred, String... lesserPreferred)</pre> <div class="block">Sets a request for the given subprotocols. <p> After the <code>WebSocket</code> has been built, the actual subprotocol can be queried through <a href="websocket.html#getSubprotocol()"><code>WebSocket.getSubprotocol()</code></a>. </p>
<p> Subprotocols are specified in the order of preference. The most preferred subprotocol is specified first. If there are any additional subprotocols they are enumerated from the most preferred to the least preferred. </p>
<p> Subprotocols not conforming to the syntax of subprotocol identifiers are illegal. If this method is not invoked then no subprotocols will be requested.</p>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>mostPreferred</code> - the most preferred subprotocol</dd> <dd>
<code>lesserPreferred</code> - the lesser preferred subprotocols</dd> <dt>Returns:</dt> <dd>this builder</dd> </dl> </section><section class="detail" id="buildAsync(java.net.URI,java.net.http.WebSocket.Listener)"> <h3>buildAsync</h3> <pre class="lang-java" data-language="java">CompletableFuture&lt;WebSocket&gt; buildAsync(URI uri, WebSocket.Listener listener)</pre> <div class="block">Builds a <a href="websocket.html" title="interface in java.net.http"><code>WebSocket</code></a> connected to the given <code>URI</code> and associated with the given <code>Listener</code>. <p> Returns a <code>CompletableFuture</code> which will either complete normally with the resulting <code>WebSocket</code> or complete exceptionally with one of the following errors: </p>
<ul> <li> <a href="../../../../java.base/java/io/ioexception.html" title="class in java.io"><code>IOException</code></a> - if an I/O error occurs </li>
<li> <a href="websockethandshakeexception.html" title="class in java.net.http"><code>WebSocketHandshakeException</code></a> - if the opening handshake fails </li>
<li> <a href="httptimeoutexception" title="class in java.net.http"><code>HttpTimeoutException</code></a> - if the opening handshake does not complete within the timeout </li>
<li> <a href="../../../../java.base/java/lang/interruptedexception.html" title="class in java.lang"><code>InterruptedException</code></a> - if the operation is interrupted </li>
<li> <a href="../../../../java.base/java/lang/securityexception.html" title="class in java.lang"><code>SecurityException</code></a> - if a security manager has been installed and it denies <a href="../../../../java.base/java/net/urlpermission.html" title="class in java.net"><code>access</code></a> to <code>uri</code>. <a href="httpclient#securitychecks">Security checks</a> contains more information relating to the security context in which the listener is invoked. </li>
<li> <a href="../../../../java.base/java/lang/illegalargumentexception.html" title="class in java.lang"><code>IllegalArgumentException</code></a> - if any of the arguments of this builder's methods are illegal </li>
</ul>
</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>uri</code> - the WebSocket URI</dd> <dd>
<code>listener</code> - the listener</dd> <dt>Returns:</dt> <dd>a <code>CompletableFuture</code> with the <code>WebSocket</code>
</dd> </dl> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993, 2023, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/WebSocket.Builder.html" class="_attribution-link">https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/WebSocket.Builder.html</a>
  </p>
</div>
