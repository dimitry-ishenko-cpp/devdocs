<h1 title="Interface LinkerServices" class="title">Interface LinkerServices</h1> <section class="class-description" id="class-description">  <pre class="lang-java" data-language="java">public interface LinkerServices</pre> <div class="block">Interface for services provided to <a href="guardingdynamiclinker.html" title="interface in jdk.dynalink.linker"><code>GuardingDynamicLinker</code></a> instances by the <a href="../dynamiclinker.html" title="class in jdk.dynalink"><code>DynamicLinker</code></a> that owns them.</div> </section> <section class="summary"> <section class="method-summary" id="method-summary"> <h2>Method Summary</h2> <div id="method-summary-table">  <div id="method-summary-table.tabpanel" role="tabpanel"> <table class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">                            <tr>
<th>Modifier and Type</th>
<th>Method</th>
<th>Description</th>
</tr>
<tr>
<td><code><a href="../../../../java.base/java/lang/invoke/methodhandle.html" title="class in java.lang.invoke">MethodHandle</a></code></td>
<td><code><a href="#asType(java.lang.invoke.MethodHandle,java.lang.invoke.MethodType)" class="member-name-link">asType</a><wbr>(<a href="../../../../java.base/java/lang/invoke/methodhandle.html" title="class in java.lang.invoke">MethodHandle</a> handle,
 <a href="../../../../java.base/java/lang/invoke/methodtype.html" title="class in java.lang.invoke">MethodType</a> fromType)</wbr></code></td>
<td> <div class="block">Similar to <a href="../../../../java.base/java/lang/invoke/methodhandle.html#asType(java.lang.invoke.MethodType)"><code>MethodHandle.asType(MethodType)</code></a> except it also hooks in method handles produced by all available <a href="guardingtypeconverterfactory.html" title="interface in jdk.dynalink.linker"><code>GuardingTypeConverterFactory</code></a> implementations, providing for language-specific type coercing of parameters.</div> </td>
</tr>
<tr>
<td><code>default <a href="../../../../java.base/java/lang/invoke/methodhandle.html" title="class in java.lang.invoke">MethodHandle</a></code></td>
<td><code><a href="#asTypeLosslessReturn(java.lang.invoke.MethodHandle,java.lang.invoke.MethodType)" class="member-name-link">asTypeLosslessReturn</a><wbr>(<a href="../../../../java.base/java/lang/invoke/methodhandle.html" title="class in java.lang.invoke">MethodHandle</a> handle,
 <a href="../../../../java.base/java/lang/invoke/methodtype.html" title="class in java.lang.invoke">MethodType</a> fromType)</wbr></code></td>
<td> <div class="block">Similar to <a href="#asType(java.lang.invoke.MethodHandle,java.lang.invoke.MethodType)"><code>asType(MethodHandle, MethodType)</code></a> except it treats return value type conversion specially.</div> </td>
</tr>
<tr>
<td><code>boolean</code></td>
<td><code><a href="#canConvert(java.lang.Class,java.lang.Class)" class="member-name-link">canConvert</a><wbr>(<a href="../../../../java.base/java/lang/class.html" title="class in java.lang">Class</a>&lt;?&gt; from,
 <a href="../../../../java.base/java/lang/class.html" title="class in java.lang">Class</a>&lt;?&gt; to)</wbr></code></td>
<td> <div class="block">Returns true if there might exist a conversion between the requested types (either an automatic JVM conversion, or one provided by any available <a href="guardingtypeconverterfactory.html" title="interface in jdk.dynalink.linker"><code>GuardingTypeConverterFactory</code></a>), or false if there definitely does not exist a conversion between the requested types.</div> </td>
</tr>
<tr>
<td><code><a href="conversioncomparator.comparison.html" title="enum class in jdk.dynalink.linker">ConversionComparator.Comparison</a></code></td>
<td><code><a href="#compareConversion(java.lang.Class,java.lang.Class,java.lang.Class)" class="member-name-link">compareConversion</a><wbr>(<a href="../../../../java.base/java/lang/class.html" title="class in java.lang">Class</a>&lt;?&gt; sourceType,
 <a href="../../../../java.base/java/lang/class.html" title="class in java.lang">Class</a>&lt;?&gt; targetType1,
 <a href="../../../../java.base/java/lang/class.html" title="class in java.lang">Class</a>&lt;?&gt; targetType2)</wbr></code></td>
<td> <div class="block">Determines which of the two type conversions from a source type to the two target types is preferred.</div> </td>
</tr>
<tr>
<td><code><a href="../../../../java.base/java/lang/invoke/methodhandle.html" title="class in java.lang.invoke">MethodHandle</a></code></td>
<td><code><a href="#filterInternalObjects(java.lang.invoke.MethodHandle)" class="member-name-link">filterInternalObjects</a><wbr>(<a href="../../../../java.base/java/lang/invoke/methodhandle.html" title="class in java.lang.invoke">MethodHandle</a> target)</wbr></code></td>
<td> <div class="block">Modifies the method handle so that any parameters that can receive potentially internal language runtime objects will have a filter added on them to prevent them from escaping, potentially by wrapping them.</div> </td>
</tr>
<tr>
<td><code><a href="guardedinvocation.html" title="class in jdk.dynalink.linker">GuardedInvocation</a></code></td>
<td><code><a href="#getGuardedInvocation(jdk.dynalink.linker.LinkRequest)" class="member-name-link">getGuardedInvocation</a><wbr>(<a href="linkrequest.html" title="interface in jdk.dynalink.linker">LinkRequest</a> linkRequest)</wbr></code></td>
<td> <div class="block">Creates a guarded invocation delegating back to the <a href="../dynamiclinker.html" title="class in jdk.dynalink"><code>DynamicLinker</code></a> that exposes this linker services object.</div> </td>
</tr>
<tr>
<td><code><a href="../../../../java.base/java/lang/invoke/methodhandle.html" title="class in java.lang.invoke">MethodHandle</a></code></td>
<td><code><a href="#getTypeConverter(java.lang.Class,java.lang.Class)" class="member-name-link">getTypeConverter</a><wbr>(<a href="../../../../java.base/java/lang/class.html" title="class in java.lang">Class</a>&lt;?&gt; sourceType,
 <a href="../../../../java.base/java/lang/class.html" title="class in java.lang">Class</a>&lt;?&gt; targetType)</wbr></code></td>
<td> <div class="block">Given a source and target type, returns a method handle that converts between them.</div> </td>
</tr>
<tr>
<td><code>&lt;T&gt; T</code></td>
<td><code><a href="#getWithLookup(java.util.function.Supplier,jdk.dynalink.SecureLookupSupplier)" class="member-name-link">getWithLookup</a><wbr>(<a href="../../../../java.base/java/util/function/supplier.html" title="interface in java.util.function">Supplier</a>&lt;T&gt; operation,
 <a href="../securelookupsupplier.html" title="class in jdk.dynalink">SecureLookupSupplier</a> lookupSupplier)</wbr></code></td>
<td> <div class="block">Executes an operation within the context of a particular <code>MethodHandles.Lookup</code> lookup object.</div> </td>
</tr>
</table> </div> </div> </section> </section> <section class="details"> <section class="method-details" id="method-detail"> <h2>Method Details</h2>  </section><section class="detail" id="asType(java.lang.invoke.MethodHandle,java.lang.invoke.MethodType)"> <h3>asType</h3> <pre class="lang-java" data-language="java">MethodHandle asType(MethodHandle handle, MethodType fromType)</pre> <div class="block">Similar to <a href="../../../../java.base/java/lang/invoke/methodhandle.html#asType(java.lang.invoke.MethodType)"><code>MethodHandle.asType(MethodType)</code></a> except it also hooks in method handles produced by all available <a href="guardingtypeconverterfactory.html" title="interface in jdk.dynalink.linker"><code>GuardingTypeConverterFactory</code></a> implementations, providing for language-specific type coercing of parameters. It will apply <a href="../../../../java.base/java/lang/invoke/methodhandle.html#asType(java.lang.invoke.MethodType)"><code>MethodHandle.asType(MethodType)</code></a> for all primitive-to-primitive, wrapper-to-primitive, primitive-to-wrapper conversions as well as for all upcasts. For all other conversions, it'll insert <a href="../../../../java.base/java/lang/invoke/methodhandles.html#filterArguments(java.lang.invoke.MethodHandle,int,java.lang.invoke.MethodHandle...)"><code>MethodHandles.filterArguments(MethodHandle, int, MethodHandle...)</code></a> with composite filters provided by <a href="guardingtypeconverterfactory.html" title="interface in jdk.dynalink.linker"><code>GuardingTypeConverterFactory</code></a> implementations.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>handle</code> - target method handle</dd> <dd>
<code>fromType</code> - the types of source arguments</dd> <dt>Returns:</dt> <dd>a method handle that is a suitable combination of <a href="../../../../java.base/java/lang/invoke/methodhandle.html#asType(java.lang.invoke.MethodType)"><code>MethodHandle.asType(MethodType)</code></a>, <a href="../../../../java.base/java/lang/invoke/methodhandles.html#filterArguments(java.lang.invoke.MethodHandle,int,java.lang.invoke.MethodHandle...)"><code>MethodHandles.filterArguments(MethodHandle, int, MethodHandle...)</code></a>, and <a href="../../../../java.base/java/lang/invoke/methodhandles.html#filterReturnValue(java.lang.invoke.MethodHandle,java.lang.invoke.MethodHandle)"><code>MethodHandles.filterReturnValue(MethodHandle, MethodHandle)</code></a> with <a href="guardingtypeconverterfactory.html" title="interface in jdk.dynalink.linker"><code>GuardingTypeConverterFactory</code></a>-produced type converters as filters.</dd> </dl> </section><section class="detail" id="asTypeLosslessReturn(java.lang.invoke.MethodHandle,java.lang.invoke.MethodType)"> <h3>asTypeLosslessReturn</h3> <pre class="lang-java" data-language="java">default MethodHandle asTypeLosslessReturn(MethodHandle handle, MethodType fromType)</pre> <div class="block">Similar to <a href="#asType(java.lang.invoke.MethodHandle,java.lang.invoke.MethodType)"><code>asType(MethodHandle, MethodType)</code></a> except it treats return value type conversion specially. It only converts the return type of the method handle when it can be done using a conversion that loses neither precision nor magnitude, otherwise it leaves it unchanged. These are the only return value conversions that should be performed by individual language-specific linkers, and <a href="../dynamiclinkerfactory.html#setPrelinkTransformer(jdk.dynalink.linker.GuardedInvocationTransformer)"><code>pre-link transformer of the dynamic linker</code></a> should implement the strategy for dealing with potentially lossy return type conversions in a manner specific to the language runtime where the call site is located.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>handle</code> - target method handle</dd> <dd>
<code>fromType</code> - the types of source arguments</dd> <dt>Returns:</dt> <dd>a method handle that is a suitable combination of <a href="../../../../java.base/java/lang/invoke/methodhandle.html#asType(java.lang.invoke.MethodType)"><code>MethodHandle.asType(MethodType)</code></a>, and <a href="../../../../java.base/java/lang/invoke/methodhandles.html#filterArguments(java.lang.invoke.MethodHandle,int,java.lang.invoke.MethodHandle...)"><code>MethodHandles.filterArguments(MethodHandle, int, MethodHandle...)</code></a> with <a href="guardingtypeconverterfactory.html" title="interface in jdk.dynalink.linker"><code>GuardingTypeConverterFactory</code></a>-produced type converters as filters.</dd> </dl> </section><section class="detail" id="getTypeConverter(java.lang.Class,java.lang.Class)"> <h3>getTypeConverter</h3> <pre class="lang-java" data-language="java">MethodHandle getTypeConverter(Class&lt;?&gt; sourceType, Class&lt;?&gt; targetType)</pre> <div class="block">Given a source and target type, returns a method handle that converts between them. Never returns null; in worst case it will return an identity conversion (that might fail for some values at runtime). You rarely need to use this method directly and should mostly rely on <a href="#asType(java.lang.invoke.MethodHandle,java.lang.invoke.MethodType)"><code>asType(MethodHandle, MethodType)</code></a> instead. This method is needed when you need to reuse existing type conversion machinery outside the context of processing a link request.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>sourceType</code> - the type to convert from</dd> <dd>
<code>targetType</code> - the type to convert to</dd> <dt>Returns:</dt> <dd>a method handle performing the conversion.</dd> </dl> </section><section class="detail" id="canConvert(java.lang.Class,java.lang.Class)"> <h3>canConvert</h3> <pre class="lang-java" data-language="java">boolean canConvert(Class&lt;?&gt; from, Class&lt;?&gt; to)</pre> <div class="block">Returns true if there might exist a conversion between the requested types (either an automatic JVM conversion, or one provided by any available <a href="guardingtypeconverterfactory.html" title="interface in jdk.dynalink.linker"><code>GuardingTypeConverterFactory</code></a>), or false if there definitely does not exist a conversion between the requested types. Note that returning true does not guarantee that the conversion will succeed at runtime for all values (especially if the "from" or "to" types are sufficiently generic), but returning false guarantees that it would fail.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>from</code> - the source type for the conversion</dd> <dd>
<code>to</code> - the target type for the conversion</dd> <dt>Returns:</dt> <dd>true if there can be a conversion, false if there can not.</dd> </dl> </section><section class="detail" id="getGuardedInvocation(jdk.dynalink.linker.LinkRequest)"> <h3>getGuardedInvocation</h3> <pre class="lang-java" data-language="java">GuardedInvocation getGuardedInvocation(LinkRequest linkRequest) throws Exception</pre> <div class="block">Creates a guarded invocation delegating back to the <a href="../dynamiclinker.html" title="class in jdk.dynalink"><code>DynamicLinker</code></a> that exposes this linker services object. The dynamic linker will then itself delegate the linking to all of its managed <a href="guardingdynamiclinker.html" title="interface in jdk.dynalink.linker"><code>GuardingDynamicLinker</code></a>s including potentially this one if no linker responds earlier, so beware of infinite recursion. You'll typically craft the link request so that it will be different than the one you are currently trying to link.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>linkRequest</code> - a request for linking the invocation</dd> <dt>Returns:</dt> <dd>a guarded invocation linked by some of the guarding dynamic linkers managed by the top-level dynamic linker. Can be null if no available linker is able to link the invocation. You will typically use the elements of the returned invocation to compose your own invocation.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../../java.base/java/lang/exception.html" title="class in java.lang">Exception</a></code> - in case the top-level linker throws an exception</dd> </dl> </section><section class="detail" id="compareConversion(java.lang.Class,java.lang.Class,java.lang.Class)"> <h3>compareConversion</h3> <pre class="lang-java" data-language="java">ConversionComparator.Comparison compareConversion(Class&lt;?&gt; sourceType, Class&lt;?&gt; targetType1, Class&lt;?&gt; targetType2)</pre> <div class="block">Determines which of the two type conversions from a source type to the two target types is preferred. This is used for dynamic overloaded method resolution. If the source type is convertible to exactly one target type with a method invocation conversion, it is chosen, otherwise available <a href="conversioncomparator.html" title="interface in jdk.dynalink.linker"><code>ConversionComparator</code></a>s are consulted.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>sourceType</code> - the source type.</dd> <dd>
<code>targetType1</code> - one potential target type</dd> <dd>
<code>targetType2</code> - another potential target type.</dd> <dt>Returns:</dt> <dd>one of Comparison constants that establish which – if any – of the target types is preferable for the conversion.</dd> </dl> </section><section class="detail" id="filterInternalObjects(java.lang.invoke.MethodHandle)"> <h3>filterInternalObjects</h3> <pre class="lang-java" data-language="java">MethodHandle filterInternalObjects(MethodHandle target)</pre> <div class="block">Modifies the method handle so that any parameters that can receive potentially internal language runtime objects will have a filter added on them to prevent them from escaping, potentially by wrapping them. It can also potentially add an unwrapping filter to the return value. Basically transforms the method handle using the transformer configured by <a href="../dynamiclinkerfactory.html#setInternalObjectsFilter(jdk.dynalink.linker.MethodHandleTransformer)"><code>DynamicLinkerFactory.setInternalObjectsFilter(MethodHandleTransformer)</code></a>.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>target</code> - the target method handle</dd> <dt>Returns:</dt> <dd>a method handle with parameters and/or return type potentially filtered for wrapping and unwrapping.</dd> </dl> </section><section class="detail" id="getWithLookup(java.util.function.Supplier,jdk.dynalink.SecureLookupSupplier)"> <h3>getWithLookup</h3> <pre class="lang-java" data-language="java">&lt;T&gt; T getWithLookup(Supplier&lt;T&gt; operation, SecureLookupSupplier lookupSupplier)</pre> <div class="block">Executes an operation within the context of a particular <code>MethodHandles.Lookup</code> lookup object. Normally, methods on <code>LinkerServices</code> are invoked as part of the linking mechanism in which case Dynalink internally maintains a per-thread current lookup (the one belonging to the descriptor of the call site being linked). This lookup can be retrieved by any <a href="guardingtypeconverterfactory.html" title="interface in jdk.dynalink.linker"><code>GuardingTypeConverterFactory</code></a> involved in linking if it needs to generate lookup-sensitive converters. However, linker services' methods can be invoked outside the linking process too when implementing invocation-time dispatch schemes, invoking conversions at runtime, etc. If it becomes necessary to use any type converter in this situation, and it needs a lookup, it will normally only get <a href="../../../../java.base/java/lang/invoke/methodhandles.html#publicLookup()"><code>MethodHandles.publicLookup()</code></a> as the thread is not engaged in a linking operation. If there is a way to meaningfully associate the operation to the context of some caller class, consider performing it within an invocation of this method and passing a full-strength lookup for that class, as it will associate that lookup with the current thread for the duration of the operation. Note that since you are passing a <a href="../securelookupsupplier.html" title="class in jdk.dynalink"><code>SecureLookupSupplier</code></a>, any invoked type converter factories will still need to hold the necessary runtime permission to be able to get the lookup should they need it.</div> <dl class="notes"> <dt>Type Parameters:</dt> <dd>
<code>T</code> - the type of the return value provided by the passed-in supplier.</dd> <dt>Parameters:</dt> <dd>
<code>operation</code> - the operation to execute in context of the specified lookup.</dd> <dd>
<code>lookupSupplier</code> - secure supplier of the lookup</dd> <dt>Returns:</dt> <dd>the return value of the action</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../../java.base/java/lang/nullpointerexception.html" title="class in java.lang">NullPointerException</a></code> - if either action or lookupSupplier are null.</dd> <dt>See Also:</dt> <dd> <ul class="tag-list-long"> <li><a href="guardingtypeconverterfactory.html#convertToType(java.lang.Class,java.lang.Class,java.util.function.Supplier)"><code>GuardingTypeConverterFactory.convertToType(Class, Class, Supplier)</code></a></li> </ul> </dd> </dl> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993, 2023, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    <a href="https://docs.oracle.com/en/java/javase/21/docs/api/jdk.dynalink/jdk/dynalink/linker/LinkerServices.html" class="_attribution-link">https://docs.oracle.com/en/java/javase/21/docs/api/jdk.dynalink/jdk/dynalink/linker/LinkerServices.html</a>
  </p>
</div>
