<h1 title="Class CallSiteDescriptor" class="title">Class CallSiteDescriptor</h1> <div class="inheritance" title="Inheritance Tree">
<a href="../../../java.base/java/lang/object.html" title="class in java.lang">java.lang.Object</a> <div class="inheritance">
<a href="securelookupsupplier.html" title="class in jdk.dynalink">jdk.dynalink.SecureLookupSupplier</a> <div class="inheritance">jdk.dynalink.CallSiteDescriptor</div> </div> </div> <section class="class-description" id="class-description">  <pre class="lang-java" data-language="java">public class CallSiteDescriptor extends SecureLookupSupplier</pre> <div class="block">Call site descriptors contain all the information necessary for linking a call site. This information is normally passed as parameters to bootstrap methods and consists of the <code>MethodHandles.Lookup</code> object on the caller class in which the call site occurs, the dynamic operation at the call site, and the method type of the call site. <code>CallSiteDescriptor</code> objects are used in Dynalink to capture and store these parameters for subsequent use by the <a href="dynamiclinker.html" title="class in jdk.dynalink"><code>DynamicLinker</code></a>. <p> The constructors of built-in <a href="relinkablecallsite.html" title="interface in jdk.dynalink"><code>RelinkableCallSite</code></a> implementations all take a call site descriptor. </p>
<p> Call site descriptors must be immutable. You can use this class as-is or you can subclass it, especially if you need to add further information to the descriptors (typically, values passed in additional parameters to the bootstrap method. Since the descriptors must be immutable, you can set up a cache for equivalent descriptors to have the call sites share them. </p>
<p> The class extends <a href="securelookupsupplier.html" title="class in jdk.dynalink"><code>SecureLookupSupplier</code></a> for security-checked access to the <code>MethodHandles.Lookup</code> object it carries. This lookup should be used to find method handles to set as targets of the call site described by this descriptor.</p>
</div> </section> <section class="summary"> <section class="field-summary" id="field-summary"> <h2>Field Summary</h2> <div class="inherited-list"> <h3 id="fields-inherited-from-class-jdk.dynalink.SecureLookupSupplier">Fields declared in class jdk.dynalink.<a href="securelookupsupplier.html" title="class in jdk.dynalink">SecureLookupSupplier</a>
</h3> <code><a href="securelookupsupplier.html#GET_LOOKUP_PERMISSION_NAME">GET_LOOKUP_PERMISSION_NAME</a></code>
</div> </section><section class="constructor-summary" id="constructor-summary"> <h2>Constructor Summary</h2>  <table class="summary-table two-column-summary">     <tr>
<th>Constructor</th>
<th>Description</th>
</tr>
<tr>
<td><code><a href="#%3Cinit%3E(java.lang.invoke.MethodHandles.Lookup,jdk.dynalink.Operation,java.lang.invoke.MethodType)" class="member-name-link">CallSiteDescriptor</a><wbr>(<a href="../../../java.base/java/lang/invoke/methodhandles.lookup.html" title="class in java.lang.invoke">MethodHandles.Lookup</a> lookup,
 <a href="operation.html" title="interface in jdk.dynalink">Operation</a> operation,
 <a href="../../../java.base/java/lang/invoke/methodtype.html" title="class in java.lang.invoke">MethodType</a> methodType)</wbr></code></td>
<td> <div class="block">Creates a new call site descriptor.</div> </td>
</tr>
</table> </section><section class="method-summary" id="method-summary"> <h2>Method Summary</h2> <div id="method-summary-table">  <div id="method-summary-table.tabpanel" role="tabpanel"> <table class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">                               <tr>
<th>Modifier and Type</th>
<th>Method</th>
<th>Description</th>
</tr>
<tr>
<td><code>final <a href="callsitedescriptor.html" title="class in jdk.dynalink">CallSiteDescriptor</a></code></td>
<td><code><a href="#changeMethodType(java.lang.invoke.MethodType)" class="member-name-link">changeMethodType</a><wbr>(<a href="../../../java.base/java/lang/invoke/methodtype.html" title="class in java.lang.invoke">MethodType</a> newMethodType)</wbr></code></td>
<td> <div class="block">Finds or creates a call site descriptor that only differs in its method type from this descriptor.</div> </td>
</tr>
<tr>
<td><code>protected <a href="callsitedescriptor.html" title="class in jdk.dynalink">CallSiteDescriptor</a></code></td>
<td><code><a href="#changeMethodTypeInternal(java.lang.invoke.MethodType)" class="member-name-link">changeMethodTypeInternal</a><wbr>(<a href="../../../java.base/java/lang/invoke/methodtype.html" title="class in java.lang.invoke">MethodType</a> newMethodType)</wbr></code></td>
<td> <div class="block">Finds or creates a call site descriptor that only differs in its method type from this descriptor.</div> </td>
</tr>
<tr>
<td><code>final <a href="callsitedescriptor.html" title="class in jdk.dynalink">CallSiteDescriptor</a></code></td>
<td><code><a href="#changeOperation(jdk.dynalink.Operation)" class="member-name-link">changeOperation</a><wbr>(<a href="operation.html" title="interface in jdk.dynalink">Operation</a> newOperation)</wbr></code></td>
<td> <div class="block">Finds or creates a call site descriptor that only differs in its operation from this descriptor.</div> </td>
</tr>
<tr>
<td><code>protected <a href="callsitedescriptor.html" title="class in jdk.dynalink">CallSiteDescriptor</a></code></td>
<td><code><a href="#changeOperationInternal(jdk.dynalink.Operation)" class="member-name-link">changeOperationInternal</a><wbr>(<a href="operation.html" title="interface in jdk.dynalink">Operation</a> newOperation)</wbr></code></td>
<td> <div class="block">Finds or creates a call site descriptor that only differs in its operation from this descriptor.</div> </td>
</tr>
<tr>
<td><code>boolean</code></td>
<td><code><a href="#equals(java.lang.Object)" class="member-name-link">equals</a><wbr>(<a href="../../../java.base/java/lang/object.html" title="class in java.lang">Object</a> obj)</wbr></code></td>
<td> <div class="block">Returns true if this call site descriptor is equal to the passed object.</div> </td>
</tr>
<tr>
<td><code>final <a href="../../../java.base/java/lang/invoke/methodtype.html" title="class in java.lang.invoke">MethodType</a></code></td>
<td><code><a href="#getMethodType()" class="member-name-link">getMethodType</a>()</code></td>
<td> <div class="block">The type of the method at the call site.</div> </td>
</tr>
<tr>
<td><code>final <a href="operation.html" title="interface in jdk.dynalink">Operation</a></code></td>
<td><code><a href="#getOperation()" class="member-name-link">getOperation</a>()</code></td>
<td> <div class="block">Returns the operation at the call site.</div> </td>
</tr>
<tr>
<td><code>int</code></td>
<td><code><a href="#hashCode()" class="member-name-link">hashCode</a>()</code></td>
<td> <div class="block">Returns a value-based hash code of this call site descriptor computed from its operation, method type, and lookup object's lookup class and lookup modes.</div> </td>
</tr>
<tr>
<td><code><a href="../../../java.base/java/lang/string.html" title="class in java.lang">String</a></code></td>
<td><code><a href="#toString()" class="member-name-link">toString</a>()</code></td>
<td> <div class="block">Returns the string representation of this call site descriptor, of the format <code>name(parameterTypes)returnType@lookup</code>.</div> </td>
</tr>
</table> </div> </div> <div class="inherited-list"> <h3 id="methods-inherited-from-class-jdk.dynalink.SecureLookupSupplier">Methods declared in class jdk.dynalink.<a href="securelookupsupplier.html" title="class in jdk.dynalink">SecureLookupSupplier</a>
</h3> <code><a href="securelookupsupplier.html#getLookup()">getLookup</a>, <a href="securelookupsupplier.html#getLookupPrivileged()">getLookupPrivileged</a></code>
</div> <div class="inherited-list"> <h3 id="methods-inherited-from-class-java.lang.Object">Methods declared in class java.lang.<a href="../../../java.base/java/lang/object.html" title="class in java.lang">Object</a>
</h3> <code><a href="../../../java.base/java/lang/object.html#clone()">clone</a>, <a href="../../../java.base/java/lang/object.html#finalize()">finalize</a>, <a href="../../../java.base/java/lang/object.html#getClass()">getClass</a>, <a href="../../../java.base/java/lang/object.html#notify()">notify</a>, <a href="../../../java.base/java/lang/object.html#notifyAll()">notifyAll</a>, <a href="../../../java.base/java/lang/object.html#wait()">wait</a>, <a href="../../../java.base/java/lang/object.html#wait(long)">wait</a>, <a href="../../../java.base/java/lang/object.html#wait(long,int)">wait</a></code>
</div> </section> </section> <section class="details"> <section class="constructor-details" id="constructor-detail"> <h2>Constructor Details</h2>  </section><section class="detail" id="&lt;init&gt;(java.lang.invoke.MethodHandles.Lookup,jdk.dynalink.Operation,java.lang.invoke.MethodType)"> <h3>CallSiteDescriptor</h3> <pre class="lang-java" data-language="java">public CallSiteDescriptor(MethodHandles.Lookup lookup, Operation operation, MethodType methodType)</pre> <div class="block">Creates a new call site descriptor.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>lookup</code> - the lookup object describing the class the call site belongs to. When creating descriptors from a <a href="../../../java.base/java/lang/invoke/package-summary.html"><code>java.lang.invoke</code></a> bootstrap method, it should be the lookup passed to the bootstrap.</dd> <dd>
<code>operation</code> - the dynamic operation at the call site.</dd> <dd>
<code>methodType</code> - the method type of the call site. When creating descriptors from a <a href="../../../java.base/java/lang/invoke/package-summary.html"><code>java.lang.invoke</code></a> bootstrap method, it should be the method type passed to the bootstrap.</dd> </dl> </section><section class="method-details" id="method-detail"> <h2>Method Details</h2>  </section><section class="detail" id="getOperation()"> <h3>getOperation</h3> <pre class="lang-java" data-language="java">public final Operation getOperation()</pre> <div class="block">Returns the operation at the call site.</div> <dl class="notes"> <dt>Returns:</dt> <dd>the operation at the call site.</dd> </dl> </section><section class="detail" id="getMethodType()"> <h3>getMethodType</h3> <pre class="lang-java" data-language="java">public final MethodType getMethodType()</pre> <div class="block">The type of the method at the call site.</div> <dl class="notes"> <dt>Returns:</dt> <dd>type of the method at the call site.</dd> </dl> </section><section class="detail" id="changeMethodType(java.lang.invoke.MethodType)"> <h3>changeMethodType</h3> <pre class="lang-java" data-language="java">public final CallSiteDescriptor changeMethodType(MethodType newMethodType)</pre> <div class="block">Finds or creates a call site descriptor that only differs in its method type from this descriptor. Invokes <a href="#changeMethodTypeInternal(java.lang.invoke.MethodType)"><code>changeMethodTypeInternal(MethodType)</code></a>.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>newMethodType</code> - the new method type</dd> <dt>Returns:</dt> <dd>a call site descriptor with changed method type.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/nullpointerexception.html" title="class in java.lang">NullPointerException</a></code> - if <code>newMethodType</code> is null.</dd> </dl> </section><section class="detail" id="changeMethodTypeInternal(java.lang.invoke.MethodType)"> <h3>changeMethodTypeInternal</h3> <pre class="lang-java" data-language="java">protected CallSiteDescriptor changeMethodTypeInternal(MethodType newMethodType)</pre> <div class="block">Finds or creates a call site descriptor that only differs in its method type from this descriptor. Subclasses must override this method to return an object of their exact class. If an overridden method changes something other than the method type in the descriptor (its class, lookup, or operation), or returns null, an <code>AssertionError</code> will be thrown from <a href="#changeMethodType(java.lang.invoke.MethodType)"><code>changeMethodType(MethodType)</code></a>.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>newMethodType</code> - the new method type</dd> <dt>Returns:</dt> <dd>a call site descriptor with the changed method type.</dd> </dl> </section><section class="detail" id="changeOperation(jdk.dynalink.Operation)"> <h3>changeOperation</h3> <pre class="lang-java" data-language="java">public final CallSiteDescriptor changeOperation(Operation newOperation)</pre> <div class="block">Finds or creates a call site descriptor that only differs in its operation from this descriptor. Invokes <a href="#changeOperationInternal(jdk.dynalink.Operation)"><code>changeOperationInternal(Operation)</code></a>.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>newOperation</code> - the new operation</dd> <dt>Returns:</dt> <dd>a call site descriptor with the changed operation.</dd> <dt>Throws:</dt> <dd>
<code><a href="../../../java.base/java/lang/nullpointerexception.html" title="class in java.lang">NullPointerException</a></code> - if <code>newOperation</code> is null.</dd> <dd>
<code><a href="../../../java.base/java/lang/securityexception.html" title="class in java.lang">SecurityException</a></code> - if the descriptor's lookup isn't the <a href="../../../java.base/java/lang/invoke/methodhandles.html#publicLookup()"><code>MethodHandles.publicLookup()</code></a>, and a security manager is present, and a check for <code>RuntimePermission("dynalink.getLookup")</code> fails. This is necessary as changing the operation in the call site descriptor allows fabrication of descriptors for arbitrary operations with the lookup.</dd> </dl> </section><section class="detail" id="changeOperationInternal(jdk.dynalink.Operation)"> <h3>changeOperationInternal</h3> <pre class="lang-java" data-language="java">protected CallSiteDescriptor changeOperationInternal(Operation newOperation)</pre> <div class="block">Finds or creates a call site descriptor that only differs in its operation from this descriptor. Subclasses must override this method to return an object of their exact class. If an overridden method changes something other than the operation in the descriptor (its class, lookup, or method type), or returns null, an <code>AssertionError</code> will be thrown from <a href="#changeOperation(jdk.dynalink.Operation)"><code>changeOperation(Operation)</code></a>.</div> <dl class="notes"> <dt>Parameters:</dt> <dd>
<code>newOperation</code> - the new operation</dd> <dt>Returns:</dt> <dd>a call site descriptor with the changed operation.</dd> </dl> </section><section class="detail" id="equals(java.lang.Object)"> <h3>equals</h3> <pre class="lang-java" data-language="java">public boolean equals(Object obj)</pre> <div class="block">Returns true if this call site descriptor is equal to the passed object. It is considered equal if the other object is of the exact same class, their operations and method types are equal, and their lookups have the same <a href="../../../java.base/java/lang/invoke/methodhandles.lookup.html#lookupClass()"><code>MethodHandles.Lookup.lookupClass()</code></a> and <a href="../../../java.base/java/lang/invoke/methodhandles.lookup.html#lookupModes()"><code>MethodHandles.Lookup.lookupModes()</code></a>.</div> <dl class="notes"> <dt>Overrides:</dt> <dd>
<code><a href="../../../java.base/java/lang/object.html#equals(java.lang.Object)">equals</a></code> in class <code><a href="../../../java.base/java/lang/object.html" title="class in java.lang">Object</a></code>
</dd> <dt>Parameters:</dt> <dd>
<code>obj</code> - the reference object with which to compare.</dd> <dt>Returns:</dt> <dd>
<code>true</code> if this object is the same as the obj argument; <code>false</code> otherwise.</dd> <dt>See Also:</dt> <dd> <ul class="tag-list"> <li><a href="../../../java.base/java/lang/object.html#hashCode()"><code>Object.hashCode()</code></a></li> <li><a href="../../../java.base/java/util/hashmap.html" title="class in java.util"><code>HashMap</code></a></li> </ul> </dd> </dl> </section><section class="detail" id="hashCode()"> <h3>hashCode</h3> <pre class="lang-java" data-language="java">public int hashCode()</pre> <div class="block">Returns a value-based hash code of this call site descriptor computed from its operation, method type, and lookup object's lookup class and lookup modes.</div> <dl class="notes"> <dt>Overrides:</dt> <dd>
<code><a href="../../../java.base/java/lang/object.html#hashCode()">hashCode</a></code> in class <code><a href="../../../java.base/java/lang/object.html" title="class in java.lang">Object</a></code>
</dd> <dt>Returns:</dt> <dd>value-based hash code for this call site descriptor.</dd> <dt>See Also:</dt> <dd> <ul class="tag-list-long"> <li><a href="../../../java.base/java/lang/object.html#equals(java.lang.Object)"><code>Object.equals(java.lang.Object)</code></a></li> <li><a href="../../../java.base/java/lang/system.html#identityHashCode(java.lang.Object)"><code>System.identityHashCode(java.lang.Object)</code></a></li> </ul> </dd> </dl> </section><section class="detail" id="toString()"> <h3>toString</h3> <pre class="lang-java" data-language="java">public String toString()</pre> <div class="block">Returns the string representation of this call site descriptor, of the format <code>name(parameterTypes)returnType@lookup</code>.</div> <dl class="notes"> <dt>Overrides:</dt> <dd>
<code><a href="../../../java.base/java/lang/object.html#toString()">toString</a></code> in class <code><a href="../../../java.base/java/lang/object.html" title="class in java.lang">Object</a></code>
</dd> <dt>Returns:</dt> <dd>a string representation of the object.</dd> </dl> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 1993, 2023, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    <a href="https://docs.oracle.com/en/java/javase/21/docs/api/jdk.dynalink/jdk/dynalink/CallSiteDescriptor.html" class="_attribution-link">https://docs.oracle.com/en/java/javase/21/docs/api/jdk.dynalink/jdk/dynalink/CallSiteDescriptor.html</a>
  </p>
</div>
