<h1> Class Response  </h1> <div class="description"> <p>Responses contain the response text, status and headers of a HTTP response.</p> <p>There are external packages such as <code>fig/http-message-util</code> that provide HTTP status code constants. These can be used with any method that accepts or returns a status code integer. Keep in mind that these constants might include status codes that are now allowed which will throw an <code>\InvalidArgumentException</code>.</p> </div> <div class="info"> <b>Namespace:</b> <a href="namespace-cake.http.html">Cake\Http</a><br> </div> <div class="section"> <h2>Constants</h2> <ul class="member-summary constants"> <li class="clearfix">  <div class="attributes col-md-2 col-sm-2 p0"> <code>int</code> </div> <div class="name col-md-10 col-sm-10"> <b>STATUS_CODE_MAX</b>   </div> <div class="col-md-10 col-md-offset-2"> <pre data-language="php">599</pre> </div>  </li> <li class="clearfix">  <div class="attributes col-md-2 col-sm-2 p0"> <code>int</code> </div> <div class="name col-md-10 col-sm-10"> <b>STATUS_CODE_MIN</b>   </div> <div class="col-md-10 col-md-offset-2"> <pre data-language="php">100</pre> </div>  </li> </ul> </div> <div class="section"> <h2>Property Summary</h2> <ul class="member-summary properties"> <li class="clearfix"> <div class="name"> <a href="#%24_cacheDirectives">$_cacheDirectives</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>array&lt;string, mixed&gt;</code></div> <div class="description"> <p>Holds all the cache directives that will be converted into headers when sending the request</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_charset">$_charset</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>string</code></div> <div class="description"> <p>The charset the response body is encoded with</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_cookies">$_cookies</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>Cake\Http\Cookie\CookieCollection</code></div> <div class="description"> <p>Collection of cookies to send to the client</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_file">$_file</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>SplFileInfo|null</code></div> <div class="description"> <p>File object for file to be read out as response</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_fileRange">$_fileRange</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>array&lt;int&gt;</code></div> <div class="description"> <p>File range. Used for requesting ranges of files.</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_mimeTypes">$_mimeTypes</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>array&lt;string, mixed&gt;</code></div> <div class="description"> <p>Holds type key to mime type mappings for known mime types.</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_reasonPhrase">$_reasonPhrase</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>string</code></div> <div class="description"> <p>Reason Phrase</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_status">$_status</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>int</code></div> <div class="description"> <p>Status code to send to the client</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_statusCodes">$_statusCodes</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>array&lt;int, string&gt;</code></div> <div class="description"> <p>Allowed HTTP status codes and their default description.</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_streamMode">$_streamMode</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>string</code></div> <div class="description"> <p>Stream mode options.</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_streamTarget">$_streamTarget</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>resource|string</code></div> <div class="description"> <p>Stream target or resource object.</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24headerNames">$headerNames</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>array</code></div> <div class="description"> <p>Map of normalized header name to original name used to register header.</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24headers">$headers</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>array</code></div> <div class="description"> <p>List of all registered headers, as key =&gt; array of values.</p> </div> </li> </ul> </div> <div class="section"> <h2>Method Summary</h2> <ul class="member-summary"> <li class="clearfix"> <h5 class="function-name"> <a href="#__construct()">__construct()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Constructor</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#__debugInfo()">__debugInfo()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Returns an array that can be used to describe the internal state of this object.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#__toString()">__toString()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>String conversion. Fetches the response body as a string. Does <em>not</em> send headers. If body is a callable, a blank string is returned.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_clearHeader()">_clearHeader()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Clear header</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_createStream()">_createStream()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Creates the stream object.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_fileRange()">_fileRange()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Apply a file range to a file and set the end offset.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_getUTCDate()">_getUTCDate()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Returns a DateTime object initialized at the $time param and using UTC as timezone</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_setCacheControl()">_setCacheControl()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Helper method to generate a valid Cache-Control header from the options set in other methods</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_setContentType()">_setContentType()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Formats the Content-Type header based on the configured contentType and charset the charset will only be set in the header if the response is of type text/*</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_setHeader()">_setHeader()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Sets a header.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_setStatus()">_setStatus()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Modifier for response status</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#checkNotModified()">checkNotModified()</a> <span class="label">public</span> <span class="label">deprecated</span> </h5> <div class="description detailed"> <p>Checks whether a response has not been modified according to the 'If-None-Match' (Etags) and 'If-Modified-Since' (last modification date) request headers. If the response is detected to be not modified, it is marked as so accordingly so the client can be informed of that.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#compress()">compress()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Sets the correct output buffering handler to send a compressed response. Responses will be compressed with zlib, if the extension is available.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#cors()">cors()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Get a CorsBuilder instance for defining CORS headers.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getBody()">getBody()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Gets the body of the message.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getCharset()">getCharset()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Returns the current charset.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getCookie()">getCookie()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Read a single cookie from the response.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getCookieCollection()">getCookieCollection()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Get the CookieCollection from the response</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getCookies()">getCookies()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Get all cookies in the response.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getFile()">getFile()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Get the current file if one exists.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getHeader()">getHeader()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Retrieves a message header value by the given case-insensitive name.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getHeaderLine()">getHeaderLine()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Retrieves a comma-separated string of the values for a single header.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getHeaders()">getHeaders()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Retrieves all message headers.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getMimeType()">getMimeType()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Returns the mime type definition for an alias</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getProtocolVersion()">getProtocolVersion()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Retrieves the HTTP protocol version as a string.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getReasonPhrase()">getReasonPhrase()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Gets the response reason phrase associated with the status code.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getStatusCode()">getStatusCode()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Gets the response status code.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getType()">getType()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Returns the current content type.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#hasHeader()">hasHeader()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Checks if a header exists by the given case-insensitive name.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#isNotModified()">isNotModified()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Checks whether a response has not been modified according to the 'If-None-Match' (Etags) and 'If-Modified-Since' (last modification date) request headers.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#mapType()">mapType()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Maps a content-type back to an alias</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#notModified()">notModified()</a> <span class="label">public</span> <span class="label">deprecated</span> </h5> <div class="description detailed"> <p>Sets the response as Not Modified by removing any body contents setting the status code to "304 Not Modified" and removing all conflicting headers</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#outputCompressed()">outputCompressed()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Returns whether the resulting output will be compressed by PHP</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#resolveType()">resolveType()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Translate and validate content-types.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#setTypeMap()">setTypeMap()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Sets a content type definition into the map.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#validateFile()">validateFile()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Validate a file path is a valid response body.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withAddedHeader()">withAddedHeader()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Return an instance with the specified header appended with the given value.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withAddedLink()">withAddedLink()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Create a new response with the Link header set.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withBody()">withBody()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Return an instance with the specified message body.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withCache()">withCache()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Create a new instance with the headers to enable client caching.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withCharset()">withCharset()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Get a new instance with an updated charset.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withCookie()">withCookie()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Create a new response with a cookie set.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withCookieCollection()">withCookieCollection()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Get a new instance with provided cookie collection.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withDisabledCache()">withDisabledCache()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Create a new instance with headers to instruct the client to not cache the response</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withDownload()">withDownload()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Create a new instance with the Content-Disposition header set.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withEtag()">withEtag()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Create a new instance with the Etag header set.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withExpiredCookie()">withExpiredCookie()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Create a new response with an expired cookie set.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withExpires()">withExpires()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Create a new instance with the Expires header set.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withFile()">withFile()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Create a new instance that is based on a file.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withHeader()">withHeader()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Return an instance with the provided header, replacing any existing values of any headers with the same case-insensitive name.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withLength()">withLength()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Create a new response with the Content-Length header set.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withLocation()">withLocation()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Return an instance with an updated location header.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withMaxAge()">withMaxAge()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Create an instance with Cache-Control max-age directive set.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withModified()">withModified()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Create a new instance with the Last-Modified header set.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withMustRevalidate()">withMustRevalidate()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Create an instance with Cache-Control must-revalidate directive set.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withNotModified()">withNotModified()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Create a new instance as 'not modified'</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withProtocolVersion()">withProtocolVersion()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Return an instance with the specified HTTP protocol version.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withSharable()">withSharable()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Create a new instace with the public/private Cache-Control directive set.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withSharedMaxAge()">withSharedMaxAge()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Create a new instance with the Cache-Control s-maxage directive.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withStatus()">withStatus()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Return an instance with the specified status code and, optionally, reason phrase.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withStringBody()">withStringBody()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Convenience method to set a string into the response body</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withType()">withType()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Get an updated response with the content type set.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withVary()">withVary()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Create a new instance with the Vary header set.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#withoutHeader()">withoutHeader()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Return an instance without the specified header.</p> </div> </li> </ul> <div class="section"> <h2>Method Detail</h2> <div class="method-detail">  <h3 class="method-name" id="__construct()"> __construct()   <span class="label">public</span> </h3> <pre data-language="php">__construct(array&lt;string, mixed&gt; $options = [])</pre> <div class="description detailed"> <p>Constructor</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>list of parameters to setup the response. Possible values are:</p></dd> </dl> </div> <h4>Throws</h4> <div class="list"> <code>InvalidArgumentException</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="__debugInfo()"> __debugInfo()   <span class="label">public</span> </h3> <pre data-language="php">__debugInfo(): array&lt;string, mixed&gt;</pre> <div class="description detailed"> <p>Returns an array that can be used to describe the internal state of this object.</p> <h4>Returns</h4> <div class="list"> <code>array&lt;string, mixed&gt;</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="__toString()"> __toString()   <span class="label">public</span> </h3> <pre data-language="php">__toString(): string</pre> <div class="description detailed"> <p>String conversion. Fetches the response body as a string. Does <em>not</em> send headers. If body is a callable, a blank string is returned.</p> <h4>Returns</h4> <div class="list"> <code>string</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_clearHeader()"> _clearHeader()   <span class="label">protected</span> </h3> <pre data-language="php">_clearHeader(string $header): void</pre> <div class="description detailed"> <p>Clear header</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$header</var> </dt> <dd><p>Header key.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_createStream()"> _createStream()   <span class="label">protected</span> </h3> <pre data-language="php">_createStream(): void</pre> <div class="description detailed"> <p>Creates the stream object.</p> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_fileRange()"> _fileRange()   <span class="label">protected</span> </h3> <pre data-language="php">_fileRange(SplFileInfo $file, string $httpRange): void</pre> <div class="description detailed"> <p>Apply a file range to a file and set the end offset.</p> <p>If an invalid range is requested a 416 Status code will be used in the response.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>SplFileInfo</code> <var>$file</var> </dt> <dd><p>The file to set a range on.</p></dd> <dt> <code>string</code> <var>$httpRange</var> </dt> <dd><p>The range to use.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_getUTCDate()"> _getUTCDate()   <span class="label">protected</span> </h3> <pre data-language="php">_getUTCDate(DateTimeInterface|string|int|null $time = null): DateTimeInterface</pre> <div class="description detailed"> <p>Returns a DateTime object initialized at the $time param and using UTC as timezone</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>DateTimeInterface|string|int|null</code> <var>$time</var> <span class="label">optional</span> </dt> <dd><p>Valid time string or \DateTimeInterface instance.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>DateTimeInterface</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_setCacheControl()"> _setCacheControl()   <span class="label">protected</span> </h3> <pre data-language="php">_setCacheControl(): void</pre> <div class="description detailed"> <p>Helper method to generate a valid Cache-Control header from the options set in other methods</p> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_setContentType()"> _setContentType()   <span class="label">protected</span> </h3> <pre data-language="php">_setContentType(string $type): void</pre> <div class="description detailed"> <p>Formats the Content-Type header based on the configured contentType and charset the charset will only be set in the header if the response is of type text/*</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$type</var> </dt> <dd><p>The type to set.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_setHeader()"> _setHeader()   <span class="label">protected</span> </h3> <pre data-language="php">_setHeader(string $header, string $value): void</pre> <div class="description detailed"> <p>Sets a header.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$header</var> </dt> <dd><p>Header key.</p></dd> <dt> <code>string</code> <var>$value</var> </dt> <dd><p>Header value.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_setStatus()"> _setStatus()   <span class="label">protected</span> </h3> <pre data-language="php">_setStatus(int $code, string $reasonPhrase = ''): void</pre> <div class="description detailed"> <p>Modifier for response status</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>int</code> <var>$code</var> </dt> <dd><p>The status code to set.</p></dd> <dt> <code>string</code> <var>$reasonPhrase</var> <span class="label">optional</span> </dt> <dd><p>The response reason phrase.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> <h4>Throws</h4> <div class="list"> <code>InvalidArgumentException</code><br> For invalid status code arguments. </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="checkNotModified()"> checkNotModified()   <span class="label">public</span> </h3> <pre data-language="php">checkNotModified(Cake\Http\ServerRequest $request): bool</pre> <div class="description detailed"> <p>Checks whether a response has not been modified according to the 'If-None-Match' (Etags) and 'If-Modified-Since' (last modification date) request headers. If the response is detected to be not modified, it is marked as so accordingly so the client can be informed of that.</p> <p>In order to mark a response as not modified, you need to set at least the Last-Modified etag response header before calling this method. Otherwise a comparison will not be possible.</p> <p><em>Warning</em> This method mutates the response in-place and should be avoided.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\Http\ServerRequest</code> <var>$request</var> </dt> <dd><p>Request object</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>bool</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="compress()"> compress()   <span class="label">public</span> </h3> <pre data-language="php">compress(): bool</pre> <div class="description detailed"> <p>Sets the correct output buffering handler to send a compressed response. Responses will be compressed with zlib, if the extension is available.</p> <h4>Returns</h4> <div class="list"> <code>bool</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="cors()"> cors()   <span class="label">public</span> </h3> <pre data-language="php">cors(Cake\Http\ServerRequest $request): Cake\Http\CorsBuilder</pre> <div class="description detailed"> <p>Get a CorsBuilder instance for defining CORS headers.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\Http\ServerRequest</code> <var>$request</var> </dt> <dd><p>Request object</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Http\CorsBuilder</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getBody()"> getBody()  <span class="label">public</span> </h3> <pre data-language="php">getBody(): StreamInterface</pre> <div class="description detailed"> <p>Gets the body of the message.</p> <h4>Returns</h4> <div class="list"> <code>StreamInterface</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getCharset()"> getCharset()   <span class="label">public</span> </h3> <pre data-language="php">getCharset(): string</pre> <div class="description detailed"> <p>Returns the current charset.</p> <h4>Returns</h4> <div class="list"> <code>string</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getCookie()"> getCookie()   <span class="label">public</span> </h3> <pre data-language="php">getCookie(string $name): array|null</pre> <div class="description detailed"> <p>Read a single cookie from the response.</p> <p>This method provides read access to pending cookies. It will not read the <code>Set-Cookie</code> header if set.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$name</var> </dt> <dd><p>The cookie name you want to read.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>array|null</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getCookieCollection()"> getCookieCollection()   <span class="label">public</span> </h3> <pre data-language="php">getCookieCollection(): Cake\Http\Cookie\CookieCollection</pre> <div class="description detailed"> <p>Get the CookieCollection from the response</p> <h4>Returns</h4> <div class="list"> <code>Cake\Http\Cookie\CookieCollection</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getCookies()"> getCookies()   <span class="label">public</span> </h3> <pre data-language="php">getCookies(): array&lt;string, array&gt;</pre> <div class="description detailed"> <p>Get all cookies in the response.</p> <p>Returns an associative array of cookie name =&gt; cookie data.</p> <h4>Returns</h4> <div class="list"> <code>array&lt;string, array&gt;</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getFile()"> getFile()   <span class="label">public</span> </h3> <pre data-language="php">getFile(): SplFileInfo|null</pre> <div class="description detailed"> <p>Get the current file if one exists.</p> <h4>Returns</h4> <div class="list"> <code>SplFileInfo|null</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getHeader()"> getHeader()  <span class="label">public</span> </h3> <pre data-language="php">getHeader(string $header): string[]</pre> <div class="description detailed"> <p>Retrieves a message header value by the given case-insensitive name.</p> <p>This method returns an array of all the header values of the given case-insensitive header name.</p> <p>If the header does not appear in the message, this method MUST return an empty array.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$header</var> </dt> <dd><p>Case-insensitive header field name.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>string[]</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getHeaderLine()"> getHeaderLine()  <span class="label">public</span> </h3> <pre data-language="php">getHeaderLine(string $name): string</pre> <div class="description detailed"> <p>Retrieves a comma-separated string of the values for a single header.</p> <p>This method returns all of the header values of the given case-insensitive header name as a string concatenated together using a comma.</p> <p>NOTE: Not all header values may be appropriately represented using comma concatenation. For such headers, use getHeader() instead and supply your own delimiter when concatenating.</p> <p>If the header does not appear in the message, this method MUST return an empty string.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$name</var> </dt> <dd><p>Case-insensitive header field name.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>string</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getHeaders()"> getHeaders()  <span class="label">public</span> </h3> <pre data-language="php">getHeaders(): array</pre> <div class="description detailed"> <p>Retrieves all message headers.</p> <p>The keys represent the header name as it will be sent over the wire, and each value is an array of strings associated with the header.</p> <p>// Represent the headers as a string foreach ($message-&gt;getHeaders() as $name =&gt; $values) { echo $name . ": " . implode(", ", $values); }</p> <p>// Emit headers iteratively: foreach ($message-&gt;getHeaders() as $name =&gt; $values) { foreach ($values as $value) { header(sprintf('%s: %s', $name, $value), false); } }</p> <h4>Returns</h4> <div class="list"> <code>array</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getMimeType()"> getMimeType()   <span class="label">public</span> </h3> <pre data-language="php">getMimeType(string $alias): array|string|false</pre> <div class="description detailed"> <p>Returns the mime type definition for an alias</p> <p>e.g <code>getMimeType('pdf'); // returns 'application/pdf'</code></p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$alias</var> </dt> <dd><p>the content type alias to map</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>array|string|false</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getProtocolVersion()"> getProtocolVersion()  <span class="label">public</span> </h3> <pre data-language="php">getProtocolVersion(): string</pre> <div class="description detailed"> <p>Retrieves the HTTP protocol version as a string.</p> <p>The string MUST contain only the HTTP version number (e.g., "1.1", "1.0").</p> <h4>Returns</h4> <div class="list"> <code>string</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getReasonPhrase()"> getReasonPhrase()   <span class="label">public</span> </h3> <pre data-language="php">getReasonPhrase(): string</pre> <div class="description detailed"> <p>Gets the response reason phrase associated with the status code.</p> <p>Because a reason phrase is not a required element in a response status line, the reason phrase value MAY be null. Implementations MAY choose to return the default RFC 7231 recommended reason phrase (or those listed in the IANA HTTP Status Code Registry) for the response's status code.</p> <h4>Returns</h4> <div class="list"> <code>string</code><br> </div> <h4>Links</h4> <div class="list"> https://tools.ietf.org/html/rfc7231#section-6<br><br> https://www.iana.org/assignments/http-status-codes/http-status-codes.xhtml<br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getStatusCode()"> getStatusCode()   <span class="label">public</span> </h3> <pre data-language="php">getStatusCode(): int</pre> <div class="description detailed"> <p>Gets the response status code.</p> <p>The status code is a 3-digit integer result code of the server's attempt to understand and satisfy the request.</p> <h4>Returns</h4> <div class="list"> <code>int</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getType()"> getType()   <span class="label">public</span> </h3> <pre data-language="php">getType(): string</pre> <div class="description detailed"> <p>Returns the current content type.</p> <h4>Returns</h4> <div class="list"> <code>string</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="hasHeader()"> hasHeader()  <span class="label">public</span> </h3> <pre data-language="php">hasHeader(string $header): bool</pre> <div class="description detailed"> <p>Checks if a header exists by the given case-insensitive name.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$header</var> </dt> <dd><p>Case-insensitive header name.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>bool</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="isNotModified()"> isNotModified()   <span class="label">public</span> </h3> <pre data-language="php">isNotModified(Cake\Http\ServerRequest $request): bool</pre> <div class="description detailed"> <p>Checks whether a response has not been modified according to the 'If-None-Match' (Etags) and 'If-Modified-Since' (last modification date) request headers.</p> <p>In order to interact with this method you must mark responses as not modified. You need to set at least one of the <code>Last-Modified</code> or <code>Etag</code> response headers before calling this method. Otherwise, a comparison will not be possible.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\Http\ServerRequest</code> <var>$request</var> </dt> <dd><p>Request object</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>bool</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="mapType()"> mapType()   <span class="label">public</span> </h3> <pre data-language="php">mapType(array|string $ctype): array|string|null</pre> <div class="description detailed"> <p>Maps a content-type back to an alias</p> <p>e.g <code>mapType('application/pdf'); // returns 'pdf'</code></p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array|string</code> <var>$ctype</var> </dt> <dd><p>Either a string content type to map, or an array of types.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>array|string|null</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="notModified()"> notModified()   <span class="label">public</span> </h3> <pre data-language="php">notModified(): void</pre> <div class="description detailed"> <p>Sets the response as Not Modified by removing any body contents setting the status code to "304 Not Modified" and removing all conflicting headers</p> <p><em>Warning</em> This method mutates the response in-place and should be avoided.</p> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="outputCompressed()"> outputCompressed()   <span class="label">public</span> </h3> <pre data-language="php">outputCompressed(): bool</pre> <div class="description detailed"> <p>Returns whether the resulting output will be compressed by PHP</p> <h4>Returns</h4> <div class="list"> <code>bool</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="resolveType()"> resolveType()   <span class="label">protected</span> </h3> <pre data-language="php">resolveType(string $contentType): string</pre> <div class="description detailed"> <p>Translate and validate content-types.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$contentType</var> </dt> <dd><p>The content-type or type alias.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>string</code><br> </div> <h4>Throws</h4> <div class="list"> <code>InvalidArgumentException</code><br> When an invalid content-type or alias is used. </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="setTypeMap()"> setTypeMap()   <span class="label">public</span> </h3> <pre data-language="php">setTypeMap(string $type, array&lt;string&gt;|string $mimeType): void</pre> <div class="description detailed"> <p>Sets a content type definition into the map.</p> <p>E.g.: setTypeMap('xhtml', ['application/xhtml+xml', 'application/xhtml'])</p> <p>This is needed for RequestHandlerComponent and recognition of types.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$type</var> </dt> <dd><p>Content type.</p></dd> <dt> <code>array&lt;string&gt;|string</code> <var>$mimeType</var> </dt> <dd><p>Definition of the mime type.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="validateFile()"> validateFile()   <span class="label">protected</span> </h3> <pre data-language="php">validateFile(string $path): SplFileInfo</pre> <div class="description detailed"> <p>Validate a file path is a valid response body.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$path</var> </dt> <dd><p>The path to the file.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>SplFileInfo</code><br> </div> <h4>Throws</h4> <div class="list"> <code>Cake\Http\Exception\NotFoundException</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withAddedHeader()"> withAddedHeader()  <span class="label">public</span> </h3> <pre data-language="php">withAddedHeader(string $name, string|string[] $value): static</pre> <div class="description detailed"> <p>Return an instance with the specified header appended with the given value.</p> <p>Existing values for the specified header will be maintained. The new value(s) will be appended to the existing list. If the header did not exist previously, it will be added.</p> <p>This method MUST be implemented in such a way as to retain the immutability of the message, and MUST return an instance that has the new header and/or value.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$name</var> </dt> <dd><p>Case-insensitive header field name to add.</p></dd> <dt> <code>string|string[]</code> <var>$value</var> </dt> <dd><p>Header value(s).</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> <h4>Throws</h4> <div class="list"> <code>Exception\InvalidArgumentException</code><br> For invalid header names or values. </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withAddedLink()"> withAddedLink()   <span class="label">public</span> </h3> <pre data-language="php">withAddedLink(string $url, array&lt;string, mixed&gt; $options = []): static</pre> <div class="description detailed"> <p>Create a new response with the Link header set.</p> <h3>Examples</h3> <pre data-language="php">$response = $response-&gt;withAddedLink('http://example.com?page=1', ['rel' =&gt; 'prev'])
    -&gt;withAddedLink('http://example.com?page=3', ['rel' =&gt; 'next']);</pre> <p>Will generate:</p> <pre data-language="php">Link: &lt;http://example.com?page=1&gt;; rel="prev"
Link: &lt;http://example.com?page=3&gt;; rel="next"</pre> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$url</var> </dt> <dd><p>The LinkHeader url.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>The LinkHeader params.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withBody()"> withBody()  <span class="label">public</span> </h3> <pre data-language="php">withBody(StreamInterface $body): static</pre> <div class="description detailed"> <p>Return an instance with the specified message body.</p> <p>The body MUST be a StreamInterface object.</p> <p>This method MUST be implemented in such a way as to retain the immutability of the message, and MUST return a new instance that has the new body stream.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>StreamInterface</code> <var>$body</var> </dt> <dd><p>Body.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> <h4>Throws</h4> <div class="list"> <code>Exception\InvalidArgumentException</code><br> When the body is not valid. </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withCache()"> withCache()   <span class="label">public</span> </h3> <pre data-language="php">withCache(string|int $since, string|int $time = '+1 day'): static</pre> <div class="description detailed"> <p>Create a new instance with the headers to enable client caching.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string|int</code> <var>$since</var> </dt> <dd><p>a valid time since the response text has not been modified</p></dd> <dt> <code>string|int</code> <var>$time</var> <span class="label">optional</span> </dt> <dd><p>a valid time for cache expiry</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withCharset()"> withCharset()   <span class="label">public</span> </h3> <pre data-language="php">withCharset(string $charset): static</pre> <div class="description detailed"> <p>Get a new instance with an updated charset.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$charset</var> </dt> <dd><p>Character set string.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withCookie()"> withCookie()   <span class="label">public</span> </h3> <pre data-language="php">withCookie(Cake\Http\Cookie\CookieInterface $cookie): static</pre> <div class="description detailed"> <p>Create a new response with a cookie set.</p> <h3>Example</h3> <pre data-language="php">// add a cookie object
$response = $response-&gt;withCookie(new Cookie('remember_me', 1));</pre> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\Http\Cookie\CookieInterface</code> <var>$cookie</var> </dt> <dd><p>cookie object</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withCookieCollection()"> withCookieCollection()   <span class="label">public</span> </h3> <pre data-language="php">withCookieCollection(Cake\Http\Cookie\CookieCollection $cookieCollection): static</pre> <div class="description detailed"> <p>Get a new instance with provided cookie collection.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\Http\Cookie\CookieCollection</code> <var>$cookieCollection</var> </dt> <dd><p>Cookie collection to set.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withDisabledCache()"> withDisabledCache()   <span class="label">public</span> </h3> <pre data-language="php">withDisabledCache(): static</pre> <div class="description detailed"> <p>Create a new instance with headers to instruct the client to not cache the response</p> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withDownload()"> withDownload()   <span class="label">public</span> </h3> <pre data-language="php">withDownload(string $filename): static</pre> <div class="description detailed"> <p>Create a new instance with the Content-Disposition header set.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$filename</var> </dt> <dd><p>The name of the file as the browser will download the response</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withEtag()"> withEtag()   <span class="label">public</span> </h3> <pre data-language="php">withEtag(string $hash, bool $weak = false): static</pre> <div class="description detailed"> <p>Create a new instance with the Etag header set.</p> <p>Etags are a strong indicative that a response can be cached by a HTTP client. A bad way of generating Etags is creating a hash of the response output, instead generate a unique hash of the unique components that identifies a request, such as a modification time, a resource Id, and anything else you consider it that makes the response unique.</p> <p>The second parameter is used to inform clients that the content has changed, but semantically it is equivalent to existing cached values. Consider a page with a hit counter, two different page views are equivalent, but they differ by a few bytes. This permits the Client to decide whether they should use the cached data.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$hash</var> </dt> <dd><p>The unique hash that identifies this response</p></dd> <dt> <code>bool</code> <var>$weak</var> <span class="label">optional</span> </dt> <dd><p>Whether the response is semantically the same as other with the same hash or not. Defaults to false</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withExpiredCookie()"> withExpiredCookie()   <span class="label">public</span> </h3> <pre data-language="php">withExpiredCookie(Cake\Http\Cookie\CookieInterface $cookie): static</pre> <div class="description detailed"> <p>Create a new response with an expired cookie set.</p> <h3>Example</h3> <pre data-language="php">// add a cookie object
$response = $response-&gt;withExpiredCookie(new Cookie('remember_me'));</pre> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\Http\Cookie\CookieInterface</code> <var>$cookie</var> </dt> <dd><p>cookie object</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withExpires()"> withExpires()   <span class="label">public</span> </h3> <pre data-language="php">withExpires(DateTimeInterface|string|int|null $time): static</pre> <div class="description detailed"> <p>Create a new instance with the Expires header set.</p> <h3>Examples:</h3> <pre data-language="php">// Will Expire the response cache now
$response-&gt;withExpires('now')

// Will set the expiration in next 24 hours
$response-&gt;withExpires(new DateTime('+1 day'))</pre> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>DateTimeInterface|string|int|null</code> <var>$time</var> </dt> <dd><p>Valid time string or \DateTime instance.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withFile()"> withFile()   <span class="label">public</span> </h3> <pre data-language="php">withFile(string $path, array&lt;string, mixed&gt; $options = []): static</pre> <div class="description detailed"> <p>Create a new instance that is based on a file.</p> <p>This method will augment both the body and a number of related headers.</p> <p>If <code>$_SERVER['HTTP_RANGE']</code> is set, a slice of the file will be returned instead of the entire file.</p> <h3>Options keys</h3> <ul> <li>name: Alternate download name</li> <li>download: If <code>true</code> sets download header and forces file to be downloaded rather than displayed inline.</li> </ul> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$path</var> </dt> <dd><p>Absolute path to file.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>Options See above.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> <h4>Throws</h4> <div class="list"> <code>Cake\Http\Exception\NotFoundException</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withHeader()"> withHeader()  <span class="label">public</span> </h3> <pre data-language="php">withHeader(string $name, string|string[] $value): static</pre> <div class="description detailed"> <p>Return an instance with the provided header, replacing any existing values of any headers with the same case-insensitive name.</p> <p>While header names are case-insensitive, the casing of the header will be preserved by this function, and returned from getHeaders().</p> <p>This method MUST be implemented in such a way as to retain the immutability of the message, and MUST return an instance that has the new and/or updated header and value.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$name</var> </dt> <dd><p>Case-insensitive header field name.</p></dd> <dt> <code>string|string[]</code> <var>$value</var> </dt> <dd><p>Header value(s).</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> <h4>Throws</h4> <div class="list"> <code>Exception\InvalidArgumentException</code><br> For invalid header names or values. </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withLength()"> withLength()   <span class="label">public</span> </h3> <pre data-language="php">withLength(string|int $bytes): static</pre> <div class="description detailed"> <p>Create a new response with the Content-Length header set.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string|int</code> <var>$bytes</var> </dt> <dd><p>Number of bytes</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withLocation()"> withLocation()   <span class="label">public</span> </h3> <pre data-language="php">withLocation(string $url): static</pre> <div class="description detailed"> <p>Return an instance with an updated location header.</p> <p>If the current status code is 200, it will be replaced with 302.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$url</var> </dt> <dd><p>The location to redirect to.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withMaxAge()"> withMaxAge()   <span class="label">public</span> </h3> <pre data-language="php">withMaxAge(int $seconds): static</pre> <div class="description detailed"> <p>Create an instance with Cache-Control max-age directive set.</p> <p>The max-age is the number of seconds after which the response should no longer be considered a good candidate to be fetched from the local (client) cache.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>int</code> <var>$seconds</var> </dt> <dd><p>The seconds a cached response can be considered valid</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withModified()"> withModified()   <span class="label">public</span> </h3> <pre data-language="php">withModified(DateTimeInterface|string|int $time): static</pre> <div class="description detailed"> <p>Create a new instance with the Last-Modified header set.</p> <h3>Examples:</h3> <pre data-language="php">// Will Expire the response cache now
$response-&gt;withModified('now')

// Will set the expiration in next 24 hours
$response-&gt;withModified(new DateTime('+1 day'))</pre> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>DateTimeInterface|string|int</code> <var>$time</var> </dt> <dd><p>Valid time string or \DateTime instance.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withMustRevalidate()"> withMustRevalidate()   <span class="label">public</span> </h3> <pre data-language="php">withMustRevalidate(bool $enable): static</pre> <div class="description detailed"> <p>Create an instance with Cache-Control must-revalidate directive set.</p> <p>Sets the Cache-Control must-revalidate directive. must-revalidate indicates that the response should not be served stale by a cache under any circumstance without first revalidating with the origin.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>bool</code> <var>$enable</var> </dt> <dd><p>If boolean sets or unsets the directive.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withNotModified()"> withNotModified()   <span class="label">public</span> </h3> <pre data-language="php">withNotModified(): static</pre> <div class="description detailed"> <p>Create a new instance as 'not modified'</p> <p>This will remove any body contents set the status code to "304" and removing headers that describe a response body.</p> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withProtocolVersion()"> withProtocolVersion()  <span class="label">public</span> </h3> <pre data-language="php">withProtocolVersion(string $version): static</pre> <div class="description detailed"> <p>Return an instance with the specified HTTP protocol version.</p> <p>The version string MUST contain only the HTTP version number (e.g., "1.1", "1.0").</p> <p>This method MUST be implemented in such a way as to retain the immutability of the message, and MUST return an instance that has the new protocol version.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$version</var> </dt> <dd><p>HTTP protocol version</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withSharable()"> withSharable()   <span class="label">public</span> </h3> <pre data-language="php">withSharable(bool $public, int|null $time = null): static</pre> <div class="description detailed"> <p>Create a new instace with the public/private Cache-Control directive set.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>bool</code> <var>$public</var> </dt> <dd><p>If set to true, the Cache-Control header will be set as public if set to false, the response will be set to private.</p></dd> <dt> <code>int|null</code> <var>$time</var> <span class="label">optional</span> </dt> <dd><p>time in seconds after which the response should no longer be considered fresh.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withSharedMaxAge()"> withSharedMaxAge()   <span class="label">public</span> </h3> <pre data-language="php">withSharedMaxAge(int $seconds): static</pre> <div class="description detailed"> <p>Create a new instance with the Cache-Control s-maxage directive.</p> <p>The max-age is the number of seconds after which the response should no longer be considered a good candidate to be fetched from a shared cache (like in a proxy server).</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>int</code> <var>$seconds</var> </dt> <dd><p>The number of seconds for shared max-age</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withStatus()"> withStatus()   <span class="label">public</span> </h3> <pre data-language="php">withStatus(int $code, string $reasonPhrase = ''): static</pre> <div class="description detailed"> <p>Return an instance with the specified status code and, optionally, reason phrase.</p> <p>If no reason phrase is specified, implementations MAY choose to default to the RFC 7231 or IANA recommended reason phrase for the response's status code.</p> <p>This method MUST be implemented in such a way as to retain the immutability of the message, and MUST return an instance that has the updated status and reason phrase.</p> <p>If the status code is 304 or 204, the existing Content-Type header will be cleared, as these response codes have no body.</p> <p>There are external packages such as <code>fig/http-message-util</code> that provide HTTP status code constants. These can be used with any method that accepts or returns a status code integer. However, keep in mind that these constants might include status codes that are now allowed which will throw an <code>\InvalidArgumentException</code>.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>int</code> <var>$code</var> </dt> <dd><p>The 3-digit integer status code to set.</p></dd> <dt> <code>string</code> <var>$reasonPhrase</var> <span class="label">optional</span> </dt> <dd><p>The reason phrase to use with the provided status code; if none is provided, implementations MAY use the defaults as suggested in the HTTP specification.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> <h4>Throws</h4> <div class="list"> <code>InvalidArgumentException</code><br> For invalid status code arguments. </div> <h4>Links</h4> <div class="list"> https://tools.ietf.org/html/rfc7231#section-6<br><br> https://www.iana.org/assignments/http-status-codes/http-status-codes.xhtml<br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withStringBody()"> withStringBody()   <span class="label">public</span> </h3> <pre data-language="php">withStringBody(string|null $string): static</pre> <div class="description detailed"> <p>Convenience method to set a string into the response body</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string|null</code> <var>$string</var> </dt> <dd><p>The string to be sent</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withType()"> withType()   <span class="label">public</span> </h3> <pre data-language="php">withType(string $contentType): static</pre> <div class="description detailed"> <p>Get an updated response with the content type set.</p> <p>If you attempt to set the type on a 304 or 204 status code response, the content type will not take effect as these status codes do not have content-types.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$contentType</var> </dt> <dd><p>Either a file extension which will be mapped to a mime-type or a concrete mime-type.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withVary()"> withVary()   <span class="label">public</span> </h3> <pre data-language="php">withVary(array&lt;string&gt;|string $cacheVariances): static</pre> <div class="description detailed"> <p>Create a new instance with the Vary header set.</p> <p>If an array is passed values will be imploded into a comma separated string. If no parameters are passed, then an array with the current Vary header value is returned</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array&lt;string&gt;|string</code> <var>$cacheVariances</var> </dt> <dd><p>A single Vary string or an array containing the list for variances.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="withoutHeader()"> withoutHeader()  <span class="label">public</span> </h3> <pre data-language="php">withoutHeader(string $name): static</pre> <div class="description detailed"> <p>Return an instance without the specified header.</p> <p>Header resolution MUST be done without case-sensitivity.</p> <p>This method MUST be implemented in such a way as to retain the immutability of the message, and MUST return an instance that removes the named header.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$name</var> </dt> <dd><p>Case-insensitive header field name to remove.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>static</code><br> </div> </div> </div> </div> <div class="section"> <h2>Property Detail</h2> <div class="property-detail">  <h3 class="property-name" id="$_cacheDirectives"> <var>$_cacheDirectives</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Holds all the cache directives that will be converted into headers when sending the request</p> <h4>Type</h4> <div class="list"> <code>array&lt;string, mixed&gt;</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_charset"> <var>$_charset</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>The charset the response body is encoded with</p> <h4>Type</h4> <div class="list"> <code>string</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_cookies"> <var>$_cookies</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Collection of cookies to send to the client</p> <h4>Type</h4> <div class="list"> <code>Cake\Http\Cookie\CookieCollection</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_file"> <var>$_file</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>File object for file to be read out as response</p> <h4>Type</h4> <div class="list"> <code>SplFileInfo|null</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_fileRange"> <var>$_fileRange</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>File range. Used for requesting ranges of files.</p> <h4>Type</h4> <div class="list"> <code>array&lt;int&gt;</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_mimeTypes"> <var>$_mimeTypes</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Holds type key to mime type mappings for known mime types.</p> <h4>Type</h4> <div class="list"> <code>array&lt;string, mixed&gt;</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_reasonPhrase"> <var>$_reasonPhrase</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Reason Phrase</p> <h4>Type</h4> <div class="list"> <code>string</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_status"> <var>$_status</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Status code to send to the client</p> <h4>Type</h4> <div class="list"> <code>int</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_statusCodes"> <var>$_statusCodes</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Allowed HTTP status codes and their default description.</p> <h4>Type</h4> <div class="list"> <code>array&lt;int, string&gt;</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_streamMode"> <var>$_streamMode</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Stream mode options.</p> <h4>Type</h4> <div class="list"> <code>string</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_streamTarget"> <var>$_streamTarget</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Stream target or resource object.</p> <h4>Type</h4> <div class="list"> <code>resource|string</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$headerNames"> <var>$headerNames</var>  <span class="label">protected</span> </h3> <div class="description detailed"> <p>Map of normalized header name to original name used to register header.</p> <h4>Type</h4> <div class="list"> <code>array</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$headers"> <var>$headers</var>  <span class="label">protected</span> </h3> <div class="description detailed"> <p>List of all registered headers, as key =&gt; array of values.</p> <h4>Type</h4> <div class="list"> <code>array</code><br> </div> </div> </div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;present The Cake Software Foundation, Inc.<br>Licensed under the MIT License.<br>CakePHP is a registered trademark of Cake Software Foundation, Inc.<br>We are not endorsed by or affiliated with CakePHP.<br>
    <a href="https://api.cakephp.org/4.4/class-Cake.Http.Response.html" class="_attribution-link">https://api.cakephp.org/4.4/class-Cake.Http.Response.html</a>
  </p>
</div>
