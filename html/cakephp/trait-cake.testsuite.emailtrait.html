<h1> Trait EmailTrait  </h1> <div class="description"> <p>Make assertions on emails sent through the Cake\TestSuite\TestEmailTransport</p> <p>After adding the trait to your test case, all mail transports will be replaced with TestEmailTransport which is used for making assertions and will <em>not</em> actually send emails.</p> </div> <div class="info"> <b>Namespace:</b> <a href="namespace-cake.testsuite.html">Cake\TestSuite</a><br> </div> <div class="section"> <h2>Method Summary</h2> <ul class="member-summary"> <li class="clearfix"> <h5 class="function-name"> <a href="#assertMailContains()">assertMailContains()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Asserts an email contains expected contents</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#assertMailContainsAt()">assertMailContainsAt()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Asserts an email at a specific index contains expected contents</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#assertMailContainsAttachment()">assertMailContainsAttachment()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Asserts an email contains expected attachment</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#assertMailContainsHtml()">assertMailContainsHtml()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Asserts an email contains expected html contents</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#assertMailContainsHtmlAt()">assertMailContainsHtmlAt()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Asserts an email at a specific index contains expected html contents</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#assertMailContainsText()">assertMailContainsText()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Asserts an email contains an expected text content</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#assertMailContainsTextAt()">assertMailContainsTextAt()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Asserts an email at a specific index contains expected text contents</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#assertMailCount()">assertMailCount()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Asserts an expected number of emails were sent</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#assertMailSentFrom()">assertMailSentFrom()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Asserts an email was sent from an address</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#assertMailSentFromAt()">assertMailSentFromAt()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Asserts an email at a specific index was sent from an address</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#assertMailSentTo()">assertMailSentTo()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Asserts an email was sent to an address</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#assertMailSentToAt()">assertMailSentToAt()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Asserts an email at a specific index was sent to an address</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#assertMailSentWith()">assertMailSentWith()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Asserts an email contains the expected value within an Email getter</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#assertMailSentWithAt()">assertMailSentWithAt()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Asserts an email at a specific index contains the expected value within an Email getter</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#assertMailSubjectContains()">assertMailSubjectContains()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Asserts an email subject contains expected contents</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#assertMailSubjectContainsAt()">assertMailSubjectContainsAt()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Asserts an email at a specific index contains expected html contents</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#assertNoMailSent()">assertNoMailSent()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Asserts that no emails were sent</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#cleanupEmailTrait()">cleanupEmailTrait()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Resets transport state</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#setupTransports()">setupTransports()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Replaces all transports with the test transport during test setup</p> </div> </li> </ul> <div class="section"> <h2>Method Detail</h2> <div class="method-detail">  <h3 class="method-name" id="assertMailContains()"> assertMailContains()   <span class="label">public</span> </h3> <pre data-language="php">assertMailContains(string $contents, string $message = ''): void</pre> <div class="description detailed"> <p>Asserts an email contains expected contents</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$contents</var> </dt> <dd><p>Contents</p></dd> <dt> <code>string</code> <var>$message</var> <span class="label">optional</span> </dt> <dd><p>Message</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="assertMailContainsAt()"> assertMailContainsAt()   <span class="label">public</span> </h3> <pre data-language="php">assertMailContainsAt(int $at, string $contents, string $message = ''): void</pre> <div class="description detailed"> <p>Asserts an email at a specific index contains expected contents</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>int</code> <var>$at</var> </dt> <dd><p>Email index</p></dd> <dt> <code>string</code> <var>$contents</var> </dt> <dd><p>Contents</p></dd> <dt> <code>string</code> <var>$message</var> <span class="label">optional</span> </dt> <dd><p>Message</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="assertMailContainsAttachment()"> assertMailContainsAttachment()   <span class="label">public</span> </h3> <pre data-language="php">assertMailContainsAttachment(string $filename, array $file = [], string $message = ''): void</pre> <div class="description detailed"> <p>Asserts an email contains expected attachment</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$filename</var> </dt> <dd><p>Filename</p></dd> <dt> <code>array</code> <var>$file</var> <span class="label">optional</span> </dt> <dd><p>Additional file properties</p></dd> <dt> <code>string</code> <var>$message</var> <span class="label">optional</span> </dt> <dd><p>Message</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="assertMailContainsHtml()"> assertMailContainsHtml()   <span class="label">public</span> </h3> <pre data-language="php">assertMailContainsHtml(string $contents, string $message = ''): void</pre> <div class="description detailed"> <p>Asserts an email contains expected html contents</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$contents</var> </dt> <dd><p>Contents</p></dd> <dt> <code>string</code> <var>$message</var> <span class="label">optional</span> </dt> <dd><p>Message</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="assertMailContainsHtmlAt()"> assertMailContainsHtmlAt()   <span class="label">public</span> </h3> <pre data-language="php">assertMailContainsHtmlAt(int $at, string $contents, string $message = ''): void</pre> <div class="description detailed"> <p>Asserts an email at a specific index contains expected html contents</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>int</code> <var>$at</var> </dt> <dd><p>Email index</p></dd> <dt> <code>string</code> <var>$contents</var> </dt> <dd><p>Contents</p></dd> <dt> <code>string</code> <var>$message</var> <span class="label">optional</span> </dt> <dd><p>Message</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="assertMailContainsText()"> assertMailContainsText()   <span class="label">public</span> </h3> <pre data-language="php">assertMailContainsText(string $expected, string $message = ''): void</pre> <div class="description detailed"> <p>Asserts an email contains an expected text content</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$expected</var> </dt> <dd><p>Expected text.</p></dd> <dt> <code>string</code> <var>$message</var> <span class="label">optional</span> </dt> <dd><p>Message to display if assertion fails.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="assertMailContainsTextAt()"> assertMailContainsTextAt()   <span class="label">public</span> </h3> <pre data-language="php">assertMailContainsTextAt(int $at, string $contents, string $message = ''): void</pre> <div class="description detailed"> <p>Asserts an email at a specific index contains expected text contents</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>int</code> <var>$at</var> </dt> <dd><p>Email index</p></dd> <dt> <code>string</code> <var>$contents</var> </dt> <dd><p>Contents</p></dd> <dt> <code>string</code> <var>$message</var> <span class="label">optional</span> </dt> <dd><p>Message</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="assertMailCount()"> assertMailCount()   <span class="label">public</span> </h3> <pre data-language="php">assertMailCount(int $count, string $message = ''): void</pre> <div class="description detailed"> <p>Asserts an expected number of emails were sent</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>int</code> <var>$count</var> </dt> <dd><p>Email count</p></dd> <dt> <code>string</code> <var>$message</var> <span class="label">optional</span> </dt> <dd><p>Message</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="assertMailSentFrom()"> assertMailSentFrom()   <span class="label">public</span> </h3> <pre data-language="php">assertMailSentFrom(string $address, string $message = ''): void</pre> <div class="description detailed"> <p>Asserts an email was sent from an address</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$address</var> </dt> <dd><p>Email address</p></dd> <dt> <code>string</code> <var>$message</var> <span class="label">optional</span> </dt> <dd><p>Message</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="assertMailSentFromAt()"> assertMailSentFromAt()   <span class="label">public</span> </h3> <pre data-language="php">assertMailSentFromAt(int $at, string $address, string $message = ''): void</pre> <div class="description detailed"> <p>Asserts an email at a specific index was sent from an address</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>int</code> <var>$at</var> </dt> <dd><p>Email index</p></dd> <dt> <code>string</code> <var>$address</var> </dt> <dd><p>Email address</p></dd> <dt> <code>string</code> <var>$message</var> <span class="label">optional</span> </dt> <dd><p>Message</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="assertMailSentTo()"> assertMailSentTo()   <span class="label">public</span> </h3> <pre data-language="php">assertMailSentTo(string $address, string $message = ''): void</pre> <div class="description detailed"> <p>Asserts an email was sent to an address</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$address</var> </dt> <dd><p>Email address</p></dd> <dt> <code>string</code> <var>$message</var> <span class="label">optional</span> </dt> <dd><p>Message</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="assertMailSentToAt()"> assertMailSentToAt()   <span class="label">public</span> </h3> <pre data-language="php">assertMailSentToAt(int $at, string $address, string $message = ''): void</pre> <div class="description detailed"> <p>Asserts an email at a specific index was sent to an address</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>int</code> <var>$at</var> </dt> <dd><p>Email index</p></dd> <dt> <code>string</code> <var>$address</var> </dt> <dd><p>Email address</p></dd> <dt> <code>string</code> <var>$message</var> <span class="label">optional</span> </dt> <dd><p>Message</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="assertMailSentWith()"> assertMailSentWith()   <span class="label">public</span> </h3> <pre data-language="php">assertMailSentWith(string $expected, string $parameter, string $message = ''): void</pre> <div class="description detailed"> <p>Asserts an email contains the expected value within an Email getter</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$expected</var> </dt> <dd><p>Contents</p></dd> <dt> <code>string</code> <var>$parameter</var> </dt> <dd><p>Email getter parameter (e.g. "cc", "subject")</p></dd> <dt> <code>string</code> <var>$message</var> <span class="label">optional</span> </dt> <dd><p>Message</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="assertMailSentWithAt()"> assertMailSentWithAt()   <span class="label">public</span> </h3> <pre data-language="php">assertMailSentWithAt(int $at, string $expected, string $parameter, string $message = ''): void</pre> <div class="description detailed"> <p>Asserts an email at a specific index contains the expected value within an Email getter</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>int</code> <var>$at</var> </dt> <dd><p>Email index</p></dd> <dt> <code>string</code> <var>$expected</var> </dt> <dd><p>Contents</p></dd> <dt> <code>string</code> <var>$parameter</var> </dt> <dd><p>Email getter parameter (e.g. "cc", "bcc")</p></dd> <dt> <code>string</code> <var>$message</var> <span class="label">optional</span> </dt> <dd><p>Message</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="assertMailSubjectContains()"> assertMailSubjectContains()   <span class="label">public</span> </h3> <pre data-language="php">assertMailSubjectContains(string $contents, string $message = ''): void</pre> <div class="description detailed"> <p>Asserts an email subject contains expected contents</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$contents</var> </dt> <dd><p>Contents</p></dd> <dt> <code>string</code> <var>$message</var> <span class="label">optional</span> </dt> <dd><p>Message</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="assertMailSubjectContainsAt()"> assertMailSubjectContainsAt()   <span class="label">public</span> </h3> <pre data-language="php">assertMailSubjectContainsAt(int $at, string $contents, string $message = ''): void</pre> <div class="description detailed"> <p>Asserts an email at a specific index contains expected html contents</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>int</code> <var>$at</var> </dt> <dd><p>Email index</p></dd> <dt> <code>string</code> <var>$contents</var> </dt> <dd><p>Contents</p></dd> <dt> <code>string</code> <var>$message</var> <span class="label">optional</span> </dt> <dd><p>Message</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="assertNoMailSent()"> assertNoMailSent()   <span class="label">public</span> </h3> <pre data-language="php">assertNoMailSent(string $message = ''): void</pre> <div class="description detailed"> <p>Asserts that no emails were sent</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$message</var> <span class="label">optional</span> </dt> <dd><p>Message</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="cleanupEmailTrait()"> cleanupEmailTrait()   <span class="label">public</span> </h3> <pre data-language="php">cleanupEmailTrait(): void</pre> <div class="description detailed"> <p>Resets transport state</p> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="setupTransports()"> setupTransports()   <span class="label">public</span> </h3> <pre data-language="php">setupTransports(): void</pre> <div class="description detailed"> <p>Replaces all transports with the test transport during test setup</p> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> </div> </div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;present The Cake Software Foundation, Inc.<br>Licensed under the MIT License.<br>CakePHP is a registered trademark of Cake Software Foundation, Inc.<br>We are not endorsed by or affiliated with CakePHP.<br>
    <a href="https://api.cakephp.org/4.4/trait-Cake.TestSuite.EmailTrait.html" class="_attribution-link">https://api.cakephp.org/4.4/trait-Cake.TestSuite.EmailTrait.html</a>
  </p>
</div>
