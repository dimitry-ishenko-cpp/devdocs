<h1> Class DigestAuthenticate  </h1> <div class="description"> <p>Digest Authentication adapter for AuthComponent.</p> <p>Provides Digest HTTP authentication support for AuthComponent.</p> <h3>Using Digest auth</h3> <p>Load <code>AuthComponent</code> in your controller's <code>initialize()</code> and add 'Digest' in 'authenticate' key</p> <pre data-language="php">$this-&gt;loadComponent('Auth', [
     'authenticate' =&gt; ['Digest'],
     'storage' =&gt; 'Memory',
     'unauthorizedRedirect' =&gt; false,
 ]);</pre> <p>You should set <code>storage</code> to <code>Memory</code> to prevent CakePHP from sending a session cookie to the client.</p> <p>You should set <code>unauthorizedRedirect</code> to <code>false</code>. This causes <code>AuthComponent</code> to throw a <code>ForbiddenException</code> exception instead of redirecting to another page.</p> <p>Since HTTP Digest Authentication is stateless you don't need call <code>setUser()</code> in your controller. The user credentials will be checked on each request. If valid credentials are not provided, required authentication headers will be sent by this authentication provider which triggers the login dialog in the browser/client.</p> <h3>Generating passwords compatible with Digest authentication.</h3> <p>DigestAuthenticate requires a special password hash that conforms to RFC2617. You can generate this password using <code>DigestAuthenticate::password()</code></p> <pre data-language="php">$digestPass = DigestAuthenticate::password($username, $password, env('SERVER_NAME'));</pre> <p>If you wish to use digest authentication alongside other authentication methods, it's recommended that you store the digest authentication separately. For example <code>User.digest_pass</code> could be used for a digest password, while <code>User.password</code> would store the password hash for use with other methods like Basic or Form.</p> </div> <div class="info"> <b>Namespace:</b> <a href="namespace-cake.auth.html">Cake\Auth</a><br> <b>See:</b> https://book.cakephp.org/4/en/controllers/components/authentication.html<br> </div> <div class="section"> <h2>Property Summary</h2> <ul class="member-summary properties"> <li class="clearfix"> <div class="name"> <a href="#%24_config">$_config</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>array&lt;string, mixed&gt;</code></div> <div class="description"> <p>Runtime config</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_configInitialized">$_configInitialized</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>bool</code></div> <div class="description"> <p>Whether the config property has already been configured with defaults</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_defaultConfig">$_defaultConfig</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>array&lt;string, mixed&gt;</code></div> <div class="description"> <p>Default config for this object.</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_needsPasswordRehash">$_needsPasswordRehash</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>bool</code></div> <div class="description"> <p>Whether the user authenticated by this class requires their password to be rehashed with another algorithm.</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_passwordHasher">$_passwordHasher</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>Cake\Auth\AbstractPasswordHasher|null</code></div> <div class="description"> <p>Password hasher instance.</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_registry">$_registry</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>Cake\Controller\ComponentRegistry</code></div> <div class="description"> <p>A Component registry, used to get more components.</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24_tableLocator">$_tableLocator</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>Cake\ORM\Locator\LocatorInterface|null</code></div> <div class="description"> <p>Table locator instance</p> </div> </li> <li class="clearfix"> <div class="name"> <a href="#%24defaultTable">$defaultTable</a> <span class="attributes"> <span class="label">protected</span> </span> </div> <div class="property-type"><code>string|null</code></div> <div class="description"> <p>This object's default table alias.</p> </div> </li> </ul> </div> <div class="section"> <h2>Method Summary</h2> <ul class="member-summary"> <li class="clearfix"> <h5 class="function-name"> <a href="#__construct()">__construct()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Constructor</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_configDelete()">_configDelete()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Deletes a single config key.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_configRead()">_configRead()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Reads a config key.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_configWrite()">_configWrite()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Writes a config key.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_findUser()">_findUser()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Find a user record using the username and password provided.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_getDigest()">_getDigest()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Gets the digest headers from the request/environment.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#_query()">_query()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Get query object for fetching user from database.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#authenticate()">authenticate()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Authenticate a user using HTTP auth. Will use the configured User model and attempt a login using HTTP auth.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#configShallow()">configShallow()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Merge provided config with existing config. Unlike <code>config()</code> which does a recursive merge for nested keys, this method does a simple merge.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#fetchTable()">fetchTable()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Convenience method to get a table instance.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#generateNonce()">generateNonce()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Generate a nonce value that is validated in future requests.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#generateResponseHash()">generateResponseHash()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Generate the response hash for a given digest array.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getConfig()">getConfig()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Returns the config.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getConfigOrFail()">getConfigOrFail()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Returns the config for this specific key.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getTableLocator()">getTableLocator()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Gets the table locator.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#getUser()">getUser()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Get a user based on information in the request. Used by cookie-less auth for stateless clients.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#implementedEvents()">implementedEvents()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Returns a list of all events that this authenticate class will listen to.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#loginHeaders()">loginHeaders()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Generate the login headers</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#needsPasswordRehash()">needsPasswordRehash()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Returns whether the password stored in the repository for the logged in user requires to be rehashed with another algorithm</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#parseAuthData()">parseAuthData()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Parse the digest authentication headers and split them up.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#password()">password()</a> <span class="label">public</span> <span class="label">static</span> </h5> <div class="description detailed"> <p>Creates an auth digest password hash to store</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#passwordHasher()">passwordHasher()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Return password hasher object</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#setConfig()">setConfig()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Sets the config.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#setTableLocator()">setTableLocator()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Sets the table locator.</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#unauthenticated()">unauthenticated()</a> <span class="label">public</span> </h5> <div class="description detailed"> <p>Handles an unauthenticated access attempt by sending appropriate login headers</p> </div> </li> <li class="clearfix"> <h5 class="function-name"> <a href="#validNonce()">validNonce()</a> <span class="label">protected</span> </h5> <div class="description detailed"> <p>Check the nonce to ensure it is valid and not expired.</p> </div> </li> </ul> <div class="section"> <h2>Method Detail</h2> <div class="method-detail">  <h3 class="method-name" id="__construct()"> __construct()   <span class="label">public</span> </h3> <pre data-language="php">__construct(Cake\Controller\ComponentRegistry $registry, array&lt;string, mixed&gt; $config = [])</pre> <div class="description detailed"> <p>Constructor</p> <p>Besides the keys specified in BaseAuthenticate::$_defaultConfig, DigestAuthenticate uses the following extra keys:</p> <ul> <li>
<code>secret</code> The secret to use for nonce validation. Defaults to Security::getSalt().</li> <li>
<code>realm</code> The realm authentication is for, Defaults to the servername.</li> <li>
<code>qop</code> Defaults to 'auth', no other values are supported at this time.</li> <li>
<code>opaque</code> A string that must be returned unchanged by clients. Defaults to <code>md5($config['realm'])</code>
</li> <li>
<code>nonceLifetime</code> The number of seconds that nonces are valid for. Defaults to 300.</li> </ul> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\Controller\ComponentRegistry</code> <var>$registry</var> </dt> <dd><p>The Component registry used on this request.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$config</var> <span class="label">optional</span> </dt> <dd><p>Array of config to use.</p></dd> </dl> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_configDelete()"> _configDelete()   <span class="label">protected</span> </h3> <pre data-language="php">_configDelete(string $key): void</pre> <div class="description detailed"> <p>Deletes a single config key.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$key</var> </dt> <dd><p>Key to delete.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> <h4>Throws</h4> <div class="list"> <code>Cake\Core\Exception\CakeException</code><br> if attempting to clobber existing config </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_configRead()"> _configRead()   <span class="label">protected</span> </h3> <pre data-language="php">_configRead(string|null $key): mixed</pre> <div class="description detailed"> <p>Reads a config key.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string|null</code> <var>$key</var> </dt> <dd><p>Key to read.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>mixed</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_configWrite()"> _configWrite()   <span class="label">protected</span> </h3> <pre data-language="php">_configWrite(array&lt;string, mixed&gt;|string $key, mixed $value, string|bool $merge = false): void</pre> <div class="description detailed"> <p>Writes a config key.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array&lt;string, mixed&gt;|string</code> <var>$key</var> </dt> <dd><p>Key to write to.</p></dd> <dt> <code>mixed</code> <var>$value</var> </dt> <dd><p>Value to write.</p></dd> <dt> <code>string|bool</code> <var>$merge</var> <span class="label">optional</span> </dt> <dd><p>True to merge recursively, 'shallow' for simple merge, false to overwrite, defaults to false.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>void</code><br> </div> <h4>Throws</h4> <div class="list"> <code>Cake\Core\Exception\CakeException</code><br> if attempting to clobber existing config </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_findUser()"> _findUser()   <span class="label">protected</span> </h3> <pre data-language="php">_findUser(string $username, string|null $password = null): array&lt;string, mixed&gt;|false</pre> <div class="description detailed"> <p>Find a user record using the username and password provided.</p> <p>Input passwords will be hashed even when a user doesn't exist. This helps mitigate timing attacks that are attempting to find valid usernames.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$username</var> </dt> <dd><p>The username/identifier.</p></dd> <dt> <code>string|null</code> <var>$password</var> <span class="label">optional</span> </dt> <dd><p>The password, if not provided password checking is skipped and result of find is returned.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>array&lt;string, mixed&gt;|false</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_getDigest()"> _getDigest()   <span class="label">protected</span> </h3> <pre data-language="php">_getDigest(Cake\Http\ServerRequest $request): array&lt;string, mixed&gt;|null</pre> <div class="description detailed"> <p>Gets the digest headers from the request/environment.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\Http\ServerRequest</code> <var>$request</var> </dt> <dd><p>Request object.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>array&lt;string, mixed&gt;|null</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="_query()"> _query()   <span class="label">protected</span> </h3> <pre data-language="php">_query(string $username): Cake\ORM\Query</pre> <div class="description detailed"> <p>Get query object for fetching user from database.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$username</var> </dt> <dd><p>The username/identifier.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\ORM\Query</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="authenticate()"> authenticate()   <span class="label">public</span> </h3> <pre data-language="php">authenticate(Cake\Http\ServerRequest $request, Cake\Http\Response $response): array&lt;string, mixed&gt;|false</pre> <div class="description detailed"> <p>Authenticate a user using HTTP auth. Will use the configured User model and attempt a login using HTTP auth.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\Http\ServerRequest</code> <var>$request</var> </dt> <dd><p>The request to authenticate with.</p></dd> <dt> <code>Cake\Http\Response</code> <var>$response</var> </dt> <dd><p>The response to add headers to.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>array&lt;string, mixed&gt;|false</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="configShallow()"> configShallow()   <span class="label">public</span> </h3> <pre data-language="php">configShallow(array&lt;string, mixed&gt;|string $key, mixed|null $value = null): $this</pre> <div class="description detailed"> <p>Merge provided config with existing config. Unlike <code>config()</code> which does a recursive merge for nested keys, this method does a simple merge.</p> <p>Setting a specific value:</p> <pre data-language="php">$this-&gt;configShallow('key', $value);</pre> <p>Setting a nested value:</p> <pre data-language="php">$this-&gt;configShallow('some.nested.key', $value);</pre> <p>Updating multiple config settings at the same time:</p> <pre data-language="php">$this-&gt;configShallow(['one' =&gt; 'value', 'another' =&gt; 'value']);</pre> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array&lt;string, mixed&gt;|string</code> <var>$key</var> </dt> <dd><p>The key to set, or a complete array of configs.</p></dd> <dt> <code>mixed|null</code> <var>$value</var> <span class="label">optional</span> </dt> <dd><p>The value to set.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>$this</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="fetchTable()"> fetchTable()   <span class="label">public</span> </h3> <pre data-language="php">fetchTable(string|null $alias = null, array&lt;string, mixed&gt; $options = []): Cake\ORM\Table</pre> <div class="description detailed"> <p>Convenience method to get a table instance.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string|null</code> <var>$alias</var> <span class="label">optional</span> </dt> <dd><p>The alias name you want to get. Should be in CamelCase format. If <code>null</code> then the value of $defaultTable property is used.</p></dd> <dt> <code>array&lt;string, mixed&gt;</code> <var>$options</var> <span class="label">optional</span> </dt> <dd><p>The options you want to build the table with. If a table has already been loaded the registry options will be ignored.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\ORM\Table</code><br> </div> <h4>Throws</h4> <div class="list"> <code>Cake\Core\Exception\CakeException</code><br> If `$alias` argument and `$defaultTable` property both are `null`. </div> <h4>See Also</h4> <div class="list"> \Cake\ORM\TableLocator::get() </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="generateNonce()"> generateNonce()   <span class="label">protected</span> </h3> <pre data-language="php">generateNonce(): string</pre> <div class="description detailed"> <p>Generate a nonce value that is validated in future requests.</p> <h4>Returns</h4> <div class="list"> <code>string</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="generateResponseHash()"> generateResponseHash()   <span class="label">public</span> </h3> <pre data-language="php">generateResponseHash(array&lt;string, mixed&gt; $digest, string $password, string $method): string</pre> <div class="description detailed"> <p>Generate the response hash for a given digest array.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array&lt;string, mixed&gt;</code> <var>$digest</var> </dt> <dd><p>Digest information containing data from DigestAuthenticate::parseAuthData().</p></dd> <dt> <code>string</code> <var>$password</var> </dt> <dd><p>The digest hash password generated with DigestAuthenticate::password()</p></dd> <dt> <code>string</code> <var>$method</var> </dt> <dd><p>Request method</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>string</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getConfig()"> getConfig()   <span class="label">public</span> </h3> <pre data-language="php">getConfig(string|null $key = null, mixed $default = null): mixed</pre> <div class="description detailed"> <p>Returns the config.</p> <h3>Usage</h3> <p>Reading the whole config:</p> <pre data-language="php">$this-&gt;getConfig();</pre> <p>Reading a specific value:</p> <pre data-language="php">$this-&gt;getConfig('key');</pre> <p>Reading a nested value:</p> <pre data-language="php">$this-&gt;getConfig('some.nested.key');</pre> <p>Reading with default value:</p> <pre data-language="php">$this-&gt;getConfig('some-key', 'default-value');</pre> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string|null</code> <var>$key</var> <span class="label">optional</span> </dt> <dd><p>The key to get or null for the whole config.</p></dd> <dt> <code>mixed</code> <var>$default</var> <span class="label">optional</span> </dt> <dd><p>The return value when the key does not exist.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>mixed</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getConfigOrFail()"> getConfigOrFail()   <span class="label">public</span> </h3> <pre data-language="php">getConfigOrFail(string $key): mixed</pre> <div class="description detailed"> <p>Returns the config for this specific key.</p> <p>The config value for this key must exist, it can never be null.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$key</var> </dt> <dd><p>The key to get.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>mixed</code><br> </div> <h4>Throws</h4> <div class="list"> <code>InvalidArgumentException</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getTableLocator()"> getTableLocator()   <span class="label">public</span> </h3> <pre data-language="php">getTableLocator(): Cake\ORM\Locator\LocatorInterface</pre> <div class="description detailed"> <p>Gets the table locator.</p> <h4>Returns</h4> <div class="list"> <code>Cake\ORM\Locator\LocatorInterface</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="getUser()"> getUser()   <span class="label">public</span> </h3> <pre data-language="php">getUser(Cake\Http\ServerRequest $request): array&lt;string, mixed&gt;|false</pre> <div class="description detailed"> <p>Get a user based on information in the request. Used by cookie-less auth for stateless clients.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\Http\ServerRequest</code> <var>$request</var> </dt> <dd><p>Request object.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>array&lt;string, mixed&gt;|false</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="implementedEvents()"> implementedEvents()   <span class="label">public</span> </h3> <pre data-language="php">implementedEvents(): array&lt;string, mixed&gt;</pre> <div class="description detailed"> <p>Returns a list of all events that this authenticate class will listen to.</p> <p>An authenticate class can listen to following events fired by AuthComponent:</p> <ul> <li> <p><code>Auth.afterIdentify</code> - Fired after a user has been identified using one of configured authenticate class. The callback function should have signature like <code>afterIdentify(EventInterface $event, array $user)</code> when <code>$user</code> is the identified user record.</p> </li> <li> <p><code>Auth.logout</code> - Fired when AuthComponent::logout() is called. The callback function should have signature like <code>logout(EventInterface $event, array $user)</code> where <code>$user</code> is the user about to be logged out.</p> </li> </ul> <h4>Returns</h4> <div class="list"> <code>array&lt;string, mixed&gt;</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="loginHeaders()"> loginHeaders()   <span class="label">public</span> </h3> <pre data-language="php">loginHeaders(Cake\Http\ServerRequest $request): array&lt;string, string&gt;</pre> <div class="description detailed"> <p>Generate the login headers</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\Http\ServerRequest</code> <var>$request</var> </dt> <dd><p>Request object.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>array&lt;string, string&gt;</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="needsPasswordRehash()"> needsPasswordRehash()   <span class="label">public</span> </h3> <pre data-language="php">needsPasswordRehash(): bool</pre> <div class="description detailed"> <p>Returns whether the password stored in the repository for the logged in user requires to be rehashed with another algorithm</p> <h4>Returns</h4> <div class="list"> <code>bool</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="parseAuthData()"> parseAuthData()   <span class="label">public</span> </h3> <pre data-language="php">parseAuthData(string $digest): array|null</pre> <div class="description detailed"> <p>Parse the digest authentication headers and split them up.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$digest</var> </dt> <dd><p>The raw digest authentication headers.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>array|null</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="password()"> password()   <span class="label">public</span> <span class="label">static</span> </h3> <pre data-language="php">password(string $username, string $password, string $realm): string</pre> <div class="description detailed"> <p>Creates an auth digest password hash to store</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$username</var> </dt> <dd><p>The username to use in the digest hash.</p></dd> <dt> <code>string</code> <var>$password</var> </dt> <dd><p>The unhashed password to make a digest hash for.</p></dd> <dt> <code>string</code> <var>$realm</var> </dt> <dd><p>The realm the password is for.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>string</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="passwordHasher()"> passwordHasher()   <span class="label">public</span> </h3> <pre data-language="php">passwordHasher(): Cake\Auth\AbstractPasswordHasher</pre> <div class="description detailed"> <p>Return password hasher object</p> <h4>Returns</h4> <div class="list"> <code>Cake\Auth\AbstractPasswordHasher</code><br> </div> <h4>Throws</h4> <div class="list"> <code>RuntimeException</code><br> If password hasher class not found or it does not extend AbstractPasswordHasher </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="setConfig()"> setConfig()   <span class="label">public</span> </h3> <pre data-language="php">setConfig(array&lt;string, mixed&gt;|string $key, mixed|null $value = null, bool $merge = true): $this</pre> <div class="description detailed"> <p>Sets the config.</p> <h3>Usage</h3> <p>Setting a specific value:</p> <pre data-language="php">$this-&gt;setConfig('key', $value);</pre> <p>Setting a nested value:</p> <pre data-language="php">$this-&gt;setConfig('some.nested.key', $value);</pre> <p>Updating multiple config settings at the same time:</p> <pre data-language="php">$this-&gt;setConfig(['one' =&gt; 'value', 'another' =&gt; 'value']);</pre> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>array&lt;string, mixed&gt;|string</code> <var>$key</var> </dt> <dd><p>The key to set, or a complete array of configs.</p></dd> <dt> <code>mixed|null</code> <var>$value</var> <span class="label">optional</span> </dt> <dd><p>The value to set.</p></dd> <dt> <code>bool</code> <var>$merge</var> <span class="label">optional</span> </dt> <dd><p>Whether to recursively merge or overwrite existing config, defaults to true.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>$this</code><br> </div> <h4>Throws</h4> <div class="list"> <code>Cake\Core\Exception\CakeException</code><br> When trying to set a key that is invalid. </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="setTableLocator()"> setTableLocator()   <span class="label">public</span> </h3> <pre data-language="php">setTableLocator(Cake\ORM\Locator\LocatorInterface $tableLocator): $this</pre> <div class="description detailed"> <p>Sets the table locator.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\ORM\Locator\LocatorInterface</code> <var>$tableLocator</var> </dt> <dd><p>LocatorInterface instance.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>$this</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="unauthenticated()"> unauthenticated()   <span class="label">public</span> </h3> <pre data-language="php">unauthenticated(Cake\Http\ServerRequest $request, Cake\Http\Response $response): Cake\Http\Response|null|void</pre> <div class="description detailed"> <p>Handles an unauthenticated access attempt by sending appropriate login headers</p> <ul> <li>Null - No action taken, AuthComponent should return appropriate response.</li> <li>\Cake\Http\Response - A response object, which will cause AuthComponent to simply return that response.</li> </ul> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>Cake\Http\ServerRequest</code> <var>$request</var> </dt> <dd><p>A request object.</p></dd> <dt> <code>Cake\Http\Response</code> <var>$response</var> </dt> <dd><p>A response object.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>Cake\Http\Response|null|void</code><br> </div> <h4>Throws</h4> <div class="list"> <code>Cake\Http\Exception\UnauthorizedException</code><br> </div> </div> </div> <div class="method-detail">  <h3 class="method-name" id="validNonce()"> validNonce()   <span class="label">protected</span> </h3> <pre data-language="php">validNonce(string $nonce): bool</pre> <div class="description detailed"> <p>Check the nonce to ensure it is valid and not expired.</p> <h4>Parameters</h4> <div class="parameter-list list"> <dl> <dt> <code>string</code> <var>$nonce</var> </dt> <dd><p>The nonce value to check.</p></dd> </dl> </div> <h4>Returns</h4> <div class="list"> <code>bool</code><br> </div> </div> </div> </div> <div class="section"> <h2>Property Detail</h2> <div class="property-detail">  <h3 class="property-name" id="$_config"> <var>$_config</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Runtime config</p> <h4>Type</h4> <div class="list"> <code>array&lt;string, mixed&gt;</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_configInitialized"> <var>$_configInitialized</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Whether the config property has already been configured with defaults</p> <h4>Type</h4> <div class="list"> <code>bool</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_defaultConfig"> <var>$_defaultConfig</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Default config for this object.</p> <ul> <li>
<code>fields</code> The fields to use to identify a user by.</li> <li>
<code>userModel</code> The alias for users table, defaults to Users.</li> <li>
<code>finder</code> The finder method to use to fetch user record. Defaults to 'all'. You can set finder name as string or an array where key is finder name and value is an array passed to <code>Table::find()</code> options. E.g. ['finderName' =&gt; ['some_finder_option' =&gt; 'some_value']]</li> <li>
<code>passwordHasher</code> Password hasher class. Can be a string specifying class name or an array containing <code>className</code> key, any other keys will be passed as config to the class. Defaults to 'Default'.</li> </ul> <h4>Type</h4> <div class="list"> <code>array&lt;string, mixed&gt;</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_needsPasswordRehash"> <var>$_needsPasswordRehash</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Whether the user authenticated by this class requires their password to be rehashed with another algorithm.</p> <h4>Type</h4> <div class="list"> <code>bool</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_passwordHasher"> <var>$_passwordHasher</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Password hasher instance.</p> <h4>Type</h4> <div class="list"> <code>Cake\Auth\AbstractPasswordHasher|null</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_registry"> <var>$_registry</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>A Component registry, used to get more components.</p> <h4>Type</h4> <div class="list"> <code>Cake\Controller\ComponentRegistry</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$_tableLocator"> <var>$_tableLocator</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>Table locator instance</p> <h4>Type</h4> <div class="list"> <code>Cake\ORM\Locator\LocatorInterface|null</code><br> </div> </div> </div> <div class="property-detail">  <h3 class="property-name" id="$defaultTable"> <var>$defaultTable</var>   <span class="label">protected</span> </h3> <div class="description detailed"> <p>This object's default table alias.</p> <h4>Type</h4> <div class="list"> <code>string|null</code><br> </div> </div> </div> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;present The Cake Software Foundation, Inc.<br>Licensed under the MIT License.<br>CakePHP is a registered trademark of Cake Software Foundation, Inc.<br>We are not endorsed by or affiliated with CakePHP.<br>
    <a href="https://api.cakephp.org/4.4/class-Cake.Auth.DigestAuthenticate.html" class="_attribution-link">https://api.cakephp.org/4.4/class-Cake.Auth.DigestAuthenticate.html</a>
  </p>
</div>
