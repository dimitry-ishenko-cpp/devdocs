<h1 id="context-locals">Context Locals</h1> <p>You may find that you have some data during each request that you want to use across functions. Instead of passing these as arguments between every function, you may want to access them as global data. However, using global variables in Python web applications is not thread safe; different workers might interfere with each others’ data.</p> <p>Instead of storing common data during a request using global variables, you must use context-local variables instead. A context local is defined/imported globally, but the data it contains is specific to the current thread, asyncio task, or greenlet. You won’t accidentally get or overwrite another worker’s data.</p> <p>The current approach for storing per-context data in Python is the <code>contextvars</code> module. Context vars store data per thread, async task, or greenlet. This replaces the older <a class="reference external" href="https://docs.python.org/3/library/threading.html#threading.local" title="(in Python v3.11)"><code>threading.local</code></a> which only handled threads.</p> <p>Werkzeug provides wrappers around <a class="reference external" href="https://docs.python.org/3/library/contextvars.html#contextvars.ContextVar" title="(in Python v3.11)"><code>ContextVar</code></a> to make it easier to work with.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2007 Pallets<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://werkzeug.palletsprojects.com/en/3.0.x/local/" class="_attribution-link">https://werkzeug.palletsprojects.com/en/3.0.x/local/</a>
  </p>
</div>
