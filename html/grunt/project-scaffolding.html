<h1>Project Scaffolding</h1>
<h2 id="grunt-init">grunt-init</h2> <p>Grunt-init is a scaffolding tool used to automate project creation. It will build an entire directory structure based on current environment and answers to some questions. The exact files and contents created depend on the template chosen along with the answers to the questions asked.</p> <p><em>Note: This standalone utility used to be built-in to Grunt as the "init" task. See the Grunt <a href="upgrading-from-0.3-to-0.4.html">Upgrading from 0.3 to 0.4</a> guide for more information about this change.</em></p> <h2 id="installation">Installation</h2> <p>In order to use grunt-init, you'll want to install it globally.</p> <pre data-language="javascript">npm install -g grunt-init</pre> <p>This will put the <code>grunt-init</code> command in your system path, allowing it to be run from anywhere.</p> <p><em>Notes: You may need to use sudo or run your command shell as Administrator to do this.</em></p> <h2 id="usage">Usage</h2> <ul> <li>Get program help and a listing of available templates with <code>grunt-init --help</code>
</li> <li>Create a project based around an available template with <code>grunt-init TEMPLATE</code>
</li> <li>Create a project based around a arbitrarily-located template with <code>grunt-init /path/to/TEMPLATE</code>
</li> </ul> <p>Note that most templates generate their files in the current directory, so be sure to change to a new directory first if you don't want to overwrite existing files.</p> <h2 id="installing-templates">Installing templates</h2> <p>Once templates are installed into your <code>~/.grunt-init/</code> directory (<code>%USERPROFILE%\.grunt-init\</code> on Windows) they will be available for use via grunt-init. It's recommended that you use git to clone a template into that directory. For example, the <a href="https://github.com/gruntjs/grunt-init-jquery">grunt-init-jquery</a> template can be installed like so:</p> <pre data-language="javascript">git clone https://github.com/gruntjs/grunt-init-jquery.git ~/.grunt-init/jquery</pre> <p><em>Note: if you want to make the template available locally as "foobarbaz" you could specify <code>~/.grunt-init/foobarbaz</code> while cloning. Grunt-init will use the actual template directory name as it exists inside of the <code>~/.grunt-init/</code> directory.</em></p> <p>A few grunt-init templates are maintained officially:</p> <ul> <li>
<a href="https://github.com/gruntjs/grunt-init-commonjs">grunt-init-commonjs</a> - Create a commonjs module, including Nodeunit unit tests. (<a href="https://github.com/gruntjs/grunt-init-commonjs-sample/tree/generated">sample "generated" repo</a> | <a href="https://github.com/gruntjs/grunt-init-commonjs-sample#project-creation-transcript">creation transcript</a>)</li> <li>
<a href="https://github.com/gruntjs/grunt-init-gruntfile">grunt-init-gruntfile</a> - Create a basic Gruntfile. (<a href="https://github.com/gruntjs/grunt-init-gruntfile-sample/tree/generated">sample "generated" repo</a> | <a href="https://github.com/gruntjs/grunt-init-gruntfile-sample#project-creation-transcript">creation transcript</a>)</li> <li>
<a href="https://github.com/gruntjs/grunt-init-gruntplugin">grunt-init-gruntplugin</a> - Create a Grunt plugin, including Nodeunit unit tests. (<a href="https://github.com/gruntjs/grunt-init-gruntplugin-sample/tree/generated">sample "generated" repo</a> | <a href="https://github.com/gruntjs/grunt-init-gruntplugin-sample#project-creation-transcript">creation transcript</a>)</li> <li>
<a href="https://github.com/gruntjs/grunt-init-jquery">grunt-init-jquery</a> - Create a jQuery plugin, including QUnit unit tests. (<a href="https://github.com/gruntjs/grunt-init-jquery-sample/tree/generated">sample "generated" repo</a> | <a href="https://github.com/gruntjs/grunt-init-jquery-sample#project-creation-transcript">creation transcript</a>)</li> <li>
<a href="https://github.com/gruntjs/grunt-init-node">grunt-init-node</a> - Create a Node.js module, including Nodeunit unit tests. (<a href="https://github.com/gruntjs/grunt-init-node-sample/tree/generated">sample "generated" repo</a> | <a href="https://github.com/gruntjs/grunt-init-node-sample#project-creation-transcript">creation transcript</a>)</li> </ul> <h2 id="custom-templates">Custom templates</h2> <p>You can create and use custom templates. Your template must follow the same structure as the aforementioned templates.</p> <p>A sample template named <code>my-template</code> would follow this general file structure:</p> <ul> <li>
<code>my-template/template.js</code> - the main template file.</li> <li>
<code>my-template/rename.json</code> - template-specific rename rules, processed as templates.</li> <li>
<code>my-template/root/</code> - files to be copied into the target location.</li> </ul> <p>Assuming these files exist at <code>/path/to/my-template</code>, the command <code>grunt-init /path/to/my-template</code> would be used to process the template. Multiple uniquely-named templates may exist in the same directory.</p> <p>Additionally, if you place this custom template in your <code>~/.grunt-init/</code> directory (<code>%USERPROFILE%\.grunt-init\</code> on Windows) it will be automatically available to be used with just <code>grunt-init my-template</code>.</p> <h3 id="copying-files">Copying files</h3> <p>As long as a template uses the <code>init.filesToCopy</code> and <code>init.copyAndProcess</code> methods, any files in the <code>root/</code> subdirectory will be copied to the current directory when the init template is run.</p> <p>Note that all copied files will be processed as templates, with any <code>{% %}</code> template being processed against the collected <code>props</code> data object, unless the <code>noProcess</code> option is set. See the <a href="https://github.com/gruntjs/grunt-init-jquery">jquery template</a> for an example.</p> <h3 id="renaming-or-excluding-template-files">Renaming or excluding template files</h3> <p>The <code>rename.json</code> describes <code>sourcepath</code> to <code>destpath</code> rename mappings. The <code>sourcepath</code> must be the path of the file-to-be-copied relative to the <code>root/</code> folder, but the <code>destpath</code> value can contain <code>{% %}</code> templates, describing what the destination path will be.</p> <p>If <code>false</code> is specified as a <code>destpath</code> the file will not be copied. Also, glob patterns are supported for <code>srcpath</code>.</p> <h2 id="specifying-default-prompt-answers">Specifying default prompt answers</h2> <p>Each init prompt either has a default value hard-coded or it looks at the current environment to attempt to determine that default value. If you want to override a particular prompt's default value, you can do so in the optional OS X or Linux <code>~/.grunt-init/defaults.json</code> or Windows <code>%USERPROFILE%\.grunt-init\defaults.json</code> file.</p> <p>For example, my <code>defaults.json</code> file looks like this, because I want to use a slightly different name than the default name, I want to exclude my email address, and I want to specify an author URL automatically.</p> <pre data-language="javascript">{
  "author_name": "\"Cowboy\" Ben Alman",
  "author_email": "none",
  "author_url": "http://benalman.com/"
}</pre> <p><em>Note: until all the built-in prompts have been documented, you can find their names and default values in the <a href="https://github.com/gruntjs/grunt-init/blob/master/tasks/init.js">source code</a>.</em></p> <h2 id="defining-an-init-template">Defining an init template</h2> <h3 id="exports.description">exports.description</h3> <p>This brief template description will be displayed along with the template name when the user runs <code>grunt init</code> or <code>grunt-init</code> to display a list of all available init templates.</p> <pre data-language="javascript">exports.description = descriptionString;</pre> <h3 id="exports.notes">exports.notes</h3> <p>If specified, this optional extended description will be displayed before any prompts are displayed. This is a good place to give the user a little help explaining naming conventions, which prompts may be required or optional, etc.</p> <pre data-language="javascript">exports.notes = notesString;</pre> <h3 id="exports.warnon">exports.warnOn</h3> <p>If this optional (but recommended) wildcard pattern or array of wildcard patterns is matched, Grunt will abort with a warning that the user can override with <code>--force</code>. This is very useful in cases where the init template could potentially override existing files.</p> <pre data-language="javascript">exports.warnOn = wildcardPattern;</pre> <p>While the most common value will be <code>'*'</code>, matching any file or directory, the <a href="https://github.com/isaacs/minimatch">minimatch</a> wildcard pattern syntax used allows for a lot of flexibility. For example:</p> <pre data-language="javascript">exports.warnOn = 'Gruntfile.js';    // Warn on a Gruntfile.js file.
exports.warnOn = '*.js';            // Warn on any .js file.
exports.warnOn = '*';               // Warn on any non-dotfile or non-dotdir.
exports.warnOn = '.*';              // Warn on any dotfile or dotdir.
exports.warnOn = '{.*,*}';          // Warn on any file or dir (dot or non-dot).
exports.warnOn = '!*/**';           // Warn on any file (ignoring dirs).
exports.warnOn = '*.{png,gif,jpg}'; // Warn on any image file.

// This is another way of writing the last example.
exports.warnOn = ['*.png', '*.gif', '*.jpg'];</pre> <h3 id="exports.template">exports.template</h3> <p>While the <code>exports</code> properties are defined outside this function, all the actual init code is specified inside. Three arguments are passed into this function. The <code>grunt</code> argument is a reference to grunt, containing all the <a href="api/grunt.html">grunt methods and libs</a>. The <code>init</code> argument is an object containing methods and properties specific to this init template. The <code>done</code> argument is a function that must be called when the init template is done executing.</p> <pre data-language="javascript">exports.template = function(grunt, init, done) {
  // See the "Inside an init template" section.
};</pre> <h2 id="inside-an-init-template">Inside an init template</h2> <h3 id="init.addlicensefiles">init.addLicenseFiles</h3> <p>Add properly-named license files to the files object.</p> <pre data-language="javascript">var files = {};
var licenses = ['MIT'];
init.addLicenseFiles(files, licenses);
// files === {'LICENSE-MIT': 'licenses/LICENSE-MIT'}</pre> <h3 id="init.availablelicenses">init.availableLicenses</h3> <p>Return an array of available licenses.</p> <pre data-language="javascript">var licenses = init.availableLicenses();
// licenses === [ 'Apache-2.0', 'GPL-2.0', 'MIT', 'MPL-2.0' ]</pre> <h3 id="init.copy">init.copy</h3> <p>Given an absolute or relative source path, and an optional relative destination path, copy a file, optionally processing it through the passed callback.</p> <pre data-language="javascript">init.copy(srcpath[, destpath], options)</pre> <h3 id="init.copyandprocess">init.copyAndProcess</h3> <p>Iterate over all files in the passed object, copying the source file to the destination, processing the contents.</p> <pre data-language="javascript">init.copyAndProcess(files, props[, options])</pre> <h3 id="init.defaults">init.defaults</h3> <p>User-specified default init values from <code>defaults.json</code>.</p> <pre data-language="javascript">init.defaults</pre> <h3 id="init.destpath">init.destpath</h3> <p>Absolute destination file path.</p> <pre data-language="javascript">init.destpath()</pre> <h3 id="init.expand">init.expand</h3> <p>Same as <a href="https://github.com/gruntjs/grunt/wiki/grunt.file#wiki-grunt-file-expand">grunt.file.expand</a>.</p> <p>Return a unique array of all file or directory paths that match the given wildcard pattern(s). This method accepts either comma separated wildcard patterns or an array of wildcard patterns. Paths matching patterns that begin with ! will be excluded from the returned array. Patterns are processed in order, so inclusion and exclusion order is significant.</p> <pre data-language="javascript">init.expand([options, ] patterns)</pre> <h3 id="init.filestocopy">init.filesToCopy</h3> <p>Return an object containing files to copy with their absolute source path and relative destination path, renamed (or omitted) according to rules in rename.json (if it exists).</p> <pre data-language="javascript">var files = init.filesToCopy(props);
/* files === { '.gitignore': 'template/root/.gitignore',
  '.jshintrc': 'template/root/.jshintrc',
  'Gruntfile.js': 'template/root/Gruntfile.js',
  'README.md': 'template/root/README.md',
  'test/test_test.js': 'template/root/test/name_test.js' } */</pre> <h3 id="init.getfile">init.getFile</h3> <p>Get a single task file path.</p> <pre data-language="javascript">init.getFile(filepath[, ...])</pre> <h3 id="init.gettemplates">init.getTemplates</h3> <p>Returns an object of all the available templates.</p> <pre data-language="javascript">init.getTemplates()</pre> <h3 id="init.initsearchdirs">init.initSearchDirs</h3> <p>Initialize the directories to search for init templates. <code>template</code> is the location of a template. Will also include <code>~/.grunt-init/</code> and the core init tasks within grunt-init.</p> <pre data-language="javascript">init.initSearchDirs([filename])</pre> <h3 id="init.process">init.process</h3> <p>Start up the process to begin prompting for input.</p> <pre data-language="javascript">init.process(options, prompts, done)</pre> <pre data-language="javascript">init.process({}, [
  // Prompt for these values
  init.prompt('name'),
  init.prompt('description'),
  init.prompt('version')
], function(err, props) {
  // All finished, do something with the properties
});</pre> <h3 id="init.prompt">init.prompt</h3> <p>Prompt a user for a value.</p> <pre data-language="javascript">init.prompt(name[, default])</pre> <h3 id="init.prompts">init.prompts</h3> <p>An object of all the prompts.</p> <pre data-language="javascript">var prompts = init.prompts;</pre> <h3 id="init.readdefaults">init.readDefaults</h3> <p>Read JSON defaults from task files (if they exist), merging them into one data object.</p> <pre data-language="javascript">init.readDefaults(filepath[, ...])</pre> <h3 id="init.renames">init.renames</h3> <p>The rename rules for the template.</p> <pre data-language="javascript">var renames = init.renames;
// renames === { 'test/name_test.js': 'test/{%= name %}_test.js' }</pre> <h3 id="init.searchdirs">init.searchDirs</h3> <p>An array of directories to search for templates in.</p> <pre data-language="javascript">var dirs = init.searchDirs;
/* dirs === [ '/Users/shama/.grunt-init',
  '/usr/local/lib/node_modules/grunt-init/templates' ] */</pre> <h3 id="init.srcpath">init.srcpath</h3> <p>Search init template paths for filename and return an absolute path.</p> <pre data-language="javascript">init.srcpath(filepath[, ...])</pre> <h3 id="init.userdir">init.userDir</h3> <p>Returns the absolute path to the user's template directory.</p> <pre data-language="javascript">var dir = init.userDir();
// dir === '/Users/shama/.grunt-init'</pre> <h3 id="init.writepackagejson">init.writePackageJSON</h3> <p>Save a package.json file in the destination directory. The callback can be used to post-process properties to add/remove/whatever.</p> <pre data-language="javascript">init.writePackageJSON(filename, props[, callback])</pre> <h2 id="built-in-prompts">Built-in prompts</h2> <h3 id="author_email">author_email</h3> <p>Author's email address to use in the <code>package.json</code>. Will attempt to find a default value from the user's git config.</p> <h3 id="author_name">author_name</h3> <p>Author's full name to use in the <code>package.json</code> and copyright notices. Will attempt to find a default value from the user's git config.</p> <h3 id="author_url">author_url</h3> <p>A public URL to the author's website to use in the <code>package.json</code>.</p> <h3 id="bin">bin</h3> <p>A relative path from the project root for a cli script.</p> <h3 id="bugs">bugs</h3> <p>A public URL to the project's issues tracker. Will default to the GitHub issue tracker if the project has a GitHub repository.</p> <h3 id="description">description</h3> <p>A description of the project. Used in the <code>package.json</code> and README files.</p> <h3 id="grunt_version">grunt_version</h3> <p>A valid semantic version range descriptor of Grunt the project requires.</p> <h3 id="homepage">homepage</h3> <p>A public URL to the project's home page. Will default to the GitHub URL if a GitHub repository.</p> <h3 id="jquery_version">jquery_version</h3> <p>If a jQuery project, the version of jQuery the project requires. Must be a valid semantic version range descriptor.</p> <h3 id="licenses">licenses</h3> <p>The license(s) for the project. Multiple licenses are separated by spaces. The licenses built-in are: <code>MIT</code>, <code>MPL-2.0</code>, <code>GPL-2.0</code>, and <code>Apache-2.0</code>. Defaults to <code>MIT</code>. Add custom licenses with <a href="project-scaffolding.html#init.addlicensefiles">init.addLicenseFiles</a>.</p> <h3 id="main">main</h3> <p>The primary entry point of the project. Defaults to the project name within the <code>lib</code> folder.</p> <h3 id="name">name</h3> <p>The name of the project. Will be used heavily throughout the project template. Defaults to the current working directory.</p> <h3 id="node_version">node_version</h3> <p>The version of Node.js the project requires. Must be a valid semantic version range descriptor.</p> <h3 id="npm_test">npm_test</h3> <p>The command to run tests on your project. Defaults to <code>grunt</code>.</p> <h3 id="repository">repository</h3> <p>Project's git repository. Defaults to a guess of a GitHub URL.</p> <h3 id="title">title</h3> <p>A human readable project name. Defaults to the actual project name altered to be more human readable.</p> <h3 id="version">version</h3> <p>The version of the project. Defaults to the first valid semantic version, <code>0.1.0</code>.</p><div class="_attribution">
  <p class="_attribution-p">
    &copy; GruntJS Team<br>Licensed under the MIT License.<br>
    <a href="https://gruntjs.com/project-scaffolding" class="_attribution-link">https://gruntjs.com/project-scaffolding</a>
  </p>
</div>
