<div class="subsection-level-extent" id="Argument-list-functions"> <div class="nav-panel"> <p> Next: <a href="read_002fwrite-after-eof-marker.html" accesskey="n" rel="next">Read/Write after EOF marker</a>, Previous: <a href="openacc.html" accesskey="p" rel="prev">OpenACC</a>, Up: <a href="extensions-implemented-in-gnu-fortran.html" accesskey="u" rel="up">Extensions implemented in GNU Fortran</a> [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="https://gcc.gnu.org/onlinedocs/gcc-13.1.0/gfortran/Option-Index.html" title="Index" rel="index">Index</a>]</p> </div>  <h1 class="subsection" id="Argument-list-functions-_0025VAL_002c-_0025REF-and-_0025LOC"><span>5.1.20 Argument list functions %VAL, %REF and %LOC<a class="copiable-link" href="#Argument-list-functions-_0025VAL_002c-_0025REF-and-_0025LOC"> ¶</a></span></h1>     <p>GNU Fortran supports argument list functions <code class="code">%VAL</code>, <code class="code">%REF</code> and <code class="code">%LOC</code> statements, for backward compatibility with g77. It is recommended that these should be used only for code that is accessing facilities outside of GNU Fortran, such as operating system or windowing facilities. It is best to constrain such uses to isolated portions of a program–portions that deal specifically and exclusively with low-level, system-dependent facilities. Such portions might well provide a portable interface for use by the program as a whole, but are themselves not portable, and should be thoroughly tested each time they are rebuilt using a new compiler or version of a compiler. </p> <p><code class="code">%VAL</code> passes a scalar argument by value, <code class="code">%REF</code> passes it by reference and <code class="code">%LOC</code> passes its memory location. Since gfortran already passes scalar arguments by reference, <code class="code">%REF</code> is in effect a do-nothing. <code class="code">%LOC</code> has the same effect as a Fortran pointer. </p> <p>An example of passing an argument by value to a C subroutine foo.: </p>
<div class="example smallexample"> <pre class="example-preformatted">C
C prototype      void foo_ (float x);
C
      external foo
      real*4 x
      x = 3.14159
      call foo (%VAL (x))
      end</pre>
</div> <p>For details refer to the g77 manual <a class="uref" href="https://gcc.gnu.org/onlinedocs/gcc-3.4.6/g77/index.html#Top">https://gcc.gnu.org/onlinedocs/gcc-3.4.6/g77/index.html#Top</a>. </p> <p>Also, <code class="code">c_by_val.f</code> and its partner <code class="code">c_by_val.c</code> of the GNU Fortran testsuite are worth a look. </p> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; Free Software Foundation<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://gcc.gnu.org/onlinedocs/gcc-13.1.0/gfortran/Argument-list-functions.html" class="_attribution-link">https://gcc.gnu.org/onlinedocs/gcc-13.1.0/gfortran/Argument-list-functions.html</a>
  </p>
</div>
