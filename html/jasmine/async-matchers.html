<h1 class="page-title">Namespace: async-matchers</h1> <section> <header> <h2>async-matchers</h2> </header> <article> <div class="container-overview"> <div class="description">
<p>Asynchronous matchers that operate on an actual value which is a promise, and return a promise.</p> <p>Most async matchers will wait indefinitely for the promise to be resolved or rejected, resulting in a spec timeout if that never happens. If you expect that the promise will already be resolved or rejected at the time the matcher is called, you can use the <a href="async-matchers.html#already"><code>async-matchers#already</code></a> modifier to get a faster failure with a more helpful message.</p> <p>Note: Specs must await the result of each async matcher, return the promise returned by the matcher, or return a promise that's derived from the one returned by the matcher. Otherwise the matcher will not be evaluated before the spec completes.</p>
</div>  <h3>Examples</h3> <pre class="prettyprint" data-language="javascript">// Good
await expectAsync(aPromise).toBeResolved();</pre> <pre class="prettyprint" data-language="javascript">// Good
return expectAsync(aPromise).toBeResolved();</pre> <pre class="prettyprint" data-language="javascript">// Good
return expectAsync(aPromise).toBeResolved()
 .then(function() {
   // more spec code
 });</pre> <pre class="prettyprint" data-language="javascript">// Bad
expectAsync(aPromise).toBeResolved();</pre> </div> <h3 class="subsection-title">Members</h3> <h4 class="name" id="already">
already<span class="type-signature"> :<a href="async-matchers.html">async-matchers</a></span>
</h4> <div class="description"> <p>Fail as soon as possible if the actual is pending. Otherwise evaluate the matcher.</p> </div> <h5>Type:</h5> <ul> <li> <span class="param-type"><a href="async-matchers.html">async-matchers</a></span> </li> </ul> <dl class="details"> <dt class="tag-since">Since:</dt> <dd class="tag-since"><ul class="dummy"><li>3.8.0</li></ul></dd> </dl> <h5>Examples</h5> <pre class="prettyprint" data-language="javascript">await expectAsync(myPromise).already.toBeResolved();</pre> <pre class="prettyprint" data-language="javascript">return expectAsync(myPromise).already.toBeResolved();</pre> <h4 class="name" id="not">
not<span class="type-signature"> :<a href="async-matchers.html">async-matchers</a></span>
</h4> <div class="description"> <p>Invert the matcher following this <a href="global.html#expectAsync"><code>expectAsync</code></a></p> </div> <h5>Type:</h5> <ul> <li> <span class="param-type"><a href="async-matchers.html">async-matchers</a></span> </li> </ul>  <h5>Examples</h5> <pre class="prettyprint" data-language="javascript">await expectAsync(myPromise).not.toBeResolved();</pre> <pre class="prettyprint" data-language="javascript">return expectAsync(myPromise).not.toBeResolved();</pre> <h3 class="subsection-title">Methods</h3> <h4 class="name" id="toBePending">
<span class="type-signature">(async) </span>toBePending<span class="signature">()</span>
</h4> <div class="description"> <p>Expect a promise to be pending, i.e. the promise is neither resolved nor rejected.</p> </div> <dl class="details"> <dt class="tag-since">Since:</dt> <dd class="tag-since"><ul class="dummy"><li>3.6</li></ul></dd> </dl> <h5>Example</h5> <pre class="prettyprint" data-language="javascript">await expectAsync(aPromise).toBePending();</pre> <h4 class="name" id="toBeRejected">
<span class="type-signature">(async) </span>toBeRejected<span class="signature">()</span>
</h4> <div class="description"> <p>Expect a promise to be rejected.</p> </div> <dl class="details"> <dt class="tag-since">Since:</dt> <dd class="tag-since"><ul class="dummy"><li>3.1.0</li></ul></dd> </dl> <h5>Examples</h5> <pre class="prettyprint" data-language="javascript">await expectAsync(aPromise).toBeRejected();</pre> <pre class="prettyprint" data-language="javascript">return expectAsync(aPromise).toBeRejected();</pre> <h4 class="name" id="toBeRejectedWith">
<span class="type-signature">(async) </span>toBeRejectedWith<span class="signature">(expected)</span>
</h4> <div class="description"> <p>Expect a promise to be rejected with a value equal to the expected, using deep equality comparison.</p> </div> <h5>Parameters:</h5> <table class="params"> <thead> <tr> <th>Name</th> <th>Type</th> <th class="last">Description</th> </tr> </thead> <tbody> <tr> <td class="name"><code>expected</code></td> <td class="type"> <span class="param-type">Object</span> </td> <td class="description last"><p>Value that the promise is expected to be rejected with</p></td> </tr> </tbody> </table> <dl class="details"> <dt class="tag-since">Since:</dt> <dd class="tag-since"><ul class="dummy"><li>3.3.0</li></ul></dd> </dl> <h5>Examples</h5> <pre class="prettyprint" data-language="javascript">await expectAsync(aPromise).toBeRejectedWith({prop: 'value'});</pre> <pre class="prettyprint" data-language="javascript">return expectAsync(aPromise).toBeRejectedWith({prop: 'value'});</pre> <h4 class="name" id="toBeRejectedWithError">
<span class="type-signature">(async) </span>toBeRejectedWithError<span class="signature">(expected<span class="signature-attributes">opt</span>, message<span class="signature-attributes">opt</span>)</span>
</h4> <div class="description"> <p>Expect a promise to be rejected with a value matched to the expected</p> </div> <h5>Parameters:</h5> <table class="params"> <thead> <tr> <th>Name</th> <th>Type</th> <th>Attributes</th> <th class="last">Description</th> </tr> </thead> <tbody> <tr> <td class="name"><code>expected</code></td> <td class="type"> <span class="param-type">Error</span> </td> <td class="attributes"> &lt;optional&gt;<br> </td> <td class="description last"><p><code>Error</code> constructor the object that was thrown needs to be an instance of. If not provided, <code>Error</code> will be used.</p></td> </tr> <tr> <td class="name"><code>message</code></td> <td class="type"> <span class="param-type">RegExp</span> | <span class="param-type">String</span> </td> <td class="attributes"> &lt;optional&gt;<br> </td> <td class="description last"><p>The message that should be set on the thrown <code>Error</code></p></td> </tr> </tbody> </table> <dl class="details"> <dt class="tag-since">Since:</dt> <dd class="tag-since"><ul class="dummy"><li>3.5.0</li></ul></dd> </dl> <h5>Example</h5> <pre class="prettyprint" data-language="javascript">await expectAsync(aPromise).toBeRejectedWithError(MyCustomError, 'Error message');
await expectAsync(aPromise).toBeRejectedWithError(MyCustomError, /Error message/);
await expectAsync(aPromise).toBeRejectedWithError(MyCustomError);
await expectAsync(aPromise).toBeRejectedWithError('Error message');
return expectAsync(aPromise).toBeRejectedWithError(/Error message/);</pre> <h4 class="name" id="toBeResolved">
<span class="type-signature">(async) </span>toBeResolved<span class="signature">()</span>
</h4> <div class="description"> <p>Expect a promise to be resolved.</p> </div> <dl class="details"> <dt class="tag-since">Since:</dt> <dd class="tag-since"><ul class="dummy"><li>3.1.0</li></ul></dd> </dl> <h5>Examples</h5> <pre class="prettyprint" data-language="javascript">await expectAsync(aPromise).toBeResolved();</pre> <pre class="prettyprint" data-language="javascript">return expectAsync(aPromise).toBeResolved();</pre> <h4 class="name" id="toBeResolvedTo">
<span class="type-signature">(async) </span>toBeResolvedTo<span class="signature">(expected)</span>
</h4> <div class="description"> <p>Expect a promise to be resolved to a value equal to the expected, using deep equality comparison.</p> </div> <h5>Parameters:</h5> <table class="params"> <thead> <tr> <th>Name</th> <th>Type</th> <th class="last">Description</th> </tr> </thead> <tbody> <tr> <td class="name"><code>expected</code></td> <td class="type"> <span class="param-type">Object</span> </td> <td class="description last"><p>Value that the promise is expected to resolve to</p></td> </tr> </tbody> </table> <dl class="details"> <dt class="tag-since">Since:</dt> <dd class="tag-since"><ul class="dummy"><li>3.1.0</li></ul></dd> </dl> <h5>Examples</h5> <pre class="prettyprint" data-language="javascript">await expectAsync(aPromise).toBeResolvedTo({prop: 'value'});</pre> <pre class="prettyprint" data-language="javascript">return expectAsync(aPromise).toBeResolvedTo({prop: 'value'});</pre> <h4 class="name" id="withContext">
withContext<span class="signature">(message)</span><span class="type-signature"> â†’ {<a href="async-matchers.html">async-matchers</a>}</span>
</h4> <div class="description"> <p>Add some context for an <a href="global.html#expectAsync"><code>expectAsync</code></a></p> </div> <h5>Parameters:</h5> <table class="params"> <thead> <tr> <th>Name</th> <th>Type</th> <th class="last">Description</th> </tr> </thead> <tbody> <tr> <td class="name"><code>message</code></td> <td class="type"> <span class="param-type">String</span> </td> <td class="description last"><p>Additional context to show when the async matcher fails</p></td> </tr> </tbody> </table> <dl class="details"> <dt class="tag-since">Since:</dt> <dd class="tag-since"><ul class="dummy"><li>3.3.0</li></ul></dd> </dl> <h5>Returns:</h5> <dl> <dt> Type </dt> <dd> <span class="param-type"><a href="async-matchers.html">async-matchers</a></span> </dd> </dl> </article> </section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2008&ndash;2019 Pivotal Labs<br>Licensed under the MIT License.<br>
    <a href="https://jasmine.github.io/api/4.0/async-matchers.html" class="_attribution-link">https://jasmine.github.io/api/4.0/async-matchers.html</a>
  </p>
</div>
