<h1>Cookies</h1>
<h1>Using HTTP cookies</h1>
<div class="section-content">
<p> An <strong>HTTP cookie</strong> (web cookie, browser cookie) is a small piece of data that a server sends to a user's web browser. The browser may store the cookie and send it back to the same server with later requests. Typically, an HTTP cookie is used to tell if two requests come from the same browserâ€”keeping a user logged in, for example. It remembers stateful information for the <a href="overview.html#http_is_stateless_but_not_sessionless">stateless</a> HTTP protocol. </p> <p>Cookies are mainly used for three purposes:</p> <dl> <dt id="session_management">Session management</dt> <dd> <p>Logins, shopping carts, game scores, or anything else the server should remember</p> </dd> <dt id="personalization">Personalization</dt> <dd> <p>User preferences, themes, and other settings</p> </dd> <dt id="tracking">Tracking</dt> <dd> <p>Recording and analyzing user behavior</p> </dd> </dl> <p>Cookies were once used for general client-side storage. While this made sense when they were the only way to store data on the client, modern storage APIs are now recommended. Cookies are sent with every request, so they can worsen performance (especially for mobile data connections). Modern APIs for client storage are the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API">Web Storage API</a> (<code>localStorage</code> and <code>sessionStorage</code>) and <a href="https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API">IndexedDB</a>.</p> <div class="notecard note" id="sect1"> <p><strong>Note:</strong> To see stored cookies (and other storage that a web page can use), you can enable the <a href="https://firefox-source-docs.mozilla.org/devtools-user/storage_inspector/index.html" rel=" noopener">Storage Inspector</a> in Developer Tools and select Cookies from the storage tree.</p> </div>
</div>
<section aria-labelledby="creating_cookies"><h2 id="creating_cookies">Creating cookies</h2>
<div class="section-content"><p>After receiving an HTTP request, a server can send one or more <a href="headers/set-cookie.html"><code>Set-Cookie</code></a> headers with the response. The browser usually stores the cookie and sends it with requests made to the same server inside a <a href="headers/cookie.html"><code>Cookie</code></a> HTTP header. You can specify an expiration date or time period after which the cookie shouldn't be sent. You can also set additional restrictions to a specific domain and path to limit where the cookie is sent. For details about the header attributes mentioned below, refer to the <a href="headers/set-cookie.html"><code>Set-Cookie</code></a> reference article.</p></div></section><section aria-labelledby="the_set-cookie_and_cookie_headers"><h3 id="the_set-cookie_and_cookie_headers">The <code>Set-Cookie</code> and <code>Cookie</code> headers</h3>
<div class="section-content">
<p>The <a href="headers/set-cookie.html"><code>Set-Cookie</code></a> HTTP response header sends cookies from the server to the user agent. A simple cookie is set like this:</p> <div class="code-example"><pre data-language="http"><span class="token header"><span class="token header-name keyword">Set-Cookie</span><span class="token punctuation">:</span> <span class="token header-value">&lt;cookie-name&gt;=&lt;cookie-value&gt;</span></span>
</pre></div> <p>This instructs the server sending headers to tell the client to store a pair of cookies:</p> <div class="code-example"><pre data-language="http"><span class="token response-status"><span class="token http-version property">HTTP/2.0</span> <span class="token status-code number">200</span> <span class="token reason-phrase string">OK</span></span>
<span class="token header"><span class="token header-name keyword">Content-Type</span><span class="token punctuation">:</span> <span class="token header-value">text/html</span></span>
<span class="token header"><span class="token header-name keyword">Set-Cookie</span><span class="token punctuation">:</span> <span class="token header-value">yummy_cookie=choco</span></span>
<span class="token header"><span class="token header-name keyword">Set-Cookie</span><span class="token punctuation">:</span> <span class="token header-value">tasty_cookie=strawberry</span></span>
<span class="token text-html">
[page content]
</span></pre></div> <p>Then, with every subsequent request to the server, the browser sends all previously stored cookies back to the server using the <a href="headers/cookie.html"><code>Cookie</code></a> header.</p> <div class="code-example"><pre data-language="http"><span class="token request-line"><span class="token method property">GET</span> <span class="token request-target url"><span class="token path"><span class="token path-separator">/</span>sample_page.html</span></span> <span class="token http-version property">HTTP/2.0</span></span>
<span class="token header"><span class="token header-name keyword">Host</span><span class="token punctuation">:</span> <span class="token header-value">www.example.org</span></span>
<span class="token header"><span class="token header-name keyword">Cookie</span><span class="token punctuation">:</span> <span class="token header-value">yummy_cookie=choco; tasty_cookie=strawberry</span></span>
</pre></div> <div class="notecard note" id="sect2"> <p><strong>Note:</strong> Here's how to use the <code>Set-Cookie</code> header in various server-side applications:</p> <ul> <li><a href="https://www.php.net/manual/en/function.setcookie.php" rel=" noopener">PHP</a></li> <li><a href="https://nodejs.org/dist/latest-v14.x/docs/api/http.html#http_response_setheader_name_value" rel=" noopener">Node.JS</a></li> <li><a href="https://docs.python.org/3/library/http.cookies.html" rel=" noopener">Python</a></li> <li><a href="https://api.rubyonrails.org/classes/ActionDispatch/Cookies.html" rel=" noopener">Ruby on Rails</a></li> </ul> </div>
</div></section><section aria-labelledby="define_the_lifetime_of_a_cookie"><h3 id="define_the_lifetime_of_a_cookie">Define the lifetime of a cookie</h3>
<div class="section-content">
<p>The lifetime of a cookie can be defined in two ways:</p> <ul> <li>
<em>Session</em> cookies are deleted when the current session ends. The browser defines when the "current session" ends, and some browsers use <em>session restoring</em> when restarting. This can cause session cookies to last indefinitely.</li> <li>
<em>Permanent</em> cookies are deleted at a date specified by the <code>Expires</code> attribute, or after a period of time specified by the <code>Max-Age</code> attribute.</li> </ul> <p>For example:</p> <div class="code-example"><pre data-language="http"><span class="token header"><span class="token header-name keyword">Set-Cookie</span><span class="token punctuation">:</span> <span class="token header-value">id=a3fWa; Expires=Thu, 31 Oct 2021 07:28:00 GMT;</span></span>
</pre></div> <div class="notecard note" id="sect3"> <p><strong>Note:</strong> When you set an <code>Expires</code> date and time, they're relative to the client the cookie is being set on, not the server.</p> </div> <p>If your site authenticates users, it should regenerate and resend session cookies, even ones that already exist, whenever a user authenticates. This approach helps prevent <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Types_of_attacks#session_fixation">session fixation attacks</a>, where a third party can reuse a user's session.</p>
</div></section><section aria-labelledby="restrict_access_to_cookies"><h3 id="restrict_access_to_cookies">Restrict access to cookies</h3>
<div class="section-content">
<p>You can ensure that cookies are sent securely and aren't accessed by unintended parties or scripts in one of two ways: with the <code>Secure</code> attribute and the <code>HttpOnly</code> attribute.</p> <p>A cookie with the <code>Secure</code> attribute is only sent to the server with an encrypted request over the HTTPS protocol. It's never sent with unsecured HTTP (except on localhost), which means <a href="https://developer.mozilla.org/en-US/docs/Glossary/MitM">man-in-the-middle</a> attackers can't access it easily. Insecure sites (with <code>http:</code> in the URL) can't set cookies with the <code>Secure</code> attribute. However, don't assume that <code>Secure</code> prevents all access to sensitive information in cookies. For example, someone with access to the client's hard disk (or JavaScript if the <code>HttpOnly</code> attribute isn't set) can read and modify the information.</p> <p>A cookie with the <code>HttpOnly</code> attribute is inaccessible to the JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie"><code>Document.cookie</code></a> API; it's only sent to the server. For example, cookies that persist in server-side sessions don't need to be available to JavaScript and should have the <code>HttpOnly</code> attribute. This precaution helps mitigate cross-site scripting (<a href="https://developer.mozilla.org/en-US/docs/Web/Security/Types_of_attacks#cross-site_scripting_(xss)">XSS</a>) attacks.</p> <p>Here's an example:</p> <div class="code-example"><pre data-language="http"><span class="token header"><span class="token header-name keyword">Set-Cookie</span><span class="token punctuation">:</span> <span class="token header-value">id=a3fWa; Expires=Thu, 21 Oct 2021 07:28:00 GMT; Secure; HttpOnly</span></span>
</pre></div>
</div></section><section aria-labelledby="define_where_cookies_are_sent"><h3 id="define_where_cookies_are_sent">Define where cookies are sent</h3>
<div class="section-content">
<p>The <code>Domain</code> and <code>Path</code> attributes define the <em>scope</em> of a cookie: what URLs the cookies should be sent to.</p> <h4 id="domain_attribute">Domain attribute</h4> <p>The <code>Domain</code> attribute specifies which hosts can receive a cookie. If unspecified, the attribute defaults to the same <a href="https://developer.mozilla.org/en-US/docs/Glossary/Host">host</a> that set the cookie, <em>excluding subdomains</em>. If <code>Domain</code> <em>is</em> specified, then subdomains are always included. Therefore, specifying <code>Domain</code> is less restrictive than omitting it. However, it can be helpful when subdomains need to share information about a user.</p> <p>For example, if you set <code>Domain=mozilla.org</code>, cookies are available on subdomains like <code>developer.mozilla.org</code>.</p> <h4 id="path_attribute">Path attribute</h4> <p> The <code>Path</code> attribute indicates a URL path that must exist in the requested URL in order to send the <code>Cookie</code> header. The <code>%x2F</code> ("/") character is considered a directory separator, and subdirectories match as well. </p> <p>For example, if you set <code>Path=/docs</code>, these request paths match:</p> <ul> <li><code>/docs</code></li> <li><code>/docs/</code></li> <li><code>/docs/Web/</code></li> <li><code>/docs/Web/HTTP</code></li> </ul> <p>But these request paths don't:</p> <ul> <li><code>/</code></li> <li><code>/docsets</code></li> <li><code>/fr/docs</code></li> </ul> <h4 id="samesite_attribute">SameSite attribute</h4> <p> The <a href="headers/set-cookie/samesite.html"><code>SameSite</code></a> attribute lets servers specify whether/when cookies are sent with cross-site requests (where <a href="https://developer.mozilla.org/en-US/docs/Glossary/Site">Site</a> is defined by the registrable domain and the <em>scheme</em>: http or https). This provides some protection against cross-site request forgery attacks (<a href="https://developer.mozilla.org/en-US/docs/Glossary/CSRF">CSRF</a>). It takes three possible values: <code>Strict</code>, <code>Lax</code>, and <code>None</code>. </p> <p> With <code>Strict</code>, the browser only sends the cookie with requests from the cookie's origin site. <code>Lax</code> is similar, except the browser also sends the cookie when the user <em>navigates</em> to the cookie's origin site (even if the user is coming from a different site). For example, by following a link from an external site. <code>None</code> specifies that cookies are sent on both originating and cross-site requests, but <em>only in secure contexts</em> (i.e., if <code>SameSite=None</code> then the <code>Secure</code> attribute must also be set). If no <code>SameSite</code> attribute is set, the cookie is treated as <code>Lax</code>. </p> <p>Here's an example:</p> <div class="code-example"><pre data-language="http"><span class="token header"><span class="token header-name keyword">Set-Cookie</span><span class="token punctuation">:</span> <span class="token header-value">mykey=myvalue; SameSite=Strict</span></span>
</pre></div> <div class="notecard note" id="sect4"> <p> <strong>Note:</strong> The standard related to <code>SameSite</code> recently changed (MDN documents the new behavior above). See the cookies <a href="headers/set-cookie/samesite.html#browser_compatibility">Browser compatibility</a> table for information about how the attribute is handled in specific browser versions: </p> <ul> <li> <code>SameSite=Lax</code> is the new default if <code>SameSite</code> isn't specified. Previously, cookies were sent for all requests by default. </li> <li>Cookies with <code>SameSite=None</code> must now also specify the <code>Secure</code> attribute (they require a secure context).</li> <li>Cookies from the same domain are no longer considered to be from the same site if sent using a different scheme (<code>http:</code> or <code>https:</code>).</li> </ul> </div> <h4 id="cookie_prefixes">Cookie prefixes</h4> <p>Because of the design of the cookie mechanism, a server can't confirm that a cookie was set from a secure origin or even tell <em>where</em> a cookie was originally set.</p> <p>A vulnerable application on a subdomain can set a cookie with the <code>Domain</code> attribute, which gives access to that cookie on all other subdomains. This mechanism can be abused in a <em>session fixation</em> attack. See <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Types_of_attacks#session_fixation">session fixation</a> for primary mitigation methods.</p> <p>As a <a href="https://en.wikipedia.org/wiki/Defense_in_depth_(computing)" rel=" noopener">defense-in-depth measure</a>, however, you can use <em>cookie prefixes</em> to assert specific facts about the cookie. Two prefixes are available:</p> <dl> <dt id="__host-"><code>__Host-</code></dt> <dd> <p>If a cookie name has this prefix, it's accepted in a <a href="headers/set-cookie.html"><code>Set-Cookie</code></a> header only if it's also marked with the <code>Secure</code> attribute, was sent from a secure origin, does <em>not</em> include a <code>Domain</code> attribute, and has the <code>Path</code> attribute set to <code>/</code>. This way, these cookies can be seen as "domain-locked".</p> </dd> <dt id="__secure-"><code>__Secure-</code></dt> <dd> <p>If a cookie name has this prefix, it's accepted in a <a href="headers/set-cookie.html"><code>Set-Cookie</code></a> header only if it's marked with the <code>Secure</code> attribute and was sent from a secure origin. This is weaker than the <code>__Host-</code> prefix.</p> </dd> </dl> <p>The browser will reject cookies with these prefixes that don't comply with their restrictions. Note that this ensures that subdomain-created cookies with prefixes are either confined to the subdomain or ignored completely. As the application server only checks for a specific cookie name when determining if the user is authenticated or a CSRF token is correct, this effectively acts as a defense measure against session fixation.</p> <div class="notecard note" id="sect5"> <p><strong>Note:</strong> On the application server, the web application <em>must</em> check for the full cookie name including the prefix. User agents <em>do not</em> strip the prefix from the cookie before sending it in a request's <a href="headers/cookie.html"><code>Cookie</code></a> header.</p> </div> <p>For more information about cookie prefixes and the current state of browser support, see the <a href="headers/set-cookie.html#cookie_prefixes">Prefixes section of the Set-Cookie reference article</a>.</p> <h4 id="javascript_access_using_document.cookie">JavaScript access using Document.cookie</h4> <p>You can create new cookies via JavaScript using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie"><code>Document.cookie</code></a> property. You can access existing cookies from JavaScript as well if the <code>HttpOnly</code> flag isn't set.</p> <div class="code-example"><pre data-language="js">document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> <span class="token string">"yummy_cookie=choco"</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> <span class="token string">"tasty_cookie=strawberry"</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// logs "yummy_cookie=choco; tasty_cookie=strawberry"</span>
</pre></div> <p>Cookies created via JavaScript can't include the <code>HttpOnly</code> flag.</p> <p>Please note the security issues in the <a href="#security">Security</a> section below. Cookies available to JavaScript can be stolen through XSS.</p>
</div></section><section aria-labelledby="security"><h2 id="security">Security</h2>
<div class="section-content">
<div class="notecard note" id="sect6"> <p><strong>Note:</strong> When you store information in cookies, keep in mind that all cookie values are visible to, and can be changed by, the end user. Depending on the application, you may want to use an opaque identifier that the server looks up, or investigate alternative authentication/confidentiality mechanisms such as JSON Web Tokens.</p> </div> <p>Ways to mitigate attacks involving cookies:</p> <ul> <li>Use the <code>HttpOnly</code> attribute to prevent access to cookie values via JavaScript.</li> <li>Cookies that are used for sensitive information (such as indicating authentication) should have a short lifetime, with the <code>SameSite</code> attribute set to <code>Strict</code> or <code>Lax</code>. (See <a href="#samesite_attribute">SameSite attribute</a>, above.) In <a href="headers/set-cookie.html#browser_compatibility">browsers that support SameSite</a>, this ensures that the authentication cookie isn't sent with cross-site requests. This would make the request effectively unauthenticated to the application server.</li> </ul>
</div></section><section aria-labelledby="tracking_and_privacy"><h2 id="tracking_and_privacy">Tracking and privacy</h2>
</section><section aria-labelledby="third-party_cookies"><h3 id="third-party_cookies">Third-party cookies</h3>
<div class="section-content">
<p> A cookie is associated with a particular domain and scheme (such as <code>http</code> or <code>https</code>), and may also be associated with subdomains if the <a href="headers/set-cookie.html"><code>Set-Cookie</code></a> <code>Domain</code> attribute is set. If the cookie domain and scheme match the current page, the cookie is considered to be from the same site as the page, and is referred to as a <em>first-party cookie</em>. </p> <p> If the domain and scheme are different, the cookie is not considered to be from the same site, and is referred to as a <em>third-party cookie</em>. While the server hosting a web page sets first-party cookies, the page may contain images or other components stored on servers in other domains (for example, ad banners) that may set third-party cookies. These are mainly used for advertising and tracking across the web. For example, the <a href="https://policies.google.com/technologies/types" rel=" noopener">types of cookies used by Google</a>. </p> <p> A third-party server can create a profile of a user's browsing history and habits based on cookies sent to it by the same browser when accessing multiple sites. Firefox, by default, blocks third-party cookies that are known to contain trackers. Third-party cookies (or just tracking cookies) may also be blocked by other browser settings or extensions. Cookie blocking can cause some third-party components (such as social media widgets) not to function as intended. </p> <div class="notecard note" id="sect7"> <p><strong>Note:</strong> Servers can (and should) set the cookie <a href="headers/set-cookie/samesite.html">SameSite attribute</a> to specify whether or not cookies may be sent to third party sites.</p> </div>
</div></section><section aria-labelledby="cookie-related_regulations"><h3 id="cookie-related_regulations">Cookie-related regulations</h3>
<div class="section-content">
<p>Legislation or regulations that cover the use of cookies include:</p> <ul> <li>The General Data Privacy Regulation (GDPR) in the European Union</li> <li>The ePrivacy Directive in the EU</li> <li>The California Consumer Privacy Act</li> </ul> <p>These regulations have global reach. They apply to any site on the <em>World Wide</em> Web that users from these jurisdictions access (the EU and California, with the caveat that California's law applies only to entities with gross revenue over 25 million USD, among things).</p> <p>These regulations include requirements such as:</p> <ul> <li>Notifying users that your site uses cookies.</li> <li>Allowing users to opt out of receiving some or all cookies.</li> <li>Allowing users to use the bulk of your service without receiving cookies.</li> </ul> <p>There may be other regulations that govern the use of cookies in your locality. The burden is on you to know and comply with these regulations. There are companies that offer "cookie banner" code that helps you comply with these regulations.</p>
</div></section><section aria-labelledby="other_ways_to_store_information_in_the_browser"><h2 id="other_ways_to_store_information_in_the_browser">Other ways to store information in the browser</h2>
<div class="section-content">
<p>Another approach to storing data in the browser is the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API">Web Storage API</a>. The <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage">window.sessionStorage</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">window.localStorage</a> properties correspond to session and permanent cookies in duration, but have larger storage limits than cookies, and are never sent to a server. More structured and larger amounts of data can be stored using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API">IndexedDB API</a>, or a library built on it.</p> <p>There are some techniques designed to recreate cookies after they're deleted. These are known as "zombie" cookies. These techniques violate the principles of user privacy and user control, may violate data privacy regulations, and could expose a website using them to legal liability.</p>
</div></section><section aria-labelledby="see_also"><h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="headers/set-cookie.html"><code>Set-Cookie</code></a></li> <li><a href="headers/cookie.html"><code>Cookie</code></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie"><code>Document.cookie</code></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/cookieEnabled"><code>Navigator.cookieEnabled</code></a></li> <li><a href="headers/set-cookie/samesite.html">SameSite cookies</a></li> <li><a href="https://firefox-source-docs.mozilla.org/devtools-user/storage_inspector/index.html" rel=" noopener">Inspecting cookies using the Storage Inspector</a></li> <li><a href="https://datatracker.ietf.org/doc/html/rfc6265" rel=" noopener">Cookie specification: RFC 6265</a></li> <li><a href="https://en.wikipedia.org/wiki/HTTP_cookie" rel=" noopener">HTTP cookie on Wikipedia</a></li> <li><a href="https://gdpr.eu/cookies/" rel=" noopener">Cookies, the GDPR, and the ePrivacy Directive</a></li> </ul></div></section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2022 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies</a>
  </p>
</div>
