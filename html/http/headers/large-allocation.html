<h1>Large-Allocation</h1>
<h1>Large-Allocation</h1>
<div class="section-content">
<div class="notecard deprecated" id="sect1"><p><strong>Deprecated:</strong> This feature is no longer recommended. Though some browsers might still support it, it may have already been removed from the relevant web standards, may be in the process of being dropped, or may only be kept for compatibility purposes. Avoid using it, and update existing code if possible; see the <a href="#browser_compatibility">compatibility table</a> at the bottom of this page to guide your decision. Be aware that this feature may cease to work at any time.</p></div>
<div class="notecard nonstandard" id="sect2"><p><strong>Non-standard:</strong> This feature is non-standard and is not on a standards track. Do not use it on production sites facing the Web: it will not work for every user. There may also be large incompatibilities between implementations and the behavior may change in the future.</p></div> <p> The non-standard <code>Large-Allocation</code> response header tells the browser that the page being loaded is going to want to perform a large allocation. It's not implemented in current versions of any browser, but is harmless to send to any browser. </p> <p> <a href="https://developer.mozilla.org/en-US/docs/WebAssembly">WebAssembly</a> or asm.js applications can use large contiguous blocks of allocated memory. For complex games, for example, these allocations can be quite large, sometimes as large as 1GB. The <code>Large-Allocation</code> tells the browser that the web content in the to-be-loaded page is going to want to perform a large contiguous memory allocation and the browser can react to this header by starting a dedicated process for the to-be-loaded document, for example. </p> <figure class="table-container"><div class="_table"><table class="properties"> <tbody> <tr> <th scope="row">Header type</th> <td><a href="https://developer.mozilla.org/en-US/docs/Glossary/Response_header">Response header</a></td> </tr> <tr> <th scope="row"><a href="https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_header_name">Forbidden header name</a></th> <td>no</td> </tr> </tbody> </table></div></figure>
</div>
<section aria-labelledby="syntax"><h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example"><pre data-language="http"><span class="token header"><span class="token header-name keyword">Large-Allocation</span><span class="token punctuation">:</span> <span class="token header-value">0</span></span>
<span class="token header"><span class="token header-name keyword">Large-Allocation</span><span class="token punctuation">:</span> <span class="token header-value">&lt;megabytes&gt;</span></span>
</pre></div></div></section><section aria-labelledby="directives"><h2 id="directives">Directives</h2>
<div class="section-content"><dl> <dt id="0"><code>0</code></dt> <dd> <p> 0 is a special value which represents uncertainty as to what the size of the allocation is. </p> </dd> <dt id="megabytes"><code>&lt;megabytes&gt;</code></dt> <dd> <p>The expected size of the allocation to be performed, in megabytes.</p> </dd> </dl></div></section><section aria-labelledby="examples"><h2 id="examples">Examples</h2>
<div class="section-content"><div class="code-example"><pre data-language="http"><span class="token header"><span class="token header-name keyword">Large-Allocation</span><span class="token punctuation">:</span> <span class="token header-value">0</span></span>
<span class="token header"><span class="token header-name keyword">Large-Allocation</span><span class="token punctuation">:</span> <span class="token header-value">500</span></span>
</pre></div></div></section><section aria-labelledby="troubleshooting_errors"><h2 id="troubleshooting_errors">Troubleshooting errors</h2>
<div class="section-content">
<p> The <code>Large-Allocation</code> header throws warnings or error messages when used incorrectly. You'll encounter them in the <a href="https://firefox-source-docs.mozilla.org/devtools-user/web_console/index.html" rel=" noopener">web console</a>. </p> <dl> <dt id="this_page_was_loaded_in_a_new_process_due_to_a">This page was loaded in a new process due to a <code>Large-Allocation</code> header.</dt> <dd> <p> This message means that the browser saw the <code>Large-Allocation</code> header, and was able to reload the page into a new process which should have more available contiguous memory. </p> </dd> <dt id="a"> A <code>Large-Allocation</code> header was ignored due to the load being triggered by a non-GET request. </dt> <dd> <p> When a <a href="../methods/post.html"><code>POST</code></a> request is used to load a document, that load cannot currently be redirected into a new process. This error is displayed when loading a document with a <code>Large-Allocation</code> header with a non-GET HTTP method. This could be caused due to the document being loaded by a form submission, for example. </p> </dd> <dt id="a_2"> A <code>Large-Allocation</code> header was ignored due to the presence of windows which have a reference to this browsing context through the frame hierarchy or <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/opener"><code>window.opener</code></a>. </dt> <dd> <p> This error means that the document was not loaded at the top level of an user-opened or noopener-opened tab or window. It can occur in these situations: </p> <ul> <li> The document with the <code>Large-Allocation</code> header was loaded in an <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe"><code>&lt;iframe&gt;</code></a>. Firefox cannot move an iframe into a new process currently, so the document must load in the current process. </li> <li> The document with the <code>Large-Allocation</code> header was loaded in a window which was opened by <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/open"><code>window.open()</code></a>, <code>&lt;a target="_blank"&gt;</code> or other similar methods without <code>rel="noopener"</code> or the <code>"noopener"</code> feature being set. These windows must remain in the same process as their opener, as they can communicate, meaning that we cannot allow them to switch processes. </li> <li> The document with the <code>Large-Allocation header</code> has opened another window with <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/open"><code>window.open()</code></a>, <code>&lt;a target="_blank"&gt;</code> or other similar methods without <code>rel="noopener"</code> or the <code>"noopener"</code> feature being set. This is for the same reason as above, namely that they can communicate and thus we cannot allow them to switch processes. </li> </ul> </dd> <dt id="this_page_would_be_loaded_in_a_new_process_due_to_a"> This page would be loaded in a new process due to a <code>Large-Allocation</code> header, however <code>Large-Allocation</code> process creation is disabled on non-Win32 platforms. </dt> <dd> <p> Firefox currently only supports the <code>Large-Allocation</code> header in our 32-bit Windows builds, as memory fragmentation is not an issue in 64-bit builds. If you are running a non-win32 version of Firefox, this error will appear. This check can be disabled with the <code>dom.largeAllocation.forceEnable</code> boolean preference in about:config. </p> </dd> </dl>
</div></section><section aria-labelledby="specifications"><h2 id="specifications">Specifications</h2>
<div class="section-content"><p> Not part of any current specifications. An explainer of the ideas behind this header can be found in <a href="https://gist.github.com/mystor/5739e222e398efc6c29108be55eb6fe3" rel=" noopener">this document</a>. </p></div></section><h2 id="browser_compatibility">Browser compatibility</h2>
<table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>Large-Allocation</code></th>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-no"><div>53-100</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-no"><div>No</div></td>
<td class="bc-supports-no"><div>No</div></td>
</tr></tbody>
</table>
<section aria-labelledby="see_also"><h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="https://developer.mozilla.org/en-US/docs/WebAssembly">WebAssembly</a></li> </ul></div></section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2022 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Large-Allocation" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Large-Allocation</a>
  </p>
</div>
